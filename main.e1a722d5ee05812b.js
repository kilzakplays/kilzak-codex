"use strict";(self.webpackChunkchannel_hall_of_fame=self.webpackChunkchannel_hall_of_fame||[]).push([[792],{41:(mo,Ir,pt)=>{pt.d(Ir,{$b:()=>st,Ey:()=>Zt,He:()=>Qn,Vy:()=>He});const T=[];var st=function(ge){return ge[ge.DEBUG=0]="DEBUG",ge[ge.VERBOSE=1]="VERBOSE",ge[ge.INFO=2]="INFO",ge[ge.WARN=3]="WARN",ge[ge.ERROR=4]="ERROR",ge[ge.SILENT=5]="SILENT",ge}(st||{});const Ce={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},ee=st.INFO,Pn={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},Et=(ge,ye,...Be)=>{if(ye<ge.logLevel)return;const bt=(new Date).toISOString(),yt=Pn[ye];if(!yt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ye})`);console[yt](`[${bt}]  ${ge.name}:`,...Be)};class He{constructor(ye){this.name=ye,this._logLevel=ee,this._logHandler=Et,this._userLogHandler=null,T.push(this)}get logLevel(){return this._logLevel}set logLevel(ye){if(!(ye in st))throw new TypeError(`Invalid value "${ye}" assigned to \`logLevel\``);this._logLevel=ye}setLogLevel(ye){this._logLevel="string"==typeof ye?Ce[ye]:ye}get logHandler(){return this._logHandler}set logHandler(ye){if("function"!=typeof ye)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ye}get userLogHandler(){return this._userLogHandler}set userLogHandler(ye){this._userLogHandler=ye}debug(...ye){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...ye),this._logHandler(this,st.DEBUG,...ye)}log(...ye){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...ye),this._logHandler(this,st.VERBOSE,...ye)}info(...ye){this._userLogHandler&&this._userLogHandler(this,st.INFO,...ye),this._logHandler(this,st.INFO,...ye)}warn(...ye){this._userLogHandler&&this._userLogHandler(this,st.WARN,...ye),this._logHandler(this,st.WARN,...ye)}error(...ye){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...ye),this._logHandler(this,st.ERROR,...ye)}}function Qn(ge){T.forEach(ye=>{ye.setLogLevel(ge)})}function Zt(ge,ye){for(const Be of T){let bt=null;ye&&ye.level&&(bt=Ce[ye.level]),Be.userLogHandler=null===ge?null:(yt,dr,...Ot)=>{const ce=Ot.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch{return null}}).filter(De=>De).join(" ");dr>=(bt??yt.logLevel)&&ge({level:st[dr].toLowerCase(),message:ce,args:Ot,type:yt.name})}}}},345:(mo,Ir,pt)=>{pt.d(Ir,{A:()=>dr});var T=pt(858),st=pt(362),Ce=pt(852),ee=pt(41);class Pn{constructor(ce,De){this._delegate=ce,this.firebase=De,(0,Ce._addComponent)(ce,new st.uA("app-compat",()=>this,"PUBLIC")),this.container=ce.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ce){this._delegate.automaticDataCollectionEnabled=ce}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ce=>{this._delegate.checkDestroyed(),ce()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Ce.deleteApp)(this._delegate)))}_getService(ce,De=Ce._DEFAULT_ENTRY_NAME){var Me;this._delegate.checkDestroyed();const Qe=this._delegate.container.getProvider(ce);return!Qe.isInitialized()&&"EXPLICIT"===(null===(Me=Qe.getComponent())||void 0===Me?void 0:Me.instantiationMode)&&Qe.initialize(),Qe.getImmediate({identifier:De})}_removeServiceInstance(ce,De=Ce._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ce).clearInstance(De)}_addComponent(ce){(0,Ce._addComponent)(this._delegate,ce)}_addOrOverwriteComponent(ce){(0,Ce._addOrOverwriteComponent)(this._delegate,ce)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const He=new T.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ge=function Zt(){const Ot=function Qn(Ot){const ce={},De={__esModule:!0,initializeApp:function dt(je,jt={}){const Ht=Ce.initializeApp(je,jt);if((0,T.gR)(ce,Ht.name))return ce[Ht.name];const he=new Ot(Ht,De);return ce[Ht.name]=he,he},app:Qe,registerVersion:Ce.registerVersion,setLogLevel:Ce.setLogLevel,onLog:Ce.onLog,apps:null,SDK_VERSION:Ce.SDK_VERSION,INTERNAL:{registerComponent:function kt(je){const jt=je.name,Ht=jt.replace("-compat","");if(Ce._registerComponent(je)&&"PUBLIC"===je.type){const he=(In=Qe())=>{if("function"!=typeof In[Ht])throw He.create("invalid-app-argument",{appName:jt});return In[Ht]()};void 0!==je.serviceProps&&(0,T.zw)(he,je.serviceProps),De[Ht]=he,Ot.prototype[Ht]=function(...In){return this._getService.bind(this,jt).apply(this,je.multipleInstances?In:[])}}return"PUBLIC"===je.type?De[Ht]:null},removeApp:function Me(je){delete ce[je]},useAsService:function Xt(je,jt){return"serverAuth"===jt?null:jt},modularAPIs:Ce}};function Qe(je){if(!(0,T.gR)(ce,je=je||Ce._DEFAULT_ENTRY_NAME))throw He.create("no-app",{appName:je});return ce[je]}return De.default=De,Object.defineProperty(De,"apps",{get:function Ye(){return Object.keys(ce).map(je=>ce[je])}}),Qe.App=Ot,De}(Pn);return Ot.INTERNAL=Object.assign(Object.assign({},Ot.INTERNAL),{createFirebaseNamespace:Zt,extendNamespace:function ce(De){(0,T.zw)(Ot,De)},createSubscribe:T.tD,ErrorFactory:T.FA,deepExtend:T.zw}),Ot}(),ye=new ee.Vy("@firebase/app-compat");try{const Ot=(0,T.mS)();if(void 0!==Ot.firebase){ye.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const ce=Ot.firebase.SDK_VERSION;ce&&ce.indexOf("LITE")>=0&&ye.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const dr=ge;!function yt(Ot){(0,Ce.registerVersion)("@firebase/app-compat","0.3.1",Ot)}()},362:(mo,Ir,pt)=>{pt.d(Ir,{h1:()=>Qn,uA:()=>Ce});var T=pt(467),st=pt(858);class Ce{constructor(ge,ye,Be){this.name=ge,this.instanceFactory=ye,this.type=Be,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ge){return this.instantiationMode=ge,this}setMultipleInstances(ge){return this.multipleInstances=ge,this}setServiceProps(ge){return this.serviceProps=ge,this}setInstanceCreatedCallback(ge){return this.onInstanceCreated=ge,this}}const ee="[DEFAULT]";class Pn{constructor(ge,ye){this.name=ge,this.container=ye,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ge){const ye=this.normalizeInstanceIdentifier(ge);if(!this.instancesDeferred.has(ye)){const Be=new st.cY;if(this.instancesDeferred.set(ye,Be),this.isInitialized(ye)||this.shouldAutoInitialize())try{const bt=this.getOrInitializeService({instanceIdentifier:ye});bt&&Be.resolve(bt)}catch{}}return this.instancesDeferred.get(ye).promise}getImmediate(ge){var ye;const Be=this.normalizeInstanceIdentifier(ge?.identifier),bt=null!==(ye=ge?.optional)&&void 0!==ye&&ye;if(!this.isInitialized(Be)&&!this.shouldAutoInitialize()){if(bt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Be})}catch(yt){if(bt)return null;throw yt}}getComponent(){return this.component}setComponent(ge){if(ge.name!==this.name)throw Error(`Mismatching Component ${ge.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ge,this.shouldAutoInitialize()){if(function He(Zt){return"EAGER"===Zt.instantiationMode}(ge))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[ye,Be]of this.instancesDeferred.entries()){const bt=this.normalizeInstanceIdentifier(ye);try{const yt=this.getOrInitializeService({instanceIdentifier:bt});Be.resolve(yt)}catch{}}}}clearInstance(ge=ee){this.instancesDeferred.delete(ge),this.instancesOptions.delete(ge),this.instances.delete(ge)}delete(){var ge=this;return(0,T.A)(function*(){const ye=Array.from(ge.instances.values());yield Promise.all([...ye.filter(Be=>"INTERNAL"in Be).map(Be=>Be.INTERNAL.delete()),...ye.filter(Be=>"_delete"in Be).map(Be=>Be._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ge=ee){return this.instances.has(ge)}getOptions(ge=ee){return this.instancesOptions.get(ge)||{}}initialize(ge={}){const{options:ye={}}=ge,Be=this.normalizeInstanceIdentifier(ge.instanceIdentifier);if(this.isInitialized(Be))throw Error(`${this.name}(${Be}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const bt=this.getOrInitializeService({instanceIdentifier:Be,options:ye});for(const[yt,dr]of this.instancesDeferred.entries())Be===this.normalizeInstanceIdentifier(yt)&&dr.resolve(bt);return bt}onInit(ge,ye){var Be;const bt=this.normalizeInstanceIdentifier(ye),yt=null!==(Be=this.onInitCallbacks.get(bt))&&void 0!==Be?Be:new Set;yt.add(ge),this.onInitCallbacks.set(bt,yt);const dr=this.instances.get(bt);return dr&&ge(dr,bt),()=>{yt.delete(ge)}}invokeOnInitCallbacks(ge,ye){const Be=this.onInitCallbacks.get(ye);if(Be)for(const bt of Be)try{bt(ge,ye)}catch{}}getOrInitializeService({instanceIdentifier:ge,options:ye={}}){let Be=this.instances.get(ge);if(!Be&&this.component&&(Be=this.component.instanceFactory(this.container,{instanceIdentifier:(Zt=ge,Zt===ee?void 0:Zt),options:ye}),this.instances.set(ge,Be),this.instancesOptions.set(ge,ye),this.invokeOnInitCallbacks(Be,ge),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ge,Be)}catch{}var Zt;return Be||null}normalizeInstanceIdentifier(ge=ee){return this.component?this.component.multipleInstances?ge:ee:ge}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Qn{constructor(ge){this.name=ge,this.providers=new Map}addComponent(ge){const ye=this.getProvider(ge.name);if(ye.isComponentSet())throw new Error(`Component ${ge.name} has already been registered with ${this.name}`);ye.setComponent(ge)}addOrOverwriteComponent(ge){this.getProvider(ge.name).isComponentSet()&&this.providers.delete(ge.name),this.addComponent(ge)}getProvider(ge){if(this.providers.has(ge))return this.providers.get(ge);const ye=new Pn(ge,this);return this.providers.set(ge,ye),ye}getProviders(){return Array.from(this.providers.values())}}},467:(mo,Ir,pt)=>{function T(Ce,ee,Pn,Et,He,Qn,Zt){try{var ge=Ce[Qn](Zt),ye=ge.value}catch(Be){return void Pn(Be)}ge.done?ee(ye):Promise.resolve(ye).then(Et,He)}function st(Ce){return function(){var ee=this,Pn=arguments;return new Promise(function(Et,He){var Qn=Ce.apply(ee,Pn);function Zt(ye){T(Qn,Et,He,Zt,ge,"next",ye)}function ge(ye){T(Qn,Et,He,Zt,ge,"throw",ye)}Zt(void 0)})}}pt.d(Ir,{A:()=>st})},532:()=>{const yt=function(ce,...De){if(yt.translate){const Qe=yt.translate(ce,De);ce=Qe[0],De=Qe[1]}let Me=Ot(ce[0],ce.raw[0]);for(let Qe=1;Qe<ce.length;Qe++)Me+=De[Qe-1]+Ot(ce[Qe],ce.raw[Qe]);return Me},dr=":";function Ot(ce,De){return De.charAt(0)===dr?ce.substring(function bt(ce,De){for(let Me=1,Qe=1;Me<ce.length;Me++,Qe++)if("\\"===De[Qe])Qe++;else if(":"===ce[Me])return Me;throw new Error(`Unterminated $localize metadata block in "${De}".`)}(ce,De)+1):ce}globalThis.$localize=yt},635:(mo,Ir,pt)=>{function ee(Q,te){var ie={};for(var re in Q)Object.prototype.hasOwnProperty.call(Q,re)&&te.indexOf(re)<0&&(ie[re]=Q[re]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var le=0;for(re=Object.getOwnPropertySymbols(Q);le<re.length;le++)te.indexOf(re[le])<0&&Object.prototype.propertyIsEnumerable.call(Q,re[le])&&(ie[re[le]]=Q[re[le]])}return ie}function Be(Q,te,ie,re){return new(ie||(ie=Promise))(function(ue,Ge){function xt(tn){try{tt(re.next(tn))}catch(Jn){Ge(Jn)}}function On(tn){try{tt(re.throw(tn))}catch(Jn){Ge(Jn)}}function tt(tn){tn.done?ue(tn.value):function le(ue){return ue instanceof ie?ue:new ie(function(Ge){Ge(ue)})}(tn.value).then(xt,On)}tt((re=re.apply(Q,te||[])).next())})}function dt(Q){return this instanceof dt?(this.v=Q,this):new dt(Q)}function Ye(Q,te,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,re=ie.apply(Q,te||[]),ue=[];return le=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),xt("next"),xt("throw"),xt("return",function Ge(an){return function(hr){return Promise.resolve(hr).then(an,Jn)}}),le[Symbol.asyncIterator]=function(){return this},le;function xt(an,hr){re[an]&&(le[an]=function(Hn){return new Promise(function(Zn,Zr){ue.push([an,Hn,Zn,Zr])>1||On(an,Hn)})},hr&&(le[an]=hr(le[an])))}function On(an,hr){try{!function tt(an){an.value instanceof dt?Promise.resolve(an.value.v).then(tn,Jn):ui(ue[0][2],an)}(re[an](hr))}catch(Hn){ui(ue[0][3],Hn)}}function tn(an){On("next",an)}function Jn(an){On("throw",an)}function ui(an,hr){an(hr),ue.shift(),ue.length&&On(ue[0][0],ue[0][1])}}function Xt(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,te=Q[Symbol.asyncIterator];return te?te.call(Q):(Q=function Ot(Q){var te="function"==typeof Symbol&&Symbol.iterator,ie=te&&Q[te],re=0;if(ie)return ie.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&re>=Q.length&&(Q=void 0),{value:Q&&Q[re++],done:!Q}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),ie={},re("next"),re("throw"),re("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function re(ue){ie[ue]=Q[ue]&&function(Ge){return new Promise(function(xt,On){!function le(ue,Ge,xt,On){Promise.resolve(On).then(function(tt){ue({value:tt,done:xt})},Ge)}(xt,On,(Ge=Q[ue](Ge)).done,Ge.value)})}}}pt.d(Ir,{AQ:()=>Ye,N3:()=>dt,Tt:()=>ee,sH:()=>Be,xN:()=>Xt}),"function"==typeof SuppressedError&&SuppressedError},665:(mo,Ir,pt)=>{var T=pt(467);function st(n,e){return Object.is(n,e)}let Ce=null,ee=!1,Pn=1;const Et=Symbol("SIGNAL");function He(n){const e=Ce;return Ce=n,e}const ye={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Be(n){if(ee)throw new Error("");if(null===Ce)return;Ce.consumerOnSignalRead(n);const e=Ce.nextProducerIndex++;jt(Ce),e<Ce.producerNode.length&&Ce.producerNode[e]!==n&&je(Ce)&&Xt(Ce.producerNode[e],Ce.producerIndexOfThis[e]),Ce.producerNode[e]!==n&&(Ce.producerNode[e]=n,Ce.producerIndexOfThis[e]=je(Ce)?kt(n,Ce,e):0),Ce.producerLastReadVersion[e]=n.version}function yt(n){if((!je(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==Pn)){if(!n.producerMustRecompute(n)&&!dt(n))return void De(n);n.producerRecomputeValue(n),De(n)}}function dr(n){if(void 0===n.liveConsumerNode)return;const e=ee;ee=!0;try{for(const t of n.liveConsumerNode)t.dirty||ce(t)}finally{ee=e}}function Ot(){return!1!==Ce?.consumerAllowSignalWrites}function ce(n){n.dirty=!0,dr(n),n.consumerMarkedDirty?.(n)}function De(n){n.dirty=!1,n.lastCleanEpoch=Pn}function Me(n){return n&&(n.nextProducerIndex=0),He(n)}function Qe(n,e){if(He(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(je(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Xt(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function dt(n){jt(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(yt(t),r!==t.version))return!0}return!1}function Ye(n){if(jt(n),je(n))for(let e=0;e<n.producerNode.length;e++)Xt(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function kt(n,e,t){if(Ht(n),0===n.liveConsumerNode.length&&he(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=kt(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Xt(n,e){if(Ht(n),1===n.liveConsumerNode.length&&he(n))for(let r=0;r<n.producerNode.length;r++)Xt(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];jt(i),i.producerIndexOfThis[r]=e}}function je(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function jt(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Ht(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function he(n){return void 0!==n.producerNode}const yn=Symbol("UNSET"),en=Symbol("COMPUTING"),ar=Symbol("ERRORED"),Yn={...ye,value:yn,dirty:!0,error:null,equal:st,kind:"computed",producerMustRecompute:n=>n.value===yn||n.value===en,producerRecomputeValue(n){if(n.value===en)throw new Error("Detected cycle in computations.");const e=n.value;n.value=en;const t=Me(n);let r,i=!1;try{r=n.computation(),He(null),i=e!==yn&&e!==ar&&r!==ar&&n.equal(e,r)}catch(o){r=ar,n.error=o}finally{Qe(n,t)}i?n.value=e:(n.value=r,n.version++)}};let Ga=function ss(){throw new Error};function _o(n){Ga(n)}function re(n,e){Ot()||_o(n),n.equal(n.value,e)||(n.value=e,function xt(n){n.version++,function bt(){Pn++}(),dr(n)}(n))}const Ge={...ye,equal:st,value:void 0,kind:"signal"};let hr;function Hn(){return hr}function Zn(n){const e=hr;return hr=n,e}const Zr=Symbol("NotFound");function At(n){return"function"==typeof n}function Ns(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}Error;const as=Ns(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Lo(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Xn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(At(r))try{r()}catch(o){e=o instanceof as?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{Wi(o)}catch(s){e=e??[],s instanceof as?e=[...e,...s.errors]:e.push(s)}}if(e)throw new as(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Wi(e);else{if(e instanceof Xn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Lo(t,e)}remove(e){const{_finalizers:t}=this;t&&Lo(t,e),e instanceof Xn&&e._removeParent(this)}}Xn.EMPTY=(()=>{const n=new Xn;return n.closed=!0,n})();const Gi=Xn.EMPTY;function zi(n){return n instanceof Xn||n&&"closed"in n&&At(n.remove)&&At(n.add)&&At(n.unsubscribe)}function Wi(n){At(n)?n():n.unsubscribe()}const di={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},yo={setTimeout(n,e,...t){const{delegate:r}=yo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=yo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Wa(n){yo.setTimeout(()=>{const{onUnhandledError:e}=di;if(!e)throw n;e(n)})}function cs(){}const Ms=Ka("C",void 0,void 0);function Ka(n,e,t){return{kind:n,value:e,error:t}}let Pr=null;function fr(n){if(di.useDeprecatedSynchronousErrorHandling){const e=!Pr;if(e&&(Pr={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Pr;if(Pr=null,t)throw r}}else n()}class Qa extends Xn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,zi(e)&&e.add(this)):this.destination=Ja}static create(e,t,r){return new us(e,t,r)}next(e){this.isStopped?Os(function ls(n){return Ka("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Os(function qa(n){return Ka("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Os(Ms,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ya=Function.prototype.bind;function Vo(n,e){return Ya.call(n,e)}class aa{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Ps(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Ps(r)}else Ps(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ps(t)}}}class us extends Qa{constructor(e,t,r){let i;if(super(),At(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&di.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Vo(e.next,o),error:e.error&&Vo(e.error,o),complete:e.complete&&Vo(e.complete,o)}):i=e}this.destination=new aa(i)}}function Ps(n){di.useDeprecatedSynchronousErrorHandling?function Tu(n){di.useDeprecatedSynchronousErrorHandling&&Pr&&(Pr.errorThrown=!0,Pr.error=n)}(n):Wa(n)}function Os(n,e){const{onStoppedNotification:t}=di;t&&yo.setTimeout(()=>t(n,e))}const Ja={closed:!0,next:cs,error:function bh(n){throw n},complete:cs},qi="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ki(n){return n}function L(n){return 0===n.length?Ki:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let R=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function q(n){return n&&n instanceof Qa||function de(n){return n&&At(n.next)&&At(n.error)&&At(n.complete)}(n)&&zi(n)}(t)?t:new us(t,r,i);return fr(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=B(r))((i,o)=>{const s=new us({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[qi](){return this}pipe(...t){return L(t)(this)}toPromise(t){return new(t=B(t))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function B(n){var e;return null!==(e=n??di.Promise)&&void 0!==e?e:Promise}const qe=Ns(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Se=(()=>{class n extends R{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new qt(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new qe}next(t){fr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){fr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){fr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?Gi:(this.currentObservers=null,o.push(t),new Xn(()=>{this.currentObservers=null,Lo(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new R;return t.source=this,t}}return n.create=(e,t)=>new qt(e,t),n})();class qt extends Se{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Gi}}class Nt extends Se{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function pr(n){return At(n?.lift)}function Ft(n){return e=>{if(pr(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Je(n,e,t,r,i){return new Si(n,e,t,r,i)}class Si extends Qa{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function $e(n,e){return Ft((t,r)=>{let i=0;t.subscribe(Je(r,o=>{r.next(n.call(e,o,i++))}))})}const wu="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss";class se extends Error{code;constructor(e,t){super(function Bo(n,e){return`${function Za(n){return`NG0${Math.abs(n)}`}(n)}${e?": "+e:""}`}(e,t)),this.code=e}}const K=Symbol("InputSignalNode#UNSET"),$={...Ge,transformFn:void 0,applyValueToInputSignal(n,e){re(n,e)}};function Ae(n,e){const t=Object.create($);function r(){if(Be(t),t.value===K)throw new se(-950,null);return t.value}return t.value=n,t.transformFn=e?.transform,r[Et]=t,r}function Ze(n){return{toString:n}.toString()}const ht="__parameters__";function Mt(n,e,t){return Ze(()=>{const r=function Ri(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(c,u,h){const m=c.hasOwnProperty(ht)?c[ht]:Object.defineProperty(c,ht,{value:[]})[ht];for(;m.length<=h;)m.push(null);return(m[h]=m[h]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}const vn=globalThis;function ln(n){for(let e in n)if(n[e]===ln)return e;throw Error("Could not find renamed property on target object.")}function Jw(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Tr(n){if("string"==typeof n)return n;if(Array.isArray(n))return`[${n.map(Tr).join(", ")}]`;if(null==n)return""+n;const e=n.overriddenName||n.name;if(e)return`${e}`;const t=n.toString();if(null==t)return""+t;const r=t.indexOf("\n");return r>=0?t.slice(0,r):t}function Ih(n,e){return n?e?`${n} ${e}`:n:e||""}const Zw=ln({__forward_ref__:ln});function $t(n){return n.__forward_ref__=$t,n.toString=function(){return Tr(this())},n}function ft(n){return Th(n)?n():n}function Th(n){return"function"==typeof n&&n.hasOwnProperty(Zw)&&n.__forward_ref__===$t}function fe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Rt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Dh(n){return d0(n,Yc)||d0(n,Ah)}function d0(n,e){return n.hasOwnProperty(e)?n[e]:null}function Ch(n){return n&&(n.hasOwnProperty(Ug)||n.hasOwnProperty(Sh))?n[Ug]:null}const Yc=ln({\u0275prov:ln}),Ug=ln({\u0275inj:ln}),Ah=ln({ngInjectableDef:ln}),Sh=ln({ngInjectorDef:ln});class pe{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=fe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Cu(n){return n&&!!n.\u0275providers}const ds=ln({\u0275cmp:ln}),jo=ln({\u0275dir:ln}),Au=ln({\u0275pipe:ln}),g0=ln({\u0275mod:ln}),Or=ln({\u0275fac:ln}),Xc=ln({__NG_ELEMENT_ID__:ln}),Rh=ln({__NG_ENV_ID__:ln});function gt(n){return"string"==typeof n?n:null==n?"":String(n)}function m0(n,e){throw new se(-200,n)}function xs(n,e){throw new se(-201,!1)}var It=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(It||{});let Gg;function el(){return Gg}function Yi(n){const e=Gg;return Gg=n,e}function Nh(n,e,t){const r=Dh(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&It.Optional?null:void 0!==e?e:void xs()}const vo={},Mh="__NG_DI_FLAG__";class zg{injector;constructor(e){this.injector=e}retrieve(e,t){return this.injector.get(e,t.optional?Zr:vo,t)}}const Ru="ngTempTokenPath",tl=/\n/gm,Nu="__source";function _0(n,e=It.Default){if(void 0===Hn())throw new se(-203,!1);if(null===Hn())return Nh(n,void 0,e);{const t=Hn();let r;return r=t instanceof zg?t.injector:t,r.get(n,e&It.Optional?null:void 0,e)}}function me(n,e=It.Default){return(el()||_0)(ft(n),e)}function N(n,e=It.Default){return me(n,Mu(e))}function Mu(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Wg(n){const e=[];for(let t=0;t<n.length;t++){const r=ft(n[t]);if(Array.isArray(r)){if(0===r.length)throw new se(900,!1);let i,o=It.Default;for(let s=0;s<r.length;s++){const a=r[s],c=Oh(a);"number"==typeof c?-1===c?i=a.token:o|=c:i=a}e.push(me(i,o))}else e.push(me(r))}return e}function ec(n,e){return n[Mh]=e,n.prototype[Mh]=e,n}function Oh(n){return n[Mh]}const hs=ec(Mt("Optional"),8),Pu=ec(Mt("SkipSelf"),4);function Fs(n,e){return n.hasOwnProperty(Or)?n[Or]:null}function tc(n,e){n.forEach(t=>Array.isArray(t)?tc(t,e):e(t))}function xh(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function nc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Mi(n,e,t){let r=ku(n,e);return r>=0?n[1|r]=t:(r=~r,function Fh(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Ou(n,e){const t=ku(n,e);if(t>=0)return n[1|t]}function ku(n,e){return function Qg(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}(n,e,1)}const Ho={},Lt=[],ei=new pe(""),Lh=new pe("",-1),xu=new pe("");class rc{get(e,t=vo){if(t===vo){const r=new Error(`NullInjectorError: No provider for ${Tr(e)}!`);throw r.name="NullInjectorError",r}return t}}function hi(n,e){const t=n[g0]||null;if(!t&&!0===e)throw new Error(`Type ${Tr(n)} does not have '\u0275mod' property.`);return t}function Tt(n){return n[ds]||null}function fi(n){return n[Au]||null}function fs(n){return{\u0275providers:n}}function Yg(...n){return{\u0275providers:Vh(0,n),\u0275fromNgModule:!0}}function Vh(n,...e){const t=[],r=new Set;let i;const o=s=>{t.push(s)};return tc(e,s=>{const a=s;Uh(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&Bh(i,o),t}function Bh(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];Jg(i,o=>{e(o,r)})}}function Uh(n,e,t,r){if(!(n=ft(n)))return!1;let i=null,o=Ch(n);const s=!o&&Tt(n);if(o||s){if(s&&!s.standalone)return!1;i=n}else{const c=n.ngModule;if(o=Ch(c),!o)return!1;i=c}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const u of c)Uh(u,e,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let u;r.add(i);try{tc(o.imports,h=>{Uh(h,e,t,r)&&(u||=[],u.push(h))})}finally{}void 0!==u&&Bh(u,e)}if(!a){const u=Fs(i)||(()=>new i);e({provide:i,useFactory:u,deps:Lt},i),e({provide:xu,useValue:i,multi:!0},i),e({provide:ei,useValue:()=>me(i),multi:!0},i)}const c=o.providers;if(null!=c&&!a){const u=n;Jg(c,h=>{e(h,u)})}}}return i!==n&&void 0!==n.providers}function Jg(n,e){for(let t of n)Cu(t)&&(t=t.\u0275providers),Array.isArray(t)?Jg(t,e):e(t)}const Zg=ln({provide:String,useValue:ln});function Xg(n){return null!==n&&"object"==typeof n&&Zg in n}function oc(n){return"function"==typeof n}const Fu=new pe(""),Hh={},$h={};let em;function rl(){return void 0===em&&(em=new rc),em}class cr{}class Ls extends cr{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Vu(e,s=>this.processProvider(s)),this.records.set(Lh,ua(void 0,this)),i.has("environment")&&this.records.set(cr,ua(void 0,this));const o=this.records.get(Fu);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(xu,Lt,It.Self))}retrieve(e,t){return this.get(e,t.optional?Zr:vo,t)}destroy(){Lu(this),this._destroyed=!0;const e=He(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),He(e)}}onDestroy(e){return Lu(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Lu(this);const t=Zn(this),r=Yi(void 0);try{return e()}finally{Zn(t),Yi(r)}}get(e,t=vo,r=It.Default){if(Lu(this),e.hasOwnProperty(Rh))return e[Rh](this);r=Mu(r);const o=Zn(this),s=Yi(void 0);try{if(!(r&It.SkipSelf)){let c=this.records.get(e);if(void 0===c){const u=function T0(n){return"function"==typeof n||"object"==typeof n&&n instanceof pe}(e)&&Dh(e);c=u&&this.injectableDefInScope(u)?ua(tm(e),Hh):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c,r)}return(r&It.Self?rl():this.parent).get(e,t=r&It.Optional&&t===vo?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Ru]=a[Ru]||[]).unshift(Tr(e)),o)throw a;return function y0(n,e,t,r){const i=n[Ru];throw e[Nu]&&i.unshift(e[Nu]),n.message=function v0(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Tr(e);if(Array.isArray(e))i=e.map(Tr).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Tr(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(tl,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Ru]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Yi(s),Zn(o)}}resolveInjectorInitializers(){const e=He(null),t=Zn(this),r=Yi(void 0);try{const o=this.get(ei,Lt,It.Self);for(const s of o)s()}finally{Zn(t),Yi(r),He(e)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Tr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){let t=oc(e=ft(e))?e:ft(e&&e.provide);const r=function dD(n){return Xg(n)?ua(void 0,n.useValue):ua(Gh(n),Hh)}(e);if(!oc(e)&&!0===e.multi){let i=this.records.get(t);i||(i=ua(void 0,Hh,!0),i.factory=()=>Wg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){const i=He(null);try{return t.value===$h?m0(Tr(e)):t.value===Hh&&(t.value=$h,t.value=t.factory(void 0,r)),"object"==typeof t.value&&t.value&&function fD(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{He(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;const t=ft(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function tm(n){const e=Dh(n),t=null!==e?e.factory:Fs(n);if(null!==t)return t;if(n instanceof pe)throw new se(204,!1);if(n instanceof Function)return function nm(n){if(n.length>0)throw new se(204,!1);const t=function Bg(n){return n&&(n[Yc]||n[Ah])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new se(204,!1)}function Gh(n,e,t){let r;if(oc(n)){const i=ft(n);return Fs(i)||tm(i)}if(Xg(n))r=()=>ft(n.useValue);else if(function jh(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Wg(n.deps||[]));else if(function I0(n){return!(!n||!n.useExisting)}(n))r=(i,o)=>me(ft(n.useExisting),void 0!==o&&o&It.Optional?It.Optional:void 0);else{const i=ft(n&&(n.useClass||n.provide));if(!function hD(n){return!!n.deps}(n))return Fs(i)||tm(i);r=()=>new i(...Wg(n.deps))}return r}function Lu(n){if(n.destroyed)throw new se(205,!1)}function ua(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Vu(n,e){for(const t of n)Array.isArray(t)?Vu(t,e):t&&Cu(t)?Vu(t.\u0275providers,e):e(t)}function Eo(n,e){let t;n instanceof Ls?(Lu(n),t=n):t=new zg(n);const i=Zn(t),o=Yi(void 0);try{return e()}finally{Zn(i),Yi(o)}}function sc(){return void 0!==el()||null!=Hn()}function Vs(n){if(!sc())throw new se(-203,!1)}function xn(n){return Array.isArray(n)&&"object"==typeof n[1]}function Dr(n){return Array.isArray(n)&&!0===n[1]}function Uu(n){return!!(4&n.flags)}function Go(n){return n.componentOffset>-1}function Kh(n){return!(1&~n.flags)}function Oi(n){return!!n.template}function js(n){return!!(512&n[2])}function Ji(n){return!(256&~n[2])}class TD{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function ll(n,e,t,r){null!==e?e.applyValueToInputSignal(e,r):n[t]=r}const Cr=(()=>{const n=()=>M0;return n.ngInherit=!0,n})();function M0(n){return n.type.prototype.ngOnChanges&&(n.setInput=am),wD}function wD(){const n=Yh(this),e=n?.current;if(e){const t=n.previous;if(t===Ho)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function am(n,e,t,r,i){const o=this.declaredInputs[r],s=Yh(n)||function DD(n,e){return n[P0]=e}(n,{previous:Ho,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new TD(u&&u.currentValue,t,c===Ho),ll(n,e,i,t)}const P0="__ngSimpleChanges__";function Yh(n){return n[P0]||null}function Vt(n){for(;Array.isArray(n);)n=n[0];return n}function fa(n,e){return Vt(e[n])}function zr(n,e){return Vt(e[n.index])}function Zi(n,e){return n.data[e]}function Hs(n,e){return n[e]}function pi(n,e){const t=e[n];return xn(t)?t:t[0]}function cm(n){return!(128&~n[2])}function Xi(n,e){return null==e?null:n[e]}function O0(n){n[17]=0}function um(n){1024&n[2]||(n[2]|=1024,cm(n)&&ul(n))}function Ku(n){return!!(9216&n[2]||n[24]?.dirty)}function Qu(n){n[10].changeDetectionScheduler?.notify(8),64&n[2]&&(n[2]|=1024),Ku(n)&&ul(n)}function ul(n){n[10].changeDetectionScheduler?.notify(0);let e=$s(n);for(;null!==e&&!(8192&e[2])&&(e[2]|=8192,cm(e));)e=$s(e)}function dl(n,e){if(Ji(n))throw new se(911,!1);null===n[21]&&(n[21]=[]),n[21].push(e)}function $s(n){const e=n[3];return Dr(e)?e[3]:e}function lc(n){return n[7]??=[]}function dm(n){return n.cleanup??=[]}const ut={lFrame:B0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let hm=!1;function pm(){return ut.bindingsEnabled}function uc(){return null!==ut.skipHydrationRootTNode}function J(){return ut.lFrame.lView}function ct(){return ut.lFrame.tView}function ni(n){return ut.lFrame.contextLView=n,n[8]}function Fr(n){return ut.lFrame.contextLView=null,n}function vt(){let n=Xh();for(;null!==n&&64===n.type;)n=n.parent;return n}function Xh(){return ut.lFrame.currentTNode}function eo(n,e){const t=ut.lFrame;t.currentTNode=n,t.isParent=e}function _m(){return ut.lFrame.isParent}function ef(){ut.lFrame.isParent=!1}function tf(){return hm}function nf(n){const e=hm;return hm=n,e}function Io(){return ut.lFrame.bindingIndex++}function zs(n){const e=ut.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function sf(n,e){const t=ut.lFrame;t.bindingIndex=t.bindingRootIndex=n,Em(e)}function Em(n){ut.lFrame.currentDirectiveIndex=n}function Im(){return ut.lFrame.currentQueryIndex}function af(n){ut.lFrame.currentQueryIndex=n}function kD(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[5]:null}function V0(n,e,t){if(t&It.SkipSelf){let i=e,o=n;for(;!(i=i.parent,null!==i||t&It.Host||(i=kD(o),null===i||(o=o[14],10&i.type))););if(null===i)return!1;e=i,n=o}const r=ut.lFrame=cf();return r.currentTNode=e,r.lView=n,!0}function Tm(n){const e=cf(),t=n[1];ut.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function cf(){const n=ut.lFrame,e=null===n?null:n.child;return null===e?B0(n):e}function B0(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function U0(){const n=ut.lFrame;return ut.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const j0=U0;function wm(){const n=U0();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Lr(){return ut.lFrame.selectedIndex}function dc(n){ut.lFrame.selectedIndex=n}function gn(){const n=ut.lFrame;return Zi(n.tView,n.selectedIndex)}let H0=!0;function hc(){return H0}function gs(n){H0=n}function uf(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),null!=h&&(n.destroyHooks??=[]).push(t,h)}}function pl(n,e,t){hf(n,e,3,t)}function df(n,e,t,r){(3&n[2])===t&&hf(n,e,t,r)}function G0(n,e){let t=n[2];(3&t)===e&&(t&=16383,t+=1,n[2]=t)}function hf(n,e,t,r){const o=r??-1,s=e.length-1;let a=0;for(let c=void 0!==r?65535&n[17]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[17]+=65536),(a<o||-1==o)&&(ff(n,t,e,c),n[17]=(4294901760&n[17])+c+2),c++}function Cm(n,e){const t=He(null);try{e.call(n)}finally{He(t)}}function ff(n,e,t,r){const i=t[r]<0,o=t[r+1],a=n[i?-t[r]:t[r]];i?n[2]>>14<n[17]>>16&&(3&n[2])===e&&(n[2]+=16384,Cm(a,o)):Cm(a,o)}class gl{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}}function z0(n){return 3===n||4===n||6===n}function pa(n){return 64===n.charCodeAt(0)}function ml(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||W0(n,t,i,0,-1===t||2===t?e[++r]:null)}}return n}function W0(n,e,t,r,i){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t)return void(null!==i&&(n[o+1]=i));o++,null!==i&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==i&&n.splice(o++,0,i)}function Zu(n){return-1!==n}function Xu(n){return 32767&n}function ed(n,e){let t=function Rm(n){return n>>16}(n),r=e;for(;t>0;)r=r[14],t--;return r}let Nm=!0;function _l(n){const e=Nm;return Nm=n,e}let $D=0;const ms={};function gf(n,e){const t=Pm(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,Mm(r.data,n),Mm(e,null),Mm(r.blueprint,null));const i=yl(n,e),o=n.injectorIndex;if(Zu(i)){const s=Xu(i),a=ed(i,e),c=a[1].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function Mm(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Pm(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function yl(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=J0(i),null===r)return-1;if(t++,i=i[14],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function Om(n,e,t){!function GD(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Xc)&&(r=t[Xc]),null==r&&(r=t[Xc]=$D++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function mf(n,e,t){if(t&It.Optional||void 0!==n)return n;xs()}function _f(n,e,t,r){if(t&It.Optional&&void 0===r&&(r=null),!(t&(It.Self|It.Host))){const i=n[9],o=Yi(void 0);try{return i?i.get(e,r,t&It.Optional):Nh(e,r,t&It.Optional)}finally{Yi(o)}}return mf(r,0,t)}function K0(n,e,t,r=It.Default,i){if(null!==n){if(2048&e[2]&&!(r&It.Self)){const s=function qD(n,e,t,r,i){let o=n,s=e;for(;null!==o&&null!==s&&2048&s[2]&&!js(s);){const a=Q0(o,s,t,r|It.Self,ms);if(a!==ms)return a;let c=o.parent;if(!c){const u=s[20];if(u){const h=u.get(t,ms,r);if(h!==ms)return h}c=J0(s),s=s[14]}o=c}return i}(n,e,t,r,ms);if(s!==ms)return s}const o=Q0(n,e,t,r,ms);if(o!==ms)return o}return _f(e,t,r,i)}function Q0(n,e,t,r,i){const o=function WD(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Xc)?n[Xc]:void 0;return"number"==typeof e?e>=0?255&e:nd:e}(t);if("function"==typeof o){if(!V0(e,n,r))return r&It.Host?mf(i,0,r):_f(e,t,r,i);try{let s;if(s=o(r),null!=s||r&It.Optional)return s;xs()}finally{j0()}}else if("number"==typeof o){let s=null,a=Pm(n,e),c=-1,u=r&It.Host?e[15][5]:null;for((-1===a||r&It.SkipSelf)&&(c=-1===a?yl(n,e):e[a+8],-1!==c&&Y0(r,!1)?(s=e[1],a=Xu(c),e=ed(c,e)):a=-1);-1!==a;){const h=e[1];if(km(o,a,h.data)){const m=yf(a,e,t,s,r,u);if(m!==ms)return m}c=e[a+8],-1!==c&&Y0(r,e[1].data[a+8]===u)&&km(o,a,e)?(s=h,a=Xu(c),e=ed(c,e)):a=-1}}return i}function yf(n,e,t,r,i,o){const s=e[1],a=s.data[n+8],h=vf(a,s,t,null==r?Go(a)&&Nm:r!=s&&!!(3&a.type),i&It.Host&&o===a);return null!==h?td(e,s,h,a,i):ms}function vf(n,e,t,r,i){const o=n.providerIndexes,s=e.data,a=1048575&o,c=n.directiveStart,h=o>>20,_=i?a+h:n.directiveEnd;for(let v=r?a:a+h;v<_;v++){const I=s[v];if(v<c&&t===I||v>=c&&I.type===t)return v}if(i){const v=s[c];if(v&&Oi(v)&&v.type===t)return c}return null}function td(n,e,t,r,i){let o=n[t];const s=e.data;if(o instanceof gl){const a=o;a.resolving&&m0(function Gt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():gt(n)}(s[t]));const c=_l(a.canSeeViewProviders);a.resolving=!0;const h=a.injectImpl?Yi(a.injectImpl):null;V0(n,r,It.Default);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function $0(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=M0(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}(t,s[t],e)}finally{null!==h&&Yi(h),_l(c),a.resolving=!1,j0()}}return o}function km(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Y0(n,e){return!(n&It.Self||n&It.Host&&e)}class er{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return K0(this._tNode,this._lView,e,Mu(r),t)}}function nd(){return new er(vt(),J())}function hn(n){return Ze(()=>{const e=n.prototype.constructor,t=e[Or]||Ef(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const o=i[Or]||Ef(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Ef(n){return Th(n)?()=>{const e=Ef(ft(n));return e&&e()}:Fs(n)}function J0(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[5]:null}function X0(n,e=null,t=null,r){const i=Um(n,e,t,r);return i.resolveInjectorInitializers(),i}function Um(n,e=null,t=null,r,i=new Set){const o=[t||Lt,Yg(n)];return r=r||("object"==typeof n?void 0:Tr(n)),new Ls(o,e||rl(),r||null,i)}class zt{static THROW_IF_NOT_FOUND=vo;static NULL=new rc;static create(e,t){if(Array.isArray(e))return X0({name:""},t,e,"");{const r=e.name??"";return X0({name:r},e.parent,e.providers,r)}}static \u0275prov=fe({token:zt,providedIn:"any",factory:()=>me(Lh)});static __NG_ELEMENT_ID__=-1}new pe("").__NG_ELEMENT_ID__=n=>{const e=vt();if(null===e)throw new se(204,!1);if(2&e.type)return e.value;if(n&It.Optional)return null;throw new se(204,!1)};const tE=!1;let to=(()=>class n{static __NG_ELEMENT_ID__=xi;static __NG_ENV_ID__=t=>t})();class jm extends to{_lView;constructor(e){super(),this._lView=e}onDestroy(e){const t=this._lView;return Ji(t)?(e(),()=>{}):(dl(t,e),()=>function Yu(n,e){if(null===n[21])return;const t=n[21].indexOf(e);-1!==t&&n[21].splice(t,1)}(t,e))}}function xi(){return new jm(J())}class zo{}const mc=new pe("",{providedIn:"root",factory:()=>!1}),_s=new pe(""),_c=new pe("");let ys=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Nt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=fe({token:n,providedIn:"root",factory:()=>new n})}return n})(),bf=(()=>{class n{internalPendingTasks=N(ys);scheduler=N(zo);add(){const t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){var r=this;return(0,T.A)(function*(){const i=r.add();try{return yield t()}finally{i()}})()}static \u0275prov=fe({token:n,providedIn:"root",factory:()=>new n})}return n})();const Xe=class ZD extends Se{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,sc()&&(this.destroyRef=N(to,{optional:!0})??void 0,this.pendingTasks=N(ys,{optional:!0})??void 0)}emit(e){const t=He(null);try{super.next(e)}finally{He(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof Xn&&e.add(a),a}wrapInTimeout(e){return t=>{const r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{void 0!==r&&this.pendingTasks?.remove(r)}})}}};function od(...n){}function nE(n){let e,t;function r(){n=od;try{void 0!==t&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(t),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),"function"==typeof requestAnimationFrame&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function rE(n){return queueMicrotask(()=>n()),()=>{n=od}}const p="isAngularZone",l=p+"_ID";let d=0;class g{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Xe(!1);onMicrotaskEmpty=new Xe(!1);onStable=new Xe(!1);onError=new Xe(!1);constructor(e){const{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=tE}=e;if(typeof Zone>"u")throw new se(908,!1);Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,function V(n){const e=()=>{!function M(n){function e(){nE(()=>{n.callbackScheduled=!1,Y(n),n.isCheckStableRunning=!0,w(n),n.isCheckStableRunning=!1})}n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Y(n))}(n)},t=d++;n._inner=n._inner.fork({name:"angular",properties:{[p]:!0,[l]:t,[l+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(function rt(n){return no(n,"__ignore_ng_zone__")}(c))return r.invokeTask(o,s,a,c);try{return be(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),Pe(n)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return be(n),r.invoke(o,s,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function Dn(n){return no(n,"__scheduler_tick__")}(c)&&e(),Pe(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,Y(n),w(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(p)}static assertInAngularZone(){if(!g.isInAngularZone())throw new se(909,!1)}static assertNotInAngularZone(){if(g.isInAngularZone())throw new se(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,E,od,od);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const E={};function w(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Y(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function be(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Pe(n){n._nesting--,w(n)}class Te{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Xe;onMicrotaskEmpty=new Xe;onStable=new Xe;onError=new Xe;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}function no(n,e){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0]?.data?.[e]}class ro{_console=console;handleError(e){this._console.error("ERROR",e)}}const iE=new pe("",{providedIn:"root",factory:()=>{const n=N(g),e=N(ro);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function $m(n,e){return Ae(n,e)}const sE=($m.required=function Gm(n){return Ae(K,n)},$m);function eC(){return _a(vt(),J())}function _a(n,e){return new nn(zr(n,e))}let nn=(()=>class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=eC})();function wk(n){return n instanceof nn?n.nativeElement:n}function ya(n,e){const t=function te(n,e){const t=Object.create(Ge);t.value=n,void 0!==e&&(t.equal=e);const r=()=>(Be(t),t.value);return r[Et]=t,r}(n,e?.equal),r=t[Et];return t.set=i=>re(r,i),t.update=i=>function le(n,e){Ot()||_o(n),re(n,e(n.value))}(r,i),t.asReadonly=aE.bind(t),t}function aE(){const n=this[Et];if(void 0===n.readonlyFn){const e=()=>this();e[Et]=n,n.readonlyFn=e}return n.readonlyFn}function Ck(n){return function Dk(n){return"function"==typeof n&&void 0!==n[Et]}(n)&&"function"==typeof n.set}function Dq(){return this._results[Symbol.iterator]()}class Cq{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Se}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const r=function Xr(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function E0(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Dq}function Wm(n){return!(128&~n.flags)}var cE=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(cE||{});const lE=new Map;let Sq=0;function nC(n){lE.delete(n[19])}const iC="__ngContext__";function wo(n,e){xn(e)?(n[iC]=e[19],function Nq(n){lE.set(n[19],n)}(e)):n[iC]=e}function xk(n){return Lk(n[12])}function Fk(n){return Lk(n[4])}function Lk(n){for(;null!==n&&!Dr(n);)n=n[4];return n}let sC;const yc=new pe("",{providedIn:"root",factory:()=>Qq}),Qq="ng",aC=new pe(""),sd=new pe("",{providedIn:"platform",factory:()=>"unknown"}),Gk=new pe("",{providedIn:"root",factory:()=>function va(){if(void 0!==sC)return sC;if(typeof document<"u")return document;throw new se(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),Kk=new pe("",{providedIn:"root",factory:()=>!1});var yC=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(yC||{});const Tf=new pe(""),Zk=new Set;function Do(n){Zk.has(n)||(Zk.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}let gE=(()=>class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=e6})();function e6(){return new gE(J(),vt())}var wf=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(wf||{});let vC=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=fe({token:n,providedIn:"root",factory:()=>new n})}return n})();const Xk=[wf.EarlyRead,wf.Write,wf.MixedReadWrite,wf.Read];let ex=(()=>{class n{ngZone=N(g);scheduler=N(zo);errorHandler=N(ro,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){N(Tf,{optional:!0})}execute(){this.executing=!0;for(const r of Xk)for(const i of this.sequences)if(!i.erroredOrDestroyed&&i.hooks[r])try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>(0,i.hooks[r])(i.pipelinedValue),i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(const r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(const r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(t){const{view:r}=t;void 0!==r?((r[25]??=[]).push(t),ul(r),r[2]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(yC.AFTER_NEXT_RENDER,t):t()}static \u0275prov=fe({token:n,providedIn:"root",factory:()=>new n})}return n})();class tx{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();const e=this.view?.[25];e&&(this.view[25]=e.filter(t=>t!==this))}}function Il(n,e){!e?.injector&&Vs();const t=e?.injector??N(zt);return Do("NgAfterNextRender"),nx(n,t,e,!0)}function nx(n,e,t,r){const i=e.get(vC);i.impl??=e.get(ex);const o=e.get(Tf,null,{optional:!0}),s=t?.phase??wf.MixedReadWrite,a=!0!==t?.manualCleanup?e.get(to):null,c=e.get(gE,null,{optional:!0}),u=new tx(i.impl,function t6(n,e){if(n instanceof Function){const t=[void 0,void 0,void 0,void 0];return t[e]=n,t}return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}(n,s),c?.view,r,a,o?.snapshot(null));return i.impl.register(u),u}function Cx(n,e){const t=n.contentQueries;if(null!==t){const r=He(null);try{for(let i=0;i<t.length;i+=2){const s=t[i+1];if(-1!==s){const a=n.data[s];af(t[i]),a.contentQueries(2,e[s],s)}}}finally{He(r)}}}function PC(n,e,t){af(0);const r=He(null);try{e(n,t)}finally{He(r)}}function OC(n,e,t){if(Uu(e)){const r=He(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{He(r)}}}var vs=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(vs||{});class Mx{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${wu})`}}function Tl(n){return n instanceof Mx?n.changingThisBreaksApplicationSecurity:n}const W6=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Of=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Of||{});function kf(n){const e=function c_(){const n=J();return n&&n[10].sanitizer}();return e?e.sanitize(Of.URL,n)||"":function s_(n,e){const t=function H6(n){return n instanceof Mx&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${wu})`)}return t===e}(n,"URL")?Tl(n):function xC(n){return(n=String(n)).match(W6)?n:"unsafe:"+n}(gt(n))}const c9=/^>|^->|<!--|-->|--!>|<!-$/g,l9=/(<|>)/g;function Ea(n){return n instanceof Function?n():n}function b9(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}const Yx="ng-template";function I9(n,e,t,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==b9(e[i+1].toLowerCase(),t,0))return!0}else if(jC(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&"string"==typeof(o=e[i]);)if(o.toLowerCase()===t)return!0}return!1}function jC(n){return 4===n.type&&n.value!==Yx}function T9(n,e,t){return e===(4!==n.type||t?n.value:Yx)}function w9(n,e,t){let r=4;const i=n.attrs,o=null!==i?function A9(n){for(let e=0;e<n.length;e++)if(z0(n[e]))return e;return n.length}(i):0;let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!T9(n,c,t)||""===c&&1===e.length){if(Ws(r))return!1;s=!0}}else if(8&r){if(null===i||!I9(n,i,c,t)){if(Ws(r))return!1;s=!0}}else{const u=e[++a],h=D9(c,i,jC(n),t);if(-1===h){if(Ws(r))return!1;s=!0;continue}if(""!==u){let m;if(m=h>o?"":i[h+1].toLowerCase(),2&r&&u!==m){if(Ws(r))return!1;s=!0}}}}else{if(!s&&!Ws(r)&&!Ws(c))return!1;if(s&&Ws(c))continue;s=!1,r=c|1&r}}return Ws(r)||s}function Ws(n){return!(1&n)}function D9(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){const s=e[i];if(s===n)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function S9(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Jx(n,e,t=!1){for(let r=0;r<e.length;r++)if(w9(n,e[r],t))return!0;return!1}function R9(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function Zx(n,e){return n?":not("+e.trim()+")":e}function N9(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&r){const a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Ws(s)&&(e+=Zx(o,i),i=""),r=s,o=o||!Ws(r);t++}return""!==i&&(e+=Zx(o,i)),e}const mt={};function $C(n,e){return n.createComment(function Hx(n){return n.replace(c9,e=>e.replace(l9,"\u200b$1\u200b"))}(e))}function RE(n,e,t){return n.createElement(e,t)}function ld(n,e,t,r,i){n.insertBefore(e,t,r,i)}function eF(n,e,t){n.appendChild(e,t)}function tF(n,e,t,r,i){null!==r?ld(n,e,t,r,i):eF(n,e,t)}function rF(n,e,t){const{mergedAttrs:r,classes:i,styles:o}=t;null!==r&&function vk(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{const o=i,s=t[++r];pa(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}}(n,e,r),null!==i&&function k9(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}(n,e,i),null!==o&&function O9(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}function GC(n,e,t,r,i,o,s,a,c,u,h){const m=26+r,_=m+i,v=function x9(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:mt);return t}(m,_),I="function"==typeof u?u():u;return v[1]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:I,incompleteFirstPass:!1,ssrId:h}}function NE(n,e,t,r,i,o,s,a,c,u,h){const m=e.blueprint.slice();return m[0]=i,m[2]=1228|r,(null!==u||n&&2048&n[2])&&(m[2]|=2048),O0(m),m[3]=m[14]=n,m[8]=t,m[10]=s||n&&n[10],m[11]=a||n&&n[11],m[9]=c||n&&n[9]||null,m[5]=o,m[19]=function Rq(){return Sq++}(),m[6]=h,m[20]=u,m[15]=2==e.type?n[15]:m,m}function zC(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function u_(n,e,t,r){if(0===t)return-1;const i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function WC(n,e){return n[12]?n[13][4]=e:n[12]=e,n[13]=e,e}function Re(n=1){oF(ct(),J(),Lr()+n,!1)}function oF(n,e,t,r){if(!r)if(3&~e[2]){const o=n.preOrderHooks;null!==o&&df(e,o,0,t)}else{const o=n.preOrderCheckHooks;null!==o&&pl(e,o,t)}dc(t)}var ME=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(ME||{});function qC(n,e,t,r){const i=He(null);try{const[o,s,a]=n.inputs[t];let c=null;!!(s&ME.SignalBased)&&(c=e[o][Et]),null!==c&&void 0!==c.transformFn?r=c.transformFn(r):null!==a&&(r=a.call(e,r)),null!==n.setInput?n.setInput(e,c,r,t,o):ll(e,c,o,r)}finally{He(i)}}function sF(n,e,t,r,i){const o=Lr(),s=2&r;try{dc(-1),s&&e.length>26&&oF(n,e,26,!1),t(r,i)}finally{dc(o)}}function PE(n,e,t){(function $9(n,e,t){const r=t.directiveStart,i=t.directiveEnd;Go(t)&&function F9(n,e,t){const r=zr(e,n),i=function iF(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=GC(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}(t),o=n[10].rendererFactory,s=WC(n,NE(n,i,null,zC(t),r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=s}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||gf(t,e);const o=t.initialInputs;for(let s=r;s<i;s++){const a=n.data[s],c=td(e,n,s,t);wo(c,e),null!==o&&W9(0,s-r,c,a,0,o),Oi(a)&&(pi(t.index,e)[8]=td(e,n,s,t))}})(n,e,t),!(64&~t.flags)&&function G9(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,s=function OD(){return ut.lFrame.currentDirectiveIndex}();try{dc(o);for(let a=r;a<i;a++){const c=n.data[a],u=e[a];Em(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&z9(c,u)}}finally{dc(-1),Em(s)}}(n,e,t)}function KC(n,e,t=zr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?t(e,n):n[s];n[i++]=a}}}let aF=()=>null;function Co(n,e,t,r,i,o,s,a){if(a||!ZC(e,n,t,r,i)){if(3&e.type){const c=zr(e,t);r=function j9(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(c,r,i)}}else Go(e)&&function H9(n,e){const t=pi(e,n);16&t[2]||(t[2]|=64)}(t,e.index)}function z9(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function QC(n,e){const t=n.directiveRegistry;let r=null;if(t)for(let i=0;i<t.length;i++){const o=t[i];Jx(e,o.selectors,!1)&&(r??=[],Oi(o)?r.unshift(o):r.push(o))}return r}function ba(n,e,t,r,i,o){const s=zr(n,e);!function YC(n,e,t,r,i,o,s){if(null==o)n.removeAttribute(e,i,t);else{const a=null==s?gt(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}(e[11],s,o,n.value,t,r,i)}function W9(n,e,t,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;a+=2)qC(r,t,s[a],s[a+1])}function ZC(n,e,t,r,i){const o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r];let a=!1;if(s)for(let c=0;c<s.length;c+=2){const u=s[c];qC(e.data[u],t[u],s[c+1],i),a=!0}if(o)for(const c of o)qC(e.data[c],t[c],r,i),a=!0;return a}function q9(n,e){const t=pi(e,n),r=t[1];!function K9(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[0];null!==i&&null===t[6]&&(t[6]=null),OE(r,t,t[8])}function OE(n,e,t){Tm(e);try{const r=n.viewQuery;null!==r&&PC(1,r,t);const i=n.template;null!==i&&sF(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[18]?.finishViewCreation(n),n.staticContentQueries&&Cx(n,e),n.staticViewQueries&&PC(2,n.viewQuery,t);const o=n.components;null!==o&&function Q9(n,e){for(let t=0;t<e.length;t++)q9(n,e[t])}(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,wm()}}function Ff(n,e,t,r){const i=He(null);try{const o=e.tView,c=NE(n,o,t,4096&n[2]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);c[16]=n[e.index];const h=n[18];return null!==h&&(c[18]=h.createEmbeddedView(o)),OE(o,c,t),c}finally{He(i)}}function ud(n,e){return!e||null===e.firstChild||Wm(n)}function eA(n,e){return undefined(n,e)}var wl=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(wl||{});function Dl(n){return!(32&~n.flags)}function Lf(n,e,t,r,i){if(null!=r){let o,s=!1;Dr(r)?o=r:xn(r)&&(s=!0,r=r[0]);const a=Vt(r);0===n&&null!==t?null==i?eF(e,t,a):ld(e,t,a,i||null,!0):1===n&&null!==t?ld(e,t,a,i||null,!0):2===n?function l_(n,e,t){n.removeChild(null,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function n7(n,e,t,r,i){const o=t[7];o!==Vt(t)&&Lf(e,n,r,o,i);for(let a=10;a<t.length;a++){const c=t[a];xE(c[1],c,n,e,r,o)}}(e,n,o,t,i)}}function dF(n,e){e[10].changeDetectionScheduler?.notify(9),xE(n,e,e[11],2,null,null)}function tA(n,e){const t=n[9],r=t.indexOf(e);t.splice(r,1)}function d_(n,e){if(Ji(e))return;const t=e[11];t.destroyNode&&xE(n,e,t,3,null,null),function Z9(n){let e=n[12];if(!e)return nA(n[1],n);for(;e;){let t=null;if(xn(e))t=e[12];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)xn(e)&&nA(e[1],e),e=e[3];null===e&&(e=n),xn(e)&&nA(e[1],e),t=e&&e[4]}e=t}}(e)}function nA(n,e){if(Ji(e))return;const t=He(null);try{e[2]&=-129,e[2]|=256,e[24]&&Ye(e[24]),function e7(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof gl)){const o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],c=o[s+1];try{c.call(a)}finally{}}else try{o.call(i)}finally{}}}}(n,e),function X9(n,e){const t=n.cleanup,r=e[7];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[7]=null);const i=e[21];if(null!==i){e[21]=null;for(let s=0;s<i.length;s++)(0,i[s])()}const o=e[23];if(null!==o){e[23]=null;for(const s of o)s.destroy()}}(n,e),1===e[1].type&&e[11].destroy();const r=e[16];if(null!==r&&Dr(e[3])){r!==e[3]&&tA(r,e);const i=e[18];null!==i&&i.detachView(n)}nC(e)}finally{He(t)}}function rA(n,e,t){return function hF(n,e,t){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return t[0];if(Go(r)){const{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===vs.None||i===vs.Emulated)return null}return zr(r,t)}(n,e.parent,t)}function fF(n,e,t){return gF(n,e,t)}let gF=function pF(n,e,t){return 40&n.type?zr(n,t):null};function kE(n,e,t,r){const i=rA(n,r,e),o=e[11],a=fF(r.parent||e[5],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)tF(o,i,t[c],a,!1);else tF(o,i,t,a,!1)}function dd(n,e){if(null!==e){const t=e.type;if(3&t)return zr(e,n);if(4&t)return oA(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return dd(n,r);{const i=n[e.index];return Dr(i)?oA(-1,i):Vt(i)}}if(128&t)return dd(n,e.next);if(32&t)return eA(e,n)()||Vt(n[e.index]);{const r=_F(n,e);return null!==r?Array.isArray(r)?r[0]:dd($s(n[15]),r):dd(n,e.next)}}return null}function _F(n,e){return null!==e?n[15][5].projection[e.projection]:null}function oA(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return dd(r,i)}return e[7]}function sA(n,e,t,r,i,o,s){for(;null!=t;){if(128===t.type){t=t.next;continue}const a=r[t.index],c=t.type;if(s&&0===e&&(a&&wo(Vt(a),r),t.flags|=2),!Dl(t))if(8&c)sA(n,e,t.child,r,i,o,!1),Lf(e,n,i,a,o);else if(32&c){const u=eA(t,r);let h;for(;h=u();)Lf(e,n,i,h,o);Lf(e,n,i,a,o)}else 16&c?yF(n,e,r,t,i,o):Lf(e,n,i,a,o);t=s?t.projectionNext:t.next}}function xE(n,e,t,r,i,o){sA(t,r,n.firstChild,e,i,o,!1)}function yF(n,e,t,r,i,o){const s=t[15],c=s[5].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)Lf(e,n,i,c[u],o);else{let u=c;const h=s[3];Wm(r)&&(u.flags|=128),sA(n,e,u,h,i,o,!0)}}function Vf(n,e,t,r,i=!1){for(;null!==t;){if(128===t.type){t=i?t.projectionNext:t.next;continue}const o=e[t.index];null!==o&&r.push(Vt(o)),Dr(o)&&aA(o,r);const s=t.type;if(8&s)Vf(n,e,t.child,r);else if(32&s){const a=eA(t,e);let c;for(;c=a();)r.push(c)}else if(16&s){const a=_F(e,t);if(Array.isArray(a))r.push(...a);else{const c=$s(e[15]);Vf(c[1],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function aA(n,e){for(let t=10;t<n.length;t++){const r=n[t],i=r[1].firstChild;null!==i&&Vf(r[1],r,i,e)}n[7]!==n[0]&&e.push(n[7])}function vF(n){if(null!==n[25]){for(const e of n[25])e.impl.addSequence(e);n[25].length=0}}let EF=[];const a7={...ye,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{ul(n.lView)},consumerOnSignalRead(){this.lView[24]=this}},l7={...ye,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=$s(n.lView);for(;e&&!bF(e[1]);)e=$s(e);e&&um(e)},consumerOnSignalRead(){this.lView[24]=this}};function bF(n){return 2!==n.type}function IF(n){if(null===n[23])return;let e=!0;for(;e;){let t=!1;for(const r of n[23])r.dirty&&(t=!0,null===r.zone||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(8192&n[2])}}function FE(n,e=!0,t=0){const i=n[10].rendererFactory;i.begin?.();try{!function d7(n,e){const t=tf();try{nf(!0),cA(n,e);let r=0;for(;Ku(n);){if(100===r)throw new se(103,!1);r++,cA(n,1)}}finally{nf(t)}}(n,t)}catch(s){throw e&&function JC(n,e){const t=n[9],r=t?t.get(ro,null):null;r&&r.handleError(e)}(n,s),s}finally{i.end?.()}}function wF(n,e,t,r){if(Ji(e))return;const i=e[2];Tm(e);let a=!0,c=null,u=null;bF(n)?(u=function i7(n){return n[24]??function o7(n){const e=EF.pop()??Object.create(a7);return e.lView=n,e}(n)}(e),c=Me(u)):null===function Qn(){return Ce}()?(a=!1,u=function c7(n){const e=n[24]??Object.create(l7);return e.lView=n,e}(e),c=Me(u)):e[24]&&(Ye(e[24]),e[24]=null);try{O0(e),function rf(n){return ut.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&sF(n,e,t,2,r);const h=!(3&~i);if(h){const v=n.preOrderCheckHooks;null!==v&&pl(e,v,null)}else{const v=n.preOrderHooks;null!==v&&df(e,v,0,null),G0(e,0)}if(function h7(n){for(let e=xk(n);null!==e;e=Fk(e)){if(!(2&e[2]))continue;const t=e[9];for(let r=0;r<t.length;r++)um(t[r])}}(e),IF(e),DF(e,0),null!==n.contentQueries&&Cx(n,e),h){const v=n.contentCheckHooks;null!==v&&pl(e,v)}else{const v=n.contentHooks;null!==v&&df(e,v,1),G0(e,1)}!function p7(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)dc(~i);else{const o=i,s=t[++r],a=t[++r];sf(s,o);const c=e[o];a(2,c)}}}finally{dc(-1)}}(n,e);const m=n.components;null!==m&&AF(e,m,0);const _=n.viewQuery;if(null!==_&&PC(2,_,r),h){const v=n.viewCheckHooks;null!==v&&pl(e,v)}else{const v=n.viewHooks;null!==v&&df(e,v,2),G0(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[22]){for(const v of e[22])v();e[22]=null}vF(e),e[2]&=-73}catch(h){throw ul(e),h}finally{null!==u&&(Qe(u,c),a&&function s7(n){n.lView[24]!==n&&(n.lView=null,EF.push(n))}(u)),wm()}}function DF(n,e){for(let t=xk(n);null!==t;t=Fk(t))for(let r=10;r<t.length;r++)CF(t[r],e)}function f7(n,e,t){const r=pi(e,n);CF(r,t)}function CF(n,e){cm(n)&&cA(n,e)}function cA(n,e){const r=n[1],i=n[2],o=n[24];let s=!!(0===e&&16&i);if(s||=!!(64&i&&0===e),s||=!!(1024&i),s||=!(!o?.dirty||!dt(o)),s||=!1,o&&(o.dirty=!1),n[2]&=-9217,s)wF(r,n,r.template,n[8]);else if(8192&i){IF(n),DF(n,1);const a=r.components;null!==a&&AF(n,a,1),vF(n)}}function AF(n,e,t){for(let r=0;r<e.length;r++)f7(n,e[r],t)}function h_(n,e){const t=tf()?64:1088;for(n[10].changeDetectionScheduler?.notify(e);n;){n[2]|=t;const r=$s(n);if(js(n)&&!r)return n;n=r}return null}function SF(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Bf(n,e,t,r=!0){const i=e[1];if(function g7(n,e,t,r){const i=10+r,o=t.length;r>0&&(t[i-1][4]=e),r<o-10?(e[4]=t[i],xh(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const s=e[16];null!==s&&t!==s&&NF(s,e);const a=e[18];null!==a&&a.insertView(n),Qu(e),e[2]|=128}(i,e,n,t),r){const s=oA(t,n),a=e[11],c=a.parentNode(n[7]);null!==c&&function J9(n,e,t,r,i,o){r[0]=i,r[5]=e,xE(n,r,t,1,i,o)}(i,n[5],a,e,c,s)}const o=e[6];null!==o&&null!==o.firstChild&&(o.firstChild=null)}function f_(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[16];null!==i&&i!==n&&tA(i,r),e>0&&(n[t-1][4]=r[4]);const o=nc(n,10+e);!function uF(n,e){dF(n,e),e[0]=null,e[5]=null}(r[1],r);const s=o[18];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function NF(n,e){const t=n[9],r=e[3];(xn(r)||e[15]!==r[3][15])&&(n[2]|=2),null===t?n[9]=[e]:t.push(e)}let p_=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){const e=this._lView,t=e[1];return Vf(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return Ji(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Dr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(f_(e,r),nc(t,r))}this._attachedToViewContainer=!1}d_(this._lView[1],this._lView)}onDestroy(e){dl(this._lView,e)}markForCheck(){h_(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[2]&=-129}reattach(){Qu(this._lView),this._lView[2]|=128}detectChanges(){this._lView[2]|=1024,FE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=js(this._lView),t=this._lView[16];null!==t&&!e&&tA(t,this._lView),dF(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new se(902,!1);this._appRef=e;const t=js(this._lView),r=this._lView[16];null!==r&&!t&&NF(r,this._lView),Qu(this._lView)}},Sr=(()=>class n{static __NG_ELEMENT_ID__=y7})();const m7=Sr,_7=class extends m7{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=Ff(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new p_(i)}};function y7(){return LE(vt(),J())}function LE(n,e){return 4&n.type?new _7(e,n,_a(n,e)):null}function Uf(n,e,t,r,i){let o=n.data[e];if(null===o)o=function fA(n,e,t,r,i){const o=Xh(),s=_m(),c=n.data[e]=function S7(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return uc()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,r,i);return function A7(n,e,t,r){null===n.firstChild&&(n.firstChild=e),null!==t&&(r?null==t.child&&null!==e.parent&&(t.child=e):null===t.next&&(t.next=e,e.prev=t))}(n,c,o,s),c}(n,e,t,r,i),function F0(){return ut.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const s=function fl(){const n=ut.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return eo(o,!0),o}let pK=class{},XF=class{};class gK{resolveComponentFactory(e){throw Error(`No component factory found for ${Tr(e)}.`)}}let GE=class{static NULL=new gK};class bA{}let Ic=(()=>class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>function mK(){const n=J(),t=pi(vt().index,n);return(xn(t)?t:n)[11]}()})(),_K=(()=>{class n{static \u0275prov=fe({token:n,providedIn:"root",factory:()=>null})}return n})();const TA={};class $f{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Mu(r);const i=this.injector.get(e,TA,r);return i!==TA||t===TA?i:this.parentInjector.get(e,t,r)}}function wA(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=Ih(i,a):2==o&&(r=Ih(r,a+": "+e[++s]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Ie(n,e=It.Default){const t=J();return null===t?me(n,e):K0(vt(),t,ft(n),e)}function DA(n,e,t,r,i){const o=null===r?null:{"":-1},s=i(n,t);if(null!==s){let a,c=null,u=null;const h=function IK(n){let e=null,t=!1;for(let s=0;s<n.length;s++){const a=n[s];if(0===s&&Oi(a)&&(e=a),null!==a.findHostDirectiveDefs){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(const s of n)null!==s.findHostDirectiveDefs&&(r??=[],i??=new Map,o??=new Map,TK(s,r,o,i)),s===e&&(r??=[],r.push(s));return null!==r?(r.push(...null===e?n:n.slice(1)),[r,i,o]):null}(s);null===h?a=s:[a,c,u]=h,function DK(n,e,t,r,i,o,s){const a=r.length;let c=!1;for(let _=0;_<a;_++){const v=r[_];!c&&Oi(v)&&(c=!0,wK(n,t,_)),Om(gf(t,e),n,v.type)}!function MK(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,a);for(let _=0;_<a;_++){const v=r[_];v.providersResolver&&v.providersResolver(v)}let u=!1,h=!1,m=u_(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let _=0;_<a;_++){const v=r[_];if(t.mergedAttrs=ml(t.mergedAttrs,v.hostAttrs),AK(n,t,e,m,v),NK(m,v,i),null!==s&&s.has(v)){const[D,A]=s.get(v);t.directiveToIndex.set(v.type,[m,D+t.directiveStart,A+t.directiveStart])}else(null===o||!o.has(v))&&t.directiveToIndex.set(v.type,m);null!==v.contentQueries&&(t.flags|=4),(null!==v.hostBindings||null!==v.hostAttrs||0!==v.hostVars)&&(t.flags|=64);const I=v.type.prototype;!u&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!h&&(I.ngOnChanges||I.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),m++}!function CK(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){const i=n.data[r];if(null!==t&&t.has(i)){const o=t.get(i);rL(0,e,o,r),rL(1,e,o,r),oL(e,r,!0)}else nL(0,e,i,r),nL(1,e,i,r),oL(e,r,!1)}}(n,t,o)}(n,e,t,a,o,c,u)}null!==o&&null!==r&&function bK(n,e,t){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const o=t[e[i+1]];if(null==o)throw new se(-301,!1);r.push(e[i],o)}}(t,r,o)}function TK(n,e,t,r){const i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function wK(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function nL(n,e,t,r){const i=0===n?t.inputs:t.outputs;for(const o in i)if(i.hasOwnProperty(o)){let s;s=0===n?e.inputs??={}:e.outputs??={},s[o]??=[],s[o].push(r),iL(e,o)}}function rL(n,e,t,r){const i=0===n?t.inputs:t.outputs;for(const o in i)if(i.hasOwnProperty(o)){const s=i[o];let a;a=0===n?e.hostDirectiveInputs??={}:e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),iL(e,s)}}function iL(n,e){"class"===e?n.flags|=8:"style"===e&&(n.flags|=16)}function oL(n,e,t){const{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(null===r||!t&&null===i||t&&null===o||jC(n))return n.initialInputs??=[],void n.initialInputs.push(null);let s=null,a=0;for(;a<r.length;){const c=r[a];if(0!==c)if(5!==c){if("number"==typeof c)break;if(!t&&i.hasOwnProperty(c)){const u=i[c];for(const h of u)if(h===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){const u=o[c];for(let h=0;h<u.length;h+=2)if(u[h]===e){s??=[],s.push(u[h+1],r[a+1]);break}}a+=2}else a+=2;else a+=4}n.initialInputs??=[],n.initialInputs.push(s)}function AK(n,e,t,r,i){n.data[r]=i;const o=i.factory||(i.factory=Fs(i.type)),s=new gl(o,Oi(i),Ie);n.blueprint[r]=s,t[r]=s,function SK(n,e,t,r,i){const o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function RK(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,r,o)}}(n,e,r,u_(n,t,i.hostVars,mt),i)}function NK(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Oi(e)&&(t[""]=n)}}function sL(n,e,t,r,i,o,s,a){const c=e.consts,h=Uf(e,n,2,r,Xi(c,s));return o&&DA(e,t,h,Xi(c,a),i),h.mergedAttrs=ml(h.mergedAttrs,h.attrs),null!==h.attrs&&wA(h,h.attrs,!1),null!==h.mergedAttrs&&wA(h,h.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,h),h}function aL(n,e){uf(n,e),Uu(e)&&n.queries.elementEnd(e)}class cL extends GE{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Tt(e);return new w_(t,this.ngModule)}}class w_ extends XF{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=function PK(n){return Object.keys(n).map(e=>{const[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:!!(r&ME.SignalBased)};return i&&(o.transform=i),o})}(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=function OK(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function M9(n){return n.map(N9).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){const o=He(null);try{const s=this.componentDef,a=r?["ng-version","19.2.10"]:function P9(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&e.push(o,n[++r]):8===i&&t.push(o);else{if(!Ws(i))break;i=o}r++}return t.length&&e.push(1,...t),e}(this.componentDef.selectors[0]),c=GC(0,null,null,1,0,null,null,null,null,[a],null),u=function kK(n,e,t){let r=e instanceof cr?e:e?.injector;return r&&null!==n.getStandaloneInjector&&(r=n.getStandaloneInjector(r)||r),r?new $f(t,r):t}(s,i||this.ngModule,e),h=function xK(n){const e=n.get(bA,null);if(null===e)throw new se(407,!1);return{rendererFactory:e,sanitizer:n.get(_K,null),changeDetectionScheduler:n.get(zo,null)}}(u),m=h.rendererFactory.createRenderer(null,s),_=r?function L9(n,e,t,r){const o=r.get(Kk,!1)||t===vs.ShadowDom,s=n.selectRootElement(e,o);return function V9(n){aF(n)}(s),s}(m,r,s.encapsulation,u):function FK(n,e){const t=(n.selectors[0][0]||"div").toLowerCase();return RE(e,t,"svg"===t?"svg":"math"===t?"math":null)}(s,m),v=NE(null,c,null,512|zC(s),null,null,h,m,u,null,null);v[26]=_,Tm(v);let I=null;try{const D=sL(26,c,v,"#host",()=>[this.componentDef],!0,0);_&&(rF(m,_,D),wo(_,v)),PE(c,v,D),OC(c,D,v),aL(c,D),void 0!==t&&function VK(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const o=t[i];r.push(null!=o&&o.length?Array.from(o):null)}}(D,this.ngContentSelectors,t),I=pi(D.index,v),v[8]=I[8],OE(c,v,null)}catch(D){throw null!==I&&nC(I),nC(v),D}finally{wm()}return new LK(this.componentType,v)}finally{He(o)}}}class LK extends pK{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=Zi(t[1],26),this.location=_a(this._tNode,t),this.instance=pi(this._tNode.index,t)[8],this.hostView=this.changeDetectorRef=new p_(t,void 0,!1),this.componentType=e}setInput(e,t){const r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const i=this._rootLView;ZC(r,i[1],i,e,t),this.previousInputValues.set(e,t),h_(pi(r.index,i),1)}get injector(){return new er(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}let Ao=(()=>class n{static __NG_ELEMENT_ID__=BK})();function BK(){return dL(vt(),J())}const UK=Ao,lL=class extends UK{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return _a(this._hostTNode,this._hostLView)}get injector(){return new er(this._hostTNode,this._hostLView)}get parentInjector(){const e=yl(this._hostTNode,this._hostLView);if(Zu(e)){const t=ed(e,this._hostLView),r=Xu(e);return new er(t[1].data[r+8],t)}return new er(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=uL(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedViewImpl(t||{},o,null);return this.insertImpl(a,i,ud(this._hostTNode,null)),a}createComponent(e,t,r,i,o){const s=e&&!function zh(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const I=t||{};a=I.index,r=I.injector,i=I.projectableNodes,o=I.environmentInjector||I.ngModuleRef}const c=s?e:new w_(Tt(e)),u=r||this.parentInjector;if(!o&&null==c.ngModule){const D=(s?u:this.parentInjector).get(cr,null);D&&(o=D)}Tt(c.componentType??{});const v=c.create(u,i,null,o);return this.insertImpl(v.hostView,a,ud(this._hostTNode,null)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){const i=e._lView;if(function lm(n){return Dr(n[3])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=i[3],u=new lL(c,c[5],c[3]);u.detach(u.indexOf(e))}}const o=this._adjustIndex(t),s=this._lContainer;return Bf(s,i,o,r),e.attachToViewContainerRef(),xh(CA(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=uL(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=f_(this._lContainer,t);r&&(nc(CA(this._lContainer),t),d_(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=f_(this._lContainer,t);return r&&null!=nc(CA(this._lContainer),t)?new p_(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function uL(n){return n[8]}function CA(n){return n[8]||(n[8]=[])}function dL(n,e){let t;const r=e[n.index];return Dr(r)?t=r:(t=SF(r,e,null,n),e[n.index]=t,WC(e,t)),hL(t,e,n,r),new lL(t,n,e)}let hL=function pL(n,e,t,r){if(n[7])return;let i;i=8&t.type?Vt(r):function jK(n,e){const t=n[11],r=t.createComment(""),i=zr(e,n),o=t.parentNode(i);return ld(t,o,r,t.nextSibling(i),!1),r}(e,t),n[7]=i};class SA{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new SA(this.queryList)}setDirty(){this.queryList.setDirty()}}class RA{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){const s=t.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new RA(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==kA(e,t).matches&&this.queries[t].setDirty()}}class gL{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,this.predicate="string"==typeof e?function QK(n){return n.split(",").map(e=>e.trim())}(e):e}}class NA{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==t?t.push(o):t=[o])}return null!==t?new NA(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class MA{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new MA(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(e,t,zK(t,o)),this.matchTNodeWithReadOption(e,t,vf(t,e,o,!1,!1))}else r===Sr?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,vf(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===nn||i===Ao||i===Sr&&4&t.type)this.addMatch(t.index,-2);else{const o=vf(t,e,i,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function zK(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function qK(n,e,t,r){return-1===t?function WK(n,e){return 11&n.type?_a(n,e):4&n.type?LE(n,e):null}(e,n):-2===t?function KK(n,e,t){return t===nn?_a(e,n):t===Sr?LE(e,n):t===Ao?dL(e,n):void 0}(n,e,r):td(n,n[1],t,e)}function mL(n,e,t,r){const i=e[18].queries[r];if(null===i.matches){const o=n.data,s=t.matches,a=[];for(let c=0;null!==s&&c<s.length;c+=2){const u=s[c];a.push(u<0?null:qK(e,o[u],s[c+1],t.metadata.read))}i.matches=a}return i.matches}function PA(n,e,t,r){const i=n.queries.getByIndex(t),o=i.matches;if(null!==o){const s=mL(n,e,i,t);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)r.push(s[a/2]);else{const u=o[a+1],h=e[-c];for(let m=10;m<h.length;m++){const _=h[m];_[16]===_[3]&&PA(_[1],_,u,r)}if(null!==h[9]){const m=h[9];for(let _=0;_<m.length;_++){const v=m[_];PA(v[1],v,u,r)}}}}}return r}function yL(n,e,t){const r=ct();return r.firstCreatePass&&(function EL(n,e,t){null===n.queries&&(n.queries=new NA),n.queries.track(new MA(e,t))}(r,new gL(n,e,t),-1),!(2&~e)&&(r.staticViewQueries=!0)),function _L(n,e,t){const r=new Cq(!(4&~t));return function SD(n,e,t,r){const i=lc(e);i.push(t),n.firstCreatePass&&dm(n).push(r,i.length-1)}(n,e,r,r.destroy),(e[18]??=new RA).queries.push(new SA(r))-1}(r,J(),e)}function kA(n,e){return n.queries.getByIndex(e)}function bL(n,e){const t=n[1],r=kA(t,e);return r.crossesNgTemplate?PA(t,n,e,[]):mL(t,n,r,e)}let pd=class{},PL=class{};class LA extends pd{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new cL(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;const o=hi(e);this._bootstrapComponents=Ea(o.bootstrap),this._r3Injector=Um(e,t,[{provide:pd,useValue:this},{provide:GE,useValue:this.componentFactoryResolver},...r],Tr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class VA extends PL{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new LA(this.moduleType,e,[])}}class OL extends pd{injector;componentFactoryResolver=new cL(this);instance=null;constructor(e){super();const t=new Ls([...e.providers,{provide:pd,useValue:this},{provide:GE,useValue:this.componentFactoryResolver}],e.parent||rl(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function WE(n,e,t=null){return new OL({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let cQ=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=Vh(0,t.type),i=r.length>0?WE([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=fe({token:n,providedIn:"environment",factory:()=>new n(me(cr))})}return n})();function Vr(n){return Ze(()=>{const e=kL(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===cE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(cQ).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||vs.Emulated,styles:n.styles||Lt,_:null,schemas:n.schemas||null,tView:null,id:""};e.standalone&&Do("NgStandalone"),xL(t);const r=n.dependencies;return t.directiveDefs=qE(r,!1),t.pipeDefs=qE(r,!0),t.id=function pQ(n){let e=0;const r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,"function"==typeof n.consts?"":n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(const o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function lQ(n){return Tt(n)||function Gr(n){return n[jo]||null}(n)}function uQ(n){return null!==n}function Qt(n){return Ze(()=>({type:n.type,bootstrap:n.bootstrap||Lt,declarations:n.declarations||Lt,imports:n.imports||Lt,exports:n.exports||Lt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function dQ(n,e){if(null==n)return Ho;const t={};for(const r in n)if(n.hasOwnProperty(r)){const i=n[r];let o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=ME.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function hQ(n){if(null==n)return Ho;const e={};for(const t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function xe(n){return Ze(()=>{const e=kL(n);return xL(e),e})}function oo(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function kL(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Ho,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:!0===n.signals,selectors:n.selectors||Lt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:dQ(n.inputs,e),outputs:hQ(n.outputs),debugInfo:null}}function xL(n){n.features?.forEach(e=>e(n))}function qE(n,e){if(!n)return null;const t=e?fi:lQ;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(uQ)}function rn(n){let e=function FL(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Oi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new se(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const s=n;s.inputs=BA(n.inputs),s.declaredInputs=BA(n.declaredInputs),s.outputs=BA(n.outputs);const a=i.hostBindings;a&&vQ(n,a);const c=i.viewQuery,u=i.contentQueries;if(c&&_Q(n,c),u&&yQ(n,u),gQ(n,i),Jw(n.outputs,i.outputs),Oi(i)&&i.data.animation){const h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===rn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function mQ(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ml(i.hostAttrs,t=ml(t,i.hostAttrs))}}(r)}function gQ(n,e){for(const t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;const r=e.inputs[t];void 0!==r&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function BA(n){return n===Ho?{}:n===Lt?[]:n}function _Q(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function yQ(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,o)=>{e(r,i,o),t(r,i,o)}:e}function vQ(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function KE(n){return!!function HA(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function gr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function A_(n,e,t,r,i,o,s,a,c,u){const h=t+26,m=e.firstCreatePass?function AQ(n,e,t,r,i,o,s,a,c){const u=e.consts,h=Uf(e,n,4,s||null,a||null);pm()&&DA(e,t,h,Xi(u,c),QC),h.mergedAttrs=ml(h.mergedAttrs,h.attrs),uf(e,h);const m=h.tView=GC(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return null!==e.queries&&(e.queries.template(e,h),m.queries=e.queries.embeddedTView(h)),h}(h,e,n,r,i,o,s,a,c):e.data[h];eo(m,!1);const _=jL(e,n,m,t);hc()&&kE(e,n,_,m),wo(_,n);const v=SF(_,n,_,m);return n[h]=v,WC(n,v),Kh(m)&&PE(e,n,m),null!=c&&KC(n,m,u),m}function St(n,e,t,r,i,o,s,a){const c=J(),u=ct();return A_(c,u,n,e,t,r,i,Xi(u.consts,o),s,a),St}let jL=function HL(n,e,t,r){return gs(!0),e[11].createComment("")};let zA=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const tV=new pe(""),XE=new pe("");let JA,QA=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];taskTrackingZone=null;constructor(t,r,i){this._ngZone=t,this.registry=r,JA||(function DY(n){JA=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{g.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static \u0275fac=function(r){return new(r||n)(me(g),me(YA),me(XE))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),YA=(()=>{class n{_applications=new Map;registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return JA?.findTestabilityInTree(this,t,r)??null}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),nV=(()=>{class n{static \u0275prov=fe({token:n,providedIn:"root",factory:()=>new CY})}return n})();class CY{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){const r=this.queues.get(e.zone);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){const t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);const r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(const[e,t]of this.queues)null===e?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(const t of e)e.delete(t),this.queuedEffectCount--,t.run()}}function R_(n){return!!n&&"function"==typeof n.then}function rV(n){return!!n&&"function"==typeof n.subscribe}const iV=new pe("");function oV(n){return fs([{provide:iV,multi:!0,useValue:n}])}let sV=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=N(iV,{optional:!0})??[];injector=N(zt);constructor(){}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const o=Eo(this.injector,i);if(R_(o))t.push(o);else if(rV(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const N_=new pe("");function cV(n,e){return Array.isArray(e)?e.reduce(cV,n):{...n,...e}}let so=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=N(iE);afterRenderManager=N(vC);zonelessEnabled=N(mc);rootEffectScheduler=N(nV);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Se;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=N(ys).hasPendingTasks.pipe($e(t=>!t));constructor(){N(Tf,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=N(cr);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=zt.NULL){const o=t instanceof XF;if(!this._injector.get(sV).done)throw new se(405,"");let a;a=o?t:this._injector.get(GE).resolveComponentFactory(t),this.componentTypes.push(a.componentType);const c=function AY(n){return n.isBoundToModule}(a)?void 0:this._injector.get(pd),h=a.create(i,[],r||a.selector,c),m=h.location.nativeElement,_=h.injector.get(tV,null);return _?.registerApplication(m),h.onDestroy(()=>{this.detachView(h.hostView),eb(this.components,h),_?.unregisterApplication(m)}),this._loadComponent(h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){null!==this.tracingSnapshot?this.tracingSnapshot.run(yC.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new se(101,!1);const t=He(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,He(t),this.afterTick.next()}};synchronize(){null===this._rendererFactory&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(bA,null,{optional:!0}));let t=0;for(;0!==this.dirtyFlags&&t++<10;)this.synchronizeOnce()}synchronizeOnce(){if(16&this.dirtyFlags&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),7&this.dirtyFlags){const t=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)RY(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),23&this.dirtyFlags)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:t})=>Ku(t))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;eb(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(N_,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>eb(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new se(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function eb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function RY(n,e,t,r){(t||Ku(n))&&FE(n,e,t&&!r?0:1)}function Cn(n,e,t,r){const i=J();return gr(i,Io(),e)&&(ct(),ba(gn(),i,n,e,t,r)),Cn}function Kf(n,e,t,r){return gr(n,Io(),t)?e+gt(t)+r:mt}function tb(n,e){return n<<17|e<<2}function _d(n){return n>>17&32767}function nS(n){return 2|n}function np(n){return(131068&n)>>2}function rS(n,e){return-131069&n|e<<2}function iS(n){return 1|n}function CV(n,e,t,r){const i=n[t+1],o=null===e;let s=r?_d(i):np(i),a=!1;for(;0!==s&&(!1===a||o);){const u=n[s+1];gJ(n[s],e)&&(a=!0,n[s+1]=r?iS(u):nS(u)),s=r?_d(u):np(u)}a&&(n[t+1]=r?nS(i):iS(i))}function gJ(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&ku(n,e)>=0}const Wr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function AV(n){return n.substring(Wr.key,Wr.keyEnd)}function SV(n,e){const t=Wr.textEnd;return t===e?-1:(e=Wr.keyEnd=function vJ(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Wr.key=e,t),rp(n,e,t))}function rp(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function _t(n,e,t){const r=J();return gr(r,Io(),e)&&Co(ct(),gn(),r,n,e,r[11],t,!1),_t}function oS(n,e,t,r,i){ZC(e,n,t,i?"class":"style",r)}function fn(n,e){return function qs(n,e,t,r){const i=J(),o=ct(),s=zs(2);o.firstUpdatePass&&xV(o,n,s,r),e!==mt&&gr(i,s,e)&&LV(o,o.data[Lr()],i,i[11],n,i[s+1]=function NJ(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Tr(Tl(n)))),n}(e,t),r,s)}(n,e,null,!0),fn}function Nl(n){Ks(SJ,wa,n,!0)}function wa(n,e){for(let t=function _J(n){return function NV(n){Wr.key=0,Wr.keyEnd=0,Wr.value=0,Wr.valueEnd=0,Wr.textEnd=n.length}(n),SV(n,rp(n,0,Wr.textEnd))}(e);t>=0;t=SV(e,t))Mi(n,AV(e),!0)}function Ks(n,e,t,r){const i=ct(),o=zs(2);i.firstUpdatePass&&xV(i,null,o,r);const s=J();if(t!==mt&&gr(s,o,t)){const a=i.data[Lr()];if(BV(a,r)&&!kV(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=Ih(c,t||"")),oS(i,a,s,t,r)}else!function RJ(n,e,t,r,i,o,s,a){i===mt&&(i=Lt);let c=0,u=0,h=0<i.length?i[0]:null,m=0<o.length?o[0]:null;for(;null!==h||null!==m;){const _=c<i.length?i[c+1]:void 0,v=u<o.length?o[u+1]:void 0;let D,I=null;h===m?(c+=2,u+=2,_!==v&&(I=m,D=v)):null===m||null!==h&&h<m?(c+=2,I=h):(u+=2,I=m,D=v),null!==I&&LV(n,e,t,r,I,D,s,a),h=c<i.length?i[c]:null,m=u<o.length?o[u]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function AJ(n,e,t){if(null==t||""===t)return Lt;const r=[],i=Tl(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(n,e,t),r,o)}}function kV(n,e){return e>=n.expandoStartIndex}function xV(n,e,t,r){const i=n.data;if(null===i[t+1]){const o=i[Lr()],s=kV(n,t);BV(o,r)&&null===e&&!s&&(e=!1),e=function TJ(n,e,t,r){const i=function bm(n){const e=ut.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=P_(t=sS(null,n,e,t,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==i)if(t=sS(i,n,e,t,r),null===o){let c=function wJ(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==np(r))return n[_d(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=sS(null,n,e,c[1],r),c=P_(c,e.attrs,r),function DJ(n,e,t,r){n[_d(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else o=function CJ(n,e,t){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=P_(r,n[o].hostAttrs,t);return P_(r,e.attrs,t)}(n,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),t}(i,o,e,r),function fJ(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=_d(s),c=np(s);n[r]=t;let h,u=!1;if(Array.isArray(t)?(h=t[1],(null===h||ku(t,h)>0)&&(u=!0)):h=t,i)if(0!==c){const _=_d(n[a+1]);n[r+1]=tb(_,a),0!==_&&(n[_+1]=rS(n[_+1],r)),n[a+1]=function dJ(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=tb(a,0),0!==a&&(n[a+1]=rS(n[a+1],r)),a=r;else n[r+1]=tb(c,0),0===a?a=r:n[c+1]=rS(n[c+1],r),c=r;u&&(n[r+1]=nS(n[r+1])),CV(n,h,r,!0),CV(n,h,r,!1),function pJ(n,e,t,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&ku(o,e)>=0&&(t[r+1]=iS(t[r+1]))}(e,h,n,r,o),s=tb(a,c),o?e.classBindings=s:e.styleBindings=s}(i,o,e,t,s,r)}}function sS(n,e,t,r,i){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],r=P_(r,o.hostAttrs,i),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function P_(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Mi(n,s,!!t||e[++o]))}return void 0===n?null:n}function SJ(n,e,t){const r=String(e);""!==r&&!r.includes(" ")&&Mi(n,r,t)}function LV(n,e,t,r,i,o,s,a){if(!(3&e.type))return;const c=n.data,u=c[a+1],h=function hJ(n){return!(1&~n)}(u)?VV(c,e,t,i,np(u),s):void 0;nb(h)||(nb(o)||function uJ(n){return!(2&~n)}(u)&&(o=VV(c,null,t,i,a,s)),function r7(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:wl.DashCase;null==i?n.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=wl.Important),n.setStyle(t,r,i,o))}}(r,s,fa(Lr(),t),i,o))}function VV(n,e,t,r,i,o){const s=null===e;let a;for(;i>0;){const c=n[i],u=Array.isArray(c),h=u?c[1]:c,m=null===h;let _=t[i+1];_===mt&&(_=m?Lt:void 0);let v=m?Ou(_,r):h===r?_:void 0;if(u&&!nb(v)&&(v=Ou(c,r)),nb(v)&&(a=v,s))return a;const I=n[i+1];i=s?_d(I):np(I)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=Ou(c,r))}return a}function nb(n){return void 0!==n}function BV(n,e){return!!(n.flags&(e?8:16))}function aS(n,e,t){Ks(Mi,wa,Kf(J(),n,e,t),!0)}function Le(n,e,t,r){const i=J(),o=ct(),s=26+n,a=i[11],c=o.firstCreatePass?sL(s,o,i,e,QC,pm(),t,r):o.data[s],u=$V(o,i,c,a,e,n);i[s]=u;const h=Kh(c);return eo(c,!0),rF(a,u,c),!Dl(c)&&hc()&&kE(o,i,u,c),(0===function fm(){return ut.lFrame.elementDepthCount}()||h)&&wo(u,i),function k0(){ut.lFrame.elementDepthCount++}(),h&&(PE(o,i,c),OC(o,c,i)),null!==r&&KC(i,c),Le}function Ve(){let n=vt();_m()?ef():(n=n.parent,eo(n,!1));const e=n;(function gm(n){return ut.skipHydrationRootTNode===n})(e)&&function MD(){ut.skipHydrationRootTNode=null}(),function x0(){ut.lFrame.elementDepthCount--}();const t=ct();return t.firstCreatePass&&aL(t,e),null!=e.classesWithoutHost&&function UD(n){return!!(8&n.flags)}(e)&&oS(t,e,J(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function jD(n){return!!(16&n.flags)}(e)&&oS(t,e,J(),e.stylesWithoutHost,!1),Ve}function lr(n,e,t,r){return Le(n,e,t,r),Ve(),lr}let $V=(n,e,t,r,i,o)=>(gs(!0),RE(r,i,function lf(){return ut.lFrame.currentNamespace}()));function Tc(n,e,t){const r=J(),i=ct(),o=n+26,s=i.firstCreatePass?function QJ(n,e,t,r,i){const o=e.consts,s=Xi(o,r),a=Uf(e,n,8,"ng-container",s);null!==s&&wA(a,s,!0);const c=Xi(o,i);return pm()&&DA(e,t,a,c,QC),a.mergedAttrs=ml(a.mergedAttrs,a.attrs),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,t):i.data[o];eo(s,!0);const a=GV(i,r,s,n);return r[o]=a,hc()&&kE(i,r,a,s),wo(a,r),Kh(s)&&(PE(i,r,s),OC(i,s,r)),null!=t&&KC(r,s),Tc}function wc(){let n=vt();const e=ct();return _m()?ef():(n=n.parent,eo(n,!1)),e.firstCreatePass&&(uf(e,n),Uu(n)&&e.queries.elementEnd(n)),wc}let GV=(n,e,t,r)=>(gs(!0),$C(e[11],""));function So(){return J()}function Wo(n,e,t){const r=J();return gr(r,Io(),e)&&Co(ct(),gn(),r,n,e,r[11],t,!0),Wo}const yd=void 0;var XJ=["en",[["a","p"],["AM","PM"],yd],[["AM","PM"],yd,yd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yd,"{1} 'at' {0}",yd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ZJ(n){const e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===t?1:5}];let ip={};function ao(n){const e=function eZ(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=qV(e);if(t)return t;const r=e.split("-")[0];if(t=qV(r),t)return t;if("en"===r)return XJ;throw new se(701,!1)}function qV(n){return n in ip||(ip[n]=vn.ng&&vn.ng.common&&vn.ng.common.locales&&vn.ng.common.locales[n]),ip[n]}var Fn=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Fn||{});const ib="en-US";let KV=ib;function h2(n,e,t){return function r(i){if(i===Function)return t;h_(Go(n)?pi(n.index,e):e,5);const s=e[8];let a=f2(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=f2(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function f2(n,e,t,r){const i=He(null);try{return!1!==t(r)}catch(o){return function jZ(n,e){const t=n[9],r=t?t.get(ro,null):null;r&&r.handleError(e)}(n,o),!1}finally{He(i)}}function p2(n,e,t,r,i,o){const a=e[1],h=e[t][a.data[t].outputs[r]],m=a.firstCreatePass?dm(a):null,_=lc(e),v=h.subscribe(o),I=_.length;_.push(o,v),m&&m.push(i,n.index,I,-(I+1))}const gS=new Map;function Yt(n,e,t,r){const i=J(),o=ct(),s=vt();return mS(o,i,i[11],s,n,e,r),Yt}function mS(n,e,t,r,i,o,s){const a=Kh(r),u=n.firstCreatePass?dm(n):null,h=lc(e);let m=!0;if(3&r.type||s){const _=zr(r,e),v=s?s(_):_,I=h.length,D=s?O=>s(Vt(O[r.index])):r.index;let A=null;if(!s&&a&&(A=function GZ(n,e,t,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===t&&i[o+1]===r){const a=e[7],c=i[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(n,e,i,r.index)),null!==A)(A.__ngLastListenerFn__||A).__ngNextListenerFn__=o,A.__ngLastListenerFn__=o,m=!1;else{o=h2(r,e,o);const O=e[9].get(yc);gS.get(O)?.(v,i,o);const j=t.listen(v,i,o);h.push(o,j),u&&u.push(i,D,I,I+1)}}else o=h2(r,e,o);if(m){const _=r.outputs?.[i],v=r.hostDirectiveOutputs?.[i];if(v&&v.length)for(let I=0;I<v.length;I+=2)p2(r,e,v[I],v[I+1],i,o);if(_&&_.length)for(const I of _)p2(r,e,I,i,i,o)}}function Ke(n=1){return function xD(n){return(ut.lFrame.contextLView=function Zh(n,e){for(;n>0;)e=e[14],n--;return e}(n,ut.lFrame.contextLView))[8]}(n)}function zZ(n,e){let t=null;const r=function C9(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?Jx(n,o,!0):R9(r,o))return i}else t=i}return t}function cb(n){const e=J()[15][5];if(!e.projection){const r=e.projection=function nl(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(n?n.length:1,null),i=r.slice();let o=e.child;for(;null!==o;){if(128!==o.type){const s=n?zZ(o,n):0;null!==s&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function lb(n,e=0,t,r,i,o){const s=J(),a=ct(),c=r?n+1:null;null!==c&&A_(s,a,c,r,i,o,null,t);const u=Uf(a,26+n,16,null,t||null);null===u.projection&&(u.projection=e),ef();const m=!s[6]||uc();null===s[15][5].projection[u.projection]&&null!==c?function WZ(n,e,t){const r=26+t,i=e.data[r],o=n[r];Bf(o,Ff(n,i,void 0,{dehydratedView:null}),0,ud(i,null))}(s,a,c):m&&!Dl(u)&&function t7(n,e,t){yF(e[11],0,e,t,rA(n,t,e),fF(t.parent||e[5],t,e))}(a,s,u)}function ub(n,e,t){return db(n,"",e,"",t),ub}function db(n,e,t,r,i){const o=J(),s=Kf(o,e,t,r);return s!==mt&&Co(ct(),gn(),o,n,s,o[11],i,!1),db}function Qs(n){return Hs(function ym(){return ut.lFrame.contextLView}(),26+n)}function on(n,e=""){const t=J(),r=ct(),i=n+26,o=r.firstCreatePass?Uf(r,i,1,e,null):r.data[i],s=O2(r,t,o,e,n);t[i]=s,hc()&&kE(r,t,s,o),eo(o,!1)}let O2=(n,e,t,r,i)=>(gs(!0),function HC(n,e){return n.createText(e)}(e[11],r));function Fi(n){return vd("",n,""),Fi}function vd(n,e,t){const r=J(),i=Kf(r,n,e,t);return i!==mt&&function Dc(n,e,t){const r=fa(e,n);!function Xx(n,e,t){n.setValue(e,t)}(n[11],r,t)}(r,Lr(),i),vd}function hb(n,e,t){Ck(e)&&(e=e());const r=J();return gr(r,Io(),e)&&Co(ct(),gn(),r,n,e,r[11],t,!1),hb}function yS(n,e){const t=Ck(n);return t&&n.set(e),t}function fb(n,e){const t=J(),r=ct(),i=vt();return mS(r,t,t[11],i,n,e),fb}function vS(n,e,t,r,i){if(n=ft(n),Array.isArray(n))for(let o=0;o<n.length;o++)vS(n[o],e,t,r,i);else{const o=ct(),s=J(),a=vt();let c=oc(n)?n:ft(n.provide);const u=Gh(n),h=1048575&a.providerIndexes,m=a.directiveStart,_=a.providerIndexes>>20;if(oc(n)||!n.multi){const v=new gl(u,i,Ie),I=bS(c,e,i?h:h+_,m);-1===I?(Om(gf(a,s),o,c),ES(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(v),s.push(v)):(t[I]=v,s[I]=v)}else{const v=bS(c,e,h+_,m),I=bS(c,e,h,h+_),A=I>=0&&t[I];if(i&&!A||!i&&!(v>=0&&t[v])){Om(gf(a,s),o,c);const O=function fX(n,e,t,r,i){const o=new gl(n,t,Ie);return o.multi=[],o.index=e,o.componentProviders=0,G2(o,i,r&&!t),o}(i?hX:dX,t.length,i,r,u);!i&&A&&(t[I].providerFactory=O),ES(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(O),s.push(O)}else ES(o,n,v>-1?v:I,G2(t[i?I:v],u,!i&&r));!i&&r&&A&&t[I].componentProviders++}}}function ES(n,e,t,r){const i=oc(e),o=function uD(n){return!!n.useClass}(e);if(i||o){const c=(o?ft(e.useClass):e).prototype.ngOnDestroy;if(c){const u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const h=u.indexOf(t);-1===h?u.push(t,[r,c]):u[h+1].push(r,c)}else u.push(t,c)}}}function G2(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function bS(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function dX(n,e,t,r,i){return IS(this.multi,[])}function hX(n,e,t,r,i){const o=this.multi;let s;if(this.providerFactory){const a=this.providerFactory.componentProviders,c=td(r,r[1],this.providerFactory.index,i);s=c.slice(0,a),IS(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],IS(o,s);return s}function IS(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function An(n,e=[]){return t=>{t.providersResolver=(r,i)=>function uX(n,e,t){const r=ct();if(r.firstCreatePass){const i=Oi(n);vS(t,r.data,r.blueprint,i,!0),vS(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}function W2(n,e,t,r,i,o){const s=e+t;return gr(n,s,i)?function Ia(n,e,t){return n[e]=t}(n,s+1,o?r.call(o,i):r(i)):function U_(n,e){const t=n[e];return t===mt?void 0:t}(n,s+1)}function Cc(n,e){const t=ct();let r;const i=n+26;t.firstCreatePass?(r=function wX(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const o=r.factory||(r.factory=Fs(r.type)),a=Yi(Ie);try{const c=_l(!1),u=o();return _l(c),function _S(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,J(),i,u),u}finally{Yi(a)}}function Ac(n,e,t){const r=n+26,i=J(),o=Hs(i,r);return function j_(n,e){return n[1].data[e].pure}(i,r)?W2(i,function gi(){const n=ut.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}(),e,o.transform,t,o):o.transform(t)}function bs(n,e){return LE(n,e)}class $_{full;major;minor;patch;constructor(e){this.full=e;const t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}}const tee=new $_("19.2.10");class nee{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let ree=(()=>{class n{compileModuleSync(t){return new VA(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=Ea(hi(t).declarations).reduce((s,a)=>{const c=Tt(a);return c&&s.push(new w_(c)),s},[]);return new nee(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),see=(()=>{class n{zone=N(g);changeDetectionScheduler=N(zo);applicationRef=N(so);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function SS({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new g({...RS(),scheduleInRootZone:t}),[{provide:g,useFactory:n},{provide:ei,multi:!0,useFactory:()=>{const r=N(see,{optional:!0});return()=>r.initialize()}},{provide:ei,multi:!0,useFactory:()=>{const r=N(cee);return()=>{r.initialize()}}},!0===e?{provide:_s,useValue:!0}:[],{provide:_c,useValue:t??tE}]}function RS(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}let cee=(()=>{class n{subscription=new Xn;initialized=!1;zone=N(g);pendingTasks=N(ys);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{g.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{g.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),G_=(()=>{class n{appRef=N(so);taskService=N(ys);ngZone=N(g);zonelessEnabled=N(mc);tracing=N(Tf,{optional:!0});disableScheduling=N(_s,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Xn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(l):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(N(_c,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Te||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&5===t)return;let r=!1;switch(t){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 6:case 13:this.appRef.dirtyFlags|=2,r=!0;break;case 12:this.appRef.dirtyFlags|=16,r=!0;break;case 11:r=!0;break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;const i=this.useMicrotaskScheduler?rE:nE;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>i(()=>this.tick())):this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(l+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(0===this.appRef.dirtyFlags)return void this.cleanup();!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,rE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Sc=new pe("",{providedIn:"root",factory:()=>N(Sc,It.Optional|It.SkipSelf)||function lee(){return typeof $localize<"u"&&$localize.locale||ib}()}),yb=new pe(""),gee=new pe("");function z_(n){return!n.moduleRef}let vB=(()=>{class n{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(t){this._injector=t}bootstrapModuleFactory(t,r){const i=r?.scheduleInRootZone,s=r?.ignoreChangesOutsideZone,a=[SS({ngZoneFactory:()=>function El(n="zone.js",e){return"noop"===n?new Te:"zone.js"===n?new g(e):n}(r?.ngZone,{...RS({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}),scheduleInRootZone:i}),ignoreChangesOutsideZone:s}),{provide:zo,useExisting:G_}],c=function aQ(n,e,t){return new LA(n,e,t,!1)}(t.moduleType,this.injector,a);return function yB(n){const e=z_(n)?n.r3Injector:n.moduleRef.injector,t=e.get(g);return t.run(()=>{z_(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();const r=e.get(ro,null);let i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),z_(n)){const o=()=>e.destroy(),s=n.platformInjector.get(yb);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{const o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(yb);s.add(o),n.moduleRef.onDestroy(()=>{eb(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return function _ee(n,e,t){try{const r=t();return R_(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(r,t,()=>{const o=e.get(sV);return o.runInitializers(),o.donePromise.then(()=>{if(function iZ(n){"string"==typeof n&&(KV=n.toLowerCase().replace(/_/g,"-"))}(e.get(Sc,ib)||ib),!e.get(gee,!0))return z_(n)?e.get(so):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(z_(n)){const c=e.get(so);return void 0!==n.rootComponent&&c.bootstrap(n.rootComponent),c}return function mee(n,e){const t=n.injector.get(so);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new se(-403,!1);n.instance.ngDoBootstrap(t)}e.push(n)}(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){const i=cV({},r);return function oee(n,e,t){const r=new VA(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new se(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(yb,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(r){return new(r||n)(me(zt))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Ol=null;const EB=new pe("");function bB(n,e,t=[]){const r=`Platform: ${e}`,i=new pe(r);return(o=[])=>{let s=MS();if(!s||s.injector.get(EB,!1)){const a=[...t,...o,{provide:i,useValue:!0}];n?n(a):function yee(n){if(Ol&&!Ol.get(EB,!1))throw new se(400,!1);(function aV(){!function za(n){Ga=n}(()=>{throw new se(600,!1)})})(),Ol=n;const e=n.get(vB);(function TB(n){const e=n.get(aC,null);Eo(n,()=>{e?.forEach(t=>t())})})(n)}(function IB(n=[],e){return zt.create({name:e,providers:[{provide:Fu,useValue:"platform"},{provide:yb,useValue:new Set([()=>Ol=null])},...n]})}(a,r))}return function vee(){const e=MS();if(!e)throw new se(401,!1);return e}()}}function MS(){return Ol?.get(vB)??null}let qo=(()=>class n{static __NG_ELEMENT_ID__=bee})();function bee(n){return function Iee(n,e,t){if(Go(n)&&!t){const r=pi(n.index,e);return new p_(r,r)}return 175&n.type?new p_(e[15],e):null}(vt(),J(),!(16&~n))}class SB{constructor(){}supports(e){return KE(e)}create(e){return new Aee(e)}}const Cee=(n,e)=>e;class Aee{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||Cee}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const s=!r||t&&t.currentIndex<NB(r,i,o)?t:r,a=NB(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,null==s.previousIndex)i++;else{o||(o=[]);const u=a-i,h=c-i;if(u!=h){for(let _=0;_<u;_++){const v=_<o.length?o[_]:o[_]=0,I=v+_;h<=I&&I<u&&(o[_]=v+1)}o[s.previousIndex]=h-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!KE(e))throw new se(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),r=!0),t=t._next}else i=0,function DQ(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new See(t,r),o,i),e}_verifyReinsertion(e,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new RB),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new RB),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class See{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}}class Ree{_head=null;_tail=null;add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class RB{map=new Map;put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new Ree,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function NB(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function PB(){return new FS([new SB])}let FS=(()=>{class n{factories;static \u0275prov=fe({token:n,providedIn:"root",factory:PB});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||PB()),deps:[[n,new Pu,new hs]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new se(901,!1)}}return n})();const kee=bB(null,"core",[]);let xee=(()=>{class n{constructor(t){}static \u0275fac=function(r){return new(r||n)(me(so))};static \u0275mod=Qt({type:n});static \u0275inj=Rt({})}return n})();function Br(n){return function an(n){const e=He(null);try{return n()}finally{He(e)}}(n)}function Rc(n,e){return function In(n,e){const t=Object.create(Yn);t.computation=n,void 0!==e&&(t.equal=e);const r=()=>{if(yt(t),Be(t),t.value===ar)throw t.error;return t.value};return r[Et]=t,r}(n,e?.equal)}function US(n,e){const t=Tt(n),r=e.elementInjector||rl();return new w_(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector)}const _r=new pe("");let XB=null;function kl(){return XB}class Dte{}let jS=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:()=>N(Ate),providedIn:"platform"})}return n})();const Cte=new pe("");let Ate=(()=>{class n extends jS{_location;_history;_doc=N(_r);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return kl().getBaseHref(this._doc)}onPopState(t){const r=kl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=kl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function HS(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function eU(n){const e=n.search(/#|\?|$/);return"/"===n[e-1]?n.slice(0,e-1)+n.slice(e):n}function Nc(n){return n&&"?"!==n[0]?`?${n}`:n}let bd=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:()=>N(nU),providedIn:"root"})}return n})();const tU=new pe("");let nU=(()=>{class n extends bd{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??N(_r).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return HS(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Nc(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const s=this.prepareExternalUrl(i+Nc(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){const s=this.prepareExternalUrl(i+Nc(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(me(jS),me(tU,8))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),q_=(()=>{class n{_subject=new Se;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Nte(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(eU(rU(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Nc(r))}normalize(t){return n.stripTrailingSlash(function Rte(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,rU(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Nc(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Nc(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Nc;static joinWithSlash=HS;static stripTrailingSlash=eU;static \u0275fac=function(r){return new(r||n)(me(bd))};static \u0275prov=fe({token:n,factory:()=>function Ste(){return new q_(me(bd))}(),providedIn:"root"})}return n})();function rU(n){return n.replace(/\/index.html$/,"")}function iU(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}function Cb(n){return"server"===n}class sU{}let Pte=(()=>{class n extends bd{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=HS(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){const s=this.prepareExternalUrl(i+Nc(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){const s=this.prepareExternalUrl(i+Nc(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(me(jS),me(tU,8))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();var lo=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(lo||{}),Sn=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Sn||{}),Ko=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Ko||{});function Sb(n,e){return Ts(ao(n)[Fn.DateFormat],e)}function Rb(n,e){return Ts(ao(n)[Fn.TimeFormat],e)}function Nb(n,e){return Ts(ao(n)[Fn.DateTimeFormat],e)}function Is(n,e){const t=ao(n),r=t[Fn.NumberSymbols][e];if(typeof r>"u"){if(12===e)return t[Fn.NumberSymbols][0];if(13===e)return t[Fn.NumberSymbols][1]}return r}function cU(n){if(!n[Fn.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Fn.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Ts(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function GS(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Wte=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Mb={},qte=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function lU(n,e,t,r){let i=function nne(n){if(hU(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,o=1,s=1]=n.split("-").map(a=>+a);return Pb(i,o-1,s)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Wte))return function rne(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),u=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return o.call(e,s,a,c,u),e}(r)}const e=new Date(n);if(!hU(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Mc(t,e)||e;let a,s=[];for(;e;){if(a=qte.exec(e),!a){s.push(e);break}{s=s.concat(a.slice(1));const h=s.pop();if(!h)break;e=h}}let c=i.getTimezoneOffset();r&&(c=dU(r,c),i=function tne(n,e){const i=n.getTimezoneOffset();return function ene(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,-1*(dU(e,i)-i))}(i,r));let u="";return s.forEach(h=>{const m=function Xte(n){if(WS[n])return WS[n];let e;switch(n){case"G":case"GG":case"GGG":e=Bn(3,Sn.Abbreviated);break;case"GGGG":e=Bn(3,Sn.Wide);break;case"GGGGG":e=Bn(3,Sn.Narrow);break;case"y":e=jr(0,1,0,!1,!0);break;case"yy":e=jr(0,2,0,!0,!0);break;case"yyy":e=jr(0,3,0,!1,!0);break;case"yyyy":e=jr(0,4,0,!1,!0);break;case"Y":e=Fb(1);break;case"YY":e=Fb(2,!0);break;case"YYY":e=Fb(3);break;case"YYYY":e=Fb(4);break;case"M":case"L":e=jr(1,1,1);break;case"MM":case"LL":e=jr(1,2,1);break;case"MMM":e=Bn(2,Sn.Abbreviated);break;case"MMMM":e=Bn(2,Sn.Wide);break;case"MMMMM":e=Bn(2,Sn.Narrow);break;case"LLL":e=Bn(2,Sn.Abbreviated,lo.Standalone);break;case"LLLL":e=Bn(2,Sn.Wide,lo.Standalone);break;case"LLLLL":e=Bn(2,Sn.Narrow,lo.Standalone);break;case"w":e=zS(1);break;case"ww":e=zS(2);break;case"W":e=zS(1,!0);break;case"d":e=jr(2,1);break;case"dd":e=jr(2,2);break;case"c":case"cc":e=jr(7,1);break;case"ccc":e=Bn(1,Sn.Abbreviated,lo.Standalone);break;case"cccc":e=Bn(1,Sn.Wide,lo.Standalone);break;case"ccccc":e=Bn(1,Sn.Narrow,lo.Standalone);break;case"cccccc":e=Bn(1,Sn.Short,lo.Standalone);break;case"E":case"EE":case"EEE":e=Bn(1,Sn.Abbreviated);break;case"EEEE":e=Bn(1,Sn.Wide);break;case"EEEEE":e=Bn(1,Sn.Narrow);break;case"EEEEEE":e=Bn(1,Sn.Short);break;case"a":case"aa":case"aaa":e=Bn(0,Sn.Abbreviated);break;case"aaaa":e=Bn(0,Sn.Wide);break;case"aaaaa":e=Bn(0,Sn.Narrow);break;case"b":case"bb":case"bbb":e=Bn(0,Sn.Abbreviated,lo.Standalone,!0);break;case"bbbb":e=Bn(0,Sn.Wide,lo.Standalone,!0);break;case"bbbbb":e=Bn(0,Sn.Narrow,lo.Standalone,!0);break;case"B":case"BB":case"BBB":e=Bn(0,Sn.Abbreviated,lo.Format,!0);break;case"BBBB":e=Bn(0,Sn.Wide,lo.Format,!0);break;case"BBBBB":e=Bn(0,Sn.Narrow,lo.Format,!0);break;case"h":e=jr(3,1,-12);break;case"hh":e=jr(3,2,-12);break;case"H":e=jr(3,1);break;case"HH":e=jr(3,2);break;case"m":e=jr(4,1);break;case"mm":e=jr(4,2);break;case"s":e=jr(5,1);break;case"ss":e=jr(5,2);break;case"S":e=jr(6,1);break;case"SS":e=jr(6,2);break;case"SSS":e=jr(6,3);break;case"Z":case"ZZ":case"ZZZ":e=kb(0);break;case"ZZZZZ":e=kb(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=kb(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=kb(2);break;default:return null}return WS[n]=e,e}(h);u+=m?m(i,t,c):"''"===h?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function Pb(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Mc(n,e){const t=function kte(n){return ao(n)[Fn.LocaleId]}(n);if(Mb[t]??={},Mb[t][e])return Mb[t][e];let r="";switch(e){case"shortDate":r=Sb(n,Ko.Short);break;case"mediumDate":r=Sb(n,Ko.Medium);break;case"longDate":r=Sb(n,Ko.Long);break;case"fullDate":r=Sb(n,Ko.Full);break;case"shortTime":r=Rb(n,Ko.Short);break;case"mediumTime":r=Rb(n,Ko.Medium);break;case"longTime":r=Rb(n,Ko.Long);break;case"fullTime":r=Rb(n,Ko.Full);break;case"short":const i=Mc(n,"shortTime"),o=Mc(n,"shortDate");r=Ob(Nb(n,Ko.Short),[i,o]);break;case"medium":const s=Mc(n,"mediumTime"),a=Mc(n,"mediumDate");r=Ob(Nb(n,Ko.Medium),[s,a]);break;case"long":const c=Mc(n,"longTime"),u=Mc(n,"longDate");r=Ob(Nb(n,Ko.Long),[c,u]);break;case"full":const h=Mc(n,"fullTime"),m=Mc(n,"fullDate");r=Ob(Nb(n,Ko.Full),[h,m])}return r&&(Mb[t][e]=r),r}function Ob(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Ys(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function jr(n,e,t=0,r=!1,i=!1){return function(o,s){let a=function Qte(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,o);if((t>0||a>-t)&&(a+=t),3===n)0===a&&-12===t&&(a=12);else if(6===n)return function Kte(n,e){return Ys(n,3).substring(0,e)}(a,e);const c=Is(s,5);return Ys(a,e,c,r,i)}}function Bn(n,e,t=lo.Format,r=!1){return function(i,o){return function Yte(n,e,t,r,i,o){switch(t){case 2:return function Lte(n,e,t){const r=ao(n),o=Ts([r[Fn.MonthsFormat],r[Fn.MonthsStandalone]],e);return Ts(o,t)}(e,i,r)[n.getMonth()];case 1:return function Fte(n,e,t){const r=ao(n),o=Ts([r[Fn.DaysFormat],r[Fn.DaysStandalone]],e);return Ts(o,t)}(e,i,r)[n.getDay()];case 0:const s=n.getHours(),a=n.getMinutes();if(o){const u=function jte(n){const e=ao(n);return cU(e),(e[Fn.ExtraData][2]||[]).map(r=>"string"==typeof r?GS(r):[GS(r[0]),GS(r[1])])}(e),h=function Hte(n,e,t){const r=ao(n);cU(r);const o=Ts([r[Fn.ExtraData][0],r[Fn.ExtraData][1]],e)||[];return Ts(o,t)||[]}(e,i,r),m=u.findIndex(_=>{if(Array.isArray(_)){const[v,I]=_,D=s>=v.hours&&a>=v.minutes,A=s<I.hours||s===I.hours&&a<I.minutes;if(v.hours<I.hours){if(D&&A)return!0}else if(D||A)return!0}else if(_.hours===s&&_.minutes===a)return!0;return!1});if(-1!==m)return h[m]}return function xte(n,e,t){const r=ao(n),o=Ts([r[Fn.DayPeriodsFormat],r[Fn.DayPeriodsStandalone]],e);return Ts(o,t)}(e,i,r)[s<12?0:1];case 3:return function Vte(n,e){return Ts(ao(n)[Fn.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,o,n,e,t,r)}}function kb(n){return function(e,t,r){const i=-1*r,o=Is(t,5),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Ys(s,2,o)+Ys(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Ys(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Ys(s,2,o)+":"+Ys(Math.abs(i%60),2,o);case 3:return 0===r?"Z":(i>=0?"+":"")+Ys(s,2,o)+":"+Ys(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}const Jte=0,xb=4;function uU(n){const e=n.getDay(),t=0===e?-3:xb-e;return Pb(n.getFullYear(),n.getMonth(),n.getDate()+t)}function zS(n,e=!1){return function(t,r){let i;if(e){const o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{const o=uU(t),s=function Zte(n){const e=Pb(n,Jte,1).getDay();return Pb(n,0,1+(e<=xb?xb:xb+7)-e)}(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Ys(i,n,Is(r,5))}}function Fb(n,e=!1){return function(t,r){return Ys(uU(t).getFullYear(),n,Is(r,5),e)}}const WS={};function dU(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function hU(n){return n instanceof Date&&!isNaN(n.valueOf())}class _ne{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let cp=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new _ne(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),yU(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{yU(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Ie(Ao),Ie(Sr),Ie(FS))};static \u0275dir=xe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function yU(n,e){n.context.$implicit=e.item}let lp=(()=>{class n{_viewContainer;_context=new yne;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){vU(t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){vU(t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Ie(Ao),Ie(Sr))};static \u0275dir=xe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})();class yne{$implicit=null;ngIf=null}function vU(n,e){if(n&&!n.createEmbeddedView)throw new se(2020,!1)}const One=new pe(""),kne=new pe("");let bU=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(null==t||""===t||t!=t)return null;try{return lU(t,r??this.defaultOptions?.dateFormat??"mediumDate",o||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(s){throw function Js(n,e){return new se(2100,!1)}()}}static \u0275fac=function(r){return new(r||n)(Ie(Sc,16),Ie(One,24),Ie(kne,24))};static \u0275pipe=oo({name:"date",type:n,pure:!0})}return n})(),Y_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Qt({type:n});static \u0275inj=Rt({})}return n})();const r1=new pe("");let TU=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new se(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(me(r1),me(g))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();class wU{_doc;constructor(e){this._doc=e}manager}const Vb="ng-app-id";function DU(n){for(const e of n)e.remove()}function CU(n,e){const t=e.createElement("style");return t.textContent=n,t}function i1(n,e){const t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}let AU=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Cb(o),function Gne(n,e,t,r){const i=n.head?.querySelectorAll(`style[${Vb}="${e}"],link[${Vb}="${e}"]`);if(i)for(const o of i)o.removeAttribute(Vb),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(const i of t)this.addUsage(i,this.inline,CU);r?.forEach(i=>this.addUsage(i,this.external,i1))}removeStyles(t,r){for(const i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){const o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){const i=r.get(t);i&&(i.usage--,i.usage<=0&&(DU(i.elements),r.delete(t)))}ngOnDestroy(){for(const[,{elements:t}]of[...this.inline,...this.external])DU(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(const[r,{elements:i}]of this.inline)i.push(this.addElement(t,CU(r,this.doc)));for(const[r,{elements:i}]of this.external)i.push(this.addElement(t,i1(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Vb,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(me(_r),me(yc),me(Gk,8),me(sd))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();const o1={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},s1=/%COMP%/g,Yne=new pe("",{providedIn:"root",factory:()=>!0});function RU(n,e){return e.map(t=>t.replace(s1,n))}let NU=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c,u=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.tracingService=h,this.platformIsServer=Cb(a),this.defaultRenderer=new a1(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===vs.ShadowDom&&(r={...r,encapsulation:vs.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof PU?i.applyToHost(t):i instanceof c1&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,m=this.platformIsServer,_=this.tracingService;switch(r.encapsulation){case vs.Emulated:o=new PU(c,u,r,this.appId,h,s,a,m,_);break;case vs.ShadowDom:return new ere(c,u,t,r,s,a,this.nonce,m,_);default:o=new c1(c,u,r,h,s,a,m,_)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(me(TU),me(AU),me(yc),me(Yne),me(_r),me(sd),me(g),me(Gk),me(Tf,8))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();class a1{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(o1[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(MU(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(MU(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new se(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=o1[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=o1[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(wl.DashCase|wl.Important)?e.style.setProperty(t,r,i&wl.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&wl.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){null!=e&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if("string"==typeof e&&!(e=kl().getGlobalEventTarget(this.doc,e)))throw new se(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function MU(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ere extends a1{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=RU(i.id,h);for(const _ of h){const v=document.createElement("style");a&&v.setAttribute("nonce",a),v.textContent=_,this.shadowRoot.appendChild(v)}const m=i.getExternalStyles?.();if(m)for(const _ of m){const v=i1(_,o);a&&v.setAttribute("nonce",a),this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class c1 extends a1{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=u?RU(u,h):h,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}class PU extends c1{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,u){const h=i+"-"+r.id;super(e,t,r,o,s,a,c,u,h),this.contentAttr=function Jne(n){return"_ngcontent-%COMP%".replace(s1,n)}(h),this.hostAttr=function Zne(n){return"_nghost-%COMP%".replace(s1,n)}(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class l1 extends Dte{supportsDOMEvents=!0;static makeCurrent(){!function wte(n){XB??=n}(new l1)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function tre(){return J_=J_||document.querySelector("base"),J_?J_.getAttribute("href"):null}();return null==t?null:function nre(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){J_=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return iU(document.cookie,e)}}let J_=null,ire=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),ore=(()=>{class n extends wU{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(me(_r))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();const OU=["alt","control","meta","shift"],sre={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},are={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let cre=(()=>{class n extends wU{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i,o){const s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>kl().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),OU.forEach(u=>{const h=r.indexOf(u);h>-1&&(r.splice(h,1),s+=u+".")}),s+=o,0!=r.length||0===o.length)return null;const c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=sre[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),OU.forEach(s=>{s!==i&&(0,are[s])(t)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static \u0275fac=function(r){return new(r||n)(me(_r))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();const hre=bB(kee,"browser",[{provide:sd,useValue:"browser"},{provide:aC,useValue:function lre(){l1.makeCurrent()},multi:!0},{provide:_r,useFactory:function dre(){return function Kq(n){sC=n}(document),document}}]),FU=[{provide:XE,useClass:class rre{addToWindow(e){vn.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new se(5103,!1);return o},vn.getAllAngularTestabilities=()=>e.getAllTestabilities(),vn.getAllAngularRootElements=()=>e.getAllRootElements(),vn.frameworkStabilizers||(vn.frameworkStabilizers=[]),vn.frameworkStabilizers.push(r=>{const i=vn.getAllAngularTestabilities();let o=i.length;const s=function(){o--,0==o&&r()};i.forEach(a=>{a.whenStable(s)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?kl().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}}},{provide:tV,useClass:QA,deps:[g,YA,XE]},{provide:QA,useClass:QA,deps:[g,YA,XE]}],LU=[{provide:Fu,useValue:"root"},{provide:ro,useFactory:function ure(){return new ro}},{provide:r1,useClass:ore,multi:!0,deps:[_r]},{provide:r1,useClass:cre,multi:!0,deps:[_r]},NU,AU,TU,{provide:bA,useExisting:NU},{provide:sU,useClass:ire},[]];let fre=(()=>{class n{constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Qt({type:n});static \u0275inj=Rt({providers:[...LU,...FU],imports:[Y_,xee]})}return n})(),pre=(()=>{class n{static \u0275prov=fe({token:n,providedIn:"root",factory:()=>new gre(N(_r),window)})}return n})();class gre{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function mre(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}}function up(n){return!!n&&(n instanceof R||At(n.lift)&&At(n.subscribe))}var dp=pt(635);const f1=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function KU(n){return At(n?.then)}function QU(n){return At(n[qi])}function YU(n){return Symbol.asyncIterator&&At(n?.[Symbol.asyncIterator])}function JU(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ZU=function Gre(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function XU(n){return At(n?.[ZU])}function ej(n){return(0,dp.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,dp.N3)(t.read());if(i)return yield(0,dp.N3)(void 0);yield yield(0,dp.N3)(r)}}finally{t.releaseLock()}})}function tj(n){return At(n?.getReader)}function Kr(n){if(n instanceof R)return n;if(null!=n){if(QU(n))return function zre(n){return new R(e=>{const t=n[qi]();if(At(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(f1(n))return function Wre(n){return new R(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(KU(n))return function qre(n){return new R(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Wa)})}(n);if(YU(n))return nj(n);if(XU(n))return function Kre(n){return new R(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(tj(n))return function Qre(n){return nj(ej(n))}(n)}throw JU(n)}function nj(n){return new R(e=>{(function Yre(n,e){var t,r,i,o;return(0,dp.sH)(this,void 0,void 0,function*(){try{for(t=(0,dp.xN)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Pc(n,e,t,r=0,i=!1){const o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function hp(n,e=0){return Ft((t,r)=>{t.subscribe(Je(r,i=>Pc(r,n,()=>r.next(i),e),()=>Pc(r,n,()=>r.complete(),e),i=>Pc(r,n,()=>r.error(i),e)))})}function ty(n,e=0){return Ft((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function rj(n,e){if(!n)throw new Error("Iterable cannot be null");return new R(t=>{Pc(t,e,()=>{const r=n[Symbol.asyncIterator]();Pc(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Un(n,e){return e?function nie(n,e){if(null!=n){if(QU(n))return function Jre(n,e){return Kr(n).pipe(ty(e),hp(e))}(n,e);if(f1(n))return function Xre(n,e){return new R(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(KU(n))return function Zre(n,e){return Kr(n).pipe(ty(e),hp(e))}(n,e);if(YU(n))return rj(n,e);if(XU(n))return function eie(n,e){return new R(t=>{let r;return Pc(t,e,()=>{r=n[ZU](),Pc(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void t.error(s)}o?t.complete():t.next(i)},0,!0)}),()=>At(r?.return)&&r.return()})}(n,e);if(tj(n))return function tie(n,e){return rj(ej(n),e)}(n,e)}throw JU(n)}(n,e):Kr(n)}function ij(n){return n&&At(n.schedule)}function p1(n){return n[n.length-1]}function Hb(n){return At(p1(n))?n.pop():void 0}function ny(n){return ij(p1(n))?n.pop():void 0}function ze(...n){return Un(n,ny(n))}const{isArray:iie}=Array,{getPrototypeOf:oie,prototype:sie,keys:aie}=Object;function oj(n){if(1===n.length){const e=n[0];if(iie(e))return{args:e,keys:null};if(function cie(n){return n&&"object"==typeof n&&oie(n)===sie}(e)){const t=aie(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:lie}=Array;function g1(n){return $e(e=>function uie(n,e){return lie(e)?n(...e):n(e)}(n,e))}function sj(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function m1(...n){const e=ny(n),t=Hb(n),{args:r,keys:i}=oj(n);if(0===r.length)return Un([],e);const o=new R(function die(n,e,t=Ki){return r=>{aj(e,()=>{const{length:i}=n,o=new Array(i);let s=i,a=i;for(let c=0;c<i;c++)aj(e,()=>{const u=Un(n[c],e);let h=!1;u.subscribe(Je(r,m=>{o[c]=m,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>sj(i,s):Ki));return t?o.pipe(g1(t)):o}function aj(n,e,t){n?Pc(t,n,e):e()}const ry=Ns(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Qr(n,e,t=1/0){return At(e)?Qr((r,i)=>$e((o,s)=>e(r,o,i,s))(Kr(n(r,i))),t):("number"==typeof e&&(t=e),Ft((r,i)=>function hie(n,e,t,r,i,o,s,a){const c=[];let u=0,h=0,m=!1;const _=()=>{m&&!c.length&&!u&&e.complete()},v=D=>u<r?I(D):c.push(D),I=D=>{o&&e.next(D),u++;let A=!1;Kr(t(D,h++)).subscribe(Je(e,O=>{i?.(O),o?v(O):e.next(O)},()=>{A=!0},void 0,()=>{if(A)try{for(u--;c.length&&u<r;){const O=c.shift();s?Pc(e,s,()=>I(O)):I(O)}_()}catch(O){e.error(O)}}))};return n.subscribe(Je(e,v,()=>{m=!0,_()})),()=>{a?.()}}(r,i,n,t)))}function fp(n=1/0){return Qr(Ki,n)}function Id(...n){return function fie(){return fp(1)}()(Un(n,ny(n)))}function $b(n){return new R(e=>{Kr(n()).subscribe(e)})}function Gb(n,e){const t=At(n)?n:()=>n,r=i=>i.error(t());return new R(e?i=>e.schedule(r,0,i):r)}const No=new R(n=>n.complete());function _1(){return Ft((n,e)=>{let t=null;n._refCount++;const r=Je(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class cj extends R{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,pr(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Xn;const t=this.getSubject();e.add(this.source.subscribe(Je(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Xn.EMPTY)}return e}refCount(){return _1()(this)}}function ur(n,e){return Ft((t,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();t.subscribe(Je(r,c=>{i?.unsubscribe();let u=0;const h=o++;Kr(n(c,h)).subscribe(i=Je(r,m=>r.next(e?e(c,m,h,u++):m),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Li(n){return n<=0?()=>No:Ft((e,t)=>{let r=0;e.subscribe(Je(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function iy(...n){const e=ny(n);return Ft((t,r)=>{(e?Id(n,t,e):Id(n,t)).subscribe(r)})}function yr(n,e){return Ft((t,r)=>{let i=0;t.subscribe(Je(r,o=>n.call(e,o,i++)&&r.next(o)))})}function zb(n){return Ft((e,t)=>{let r=!1;e.subscribe(Je(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function lj(n=gie){return Ft((e,t)=>{let r=!1;e.subscribe(Je(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function gie(){return new ry}function xl(n,e){const t=arguments.length>=2;return r=>r.pipe(n?yr((i,o)=>n(i,o,r)):Ki,Li(1),t?zb(e):lj(()=>new ry))}function Td(n,e){return At(e)?Qr(n,e,1):Qr(n,1)}function oi(n,e,t){const r=At(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ft((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(Je(o,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),o.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),o.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),o.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):Ki}function pp(n){return Ft((e,t)=>{let o,r=null,i=!1;r=e.subscribe(Je(t,void 0,void 0,s=>{o=Kr(n(s,pp(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Wb(n,e){return Ft(function mie(n,e,t,r,i){return(o,s)=>{let a=t,c=e,u=0;o.subscribe(Je(s,h=>{const m=u++;c=a?n(c,h,m):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}(n,e,arguments.length>=2,!0))}function y1(n){return n<=0?()=>No:Ft((e,t)=>{let r=[];e.subscribe(Je(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function oy(n){return Ft((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function mi(n){return Ft((e,t)=>{Kr(n).subscribe(Je(t,()=>t.complete(),cs)),!t.closed&&e.subscribe(t)})}let yie=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(me(_r))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Dt="primary",ay=Symbol("RouteTitle");class Iie{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function gp(n){return new Iie(n)}function Tie(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=n[o];if(":"===s[0])i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Aa(n,e){const t=n?v1(n):void 0,r=e?v1(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!hj(n[i],e[i]))return!1;return!0}function v1(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function hj(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function fj(n){return n.length>0?n[n.length-1]:null}function Ll(n){return up(n)?n:R_(n)?Un(Promise.resolve(n)):ze(n)}const Die={exact:function mj(n,e,t){if(!Dd(n.segments,e.segments)||!qb(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!mj(n.children[r],e.children[r],t))return!1;return!0},subset:_j},pj={exact:function Cie(n,e){return Aa(n,e)},subset:function Aie(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>hj(n[t],e[t]))},ignored:()=>!0};function gj(n,e,t){return Die[t.paths](n.root,e.root,t.matrixParams)&&pj[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function _j(n,e,t){return yj(n,e,e.segments,t)}function yj(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Dd(i,t)||e.hasChildren()||!qb(i,t,r))}if(n.segments.length===t.length){if(!Dd(n.segments,t)||!qb(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!_j(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Dd(n.segments,i)&&qb(n.segments,i,r)&&n.children[Dt])&&yj(n.children[Dt],e,o,r)}}function qb(n,e,t){return e.every((r,i)=>pj[t](n[i].parameters,r.parameters))}class wd{root;queryParams;fragment;_queryParamMap;constructor(e=new bn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=gp(this.queryParams),this._queryParamMap}toString(){return Nie.serialize(this)}}class bn{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Qb(this)}}class cy{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=gp(this.parameters),this._parameterMap}toString(){return bj(this)}}function Dd(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let ly=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:()=>new Kb,providedIn:"root"})}return n})();class Kb{parse(e){const t=new jie(e);return new wd(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${uy(e.root,!0)}`,r=function Oie(n){const e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Yb(t)}=${Yb(i)}`).join("&"):`${Yb(t)}=${Yb(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Mie(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Nie=new Kb;function Qb(n){return n.segments.map(e=>bj(e)).join("/")}function uy(n,e){if(!n.hasChildren())return Qb(n);if(e){const t=n.children[Dt]?uy(n.children[Dt],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Dt&&r.push(`${i}:${uy(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Rie(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Dt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Dt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Dt?[uy(n.children[Dt],!1)]:[`${i}:${uy(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Dt]?`${Qb(n)}/${t[0]}`:`${Qb(n)}/(${t.join("//")})`}}function vj(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yb(n){return vj(n).replace(/%3B/gi,";")}function E1(n){return vj(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Jb(n){return decodeURIComponent(n)}function Ej(n){return Jb(n.replace(/\+/g,"%20"))}function bj(n){return`${E1(n.path)}${function Pie(n){return Object.entries(n).map(([e,t])=>`;${E1(e)}=${E1(t)}`).join("")}(n.parameters)}`}const kie=/^[^\/()?;#]+/;function b1(n){const e=n.match(kie);return e?e[0]:""}const xie=/^[^\/()?;=#]+/,Lie=/^[^=?&#]+/,Bie=/^[^&#]+/;class jie{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new bn([],{}):new bn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Dt]=new bn(e,t)),r}parseSegment(){const e=b1(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new se(4009,!1);return this.capture(e),new cy(Jb(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Fie(n){const e=n.match(xie);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=b1(this.remaining);i&&(r=i,this.capture(r))}e[Jb(t)]=Jb(r)}parseQueryParam(e){const t=function Vie(n){const e=n.match(Lie);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function Uie(n){const e=n.match(Bie);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=Ej(t),o=Ej(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=b1(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new se(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Dt);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[Dt]:new bn([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new se(4011,!1)}}function Ij(n){return n.segments.length>0?new bn([],{[Dt]:n}):n}function Tj(n){const e={};for(const[r,i]of Object.entries(n.children)){const o=Tj(i);if(r===Dt&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function Hie(n){if(1===n.numberOfChildren&&n.children[Dt]){const e=n.children[Dt];return new bn(n.segments.concat(e.segments),e.children)}return n}(new bn(n.segments,e))}function Cd(n){return n instanceof wd}function wj(n){let e;const i=Ij(function t(o){const s={};for(const c of o.children){const u=t(c);s[c.outlet]=u}const a=new bn(o.url,s);return o===n&&(e=a),a}(n.root));return e??i}function Dj(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return I1(i,i,i,t,r);const o=function Gie(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Aj(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new Aj(t,e,r)}(e);if(o.toRoot())return I1(i,i,new bn([],{}),t,r);const s=function zie(n,e,t){if(n.isAbsolute)return new Xb(e,!0,0);if(!t)return new Xb(e,!1,NaN);if(null===t.parent)return new Xb(t,!0,0);const r=Zb(n.commands[0])?0:1;return function Wie(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new se(4005,!1);i=r.segments.length}return new Xb(r,!1,i-o)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(o,i,n),a=s.processChildren?hy(s.segmentGroup,s.index,o.commands):Sj(s.segmentGroup,s.index,o.commands);return I1(i,s.segmentGroup,a,t,r)}function Zb(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function dy(n){return"object"==typeof n&&null!=n&&n.outlets}function I1(n,e,t,r,i){let s,o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`}),s=n===e?t:Cj(n,e,t);const a=Ij(Tj(s));return new wd(a,o,i)}function Cj(n,e,t){const r={};return Object.entries(n.children).forEach(([i,o])=>{r[i]=o===e?t:Cj(o,e,t)}),new bn(n.segments,r)}class Aj{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Zb(r[0]))throw new se(4003,!1);const i=r.find(dy);if(i&&i!==fj(r))throw new se(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Xb{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Sj(n,e,t){if(n??=new bn([],{}),0===n.segments.length&&n.hasChildren())return hy(n,e,t);const r=function Kie(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const s=n.segments[i],a=t[r];if(dy(a))break;const c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!Nj(c,u,s))return o;r+=2}else{if(!Nj(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new bn(n.segments.slice(0,r.pathIndex),{});return o.children[Dt]=new bn(n.segments.slice(r.pathIndex),n.children),hy(o,0,i)}return r.match&&0===i.length?new bn(n.segments,{}):r.match&&!n.hasChildren()?T1(n,e,t):r.match?hy(n,0,i):T1(n,e,t)}function hy(n,e,t){if(0===t.length)return new bn(n.segments,{});{const r=function qie(n){return dy(n[0])?n[0].outlets:{[Dt]:n}}(t),i={};if(Object.keys(r).some(o=>o!==Dt)&&n.children[Dt]&&1===n.numberOfChildren&&0===n.children[Dt].segments.length){const o=hy(n.children[Dt],e,t);return new bn(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=Sj(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new bn(n.segments,i)}}function T1(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(dy(o)){const c=Qie(o.outlets);return new bn(r,c)}if(0===i&&Zb(t[0])){r.push(new cy(n.segments[e].path,Rj(t[0]))),i++;continue}const s=dy(o)?o.outlets[Dt]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Zb(a)?(r.push(new cy(s,Rj(a))),i+=2):(r.push(new cy(s,{})),i++)}return new bn(r,{})}function Qie(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=T1(new bn([],{}),0,r))}),e}function Rj(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Nj(n,e,t){return n==t.path&&Aa(e,t.parameters)}const eI="imperative";var Wt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Wt||{});class Sa{id;url;constructor(e,t){this.id=e,this.url=t}}class tI extends Sa{type=Wt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Oc extends Sa{urlAfterRedirects;type=Wt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Qo=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Qo||{}),nI=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(nI||{});class Ad extends Sa{reason;code;type=Wt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class mp extends Sa{reason;code;type=Wt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}}class w1 extends Sa{error;target;type=Wt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Mj extends Sa{urlAfterRedirects;state;type=Wt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yie extends Sa{urlAfterRedirects;state;type=Wt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jie extends Sa{urlAfterRedirects;state;shouldActivate;type=Wt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Zie extends Sa{urlAfterRedirects;state;type=Wt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xie extends Sa{urlAfterRedirects;state;type=Wt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eoe{route;type=Wt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class toe{route;type=Wt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class noe{snapshot;type=Wt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class roe{snapshot;type=Wt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ioe{snapshot;type=Wt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ooe{snapshot;type=Wt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pj{routerEvent;position;anchor;type=Wt.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class D1{}class rI{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}}function Zs(n){return n.outlet||Dt}function fy(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class doe{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return fy(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new py(this.rootInjector)}}let py=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new doe(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(me(cr))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Oj{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=C1(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=C1(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=A1(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return A1(e,this._root).map(t=>t.value)}}function C1(n,e){if(n===e.value)return e;for(const t of e.children){const r=C1(n,t);if(r)return r}return null}function A1(n,e){if(n===e.value)return[e];for(const t of e.children){const r=A1(n,t);if(r.length)return r.unshift(e),r}return[]}class Xs{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function _p(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class kj extends Oj{snapshot;constructor(e,t){super(e),this.snapshot=t,S1(this,e)}toString(){return this.snapshot.toString()}}function xj(n){const e=function hoe(n){const o=new oI([],{},{},"",{},Dt,n,null,{});return new Fj("",new Xs(o,[]))}(n),t=new Nt([new cy("",{})]),r=new Nt({}),i=new Nt({}),o=new Nt({}),s=new Nt(""),a=new gy(t,r,o,s,i,Dt,n,e.root);return a.snapshot=e.root,new kj(new Xs(a,[]),e)}class gy{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe($e(u=>u[ay]))??ze(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe($e(e=>gp(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe($e(e=>gp(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function iI(n,e,t="emptyOnly"){let r;const{routeConfig:i}=n;return r=null===e||"always"!==t&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...i?.data,...n._resolvedData}},i&&Vj(i)&&(r.resolve[ay]=i.title),r}class oI{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[ay]}constructor(e,t,r,i,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=gp(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=gp(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Fj extends Oj{url;constructor(e,t){super(t),this.url=e,S1(this,t)}toString(){return Lj(this._root)}}function S1(n,e){e.value._routerState=n,e.children.forEach(t=>S1(n,t))}function Lj(n){const e=n.children.length>0?` { ${n.children.map(Lj).join(", ")} } `:"";return`${n.value}${e}`}function R1(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Aa(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Aa(e.params,t.params)||n.paramsSubject.next(t.params),function wie(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Aa(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Aa(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function N1(n,e){const t=Aa(n.params,e.params)&&function Sie(n,e){return Dd(n,e)&&n.every((t,r)=>Aa(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||N1(n.parent,e.parent))}function Vj(n){return"string"==typeof n.title||null===n.title}const foe=new pe("");let M1=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Dt;activateEvents=new Xe;deactivateEvents=new Xe;attachEvents=new Xe;detachEvents=new Xe;routerOutletData=sE(void 0);parentContexts=N(py);location=N(Ao);changeDetector=N(qo);inputBinder=N(sI,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new se(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new se(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new se(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new se(4013,!1);this._activatedRoute=t;const i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new poe(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=xe({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Cr]})}return n})();class poe{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===gy?this.route:e===py?this.childContexts:e===foe?this.outletData:this.parent.get(e,t)}}const sI=new pe("");let Bj=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=m1([r.queryParams,r.params,r.data]).pipe(ur(([o,s,a],c)=>(a={...o,...s,...a},0===c?ze(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const s=function Tte(n){const e=Tt(n);if(!e)return null;const t=new w_(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();function my(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function moe(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return my(n,r,i);return my(n,r)})}(n,e,t);return new Xs(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>my(n,a)),s}}const r=function _oe(n){return new gy(new Nt(n.url),new Nt(n.params),new Nt(n.queryParams),new Nt(n.fragment),new Nt(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>my(n,o));return new Xs(r,i)}}class P1{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}}const Uj="ngNavigationCancelingError";function aI(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Cd(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=jj(!1,Qo.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function jj(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[Uj]=!0,t.cancellationCode=e,t}function Hj(n){return!!n&&n[Uj]}class Eoe{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),R1(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=_p(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=_p(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=_p(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=_p(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new ooe(o.value.snapshot))}),e.children.length&&this.forwardEvent(new roe(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(R1(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),R1(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}}class $j{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class cI{component;route;constructor(e,t){this.component=e,this.route=t}}function boe(n,e,t){const r=n._root;return _y(r,e?e._root:null,t,[r.value])}function yp(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function Vg(n){return null!==Dh(n)}(n)?e.get(n):n:r}function _y(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=_p(e);return n.children.forEach(s=>{(function Toe(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function woe(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Dd(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Dd(n.url,e.url)||!Aa(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!N1(n,e)||!Aa(n.queryParams,e.queryParams);default:return!N1(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new $j(r)):(o.data=s.data,o._resolvedData=s._resolvedData),_y(n,e,o.component?a?a.children:null:t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new cI(a.outlet.component,s))}else s&&yy(e,a,i),i.canActivateChecks.push(new $j(r)),_y(n,null,o.component?a?a.children:null:t,r,i)})(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>yy(a,t.getContext(s),i)),i}function yy(n,e,t){const r=_p(n),i=n.value;Object.entries(r).forEach(([o,s])=>{yy(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new cI(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function vy(n){return"function"==typeof n}function Gj(n){return n instanceof ry||"EmptyError"===n?.name}const lI=Symbol("INITIAL_VALUE");function vp(){return ur(n=>m1(n.map(e=>e.pipe(Li(1),iy(lI)))).pipe($e(e=>{for(const t of e)if(!0!==t){if(t===lI)return lI;if(!1===t||Moe(t))return t}return!0}),yr(e=>e!==lI),Li(1)))}function Moe(n){return Cd(n)||n instanceof P1}function zj(n){return function ks(...n){return L(n)}(oi(e=>{if("boolean"!=typeof e)throw aI(0,e)}),$e(e=>!0===e))}class O1{segmentGroup;constructor(e){this.segmentGroup=e||null}}class k1 extends Error{urlTree;constructor(e){super(),this.urlTree=e}}function Ep(n){return Gb(new O1(n))}class Goe{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ze(r);if(i.numberOfChildren>1||!i.children[Dt])return Gb(new se(4e3,!1));i=i.children[Dt]}}applyRedirectCommands(e,t,r,i,o){if("string"!=typeof t){const a=t,{queryParams:c,fragment:u,routeConfig:h,url:m,outlet:_,params:v,data:I,title:D}=i,A=Eo(o,()=>a({params:v,data:I,queryParams:c,fragment:u,routeConfig:h,url:m,outlet:_,title:D}));if(A instanceof wd)throw new k1(A);t=A}const s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if("/"===t[0])throw new k1(s);return s}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new wd(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&":"===o[0]){const a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new bn(o,s)}createSegments(e,t,r,i){return t.map(o=>":"===o.path[0]?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new se(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const x1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zoe(n,e,t,r,i){const o=Wj(n,e,t);return o.matched?(r=function soe(n,e){return n.providers&&!n._injector&&(n._injector=WE(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function joe(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ze(i.map(s=>{const a=yp(s,n);return Ll(function Noe(n){return n&&vy(n.canMatch)}(a)?a.canMatch(e,t):Eo(n,()=>a(e,t)))})).pipe(vp(),zj()):ze(!0)}(r,e,t).pipe($e(s=>!0===s?o:{...x1}))):ze(o)}function Wj(n,e,t){if("**"===e.path)return function Woe(n){return{matched:!0,parameters:n.length>0?fj(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...x1}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Tie)(t,n,e);if(!i)return{...x1};const o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function qj(n,e,t,r){return t.length>0&&function Qoe(n,e,t){return t.some(r=>uI(n,e,r)&&Zs(r)!==Dt)}(n,t,r)?{segmentGroup:new bn(e,Koe(r,new bn(t,n.children))),slicedSegments:[]}:0===t.length&&function Yoe(n,e,t){return t.some(r=>uI(n,e,r))}(n,t,r)?{segmentGroup:new bn(n.segments,qoe(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new bn(n.segments,n.children),slicedSegments:t}}function qoe(n,e,t,r){const i={};for(const o of t)if(uI(n,e,o)&&!r[Zs(o)]){const s=new bn([],{});i[Zs(o)]=s}return{...r,...i}}function Koe(n,e){const t={};t[Dt]=e;for(const r of n)if(""===r.path&&Zs(r)!==Dt){const i=new bn([],{});t[Zs(r)]=i}return t}function uI(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Zoe{}class tse{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Goe(this.urlSerializer,this.urlTree)}noMatchError(e){return new se(4002,`'${e.segmentGroup}'`)}recognize(){const e=qj(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe($e(({children:t,rootSnapshot:r})=>{const i=new Xs(r,t),o=new Fj("",i),s=function $ie(n,e,t=null,r=null){return Dj(wj(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){const t=new oI([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),Dt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Dt,t).pipe($e(r=>({children:r,rootSnapshot:t})),pp(r=>{if(r instanceof k1)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof O1?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe($e(s=>s instanceof Xs?[s]:[]))}processChildren(e,t,r,i){const o=[];for(const s of Object.keys(r.children))"primary"===s?o.unshift(s):o.push(s);return Un(o).pipe(Td(s=>{const a=r.children[s],c=function uoe(n,e){const t=n.filter(r=>Zs(r)===e);return t.push(...n.filter(r=>Zs(r)!==e)),t}(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Wb((s,a)=>(s.push(...a),s)),zb(null),function _ie(n,e){const t=arguments.length>=2;return r=>r.pipe(n?yr((i,o)=>n(i,o,r)):Ki,y1(1),t?zb(e):lj(()=>new ry))}(),Qr(s=>{if(null===s)return Ep(r);const a=Kj(s);return function nse(n){n.sort((e,t)=>e.value.outlet===Dt?-1:t.value.outlet===Dt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),ze(a)}))}processSegment(e,t,r,i,o,s,a){return Un(t).pipe(Td(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(pp(u=>{if(u instanceof O1)return ze(null);throw u}))),xl(c=>!!c),pp(c=>{if(Gj(c))return function Joe(n,e,t){return 0===e.length&&!n.children[t]}(r,i,o)?ze(new Zoe):Ep(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return Zs(r)===s||s!==Dt&&uI(i,o,r)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Ep(i):Ep(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){const{matched:c,parameters:u,consumedSegments:h,positionalParamSegments:m,remainingSegments:_}=Wj(t,i,o);if(!c)return Ep(t);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const v=new oI(o,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Qj(i),Zs(i),i.component??i._loadedComponent??null,i,Yj(i)),I=iI(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(I.params),v.data=Object.freeze(I.data);const D=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,m,v,e);return this.applyRedirects.lineralizeSegments(i,D).pipe(Qr(A=>this.processSegment(e,r,t,A.concat(_),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){const a=zoe(t,r,i,e);return"**"===r.path&&(t.children={}),a.pipe(ur(c=>c.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(ur(({routes:u})=>{const h=r._loadedInjector??e,{parameters:m,consumedSegments:_,remainingSegments:v}=c,I=new oI(_,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Qj(r),Zs(r),r.component??r._loadedComponent??null,r,Yj(r)),D=iI(I,s,this.paramsInheritanceStrategy);I.params=Object.freeze(D.params),I.data=Object.freeze(D.data);const{segmentGroup:A,slicedSegments:O}=qj(t,_,v,u);if(0===O.length&&A.hasChildren())return this.processChildren(h,u,A,I).pipe($e(j=>new Xs(I,j)));if(0===u.length&&0===O.length)return ze(new Xs(I,[]));const P=Zs(r)===o;return this.processSegment(h,u,A,O,P?Dt:o,!0,I).pipe($e(j=>new Xs(I,j instanceof Xs?[j]:[])))})):Ep(t)))}getChildConfig(e,t,r){return t.children?ze({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ze({routes:t._loadedRoutes,injector:t._loadedInjector}):function Uoe(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ze(!0):ze(i.map(s=>{const a=yp(s,n);return Ll(function Coe(n){return n&&vy(n.canLoad)}(a)?a.canLoad(e,t):Eo(n,()=>a(e,t)))})).pipe(vp(),zj())}(e,t,r).pipe(Qr(i=>i?this.configLoader.loadChildren(e,t).pipe(oi(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function $oe(){return Gb(jj(!1,Qo.GuardRejected))}())):ze({routes:[],injector:e})}}function rse(n){const e=n.value.routeConfig;return e&&""===e.path}function Kj(n){const e=[],t=new Set;for(const r of n){if(!rse(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Kj(r.children);e.push(new Xs(r.value,i))}return e.filter(r=>!t.has(r))}function Qj(n){return n.data||{}}function Yj(n){return n.resolve||{}}function Jj(n){const e=n.children.map(t=>Jj(t)).flat();return[n,...e]}function F1(n){return ur(e=>{const t=n(e);return t?Un(t).pipe($e(()=>e)):ze(e)})}let Zj=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Dt);return r}getResolvedTitleForRoute(t){return t.data[ay]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:()=>N(lse),providedIn:"root"})}return n})(),lse=(()=>{class n extends Zj{title;constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(me(yie))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Ey=new pe("",{providedIn:"root",factory:()=>({})});let Xj=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vr({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){1&r&&lr(0,"router-outlet")},dependencies:[M1],encapsulation:2})}return n})();function L1(n){const e=n.children&&n.children.map(L1),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Dt&&(t.component=Xj),t}const dI=new pe("");let V1=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=N(ree);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ze(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ll(t.loadComponent()).pipe($e(eH),oi(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),oy(()=>{this.componentLoaders.delete(t)})),i=new cj(r,()=>new Se).pipe(_1());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ze({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function use(n,e,t,r){return Ll(n.loadChildren()).pipe($e(eH),Qr(i=>i instanceof PL||Array.isArray(i)?ze(i):Un(e.compileModuleAsync(i))),$e(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(t).injector,s=o.get(dI,[],{optional:!0,self:!0}).flat()),{routes:s.map(L1),injector:o}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(oy(()=>{this.childrenLoaders.delete(r)})),s=new cj(o,()=>new Se).pipe(_1());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function eH(n){return function dse(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let B1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:()=>N(hse),providedIn:"root"})}return n})(),hse=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const tH=new pe(""),nH=new pe("");function fse(n,e,t){const r=n.get(nH),i=n.get(_r);return n.get(g).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o;const s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),function pse(n){return new Promise(e=>{Il({read:()=>setTimeout(e)},{injector:n})})}(n))),{onViewTransitionCreated:c}=r;return c&&Eo(n,()=>c({transition:a,from:e,to:t})),s})}const rH=new pe("");let U1=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Se;transitionAbortSubject=new Se;configLoader=N(V1);environmentInjector=N(cr);destroyRef=N(to);urlSerializer=N(ly);rootContexts=N(py);location=N(q_);inputBindingEnabled=null!==N(sI,{optional:!0});titleStrategy=N(Zj);options=N(Ey,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=N(B1);createViewTransition=N(tH,{optional:!0});navigationErrorHandler=N(rH,{optional:!0});navigationId=0;get hasRequestedNavigation(){return 0!==this.navigationId}transitions;afterPreactivation=()=>ze(void 0);rootComponentType=null;destroyed=!1;constructor(){this.configLoader.onLoadEndListener=i=>this.events.next(new toe(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new eoe(i)),this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...t,extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r})}setupNavigations(t){return this.transitions=new Nt(null),this.transitions.pipe(yr(r=>null!==r),ur(r=>{let i=!1,o=!1;return ze(r).pipe(ur(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Qo.SupersededByNewNavigation),No;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:"string"==typeof s.extras.browserUrl?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!a&&"reload"!==(s.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const u="";return this.events.next(new mp(s.id,this.urlSerializer.serialize(s.rawUrl),u,nI.IgnoredSameUrlNavigation)),s.resolve(!1),No}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return ze(s).pipe(ur(u=>(this.events.next(new tI(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?No:Promise.resolve(u))),function ise(n,e,t,r,i,o){return Qr(s=>function Xoe(n,e,t,r,i,o,s="emptyOnly"){return new tse(n,e,t,r,i,s,o).recognize()}(n,e,t,r,s.extractedUrl,i,o).pipe($e(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),oi(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects};const h=new Mj(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){const{id:u,extractedUrl:h,source:m,restoredState:_,extras:v}=s,I=new tI(u,this.urlSerializer.serialize(h),m,_);this.events.next(I);const D=xj(this.rootComponentType).snapshot;return this.currentTransition=r={...s,targetSnapshot:D,urlAfterRedirects:h,extras:{...v,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=h,ze(r)}{const u="";return this.events.next(new mp(s.id,this.urlSerializer.serialize(s.extractedUrl),u,nI.IgnoredByUrlHandlingStrategy)),s.resolve(!1),No}}),oi(s=>{const a=new Yie(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),$e(s=>(this.currentTransition=r={...s,guards:boe(s.targetSnapshot,s.currentSnapshot,this.rootContexts)},r)),function Poe(n,e){return Qr(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?ze({...t,guardsResult:!0}):function Ooe(n,e,t,r){return Un(n).pipe(Qr(i=>function Boe(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?ze(o.map(a=>{const c=fy(e)??i,u=yp(a,c);return Ll(function Roe(n){return n&&vy(n.canDeactivate)}(u)?u.canDeactivate(n,e,t,r):Eo(c,()=>u(n,e,t,r))).pipe(xl())})).pipe(vp()):ze(!0)}(i.component,i.route,t,e,r)),xl(i=>!0!==i,!0))}(s,r,i,n).pipe(Qr(a=>a&&function Doe(n){return"boolean"==typeof n}(a)?function koe(n,e,t,r){return Un(e).pipe(Td(i=>Id(function Foe(n,e){return null!==n&&e&&e(new noe(n)),ze(!0)}(i.route.parent,r),function xoe(n,e){return null!==n&&e&&e(new ioe(n)),ze(!0)}(i.route,r),function Voe(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function Ioe(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>$b(()=>ze(s.guards.map(c=>{const u=fy(s.node)??t,h=yp(c,u);return Ll(function Soe(n){return n&&vy(n.canActivateChild)}(h)?h.canActivateChild(r,n):Eo(u,()=>h(r,n))).pipe(xl())})).pipe(vp())));return ze(o).pipe(vp())}(n,i.path,t),function Loe(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ze(!0);const i=r.map(o=>$b(()=>{const s=fy(e)??t,a=yp(o,s);return Ll(function Aoe(n){return n&&vy(n.canActivate)}(a)?a.canActivate(e,n):Eo(s,()=>a(e,n))).pipe(xl())}));return ze(i).pipe(vp())}(n,i.route,t))),xl(i=>!0!==i,!0))}(r,o,n,e):ze(a)),$e(a=>({...t,guardsResult:a})))})}(this.environmentInjector,s=>this.events.next(s)),oi(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&"boolean"!=typeof s.guardsResult)throw aI(0,s.guardsResult);const a=new Jie(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),yr(s=>!!s.guardsResult||(this.cancelNavigationTransition(s,"",Qo.GuardRejected),!1)),F1(s=>{if(0!==s.guards.canActivateChecks.length)return ze(s).pipe(oi(a=>{const c=new Zie(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),ur(a=>{let c=!1;return ze(a).pipe(function ose(n,e){return Qr(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ze(t);const o=new Set(i.map(c=>c.route)),s=new Set;for(const c of o)if(!s.has(c))for(const u of Jj(c))s.add(u);let a=0;return Un(s).pipe(Td(c=>o.has(c)?function sse(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!Vj(i)&&(o[ay]=i.title),function ase(n,e,t,r){const i=v1(n);if(0===i.length)return ze({});const o={};return Un(i).pipe(Qr(s=>function cse(n,e,t,r){const i=fy(e)??r,o=yp(n,i);return Ll(o.resolve?o.resolve(e,t):Eo(i,()=>o(e,t)))}(n[s],e,t,r).pipe(xl(),oi(a=>{if(a instanceof P1)throw aI(new Kb,a);o[s]=a}))),y1(1),$e(()=>o),pp(s=>Gj(s)?No:Gb(s)))}(o,n,e,r).pipe($e(s=>(n._resolvedData=s,n.data=iI(n,n.parent,t).resolve,null)))}(c,r,n,e):(c.data=iI(c,c.parent,n).resolve,ze(void 0))),oi(()=>a++),y1(1),Qr(c=>a===s.size?ze(t):No))})}(this.paramsInheritanceStrategy,this.environmentInjector),oi({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Qo.NoDataFromResolver)}}))}),oi(a=>{const c=new Xie(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),F1(s=>{const a=c=>{const u=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(c.routeConfig).pipe(oi(h=>{c.component=h}),$e(()=>{})));for(const h of c.children)u.push(...a(h));return u};return m1(a(s.targetSnapshot.root)).pipe(zb(null),Li(1))}),F1(()=>this.afterPreactivation()),ur(()=>{const{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?Un(c).pipe($e(()=>r)):ze(r)}),$e(s=>{const a=function goe(n,e,t){const r=my(n,e._root,t?t._root:void 0);return new kj(r,e)}(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r={...s,targetRouterState:a},this.currentNavigation.targetRouterState=a,r}),oi(()=>{this.events.next(new D1)}),((n,e,t,r)=>$e(i=>(new Eoe(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Li(1),oi({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Oc(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),mi(this.transitionAbortSubject.pipe(oi(s=>{throw s}))),oy(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",Qo.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),pp(s=>{if(this.destroyed)return r.resolve(!1),No;if(o=!0,Hj(s))this.events.next(new Ad(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),function yoe(n){return Hj(n)&&Cd(n.url)}(s)?this.events.next(new rI(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{const a=new w1(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{const c=Eo(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(!(c instanceof P1))throw this.events.next(a),s;{const{message:u,cancellationCode:h}=aI(0,c);this.events.next(new Ad(r.id,this.urlSerializer.serialize(r.extractedUrl),u,h)),this.events.next(new rI(c.redirectTo,c.navigationBehaviorOptions))}}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return No}))}))}cancelNavigationTransition(t,r,i){const o=new Ad(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gse(n){return n!==eI}let mse=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:()=>N(yse),providedIn:"root"})}return n})();class _se{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let yse=(()=>{class n extends _se{static \u0275fac=(()=>{let t;return function(i){return(t||(t=hn(n)))(i||n)}})();static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),iH=(()=>{class n{urlSerializer=N(ly);options=N(Ey,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=N(q_);urlHandlingStrategy=N(B1);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new wd;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){const o=void 0!==t?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof wd?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=xj(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:()=>N(vse),providedIn:"root"})}return n})(),vse=(()=>{class n extends iH{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof tI?this.updateStateMemento():t instanceof mp?this.commitTransition(r):t instanceof Mj?"eager"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof D1?(this.commitTransition(r),"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Ad&&(t.code===Qo.GuardRejected||t.code===Qo.NoDataFromResolver)?this.restoreHistory(r):t instanceof w1?this.restoreHistory(r,!0):t instanceof Oc&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){const{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){const a=this.browserPageId,c={...s,...this.generateNgRouterState(i,a)};this.location.replaceState(t,"",c)}else{const a={...s,...this.generateNgRouterState(i,this.browserPageId+1)};this.location.go(t,"",a)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&0===o&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=hn(n)))(i||n)}})();static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oH(n,e){n.events.pipe(yr(t=>t instanceof Oc||t instanceof Ad||t instanceof w1||t instanceof mp),$e(t=>t instanceof Oc||t instanceof mp?0:t instanceof Ad&&(t.code===Qo.Redirect||t.code===Qo.SupersededByNewNavigation)?2:1),yr(t=>2!==t),Li(1)).subscribe(()=>{e()})}const Ese={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},bse={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let kc=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=N(zA);stateManager=N(iH);options=N(Ey,{optional:!0})||{};pendingTasks=N(ys);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=N(U1);urlSerializer=N(ly);location=N(q_);urlHandlingStrategy=N(B1);_events=new Se;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=N(mse);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=N(dI,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!N(sI,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Xn;subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(null!==i&&null!==o)if(this.stateManager.handleRouterEvent(r,o),r instanceof Ad&&r.code!==Qo.Redirect&&r.code!==Qo.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Oc)this.navigated=!0;else if(r instanceof rI){const s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c={browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||gse(i.source),...s};this.scheduleNavigation(a,eI,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function Tse(n){return!(n instanceof D1||n instanceof rI)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),eI,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(o.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(L1),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s;let m,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h={...this.currentUrlTree.queryParams,...o};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}null!==h&&(h=this.removeEmptyProps(h));try{m=wj(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||"/"!==t[0][0])&&(t=[]),m=this.currentUrlTree.root}return Dj(m,t,h,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Cd(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,eI,null,r)}navigate(t,r={skipLocationChange:!1}){return function Ise(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new se(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(i=!0===r?{...Ese}:!1===r?{...bse}:r,Cd(t))return gj(this.currentUrlTree,t,i);const o=this.parseUrl(t);return gj(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(null!=o&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((m,_)=>{a=m,c=_});const h=this.pendingTasks.add();return oH(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(m=>Promise.reject(m))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class sH{}let Cse=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(yr(t=>t instanceof Oc),Td(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=WE(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Un(i).pipe(fp())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ze(null);const o=i.pipe(Qr(s=>null===s?ze(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?Un([o,this.loader.loadComponent(r)]).pipe(fp()):o})}static \u0275fac=function(r){return new(r||n)(me(kc),me(cr),me(sH),me(V1))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const H1=new pe("");let aH=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof tI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Oc?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof mp&&t.code===nI.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Pj&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Pj(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){!function tL(){throw new Error("invalid")}()};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();function Ra(n,e){return{\u0275kind:n,\u0275providers:e}}function lH(){const n=N(zt);return e=>{const t=n.get(so);if(e!==t.components[0])return;const r=n.get(kc),i=n.get(uH);1===n.get($1)&&r.initialNavigation(),n.get(dH,null,It.Optional)?.setUpPreloading(),n.get(H1,null,It.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const uH=new pe("",{factory:()=>new Se}),$1=new pe("",{providedIn:"root",factory:()=>1}),dH=new pe("");function Nse(n){return Ra(0,[{provide:dH,useExisting:Cse},{provide:sH,useExisting:n}])}function Pse(n){return Do("NgRouterViewTransitions"),Ra(9,[{provide:tH,useValue:fse},{provide:nH,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const Ose=[q_,{provide:ly,useClass:Kb},kc,py,{provide:gy,useFactory:function cH(n){return n.routerState.root},deps:[kc]},V1,[]];let hI=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[Ose,[],{provide:dI,multi:!0,useValue:t},[],r?.errorHandler?{provide:rH,useValue:r.errorHandler}:[],{provide:Ey,useValue:r||{}},r?.useHash?{provide:bd,useClass:Pte}:{provide:bd,useClass:nU},{provide:H1,useFactory:()=>{const n=N(pre),e=N(g),t=N(Ey),r=N(U1),i=N(ly);return t.scrollOffset&&n.setOffset(t.scrollOffset),new aH(i,r,n,e,t)}},r?.preloadingStrategy?Nse(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Lse(r):[],r?.bindToComponentInputs?Ra(8,[Bj,{provide:sI,useExisting:Bj}]).\u0275providers:[],r?.enableViewTransitions?Pse().\u0275providers:[],[{provide:hH,useFactory:lH},{provide:N_,multi:!0,useExisting:hH}]]}}static forChild(t){return{ngModule:n,providers:[{provide:dI,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Qt({type:n});static \u0275inj=Rt({})}return n})();function Lse(n){return["disabled"===n.initialNavigation?Ra(3,[oV(()=>{N(kc).setUpLocationChangeListener()}),{provide:$1,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ra(2,[{provide:$1,useValue:0},oV(()=>{const e=N(zt);return e.get(Cte,Promise.resolve()).then(()=>new Promise(r=>{const i=e.get(kc),o=e.get(uH);oH(i,()=>{r(!0)}),e.get(U1).afterPreactivation=()=>(r(!0),o.closed?ze(void 0):o),i.initialNavigation()}))})]).\u0275providers:[]]}const hH=new pe("");let fH=(()=>{class n{loading=!1;loadingChange=new Xe(!1);progress={value:0,status:"is-error"};ngOnChanges(t){this.loading&&this.startLoading()}startLoading(){var t=this;return(0,T.A)(function*(){yield new Promise(i=>setTimeout(i,1e3));const r=[...Array.from({length:Math.ceil(10)},(i,o)=>1+2*o),...Array.from({length:Math.ceil(10)},(i,o)=>21+3*o),...Array.from({length:Math.ceil(10)},(i,o)=>51+5*o),100];for(let i of r)t.progress.value=i,i>51&&i<75&&(t.progress.status="is-warning"),i>75&&(t.progress.status="is-primary"),100==i&&(t.progress.status="is-success"),yield new Promise(o=>setTimeout(o,10*i));t.loading=!1,t.loadingChange.emit(t.loading)})()}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vr({type:n,selectors:[["app-loader"]],inputs:{loading:"loading"},outputs:{loadingChange:"loadingChange"},standalone:!1,features:[Cr],decls:3,vars:4,consts:[[1,"nes-text","mt-3"],["max","100",3,"value"]],template:function(r,i){1&r&&(Le(0,"p",0),on(1," Loading...\n"),Ve(),lr(2,"progress",1)),2&r&&(Re(2),aS("nes-progress ",i.progress.status,""),_t("value",i.progress.value))},encapsulation:2})}return n})();function pH(...n){const e=Hb(n),{args:t,keys:r}=oj(n),i=new R(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let c=s,u=s;for(let h=0;h<s;h++){let m=!1;Kr(t[h]).subscribe(Je(o,_=>{m||(m=!0,u--),a[h]=_},()=>c--,void 0,()=>{(!c||!m)&&(u||o.next(r?sj(r,a):a),o.complete())}))}});return e?i.pipe(g1(e)):i}const G1={now:()=>(G1.delegate||Date).now(),delegate:void 0};class Bse extends Se{constructor(e=1/0,t=1/0,r=G1){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const s=t.now();let a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}}function z1(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new us({next:()=>{r.unsubscribe(),n()}});return Kr(e(...t)).subscribe(r)}function fI(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,function Use(n={}){const{connector:e=()=>new Se,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,u=0,h=!1,m=!1;const _=()=>{a?.unsubscribe(),a=void 0},v=()=>{_(),s=c=void 0,h=m=!1},I=()=>{const D=s;v(),D?.unsubscribe()};return Ft((D,A)=>{u++,!m&&!h&&_();const O=c=c??e();A.add(()=>{u--,0===u&&!m&&!h&&(a=z1(I,i))}),O.subscribe(A),!s&&u>0&&(s=new us({next:P=>O.next(P),error:P=>{m=!0,_(),a=z1(v,t,P),O.error(P)},complete:()=>{h=!0,_(),a=z1(v,r),O.complete()}}),Kr(D).subscribe(s))})(o)}}({connector:()=>new Bse(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}class bp{}let W1=(()=>{class n extends bp{getTranslation(t){return ze({})}static \u0275fac=(()=>{let t;return function(i){return(t||(t=hn(n)))(i||n)}})();static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();class pI{}let q1=(()=>{class n{handle(t){return t.key}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();function gI(n,e){if(n===e)return!0;if(null===n||null===e)return!1;if(n!=n&&e!=e)return!0;const t=typeof n;let i,o,s;if(t==typeof e&&"object"==t){if(!Array.isArray(n)){if(Array.isArray(e))return!1;for(o in s=Object.create(null),n){if(!gI(n[o],e[o]))return!1;s[o]=!0}for(o in e)if(!(o in s)&&typeof e[o]<"u")return!1;return!0}if(!Array.isArray(e))return!1;if((i=n.length)==e.length){for(o=0;o<i;o++)if(!gI(n[o],e[o]))return!1;return!0}}return!1}function Vl(n){return typeof n<"u"&&null!==n}function by(n){return mI(n)&&!K1(n)&&null!==n}function mI(n){return"object"==typeof n}function K1(n){return Array.isArray(n)}function Q1(n){return"string"==typeof n}function Y1(n,e){const t=Object.assign({},n);return mI(n)?(mI(n)&&mI(e)&&Object.keys(e).forEach(r=>{by(e[r])?r in n?t[r]=Y1(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t):Y1({},e)}function J1(n,e){const t=e.split(".");e="";do{e+=t.shift(),Vl(n)&&Vl(n[e])&&(by(n[e])||K1(n[e])||!t.length)?(n=n[e],e=""):t.length?e+=".":n=void 0}while(t.length);return n}class Iy{}let Z1=(()=>{class n extends Iy{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(t,r){return Q1(t)?this.interpolateString(t,r):function jse(n){return"function"==typeof n}(t)?this.interpolateFunction(t,r):void 0}interpolateFunction(t,r){return t(r)}interpolateString(t,r){return r?t.replace(this.templateMatcher,(i,o)=>{const s=J1(r,o);return Vl(s)?s:i}):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=hn(n)))(i||n)}})();static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();class Ty{}let X1=(()=>{class n extends Ty{compile(t,r){return t}compileTranslations(t,r){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=hn(n)))(i||n)}})();static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();class _I{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new Xe;onLangChange=new Xe;onDefaultLangChange=new Xe}const yI=new pe("ISOLATE_TRANSLATE_SERVICE"),vI=new pe("USE_DEFAULT_LANG"),EI=new pe("DEFAULT_LANGUAGE"),bI=new pe("USE_EXTEND"),wy=n=>up(n)?n:ze(n);let Ip=(()=>{class n{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;extend;loadingTranslations;pending=!1;_translationRequests={};lastUseLanguage=null;get onTranslationChange(){return this.store.onTranslationChange}get onLangChange(){return this.store.onLangChange}get onDefaultLangChange(){return this.store.onDefaultLangChange}get defaultLang(){return this.store.defaultLang}set defaultLang(t){this.store.defaultLang=t}get currentLang(){return this.store.currentLang}set currentLang(t){this.store.currentLang=t}get langs(){return this.store.langs}set langs(t){this.store.langs=t}get translations(){return this.store.translations}set translations(t){this.store.translations=t}constructor(t,r,i,o,s,a=!0,c=!1,u=!1,h){this.store=t,this.currentLoader=r,this.compiler=i,this.parser=o,this.missingTranslationHandler=s,this.useDefaultLang=a,this.extend=u,c&&(this.store=new _I),h&&this.setDefaultLang(h)}setDefaultLang(t){if(t===this.defaultLang)return;const r=this.retrieveTranslations(t);typeof r<"u"?(null==this.defaultLang&&(this.defaultLang=t),r.pipe(Li(1)).subscribe(()=>{this.changeDefaultLang(t)})):this.changeDefaultLang(t)}getDefaultLang(){return this.defaultLang}use(t){if(this.lastUseLanguage=t,t===this.currentLang)return ze(this.translations[t]);this.currentLang||(this.currentLang=t);const r=this.retrieveTranslations(t);return up(r)?(r.pipe(Li(1)).subscribe(()=>{this.changeLang(t)}),r):(this.changeLang(t),ze(this.translations[t]))}changeLang(t){t===this.lastUseLanguage&&(this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]}),null==this.defaultLang&&this.changeDefaultLang(t))}retrieveTranslations(t){if(typeof this.translations[t]>"u"||this.extend)return this._translationRequests[t]=this._translationRequests[t]||this.loadAndCompileTranslations(t),this._translationRequests[t]}getTranslation(t){return this.loadAndCompileTranslations(t)}loadAndCompileTranslations(t){this.pending=!0;const r=this.currentLoader.getTranslation(t).pipe(fI(1),Li(1));return this.loadingTranslations=r.pipe($e(i=>this.compiler.compileTranslations(i,t)),fI(1),Li(1)),this.loadingTranslations.subscribe({next:i=>{this.translations[t]=this.extend&&this.translations[t]?{...i,...this.translations[t]}:i,this.updateLangs(),this.pending=!1},error:i=>{this.pending=!1}}),r}setTranslation(t,r,i=!1){const o=this.compiler.compileTranslations(r,t);this.translations[t]=(i||this.extend)&&this.translations[t]?Y1(this.translations[t],o):o,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})}getLangs(){return this.langs}addLangs(t){const r=t.filter(i=>!this.langs.includes(i));r.length>0&&(this.langs=[...this.langs,...r])}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResultForKey(t,r,i){let o;if(t&&(o=this.runInterpolation(J1(t,r),i)),void 0===o&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(o=this.runInterpolation(J1(this.translations[this.defaultLang],r),i)),void 0===o){const s={key:r,translateService:this};typeof i<"u"&&(s.interpolateParams=i),o=this.missingTranslationHandler.handle(s)}return void 0!==o?o:r}runInterpolation(t,r){if(K1(t))return t.map(i=>this.runInterpolation(i,r));if(by(t)){const i={};for(const o in t){const s=this.runInterpolation(t[o],r);void 0!==s&&(i[o]=s)}return i}return this.parser.interpolate(t,r)}getParsedResult(t,r,i){if(r instanceof Array){const o={};let s=!1;for(const c of r)o[c]=this.getParsedResultForKey(t,c,i),s=s||up(o[c]);return s?pH(r.map(c=>wy(o[c]))).pipe($e(c=>{const u={};return c.forEach((h,m)=>{u[r[m]]=h}),u})):o}return this.getParsedResultForKey(t,r,i)}get(t,r){if(!Vl(t)||!t.length)throw new Error('Parameter "key" is required and cannot be empty');return this.pending?this.loadingTranslations.pipe(Td(i=>wy(this.getParsedResult(i,t,r)))):wy(this.getParsedResult(this.translations[this.currentLang],t,r))}getStreamOnTranslationChange(t,r){if(!Vl(t)||!t.length)throw new Error('Parameter "key" is required and cannot be empty');return Id($b(()=>this.get(t,r)),this.onTranslationChange.pipe(ur(i=>{const o=this.getParsedResult(i.translations,t,r);return wy(o)})))}stream(t,r){if(!Vl(t)||!t.length)throw new Error('Parameter "key" required');return Id($b(()=>this.get(t,r)),this.onLangChange.pipe(ur(i=>{const o=this.getParsedResult(i.translations,t,r);return wy(o)})))}instant(t,r){if(!Vl(t)||0===t.length)throw new Error('Parameter "key" is required and cannot be empty');const i=this.getParsedResult(this.translations[this.currentLang],t,r);return up(i)?Array.isArray(t)?t.reduce((o,s)=>(o[s]=s,o),{}):t:i}set(t,r,i=this.currentLang){(function Hse(n,e,t){const r=e.split(".");let i=n;for(let o=0;o<r.length;o++){const s=r[o];o===r.length-1?i[s]=t:((!i[s]||!by(i[s]))&&(i[s]={}),i=i[s])}})(this.translations[i],t,Q1(r)?this.compiler.compile(r,i):this.compiler.compileTranslations(r,i)),this.updateLangs(),this.onTranslationChange.emit({lang:i,translations:this.translations[i]})}changeDefaultLang(t){this.defaultLang=t,this.onDefaultLangChange.emit({lang:t,translations:this.translations[t]})}reloadLang(t){return this.resetLang(t),this.loadAndCompileTranslations(t)}resetLang(t){delete this._translationRequests[t],delete this.translations[t]}getBrowserLang(){if(typeof window>"u"||!window.navigator)return;const t=this.getBrowserCultureLang();return t?t.split(/[-_]/)[0]:void 0}getBrowserCultureLang(){if(!(typeof window>"u"||typeof window.navigator>"u"))return window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}static \u0275fac=function(r){return new(r||n)(me(_I),me(bp),me(Ty),me(Iy),me(pI),me(vI),me(yI),me(bI),me(EI))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),II=(()=>{class n{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(t,r){this.translate=t,this._ref=r}updateValue(t,r,i){const o=s=>{this.value=void 0!==s?s:t,this.lastKey=t,this._ref.markForCheck()};if(i){const s=this.translate.getParsedResult(i,t,r);up(s)?s.subscribe(o):o(s)}this.translate.get(t,r).subscribe(o)}transform(t,...r){if(!t||!t.length)return t;if(gI(t,this.lastKey)&&gI(r,this.lastParams))return this.value;let i;if(Vl(r[0])&&r.length)if(Q1(r[0])&&r[0].length){const o=r[0].replace(/(')?([a-zA-Z0-9_]+)(')?(\s)?:/g,'"$2":').replace(/:(\s)?(')(.*?)(')/g,':"$3"');try{i=JSON.parse(o)}catch(s){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${r[0]}`)}}else by(r[0])&&(i=r[0]);return this.lastKey=t,this.lastParams=r,this.updateValue(t,i),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(o=>{this.lastKey&&o.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(t,i,o.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(o=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,i,o.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,i))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(r){return new(r||n)(Ie(Ip,16),Ie(qo,16))};static \u0275pipe=oo({name:"translate",type:n,pure:!1});static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),TI=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[t.loader||{provide:bp,useClass:W1},t.compiler||{provide:Ty,useClass:X1},t.parser||{provide:Iy,useClass:Z1},t.missingTranslationHandler||{provide:pI,useClass:q1},_I,{provide:yI,useValue:t.isolate},{provide:vI,useValue:t.useDefaultLang},{provide:bI,useValue:t.extend},{provide:EI,useValue:t.defaultLanguage},Ip]}}static forChild(t={}){return{ngModule:n,providers:[t.loader||{provide:bp,useClass:W1},t.compiler||{provide:Ty,useClass:X1},t.parser||{provide:Iy,useClass:Z1},t.missingTranslationHandler||{provide:pI,useClass:q1},{provide:yI,useValue:t.isolate},{provide:vI,useValue:t.useDefaultLang},{provide:bI,useValue:t.extend},{provide:EI,useValue:t.defaultLanguage},Ip]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Qt({type:n});static \u0275inj=Rt({})}return n})();function $se(n,e){if(1&n&&(Tc(0),Le(1,"td"),on(2),Ve(),wc()),2&n){const t=e.$implicit,r=Ke().$implicit,i=Ke(2);Re(),Nl(t),Re(),Fi(i.parseCell(t,r))}}function Gse(n,e){if(1&n&&(Le(0,"tr"),St(1,$se,3,4,"ng-container",14),Ve()),2&n){const t=Ke(2);Re(),_t("ngForOf",t.getCells("loyitePoints"))}}function zse(n,e){if(1&n&&(Tc(0),Le(1,"td"),on(2),Ve(),wc()),2&n){const t=e.$implicit,r=Ke().$implicit,i=Ke(2);Re(),Nl(t),Re(),Fi(i.parseCell(t,r))}}function Wse(n,e){if(1&n&&(Le(0,"tr"),St(1,zse,3,4,"ng-container",14),Ve()),2&n){const t=Ke(2);Re(),_t("ngForOf",t.getCells("badges"))}}function qse(n,e){if(1&n&&(Tc(0),Le(1,"div",8)(2,"p",9),on(3,"Points"),Ve(),Le(4,"table",10)(5,"thead")(6,"tr")(7,"th",11),on(8,"Rank"),Ve(),Le(9,"th",12),on(10,"User"),Ve(),Le(11,"th",13),on(12,'"SCORE"'),Ve()()(),Le(13,"tbody"),St(14,Gse,2,1,"tr",14),Ve()()(),Le(15,"div",15)(16,"p",16),on(17,"Badge Collectors"),Ve(),Le(18,"table",10)(19,"thead")(20,"tr")(21,"th",11),on(22,"Rank"),Ve(),Le(23,"th",12),on(24,"User"),Ve(),Le(25,"th",17),on(26,"Badges"),Ve()()(),Le(27,"tbody"),St(28,Wse,2,1,"tr",14),Ve()()(),wc()),2&n){const t=Ke();Re(14),_t("ngForOf",t.leaderboards.loyitePoints),Re(14),_t("ngForOf",t.leaderboards.gameBadges)}}function Kse(n,e){if(1&n){const t=So();Le(0,"div",18)(1,"app-loader",19),fb("loadingChange",function(i){ni(t);const o=Ke();return yS(o.loading,i)||(o.loading=i),Fr(i)}),Ve()()}if(2&n){const t=Ke();Re(),hb("loading",t.loading)}}let Qse=(()=>{class n{loading=!1;leaderboards={loyitePoints:[{rank:1,name:"ArthurKnight",points:1520},{rank:2,name:"LadyElira",points:1485},{rank:3,name:"ShadowHex",points:1450},{rank:4,name:"BlazeWolf",points:1400},{rank:5,name:"Nexarion",points:1370},{rank:6,name:"FrostNova",points:1340},{rank:7,name:"MiraFlare",points:1325},{rank:8,name:"GrimVox",points:1300},{rank:9,name:"ZenithOne",points:1285},{rank:10,name:"EchoMist",points:1270},{rank:11,name:"Valcrys",points:1240},{rank:12,name:"LunaSpark",points:1215},{rank:13,name:"IronCrow",points:1200},{rank:14,name:"SableFox",points:1180},{rank:15,name:"CrystalWave",points:1165},{rank:16,name:"PyroJin",points:1150},{rank:17,name:"RavenLock",points:1135},{rank:18,name:"StormHowl",points:1120},{rank:19,name:"DuskSpire",points:1105},{rank:20,name:"SolarMagi",points:1090},{rank:21,name:"QuorraRay",points:1075},{rank:22,name:"ThornBane",points:1060},{rank:23,name:"EmberFall",points:1040},{rank:24,name:"NightShard",points:1020},{rank:25,name:"ZephyrRune",points:1e3}],gameBadges:[{rank:1,name:"ArthurKnight",badges:12},{rank:2,name:"LadyElira",badges:11},{rank:2,name:"ShadowHex",badges:11},{rank:4,name:"BlazeWolf",badges:10},{rank:4,name:"Nexarion",badges:10},{rank:4,name:"FrostNova",badges:10},{rank:7,name:"MiraFlare",badges:9},{rank:7,name:"GrimVox",badges:9},{rank:9,name:"ZenithOne",badges:8},{rank:9,name:"EchoMist",badges:8},{rank:9,name:"Valcrys",badges:8},{rank:12,name:"LunaSpark",badges:7},{rank:12,name:"IronCrow",badges:7},{rank:12,name:"SableFox",badges:7},{rank:15,name:"CrystalWave",badges:6},{rank:15,name:"PyroJin",badges:6},{rank:17,name:"RavenLock",badges:5},{rank:17,name:"StormHowl",badges:5},{rank:17,name:"DuskSpire",badges:5},{rank:20,name:"SolarMagi",badges:4},{rank:20,name:"QuorraRay",badges:4},{rank:22,name:"ThornBane",badges:3},{rank:22,name:"EmberFall",badges:3},{rank:24,name:"NightShard",badges:2},{rank:24,name:"ZephyrRune",badges:2}]};tableCells=["rank","name","points","badges"];constructor(){}ngOnDestroy(){this.loading=!1}ngOnInit(){this.loading=!0}parseCell(t,r){return"rank"===t||"badges"==t?r[t].toString().padStart(4,"0"):r[t]}getCells(t){return"loyitePoints"===t?this.tableCells.filter(r=>"badges"!==r):"badges"===t?this.tableCells.filter(r=>"points"!==r):[]}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vr({type:n,selectors:[["app-leaderboard-view"]],standalone:!1,decls:12,vars:5,consts:[["loadingContent",""],[1,"container-fluid"],[1,"row"],[1,"col-12","mb-5"],[1,"d-flex"],[1,"nes-bcrikko","mt-2","me-2"],[1,"nes-balloon","from-left"],[4,"ngIf","ngIfElse"],[1,"col","nes-container","is-rounded","with-title","me-5"],[1,"title","nes-text"],[1,"border-0","leaderboards","points-table","w-50"],[1,"rank"],[1,"name"],[1,"points"],[4,"ngFor","ngForOf"],[1,"col","nes-container","is-rounded","with-title"],[1,"title"],[1,"badges"],[1,"col-12"],[3,"loadingChange","loading"]],template:function(r,i){if(1&r&&(Le(0,"div",1)(1,"div",2)(2,"div",3)(3,"section",4),lr(4,"i",5),Le(5,"div",6)(6,"p"),on(7),Cc(8,"translate"),Ve()()()(),St(9,qse,29,2,"ng-container",7)(10,Kse,2,1,"ng-template",null,0,bs),Ve()()),2&r){const o=Qs(11);Re(7),Fi(Ac(8,3,"MESSAGE_LEADERBOARDS")),Re(2),_t("ngIf",!i.loading)("ngIfElse",o)}},dependencies:[cp,lp,fH,II],styles:[".leaderboards[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{padding:0 20px}.leaderboards[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]{padding-left:25px}"]})}return n})();class Yse{type="";displayName="";profilePic="";badges=[];constructor(e,t){if(!e||!t)throw"missing parameter @ UserBadgeCard::new";const{type:r,display_name:i,profile_image_url:o}=e,{badges:s,username:a}=t;this.type=r,this.displayName=i||a,this.badges=s,this.profilePic=o}get totalBadges(){return this.badges.length}}const gH=new pe("COLLECTION");var ws=pt(852);(0,ws.registerVersion)("firebase","11.7.1","app");class Xse extends Xn{constructor(e,t){super()}schedule(e,t=0){return this}}const wI={setInterval(n,e,...t){const{delegate:r}=wI;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=wI;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class mH extends Xse{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return wI.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&wI.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Lo(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}class Dy{constructor(e,t=Dy.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Dy.now=G1.now;class _H extends Dy{constructor(e,t=Dy.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const nae=new class tae extends _H{}(class eae extends mH{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),DI=new _H(mH),rae=DI,eR=new $_("ANGULARFIRE2_VERSION");class yH{zone;delegate;constructor(e,t=nae){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])},t,r)}}let nR=(()=>{class n{outsideAngular;insideAngular;constructor(){const t=N(g);this.outsideAngular=t.runOutsideAngular(()=>new yH(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new yH(typeof Zone>"u"?void 0:Zone.current,DI))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var AI=pt(362),Ct=pt(858),ea=pt(41);const iR=new Map,EH={activated:!1,tokenObservers:[]},pae={initialized:!1,enabled:!1};function vr(n){return iR.get(n)||Object.assign({},EH)}function SI(){return pae}class Eae{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,T.A)(function*(){t.stop();try{t.pending=new Ct.cY,t.pending.promise.catch(r=>{}),yield function bae(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ct.cY,t.pending.promise.catch(r=>{}),yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const _i=new Ct.FA("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"});function sR(n){if(!vr(n).activated)throw _i.create("use-before-activation",{appName:n.name})}function MI(n,e){return cR.apply(this,arguments)}function cR(){return(cR=(0,T.A)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const m=yield i.getHeartbeatsHeader();m&&(r["X-Firebase-Client"]=m)}const o={method:"POST",body:JSON.stringify(e),headers:r};let s,a;try{s=yield fetch(n,o)}catch(m){throw _i.create("fetch-network-error",{originalErrorMessage:m?.message})}if(200!==s.status)throw _i.create("fetch-status-error",{httpStatus:s.status});try{a=yield s.json()}catch(m){throw _i.create("fetch-parse-error",{originalErrorMessage:m?.message})}const c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw _i.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const u=1e3*Number(c[1]),h=Date.now();return{token:a.token,expireTimeMillis:h+u,issuedAtTimeMillis:h}})).apply(this,arguments)}function IH(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Cy="firebase-app-check-store";let PI=null;function lR(){return(lR=(0,T.A)(function*(n,e){const r=(yield function wH(){return PI||(PI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(_i.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Cy,{keyPath:"compositeKey"})}}catch(t){e(_i.create("storage-open",{originalErrorMessage:t?.message}))}}),PI)}()).transaction(Cy,"readwrite"),o=r.objectStore(Cy).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(_i.create("storage-set",{originalErrorMessage:null===(u=c.target.error)||void 0===u?void 0:u.message}))}})})).apply(this,arguments)}const Rd=new ea.Vy("@firebase/app-check");function hR(n,e){return(0,Ct.zW)()?function Sae(n,e){return function DH(n,e){return lR.apply(this,arguments)}(function AH(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Rd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function pR(){return SI().enabled}function gR(){return mR.apply(this,arguments)}function mR(){return(mR=(0,T.A)(function*(){const n=SI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const kae={error:"UNKNOWN_ERROR"};function xae(n){return Ct.K3.encodeString(JSON.stringify(n),!1)}function OI(n){return _R.apply(this,arguments)}function _R(){return(_R=(0,T.A)(function*(n,e=!1,t=!1){const r=n.app;sR(r);const i=vr(r);let s,o=i.token;if(o&&!wp(o)&&(i.token=void 0,o=void 0),!o){const u=yield i.cachedTokenPromise;u&&(wp(u)?o=u:yield hR(r,void 0))}if(!e&&o&&wp(o))return{token:o.token};let c,a=!1;if(pR())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=MI(IH(r,yield gR()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);const u=yield i.exchangeTokenPromise;return yield hR(r,u),i.token=u,{token:u.token}}catch(u){return"appCheck/throttled"===u.code||"appCheck/initial-throttle"===u.code?Rd.warn(u.message):t&&Rd.error(u),bR(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield vr(r).exchangeTokenPromise}catch(u){"appCheck/throttled"===u.code||"appCheck/initial-throttle"===u.code?Rd.warn(u.message):t&&Rd.error(u),s=u}return o?s?c=wp(o)?{token:o.token,internalError:s}:bR(s):(c={token:o.token},i.token=o,yield hR(r,o)):c=bR(s),a&&function NH(n,e){const t=vr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(r,c),c})).apply(this,arguments)}function yR(){return(yR=(0,T.A)(function*(n){const e=n.app;sR(e);const{provider:t}=vr(e);if(pR()){const r=yield gR(),{token:i}=yield MI(IH(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function ER(n,e){const t=vr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function RH(n){const{app:e}=n,t=vr(e);let r=t.tokenRefresher;r||(r=function Fae(n){const{app:e}=n;return new Eae((0,T.A)(function*(){let r;if(r=vr(e).token?yield OI(n,!0):yield OI(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=vr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function wp(n){return n.expireTimeMillis-Date.now()>0}function bR(n){return{token:xae(kae),error:n}}class Lae{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=vr(this.app);for(const t of e)ER(this.app,t.next);return Promise.resolve()}}const VH="app-check-internal";!function Jae(){(0,ws._registerComponent)(new AI.uA("app-check",n=>function Vae(n,e){return new Lae(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(VH).initialize()})),(0,ws._registerComponent)(new AI.uA(VH,n=>function Bae(n){return{getToken:e=>OI(n,e),getLimitedUseToken:()=>function SH(n){return yR.apply(this,arguments)}(n),addTokenListener:e=>function vR(n,e,t,r){const{app:i}=n,o=vr(i);if(o.tokenObservers=[...o.tokenObservers,{next:t,error:r,type:e}],o.token&&wp(o.token)){const a=o.token;Promise.resolve().then(()=>{t({token:a.token}),RH(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>RH(n))}(n,"INTERNAL",e),removeTokenListener:e=>ER(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ws.registerVersion)("@firebase/app-check","0.9.1")}();class DR{constructor(){return(n=>{const t=(0,ws.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r})("app-check")}}typeof window<"u"&&window;var Bl=pt(345);Bl.A.registerVersion("firebase","11.7.1","app-compat");const oce=["ngOnDestroy"];class UH{constructor(e){return e}}const xI=new pe("angularfire2.app.options"),FI=new pe("angularfire2.app.name");function AR(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const s=Bl.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Bl.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){const a=!!module.hot;cce("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new UH(s)}const cce=(n,...e)=>{},lce={provide:UH,useFactory:AR,deps:[xI,g,[new hs,FI]]};let uce=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:xI,useValue:t},{provide:FI,useValue:r}]}}constructor(t){Bl.A.registerVersion("angularfire",eR.full,"core"),Bl.A.registerVersion("angularfire",eR.full,"app-compat"),Bl.A.registerVersion("angular",tee.full,t.toString())}static \u0275fac=function(r){return new(r||n)(me(sd))};static \u0275mod=Qt({type:n});static \u0275inj=Rt({providers:[lce]})}return n})();function jH(n,e,t,r,i){const[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return function dce(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,s)||(HH("error",`${e} was already initialized on the ${t} Firebase App with different settings.${hce?" You may need to reload as Firebase is not HMR aware.":""}`),HH("warn",{is:i,was:s})),o;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const hce=typeof module<"u"&&!!module.hot,HH=(n,...e)=>{};function Yo(n){void 0===n&&(Vs(),n=N(zt));const e=n.get(bf);return t=>new R(r=>{const i=e.add();let o=!1;function s(){o||(i(),o=!0)}const a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}function zH(n,e){return At(e)?ur(()=>n,e):ur(()=>n)}globalThis.\u0275AngularfireInstanceCache||=[],pt(915);const WH=new pe("angularfire2.auth.use-emulator"),qH=new pe("angularfire2.auth.settings"),KH=new pe("angularfire2.auth.tenant-id"),QH=new pe("angularfire2.auth.langugage-code"),YH=new pe("angularfire2.auth.use-device-language"),JH=new pe("angularfire.auth.persistence"),ZH=(n,e,t,r,i,o,s,a)=>jH(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(const[u,h]of Object.entries(s))c.settings[u]=h;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]);let XH=(()=>{class n{injector=N(cr);authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,u,h,m,_,v){const I=new Se,D=ze(void 0).pipe(hp(s.outsideAngular),ur(()=>o.runOutsideAngular(()=>Promise.resolve().then(pt.bind(pt,915)))),$e(()=>AR(t,o,r)),$e(A=>ZH(A,o,a,u,h,m,c,_)),fI({bufferSize:1,refCount:!1}));if(Cb(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ze(null);else{D.pipe(xl()).subscribe();const A=D.pipe(ur(j=>j.getRedirectResult().then(X=>X,()=>null)),Yo(this.injector),fI({bufferSize:1,refCount:!1})),O=D.pipe(ur(j=>new R(X=>({unsubscribe:o.runOutsideAngular(()=>j.onAuthStateChanged(ae=>X.next(ae),ae=>X.error(ae),()=>X.complete()))})))),P=D.pipe(ur(j=>new R(X=>({unsubscribe:o.runOutsideAngular(()=>j.onIdTokenChanged(ae=>X.next(ae),ae=>X.error(ae),()=>X.complete()))}))));this.authState=A.pipe(zH(O),ty(s.outsideAngular),hp(s.insideAngular)),this.user=A.pipe(zH(P),ty(s.outsideAngular),hp(s.insideAngular)),this.idToken=this.user.pipe(ur(j=>j?Un(j.getIdToken()):ze(null))),this.idTokenResult=this.user.pipe(ur(j=>j?Un(j.getIdTokenResult()):ze(null))),this.credential=function GH(...n){const e=ny(n),t=function rie(n,e){return"number"==typeof p1(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Kr(r[0]):fp(t)(Un(r,e)):No}(A,I,this.authState.pipe(yr(j=>!j))).pipe($e(j=>j?.user?j:null),ty(s.outsideAngular),hp(s.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(oce.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(a=>{const c=a?.[o];return"function"==typeof c?c.bind(a):c?.then?c.then(u=>t.run(()=>u)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,u)=>s.then(h=>{const m=h?.(...u);return r?.spy?.apply&&r.spy.apply(o,u,m),m})})})}))(this,D,o,{spy:{apply:(A,O,P)=>{(A.startsWith("signIn")||A.startsWith("createUser"))&&P.then(j=>I.next(j))}}})}static \u0275fac=function(r){return new(r||n)(me(xI),me(FI,8),me(sd),me(g),me(nR),me(WH,8),me(qH,8),me(KH,8),me(QH,8),me(YH,8),me(JH,8),me(DR,8))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function SR(){return Ft((n,e)=>{let t,r=!1;n.subscribe(Je(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}function yce(n,e){return n===e}var Ul,r$,t$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},n$={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(x,S,F){F||(F=0);var U=Array(16);if("string"==typeof S)for(var H=0;16>H;++H)U[H]=S.charCodeAt(F++)|S.charCodeAt(F++)<<8|S.charCodeAt(F++)<<16|S.charCodeAt(F++)<<24;else for(H=0;16>H;++H)U[H]=S[F++]|S[F++]<<8|S[F++]<<16|S[F++]<<24;var W=x.g[3],k=(S=x.g[0])+(W^(F=x.g[1])&((H=x.g[2])^W))+U[0]+3614090360&4294967295;k=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=F+(k<<7&4294967295|k>>>25))+((k=W+(H^S&(F^H))+U[1]+3905402710&4294967295)<<12&4294967295|k>>>20))+((k=H+(F^W&(S^F))+U[2]+606105819&4294967295)<<17&4294967295|k>>>15))+((k=F+(S^H&(W^S))+U[3]+3250441966&4294967295)<<22&4294967295|k>>>10))+((k=S+(W^F&(H^W))+U[4]+4118548399&4294967295)<<7&4294967295|k>>>25))+((k=W+(H^S&(F^H))+U[5]+1200080426&4294967295)<<12&4294967295|k>>>20))+((k=H+(F^W&(S^F))+U[6]+2821735955&4294967295)<<17&4294967295|k>>>15))+((k=F+(S^H&(W^S))+U[7]+4249261313&4294967295)<<22&4294967295|k>>>10))+((k=S+(W^F&(H^W))+U[8]+1770035416&4294967295)<<7&4294967295|k>>>25))+((k=W+(H^S&(F^H))+U[9]+2336552879&4294967295)<<12&4294967295|k>>>20))+((k=H+(F^W&(S^F))+U[10]+4294925233&4294967295)<<17&4294967295|k>>>15))+((k=F+(S^H&(W^S))+U[11]+2304563134&4294967295)<<22&4294967295|k>>>10))+((k=S+(W^F&(H^W))+U[12]+1804603682&4294967295)<<7&4294967295|k>>>25))+((k=W+(H^S&(F^H))+U[13]+4254626195&4294967295)<<12&4294967295|k>>>20))+((k=H+(F^W&(S^F))+U[14]+2792965006&4294967295)<<17&4294967295|k>>>15))+((k=F+(S^H&(W^S))+U[15]+1236535329&4294967295)<<22&4294967295|k>>>10))+((k=S+(H^W&(F^H))+U[1]+4129170786&4294967295)<<5&4294967295|k>>>27))+((k=W+(F^H&(S^F))+U[6]+3225465664&4294967295)<<9&4294967295|k>>>23))+((k=H+(S^F&(W^S))+U[11]+643717713&4294967295)<<14&4294967295|k>>>18))+((k=F+(W^S&(H^W))+U[0]+3921069994&4294967295)<<20&4294967295|k>>>12))+((k=S+(H^W&(F^H))+U[5]+3593408605&4294967295)<<5&4294967295|k>>>27))+((k=W+(F^H&(S^F))+U[10]+38016083&4294967295)<<9&4294967295|k>>>23))+((k=H+(S^F&(W^S))+U[15]+3634488961&4294967295)<<14&4294967295|k>>>18))+((k=F+(W^S&(H^W))+U[4]+3889429448&4294967295)<<20&4294967295|k>>>12))+((k=S+(H^W&(F^H))+U[9]+568446438&4294967295)<<5&4294967295|k>>>27))+((k=W+(F^H&(S^F))+U[14]+3275163606&4294967295)<<9&4294967295|k>>>23))+((k=H+(S^F&(W^S))+U[3]+4107603335&4294967295)<<14&4294967295|k>>>18))+((k=F+(W^S&(H^W))+U[8]+1163531501&4294967295)<<20&4294967295|k>>>12))+((k=S+(H^W&(F^H))+U[13]+2850285829&4294967295)<<5&4294967295|k>>>27))+((k=W+(F^H&(S^F))+U[2]+4243563512&4294967295)<<9&4294967295|k>>>23))+((k=H+(S^F&(W^S))+U[7]+1735328473&4294967295)<<14&4294967295|k>>>18))+((k=F+(W^S&(H^W))+U[12]+2368359562&4294967295)<<20&4294967295|k>>>12))+((k=S+(F^H^W)+U[5]+4294588738&4294967295)<<4&4294967295|k>>>28))+((k=W+(S^F^H)+U[8]+2272392833&4294967295)<<11&4294967295|k>>>21))+((k=H+(W^S^F)+U[11]+1839030562&4294967295)<<16&4294967295|k>>>16))+((k=F+(H^W^S)+U[14]+4259657740&4294967295)<<23&4294967295|k>>>9))+((k=S+(F^H^W)+U[1]+2763975236&4294967295)<<4&4294967295|k>>>28))+((k=W+(S^F^H)+U[4]+1272893353&4294967295)<<11&4294967295|k>>>21))+((k=H+(W^S^F)+U[7]+4139469664&4294967295)<<16&4294967295|k>>>16))+((k=F+(H^W^S)+U[10]+3200236656&4294967295)<<23&4294967295|k>>>9))+((k=S+(F^H^W)+U[13]+681279174&4294967295)<<4&4294967295|k>>>28))+((k=W+(S^F^H)+U[0]+3936430074&4294967295)<<11&4294967295|k>>>21))+((k=H+(W^S^F)+U[3]+3572445317&4294967295)<<16&4294967295|k>>>16))+((k=F+(H^W^S)+U[6]+76029189&4294967295)<<23&4294967295|k>>>9))+((k=S+(F^H^W)+U[9]+3654602809&4294967295)<<4&4294967295|k>>>28))+((k=W+(S^F^H)+U[12]+3873151461&4294967295)<<11&4294967295|k>>>21))+((k=H+(W^S^F)+U[15]+530742520&4294967295)<<16&4294967295|k>>>16))+((k=F+(H^W^S)+U[2]+3299628645&4294967295)<<23&4294967295|k>>>9))+((k=S+(H^(F|~W))+U[0]+4096336452&4294967295)<<6&4294967295|k>>>26))+((k=W+(F^(S|~H))+U[7]+1126891415&4294967295)<<10&4294967295|k>>>22))+((k=H+(S^(W|~F))+U[14]+2878612391&4294967295)<<15&4294967295|k>>>17))+((k=F+(W^(H|~S))+U[5]+4237533241&4294967295)<<21&4294967295|k>>>11))+((k=S+(H^(F|~W))+U[12]+1700485571&4294967295)<<6&4294967295|k>>>26))+((k=W+(F^(S|~H))+U[3]+2399980690&4294967295)<<10&4294967295|k>>>22))+((k=H+(S^(W|~F))+U[10]+4293915773&4294967295)<<15&4294967295|k>>>17))+((k=F+(W^(H|~S))+U[1]+2240044497&4294967295)<<21&4294967295|k>>>11))+((k=S+(H^(F|~W))+U[8]+1873313359&4294967295)<<6&4294967295|k>>>26))+((k=W+(F^(S|~H))+U[15]+4264355552&4294967295)<<10&4294967295|k>>>22))+((k=H+(S^(W|~F))+U[6]+2734768916&4294967295)<<15&4294967295|k>>>17))+((k=F+(W^(H|~S))+U[13]+1309151649&4294967295)<<21&4294967295|k>>>11))+((W=(S=F+((k=S+(H^(F|~W))+U[4]+4149444226&4294967295)<<6&4294967295|k>>>26))+((k=W+(F^(S|~H))+U[11]+3174756917&4294967295)<<10&4294967295|k>>>22))^((H=W+((k=H+(S^(W|~F))+U[2]+718787259&4294967295)<<15&4294967295|k>>>17))|~S))+U[9]+3951481745&4294967295,x.g[0]=x.g[0]+S&4294967295,x.g[1]=x.g[1]+(H+(k<<21&4294967295|k>>>11))&4294967295,x.g[2]=x.g[2]+H&4294967295,x.g[3]=x.g[3]+W&4294967295}function s(x,S){this.h=S;for(var F=[],U=!0,H=x.length-1;0<=H;H--){var W=0|x[H];U&&W==S||(F[H]=W,U=!1)}this.g=F}(function e(x,S){function F(){}F.prototype=S.prototype,x.D=S.prototype,x.prototype=new F,x.prototype.constructor=x,x.C=function(U,H,W){for(var k=Array(arguments.length-2),Di=2;Di<arguments.length;Di++)k[Di-2]=arguments[Di];return S.prototype[H].apply(U,k)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(x,S){void 0===S&&(S=x.length);for(var F=S-this.blockSize,U=this.B,H=this.h,W=0;W<S;){if(0==H)for(;W<=F;)i(this,x,W),W+=this.blockSize;if("string"==typeof x){for(;W<S;)if(U[H++]=x.charCodeAt(W++),H==this.blockSize){i(this,U),H=0;break}}else for(;W<S;)if(U[H++]=x[W++],H==this.blockSize){i(this,U),H=0;break}}this.h=H,this.o+=S},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var S=1;S<x.length-8;++S)x[S]=0;var F=8*this.o;for(S=x.length-8;S<x.length;++S)x[S]=255&F,F/=256;for(this.u(x),x=Array(16),S=F=0;4>S;++S)for(var U=0;32>U;U+=8)x[F++]=this.g[S]>>>U&255;return x};var a={};function c(x){return-128<=x&&128>x?function o(x,S){var F=a;return Object.prototype.hasOwnProperty.call(F,x)?F[x]:F[x]=S(x)}(x,function(S){return new s([0|S],0>S?-1:0)}):new s([0|x],0>x?-1:0)}function u(x){if(isNaN(x)||!isFinite(x))return m;if(0>x)return A(u(-x));for(var S=[],F=1,U=0;x>=F;U++)S[U]=x/F|0,F*=4294967296;return new s(S,0)}var m=c(0),_=c(1),v=c(16777216);function I(x){if(0!=x.h)return!1;for(var S=0;S<x.g.length;S++)if(0!=x.g[S])return!1;return!0}function D(x){return-1==x.h}function A(x){for(var S=x.g.length,F=[],U=0;U<S;U++)F[U]=~x.g[U];return new s(F,~x.h).add(_)}function O(x,S){return x.add(A(S))}function P(x,S){for(;(65535&x[S])!=x[S];)x[S+1]+=x[S]>>>16,x[S]&=65535,S++}function j(x,S){this.g=x,this.h=S}function X(x,S){if(I(S))throw Error("division by zero");if(I(x))return new j(m,m);if(D(x))return S=X(A(x),S),new j(A(S.g),A(S.h));if(D(S))return S=X(x,A(S)),new j(A(S.g),S.h);if(30<x.g.length){if(D(x)||D(S))throw Error("slowDivide_ only works with positive integers.");for(var F=_,U=S;0>=U.l(x);)F=ae(F),U=ae(U);var H=we(F,1),W=we(U,1);for(U=we(U,2),F=we(F,2);!I(U);){var k=W.add(U);0>=k.l(x)&&(H=H.add(F),W=k),U=we(U,1),F=we(F,1)}return S=O(x,H.j(S)),new j(H,S)}for(H=m;0<=x.l(S);){for(F=Math.max(1,Math.floor(x.m()/S.m())),U=48>=(U=Math.ceil(Math.log(F)/Math.LN2))?1:Math.pow(2,U-48),k=(W=u(F)).j(S);D(k)||0<k.l(x);)k=(W=u(F-=U)).j(S);I(W)&&(W=_),H=H.add(W),x=O(x,k)}return new j(H,x)}function ae(x){for(var S=x.g.length+1,F=[],U=0;U<S;U++)F[U]=x.i(U)<<1|x.i(U-1)>>>31;return new s(F,x.h)}function we(x,S){var F=S>>5;S%=32;for(var U=x.g.length-F,H=[],W=0;W<U;W++)H[W]=0<S?x.i(W+F)>>>S|x.i(W+F+1)<<32-S:x.i(W+F);return new s(H,x.h)}(n=s.prototype).m=function(){if(D(this))return-A(this).m();for(var x=0,S=1,F=0;F<this.g.length;F++){var U=this.i(F);x+=(0<=U?U:4294967296+U)*S,S*=4294967296}return x},n.toString=function(x){if(2>(x=x||10)||36<x)throw Error("radix out of range: "+x);if(I(this))return"0";if(D(this))return"-"+A(this).toString(x);for(var S=u(Math.pow(x,6)),F=this,U="";;){var H=X(F,S).g,W=((0<(F=O(F,H.j(S))).g.length?F.g[0]:F.h)>>>0).toString(x);if(I(F=H))return W+U;for(;6>W.length;)W="0"+W;U=W+U}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h},n.l=function(x){return D(x=O(this,x))?-1:I(x)?0:1},n.abs=function(){return D(this)?A(this):this},n.add=function(x){for(var S=Math.max(this.g.length,x.g.length),F=[],U=0,H=0;H<=S;H++){var W=U+(65535&this.i(H))+(65535&x.i(H)),k=(W>>>16)+(this.i(H)>>>16)+(x.i(H)>>>16);U=k>>>16,F[H]=(k&=65535)<<16|(W&=65535)}return new s(F,-2147483648&F[F.length-1]?-1:0)},n.j=function(x){if(I(this)||I(x))return m;if(D(this))return D(x)?A(this).j(A(x)):A(A(this).j(x));if(D(x))return A(this.j(A(x)));if(0>this.l(v)&&0>x.l(v))return u(this.m()*x.m());for(var S=this.g.length+x.g.length,F=[],U=0;U<2*S;U++)F[U]=0;for(U=0;U<this.g.length;U++)for(var H=0;H<x.g.length;H++){var W=this.i(U)>>>16,k=65535&this.i(U),Di=x.i(H)>>>16,is=65535&x.i(H);F[2*U+2*H]+=k*is,P(F,2*U+2*H),F[2*U+2*H+1]+=W*is,P(F,2*U+2*H+1),F[2*U+2*H+1]+=k*Di,P(F,2*U+2*H+1),F[2*U+2*H+2]+=W*Di,P(F,2*U+2*H+2)}for(U=0;U<S;U++)F[U]=F[2*U+1]<<16|F[2*U];for(U=S;U<2*S;U++)F[U]=0;return new s(F,0)},n.A=function(x){return X(this,x).h},n.and=function(x){for(var S=Math.max(this.g.length,x.g.length),F=[],U=0;U<S;U++)F[U]=this.i(U)&x.i(U);return new s(F,this.h&x.h)},n.or=function(x){for(var S=Math.max(this.g.length,x.g.length),F=[],U=0;U<S;U++)F[U]=this.i(U)|x.i(U);return new s(F,this.h|x.h)},n.xor=function(x){for(var S=Math.max(this.g.length,x.g.length),F=[],U=0;U<S;U++)F[U]=this.i(U)^x.i(U);return new s(F,this.h^x.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,r$=n$.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=function h(x,S){if(0==x.length)throw Error("number format error: empty string");if(2>(S=S||10)||36<S)throw Error("radix out of range: "+S);if("-"==x.charAt(0))return A(h(x.substring(1),S));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var F=u(Math.pow(S,8)),U=m,H=0;H<x.length;H+=8){var W=Math.min(8,x.length-H),k=parseInt(x.substring(H,H+W),S);8>W?(W=u(Math.pow(S,W)),U=U.j(W).add(u(k))):U=(U=U.j(F)).add(u(k))}return U},Ul=n$.Integer=s}).apply(typeof t$<"u"?t$:typeof self<"u"?self:typeof window<"u"?window:{});var i$,Ay,o$,VI,RR,s$,a$,c$,LI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fc={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(f,y,b){return f==Array.prototype||f==Object.prototype||(f[y]=b.value),f},r=function t(f){f=["object"==typeof globalThis&&globalThis,f,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof LI&&LI];for(var y=0;y<f.length;++y){var b=f[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}(this);!function i(f,y){if(y)e:{var b=r;f=f.split(".");for(var C=0;C<f.length-1;C++){var G=f[C];if(!(G in b))break e;b=b[G]}(y=y(C=b[f=f[f.length-1]]))!=C&&null!=y&&e(b,f,{configurable:!0,writable:!0,value:y})}}("Array.prototype.values",function(f){return f||function(){return function o(f,y){f instanceof String&&(f+="");var b=0,C=!1,G={next:function(){if(!C&&b<f.length){var ne=b++;return{value:y(ne,f[ne]),done:!1}}return C=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}(this,function(y,b){return b})}});var s=s||{},a=this||self;function c(f){var y=typeof f;return"array"==(y="object"!=y?y:f?Array.isArray(f)?"array":y:"null")||"object"==y&&"number"==typeof f.length}function u(f){var y=typeof f;return"object"==y&&null!=f||"function"==y}function h(f,y,b){return f.call.apply(f.bind,arguments)}function m(f,y,b){if(!f)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,C),f.apply(y,G)}}return function(){return f.apply(y,arguments)}}function _(f,y,b){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?h:m).apply(null,arguments)}function v(f,y){var b=Array.prototype.slice.call(arguments,1);return function(){var C=b.slice();return C.push.apply(C,arguments),f.apply(this,C)}}function I(f,y){function b(){}b.prototype=y.prototype,f.aa=y.prototype,f.prototype=new b,f.prototype.constructor=f,f.Qb=function(C,G,ne){for(var Oe=Array(arguments.length-2),Mn=2;Mn<arguments.length;Mn++)Oe[Mn-2]=arguments[Mn];return y.prototype[G].apply(C,Oe)}}function D(f){const y=f.length;if(0<y){const b=Array(y);for(let C=0;C<y;C++)b[C]=f[C];return b}return[]}function A(f,y){for(let b=1;b<arguments.length;b++){const C=arguments[b];if(c(C)){const G=f.length||0,ne=C.length||0;f.length=G+ne;for(let Oe=0;Oe<ne;Oe++)f[G+Oe]=C[Oe]}else f.push(C)}}function P(f){return/^[\s\xa0]*$/.test(f)}function j(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function X(f){return X[" "](f),f}X[" "]=function(){};var ae=!(-1==j().indexOf("Gecko")||-1!=j().toLowerCase().indexOf("webkit")&&-1==j().indexOf("Edge")||-1!=j().indexOf("Trident")||-1!=j().indexOf("MSIE")||-1!=j().indexOf("Edge"));function we(f,y,b){for(const C in f)y.call(b,f[C],C,f)}function S(f){const y={};for(const b in f)y[b]=f[b];return y}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(f,y){let b,C;for(let G=1;G<arguments.length;G++){for(b in C=arguments[G],C)f[b]=C[b];for(let ne=0;ne<F.length;ne++)b=F[ne],Object.prototype.hasOwnProperty.call(C,b)&&(f[b]=C[b])}}function H(f){var y=1;f=f.split(":");const b=[];for(;0<y&&f.length;)b.push(f.shift()),y--;return f.length&&b.push(f.join(":")),b}function W(f){a.setTimeout(()=>{throw f},0)}function k(){var f=oa;let y=null;return f.g&&(y=f.g,f.g=f.g.next,f.g||(f.h=null),y.next=null),y}var is=new class O{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}(()=>new po,f=>f.reset());class po{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let Ci,ja=!1,oa=new class Di{constructor(){this.h=this.g=null}add(y,b){const C=is.get();C.set(y,b),this.h?this.h.next=C:this.g=C,this.h=C}},fh=()=>{const f=a.Promise.resolve(void 0);Ci=()=>{f.then(Uv)}};var Uv=()=>{for(var f;f=k();){try{f.h.call(f.g)}catch(b){W(b)}var y=is;y.j(f),100>y.h&&(y.h++,f.next=y.g,y.g=f)}ja=!1};function xo(){this.s=this.s,this.C=this.C}function Mr(f,y){this.type=f,this.g=this.target=y,this.defaultPrevented=!1}xo.prototype.s=!1,xo.prototype.ma=function(){this.s||(this.s=!0,this.N())},xo.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Mr.prototype.h=function(){this.defaultPrevented=!0};var mu=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,y=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const b=()=>{};a.addEventListener("test",b,y),a.removeEventListener("test",b,y)}catch{}return f}();function Fo(f,y){if(Mr.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var b=this.type=f.type,C=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=y,y=f.relatedTarget){if(ae){e:{try{X(y.nodeName);var G=!0;break e}catch{}G=!1}G||(y=null)}}else"mouseover"==b?y=f.fromElement:"mouseout"==b&&(y=f.toElement);this.relatedTarget=y,C?(this.clientX=void 0!==C.clientX?C.clientX:C.pageX,this.clientY=void 0!==C.clientY?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=void 0!==f.clientX?f.clientX:f.pageX,this.clientY=void 0!==f.clientY?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType="string"==typeof f.pointerType?f.pointerType:ph[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Fo.aa.h.call(this)}}I(Fo,Mr);var ph={2:"touch",3:"pen",4:"mouse"};Fo.prototype.h=function(){Fo.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Ha="closure_listenable_"+(1e6*Math.random()|0),qc=0;function jv(f,y,b,C,G){this.listener=f,this.proxy=null,this.src=y,this.type=b,this.capture=!!C,this.ha=G,this.key=++qc,this.da=this.fa=!1}function Ag(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function _u(f){this.src=f,this.g={},this.h=0}function Hv(f,y){var b=y.type;if(b in f.g){var ne,C=f.g[b],G=Array.prototype.indexOf.call(C,y,void 0);(ne=0<=G)&&Array.prototype.splice.call(C,G,1),ne&&(Ag(y),0==f.g[b].length&&(delete f.g[b],f.h--))}}function Sg(f,y,b,C){for(var G=0;G<f.length;++G){var ne=f[G];if(!ne.da&&ne.listener==y&&ne.capture==!!b&&ne.ha==C)return G}return-1}_u.prototype.add=function(f,y,b,C,G){var ne=f.toString();(f=this.g[ne])||(f=this.g[ne]=[],this.h++);var Oe=Sg(f,y,C,G);return-1<Oe?(y=f[Oe],b||(y.fa=!1)):((y=new jv(y,this.src,ne,!!C,G)).fa=b,f.push(y)),y};var $v="closure_lm_"+(1e6*Math.random()|0),Gv={};function zv(f,y,b,C,G){if(C&&C.once)return kw(f,y,b,C,G);if(Array.isArray(y)){for(var ne=0;ne<y.length;ne++)zv(f,y[ne],b,C,G);return null}return b=Ng(b),f&&f[Ha]?f.K(y,b,u(C)?!!C.capture:!!C,G):Wv(f,y,b,!1,C,G)}function Wv(f,y,b,C,G,ne){if(!y)throw Error("Invalid event type");var Oe=u(G)?!!G.capture:!!G,Mn=gh(f);if(Mn||(f[$v]=Mn=new _u(f)),(b=Mn.add(y,b,C,Oe,ne)).proxy)return b;if(C=function PO(){const y=xw;return function f(b){return y.call(f.src,f.listener,b)}}(),b.proxy=C,C.src=f,C.listener=b,f.addEventListener)mu||(G=Oe),void 0===G&&(G=!1),f.addEventListener(y.toString(),C,G);else if(f.attachEvent)f.attachEvent(qv(y.toString()),C);else{if(!f.addListener||!f.removeListener)throw Error("addEventListener and attachEvent are unavailable.");f.addListener(C)}return b}function kw(f,y,b,C,G){if(Array.isArray(y)){for(var ne=0;ne<y.length;ne++)kw(f,y[ne],b,C,G);return null}return b=Ng(b),f&&f[Ha]?f.L(y,b,u(C)?!!C.capture:!!C,G):Wv(f,y,b,!0,C,G)}function $a(f,y,b,C,G){if(Array.isArray(y))for(var ne=0;ne<y.length;ne++)$a(f,y[ne],b,C,G);else C=u(C)?!!C.capture:!!C,b=Ng(b),f&&f[Ha]?(f=f.i,(y=String(y).toString())in f.g&&-1<(b=Sg(ne=f.g[y],b,C,G))&&(Ag(ne[b]),Array.prototype.splice.call(ne,b,1),0==ne.length&&(delete f.g[y],f.h--))):f&&(f=gh(f))&&(y=f.g[y.toString()],f=-1,y&&(f=Sg(y,b,C,G)),(b=-1<f?y[f]:null)&&yu(b))}function yu(f){if("number"!=typeof f&&f&&!f.da){var y=f.src;if(y&&y[Ha])Hv(y.i,f);else{var b=f.type,C=f.proxy;y.removeEventListener?y.removeEventListener(b,C,f.capture):y.detachEvent?y.detachEvent(qv(b),C):y.addListener&&y.removeListener&&y.removeListener(C),(b=gh(y))?(Hv(b,f),0==b.h&&(b.src=null,y[$v]=null)):Ag(f)}}}function qv(f){return f in Gv?Gv[f]:Gv[f]="on"+f}function xw(f,y){if(f.da)f=!0;else{y=new Fo(y,this);var b=f.listener,C=f.ha||f.src;f.fa&&yu(f),f=b.call(C,y)}return f}function gh(f){return(f=f[$v])instanceof _u?f:null}var Rg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ng(f){return"function"==typeof f?f:(f[Rg]||(f[Rg]=function(y){return f.handleEvent(y)}),f[Rg])}function Jr(){xo.call(this),this.i=new _u(this),this.M=this,this.F=null}function li(f,y){var b,C=f.F;if(C)for(b=[];C;C=C.F)b.push(C);if(f=f.M,C=y.type||y,"string"==typeof y)y=new Mr(y,f);else if(y instanceof Mr)y.target=y.target||f;else{var G=y;U(y=new Mr(C,f),G)}if(G=!0,b)for(var ne=b.length-1;0<=ne;ne--){var Oe=y.g=b[ne];G=Fw(Oe,C,!0,y)&&G}if(G=Fw(Oe=y.g=f,C,!0,y)&&G,G=Fw(Oe,C,!1,y)&&G,b)for(ne=0;ne<b.length;ne++)G=Fw(Oe=y.g=b[ne],C,!1,y)&&G}function Fw(f,y,b,C){if(!(y=f.i.g[String(y)]))return!0;y=y.concat();for(var G=!0,ne=0;ne<y.length;++ne){var Oe=y[ne];if(Oe&&!Oe.da&&Oe.capture==b){var Mn=Oe.listener,Ai=Oe.ha||Oe.src;Oe.fa&&Hv(f.i,Oe),G=!1!==Mn.call(Ai,C)&&G}}return G&&!C.defaultPrevented}function RW(f,y,b){if("function"==typeof f)b&&(f=_(f,b));else{if(!f||"function"!=typeof f.handleEvent)throw Error("Invalid listener argument");f=_(f.handleEvent,f)}return 2147483647<Number(y)?-1:a.setTimeout(f,y||0)}function NW(f){f.g=RW(()=>{f.g=null,f.i&&(f.i=!1,NW(f))},f.l);const y=f.h;f.h=null,f.m.apply(null,y)}I(Jr,xo),Jr.prototype[Ha]=!0,Jr.prototype.removeEventListener=function(f,y,b,C){$a(this,f,y,b,C)},Jr.prototype.N=function(){if(Jr.aa.N.call(this),this.i){var y,f=this.i;for(y in f.g){for(var b=f.g[y],C=0;C<b.length;C++)Ag(b[C]);delete f.g[y],f.h--}}this.F=null},Jr.prototype.K=function(f,y,b,C){return this.i.add(String(f),y,!1,b,C)},Jr.prototype.L=function(f,y,b,C){return this.i.add(String(f),y,!0,b,C)};class Mve extends xo{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:NW(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kv(f){xo.call(this),this.h=f,this.g={}}I(Kv,xo);var MW=[];function PW(f){we(f.g,function(y,b){this.g.hasOwnProperty(b)&&yu(y)},f),f.g={}}Kv.prototype.N=function(){Kv.aa.N.call(this),PW(this)},Kv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var OO=a.JSON.stringify,Pve=a.JSON.parse,Ove=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function kO(){}function kW(){}kO.prototype.h=null;var Qv={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xO(){Mr.call(this,"d")}function FO(){Mr.call(this,"c")}I(xO,Mr),I(FO,Mr);var mh={},xW=null;function Lw(){return xW=xW||new Jr}function FW(f){Mr.call(this,mh.La,f)}function Yv(f){const y=Lw();li(y,new FW(y))}function LW(f,y){Mr.call(this,mh.STAT_EVENT,f),this.stat=y}function go(f){const y=Lw();li(y,new LW(y,f))}function VW(f,y){Mr.call(this,mh.Ma,f),this.size=y}function Jv(f,y){if("function"!=typeof f)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},y)}function Zv(){this.g=!0}function Mg(f,y,b,C){f.info(function(){return"XMLHTTP TEXT ("+y+"): "+function Lve(f,y){if(!f.g)return y;if(!y)return null;try{var b=JSON.parse(y);if(b)for(f=0;f<b.length;f++)if(Array.isArray(b[f])){var C=b[f];if(!(2>C.length)){var G=C[1];if(Array.isArray(G)&&!(1>G.length)){var ne=G[0];if("noop"!=ne&&"stop"!=ne&&"close"!=ne)for(var Oe=1;Oe<G.length;Oe++)G[Oe]=""}}}return OO(b)}catch{return y}}(f,b)+(C?" "+C:"")})}mh.La="serverreachability",I(FW,Mr),mh.STAT_EVENT="statevent",I(LW,Mr),mh.Ma="timingevent",I(VW,Mr),Zv.prototype.xa=function(){this.g=!1},Zv.prototype.info=function(){};var LO,Vw={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},BW={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Bw(){}function vu(f,y,b,C){this.j=f,this.i=y,this.l=b,this.R=C||1,this.U=new Kv(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new UW}function UW(){this.i=null,this.g="",this.h=!1}I(Bw,kO),Bw.prototype.g=function(){return new XMLHttpRequest},Bw.prototype.i=function(){return{}},LO=new Bw;var jW={},VO={};function BO(f,y,b){f.L=1,f.v=$w(Kc(y)),f.m=b,f.P=!0,HW(f,null)}function HW(f,y){f.F=Date.now(),Uw(f),f.A=Kc(f.v);var b=f.A,C=f.R;Array.isArray(C)||(C=[String(C)]),nq(b.i,"t",C),f.C=0,b=f.j.J,f.h=new UW,f.g=Eq(f.j,b?y:null,!f.m),0<f.O&&(f.M=new Mve(_(f.Y,f,f.g),f.O)),y=f.U,b=f.g,C=f.ca;var G="readystatechange";Array.isArray(G)||(G&&(MW[0]=G.toString()),G=MW);for(var ne=0;ne<G.length;ne++){var Oe=zv(b,G[ne],C||y.handleEvent,!1,y.h||y);if(!Oe)break;y.g[Oe.key]=Oe}y=f.H?S(f.H):{},f.m?(f.u||(f.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,y)):(f.u="GET",f.g.ea(f.A,f.u,null,y)),Yv(),function kve(f,y,b,C,G,ne){f.info(function(){if(f.g)if(ne)for(var Oe="",Mn=ne.split("&"),Ai=0;Ai<Mn.length;Ai++){var sn=Mn[Ai].split("=");if(1<sn.length){var Hi=sn[0];sn=sn[1];var $i=Hi.split("_");Oe=2<=$i.length&&"type"==$i[1]?Oe+(Hi+"=")+sn+"&":Oe+(Hi+"=redacted&")}}else Oe=null;else Oe=ne;return"XMLHTTP REQ ("+C+") [attempt "+G+"]: "+y+"\n"+b+"\n"+Oe})}(f.i,f.u,f.A,f.l,f.R,f.m)}function $W(f){return!!f.g&&"GET"==f.u&&2!=f.L&&f.j.Ca}function Vve(f,y){var b=f.C,C=y.indexOf("\n",b);return-1==C?VO:(b=Number(y.substring(b,C)),isNaN(b)?jW:(C+=1)+b>y.length?VO:(y=y.slice(C,C+b),f.C=C+b,y))}function Uw(f){f.S=Date.now()+f.I,GW(f,f.I)}function GW(f,y){if(null!=f.B)throw Error("WatchDog timer not null");f.B=Jv(_(f.ba,f),y)}function UO(f){f.B&&(a.clearTimeout(f.B),f.B=null)}function Xv(f){0==f.j.G||f.J||mq(f.j,f)}function _h(f){UO(f);var y=f.M;y&&"function"==typeof y.ma&&y.ma(),f.M=null,PW(f.U),f.g&&(y=f.g,f.g=null,y.abort(),y.ma())}function jO(f,y){try{var b=f.j;if(0!=b.G&&(b.g==f||HO(b.h,f)))if(!f.K&&HO(b.h,f)&&3==b.G){try{var C=b.Da.g.parse(y)}catch{C=null}if(Array.isArray(C)&&3==C.length){var G=C;if(0==G[0]){e:if(!b.u){if(b.g){if(!(b.g.F+3e3<f.F))break e;Kw(b),Ww(b)}WO(b),go(18)}}else b.za=G[1],0<b.za-b.T&&37500>G[2]&&b.F&&0==b.v&&!b.C&&(b.C=Jv(_(b.Za,b),6e3));if(1>=qW(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else vh(b,11)}else if((f.K||b.g==f)&&Kw(b),!P(y))for(G=b.Da.g.parse(y),y=0;y<G.length;y++){let sn=G[y];if(b.T=sn[0],sn=sn[1],2==b.G)if("c"==sn[0]){b.K=sn[1],b.ia=sn[2];const Hi=sn[3];null!=Hi&&(b.la=Hi,b.j.info("VER="+b.la));const $i=sn[4];null!=$i&&(b.Aa=$i,b.j.info("SVER="+b.Aa));const kg=sn[5];null!=kg&&"number"==typeof kg&&0<kg&&(b.L=C=1.5*kg,b.j.info("backChannelRequestTimeoutMs_="+C)),C=b;const sa=f.g;if(sa){const Yw=sa.g?sa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yw){var ne=C.h;ne.g||-1==Yw.indexOf("spdy")&&-1==Yw.indexOf("quic")&&-1==Yw.indexOf("h2")||(ne.j=ne.l,ne.g=new Set,ne.h&&($O(ne,ne.h),ne.h=null))}if(C.D){const KO=sa.g?sa.g.getResponseHeader("X-HTTP-Session-Id"):null;KO&&(C.ya=KO,Kn(C.I,C.D,KO))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-f.F,b.j.info("Handshake RTT: "+b.R+"ms"));var Oe=f;if((C=b).qa=vq(C,C.J?C.ia:null,C.W),Oe.K){KW(C.h,Oe);var Mn=Oe,Ai=C.L;Ai&&(Mn.I=Ai),Mn.B&&(UO(Mn),Uw(Mn)),C.g=Oe}else pq(C);0<b.i.length&&qw(b)}else"stop"!=sn[0]&&"close"!=sn[0]||vh(b,7);else 3==b.G&&("stop"==sn[0]||"close"==sn[0]?"stop"==sn[0]?vh(b,7):zO(b):"noop"!=sn[0]&&b.l&&b.l.ta(sn),b.v=0)}Yv()}catch{}}vu.prototype.ca=function(f){f=f.target;const y=this.M;y&&3==Qc(f)?y.j():this.Y(f)},vu.prototype.Y=function(f){try{if(f==this.g)e:{const $i=Qc(this.g);var y=this.g.Ba();if(this.g.Z(),!(3>$i)&&(3!=$i||this.g&&(this.h.h||this.g.oa()||lq(this.g)))){this.J||4!=$i||7==y||Yv(),UO(this);var b=this.g.Z();this.X=b;t:if($W(this)){var C=lq(this.g);f="";var G=C.length,ne=4==Qc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){_h(this),Xv(this);var Oe="";break t}this.h.i=new a.TextDecoder}for(y=0;y<G;y++)this.h.h=!0,f+=this.h.i.decode(C[y],{stream:!(ne&&y==G-1)});C.length=0,this.h.g+=f,this.C=0,Oe=this.h.g}else Oe=this.g.oa();if(this.o=200==b,function xve(f,y,b,C,G,ne,Oe){f.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+G+"]: "+y+"\n"+b+"\n"+ne+" "+Oe})}(this.i,this.u,this.A,this.l,this.R,$i,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Mn,Ai=this.g;if((Mn=Ai.g?Ai.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(Mn)){var sn=Mn;break t}}sn=null}if(!(b=sn)){this.o=!1,this.s=3,go(12),_h(this),Xv(this);break e}Mg(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jO(this,b)}if(this.P){let sa;for(b=!0;!this.J&&this.C<Oe.length;){if(sa=Vve(this,Oe),sa==VO){4==$i&&(this.s=4,go(14),b=!1),Mg(this.i,this.l,null,"[Incomplete Response]");break}if(sa==jW){this.s=4,go(15),Mg(this.i,this.l,Oe,"[Invalid Chunk]"),b=!1;break}Mg(this.i,this.l,sa,null),jO(this,sa)}if($W(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=$i||0!=Oe.length||this.h.h||(this.s=1,go(16),b=!1),this.o=this.o&&b,b){if(0<Oe.length&&!this.W){this.W=!0;var Hi=this.j;Hi.g==this&&Hi.ba&&!Hi.M&&(Hi.j.info("Great, no buffering proxy detected. Bytes received: "+Oe.length),qO(Hi),Hi.M=!0,go(11))}}else Mg(this.i,this.l,Oe,"[Invalid Chunked Response]"),_h(this),Xv(this)}else Mg(this.i,this.l,Oe,null),jO(this,Oe);4==$i&&_h(this),this.o&&!this.J&&(4==$i?mq(this.j,this):(this.o=!1,Uw(this)))}else(function t0e(f){const y={};f=(f.g&&2<=Qc(f)&&f.g.getAllResponseHeaders()||"").split("\r\n");for(let C=0;C<f.length;C++){if(P(f[C]))continue;var b=H(f[C]);const G=b[0];if("string"!=typeof(b=b[1]))continue;b=b.trim();const ne=y[G]||[];y[G]=ne,ne.push(b)}!function x(f,y){for(const b in f)y.call(void 0,f[b],b,f)}(y,function(C){return C.join(", ")})})(this.g),400==b&&0<Oe.indexOf("Unknown SID")?(this.s=3,go(12)):(this.s=0,go(13)),_h(this),Xv(this)}}}catch{}},vu.prototype.cancel=function(){this.J=!0,_h(this)},vu.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(function Fve(f,y){f.info(function(){return"TIMEOUT: "+y})}(this.i,this.A),2!=this.L&&(Yv(),go(17)),_h(this),this.s=2,Xv(this)):GW(this,this.S-f)};var Bve=class{constructor(f,y){this.g=f,this.map=y}};function zW(f){this.l=f||10,f=a.PerformanceNavigationTiming?0<(f=a.performance.getEntriesByType("navigation")).length&&("hq"==f[0].nextHopProtocol||"h2"==f[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function WW(f){return!!f.h||!!f.g&&f.g.size>=f.j}function qW(f){return f.h?1:f.g?f.g.size:0}function HO(f,y){return f.h?f.h==y:!!f.g&&f.g.has(y)}function $O(f,y){f.g?f.g.add(y):f.h=y}function KW(f,y){f.h&&f.h==y?f.h=null:f.g&&f.g.has(y)&&f.g.delete(y)}function QW(f){if(null!=f.h)return f.i.concat(f.h.D);if(null!=f.g&&0!==f.g.size){let y=f.i;for(const b of f.g.values())y=y.concat(b.D);return y}return D(f.i)}function YW(f,y){if(f.forEach&&"function"==typeof f.forEach)f.forEach(y,void 0);else if(c(f)||"string"==typeof f)Array.prototype.forEach.call(f,y,void 0);else for(var b=function jve(f){if(f.na&&"function"==typeof f.na)return f.na();if(!f.V||"function"!=typeof f.V){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||"string"==typeof f){var y=[];f=f.length;for(var b=0;b<f;b++)y.push(b);return y}y=[],b=0;for(const C in f)y[b++]=C;return y}}}(f),C=function Uve(f){if(f.V&&"function"==typeof f.V)return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if("string"==typeof f)return f.split("");if(c(f)){for(var y=[],b=f.length,C=0;C<b;C++)y.push(f[C]);return y}for(C in y=[],b=0,f)y[b++]=f[C];return y}(f),G=C.length,ne=0;ne<G;ne++)y.call(void 0,C[ne],b&&b[ne],f)}zW.prototype.cancel=function(){if(this.i=QW(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const f of this.g.values())f.cancel();this.g.clear()}};var JW=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yh(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof yh){this.h=f.h,jw(this,f.j),this.o=f.o,this.g=f.g,Hw(this,f.s),this.l=f.l;var y=f.i,b=new n0;b.i=y.i,y.g&&(b.g=new Map(y.g),b.h=y.h),ZW(this,b),this.m=f.m}else f&&(y=String(f).match(JW))?(this.h=!1,jw(this,y[1]||"",!0),this.o=e0(y[2]||""),this.g=e0(y[3]||"",!0),Hw(this,y[4]),this.l=e0(y[5]||"",!0),ZW(this,y[6]||"",!0),this.m=e0(y[7]||"")):(this.h=!1,this.i=new n0(null,this.h))}function Kc(f){return new yh(f)}function jw(f,y,b){f.j=b?e0(y,!0):y,f.j&&(f.j=f.j.replace(/:$/,""))}function Hw(f,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);f.s=y}else f.s=null}function ZW(f,y,b){y instanceof n0?(f.i=y,function Kve(f,y){y&&!f.j&&(Eu(f),f.i=null,f.g.forEach(function(b,C){var G=C.toLowerCase();C!=G&&(eq(this,C),nq(this,G,b))},f)),f.j=y}(f.i,f.h)):(b||(y=t0(y,Wve)),f.i=new n0(y,f.h))}function Kn(f,y,b){f.i.set(y,b)}function $w(f){return Kn(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function e0(f,y){return f?y?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function t0(f,y,b){return"string"==typeof f?(f=encodeURI(f).replace(y,$ve),b&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function $ve(f){return"%"+((f=f.charCodeAt(0))>>4&15).toString(16)+(15&f).toString(16)}yh.prototype.toString=function(){var f=[],y=this.j;y&&f.push(t0(y,XW,!0),":");var b=this.g;return(b||"file"==y)&&(f.push("//"),(y=this.o)&&f.push(t0(y,XW,!0),"@"),f.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(b=this.s)&&f.push(":",String(b))),(b=this.l)&&(this.g&&"/"!=b.charAt(0)&&f.push("/"),f.push(t0(b,"/"==b.charAt(0)?zve:Gve,!0))),(b=this.i.toString())&&f.push("?",b),(b=this.m)&&f.push("#",t0(b,qve)),f.join("")};var XW=/[#\/\?@]/g,Gve=/[#\?:]/g,zve=/[#\?]/g,Wve=/[#\?@]/g,qve=/#/g;function n0(f,y){this.h=this.g=null,this.i=f||null,this.j=!!y}function Eu(f){f.g||(f.g=new Map,f.h=0,f.i&&function Hve(f,y){if(f){f=f.split("&");for(var b=0;b<f.length;b++){var C=f[b].indexOf("="),G=null;if(0<=C){var ne=f[b].substring(0,C);G=f[b].substring(C+1)}else ne=f[b];y(ne,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}(f.i,function(y,b){f.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}function eq(f,y){Eu(f),y=Pg(f,y),f.g.has(y)&&(f.i=null,f.h-=f.g.get(y).length,f.g.delete(y))}function tq(f,y){return Eu(f),y=Pg(f,y),f.g.has(y)}function nq(f,y,b){eq(f,y),0<b.length&&(f.i=null,f.g.set(Pg(f,y),D(b)),f.h+=b.length)}function Pg(f,y){return y=String(y),f.j&&(y=y.toLowerCase()),y}function bu(f,y,b,C,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),C(b)}catch{}}function Jve(){this.g=new Ove}function Zve(f,y,b){const C=b||"";try{YW(f,function(G,ne){let Oe=G;u(G)&&(Oe=OO(G)),y.push(C+ne+"="+encodeURIComponent(Oe))})}catch(G){throw y.push(C+"type="+encodeURIComponent("_badmap")),G}}function r0(f){this.l=f.Ub||null,this.j=f.eb||!1}function Gw(f,y){Jr.call(this),this.D=f,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function rq(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}function o0(f){f.readyState=4,f.l=null,f.j=null,f.v=null,s0(f)}function s0(f){f.onreadystatechange&&f.onreadystatechange.call(f)}function iq(f){let y="";return we(f,function(b,C){y+=C,y+=":",y+=b,y+="\r\n"}),y}function GO(f,y,b){e:{for(C in b){var C=!1;break e}C=!0}C||(b=iq(b),"string"==typeof f?null!=b&&encodeURIComponent(String(b)):Kn(f,y,b))}function br(f){Jr.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=n0.prototype).add=function(f,y){Eu(this),this.i=null,f=Pg(this,f);var b=this.g.get(f);return b||this.g.set(f,b=[]),b.push(y),this.h+=1,this},n.forEach=function(f,y){Eu(this),this.g.forEach(function(b,C){b.forEach(function(G){f.call(y,G,C,this)},this)},this)},n.na=function(){Eu(this);const f=Array.from(this.g.values()),y=Array.from(this.g.keys()),b=[];for(let C=0;C<y.length;C++){const G=f[C];for(let ne=0;ne<G.length;ne++)b.push(y[C])}return b},n.V=function(f){Eu(this);let y=[];if("string"==typeof f)tq(this,f)&&(y=y.concat(this.g.get(Pg(this,f))));else{f=Array.from(this.g.values());for(let b=0;b<f.length;b++)y=y.concat(f[b])}return y},n.set=function(f,y){return Eu(this),this.i=null,tq(this,f=Pg(this,f))&&(this.h-=this.g.get(f).length),this.g.set(f,[y]),this.h+=1,this},n.get=function(f,y){return f&&0<(f=this.V(f)).length?String(f[0]):y},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],y=Array.from(this.g.keys());for(var b=0;b<y.length;b++){var C=y[b];const ne=encodeURIComponent(String(C)),Oe=this.V(C);for(C=0;C<Oe.length;C++){var G=ne;""!==Oe[C]&&(G+="="+encodeURIComponent(String(Oe[C]))),f.push(G)}}return this.i=f.join("&")},I(r0,kO),r0.prototype.g=function(){return new Gw(this.l,this.j)},r0.prototype.i=function(f){return function(){return f}}({}),I(Gw,Jr),(n=Gw.prototype).open=function(f,y){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=y,this.readyState=1,s0(this)},n.send=function(f){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(y.body=f),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,o0(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,s0(this)),this.g&&(this.readyState=3,s0(this),this.g)))if("arraybuffer"===this.responseType)f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rq(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var y=f.value?f.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!f.done}))&&(this.response=this.responseText+=y)}f.done?o0(this):s0(this),3==this.readyState&&rq(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,o0(this))},n.Qa=function(f){this.g&&(this.response=f,o0(this))},n.ga=function(){this.g&&o0(this)},n.setRequestHeader=function(f,y){this.u.append(f,y)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],y=this.h.entries();for(var b=y.next();!b.done;)f.push((b=b.value)[0]+": "+b[1]),b=y.next();return f.join("\r\n")},Object.defineProperty(Gw.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(f){this.m=f?"include":"same-origin"}}),I(br,Jr);var Xve=/^https?$/i,e0e=["POST","PUT"];function oq(f,y){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=y,f.m=5,sq(f),zw(f)}function sq(f){f.A||(f.A=!0,li(f,"complete"),li(f,"error"))}function aq(f){if(f.h&&typeof s<"u"&&(!f.v[1]||4!=Qc(f)||2!=f.Z()))if(f.u&&4==Qc(f))RW(f.Ea,0,f);else if(li(f,"readystatechange"),4==Qc(f)){f.h=!1;try{const Oe=f.Z();e:switch(Oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var C;if(C=0===Oe){var G=String(f.D).match(JW)[1]||null;!G&&a.self&&a.self.location&&(G=a.self.location.protocol.slice(0,-1)),C=!Xve.test(G?G.toLowerCase():"")}b=C}if(b)li(f,"complete"),li(f,"success");else{f.m=6;try{var ne=2<Qc(f)?f.g.statusText:""}catch{ne=""}f.l=ne+" ["+f.Z()+"]",sq(f)}}finally{zw(f)}}}function zw(f,y){if(f.g){cq(f);const b=f.g,C=f.v[0]?()=>{}:null;f.g=null,f.v=null,y||li(f,"ready");try{b.onreadystatechange=C}catch{}}}function cq(f){f.I&&(a.clearTimeout(f.I),f.I=null)}function Qc(f){return f.g?f.g.readyState:0}function lq(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function a0(f,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[f]||y}function uq(f){this.Aa=0,this.i=[],this.j=new Zv,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=a0("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=a0("baseRetryDelayMs",5e3,f),this.cb=a0("retryDelaySeedMs",1e4,f),this.Wa=a0("forwardChannelMaxRetries",2,f),this.wa=a0("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new zW(f&&f.concurrentRequestLimit),this.Da=new Jve,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function zO(f){if(dq(f),3==f.G){var y=f.U++,b=Kc(f.I);if(Kn(b,"SID",f.K),Kn(b,"RID",y),Kn(b,"TYPE","terminate"),c0(f,b),(y=new vu(f,f.j,y)).L=2,y.v=$w(Kc(b)),b=!1,a.navigator&&a.navigator.sendBeacon)try{b=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!b&&a.Image&&((new Image).src=y.v,b=!0),b||(y.g=Eq(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Uw(y)}yq(f)}function Ww(f){f.g&&(qO(f),f.g.cancel(),f.g=null)}function dq(f){Ww(f),f.u&&(a.clearTimeout(f.u),f.u=null),Kw(f),f.h.cancel(),f.s&&("number"==typeof f.s&&a.clearTimeout(f.s),f.s=null)}function qw(f){if(!WW(f.h)&&!f.s){f.s=!0;var y=f.Ga;Ci||fh(),ja||(Ci(),ja=!0),oa.add(y,f),f.B=0}}function hq(f,y){var b;b=y?y.l:f.U++;const C=Kc(f.I);Kn(C,"SID",f.K),Kn(C,"RID",b),Kn(C,"AID",f.T),c0(f,C),f.m&&f.o&&GO(C,f.m,f.o),b=new vu(f,f.j,b,f.B+1),null===f.m&&(b.H=f.o),y&&(f.i=y.D.concat(f.i)),y=fq(f,b,1e3),b.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),$O(f.h,b),BO(b,C,y)}function c0(f,y){f.H&&we(f.H,function(b,C){Kn(y,C,b)}),f.l&&YW({},function(b,C){Kn(y,C,b)})}function fq(f,y,b){b=Math.min(f.i.length,b);var C=f.l?_(f.l.Na,f.l,f):null;e:{var G=f.i;let ne=-1;for(;;){const Oe=["count="+b];-1==ne?0<b?(ne=G[0].g,Oe.push("ofs="+ne)):ne=0:Oe.push("ofs="+ne);let Mn=!0;for(let Ai=0;Ai<b;Ai++){let sn=G[Ai].g;const Hi=G[Ai].map;if(sn-=ne,0>sn)ne=Math.max(0,G[Ai].g-100),Mn=!1;else try{Zve(Hi,Oe,"req"+sn+"_")}catch{C&&C(Hi)}}if(Mn){C=Oe.join("&");break e}}}return f=f.i.splice(0,b),y.D=f,C}function pq(f){if(!f.g&&!f.u){f.Y=1;var y=f.Fa;Ci||fh(),ja||(Ci(),ja=!0),oa.add(y,f),f.v=0}}function WO(f){return!(f.g||f.u||3<=f.v||(f.Y++,f.u=Jv(_(f.Fa,f),_q(f,f.v)),f.v++,0))}function qO(f){null!=f.A&&(a.clearTimeout(f.A),f.A=null)}function gq(f){f.g=new vu(f,f.j,"rpc",f.Y),null===f.m&&(f.g.H=f.o),f.g.O=0;var y=Kc(f.qa);Kn(y,"RID","rpc"),Kn(y,"SID",f.K),Kn(y,"AID",f.T),Kn(y,"CI",f.F?"0":"1"),!f.F&&f.ja&&Kn(y,"TO",f.ja),Kn(y,"TYPE","xmlhttp"),c0(f,y),f.m&&f.o&&GO(y,f.m,f.o),f.L&&(f.g.I=f.L);var b=f.g;f=f.ia,b.L=1,b.v=$w(Kc(y)),b.m=null,b.P=!0,HW(b,f)}function Kw(f){null!=f.C&&(a.clearTimeout(f.C),f.C=null)}function mq(f,y){var b=null;if(f.g==y){Kw(f),qO(f),f.g=null;var C=2}else{if(!HO(f.h,y))return;b=y.D,KW(f.h,y),C=1}if(0!=f.G)if(y.o)if(1==C){b=y.m?y.m.length:0,y=Date.now()-y.F;var G=f.B;li(C=Lw(),new VW(C,b)),qw(f)}else pq(f);else if(3==(G=y.s)||0==G&&0<y.X||!(1==C&&function n0e(f,y){return!(qW(f.h)>=f.h.j-(f.s?1:0)||(f.s?(f.i=y.D.concat(f.i),0):1==f.G||2==f.G||f.B>=(f.Va?0:f.Wa)||(f.s=Jv(_(f.Ga,f,y),_q(f,f.B)),f.B++,0)))}(f,y)||2==C&&WO(f)))switch(b&&0<b.length&&(y=f.h,y.i=y.i.concat(b)),G){case 1:vh(f,5);break;case 4:vh(f,10);break;case 3:vh(f,6);break;default:vh(f,2)}}function _q(f,y){let b=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(b*=2),b*y}function vh(f,y){if(f.j.info("Error code "+y),2==y){var b=_(f.fb,f),C=f.Xa;const G=!C;C=new yh(C||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||jw(C,"https"),$w(C),G?function Qve(f,y){const b=new Zv;if(a.Image){const C=new Image;C.onload=v(bu,b,"TestLoadImage: loaded",!0,y,C),C.onerror=v(bu,b,"TestLoadImage: error",!1,y,C),C.onabort=v(bu,b,"TestLoadImage: abort",!1,y,C),C.ontimeout=v(bu,b,"TestLoadImage: timeout",!1,y,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=f}else y(!1)}(C.toString(),b):function Yve(f,y){new Zv;const C=new AbortController,G=setTimeout(()=>{C.abort(),bu(0,0,!1,y)},1e4);fetch(f,{signal:C.signal}).then(ne=>{clearTimeout(G),bu(0,0,!!ne.ok,y)}).catch(()=>{clearTimeout(G),bu(0,0,!1,y)})}(C.toString(),b)}else go(2);f.G=0,f.l&&f.l.sa(y),yq(f),dq(f)}function yq(f){if(f.G=0,f.ka=[],f.l){const y=QW(f.h);(0!=y.length||0!=f.i.length)&&(A(f.ka,y),A(f.ka,f.i),f.h.i.length=0,D(f.i),f.i.length=0),f.l.ra()}}function vq(f,y,b){var C=b instanceof yh?Kc(b):new yh(b);if(""!=C.g)y&&(C.g=y+"."+C.g),Hw(C,C.s);else{var G=a.location;C=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;var ne=new yh(null);C&&jw(ne,C),y&&(ne.g=y),G&&Hw(ne,G),b&&(ne.l=b),C=ne}return y=f.ya,(b=f.D)&&y&&Kn(C,b,y),Kn(C,"VER",f.la),c0(f,C),C}function Eq(f,y,b){if(y&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return(y=new br(f.Ca&&!f.pa?new r0({eb:b}):f.pa)).Ha(f.J),y}function bq(){}function Qw(){}function os(f,y){Jr.call(this),this.g=new uq(y),this.l=f,this.h=y&&y.messageUrlParams||null,f=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(f?f["X-WebChannel-Content-Type"]=y.messageContentType:f={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(f?f["X-WebChannel-Client-Profile"]=y.va:f={"X-WebChannel-Client-Profile":y.va}),this.g.S=f,(f=y&&y.Sb)&&!P(f)&&(this.g.m=f),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!P(y)&&(this.g.D=y,null!==(f=this.h)&&y in f&&y in(f=this.h)&&delete f[y]),this.j=new Og(this)}function Iq(f){xO.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var y=f.__sm__;if(y){e:{for(const b in y){f=b;break e}f=void 0}(this.i=f)&&(f=this.i,y=null!==y&&f in y?y[f]:void 0),this.data=y}else this.data=f}function Tq(){FO.call(this),this.status=1}function Og(f){this.g=f}(n=br.prototype).Ha=function(f){this.J=f},n.ea=function(f,y,b,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);y=y?y.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():LO.g(),this.v=function OW(f){return f.h||(f.h=f.i())}(this.o?this.o:LO),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(y,String(f),!0),this.B=!1}catch(ne){return void oq(this,ne)}if(f=b||"",b=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var G in C)b.set(G,C[G]);else{if("function"!=typeof C.keys||"function"!=typeof C.get)throw Error("Unknown input type for opt_headers: "+String(C));for(const ne of C.keys())b.set(ne,C.get(ne))}C=Array.from(b.keys()).find(ne=>"content-type"==ne.toLowerCase()),G=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(e0e,y,void 0))||C||G||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,Oe]of b)this.g.setRequestHeader(ne,Oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cq(this),this.u=!0,this.g.send(f),this.u=!1}catch(ne){oq(this,ne)}},n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,li(this,"complete"),li(this,"abort"),zw(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zw(this,!0)),br.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?aq(this):this.bb())},n.bb=function(){aq(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Qc(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var y=this.g.responseText;return f&&0==y.indexOf(f)&&(y=y.substring(f.length)),Pve(y)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=uq.prototype).la=8,n.G=1,n.connect=function(f,y,b,C){go(0),this.W=f,this.H=y||{},b&&void 0!==C&&(this.H.OSID=b,this.H.OAID=C),this.F=this.X,this.I=vq(this,null,this.W),qw(this)},n.Ga=function(f){if(this.s)if(this.s=null,1==this.G){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const G=new vu(this,this.j,f);let ne=this.o;if(this.S&&(ne?(ne=S(ne),U(ne,this.S)):ne=this.S),null!==this.m||this.O||(G.H=ne,ne=null),this.P)e:{for(var y=0,b=0;b<this.i.length;b++){var C=this.i[b];if(void 0===(C="__data__"in C.map&&"string"==typeof(C=C.map.__data__)?C.length:void 0))break;if(4096<(y+=C)){y=b;break e}if(4096===y||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=fq(this,G,y),Kn(b=Kc(this.I),"RID",f),Kn(b,"CVER",22),this.D&&Kn(b,"X-HTTP-Session-Id",this.D),c0(this,b),ne&&(this.O?y="headers="+encodeURIComponent(String(iq(ne)))+"&"+y:this.m&&GO(b,this.m,ne)),$O(this.h,G),this.Ua&&Kn(b,"TYPE","init"),this.P?(Kn(b,"$req",y),Kn(b,"SID","null"),G.T=!0,BO(G,b,null)):BO(G,b,y),this.G=2}}else 3==this.G&&(f?hq(this,f):0==this.i.length||WW(this.h)||hq(this))},n.Fa=function(){if(this.u=null,gq(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Jv(_(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,go(10),Ww(this),gq(this))},n.Za=function(){null!=this.C&&(this.C=null,Ww(this),WO(this),go(19))},n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),go(2)):(this.j.info("Failed to ping google.com"),go(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=bq.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},Qw.prototype.g=function(f,y){return new os(f,y)},I(os,Jr),os.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},os.prototype.close=function(){zO(this.g)},os.prototype.o=function(f){var y=this.g;if("string"==typeof f){var b={};b.__data__=f,f=b}else this.u&&((b={}).__data__=OO(f),f=b);y.i.push(new Bve(y.Ya++,f)),3==y.G&&qw(y)},os.prototype.N=function(){this.g.l=null,delete this.j,zO(this.g),delete this.g,os.aa.N.call(this)},I(Iq,xO),I(Tq,FO),I(Og,bq),Og.prototype.ua=function(){li(this.g,"a")},Og.prototype.ta=function(f){li(this.g,new Iq(f))},Og.prototype.sa=function(f){li(this.g,new Tq)},Og.prototype.ra=function(){li(this.g,"b")},Qw.prototype.createWebChannel=Qw.prototype.g,os.prototype.send=os.prototype.o,os.prototype.open=os.prototype.m,os.prototype.close=os.prototype.close,c$=Fc.createWebChannelTransport=function(){return new Qw},a$=Fc.getStatEventTarget=function(){return Lw()},s$=Fc.Event=mh,RR=Fc.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vw.NO_ERROR=0,Vw.TIMEOUT=8,Vw.HTTP_ERROR=6,VI=Fc.ErrorCode=Vw,BW.COMPLETE="complete",o$=Fc.EventType=BW,kW.EventType=Qv,Qv.OPEN="a",Qv.CLOSE="b",Qv.ERROR="c",Qv.MESSAGE="d",Jr.prototype.listen=Jr.prototype.K,Ay=Fc.WebChannel=kW,Fc.FetchXmlHttpFactory=r0,br.prototype.listenOnce=br.prototype.L,br.prototype.getLastError=br.prototype.Ka,br.prototype.getLastErrorCode=br.prototype.Ba,br.prototype.getStatus=br.prototype.Z,br.prototype.getResponseJson=br.prototype.Oa,br.prototype.getResponseText=br.prototype.oa,br.prototype.send=br.prototype.ea,br.prototype.setWithCredentials=br.prototype.Ha,i$=Fc.XhrIo=br}).apply(typeof LI<"u"?LI:typeof self<"u"?self:typeof window<"u"?window:{});const l$="@firebase/firestore";class si{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}si.UNAUTHENTICATED=new si(null),si.GOOGLE_CREDENTIALS=new si("google-credentials-uid"),si.FIRST_PARTY=new si("first-party-uid"),si.MOCK_USER=new si("mock-user");let Dp="11.7.0";const jl=new ea.Vy("@firebase/firestore");function Cp(){return jl.logLevel}function ve(n,...e){if(jl.logLevel<=ea.$b.DEBUG){const t=e.map(NR);jl.debug(`Firestore (${Dp}): ${n}`,...t)}}function Rr(n,...e){if(jl.logLevel<=ea.$b.ERROR){const t=e.map(NR);jl.error(`Firestore (${Dp}): ${n}`,...t)}}function Jo(n,...e){if(jl.logLevel<=ea.$b.WARN){const t=e.map(NR);jl.warn(`Firestore (${Dp}): ${n}`,...t)}}function NR(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ue(n,e,t){let r="Unexpected state";"string"==typeof e?r=e:t=e,d$(n,r,t)}function d$(n,e,t){let r=`FIRESTORE (${Dp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(void 0!==t)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Rr(r),new Error(r)}function We(n,e,t,r){let i="Unexpected state";"string"==typeof t?i=t:r=t,n||d$(e,i,r)}function Ne(n,e){return n}const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends Ct.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ai{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class h${constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ice{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(si.UNAUTHENTICATED))}shutdown(){}}class Tce{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class wce{constructor(e){this.t=e,this.currentUser=si.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;We(void 0===this.o,42304);let i=this.i;const o=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve();let s=new ai;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ai,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable((0,T.A)(function*(){yield u.promise,yield o(r.currentUser)}))},c=u=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ai)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(We("string"==typeof r.accessToken,31837,{l:r}),new h$(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(null===e||"string"==typeof e,2055,{h:e}),new si(e)}}class Dce{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=si.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Cce{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Dce(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(si.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class MR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ace{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,ws._isFirebaseServerApp)(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){We(void 0===this.o,3512);const r=o=>{null!=o.error&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,ve("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new MR(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(We("string"==typeof t.token,44558,{tokenResult:t}),this.m=t.token,new MR(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Sce(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function PR(){return new TextEncoder}class f${static newId(){const t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Sce(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function lt(n,e){return n<e?-1:n>e?1:0}function OR(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return lt(r,i);{const o=PR(),s=Rce(o.encode(p$(n,t)),o.encode(p$(e,t)));return 0!==s?s:lt(r,i)}}t+=r>65535?2:1}return lt(n.length,e.length)}function p$(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Rce(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return lt(n[t],e[t]);return lt(n.length,e.length)}function Ap(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function g$(n){return n+"\0"}const m$=-62135596800;class nr{static now(){return nr.fromMillis(Date.now())}static fromDate(e){return nr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new nr(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<m$)throw new _e(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds-m$).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class et{static fromTimestamp(e){return new et(e)}static min(){return new et(new nr(0,0))}static max(){return new et(new nr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const kR="__name__";class Na{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ue(637,{offset:t,range:e.length}),void 0===r?r=e.length-t:r>e.length-t&&Ue(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Na.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Na?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=Na.compareSegments(e.get(i),t.get(i));if(0!==o)return o}return lt(e.length,t.length)}static compareSegments(e,t){const r=Na.isNumericId(e),i=Na.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Na.extractNumericId(e).compare(Na.extractNumericId(t)):OR(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ul.fromString(e.substring(4,e.length-2))}}class Bt extends Na{construct(e,t,r){return new Bt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new _e(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Bt(t)}static emptyPath(){return new Bt([])}}const Nce=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zn extends Na{construct(e,t,r){return new zn(e,t,r)}static isValidIdentifier(e){return Nce.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===kR}static keyField(){return new zn([kR])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new _e(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new _e(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new _e(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new _e(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zn(t)}static emptyPath(){return new zn([])}}class ke{constructor(e){this.path=e}static fromPath(e){return new ke(Bt.fromString(e))}static fromName(e){return new ke(Bt.fromString(e).popFirst(5))}static empty(){return new ke(Bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Bt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Bt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new Bt(e.slice()))}}class Rp{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function xR(n){return n.fields.find(e=>2===e.kind)}function Nd(n){return n.fields.filter(e=>2!==e.kind)}Rp.UNKNOWN_ID=-1;class Md{constructor(e,t){this.fieldPath=e,this.kind=t}}class Np{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Np(0,Zo.min())}}function y$(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=et.fromTimestamp(1e9===r?new nr(t+1,0):new nr(t,r));return new Zo(i,ke.empty(),e)}function v$(n){return new Zo(n.readTime,n.key,-1)}class Zo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Zo(et.min(),ke.empty(),-1)}static max(){return new Zo(et.max(),ke.empty(),-1)}}function FR(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ke.comparator(n.documentKey,e.documentKey),0!==t?t:lt(n.largestBatchId,e.largestBatchId))}const E$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class b${constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Hl(n){return LR.apply(this,arguments)}function LR(){return(LR=(0,T.A)(function*(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==E$)throw n;ve("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new z((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof z?t:z.resolve(t)}catch(t){return z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):z.reject(t)}static resolve(e){return new z((t,r)=>{t(e)})}static reject(e){return new z((t,r)=>{r(e)})}static waitFor(e){return new z((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=z.resolve(!1);for(const r of e)t=t.next(i=>i?z.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new z((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let c=0;c<o;c++){const u=c;t(e[u]).next(h=>{s[u]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new z((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}const Xo="SimpleDb";class BI{static open(e,t,r,i){try{return new BI(t,e.transaction(i,r))}catch(o){throw new Sy(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new ai,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Sy(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=VR(r.target.error);this.S.reject(new Sy(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ve(Xo,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new kce(t)}}class Ma{static delete(e){return ve(Xo,"Removing database:",e),Pd((0,Ct.mS)().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ct.zW)())return!1;if(Ma.F())return!0;const e=(0,Ct.ZQ)(),t=Ma.M(e),r=0<t&&t<10,i=I$(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.O)}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,12.2===Ma.M((0,Ct.ZQ)())&&Rr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}k(e){var t=this;return(0,T.A)(function*(){return t.db||(ve(Xo,"Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=s=>{r(s.target.result)},o.onblocked=()=>{i(new Sy(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;i("VersionError"===a.name?new _e(Z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new _e(Z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Sy(e,a))},o.onupgradeneeded=s=>{ve(Xo,'Database "'+t.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;if(null!==t.L&&t.L!==s.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${t.L}, event.oldVersion=${s.oldVersion}, event.newVersion=${s.newVersion}, db.version=${a.version}`);t.B.q(a,o.transaction,s.oldVersion,t.version).next(()=>{ve(Xo,"Database upgrade to version "+t.version+" complete")})}}),t.db.addEventListener("close",r=>{t.L=r.target.version},{passive:!0})),t.$&&(t.db.onversionchange=r=>t.$(r)),t.db})()}U(e){this.$=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,T.A)(function*(){const s="readonly"===t;let a=0;for(;;){++a;try{o.db=yield o.k(e);const c=BI.open(o.db,e,s?"readonly":"readwrite",r),u=i(c).next(h=>(c.v(),h)).catch(h=>(c.abort(h),z.reject(h))).toPromise();return u.catch(()=>{}),yield c.D,u}catch(c){const u=c,h="FirebaseError"!==u.name&&a<3;if(ve(Xo,"Transaction failed with error:",u.message,"Retrying:",h),o.close(),!h)return Promise.reject(u)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function I$(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class Oce{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return Pd(this.K.delete())}}class Sy extends _e{constructor(e,t){super(Z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function $l(n){return"IndexedDbTransactionError"===n.name}class kce{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ve(Xo,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ve(Xo,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Pd(r)}add(e){return ve(Xo,"ADD",this.store.name,e,e),Pd(this.store.add(e))}get(e){return Pd(this.store.get(e)).next(t=>(void 0===t&&(t=null),ve(Xo,"GET",this.store.name,e,t),t))}delete(e){return ve(Xo,"DELETE",this.store.name,e),Pd(this.store.delete(e))}count(){return ve(Xo,"COUNT",this.store.name),Pd(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const o=i.getAll(r.range);return new z((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{const o=this.cursor(r),s=[];return this.Y(o,(a,c)=>{s.push(c)}).next(()=>s)}}Z(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new z((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}X(e,t){ve(Xo,"DELETE ALL",this.store.name);const r=this.options(e,t);r.ee=!1;const i=this.cursor(r);return this.Y(i,(o,s,a)=>a.delete())}te(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Y(i,t)}ne(e){const t=this.cursor({});return new z((r,i)=>{t.onerror=o=>{const s=VR(o.target.error);i(s)},t.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}Y(e,t){const r=[];return new z((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const c=new Oce(a),u=t(a.primaryKey,a.value,c);if(u instanceof z){const h=u.catch(m=>(c.done(),z.reject(m)));r.push(h)}c.isDone?i():null===c.j?a.continue():a.continue(c.j)}}).next(()=>z.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.ee?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Pd(n){return new z((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=VR(r.target.error);t(i)}})}let T$=!1;function VR(n){const e=Ma.M((0,Ct.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new _e("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return T$||(T$=!0,setTimeout(()=>{throw r},0)),r}}return n}const Ry="IndexBackfiller";class xce{constructor(e,t){this.asyncQueue=e,this.re=t,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ie(e){var t=this;ve(Ry,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,T.A)(function*(){t.task=null;try{const r=yield t.re.se();ve(Ry,`Documents written: ${r}`)}catch(r){$l(r)?ve(Ry,"Ignoring IndexedDB error during index backfill: ",r):yield Hl(r)}yield t.ie(6e4)}))}}class Fce{constructor(e,t){this.localStore=e,this.persistence=t}se(){var e=this;return(0,T.A)(function*(t=50){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>e.oe(r,t))}).apply(this,arguments)}oe(e,t){const r=new Set;let i=t,o=!0;return z.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(null!==s&&!r.has(s))return ve(Ry,`Processing collection: ${s}`),this._e(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}_e(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ae(i,o)).next(a=>(ve(Ry,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}ae(e,t){let r=e;return t.changes.forEach((i,o)=>{const s=v$(o);FR(s,r)>0&&(r=s)}),new Zo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let es=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}return n.le=-1,n})();function Ny(n){return null==n}function My(n){return 0===n&&1/n==-1/0}function w$(n){return"number"==typeof n&&Number.isInteger(n)&&!My(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Vi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=D$(e)),e=Lce(n.get(t),e);return D$(e)}function Lce(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function D$(n){return n+"\x01\x01"}function Pa(n){const e=n.length;if(We(e>=2,64408,{path:n}),2===e)return We("\x01"===n.charAt(0)&&"\x01"===n.charAt(1),56145,{path:n}),Bt.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const s=n.indexOf("\x01",o);switch((s<0||s>t)&&Ue(50515,{path:n}),n.charAt(s+1)){case"\x01":const a=n.substring(o,s);let c;0===i.length?c=a:(i+=a,c=i,i=""),r.push(c);break;case"\x10":i+=n.substring(o,s),i+="\0";break;case"\x11":i+=n.substring(o,s+1);break;default:Ue(61167,{path:n})}o=s+2}return new Bt(r)}const Od="remoteDocuments",Py="owner",Mp="owner",Oy="mutationQueues",ta="mutations",C$="batchId",kd="userMutationsIndex",A$=["userId","batchId"];function jI(n,e){return[n,Vi(e)]}function S$(n,e,t){return[n,Vi(e),t]}const Bce={},Pp="documentMutations",HI="remoteDocumentsV14",Uce=["prefixPath","collectionGroup","readTime","documentId"],$I="documentKeyIndex",jce=["prefixPath","collectionGroup","documentId"],R$="collectionGroupIndex",Hce=["collectionGroup","readTime","prefixPath","documentId"],ky="remoteDocumentGlobal",BR="remoteDocumentGlobalKey",Op="targets",N$="queryTargetsIndex",$ce=["canonicalId","targetId"],kp="targetDocuments",Gce=["targetId","path"],UR="documentTargetsIndex",zce=["path","targetId"],GI="targetGlobalKey",xd="targetGlobal",xy="collectionParents",Wce=["collectionId","parent"],xp="clientMetadata",zI="bundles",WI="namedQueries",jR="indexConfiguration",HR="collectionGroupIndex",qI="indexState",Zce=["indexId","uid"],M$="sequenceNumberIndex",Xce=["uid","sequenceNumber"],KI="indexEntries",ele=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],P$="documentKeyIndex",tle=["indexId","uid","orderedDocumentKey"],QI="documentOverlays",nle=["userId","collectionPath","documentId"],$R="collectionPathOverlayIndex",rle=["userId","collectionPath","largestBatchId"],O$="collectionGroupOverlayIndex",ile=["userId","collectionGroup","largestBatchId"],GR="globals",k$=[Oy,ta,Pp,Od,Op,Py,xd,kp,xp,ky,xy,zI,WI],sle=[...k$,QI],x$=[Oy,ta,Pp,HI,Op,Py,xd,kp,xp,ky,xy,zI,WI,QI],F$=x$,zR=[...F$,jR,qI,KI],ale=zR,cle=[...zR,GR];class WR extends b${constructor(e,t){super(),this.he=e,this.currentSequenceNumber=t}}function Yr(n,e){const t=Ne(n);return Ma.N(t.he,e)}function L$(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function B$(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class jn{constructor(e,t){this.comparator=e,this.root=t||yi.EMPTY}insert(e,t){return new jn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yi.BLACK,null,null))}remove(e){return new jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new YI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new YI(this.root,e,this.comparator,!1)}getReverseIterator(){return new YI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new YI(this.root,e,this.comparator,!0)}}class YI{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yi{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??yi.RED,this.left=i??yi.EMPTY,this.right=o??yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new yi(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return yi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return yi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ue(27949);return e+(this.isRed()?0:1)}}yi.EMPTY=null,yi.RED=!0,yi.BLACK=!1,yi.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue(57766)}get value(){throw Ue(16141)}get color(){throw Ue(16727)}get left(){throw Ue(29726)}get right(){throw Ue(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new yi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mn{constructor(e){this.comparator=e,this.data=new jn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new U$(this.data.getIterator())}getIteratorFrom(e){return new U$(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new mn(this.comparator);return t.data=e,t}}class U${constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Fp(n){return n.hasNext()?n.getNext():void 0}class Mo{constructor(e){this.fields=e,e.sort(zn.comparator)}static empty(){return new Mo([])}unionWith(e){let t=new mn(zn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Mo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ap(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class j$ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Er{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new j$("Invalid base64 string: "+o):o}}(e);return new Er(t)}static fromUint8Array(e){const t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new Er(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Er.EMPTY_BYTE_STRING=new Er("");const ule=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lc(n){if(We(!!n,39018),"string"==typeof n){let e=0;const t=ule.exec(n);if(We(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rr(n.seconds),nanos:rr(n.nanos)}}function rr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Vc(n){return"string"==typeof n?Er.fromBase64String(n):Er.fromUint8Array(n)}const H$="server_timestamp",$$="__type__",G$="__previous_value__",z$="__local_write_time__";function JI(n){var e,t;return(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{})[$$])||void 0===t?void 0:t.stringValue)===H$}function ZI(n){const e=n.mapValue.fields[G$];return JI(e)?ZI(e):e}function Fy(n){const e=Lc(n.mapValue.fields[z$].timestampValue);return new nr(e.seconds,e.nanos)}class dle{constructor(e,t,r,i,o,s,a,c,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const Ly="(default)";class Wl{constructor(e,t){this.projectId=e,this.database=t||Ly}static empty(){return new Wl("","")}get isDefaultDatabase(){return this.database===Ly}isEqual(e){return e instanceof Wl&&e.projectId===this.projectId&&e.database===this.database}}const qR="__type__",W$="__max__",ql={mapValue:{fields:{__type__:{stringValue:W$}}}},KR="__vector__",Lp="value",XI={nullValue:"NULL_VALUE"};function Kl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?JI(n)?4:J$(n)?9007199254740991:nT(n)?10:11:Ue(28295,{value:n})}function Oa(n,e){if(n===e)return!0;const t=Kl(n);if(t!==Kl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Fy(n).isEqual(Fy(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Lc(i.timestampValue),a=Lc(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Vc(n.bytesValue).isEqual(Vc(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return rr(i.geoPointValue.latitude)===rr(o.geoPointValue.latitude)&&rr(i.geoPointValue.longitude)===rr(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return rr(i.integerValue)===rr(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=rr(i.doubleValue),a=rr(o.doubleValue);return s===a?My(s)===My(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Ap(n.arrayValue.values||[],e.arrayValue.values||[],Oa);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(L$(s)!==L$(a))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(void 0===a[c]||!Oa(s[c],a[c])))return!1;return!0}(n,e);default:return Ue(52216,{left:n})}var o}function Vy(n,e){return void 0!==(n.values||[]).find(t=>Oa(t,e))}function Ql(n,e){if(n===e)return 0;const t=Kl(n),r=Kl(e);if(t!==r)return lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return lt(n.booleanValue,e.booleanValue);case 2:return function(o,s){const a=rr(o.integerValue||o.doubleValue),c=rr(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return q$(n.timestampValue,e.timestampValue);case 4:return q$(Fy(n),Fy(e));case 5:return OR(n.stringValue,e.stringValue);case 6:return function(o,s){const a=Vc(o),c=Vc(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){const h=lt(a[u],c[u]);if(0!==h)return h}return lt(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){const a=lt(rr(o.latitude),rr(s.latitude));return 0!==a?a:lt(rr(o.longitude),rr(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return K$(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,h;const v=null===(a=(o.fields||{})[Lp])||void 0===a?void 0:a.arrayValue,I=null===(c=(s.fields||{})[Lp])||void 0===c?void 0:c.arrayValue,D=lt((null===(u=v?.values)||void 0===u?void 0:u.length)||0,(null===(h=I?.values)||void 0===h?void 0:h.length)||0);return 0!==D?D:K$(v,I)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===ql.mapValue&&s===ql.mapValue)return 0;if(o===ql.mapValue)return 1;if(s===ql.mapValue)return-1;const a=o.fields||{},c=Object.keys(a),u=s.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let m=0;m<c.length&&m<h.length;++m){const _=OR(c[m],h[m]);if(0!==_)return _;const v=Ql(a[c[m]],u[h[m]]);if(0!==v)return v}return lt(c.length,h.length)}(n.mapValue,e.mapValue);default:throw Ue(23264,{Pe:t})}}function q$(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return lt(n,e);const t=Lc(n),r=Lc(e),i=lt(t.seconds,r.seconds);return 0!==i?i:lt(t.nanos,r.nanos)}function K$(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=Ql(t[i],r[i]);if(o)return o}return lt(t.length,r.length)}function Vp(n){return QR(n)}function QR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Lc(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Vc(n.bytesValue).toBase64():"referenceValue"in n?ke.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=QR(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${QR(t.fields[s])}`;return i+"}"}(n.mapValue):Ue(61005,{value:n})}function eT(n){switch(Kl(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ZI(n);return e?16+eT(e):16;case 5:return 2*n.stringValue.length;case 6:return Vc(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(n.arrayValue.values||[]).reduce((i,o)=>i+eT(o),0);case 10:case 11:return function(r){let i=0;return zl(r.fields,(o,s)=>{i+=o.length+eT(s)}),i}(n.mapValue);default:throw Ue(13486,{value:n})}}function Fd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function YR(n){return!!n&&"integerValue"in n}function By(n){return!!n&&"arrayValue"in n}function Q$(n){return!!n&&"nullValue"in n}function Y$(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function tT(n){return!!n&&"mapValue"in n}function nT(n){var e,t;return(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{})[qR])||void 0===t?void 0:t.stringValue)===KR}function Uy(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return zl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Uy(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Uy(n.arrayValue.values[t]);return e}return Object.assign({},n)}function J$(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===W$}const Z$={mapValue:{fields:{[qR]:{stringValue:KR},[Lp]:{arrayValue:{}}}}};function hle(n){return"nullValue"in n?XI:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Fd(Wl.empty(),ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?nT(n)?Z$:{mapValue:{}}:Ue(35942,{value:n})}function fle(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Fd(Wl.empty(),ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?Z$:"mapValue"in n?nT(n)?{mapValue:{}}:ql:Ue(61959,{value:n})}function X$(n,e){const t=Ql(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function e3(n,e){const t=Ql(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class vi{constructor(e){this.value=e}static empty(){return new vi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!tT(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uy(t)}setAll(e){let t=zn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Uy(s):i.push(a.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());tT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Oa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];tT(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){zl(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new vi(Uy(this.value))}}function t3(n){const e=[];return zl(n.fields,(t,r)=>{const i=new zn([t]);if(tT(r)){const o=t3(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Mo(e)}class Wn{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Wn(e,0,et.min(),et.min(),et.min(),vi.empty(),0)}static newFoundDocument(e,t,r,i){return new Wn(e,1,t,et.min(),r,i,0)}static newNoDocument(e,t){return new Wn(e,2,t,et.min(),et.min(),vi.empty(),0)}static newUnknownDocument(e,t){return new Wn(e,3,t,et.min(),et.min(),vi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(et.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Yl{constructor(e,t){this.position=e,this.inclusive=t}}function n3(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],s=n.position[i];if(r=o.field.isKeyField()?ke.comparator(ke.fromName(s.referenceValue),t.key):Ql(s,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function r3(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Oa(n.position[t],e.position[t]))return!1;return!0}class jy{constructor(e,t="asc"){this.field=e,this.dir=t}}function ple(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class i3{}class Ut extends i3{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new gle(e,t,r):"array-contains"===t?new yle(e,r):"in"===t?new u3(e,r):"not-in"===t?new vle(e,r):"array-contains-any"===t?new Ele(e,r):new Ut(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new mle(e,r):new _le(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Ql(t,this.value)):null!==t&&Kl(this.value)===Kl(t)&&this.matchesComparison(Ql(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _n extends i3{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new _n(e,t)}matches(e){return Bp(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Te||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Bp(n){return"and"===n.op}function JR(n){return"or"===n.op}function ZR(n){return o3(n)&&Bp(n)}function o3(n){for(const e of n.filters)if(e instanceof _n)return!1;return!0}function XR(n){if(n instanceof Ut)return n.field.canonicalString()+n.op.toString()+Vp(n.value);if(ZR(n))return n.filters.map(e=>XR(e)).join(",");{const e=n.filters.map(t=>XR(t)).join(",");return`${n.op}(${e})`}}function s3(n,e){return n instanceof Ut?(r=n,(i=e)instanceof Ut&&r.op===i.op&&r.field.isEqual(i.field)&&Oa(r.value,i.value)):n instanceof _n?function(r,i){return i instanceof _n&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&s3(s,i.filters[a]),!0)}(n,e):void Ue(19439);var r,i}function a3(n,e){const t=n.filters.concat(e);return _n.create(t,n.op)}function c3(n){return n instanceof Ut?`${(t=n).field.canonicalString()} ${t.op} ${Vp(t.value)}`:n instanceof _n?function(t){return t.op.toString()+" {"+t.getFilters().map(c3).join(" ,")+"}"}(n):"Filter";var t}class gle extends Ut{constructor(e,t,r){super(e,t,r),this.key=ke.fromName(r.referenceValue)}matches(e){const t=ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class mle extends Ut{constructor(e,t){super(e,"in",t),this.keys=l3(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class _le extends Ut{constructor(e,t){super(e,"not-in",t),this.keys=l3(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function l3(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ke.fromName(r.referenceValue))}class yle extends Ut{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return By(t)&&Vy(t.arrayValue,this.value)}}class u3 extends Ut{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Vy(this.value.arrayValue,t)}}class vle extends Ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Vy(this.value.arrayValue,t)}}class Ele extends Ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!By(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Vy(this.value.arrayValue,r))}}class ble{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Ie=null}}function eN(n,e=null,t=[],r=[],i=null,o=null,s=null){return new ble(n,e,t,r,i,o,s)}function Ld(n){const e=Ne(n);if(null===e.Ie){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>XR(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Ny(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Vp(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Vp(r)).join(",")),e.Ie=t}return e.Ie}function Hy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ple(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!s3(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!r3(n.startAt,e.startAt)&&r3(n.endAt,e.endAt)}function rT(n){return ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function iT(n,e){return n.filters.filter(t=>t instanceof Ut&&t.field.isEqual(e))}function d3(n,e,t){let r=XI,i=!0;for(const o of iT(n,e)){let s=XI,a=!0;switch(o.op){case"<":case"<=":s=hle(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=XI}X$({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const s=t.position[o];X$({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}return{value:r,inclusive:i}}function h3(n,e,t){let r=ql,i=!0;for(const o of iT(n,e)){let s=ql,a=!0;switch(o.op){case">=":case">":s=fle(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=ql}e3({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const s=t.position[o];e3({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}return{value:r,inclusive:i}}class Bc{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null}}function f3(n,e,t,r,i,o,s,a){return new Bc(n,e,t,r,i,o,s,a)}function Up(n){return new Bc(n)}function p3(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function tN(n){return null!==n.collectionGroup}function jp(n){const e=Ne(n);if(null===e.Ee){e.Ee=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ee.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new mn(zn.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new jy(o,r))}),t.has(zn.keyField().canonicalString())||e.Ee.push(new jy(zn.keyField(),r))}return e.Ee}function Bi(n){const e=Ne(n);return e.de||(e.de=function m3(n,e){if("F"===n.limitType)return eN(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new jy(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new Yl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Yl(n.startAt.position,n.startAt.inclusive):null;return eN(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,jp(n))),e.de}function nN(n,e){const t=n.filters.concat([e]);return new Bc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function oT(n,e,t){return new Bc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $y(n,e){return Hy(Bi(n),Bi(e))&&n.limitType===e.limitType}function _3(n){return`${Ld(Bi(n))}|lt:${n.limitType}`}function Hp(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>c3(i)).join(", ")}]`),Ny(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Vp(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Vp(i)).join(",")),`Target(${r})`}(Bi(n))}; limitType=${n.limitType})`}function Gy(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ke.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of jp(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(s,a,c){const u=n3(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,jp(r),i)||r.endAt&&!function(s,a,c){const u=n3(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,jp(r),i)));var r,i}function y3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function v3(n){return(e,t)=>{let r=!1;for(const i of jp(n)){const o=Ile(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function Ile(n,e,t){const r=n.field.isKeyField()?ke.comparator(e.key,t.key):function(o,s,a){const c=s.data.field(o),u=a.data.field(o);return null!==c&&null!==u?Ql(c,u):Ue(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ue(19790,{direction:n.dir})}}class Uc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zl(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return B$(this.inner)}size(){return this.innerSize}}const Tle=new jn(ke.comparator);function Po(){return Tle}const E3=new jn(ke.comparator);function zy(...n){let e=E3;for(const t of n)e=e.insert(t.key,t);return e}function b3(n){let e=E3;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ka(){return Wy()}function I3(){return Wy()}function Wy(){return new Uc(n=>n.toString(),(n,e)=>n.isEqual(e))}const wle=new jn(ke.comparator),Dle=new mn(ke.comparator);function wt(...n){let e=Dle;for(const t of n)e=e.add(t);return e}const Cle=new mn(lt);function rN(){return Cle}function iN(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:My(e)?"-0":e}}function T3(n){return{integerValue:""+n}}function w3(n,e){return w$(e)?T3(e):iN(n,e)}class sT{constructor(){this._=void 0}}function Ale(n,e,t){return n instanceof $p?function(i,o){const s={fields:{[$$]:{stringValue:H$},[z$]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&JI(o)&&(o=ZI(o)),o&&(s.fields[G$]=o),{mapValue:s}}(t,e):n instanceof Vd?C3(n,e):n instanceof Bd?A3(n,e):function(i,o){const s=D3(i,o),a=S3(s)+S3(i.Re);return YR(s)&&YR(i.Re)?T3(a):iN(i.serializer,a)}(n,e)}function Sle(n,e,t){return n instanceof Vd?C3(n,e):n instanceof Bd?A3(n,e):t}function D3(n,e){return n instanceof Gp?YR(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class $p extends sT{}class Vd extends sT{constructor(e){super(),this.elements=e}}function C3(n,e){const t=R3(e);for(const r of n.elements)t.some(i=>Oa(i,r))||t.push(r);return{arrayValue:{values:t}}}class Bd extends sT{constructor(e){super(),this.elements=e}}function A3(n,e){let t=R3(e);for(const r of n.elements)t=t.filter(i=>!Oa(i,r));return{arrayValue:{values:t}}}class Gp extends sT{constructor(e,t){super(),this.serializer=e,this.Re=t}}function S3(n){return rr(n.integerValue||n.doubleValue)}function R3(n){return By(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class qy{constructor(e,t){this.field=e,this.transform=t}}class Nle{constructor(e,t){this.version=e,this.transformResults=t}}class ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function aT(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class cT{}function N3(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Wp(n.key,ir.none()):new zp(n.key,n.data,ir.none());{const t=n.data,r=vi.empty();let i=new mn(zn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);null===s&&o.length>1&&(o=o.popLast(),s=t.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new jc(n.key,r,new Mo(i.toArray()),ir.none())}}function Mle(n,e,t){n instanceof zp?function(i,o,s){const a=i.value.clone(),c=O3(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof jc?function(i,o,s){if(!aT(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=O3(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(P3(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ky(n,e,t,r){return n instanceof zp?function(o,s,a,c){if(!aT(o.precondition,s))return a;const u=o.value.clone(),h=k3(o.fieldTransforms,c,s);return u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof jc?function(o,s,a,c){if(!aT(o.precondition,s))return a;const u=k3(o.fieldTransforms,c,s),h=s.data;return h.setAll(P3(o)),h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,aT(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function Ple(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=D3(r.transform,i||null);null!=o&&(null===t&&(t=vi.empty()),t.set(r.field,o))}return t||null}function M3(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Ap(r,i,(o,s)=>function Rle(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Vd&&i instanceof Vd||r instanceof Bd&&i instanceof Bd?Ap(r.elements,i.elements,Oa):r instanceof Gp&&i instanceof Gp?Oa(r.Re,i.Re):r instanceof $p&&i instanceof $p);var r,i}(o,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class zp extends cT{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class jc extends cT{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function P3(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function O3(n,e,t){const r=new Map;We(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){const o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Sle(s,a,t[i]))}return r}function k3(n,e,t){const r=new Map;for(const i of n){const o=i.transform,s=t.data.field(i.field);r.set(i.field,Ale(o,s,e))}return r}class Wp extends cT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oN extends cT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class sN{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Mle(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ky(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ky(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=I3();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;const c=N3(s,a);null!==c&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(et.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),wt())}isEqual(e){return this.batchId===e.batchId&&Ap(this.mutations,e.mutations,(t,r)=>M3(t,r))&&Ap(this.baseMutations,e.baseMutations,(t,r)=>M3(t,r))}}class aN{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){We(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return wle}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new aN(e,t,r,i)}}class cN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ole{constructor(e,t){this.count=e,this.unchangedNames=t}}var Hr,Jt;function F3(n){switch(n){case Z.OK:return Ue(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Ue(15467,{code:n})}}function L3(n){if(void 0===n)return Rr("GRPC error has no .code"),Z.UNKNOWN;switch(n){case Hr.OK:return Z.OK;case Hr.CANCELLED:return Z.CANCELLED;case Hr.UNKNOWN:return Z.UNKNOWN;case Hr.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Hr.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Hr.INTERNAL:return Z.INTERNAL;case Hr.UNAVAILABLE:return Z.UNAVAILABLE;case Hr.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Hr.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Hr.NOT_FOUND:return Z.NOT_FOUND;case Hr.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Hr.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Hr.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Hr.ABORTED:return Z.ABORTED;case Hr.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Hr.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Hr.DATA_LOSS:return Z.DATA_LOSS;default:return Ue(39323,{code:n})}}(Jt=Hr||(Hr={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";const kle=new Ul([4294967295,4294967295],0);function V3(n){const e=PR().encode(n),t=new r$;return t.update(e),new Uint8Array(t.digest())}function B3(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ul([t,r],0),new Ul([i,o],0)]}class lN{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Qy(`Invalid padding: ${t}`);if(r<0)throw new Qy(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Qy(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Qy(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Ul.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(Ul.fromNumber(r)));return 1===i.compare(kle)&&(i=new Ul([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.pe)return!1;const t=V3(e),[r,i]=B3(t);for(let o=0;o<this.hashCount;o++){const s=this.we(r,i,o);if(!this.be(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new lN(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.pe)return;const t=V3(e),[r,i]=B3(t);for(let o=0;o<this.hashCount;o++){const s=this.we(r,i,o);this.Se(s)}}Se(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Qy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Yy{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Jy.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Yy(et.min(),i,new jn(lt),Po(),wt())}}class Jy{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Jy(r,t,wt(),wt(),wt())}}class uT{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}}class U3{constructor(e,t){this.targetId=e,this.Ce=t}}class j3{constructor(e,t,r=Er.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class H3{constructor(){this.Fe=0,this.Me=$3(),this.xe=Er.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return 0!==this.Fe}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=wt(),t=wt(),r=wt();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ue(38017,{changeType:o})}}),new Jy(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=$3()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,We(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class xle{constructor(e){this.ze=e,this.je=new Map,this.He=Po(),this.Je=dT(),this.Ye=dT(),this.Ze=new jn(lt)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:Ue(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){const o=i.target;if(rT(o))if(0===r){const s=new ke(o.path);this.tt(t,s,Wn.newNoDocument(s,et.min()))}else We(1===r,20013,{expectedCount:r});else{const s=this.ut(t);if(s!==r){const a=this.ct(e),c=a?this.lt(a,e,s):1;0!==c&&(this.st(t),this.Ze=this.Ze.insert(t,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let s,a;try{s=Vc(r).toUint8Array()}catch(c){if(c instanceof j$)return Jo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new lN(s,i,o)}catch(c){return Jo(c instanceof Qy?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.pe?null:a}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const s=this.ze.Pt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.tt(t,o,null),i++)}),i}It(e){const t=new Map;this.je.forEach((o,s)=>{const a=this._t(s);if(a){if(o.current&&rT(a.target)){const c=new ke(a.target.path);this.Et(c).has(s)||this.dt(s,c)||this.tt(s,c,Wn.newNoDocument(c,e))}o.Le&&(t.set(s,o.qe()),o.Qe())}});let r=wt();this.Ye.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{const u=this._t(c);return!u||"TargetPurposeLimboResolution"===u.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.He.forEach((o,s)=>s.setReadTime(e));const i=new Yy(e,t,this.Ze,this.He,r);return this.He=Po(),this.Je=dT(),this.Ye=dT(),this.Ze=new jn(lt),i}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new H3,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new mn(lt),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new mn(lt),this.Je=this.Je.insert(e,t)),t}it(e){const t=null!==this._t(e);return t||ve("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new H3),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function dT(){return new jn(ke.comparator)}function $3(){return new jn(ke.comparator)}const Fle={asc:"ASCENDING",desc:"DESCENDING"},Lle={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vle={and:"AND",or:"OR"};class Ble{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function uN(n,e){return n.useProto3Json||Ny(e)?e:{value:e}}function qp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function G3(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Ule(n,e){return qp(n,e.toTimestamp())}function Nr(n){return We(!!n,49232),et.fromTimestamp(function(t){const r=Lc(t);return new nr(r.seconds,r.nanos)}(n))}function dN(n,e){return hN(n,e).canonicalString()}function hN(n,e){const t=(i=n,new Bt(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function z3(n){const e=Bt.fromString(n);return We(n4(e),10190,{key:e.toString()}),e}function Zy(n,e){return dN(n.databaseId,e.path)}function xa(n,e){const t=z3(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ke(K3(t))}function W3(n,e){return dN(n.databaseId,e)}function q3(n){const e=z3(n);return 4===e.length?Bt.emptyPath():K3(e)}function fN(n){return new Bt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function K3(n){return We(n.length>4&&"documents"===n.get(4),29091,{key:n.toString()}),n.popFirst(5)}function Q3(n,e,t){return{name:Zy(n,e),fields:t.value.mapValue.fields}}function Y3(n,e,t){const r=xa(n,e.name),i=Nr(e.updateTime),o=e.createTime?Nr(e.createTime):et.min(),s=new vi({mapValue:{fields:e.fields}}),a=Wn.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Xy(n,e){let t;if(e instanceof zp)t={update:Q3(n,e.key,e.value)};else if(e instanceof Wp)t={delete:Zy(n,e.key)};else if(e instanceof jc)t={update:Q3(n,e.key,e.data),updateMask:Kle(e.fieldMask)};else{if(!(e instanceof oN))return Ue(16599,{ft:e.type});t={verify:Zy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof $p)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Vd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Bd)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Gp)return{fieldPath:s.field.canonicalString(),increment:a.Re};throw Ue(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Ule(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Ue(27497)),t;var o}function pN(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?ir.updateTime(Nr(o.updateTime)):void 0!==o.exists?ir.exists(o.exists):ir.none():ir.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;"setToServerValue"in a?(We("REQUEST_TIME"===a.setToServerValue,16630,{proto:a}),c=new $p):"appendMissingElements"in a?c=new Vd(a.appendMissingElements.values||[]):"removeAllFromArray"in a?c=new Bd(a.removeAllFromArray.values||[]):"increment"in a?c=new Gp(s,a.increment):Ue(16584,{proto:a});const u=zn.fromServerFormat(a.fieldPath);return new qy(u,c)}(n,i)):[];var o;if(e.update){const i=xa(n,e.update.name),o=new vi({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=new Mo((e.updateMask.fieldPaths||[]).map(h=>zn.fromServerFormat(h)));return new jc(i,o,s,t,r)}return new zp(i,o,t,r)}if(e.delete){const i=xa(n,e.delete);return new Wp(i,t)}if(e.verify){const i=xa(n,e.verify);return new oN(i,t)}return Ue(1463,{proto:e})}function J3(n,e){return{documents:[W3(n,e.path)]}}function hT(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=W3(n,i);const o=function(u){if(0!==u.length)return t4(_n.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const s=function(u){if(0!==u.length)return u.map(h=>{return{field:Jl((_=h).field),direction:zle(_.dir)};var _})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const a=uN(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{gt:t,parent:i};var u}function X3(n){let e=q3(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){We(1===r,65062);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(m){const _=e4(m);return _ instanceof _n&&ZR(_)?_.getFilters():[_]}(t.where));let s=[];t.orderBy&&(s=t.orderBy.map(_=>{return new jy(Kp((I=_).field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction));var I}));let a=null;t.limit&&(a=function(m){let _;return _="object"==typeof m?m.value:m,Ny(_)?null:_}(t.limit));let c=null;var m;t.startAt&&(c=new Yl((m=t.startAt).values||[],!!m.before));let u=null;return t.endAt&&(u=function(m){return new Yl(m.values||[],!m.before)}(t.endAt)),f3(e,i,s,o,a,"F",c,u)}function e4(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Kp(t.unaryFilter.field);return Ut.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Kp(t.unaryFilter.field);return Ut.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Kp(t.unaryFilter.field);return Ut.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Kp(t.unaryFilter.field);return Ut.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ue(61313);default:return Ue(60726)}}(n):void 0!==n.fieldFilter?Ut.create(Kp((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ue(58110);default:return Ue(50506)}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return _n.create(t.compositeFilter.filters.map(r=>e4(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ue(1026)}}(t.compositeFilter.op))}(n):Ue(30097,{filter:n});var t}function zle(n){return Fle[n]}function Wle(n){return Lle[n]}function qle(n){return Vle[n]}function Jl(n){return{fieldPath:n.canonicalString()}}function Kp(n){return zn.fromServerFormat(n.fieldPath)}function t4(n){return n instanceof Ut?function(t){if("=="===t.op){if(Y$(t.value))return{unaryFilter:{field:Jl(t.field),op:"IS_NAN"}};if(Q$(t.value))return{unaryFilter:{field:Jl(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Y$(t.value))return{unaryFilter:{field:Jl(t.field),op:"IS_NOT_NAN"}};if(Q$(t.value))return{unaryFilter:{field:Jl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jl(t.field),op:Wle(t.op),value:t.value}}}(n):n instanceof _n?function(t){const r=t.getFilters().map(i=>t4(i));return 1===r.length?r[0]:{compositeFilter:{op:qle(t.op),filters:r}}}(n):Ue(54877,{filter:n})}function Kle(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function n4(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Hc{constructor(e,t,r,i,o=et.min(),s=et.min(),a=Er.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Hc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Hc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class r4{constructor(e){this.wt=e}}function i4(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:fT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Zy(o=n.wt,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:qp(o,s.version.toTimestamp()),createTime:qp(o,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ud(e.version)};else{if(!e.isUnknownDocument())return Ue(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Ud(e.version)}}var o,s;return r}function fT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ud(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jd(n){const e=new nr(n.seconds,n.nanoseconds);return et.fromTimestamp(e)}function Hd(n,e){const t=(e.baseMutations||[]).map(o=>pN(n.wt,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>pN(n.wt,o)),i=nr.fromMillis(e.localWriteTimeMs);return new sN(e.batchId,i,t,r)}function ev(n){const e=jd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?jd(n.lastLimboFreeSnapshotVersion):et.min();let r;return r=void 0!==n.query.documents?function(o){const s=o.documents.length;return We(1===s,1966,{count:s}),Bi(Up(q3(o.documents[0])))}(n.query):Bi(X3(n.query)),new Hc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Er.fromBase64String(n.resumeToken))}function o4(n,e){const t=Ud(e.snapshotVersion),r=Ud(e.lastLimboFreeSnapshotVersion);let i;i=rT(e.target)?J3(n.wt,e.target):hT(n.wt,e.target).gt;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ld(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function gN(n){const e=X3({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?oT(e,e.limit,"L"):e}function mN(n,e){return new cN(e.largestBatchId,pN(n.wt,e.overlayMutation))}function s4(n,e){const t=e.path.lastSegment();return[n,Vi(e.path.popLast()),t]}function a4(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ud(r.readTime),documentKey:Vi(r.documentKey.path),largestBatchId:r.largestBatchId}}class Yle{getBundleMetadata(e,t){return c4(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:jd(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return c4(e).put({bundleId:(i=t).id,createTime:Ud(Nr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return l4(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:gN(o.bundledQuery),readTime:jd(o.readTime)};var o})}saveNamedQuery(e,t){return l4(e).put({name:(i=t).name,readTime:Ud(Nr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function c4(n){return Yr(n,zI)}function l4(n){return Yr(n,WI)}class pT{constructor(e,t){this.serializer=e,this.userId=t}static bt(e,t){return new pT(e,t.uid||"")}getOverlay(e,t){return tv(e).get(s4(this.userId,t)).next(r=>r?mN(this.serializer,r):null)}getOverlays(e,t){const r=ka();return z.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,s)=>{const a=new cN(t,s);i.push(this.St(e,a))}),z.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(s=>i.add(Vi(s.getCollectionPath())));const o=[];return i.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(tv(e).X($R,a))}),z.waitFor(o)}getOverlaysForCollection(e,t,r){const i=ka(),o=Vi(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return tv(e).J($R,s).next(a=>{for(const c of a){const u=mN(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=ka();let s;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return tv(e).te({index:O$,range:a},(c,u,h)=>{const m=mN(this.serializer,u);o.size()<i||m.largestBatchId===s?(o.set(m.getKey(),m),s=m.largestBatchId):h.done()}).next(()=>o)}St(e,t){return tv(e).put(function(i,o,s){const[a,c,u]=s4(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Xy(i.wt,s.mutation)}}(this.serializer,this.userId,t))}}function tv(n){return Yr(n,QI)}class Jle{Dt(e){return Yr(e,GR)}getSessionToken(e){return this.Dt(e).get("sessionToken").next(t=>{const r=t?.value;return r?Er.fromUint8Array(r):Er.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class $d{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(rr(e.integerValue));else if("doubleValue"in e){const r=rr(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),My(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),"string"==typeof r&&(r=Lc(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(Vc(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?J$(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):nT(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):Ue(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const r=e.fields||{};this.Mt(t,55);for(const i of Object.keys(r))this.Nt(i,t),this.Ct(r[i],t)}qt(e,t){var r,i;const o=e.fields||{};this.Mt(t,53);const s=Lp,a=(null===(i=null===(r=o[s].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.Mt(t,15),t.xt(rr(a)),this.Nt(s,t),this.Ct(o[s],t)}$t(e,t){const r=e.values||[];this.Mt(t,50);for(const i of r)this.Ct(i,t)}kt(e,t){this.Mt(t,37),ke.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}function Zle(n){if(0===n)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function u4(n){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const s=Zle(255&r[o]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(e/8)}$d.Wt=new $d;class Xle{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.zt(r.value),r=t.next();this.jt()}Ht(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Yt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.zt(r);else if(r<2048)this.zt(960|r>>>6),this.zt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.zt(480|r>>>12),this.zt(128|63&r>>>6),this.zt(128|63&r);else{const i=t.codePointAt(0);this.zt(240|i>>>18),this.zt(128|63&i>>>12),this.zt(128|63&i>>>6),this.zt(128|63&i)}}this.jt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Yt()}en(e){const t=this.tn(e),r=u4(t);this.nn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}rn(e){const t=this.tn(e),r=u4(t);this.nn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}sn(){this._n(255),this._n(255)}an(){this.un(255),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){const t=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}zt(e){const t=255&e;0===t?(this._n(0),this._n(255)):255===t?(this._n(255),this._n(0)):this._n(t)}Jt(e){const t=255&e;0===t?(this.un(0),this.un(255)):255===t?(this.un(255),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class eue{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}}class tue{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}}class nv{constructor(){this.ln=new Xle,this.hn=new eue(this.ln),this.Pn=new tue(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return 0===e?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}}class Gd{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}In(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Gd(this.indexId,this.documentKey,this.arrayValue,r)}}function Zl(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=d4(n.arrayValue,e.arrayValue),0!==t?t:(t=d4(n.directionalValue,e.directionalValue),0!==t?t:ke.comparator(n.documentKey,e.documentKey)))}function d4(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class h4{constructor(e){this.En=new mn((t,r)=>zn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.An=[];for(const t of e.filters){const r=t;r.isInequality()?this.En=this.En.add(r):this.An.push(r)}}get Rn(){return this.En.size>1}Vn(e){if(We(e.collectionGroup===this.collectionId,49279),this.Rn)return!1;const t=xR(e);if(void 0!==t&&!this.mn(t))return!1;const r=Nd(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.mn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.En.size>0){const a=this.En.getIterator().getNext();if(!i.has(a.field.canonicalString())){const c=r[o];if(!this.fn(a,c)||!this.gn(this.dn[s++],c))return!1}++o}for(;o<r.length;++o)if(s>=this.dn.length||!this.gn(this.dn[s++],r[o]))return!1;return!0}pn(){if(this.Rn)return null;let e=new mn(zn.comparator);const t=[];for(const r of this.An)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new Md(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Md(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Md(r.field,"asc"===r.dir?0:1)));return new Rp(Rp.UNKNOWN_ID,this.collectionId,t,Np.empty())}mn(e){for(const t of this.An)if(this.fn(t,e))return!0;return!1}fn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}gn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function f4(n){var e,t;if(We(n instanceof Ut||n instanceof _n,20012),n instanceof Ut){if(n instanceof u3){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>Ut.create(n.field,"==",o)))||[];return _n.create(i,"or")}return n}const r=n.filters.map(i=>f4(i));return _n.create(r,n.op)}function nue(n){if(0===n.getFilters().length)return[];const e=vN(f4(n));return We(p4(e),7391),_N(e)||yN(e)?[e]:e.getFilters()}function _N(n){return n instanceof Ut}function yN(n){return n instanceof _n&&ZR(n)}function p4(n){return _N(n)||yN(n)||function(t){if(t instanceof _n&&JR(t)){for(const r of t.getFilters())if(!_N(r)&&!yN(r))return!1;return!0}return!1}(n)}function vN(n){if(We(n instanceof Ut||n instanceof _n,34018),n instanceof Ut)return n;if(1===n.filters.length)return vN(n.filters[0]);const e=n.filters.map(r=>vN(r));let t=_n.create(e,n.op);return t=gT(t),p4(t)?t:(We(t instanceof _n,64498),We(Bp(t),40251),We(t.filters.length>1,57927),t.filters.reduce((r,i)=>EN(r,i)))}function EN(n,e){let t;return We(n instanceof Ut||n instanceof _n,38388),We(e instanceof Ut||e instanceof _n,25473),t=n instanceof Ut?e instanceof Ut?_n.create([n,e],"and"):g4(n,e):e instanceof Ut?g4(e,n):function(i,o){if(We(i.filters.length>0&&o.filters.length>0,48005),Bp(i)&&Bp(o))return a3(i,o.getFilters());const s=JR(i)?i:o,a=JR(i)?o:i,c=s.filters.map(u=>EN(u,a));return _n.create(c,"or")}(n,e),gT(t)}function g4(n,e){if(Bp(e))return a3(e,n.getFilters());{const t=e.filters.map(r=>EN(n,r));return _n.create(t,"or")}}function gT(n){if(We(n instanceof Ut||n instanceof _n,11850),n instanceof Ut)return n;const e=n.getFilters();if(1===e.length)return gT(e[0]);if(o3(n))return n;const t=e.map(i=>gT(i)),r=[];return t.forEach(i=>{i instanceof Ut?r.push(i):i instanceof _n&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:_n.create(r,n.op)}class rue{constructor(){this.yn=new bN}addToCollectionParentIndex(e,t){return this.yn.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(Zo.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(Zo.min())}updateCollectionGroup(e,t,r){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}}class bN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new mn(Bt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mn(Bt.comparator)).toArray()}}const m4="IndexedDbIndexManager",mT=new Uint8Array(0);class iue{constructor(e,t){this.databaseId=t,this.wn=new bN,this.bn=new Uc(r=>Ld(r),(r,i)=>Hy(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.wn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.wn.add(t)});const o={collectionId:r,parent:Vi(i)};return _4(e).put(o)}return z.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[g$(t),""],!1,!0);return _4(e).J(i).next(o=>{for(const s of o){if(s.collectionId!==t)break;r.push(Pa(s.parent))}return r})}addFieldIndex(e,t){const r=rv(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;delete i.indexId;const o=r.add(i);if(t.indexState){const s=Jp(e);return o.next(a=>{s.put(a4(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=rv(e),i=Jp(e),o=Yp(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=rv(e),r=Yp(e),i=Jp(e);return t.X().next(()=>r.X()).next(()=>i.X())}createTargetIndexes(e,t){return z.forEach(this.Sn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const o=new h4(r).pn();if(null!=o)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){const r=Yp(e);let i=!0;const o=new Map;return z.forEach(this.Sn(t),s=>this.Dn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=wt();const a=[];return z.forEach(o,(c,u)=>{var j;ve(m4,`Using index ${j=c,`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map(X=>`${X.fieldPath}:${X.kind}`).join(",")}`} to execute ${Ld(t)}`);const h=function(j,X){const ae=xR(X);if(void 0===ae)return null;for(const we of iT(j,ae.fieldPath))switch(we.op){case"array-contains-any":return we.value.arrayValue.values||[];case"array-contains":return[we.value]}return null}(u,c),m=function(j,X){const ae=new Map;for(const we of Nd(X))for(const x of iT(j,we.fieldPath))switch(x.op){case"==":case"in":ae.set(we.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return ae.set(we.fieldPath.canonicalString(),x.value),Array.from(ae.values())}return null}(u,c),_=function(j,X){const ae=[];let we=!0;for(const x of Nd(X)){const S=0===x.kind?d3(j,x.fieldPath,j.startAt):h3(j,x.fieldPath,j.startAt);ae.push(S.value),we&&(we=S.inclusive)}return new Yl(ae,we)}(u,c),v=function(j,X){const ae=[];let we=!0;for(const x of Nd(X)){const S=0===x.kind?h3(j,x.fieldPath,j.endAt):d3(j,x.fieldPath,j.endAt);ae.push(S.value),we&&(we=S.inclusive)}return new Yl(ae,we)}(u,c),I=this.vn(c,u,_),D=this.vn(c,u,v),A=this.Cn(c,u,m),O=this.Fn(c.indexId,h,I,_.inclusive,D,v.inclusive,A);return z.forEach(O,P=>r.Z(P,t.limit).next(j=>{j.forEach(X=>{const ae=ke.fromSegments(X.documentKey);s.has(ae)||(s=s.add(ae),a.push(ae))})}))}).next(()=>a)}return z.resolve(null)})}Sn(e){let t=this.bn.get(e);return t||(t=0===e.filters.length?[e]:nue(_n.create(e.filters,"and")).map(r=>eN(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.bn.set(e,t),t)}Fn(e,t,r,i,o,s,a){const c=(null!=t?t.length:1)*Math.max(r.length,o.length),u=c/(null!=t?t.length:1),h=[];for(let m=0;m<c;++m){const _=t?this.Mn(t[m/u]):mT,v=this.xn(e,_,r[m%u],i),I=this.On(e,_,o[m%u],s),D=a.map(A=>this.xn(e,_,A,!0));h.push(...this.createRange(v,I,D))}return h}xn(e,t,r,i){const o=new Gd(e,ke.empty(),t,r);return i?o:o.In()}On(e,t,r,i){const o=new Gd(e,ke.empty(),t,r);return i?o.In():o}Dn(e,t){const r=new h4(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(const a of o)r.Vn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2;const i=this.Sn(t);return z.forEach(i,o=>this.Dn(e,o).next(s=>{s?0!==r&&s.fields.length<function(c){let u=new mn(zn.comparator),h=!1;for(const m of c.filters)for(const _ of m.getFlattenedFilters())_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?h=!0:u=u.add(_.field));for(const m of c.orderBy)m.field.isKeyField()||(u=u.add(m.field));return u.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Nn(e,t){const r=new nv;for(const i of Nd(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const s=r.Tn(i.kind);$d.Wt.vt(o,s)}return r.cn()}Mn(e){const t=new nv;return $d.Wt.vt(e,t.Tn(0)),t.cn()}Bn(e,t){const r=new nv;return $d.Wt.vt(Fd(this.databaseId,t),r.Tn(function(o){const s=Nd(o);return 0===s.length?0:s[s.length-1].kind}(e))),r.cn()}Cn(e,t,r){if(null===r)return[];let i=[];i.push(new nv);let o=0;for(const s of Nd(e)){const a=r[o++];for(const c of i)if(this.Ln(t,s.fieldPath)&&By(a))i=this.kn(i,s,a);else{const u=c.Tn(s.kind);$d.Wt.vt(a,u)}}return this.qn(i)}vn(e,t,r){return this.Cn(e,t,r.position)}qn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].cn();return t}kn(e,t,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const a of i){const c=new nv;c.seed(a.cn()),$d.Wt.vt(s,c.Tn(t.kind)),o.push(c)}return o}Ln(e,t){return!!e.filters.find(r=>r instanceof Ut&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=rv(e),i=Jp(e);return(t?r.J(HR,IDBKeyRange.bound(t,t)):r.J()).next(o=>{const s=[];return z.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(h,m){const _=m?new Np(m.sequenceNumber,new Zo(jd(m.readTime),new ke(Pa(m.documentKey)),m.largestBatchId)):Np.empty(),v=h.fields.map(([I,D])=>new Md(zn.fromServerFormat(I),D));return new Rp(h.indexId,h.collectionGroup,v,_)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:lt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=rv(e),o=Jp(e);return this.Qn(e).next(s=>i.J(HR,IDBKeyRange.bound(t,t)).next(a=>z.forEach(a,c=>o.put(a4(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){const r=new Map;return z.forEach(t,(i,o)=>{const s=r.get(i.collectionGroup);return(s?z.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),z.forEach(a,c=>this.$n(e,i,c).next(u=>{const h=this.Un(o,c);return u.isEqual(h)?z.resolve():this.Kn(e,o,c,u,h)}))))})}Wn(e,t,r,i){return Yp(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Bn(r,t.key),documentKey:t.key.path.toArray()})}Gn(e,t,r,i){return Yp(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Bn(r,t.key),t.key.path.toArray()])}$n(e,t,r){const i=Yp(e);let o=new mn(Zl);return i.te({index:P$,range:IDBKeyRange.only([r.indexId,this.uid,this.Bn(r,t)])},(s,a)=>{o=o.add(new Gd(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Un(e,t){let r=new mn(Zl);const i=this.Nn(t,e);if(null==i)return r;const o=xR(t);if(null!=o){const s=e.data.field(o.fieldPath);if(By(s))for(const a of s.arrayValue.values||[])r=r.add(new Gd(t.indexId,e.key,this.Mn(a),i))}else r=r.add(new Gd(t.indexId,e.key,mT,i));return r}Kn(e,t,r,i,o){ve(m4,"Updating index entries for document '%s'",t.key);const s=[];return function(c,u,h,m,_){const v=c.getIterator(),I=u.getIterator();let D=Fp(v),A=Fp(I);for(;D||A;){let O=!1,P=!1;if(D&&A){const j=h(D,A);j<0?P=!0:j>0&&(O=!0)}else null!=D?P=!0:O=!0;O?(m(A),A=Fp(I)):P?(_(D),D=Fp(v)):(D=Fp(v),A=Fp(I))}}(i,o,Zl,a=>{s.push(this.Wn(e,t,r,a))},a=>{s.push(this.Gn(e,t,r,a))}),z.waitFor(s)}Qn(e){let t=1;return Jp(e).te({index:M$,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Zl(s,a)).filter((s,a,c)=>!a||0!==Zl(s,c[a-1]));const i=[];i.push(e);for(const s of r){const a=Zl(s,e),c=Zl(s,t);if(0===a)i[0]=e.In();else if(a>0&&c<0)i.push(s),i.push(s.In());else if(c>0)break}i.push(t);const o=[];for(let s=0;s<i.length;s+=2){if(this.zn(i[s],i[s+1]))return[];o.push(IDBKeyRange.bound([i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,mT,[]],[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,mT,[]]))}return o}zn(e,t){return Zl(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(y4)}getMinOffset(e,t){return z.mapArray(this.Sn(t),r=>this.Dn(e,r).next(i=>i||Ue(44426))).next(y4)}}function _4(n){return Yr(n,xy)}function Yp(n){return Yr(n,KI)}function rv(n){return Yr(n,jR)}function Jp(n){return Yr(n,qI)}function y4(n){We(0!==n.length,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;FR(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Zo(e.readTime,e.documentKey,t)}const v4={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ui{static withCacheSize(e){return new Ui(e,Ui.DEFAULT_COLLECTION_PERCENTILE,Ui.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function b4(n,e,t){const r=n.store(ta),i=n.store(Pp),o=[],s=IDBKeyRange.only(t.batchId);let a=0;const c=r.te({range:s},(h,m,_)=>(a++,_.delete()));o.push(c.next(()=>{We(1===a,47070,{batchId:t.batchId})}));const u=[];for(const h of t.mutations){const m=S$(e,h.key.path,t.batchId);o.push(i.delete(m)),u.push(h.key)}return z.waitFor(o).next(()=>u)}function _T(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ue(14731);e=n.noDocument}return JSON.stringify(e).length}Ui.DEFAULT_COLLECTION_PERCENTILE=10,Ui.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ui.DEFAULT=new Ui(41943040,Ui.DEFAULT_COLLECTION_PERCENTILE,Ui.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ui.DISABLED=new Ui(-1,0,0);class yT{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.jn={}}static bt(e,t,r,i){We(""!==e.uid,64387);const o=e.isAuthenticated()?e.uid:"";return new yT(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xl(e).te({index:kd,range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=Zp(e),s=Xl(e);return s.add({}).next(a=>{We("number"==typeof a,49019);const c=new sN(a,t,r,i),u=function(v,I,D){const A=D.baseMutations.map(P=>Xy(v.wt,P)),O=D.mutations.map(P=>Xy(v.wt,P));return{userId:I,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:A,mutations:O}}(this.serializer,this.userId,c),h=[];let m=new mn((_,v)=>lt(_.canonicalString(),v.canonicalString()));for(const _ of i){const v=S$(this.userId,_.key.path,a);m=m.add(_.key.path.popLast()),h.push(s.put(u)),h.push(o.put(v,Bce))}return m.forEach(_=>{h.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.jn[a]=c.keys()}),z.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return Xl(e).get(t).next(r=>r?(We(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Hd(this.serializer,r)):null)}Hn(e,t){return this.jn[t]?z.resolve(this.jn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.jn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Xl(e).te({index:kd,range:i},(s,a,c)=>{a.userId===this.userId&&(We(a.batchId>=r,47524,{Jn:r}),o=Hd(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Xl(e).te({index:kd,range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xl(e).J(kd,t).next(r=>r.map(i=>Hd(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=jI(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Zp(e).te({range:i},(s,a,c)=>{const[u,h,m]=s,_=Pa(h);if(u===this.userId&&t.path.isEqual(_))return Xl(e).get(m).next(v=>{if(!v)throw Ue(61480,{Yn:s,batchId:m});We(v.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:v.userId,batchId:m}),o.push(Hd(this.serializer,v))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(lt);const i=[];return t.forEach(o=>{const s=jI(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Zp(e).te({range:a},(u,h,m)=>{const[_,v,I]=u,D=Pa(v);_===this.userId&&o.path.isEqual(D)?r=r.add(I):m.done()});i.push(c)}),z.waitFor(i).next(()=>this.Zn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=jI(this.userId,r),s=IDBKeyRange.lowerBound(o);let a=new mn(lt);return Zp(e).te({range:s},(c,u,h)=>{const[m,_,v]=c,I=Pa(_);m===this.userId&&r.isPrefixOf(I)?I.length===i&&(a=a.add(v)):h.done()}).next(()=>this.Zn(e,a))}Zn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(Xl(e).get(o).next(s=>{if(null===s)throw Ue(35274,{batchId:o});We(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(Hd(this.serializer,s))}))}),z.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return b4(e.he,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Xn(t.batchId)}),z.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Xn(e){delete this.jn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return z.resolve();const r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Zp(e).te({range:r},(o,s,a)=>{if(o[0]===this.userId){const c=Pa(o[1]);i.push(c)}else a.done()}).next(()=>{We(0===i.length,56720,{er:i.map(o=>o.canonicalString())})})})}containsKey(e,t){return I4(e,this.userId,t)}tr(e){return T4(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function I4(n,e,t){const r=jI(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return Zp(n).te({range:o,ee:!0},(a,c,u)=>{const[h,m,_]=a;h===e&&m===i&&(s=!0),u.done()}).next(()=>s)}function Xl(n){return Yr(n,ta)}function Zp(n){return Yr(n,Pp)}function T4(n){return Yr(n,Oy)}class zd{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new zd(0)}static ir(){return new zd(-1)}}class oue{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.sr(e).next(t=>{const r=new zd(t.highestTargetId);return t.highestTargetId=r.next(),this._r(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.sr(e).next(t=>et.fromTimestamp(new nr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.sr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.sr(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this._r(e,i)))}addTargetData(e,t){return this.ar(e,t).next(()=>this.sr(e).next(r=>(r.targetCount+=1,this.ur(t,r),this._r(e,r))))}updateTargetData(e,t){return this.ar(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Xp(e).delete(t.targetId)).next(()=>this.sr(e)).next(r=>(We(r.targetCount>0,8065),r.targetCount-=1,this._r(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return Xp(e).te((s,a)=>{const c=ev(a);c.sequenceNumber<=t&&null===r.get(c.targetId)&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>z.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Xp(e).te((r,i)=>{const o=ev(i);t(o)})}sr(e){return w4(e).get(GI).next(t=>(We(null!==t,2888),t))}_r(e,t){return w4(e).put(GI,t)}ar(e,t){return Xp(e).put(o4(this.serializer,t))}ur(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.sr(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ld(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Xp(e).te({range:i,index:N$},(s,a,c)=>{const u=ev(a);Hy(t,u.target)&&(o=u,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=eu(e);return t.forEach(s=>{const a=Vi(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),z.waitFor(i)}removeMatchingKeys(e,t,r){const i=eu(e);return z.forEach(t,o=>{const s=Vi(o.path);return z.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=eu(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=eu(e);let o=wt();return i.te({range:r,ee:!0},(s,a,c)=>{const u=Pa(s[1]),h=new ke(u);o=o.add(h)}).next(()=>o)}containsKey(e,t){const r=Vi(t.path),i=IDBKeyRange.bound([r],[g$(r)],!1,!0);let o=0;return eu(e).te({index:UR,ee:!0,range:i},([s,a],c,u)=>{0!==s&&(o++,u.done())}).next(()=>o>0)}Rt(e,t){return Xp(e).get(t).next(r=>r?ev(r):null)}}function Xp(n){return Yr(n,Op)}function w4(n){return Yr(n,xd)}function eu(n){return Yr(n,kp)}const D4="LruGarbageCollector";function A4([n,e],[t,r]){const i=lt(n,t);return 0===i?lt(e,r):i}class sue{constructor(e){this.cr=e,this.buffer=new mn(A4),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();A4(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class S4{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Tr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return null!==this.Tr}Ir(e){var t=this;ve(D4,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,T.A)(function*(){t.Tr=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){$l(r)?ve(D4,"Ignoring IndexedDB error during garbage collection: ",r):yield Hl(r)}yield t.Ir(3e5)}))}}class aue{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return z.resolve(es.le);const r=new sue(t);return this.Er.forEachTarget(e,i=>r.Pr(i.sequenceNumber)).next(()=>this.Er.Ar(e,i=>r.Pr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Er.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(v4)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),v4):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let r,i,o,s,a,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,s=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(o=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(u=Date.now(),Cp()<=ea.$b.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-h}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(c-a)+`ms\n\tRemoved ${m} documents in `+(u-c)+`ms\nTotal Duration: ${u-h}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:m})))}}function R4(n,e){return new aue(n,e)}class cue{constructor(e,t){this.db=e,this.garbageCollector=R4(this,t)}dr(e){const t=this.Vr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ar(e,t){return this.mr(e,(r,i)=>t(i))}addReference(e,t,r){return vT(e,r)}removeReference(e,t,r){return vT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return vT(e,t)}gr(e,t){return function(i,o){let s=!1;return T4(i).ne(a=>I4(i,a,o).next(c=>(c&&(s=!0),z.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.mr(e,(s,a)=>{if(a<=t){const c=this.gr(e,s).next(u=>{if(!u)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,et.min()),eu(e).delete([0,Vi(s.path)])))});i.push(c)}}).next(()=>z.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return vT(e,t)}mr(e,t){const r=eu(e);let i,o=es.le;return r.te({index:UR},([s,a],{path:c,sequenceNumber:u})=>{0===s?(o!==es.le&&t(new ke(Pa(i)),o),o=u,i=c):o=es.le}).next(()=>{o!==es.le&&t(new ke(Pa(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function vT(n,e){return eu(n).put((i=n.currentSequenceNumber,{targetId:0,path:Vi(e.path),sequenceNumber:i}));var i}class N4{constructor(){this.changes=new Uc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class lue{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wd(e).put(r)}removeEntry(e,t,r){return Wd(e).delete(function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],fT(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.pr(e,r)))}getEntry(e,t){let r=Wn.newInvalidDocument(t);return Wd(e).te({index:$I,range:IDBKeyRange.only(iv(t))},(i,o)=>{r=this.yr(t,o)}).next(()=>r)}wr(e,t){let r={size:0,document:Wn.newInvalidDocument(t)};return Wd(e).te({index:$I,range:IDBKeyRange.only(iv(t))},(i,o)=>{r={document:this.yr(t,o),size:_T(o)}}).next(()=>r)}getEntries(e,t){let r=Po();return this.br(e,t,(i,o)=>{const s=this.yr(i,o);r=r.insert(i,s)}).next(()=>r)}Sr(e,t){let r=Po(),i=new jn(ke.comparator);return this.br(e,t,(o,s)=>{const a=this.yr(o,s);r=r.insert(o,a),i=i.insert(o,_T(s))}).next(()=>({documents:r,Dr:i}))}br(e,t,r){if(t.isEmpty())return z.resolve();let i=new mn(k4);t.forEach(c=>i=i.add(c));const o=IDBKeyRange.bound(iv(i.first()),iv(i.last())),s=i.getIterator();let a=s.getNext();return Wd(e).te({index:$I,range:o},(c,u,h)=>{const m=ke.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&k4(a,m)<0;)r(a,null),a=s.getNext();a&&a.isEqual(m)&&(r(a,u),a=s.hasNext()?s.getNext():null),a?h.H(iv(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){const s=t.path,a=[s.popLast().toArray(),s.lastSegment(),fT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wd(e).J(IDBKeyRange.bound(a,c,!0)).next(u=>{o?.incrementDocumentReadCount(u.length);let h=Po();for(const m of u){const _=this.yr(ke.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);_.isFoundDocument()&&(Gy(t,_)||i.has(_.key))&&(h=h.insert(_.key,_))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Po();const s=O4(t,r),a=O4(t,Zo.max());return Wd(e).te({index:R$,range:IDBKeyRange.bound(s,a,!0)},(c,u,h)=>{const m=this.yr(ke.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(m.key,m),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new uue(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return P4(e).get(BR).next(t=>(We(!!t,20021),t))}pr(e,t){return P4(e).put(BR,t)}yr(e,t){if(t){const r=function Qle(n,e){let t;if(e.document)t=Y3(n.wt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ke.fromSegments(e.noDocument.path),i=jd(e.noDocument.readTime);t=Wn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ue(56709);{const r=ke.fromSegments(e.unknownDocument.path),i=jd(e.unknownDocument.version);t=Wn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const o=new nr(i[0],i[1]);return et.fromTimestamp(o)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(et.min()))return r}return Wn.newInvalidDocument(e)}}function M4(n){return new lue(n)}class uue extends N4{constructor(e,t){super(),this.vr=e,this.trackRemovals=t,this.Cr=new Uc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new mn((o,s)=>lt(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.Cr.get(o);if(t.push(this.vr.removeEntry(e,o,a.readTime)),s.isValidDocument()){const c=i4(this.vr.serializer,s);i=i.add(o.path.popLast());const u=_T(c);r+=u-a.size,t.push(this.vr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){const c=i4(this.vr.serializer,s.convertToNoDocument(et.min()));t.push(this.vr.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.vr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.vr.updateMetadata(e,r)),z.waitFor(t)}getFromCache(e,t){return this.vr.wr(e,t).next(r=>(this.Cr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.vr.Sr(e,t).next(({documents:r,Dr:i})=>(i.forEach((o,s)=>{this.Cr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}}function P4(n){return Yr(n,ky)}function Wd(n){return Yr(n,HI)}function iv(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function O4(n,e){const t=e.documentKey.path.toArray();return[n,fT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function k4(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=lt(t[o],r[o]),i)return i;return i=lt(t.length,r.length),i||(i=lt(t[t.length-2],r[r.length-2]),i||lt(t[t.length-1],r[r.length-1]))}class due{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class x4{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Ky(r.mutation,i,Mo.empty(),nr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,wt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=wt()){const i=ka();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=zy();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const r=ka();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,wt()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Po();const s=Wy(),a=Wy();return t.forEach((c,u)=>{const h=r.get(u.key);i.has(u.key)&&(void 0===h||h.mutation instanceof jc)?o=o.insert(u.key,u):void 0!==h?(s.set(u.key,h.mutation.getFieldMask()),Ky(h.mutation,u,h.mutation.getFieldMask(),nr.now())):s.set(u.key,Mo.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,h)=>s.set(u,h)),t.forEach((u,h)=>{var m;return a.set(u,new due(h,null!==(m=s.get(u))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Wy();let i=new jn((s,a)=>s-a),o=wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const a of s)a.keys().forEach(c=>{const u=t.get(c);if(null===u)return;let h=r.get(c)||Mo.empty();h=a.applyToLocalView(u,h),r.set(c,h);const m=(i.get(a.batchId)||wt()).add(c);i=i.insert(a.batchId,m)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,h=c.value,m=I3();h.forEach(_=>{if(!o.has(_)){const v=N3(t.get(_),r.get(_));null!==v&&m.set(_,v),o=o.add(_)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,m))}return z.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return ke.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):tN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var s}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):z.resolve(ka());let a=-1,c=o;return s.next(u=>z.forEach(u,(h,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),o.get(h)?z.resolve():this.remoteDocumentCache.getEntry(e,h).next(_=>{c=c.insert(h,_)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,wt())).next(h=>({batchId:a,changes:b3(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ke(t)).next(r=>{let i=zy();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let s=zy();return this.indexManager.getCollectionParents(e,o).next(a=>z.forEach(a,c=>{const u=(m=t,_=c.child(o),new Bc(_,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,_;return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((m,_)=>{s=s.insert(m,_)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{const h=u.getKey();null===s.get(h)&&(s=s.insert(h,Wn.newInvalidDocument(h)))});let a=zy();return s.forEach((c,u)=>{const h=o.get(c);void 0!==h&&Ky(h.mutation,u,Mo.empty(),nr.now()),Gy(t,u)&&(a=a.insert(c,u))}),a})}}class hue{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return z.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,{id:(i=t).id,version:i.version,createTime:Nr(i.createTime)}),z.resolve();var i}getNamedQuery(e,t){return z.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,{name:(i=t).name,query:gN(i.bundledQuery),readTime:Nr(i.readTime)}),z.resolve();var i}}class fue{constructor(){this.overlays=new jn(ke.comparator),this.Or=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ka();return z.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),z.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Or.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Or.delete(r)),z.resolve()}getOverlaysForCollection(e,t,r){const i=ka(),o=t.length+1,s=new ke(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return z.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new jn((u,h)=>u-h);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=o.get(u.largestBatchId);null===h&&(h=ka(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=ka(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return z.resolve(a)}St(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.Or.get(i.largestBatchId).delete(r.key);this.Or.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new cN(t,r));let o=this.Or.get(t);void 0===o&&(o=wt(),this.Or.set(t,o)),this.Or.set(t,o.add(r.key))}}class pue{constructor(){this.sessionToken=Er.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}}class IN{constructor(){this.Nr=new mn(ci.Br),this.Lr=new mn(ci.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const r=new ci(e,t);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Qr(new ci(e,t))}$r(e,t){e.forEach(r=>this.removeReference(r,t))}Ur(e){const t=new ke(new Bt([])),r=new ci(t,e),i=new ci(t,e+1),o=[];return this.Lr.forEachInRange([r,i],s=>{this.Qr(s),o.push(s.key)}),o}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new ke(new Bt([])),r=new ci(t,e),i=new ci(t,e+1);let o=wt();return this.Lr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const t=new ci(e,0),r=this.Nr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ci{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return ke.comparator(e.key,t.key)||lt(e.Gr,t.Gr)}static kr(e,t){return lt(e.Gr,t.Gr)||ke.comparator(e.key,t.key)}}class gue{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new mn(ci.Br)}checkEmpty(e){return z.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.Jn;this.Jn++;const s=new sN(o,t,r,i);this.mutationQueue.push(s);for(const a of i)this.zr=this.zr.add(new ci(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(s)}lookupMutationBatch(e,t){return z.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Hr(t+1),o=i<0?0:i;return z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(0===this.mutationQueue.length?-1:this.Jn-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ci(t,0),i=new ci(t,Number.POSITIVE_INFINITY),o=[];return this.zr.forEachInRange([r,i],s=>{const a=this.jr(s.Gr);o.push(a)}),z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(lt);return t.forEach(i=>{const o=new ci(i,0),s=new ci(i,Number.POSITIVE_INFINITY);this.zr.forEachInRange([o,s],a=>{r=r.add(a.Gr)})}),z.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;ke.isDocumentKey(o)||(o=o.child(""));const s=new ci(new ke(o),0);let a=new mn(lt);return this.zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Gr)),!0)},s),z.resolve(this.Jr(a))}Jr(e){const t=[];return e.forEach(r=>{const i=this.jr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){We(0===this.Yr(t.batchId,"removed"),55003),this.mutationQueue.shift();let r=this.zr;return z.forEach(t.mutations,i=>{const o=new ci(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,t){const r=new ci(t,0),i=this.zr.firstAfterOrEqual(r);return z.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return z.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class mue{constructor(e){this.Zr=e,this.docs=new jn(ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Zr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return z.resolve(r?r.document.mutableCopy():Wn.newInvalidDocument(t))}getEntries(e,t){let r=Po();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Wn.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Po();const s=t.path,a=new ke(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||FR(v$(h),r)<=0||(i.has(h.key)||Gy(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return z.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Ue(9500)}Xr(e,t){return z.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new _ue(this)}getSize(e){return z.resolve(this.size)}}class _ue extends N4{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.vr.addEntry(e,i)):this.vr.removeEntry(r)}),z.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}class yue{constructor(e){this.persistence=e,this.ei=new Uc(t=>Ld(t),Hy),this.lastRemoteSnapshotVersion=et.min(),this.highestTargetId=0,this.ti=0,this.ni=new IN,this.targetCount=0,this.ri=zd.rr()}forEachTarget(e,t){return this.ei.forEach((r,i)=>t(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ti&&(this.ti=t),z.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new zd(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.ar(t),z.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.ei.forEach((s,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.ei.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),z.waitFor(o).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){const r=this.ei.get(t)||null;return z.resolve(r)}addMatchingKeys(e,t,r){return this.ni.qr(t,r),z.resolve()}removeMatchingKeys(e,t,r){this.ni.$r(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),z.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),z.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ni.Wr(t);return z.resolve(r)}containsKey(e,t){return z.resolve(this.ni.containsKey(t))}}class TN{constructor(e,t){this.ii={},this.overlays={},this.si=new es(0),this.oi=!1,this.oi=!0,this._i=new pue,this.referenceDelegate=e(this),this.ai=new yue(this),this.indexManager=new rue,this.remoteDocumentCache=new mue(r=>this.referenceDelegate.ui(r)),this.serializer=new r4(t),this.ci=new hue(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fue,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ii[e.toKey()];return r||(r=new gue(t,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,r){ve("MemoryPersistence","Starting transaction:",e);const i=new vue(this.si.next());return this.referenceDelegate.li(),r(i).next(o=>this.referenceDelegate.hi(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Pi(e,t){return z.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,t)))}}class vue extends b${constructor(e){super(),this.currentSequenceNumber=e}}class ET{constructor(e){this.persistence=e,this.Ti=new IN,this.Ii=null}static Ei(e){return new ET(e)}get di(){if(this.Ii)return this.Ii;throw Ue(60996)}addReference(e,t,r){return this.Ti.addReference(r,t),this.di.delete(r.toString()),z.resolve()}removeReference(e,t,r){return this.Ti.removeReference(r,t),this.di.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),z.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.di.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.di,r=>{const i=ke.fromPath(r);return this.Ai(e,i).next(o=>{o||t.removeEntry(i,et.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return z.or([()=>z.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class bT{constructor(e,t){this.persistence=e,this.Ri=new Uc(r=>Vi(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=R4(this,t)}static Ei(e,t){return new bT(e,t)}li(){}hi(e){return z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}Ar(e,t){return z.forEach(this.Ri,(r,i)=>this.gr(e,r,i).next(o=>o?z.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Xr(e,s=>this.gr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,et.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),z.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),z.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=eT(e.data.value)),t}gr(e,t,r){return z.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.Ri.get(t);return z.resolve(void 0!==i&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Eue{constructor(e){this.serializer=e}q(e,t,r,i){const o=new BI("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore(Py),(c=e).createObjectStore(Oy,{keyPath:"userId"}),c.createObjectStore(ta,{keyPath:C$,autoIncrement:!0}).createIndex(kd,A$,{unique:!0}),c.createObjectStore(Pp),F4(e),function(c){c.createObjectStore(Od)}(e));let s=z.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore(kp),c.deleteObjectStore(Op),c.deleteObjectStore(xd)}(e),F4(e)),s=s.next(()=>function(c){const u=c.store(xd),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:et.min().toTimestamp(),targetCount:0};return u.put(GI,h)}(o))),r<4&&i>=4&&(0!==r&&(s=s.next(()=>function(c,u){return u.store(ta).J().next(m=>{c.deleteObjectStore(ta),c.createObjectStore(ta,{keyPath:C$,autoIncrement:!0}).createIndex(kd,A$,{unique:!0});const _=u.store(ta),v=m.map(I=>_.put(I));return z.waitFor(v)})}(e,o))),s=s.next(()=>{!function(c){c.createObjectStore(xp,{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(s=s.next(()=>this.Vi(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore(ky)}(e),this.mi(o)))),r<7&&i>=7&&(s=s.next(()=>this.fi(o))),r<8&&i>=8&&(s=s.next(()=>this.gi(e,o))),r<9&&i>=9&&(s=s.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(s=s.next(()=>this.pi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore(zI,{keyPath:"bundleId"})})(e),function(c){c.createObjectStore(WI,{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{!function(c){const u=c.createObjectStore(QI,{keyPath:nle});u.createIndex($R,rle,{unique:!1}),u.createIndex(O$,ile,{unique:!1})}(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){const u=c.createObjectStore(HI,{keyPath:Uce});u.createIndex($I,jce),u.createIndex(R$,Hce)}(e)).next(()=>this.yi(e,o)).next(()=>e.deleteObjectStore(Od))),r<14&&i>=14&&(s=s.next(()=>this.wi(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore(jR,{keyPath:"indexId",autoIncrement:!0}).createIndex(HR,"collectionGroup",{unique:!1}),c.createObjectStore(qI,{keyPath:Zce}).createIndex(M$,Xce,{unique:!1}),c.createObjectStore(KI,{keyPath:ele}).createIndex(P$,tle,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore(qI).clear()}).next(()=>{t.objectStore(KI).clear()})),r<17&&i>=17&&(s=s.next(()=>{!function(c){c.createObjectStore(GR,{keyPath:"name"})}(e)})),s}mi(e){let t=0;return e.store(Od).te((r,i)=>{t+=_T(i)}).next(()=>{const r={byteSize:t};return e.store(ky).put(BR,r)})}Vi(e){const t=e.store(Oy),r=e.store(ta);return t.J().next(i=>z.forEach(i,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.J(kd,s).next(a=>z.forEach(a,c=>{We(c.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const u=Hd(this.serializer,c);return b4(e,o.userId,u).next(()=>{})}))}))}fi(e){const t=e.store(kp),r=e.store(Od);return e.store(xd).get(GI).next(i=>{const o=[];return r.te((s,a)=>{const c=new Bt(s),u=[0,Vi(c)];o.push(t.get(u).next(h=>h?z.resolve():t.put({targetId:0,path:Vi(c),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>z.waitFor(o))})}gi(e,t){e.createObjectStore(xy,{keyPath:Wce});const r=t.store(xy),i=new bN,o=s=>{if(i.add(s)){const a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:Vi(c)})}};return t.store(Od).te({ee:!0},(s,a)=>{const c=new Bt(s);return o(c.popLast())}).next(()=>t.store(Pp).te({ee:!0},([s,a,c],u)=>{const h=Pa(a);return o(h.popLast())}))}pi(e){const t=e.store(Op);return t.te((r,i)=>{const o=ev(i),s=o4(this.serializer,o);return t.put(s)})}yi(e,t){const r=t.store(Od),i=[];return r.te((o,s)=>{const a=t.store(HI),c=(m=s,m.document?new ke(Bt.fromString(m.document.name).popFirst(5)):m.noDocument?ke.fromSegments(m.noDocument.path):m.unknownDocument?ke.fromSegments(m.unknownDocument.path):Ue(36783)).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};var m;i.push(a.put(u))}).next(()=>z.waitFor(i))}wi(e,t){const r=t.store(ta),i=M4(this.serializer),o=new TN(ET.Ei,this.serializer.wt);return r.J().next(s=>{const a=new Map;return s.forEach(c=>{var u;let h=null!==(u=a.get(c.userId))&&void 0!==u?u:wt();Hd(this.serializer,c).keys().forEach(m=>h=h.add(m)),a.set(c.userId,h)}),z.forEach(a,(c,u)=>{const h=new si(u),m=pT.bt(this.serializer,h),_=o.getIndexManager(h),v=yT.bt(h,this.serializer,_,o.referenceDelegate);return new x4(i,v,m,_).recalculateAndSaveOverlaysForDocumentKeys(new WR(t,es.le),c).next()})})}}function F4(n){n.createObjectStore(kp,{keyPath:Gce}).createIndex(UR,zce,{unique:!0}),n.createObjectStore(Op,{keyPath:"targetId"}).createIndex(N$,$ce,{unique:!0}),n.createObjectStore(xd)}const tu="IndexedDbPersistence",wN=18e5,CN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class AN{constructor(e,t,r,i,o,s,a,c,u,h,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.bi=o,this.window=s,this.document=a,this.Si=u,this.Di=h,this.Ci=m,this.si=null,this.oi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fi=null,this.inForeground=!1,this.Mi=null,this.xi=null,this.Oi=Number.NEGATIVE_INFINITY,this.Ni=_=>Promise.resolve(),!AN.C())throw new _e(Z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new cue(this,i),this.Bi=t+"main",this.serializer=new r4(c),this.Li=new Ma(this.Bi,this.Ci,new Eue(this.serializer)),this._i=new Jle,this.ai=new oue(this.referenceDelegate,this.serializer),this.remoteDocumentCache=M4(this.serializer),this.ci=new Yle,this.window&&this.window.localStorage?this.ki=this.window.localStorage:(this.ki=null,!1===h&&Rr(tu,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.qi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new _e(Z.FAILED_PRECONDITION,CN);return this.Qi(),this.$i(),this.Ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ai.getHighestSequenceNumber(e))}).then(e=>{this.si=new es(e,this.Si)}).then(()=>{this.oi=!0}).catch(e=>(this.Li&&this.Li.close(),Promise.reject(e)))}Ki(e){var t=this;return this.Ni=function(){var r=(0,T.A)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Li.U(function(){var t=(0,T.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.bi.enqueueAndForget((0,T.A)(function*(){t.started&&(yield t.qi())})))}qi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>IT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Wi(e).next(t=>{t||(this.isPrimary=!1,this.bi.enqueueRetryable(()=>this.Ni(!1)))})}).next(()=>this.Gi(e)).next(t=>this.isPrimary&&!t?this.zi(e).next(()=>!1):!!t&&this.ji(e).next(()=>!0))).catch(e=>{if($l(e))return ve(tu,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ve(tu,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.bi.enqueueRetryable(()=>this.Ni(e)),this.isPrimary=e})}Wi(e){return ov(e).get(Mp).next(t=>z.resolve(this.Hi(t)))}Ji(e){return IT(e).delete(this.clientId)}Yi(){var e=this;return(0,T.A)(function*(){if(e.isPrimary&&!e.Zi(e.Oi,wN)){e.Oi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Yr(r,xp);return i.J().next(o=>{const s=e.Xi(o,wN),a=o.filter(c=>-1===s.indexOf(c));return z.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(e.ki)for(const r of t)e.ki.removeItem(e.es(r.clientId))}})()}Ui(){this.xi=this.bi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.qi().then(()=>this.Yi()).then(()=>this.Ui()))}Hi(e){return!!e&&e.ownerId===this.clientId}Gi(e){return this.Di?z.resolve(!0):ov(e).get(Mp).next(t=>{if(null!==t&&this.Zi(t.leaseTimestampMs,5e3)&&!this.ts(t.ownerId)){if(this.Hi(t)&&this.networkEnabled)return!0;if(!this.Hi(t)){if(!t.allowTabSynchronization)throw new _e(Z.FAILED_PRECONDITION,CN);return!1}}return!(!this.networkEnabled||!this.inForeground)||IT(e).J().next(r=>void 0===this.Xi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ve(tu,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,T.A)(function*(){e.oi=!1,e.ns(),e.xi&&(e.xi.cancel(),e.xi=null),e.rs(),e.ss(),yield e.Li.runTransaction("shutdown","readwrite",[Py,xp],t=>{const r=new WR(t,es.le);return e.zi(r).next(()=>e.Ji(r))}),e.Li.close(),e._s()})()}Xi(e,t){return e.filter(r=>this.Zi(r.updateTimeMs,t)&&!this.ts(r.clientId))}us(){return this.runTransaction("getActiveClients","readonly",e=>IT(e).J().next(t=>this.Xi(t,wN).map(r=>r.clientId)))}get started(){return this.oi}getGlobalsCache(){return this._i}getMutationQueue(e,t){return yT.bt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new iue(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return pT.bt(this.serializer,e)}getBundleCache(){return this.ci}runTransaction(e,t,r){ve(tu,"Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=17===(c=this.Ci)?cle:16===c?ale:15===c?zR:14===c?F$:13===c?x$:12===c?sle:11===c?k$:void Ue(60245);var c;let s;return this.Li.runTransaction(e,i,o,a=>(s=new WR(a,this.si?this.si.next():es.le),"readwrite-primary"===t?this.Wi(s).next(c=>!!c||this.Gi(s)).next(c=>{if(!c)throw Rr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.bi.enqueueRetryable(()=>this.Ni(!1)),new _e(Z.FAILED_PRECONDITION,E$);return r(s)}).next(c=>this.ji(s).next(()=>c)):this.cs(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}cs(e){return ov(e).get(Mp).next(t=>{if(null!==t&&this.Zi(t.leaseTimestampMs,5e3)&&!this.ts(t.ownerId)&&!this.Hi(t)&&!(this.Di||this.allowTabSynchronization&&t.allowTabSynchronization))throw new _e(Z.FAILED_PRECONDITION,CN)})}ji(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ov(e).put(Mp,t)}static C(){return Ma.C()}zi(e){const t=ov(e);return t.get(Mp).next(r=>this.Hi(r)?(ve(tu,"Releasing primary lease."),t.delete(Mp)):z.resolve())}Zi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Rr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Qi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Mi=()=>{this.bi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.qi()))},this.document.addEventListener("visibilitychange",this.Mi),this.inForeground="visible"===this.document.visibilityState)}rs(){this.Mi&&(this.document.removeEventListener("visibilitychange",this.Mi),this.Mi=null)}$i(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Fi=()=>{this.ns();const t=/(?:Version|Mobile)\/1[456]/;(0,Ct.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.bi.enterRestrictedMode(!0),this.bi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Fi))}ss(){this.Fi&&(this.window.removeEventListener("pagehide",this.Fi),this.Fi=null)}ts(e){var t;try{const r=null!==(null===(t=this.ki)||void 0===t?void 0:t.getItem(this.es(e)));return ve(tu,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Rr(tu,"Failed to get zombied client id.",r),!1}}ns(){if(this.ki)try{this.ki.setItem(this.es(this.clientId),String(Date.now()))}catch(e){Rr("Failed to set zombie client id.",e)}}_s(){if(this.ki)try{this.ki.removeItem(this.es(this.clientId))}catch{}}es(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ov(n){return Yr(n,Py)}function IT(n){return Yr(n,xp)}function SN(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class RN{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ls=r,this.hs=i}static Ps(e,t){let r=wt(),i=wt();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new RN(e,t.fromCache,r,i)}}class bue{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class V4{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=(0,Ct.nr)()?8:I$((0,Ct.ZQ)())>0?6:4}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.Rs(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Vs(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new bue;return this.fs(e,t,s).next(a=>{if(o.result=a,this.Is)return this.gs(e,t,s,a.size)})}).next(()=>o.result)}gs(e,t,r,i){return r.documentReadCount<this.Es?(Cp()<=ea.$b.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Hp(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),z.resolve()):(Cp()<=ea.$b.DEBUG&&ve("QueryEngine","Query:",Hp(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Cp()<=ea.$b.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Hp(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bi(t))):z.resolve())}Rs(e,t){if(p3(t))return z.resolve(null);let r=Bi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=oT(t,null,"F"),r=Bi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=wt(...o);return this.As.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ps(t,a);return this.ys(t,u,s,c.readTime)?this.Rs(e,oT(t,null,"F")):this.ws(e,u,t,c)}))})))}Vs(e,t,r,i){return p3(t)||i.isEqual(et.min())?z.resolve(null):this.As.getDocuments(e,r).next(o=>{const s=this.ps(t,o);return this.ys(t,s,r,i)?z.resolve(null):(Cp()<=ea.$b.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Hp(t)),this.ws(e,s,t,y$(i,-1)).next(a=>a))})}ps(e,t){let r=new mn(v3(e));return t.forEach((i,o)=>{Gy(e,o)&&(r=r.add(o))}),r}ys(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}fs(e,t,r){return Cp()<=ea.$b.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Hp(t)),this.As.getDocumentsMatchingQuery(e,t,Zo.min(),r)}ws(e,t,r,i){return this.As.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}}const NN="LocalStore";class Tue{constructor(e,t,r,i){this.persistence=e,this.bs=t,this.serializer=i,this.Ss=new jn(lt),this.Ds=new Uc(o=>Ld(o),Hy),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new x4(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function B4(n,e,t,r){return new Tue(n,e,t,r)}function U4(n,e){return MN.apply(this,arguments)}function MN(){return(MN=(0,T.A)(function*(n,e){const t=Ne(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Fs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let c=wt();for(const u of i){s.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of o){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Ms:u,removedBatchIds:s,addedBatchIds:a}))})})})).apply(this,arguments)}function j4(n){const e=Ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function H4(n,e,t){let r=wt(),i=wt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Po();return t.forEach((a,c)=>{const u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(et.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||0===c.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):ve(NN,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{xs:s,Os:i}})}function Cue(n,e){const t=Ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function eg(n,e){const t=Ne(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ai.getTargetData(r,e).next(o=>o?(i=o,z.resolve(i)):t.ai.allocateTargetId(r).next(s=>(i=new Hc(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.ai.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ss.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(r.targetId,r),t.Ds.set(e,r.targetId)),r})}function tg(n,e,t){return PN.apply(this,arguments)}function PN(){return(PN=(0,T.A)(function*(n,e,t){const r=Ne(n),i=r.Ss.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!$l(s))throw s;ve(NN,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(i.target)})).apply(this,arguments)}function TT(n,e,t){const r=Ne(n);let i=et.min(),o=wt();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,h){const m=Ne(c),_=m.Ds.get(h);return void 0!==_?z.resolve(m.Ss.get(_)):m.ai.getTargetData(u,h)}(r,s,Bi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.bs.getDocumentsMatchingQuery(s,e,t?i:et.min(),t?o:wt())).next(a=>(z4(r,y3(e),a),{documents:a,Ns:o})))}function $4(n,e){const t=Ne(n),r=Ne(t.ai),i=t.Ss.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.Rt(o,e).next(s=>s?s.target:null))}function G4(n,e){const t=Ne(n),r=t.vs.get(e)||et.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Cs.getAllFromCollectionGroup(i,e,y$(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(z4(t,e,i),i))}function z4(n,e,t){let r=n.vs.get(e)||et.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.vs.set(e,r)}function ON(){return(ON=(0,T.A)(function*(n,e,t,r){const i=Ne(n);let o=wt(),s=Po();for(const u of t){const h=e.Bs(u.metadata.name);u.document&&(o=o.add(h));const m=e.Ls(u);m.setReadTime(e.ks(u.metadata.readTime)),s=s.insert(h,m)}const a=i.Cs.newChangeBuffer({trackRemovals:!0}),c=yield eg(i,(h=r,Bi(Up(Bt.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>H4(u,a,s).next(h=>(a.apply(u),h)).next(h=>i.ai.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.ai.addMatchingKeys(u,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,h.xs,h.Os)).next(()=>h.xs)))})).apply(this,arguments)}function Sue(n,e){return kN.apply(this,arguments)}function kN(){return(kN=(0,T.A)(function*(n,e,t=wt()){const r=yield eg(n,Bi(gN(e.bundledQuery))),i=Ne(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const s=Nr(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.ci.saveNamedQuery(o,e);const a=r.withResumeToken(Er.EMPTY_BYTE_STRING,s);return i.Ss=i.Ss.insert(a.targetId,a),i.ai.updateTargetData(o,a).next(()=>i.ai.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.ai.addMatchingKeys(o,t,r.targetId)).next(()=>i.ci.saveNamedQuery(o,e))})})).apply(this,arguments)}const W4="firestore_clients";function q4(n,e){return`${W4}_${n}_${e}`}const K4="firestore_mutations";function Q4(n,e,t){let r=`${K4}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const Y4="firestore_targets";function xN(n,e){return`${Y4}_${n}_${e}`}const Fa="SharedClientState";class wT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static qs(e,t,r){const i=JSON.parse(r);let o,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(o=new _e(i.error.code,i.error.message))),s?new wT(e,t,i.state,o):(Rr(Fa,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Qs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sv{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static qs(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new _e(r.error.code,r.error.message))),o?new sv(e,r.state,i):(Rr(Fa,`Failed to parse target state for ID '${e}': ${t}`),null)}Qs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class DT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static qs(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=rN();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=w$(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new DT(e,o):(Rr(Fa,`Failed to parse client data for instance '${e}': ${t}`),null)}}class FN{constructor(e,t){this.clientId=e,this.onlineState=t}static qs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new FN(t.clientId,t.onlineState):(Rr(Fa,`Failed to parse online state: ${e}`),null)}}class LN{constructor(){this.activeTargetIds=rN()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VN{constructor(e,t,r,i,o){this.window=e,this.bi=t,this.persistenceKey=r,this.Ks=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ws=this.Gs.bind(this),this.zs=new jn(lt),this.started=!1,this.js=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Hs=q4(this.persistenceKey,this.Ks),this.Js=`firestore_sequence_number_${this.persistenceKey}`,this.zs=this.zs.insert(this.Ks,new LN),this.Ys=new RegExp(`^${W4}_${s}_([^_]*)$`),this.Zs=new RegExp(`^${K4}_${s}_(\\d+)(?:_(.*))?$`),this.Xs=new RegExp(`^${Y4}_${s}_(\\d+)$`),this.eo=`firestore_online_state_${this.persistenceKey}`,this.no=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Ws)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,T.A)(function*(){const t=yield e.syncEngine.us();for(const i of t){if(i===e.Ks)continue;const o=e.getItem(q4(e.persistenceKey,i));if(o){const s=DT.qs(i,o);s&&(e.zs=e.zs.insert(s.clientId,s))}}e.ro();const r=e.storage.getItem(e.eo);if(r){const i=e.io(r);i&&e.so(i)}for(const i of e.js)e.Gs(i);e.js=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Js,JSON.stringify(e))}getAllActiveQueryTargets(){return this.oo(this.zs)}isActiveQueryTarget(e){let t=!1;return this.zs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this._o(e,"pending")}updateMutationState(e,t,r){this._o(e,t,r),this.ao(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(xN(this.persistenceKey,e));if(i){const o=sv.qs(e,i);o&&(r=o.state)}}return t&&this.uo.$s(e),this.ro(),r}removeLocalQueryTarget(e){this.uo.Us(e),this.ro()}isLocalQueryTarget(e){return this.uo.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(xN(this.persistenceKey,e))}updateQueryState(e,t,r){this.co(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.ao(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.lo(e)}notifyBundleLoaded(e){this.ho(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ws),this.removeItem(this.Hs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ve(Fa,"READ",e,t),t}setItem(e,t){ve(Fa,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ve(Fa,"REMOVE",e),this.storage.removeItem(e)}Gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ve(Fa,"EVENT",r.key,r.newValue),r.key===this.Hs)return void Rr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.bi.enqueueRetryable((0,T.A)(function*(){if(t.started){if(null!==r.key)if(t.Ys.test(r.key)){if(null==r.newValue){const i=t.Po(r.key);return t.To(i,null)}{const i=t.Io(r.key,r.newValue);if(i)return t.To(i.clientId,i)}}else if(t.Zs.test(r.key)){if(null!==r.newValue){const i=t.Eo(r.key,r.newValue);if(i)return t.Ao(i)}}else if(t.Xs.test(r.key)){if(null!==r.newValue){const i=t.Ro(r.key,r.newValue);if(i)return t.Vo(i)}}else if(r.key===t.eo){if(null!==r.newValue){const i=t.io(r.newValue);if(i)return t.so(i)}}else if(r.key===t.Js){const i=function(s){let a=es.le;if(null!=s)try{const c=JSON.parse(s);We("number"==typeof c,30636,{mo:s}),a=c}catch(c){Rr(Fa,"Failed to read sequence number from WebStorage",c)}return a}(r.newValue);i!==es.le&&t.sequenceNumberHandler(i)}else if(r.key===t.no){const i=t.fo(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.po(o)))}}else t.js.push(r)}))}}get uo(){return this.zs.get(this.Ks)}ro(){this.setItem(this.Hs,this.uo.Qs())}_o(e,t,r){const i=new wT(this.currentUser,e,t,r),o=Q4(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Qs())}ao(e){const t=Q4(this.persistenceKey,this.currentUser,e);this.removeItem(t)}lo(e){this.storage.setItem(this.eo,JSON.stringify({clientId:this.Ks,onlineState:e}))}co(e,t,r){const i=xN(this.persistenceKey,e),o=new sv(e,t,r);this.setItem(i,o.Qs())}ho(e){const t=JSON.stringify(Array.from(e));this.setItem(this.no,t)}Po(e){const t=this.Ys.exec(e);return t?t[1]:null}Io(e,t){const r=this.Po(e);return DT.qs(r,t)}Eo(e,t){const r=this.Zs.exec(e),i=Number(r[1]);return wT.qs(new si(void 0!==r[2]?r[2]:null),i,t)}Ro(e,t){const r=this.Xs.exec(e),i=Number(r[1]);return sv.qs(i,t)}io(e){return FN.qs(e)}fo(e){return JSON.parse(e)}Ao(e){var t=this;return(0,T.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.yo(e.batchId,e.state,e.error);ve(Fa,`Ignoring mutation for non-active user ${e.user.uid}`)})()}Vo(e){return this.syncEngine.wo(e.targetId,e.state,e.error)}To(e,t){const r=t?this.zs.insert(e,t):this.zs.remove(e),i=this.oo(this.zs),o=this.oo(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.bo(s,a).then(()=>{this.zs=r})}so(e){this.zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}oo(e){let t=rN();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class J4{constructor(){this.So=new LN,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,r){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new LN,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Rue{vo(e){}shutdown(){}}const Z4="ConnectivityMonitor";class X4{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){ve(Z4,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){ve(Z4,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let CT=null;function BN(){return null===CT?CT=268435456+Math.round(2147483648*Math.random()):CT++,"0x"+CT.toString(16)}const UN="RestConnection",Nue={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Mue{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${r}/databases/${i}`,this.qo=this.databaseId.database===Ly?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Qo(e,t,r,i,o){const s=BN(),a=this.$o(e,t.toUriEncodedString());ve(UN,`Sending RPC '${e}' ${s}:`,a,r);const c={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(c,i,o);const{host:u}=new URL(a),h=(0,Ct.zJ)(u);return this.Ko(e,a,c,r,h).then(m=>(ve(UN,`Received RPC '${e}' ${s}: `,m),m),m=>{throw Jo(UN,`RPC '${e}' ${s} failed with error: `,m,"url: ",a,"request:",r),m})}Wo(e,t,r,i,o,s){return this.Qo(e,t,r,i,o)}Uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Dp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}$o(e,t){return`${this.Lo}/v1/${t}:${Nue[e]}`}terminate(){}}class Pue{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}const ji="WebChannelConnection";class Oue extends Mue{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,r,i,o){const s=BN();return new Promise((a,c)=>{const u=new i$;u.setWithCredentials(!0),u.listenOnce(o$.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case VI.NO_ERROR:const m=u.getResponseJson();ve(ji,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(m)),a(m);break;case VI.TIMEOUT:ve(ji,`RPC '${e}' ${s} timed out`),c(new _e(Z.DEADLINE_EXCEEDED,"Request time out"));break;case VI.HTTP_ERROR:const _=u.getStatus();if(ve(ji,`RPC '${e}' ${s} failed with status:`,_,"response text:",u.getResponseText()),_>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const I=v?.error;if(I&&I.status&&I.message){const D=function(O){const P=O.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(P)>=0?P:Z.UNKNOWN}(I.status);c(new _e(D,I.message))}else c(new _e(Z.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new _e(Z.UNAVAILABLE,"Connection failed."));break;default:Ue(9055,{s_:e,streamId:s,o_:u.getLastErrorCode(),__:u.getLastError()})}}finally{ve(ji,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);ve(ji,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",h,r,15)})}a_(e,t,r){const i=BN(),o=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=c$(),a=a$(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Uo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const h=o.join("");ve(ji,`Creating RPC '${e}' stream ${i}: ${h}`,c);const m=s.createWebChannel(h,c);let _=!1,v=!1;const I=new Pue({Go:A=>{v?ve(ji,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(_||(ve(ji,`Opening RPC '${e}' stream ${i} transport.`),m.open(),_=!0),ve(ji,`RPC '${e}' stream ${i} sending:`,A),m.send(A))},zo:()=>m.close()}),D=(A,O,P)=>{A.listen(O,j=>{try{P(j)}catch(X){setTimeout(()=>{throw X},0)}})};return D(m,Ay.EventType.OPEN,()=>{v||(ve(ji,`RPC '${e}' stream ${i} transport opened.`),I.t_())}),D(m,Ay.EventType.CLOSE,()=>{v||(v=!0,ve(ji,`RPC '${e}' stream ${i} transport closed`),I.r_())}),D(m,Ay.EventType.ERROR,A=>{v||(v=!0,Jo(ji,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),I.r_(new _e(Z.UNAVAILABLE,"The operation could not be completed")))}),D(m,Ay.EventType.MESSAGE,A=>{var O;if(!v){const P=A.data[0];We(!!P,16349);const j=P,X=j?.error||(null===(O=j[0])||void 0===O?void 0:O.error);if(X){ve(ji,`RPC '${e}' stream ${i} received error:`,X);const ae=X.status;let we=function(F){const U=Hr[F];if(void 0!==U)return L3(U)}(ae),x=X.message;void 0===we&&(we=Z.INTERNAL,x="Unknown error status: "+ae+" with message "+X.message),v=!0,I.r_(new _e(we,x)),m.close()}else ve(ji,`RPC '${e}' stream ${i} received:`,P),I.i_(P)}}),D(a,s$.STAT_EVENT,A=>{A.stat===RR.PROXY?ve(ji,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===RR.NOPROXY&&ve(ji,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.n_()},0),I}}function eG(){return typeof window<"u"?window:null}function AT(){return typeof document<"u"?document:null}function av(n){return new Ble(n,!0)}class jN{constructor(e,t,r=1e3,i=1.5,o=6e4){this.bi=e,this.timerId=t,this.u_=r,this.c_=i,this.l_=o,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),i=Math.max(0,t-r);i>0&&ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){null!==this.P_&&(this.P_.skipDelay(),this.P_=null)}cancel(){null!==this.P_&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}const tG="PersistentStream";class nG{constructor(e,t,r,i,o,s,a,c){this.bi=e,this.R_=r,this.V_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new jN(e,t)}w_(){return 1===this.state||5===this.state||this.b_()}b_(){return 2===this.state||3===this.state}start(){this.p_=0,4!==this.state?this.auth():this.S_()}stop(){var e=this;return(0,T.A)(function*(){e.w_()&&(yield e.close(0))})()}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&null===this.f_&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}C_(){var e=this;return(0,T.A)(function*(){if(e.b_())return e.close(0)})()}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}close(e,t){var r=this;return(0,T.A)(function*(){r.M_(),r.x_(),r.y_.cancel(),r.m_++,4!==e?r.y_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Rr(t.toString()),Rr("Using maximum backoff delay to prevent overloading the backend."),r.y_.I_()):t&&t.code===Z.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.O_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zo(t)})()}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.m_===t&&this.B_(r,i)},r=>{e(()=>{const i=new _e(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(i)})})}B_(e,t){const r=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(i=>{r(()=>this.L_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.p_?this.q_(i):this.onNext(i))})}S_(){var e=this;this.state=5,this.y_.E_((0,T.A)(function*(){e.state=0,e.start()}))}L_(e){return ve(tG,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(ve(tG,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kue extends nG{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=function Hle(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:Ue(39313,{state:u}),i=e.targetChange.targetIds||[],o=function(u,h){return u.useProto3Json?(We(void 0===h||"string"==typeof h,58123),Er.fromBase64String(h||"")):(We(void 0===h||h instanceof Buffer||h instanceof Uint8Array,16193),Er.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){const h=void 0===u.code?Z.UNKNOWN:L3(u.code);return new _e(h,u.message||"")}(s);t=new j3(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=xa(n,r.document.name),o=Nr(r.document.updateTime),s=r.document.createTime?Nr(r.document.createTime):et.min(),a=new vi({mapValue:{fields:r.document.fields}}),c=Wn.newFoundDocument(i,o,s,a);t=new uT(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=xa(n,r.document),o=r.readTime?Nr(r.readTime):et.min(),s=Wn.newNoDocument(i,o);t=new uT([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=xa(n,r.document);t=new uT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ue(11601,{Vt:e});{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new Ole(i,o);t=new U3(r.targetId,s)}}var u;return t}(this.serializer,e),r=function(o){if(!("targetChange"in o))return et.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?et.min():s.readTime?Nr(s.readTime):et.min()}(e);return this.listener.Q_(t,r)}U_(e){const t={};t.database=fN(this.serializer),t.addTarget=function(o,s){let a;const c=s.target;if(a=rT(c)?{documents:J3(o,c)}:{query:hT(o,c).gt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=G3(o,s.resumeToken);const u=uN(o,s.expectedCount);null!==u&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(et.min())>0){a.readTime=qp(o,s.snapshotVersion.toTimestamp());const u=uN(o,s.expectedCount);null!==u&&(a.expectedCount=u)}return a}(this.serializer,e);const r=function Gle(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue(28987,{purpose:i})}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.F_(t)}K_(e){const t={};t.database=fN(this.serializer),t.removeTarget=e,this.F_(t)}}class xue extends nG{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||0===e.writeResults.length,55816),this.listener.z_()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=function $le(n,e){return n&&n.length>0?(We(void 0!==e,14353),n.map(t=>function(i,o){let s=Nr(i.updateTime?i.updateTime:o);return s.isEqual(et.min())&&(s=Nr(o)),new Nle(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Nr(e.commitTime);return this.listener.j_(r,t)}H_(){const e={};e.database=fN(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Xy(this.serializer,r))};this.F_(t)}}class Fue{}class Lue extends Fue{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new _e(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Qo(e,hN(t,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _e(Z.UNKNOWN,o.toString())})}Wo(e,t,r,i,o){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Wo(e,hN(t,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new _e(Z.UNKNOWN,s.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class Vue{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){0===this.Z_&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){"Online"===this.state?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,"Online"===e&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Rr(t),this.ea=!1):ve("OnlineStateTracker",t)}sa(){null!==this.X_&&(this.X_.cancel(),this.X_=null)}}const qd="RemoteStore";class Bue{constructor(e,t,r,i,o){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=o,this.ca.vo(a=>{r.enqueueAndForget((0,T.A)(function*(){var c;nu(s)&&(ve(qd,"Restarting streams for network reachability change."),yield(c=(0,T.A)(function*(h){const m=Ne(h);m.aa.add(4),yield ng(m),m.la.set("Unknown"),m.aa.delete(4),yield cv(m)}),function u(h){return c.apply(this,arguments)})(s))}))}),this.la=new Vue(r,i)}}function cv(n){return HN.apply(this,arguments)}function HN(){return(HN=(0,T.A)(function*(n){if(nu(n))for(const e of n.ua)yield e(!0)})).apply(this,arguments)}function ng(n){return $N.apply(this,arguments)}function $N(){return($N=(0,T.A)(function*(n){for(const e of n.ua)yield e(!1)})).apply(this,arguments)}function ST(n,e){const t=Ne(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),WN(t)?zN(t):og(t).b_()&&GN(t,e))}function rg(n,e){const t=Ne(n),r=og(t);t._a.delete(e),r.b_()&&rG(t,e),0===t._a.size&&(r.b_()?r.v_():nu(t)&&t.la.set("Unknown"))}function GN(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(et.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}og(n).U_(e)}function rG(n,e){n.ha.Ke(e),og(n).K_(e)}function zN(n){n.ha=new xle({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),og(n).start(),n.la.ta()}function WN(n){return nu(n)&&!og(n).w_()&&n._a.size>0}function nu(n){return 0===Ne(n).aa.size}function iG(n){n.ha=void 0}function Uue(n){return qN.apply(this,arguments)}function qN(){return(qN=(0,T.A)(function*(n){n.la.set("Online")})).apply(this,arguments)}function jue(n){return KN.apply(this,arguments)}function KN(){return(KN=(0,T.A)(function*(n){n._a.forEach((e,t)=>{GN(n,e)})})).apply(this,arguments)}function Hue(n,e){return QN.apply(this,arguments)}function QN(){return(QN=(0,T.A)(function*(n,e){iG(n),WN(n)?(n.la.ia(e),zN(n)):n.la.set("Unknown")})).apply(this,arguments)}function $ue(n,e,t){return YN.apply(this,arguments)}function YN(){return YN=(0,T.A)(function*(n,e,t){if(n.la.set("Online"),e instanceof j3&&2===e.state&&e.cause)try{yield(r=(0,T.A)(function*(o,s){const a=s.cause;for(const c of s.targetIds)o._a.has(c)&&(yield o.remoteSyncer.rejectListen(c,a),o._a.delete(c),o.ha.removeTarget(c))}),function i(o,s){return r.apply(this,arguments)})(n,e)}catch(r){ve(qd,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield RT(n,r)}else if(e instanceof uT?n.ha.Xe(e):e instanceof U3?n.ha.ot(e):n.ha.nt(e),!t.isEqual(et.min()))try{const r=yield j4(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){const a=o.ha.It(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=o._a.get(u);h&&o._a.set(u,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{const h=o._a.get(c);if(!h)return;o._a.set(c,h.withResumeToken(Er.EMPTY_BYTE_STRING,h.snapshotVersion)),rG(o,c);const m=new Hc(h.target,c,u,h.sequenceNumber);GN(o,m)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ve(qd,"Failed to raise snapshot:",r),yield RT(n,r)}var r}),YN.apply(this,arguments)}function RT(n,e,t){return JN.apply(this,arguments)}function JN(){return(JN=(0,T.A)(function*(n,e,t){if(!$l(e))throw e;n.aa.add(1),yield ng(n),n.la.set("Offline"),t||(t=()=>j4(n.localStore)),n.asyncQueue.enqueueRetryable((0,T.A)(function*(){ve(qd,"Retrying IndexedDB access"),yield t(),n.aa.delete(1),yield cv(n)}))})).apply(this,arguments)}function oG(n,e){return e().catch(t=>RT(n,t,e))}function ig(n){return ZN.apply(this,arguments)}function ZN(){return(ZN=(0,T.A)(function*(n){const e=Ne(n),t=ru(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:-1;for(;Gue(e);)try{const i=yield Cue(e.localStore,r);if(null===i){0===e.oa.length&&t.v_();break}r=i.batchId,zue(e,i)}catch(i){yield RT(e,i)}sG(e)&&aG(e)})).apply(this,arguments)}function Gue(n){return nu(n)&&n.oa.length<10}function zue(n,e){n.oa.push(e);const t=ru(n);t.b_()&&t.W_&&t.G_(e.mutations)}function sG(n){return nu(n)&&!ru(n).w_()&&n.oa.length>0}function aG(n){ru(n).start()}function Wue(n){return XN.apply(this,arguments)}function XN(){return(XN=(0,T.A)(function*(n){ru(n).H_()})).apply(this,arguments)}function que(n){return eM.apply(this,arguments)}function eM(){return(eM=(0,T.A)(function*(n){const e=ru(n);for(const t of n.oa)e.G_(t.mutations)})).apply(this,arguments)}function Kue(n,e,t){return tM.apply(this,arguments)}function tM(){return(tM=(0,T.A)(function*(n,e,t){const r=n.oa.shift(),i=aN.from(r,e,t);yield oG(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ig(n)})).apply(this,arguments)}function Que(n,e){return nM.apply(this,arguments)}function nM(){return nM=(0,T.A)(function*(n,e){var t;e&&ru(n).W_&&(yield(t=(0,T.A)(function*(i,o){if(F3(a=o.code)&&a!==Z.ABORTED){const s=i.oa.shift();ru(i).D_(),yield oG(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield ig(i)}var a}),function r(i,o){return t.apply(this,arguments)})(n,e)),sG(n)&&aG(n)}),nM.apply(this,arguments)}function cG(n,e){return rM.apply(this,arguments)}function rM(){return(rM=(0,T.A)(function*(n,e){const t=Ne(n);t.asyncQueue.verifyOperationInProgress(),ve(qd,"RemoteStore received new credentials");const r=nu(t);t.aa.add(3),yield ng(t),r&&t.la.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),yield cv(t)})).apply(this,arguments)}function iM(n,e){return oM.apply(this,arguments)}function oM(){return(oM=(0,T.A)(function*(n,e){const t=Ne(n);e?(t.aa.delete(2),yield cv(t)):e||(t.aa.add(2),yield ng(t),t.la.set("Unknown"))})).apply(this,arguments)}function og(n){return n.Pa||(n.Pa=function(t,r,i){const o=Ne(t);return o.Y_(),new kue(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{jo:Uue.bind(null,n),Jo:jue.bind(null,n),Zo:Hue.bind(null,n),Q_:$ue.bind(null,n)}),n.ua.push(function(){var e=(0,T.A)(function*(t){t?(n.Pa.D_(),WN(n)?zN(n):n.la.set("Unknown")):(yield n.Pa.stop(),iG(n))});return function(t){return e.apply(this,arguments)}}())),n.Pa}function ru(n){return n.Ta||(n.Ta=function(t,r,i){const o=Ne(t);return o.Y_(),new xue(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:Wue.bind(null,n),Zo:Que.bind(null,n),z_:que.bind(null,n),j_:Kue.bind(null,n)}),n.ua.push(function(){var e=(0,T.A)(function*(t){t?(n.Ta.D_(),yield ig(n)):(yield n.Ta.stop(),n.oa.length>0&&(ve(qd,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))});return function(t){return e.apply(this,arguments)}}())),n.Ta}class sM{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const s=Date.now()+r,a=new sM(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _e(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sg(n,e){if(Rr("AsyncQueue",`${e}: ${n}`),$l(n))return new _e(Z.UNAVAILABLE,`${e}: ${n}`);throw n}class ag{static emptySet(e){return new ag(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ke.comparator(t.key,r.key):(t,r)=>ke.comparator(t.key,r.key),this.keyedMap=zy(),this.sortedSet=new jn(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ag)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ag;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class lG{constructor(){this.Ia=new jn(ke.comparator)}track(e){const t=e.doc.key,r=this.Ia.get(t);r?0!==e.type&&3===r.type?this.Ia=this.Ia.insert(t,e):3===e.type&&1!==r.type?this.Ia=this.Ia.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Ia=this.Ia.remove(t):1===e.type&&2===r.type?this.Ia=this.Ia.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Ue(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,r)=>{e.push(r)}),e}}class cg{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){const s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new cg(e,t,ag.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$y(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Yue{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class Jue{constructor(){this.queries=uG(),this.onlineState="Unknown",this.fa=new Set}terminate(){!function(t,r){const i=Ne(t),o=i.queries;i.queries=uG(),o.forEach((s,a)=>{for(const c of a.Ra)c.onError(r)})}(this,new _e(Z.ABORTED,"Firestore shutting down"))}}function uG(){return new Uc(n=>_3(n),$y)}function aM(n,e){return cM.apply(this,arguments)}function cM(){return(cM=(0,T.A)(function*(n,e){const t=Ne(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.Va()&&e.ma()&&(r=2):(o=new Yue,r=e.ma()?0:1);try{switch(r){case 0:o.Aa=yield t.onListen(i,!0);break;case 1:o.Aa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){const a=sg(s,`Initialization of query '${Hp(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Ra.push(e),e.ga(t.onlineState),o.Aa&&e.pa(o.Aa)&&dM(t)})).apply(this,arguments)}function lM(n,e){return uM.apply(this,arguments)}function uM(){return(uM=(0,T.A)(function*(n,e){const t=Ne(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const s=o.Ra.indexOf(e);s>=0&&(o.Ra.splice(s,1),0===o.Ra.length?i=e.ma()?0:1:!o.Va()&&e.ma()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function Zue(n,e){const t=Ne(n);let r=!1;for(const i of e){const s=t.queries.get(i.query);if(s){for(const a of s.Ra)a.pa(i)&&(r=!0);s.Aa=i}}r&&dM(t)}function Xue(n,e,t){const r=Ne(n),i=r.queries.get(e);if(i)for(const o of i.Ra)o.onError(t);r.queries.delete(e)}function dM(n){n.fa.forEach(e=>{e.next()})}var hM,dG;(dG=hM||(hM={})).ya="default",dG.Cache="cache";class fM{constructor(e,t,r){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new cg(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){return!e.fromCache||!this.ma()||(!this.options.Fa||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Da(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Ca(e){e=cg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==hM.Cache}}class ede{constructor(e,t){this.Ma=e,this.byteLength=t}xa(){return"metadata"in this.Ma}}class hG{constructor(e){this.serializer=e}Bs(e){return xa(this.serializer,e)}Ls(e){return e.metadata.exists?Y3(this.serializer,e.document,!1):Wn.newNoDocument(this.Bs(e.metadata.name),this.ks(e.metadata.readTime))}ks(e){return Nr(e)}}class tde{constructor(e,t,r){this.Oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=fG(e)}Na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ma.namedQuery)this.queries.push(e.Ma.namedQuery);else if(e.Ma.documentMetadata){this.documents.push({metadata:e.Ma.documentMetadata}),e.Ma.documentMetadata.exists||++t;const r=Bt.fromString(e.Ma.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Ma.document&&(this.documents[this.documents.length-1].document=e.Ma.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ba(e){const t=new Map,r=new hG(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.Bs(i.metadata.name);for(const s of i.metadata.queries){const a=(t.get(s)||wt()).add(o);t.set(s,a)}}return t}complete(){var e=this;return(0,T.A)(function*(){const t=yield function Aue(n,e,t,r){return ON.apply(this,arguments)}(e.localStore,new hG(e.serializer),e.documents,e.Oa.id),r=e.Ba(e.documents);for(const i of e.queries)yield Sue(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,La:e.collectionGroups,ka:t}})()}}function fG(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class pG{constructor(e){this.key=e}}class gG{constructor(e){this.key=e}}class mG{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=wt(),this.mutatedKeys=wt(),this.Ua=v3(e),this.Ka=new ag(this.Ua)}get Wa(){return this.qa}Ga(e,t){const r=t?t.za:new lG,i=t?t.Ka:this.Ka;let o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{const _=i.get(h),v=Gy(this.query,m)?m:null,I=!!_&&this.mutatedKeys.has(_.key),D=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let A=!1;_&&v?_.data.isEqual(v.data)?I!==D&&(r.track({type:3,doc:v}),A=!0):this.ja(_,v)||(r.track({type:2,doc:v}),A=!0,(c&&this.Ua(v,c)>0||u&&this.Ua(v,u)<0)&&(a=!0)):!_&&v?(r.track({type:0,doc:v}),A=!0):_&&!v&&(r.track({type:1,doc:_}),A=!0,(c||u)&&(a=!0)),A&&(v?(s=s.add(v),o=D?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const h="F"===this.query.limitType?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ka:s,za:r,ys:a,mutatedKeys:o}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const s=e.za.da();s.sort((h,m)=>function(v,I){const D=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue(20277,{Vt:A})}};return D(v)-D(I)}(h.type,m.type)||this.Ua(h.doc,m.doc)),this.Ha(r),i=null!=i&&i;const a=t&&!i?this.Ja():[],c=0===this.$a.size&&this.current&&!i?1:0,u=c!==this.Qa;return this.Qa=c,0!==s.length||u?{snapshot:new cg(this.query,e.Ka,o,s,e.mutatedKeys,0===c,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:a}:{Ya:a}}ga(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new lG,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=wt(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const t=[];return e.forEach(r=>{this.$a.has(r)||t.push(new gG(r))}),this.$a.forEach(r=>{e.has(r)||t.push(new pG(r))}),t}Xa(e){this.qa=e.Ns,this.$a=wt();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return cg.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,0===this.Qa,this.hasCachedResults)}}const iu="SyncEngine";class nde{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class rde{constructor(e){this.key=e,this.tu=!1}}class ide{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.nu={},this.ru=new Uc(a=>_3(a),$y),this.iu=new Map,this.su=new Set,this.ou=new jn(ke.comparator),this._u=new Map,this.au=new IN,this.uu={},this.cu=new Map,this.lu=zd.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return!0===this.hu}}function ode(n,e){return pM.apply(this,arguments)}function pM(){return(pM=(0,T.A)(function*(n,e,t=!0){const r=NT(n);let i;const o=r.ru.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.eu()):i=yield _G(r,e,t,!0),i})).apply(this,arguments)}function sde(n,e){return gM.apply(this,arguments)}function gM(){return(gM=(0,T.A)(function*(n,e){const t=NT(n);yield _G(t,e,!0,!1)})).apply(this,arguments)}function _G(n,e,t,r){return mM.apply(this,arguments)}function mM(){return(mM=(0,T.A)(function*(n,e,t,r){const i=yield eg(n.localStore,Bi(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t);let a;return r&&(a=yield _M(n,e,o,"current"===s,i.resumeToken)),n.isPrimaryClient&&t&&ST(n.remoteStore,i),a})).apply(this,arguments)}function _M(n,e,t,r,i){return yM.apply(this,arguments)}function yM(){return yM=(0,T.A)(function*(n,e,t,r,i){n.Pu=(m,_,v)=>{return(I=(0,T.A)(function*(A,O,P,j){let X=O.view.Ga(P);X.ys&&(X=yield TT(A.localStore,O.query,!1).then(({documents:S})=>O.view.Ga(S,X)));const ae=j&&j.targetChanges.get(O.targetId),we=j&&null!=j.targetMismatches.get(O.targetId),x=O.view.applyChanges(X,A.isPrimaryClient,ae,we);return RM(A,O.targetId,x.Ya),x.snapshot}),function D(A,O,P,j){return I.apply(this,arguments)})(n,m,_,v);var I};const o=yield TT(n.localStore,e,!0),s=new mG(e,o.Ns),a=s.Ga(o.documents),c=Jy.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),u=s.applyChanges(a,n.isPrimaryClient,c);RM(n,t,u.Ya);const h=new nde(e,t,s);return n.ru.set(e,h),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),u.snapshot}),yM.apply(this,arguments)}function ade(n,e,t){return vM.apply(this,arguments)}function vM(){return(vM=(0,T.A)(function*(n,e,t){const r=Ne(n),i=r.ru.get(e),o=r.iu.get(i.targetId);if(o.length>1)return r.iu.set(i.targetId,o.filter(s=>!$y(s,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield tg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&rg(r.remoteStore,i.targetId),lg(r,i.targetId)}).catch(Hl))):(lg(r,i.targetId),yield tg(r.localStore,i.targetId,!0))})).apply(this,arguments)}function cde(n,e){return EM.apply(this,arguments)}function EM(){return(EM=(0,T.A)(function*(n,e){const t=Ne(n),r=t.ru.get(e),i=t.iu.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),rg(t.remoteStore,r.targetId))})).apply(this,arguments)}function bM(){return(bM=(0,T.A)(function*(n,e,t){const r=UM(n);try{const i=yield function(s,a){const c=Ne(s),u=nr.now(),h=a.reduce((v,I)=>v.add(I.key),wt());let m,_;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let I=Po(),D=wt();return c.Cs.getEntries(v,h).next(A=>{I=A,I.forEach((O,P)=>{P.isValidDocument()||(D=D.add(O))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,I)).next(A=>{m=A;const O=[];for(const P of a){const j=Ple(P,m.get(P.key).overlayedDocument);null!=j&&O.push(new jc(P.key,j,t3(j.value.mapValue),ir.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,O,a)}).next(A=>{_=A;const O=A.applyToLocalDocumentSet(m,D);return c.documentOverlayCache.saveOverlays(v,A.batchId,O)})}).then(()=>({batchId:_.batchId,changes:b3(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.uu[s.currentUser.toKey()];u||(u=new jn(lt)),u=u.insert(a,c),s.uu[s.currentUser.toKey()]=u}(r,i.batchId,t),yield $c(r,i.changes),yield ig(r.remoteStore)}catch(i){const o=sg(i,"Failed to persist write");t.reject(o)}})).apply(this,arguments)}function yG(n,e){return IM.apply(this,arguments)}function IM(){return(IM=(0,T.A)(function*(n,e){const t=Ne(n);try{const r=yield function Due(n,e){const t=Ne(n),r=e.snapshotVersion;let i=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=t.Cs.newChangeBuffer({trackRemovals:!0});i=t.Ss;const a=[];e.targetChanges.forEach((h,m)=>{const _=i.get(m);if(!_)return;a.push(t.ai.removeMatchingKeys(o,h.removedDocuments,m).next(()=>t.ai.addMatchingKeys(o,h.addedDocuments,m)));let v=_.withSequenceNumber(o.currentSequenceNumber);var D,A,O;null!==e.targetMismatches.get(m)?v=v.withResumeToken(Er.EMPTY_BYTE_STRING,et.min()).withLastLimboFreeSnapshotVersion(et.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(m,v),A=v,O=h,(0===(D=_).resumeToken.approximateByteSize()||A.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8||O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0)&&a.push(t.ai.updateTargetData(o,v))});let c=Po(),u=wt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(H4(o,s,e.documentUpdates).next(h=>{c=h.xs,u=h.Os})),!r.isEqual(et.min())){const h=t.ai.getLastRemoteSnapshotVersion(o).next(m=>t.ai.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return z.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.Ss=i,o))}(t.localStore,e);e.targetChanges.forEach((i,o)=>{const s=t._u.get(o);s&&(We(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.tu=!0:i.modifiedDocuments.size>0?We(s.tu,14607):i.removedDocuments.size>0&&(We(s.tu,42227),s.tu=!1))}),yield $c(t,r,e)}catch(r){yield Hl(r)}})).apply(this,arguments)}function vG(n,e,t){const r=Ne(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ru.forEach((o,s)=>{const a=s.view.ga(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const c=Ne(s);c.onlineState=a;let u=!1;c.queries.forEach((h,m)=>{for(const _ of m.Ra)_.ga(a)&&(u=!0)}),u&&dM(c)}(r.eventManager,e),i.length&&r.nu.Q_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ude(n,e,t){return TM.apply(this,arguments)}function TM(){return(TM=(0,T.A)(function*(n,e,t){const r=Ne(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r._u.get(e),o=i&&i.key;if(o){let s=new jn(ke.comparator);s=s.insert(o,Wn.newNoDocument(o,et.min()));const a=wt().add(o),c=new Yy(et.min(),new Map,new jn(lt),s,a);yield yG(r,c),r.ou=r.ou.remove(o),r._u.delete(e),NM(r)}else yield tg(r.localStore,e,!1).then(()=>lg(r,e,t)).catch(Hl)})).apply(this,arguments)}function dde(n,e){return wM.apply(this,arguments)}function wM(){return(wM=(0,T.A)(function*(n,e){const t=Ne(n),r=e.batch.batchId;try{const i=yield function wue(n,e){const t=Ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Cs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,h){const m=u.batch,_=m.keys();let v=z.resolve();return _.forEach(I=>{v=v.next(()=>h.getEntry(c,I)).next(D=>{const A=u.docVersions.get(I);We(null!==A,48541),D.version.compareTo(A)<0&&(m.applyToRemoteDocument(D,u),D.isValidDocument()&&(D.setReadTime(u.commitVersion),h.addEntry(D)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=wt();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);SM(t,r,null),AM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield $c(t,i)}catch(i){yield Hl(i)}})).apply(this,arguments)}function hde(n,e,t){return DM.apply(this,arguments)}function DM(){return(DM=(0,T.A)(function*(n,e,t){const r=Ne(n);try{const i=yield function(s,a){const c=Ne(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next(m=>(We(null!==m,37113),h=m.keys(),c.mutationQueue.removeMutationBatch(u,m))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);SM(r,e,t),AM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield $c(r,i)}catch(i){yield Hl(i)}})).apply(this,arguments)}function CM(){return(CM=(0,T.A)(function*(n,e){const t=Ne(n);nu(t.remoteStore)||ve(iu,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const a=Ne(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===r)return void e.resolve();const i=t.cu.get(r)||[];i.push(e),t.cu.set(r,i)}catch(r){const i=sg(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function AM(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function SM(n,e,t){const r=Ne(n);let i=r.uu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.uu[r.currentUser.toKey()]=i}}function lg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.iu.get(e))n.ru.delete(r),t&&n.nu.Tu(r,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(r=>{n.au.containsKey(r)||EG(n,r)})}function EG(n,e){n.su.delete(e.path.canonicalString());const t=n.ou.get(e);null!==t&&(rg(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),NM(n))}function RM(n,e,t){for(const r of t)r instanceof pG?(n.au.addReference(r.key,e),pde(n,r)):r instanceof gG?(ve(iu,"Document no longer in limbo: "+r.key),n.au.removeReference(r.key,e),n.au.containsKey(r.key)||EG(n,r.key)):Ue(19791,{Iu:r})}function pde(n,e){const t=e.key,r=t.path.canonicalString();n.ou.get(t)||n.su.has(r)||(ve(iu,"New document in limbo: "+t),n.su.add(r),NM(n))}function NM(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){const e=n.su.values().next().value;n.su.delete(e);const t=new ke(Bt.fromString(e)),r=n.lu.next();n._u.set(r,new rde(t)),n.ou=n.ou.insert(t,r),ST(n.remoteStore,new Hc(Bi(Up(t.path)),r,"TargetPurposeLimboResolution",es.le))}}function $c(n,e,t){return MM.apply(this,arguments)}function MM(){return MM=(0,T.A)(function*(n,e,t){const r=Ne(n),i=[],o=[],s=[];var a;r.ru.isEmpty()||(r.ru.forEach((a,c)=>{s.push(r.Pu(c,e,t).then(u=>{var h;if((u||t)&&r.isPrimaryClient){const m=u?!u.fromCache:null===(h=t?.targetChanges.get(c.targetId))||void 0===h?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(u){i.push(u);const m=RN.Ps(c.targetId,u);o.push(m)}}))}),yield Promise.all(s),r.nu.Q_(i),yield(a=(0,T.A)(function*(u,h){const m=Ne(u);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>z.forEach(h,v=>z.forEach(v.ls,I=>m.persistence.referenceDelegate.addReference(_,v.targetId,I)).next(()=>z.forEach(v.hs,I=>m.persistence.referenceDelegate.removeReference(_,v.targetId,I)))))}catch(_){if(!$l(_))throw _;ve(NN,"Failed to update sequence numbers: "+_)}for(const _ of h){const v=_.targetId;if(!_.fromCache){const I=m.Ss.get(v),A=I.withLastLimboFreeSnapshotVersion(I.snapshotVersion);m.Ss=m.Ss.insert(v,A)}}}),function c(u,h){return a.apply(this,arguments)})(r.localStore,o))}),MM.apply(this,arguments)}function gde(n,e){return PM.apply(this,arguments)}function PM(){return(PM=(0,T.A)(function*(n,e){const t=Ne(n);if(!t.currentUser.isEqual(e)){ve(iu,"User change. New user:",e.toKey());const r=yield U4(t.localStore,e);t.currentUser=e,(o=t).cu.forEach(a=>{a.forEach(c=>{c.reject(new _e(Z.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.cu.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield $c(t,r.Ms)}var o})).apply(this,arguments)}function mde(n,e){const t=Ne(n),r=t._u.get(e);if(r&&r.tu)return wt().add(r.key);{let i=wt();const o=t.iu.get(e);if(!o)return i;for(const s of o){const a=t.ru.get(s);i=i.unionWith(a.view.Wa)}return i}}function _de(n,e){return OM.apply(this,arguments)}function OM(){return(OM=(0,T.A)(function*(n,e){const t=Ne(n),r=yield TT(t.localStore,e.query,!0),i=e.view.Xa(r);return t.isPrimaryClient&&RM(t,e.targetId,i.Ya),i})).apply(this,arguments)}function yde(n,e){return kM.apply(this,arguments)}function kM(){return(kM=(0,T.A)(function*(n,e){const t=Ne(n);return G4(t.localStore,e).then(r=>$c(t,r))})).apply(this,arguments)}function vde(n,e,t,r){return xM.apply(this,arguments)}function xM(){return(xM=(0,T.A)(function*(n,e,t,r){const i=Ne(n),o=yield function(a,c){const u=Ne(a),h=Ne(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",m=>h.Hn(m,c).next(_=>_?u.localDocuments.getDocuments(m,_):z.resolve(null)))}(i.localStore,e);var c;null!==o?("pending"===t?yield ig(i.remoteStore):"acknowledged"===t||"rejected"===t?(SM(i,e,r||null),AM(i,e),c=e,Ne(Ne(i.localStore).mutationQueue).Xn(c)):Ue(6720,"Unknown batchState",{Eu:t}),yield $c(i,o)):ve(iu,"Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function FM(){return(FM=(0,T.A)(function*(n,e){const t=Ne(n);if(NT(t),UM(t),!0===e&&!0!==t.hu){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield bG(t,r.toArray());t.hu=!0,yield iM(t.remoteStore,!0);for(const o of i)ST(t.remoteStore,o)}else if(!1===e&&!1!==t.hu){const r=[];let i=Promise.resolve();t.iu.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(lg(t,s),tg(t.localStore,s,!0))),rg(t.remoteStore,s)}),yield i,yield bG(t,r),function(s){const a=Ne(s);a._u.forEach((c,u)=>{rg(a.remoteStore,u)}),a.au.Kr(),a._u=new Map,a.ou=new jn(ke.comparator)}(t),t.hu=!1,yield iM(t.remoteStore,!1)}})).apply(this,arguments)}function bG(n,e,t){return LM.apply(this,arguments)}function LM(){return(LM=(0,T.A)(function*(n,e,t){const r=Ne(n),i=[],o=[];for(const s of e){let a;const c=r.iu.get(s);if(c&&0!==c.length){a=yield eg(r.localStore,Bi(c[0]));for(const u of c){const h=r.ru.get(u),m=yield _de(r,h);m.snapshot&&o.push(m.snapshot)}}else{const u=yield $4(r.localStore,s);a=yield eg(r.localStore,u),yield _M(r,IG(u),s,!1,a.resumeToken)}i.push(a)}return r.nu.Q_(o),i})).apply(this,arguments)}function IG(n){return f3(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function bde(n){return t=Ne(n).localStore,Ne(Ne(t).persistence).us();var t}function Ide(n,e,t,r){return VM.apply(this,arguments)}function VM(){return(VM=(0,T.A)(function*(n,e,t,r){const i=Ne(n);if(i.hu)return void ve(iu,"Ignoring unexpected query state notification.");const o=i.iu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const s=yield G4(i.localStore,y3(o[0])),a=Yy.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Er.EMPTY_BYTE_STRING);yield $c(i,s,a);break}case"rejected":yield tg(i.localStore,e,!0),lg(i,e,r);break;default:Ue(64155,t)}})).apply(this,arguments)}function Tde(n,e,t){return BM.apply(this,arguments)}function BM(){return(BM=(0,T.A)(function*(n,e,t){const r=NT(n);if(r.hu){for(const i of e){if(r.iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ve(iu,"Adding an already active target "+i);continue}const o=yield $4(r.localStore,i),s=yield eg(r.localStore,o);yield _M(r,IG(o),s.targetId,!1,s.resumeToken),ST(r.remoteStore,s)}for(const i of t)r.iu.has(i)&&(yield tg(r.localStore,i,!1).then(()=>{rg(r.remoteStore,i),lg(r,i)}).catch(Hl))}})).apply(this,arguments)}function NT(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yG.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mde.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ude.bind(null,e),e.nu.Q_=Zue.bind(null,e.eventManager),e.nu.Tu=Xue.bind(null,e.eventManager),e}function UM(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dde.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hde.bind(null,e),e}let MT=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return(0,T.A)(function*(){r.serializer=av(t.databaseInfo.databaseId),r.sharedClientState=r.Au(t),r.persistence=r.Ru(t),yield r.persistence.start(),r.localStore=r.Vu(t),r.gcScheduler=r.mu(t,r.localStore),r.indexBackfillerScheduler=r.fu(t,r.localStore)})()}mu(t,r){return null}fu(t,r){return null}Vu(t){return B4(this.persistence,new V4,t.initialUser,this.serializer)}Ru(t){return new TN(ET.Ei,this.serializer)}Au(t){return new J4}terminate(){var t=this;return(0,T.A)(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class jM extends MT{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){return We(this.persistence.referenceDelegate instanceof bT,46915),new S4(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ru(e){const t=void 0!==this.cacheSizeBytes?Ui.withCacheSize(this.cacheSizeBytes):Ui.DEFAULT;return new TN(r=>bT.Ei(r,t),this.serializer)}}class HM extends MT{constructor(e,t,r){super(),this.gu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,T.A)(function*(){yield t().call(r,e),yield r.gu.initialize(r,e),yield UM(r.gu.syncEngine),yield ig(r.gu.remoteStore),yield r.persistence.Ki(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Vu(e){return B4(this.persistence,new V4,e.initialUser,this.serializer)}mu(e,t){return new S4(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}fu(e,t){const r=new Fce(t,this.persistence);return new xce(e.asyncQueue,r)}Ru(e){const t=SN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ui.withCacheSize(this.cacheSizeBytes):Ui.DEFAULT;return new AN(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,eG(),AT(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Au(e){return new J4}}class TG extends HM{constructor(e,t){super(e,t,!1),this.gu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,T.A)(function*(){yield t().call(r,e);const i=r.gu.syncEngine;r.sharedClientState instanceof VN&&(r.sharedClientState.syncEngine={yo:vde.bind(null,i),wo:Ide.bind(null,i),bo:Tde.bind(null,i),us:bde.bind(null,i),po:yde.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ki(function(){var o=(0,T.A)(function*(s){yield function Ede(n,e){return FM.apply(this,arguments)}(r.gu.syncEngine,s),r.gcScheduler&&(s&&!r.gcScheduler.started?r.gcScheduler.start():s||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(s&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():s||r.indexBackfillerScheduler.stop())});return function(s){return o.apply(this,arguments)}}())})()}Au(e){const t=eG();if(!VN.C(t))throw new _e(Z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=SN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new VN(t,e.asyncQueue,r,e.clientId,e.initialUser)}}let ug=(()=>{class n{initialize(t,r){var i=this;return(0,T.A)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=o=>vG(i.syncEngine,o,1),i.remoteStore.remoteSyncer.handleCredentialChange=gde.bind(null,i.syncEngine),yield iM(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new Jue}createDatastore(t){const r=av(t.databaseInfo.databaseId),i=new Oue(t.databaseInfo);return new Lue(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,o=this.datastore,s=t.asyncQueue,a=r=>vG(this.syncEngine,r,0),c=X4.C()?new X4:new Rue,new Bue(i,o,s,a,c);var i,o,s,a,c}createSyncEngine(t,r){return function(o,s,a,c,u,h,m){const _=new ide(o,s,a,c,u,h);return m&&(_.hu=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,T.A)(function*(){var r,i,o;yield(o=(0,T.A)(function*(a){const c=Ne(a);ve(qd,"RemoteStore shutting down."),c.aa.add(5),yield ng(c),c.ca.shutdown(),c.la.set("Unknown")}),function s(a){return o.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();function wG(n,e=10240){let t=0;return{read:()=>(0,T.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,T.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class PT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Rr("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Dde{constructor(e,t){this.wu=e,this.serializer=t,this.metadata=new ai,this.buffer=new Uint8Array,this.bu=new TextDecoder("utf-8"),this.Su().then(r=>{r&&r.xa()?this.metadata.resolve(r.Ma.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Ma)}`))},r=>this.metadata.reject(r))}close(){return this.wu.cancel()}getMetadata(){var e=this;return(0,T.A)(function*(){return e.metadata.promise})()}du(){var e=this;return(0,T.A)(function*(){return yield e.getMetadata(),e.Su()})()}Su(){var e=this;return(0,T.A)(function*(){const t=yield e.Du();if(null===t)return null;const r=e.bu.decode(t),i=Number(r);isNaN(i)&&e.vu(`length string (${r}) is not valid number`);const o=yield e.Cu(i);return new ede(JSON.parse(o),t.length+i)})()}Fu(){return this.buffer.findIndex(e=>123===e)}Du(){var e=this;return(0,T.A)(function*(){for(;e.Fu()<0&&!(yield e.Mu()););if(0===e.buffer.length)return null;const t=e.Fu();t<0&&e.vu("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cu(e){var t=this;return(0,T.A)(function*(){for(;t.buffer.length<e;)(yield t.Mu())&&t.vu("Reached the end of bundle when more is expected.");const r=t.bu.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}vu(e){throw this.wu.cancel(),new Error(`Invalid bundle format: ${e}`)}Mu(){var e=this;return(0,T.A)(function*(){const t=yield e.wu.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Cde{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,T.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new _e(Z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,T.A)(function*(s,a){const c=Ne(s),u={documents:a.map(v=>Zy(c.serializer,v))},h=yield c.Wo("BatchGetDocuments",c.serializer.databaseId,Bt.emptyPath(),u,a.length),m=new Map;h.forEach(v=>{const I=function jle(n,e){return"found"in e?function(r,i){We(!!i.found,43571);const o=xa(r,i.found.name),s=Nr(i.found.updateTime),a=i.found.createTime?Nr(i.found.createTime):et.min(),c=new vi({mapValue:{fields:i.found.fields}});return Wn.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){We(!!i.missing,3894),We(!!i.readTime,22933);const o=xa(r,i.missing),s=Nr(i.readTime);return Wn.newNoDocument(o,s)}(n,e):Ue(7234,{result:e})}(c.serializer,v);m.set(I.key.toString(),I)});const _=[];return a.forEach(v=>{const I=m.get(v.toString());We(!!I,55234,{key:v}),_.push(I)}),_}),function o(s,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,T.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=ke.fromPath(i);e.mutations.push(new oN(o,e.precondition(o)))}),yield(r=(0,T.A)(function*(o,s){const a=Ne(o),c={writes:s.map(u=>Xy(a.serializer,u))};yield a.Qo("Commit",a.serializer.databaseId,Bt.emptyPath(),c)}),function i(o,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ue(50498,{xu:e.constructor.name});t=et.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new _e(Z.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(et.min())?ir.exists(!1):ir.updateTime(t):ir.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(et.min()))throw new _e(Z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ir.updateTime(t)}return ir.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Ade{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Ou=r.maxAttempts,this.y_=new jN(this.asyncQueue,"transaction_retry")}Nu(){this.Ou-=1,this.Bu()}Bu(){var e=this;this.y_.E_((0,T.A)(function*(){const t=new Cde(e.datastore),r=e.Lu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.ku(o)}))}).catch(i=>{e.ku(i)})}))}Lu(e){try{const t=this.updateFunction(e);return!Ny(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ku(e){this.Ou>0&&this.qu(e)?(this.Ou-=1,this.asyncQueue.enqueueAndForget(()=>(this.Bu(),Promise.resolve()))):this.deferred.reject(e)}qu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!F3(t)}return!1}}const ou="FirestoreClient";class Sde{constructor(e,t,r,i,o){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=si.UNAUTHENTICATED,this.clientId=f$.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,function(){var a=(0,T.A)(function*(c){ve(ou,"Received user=",c.uid),yield s.authCredentialListener(c),s.user=c});return function(c){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(ve(ou,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,T.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=sg(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function $M(n,e){return GM.apply(this,arguments)}function GM(){return GM=(0,T.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ve(ou,"Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,T.A)(function*(o){r.isEqual(o)||(yield U4(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),GM.apply(this,arguments)}function DG(n,e){return zM.apply(this,arguments)}function zM(){return(zM=(0,T.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield WM(n);ve(ou,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>cG(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>cG(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function WM(n){return qM.apply(this,arguments)}function qM(){return(qM=(0,T.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ve(ou,"Using user provided OfflineComponentProvider");try{yield $M(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;Jo("Error using user provided cache. Falling back to memory cache: "+e),yield $M(n,new MT)}}else ve(ou,"Using default OfflineComponentProvider"),yield $M(n,new jM(void 0));var i;return n._offlineComponents})).apply(this,arguments)}function OT(n){return KM.apply(this,arguments)}function KM(){return(KM=(0,T.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ve(ou,"Using user provided OnlineComponentProvider"),yield DG(n,n._uninitializedComponentsProvider._online)):(ve(ou,"Using default OnlineComponentProvider"),yield DG(n,new ug))),n._onlineComponents})).apply(this,arguments)}function CG(n){return WM(n).then(e=>e.persistence)}function dg(n){return WM(n).then(e=>e.localStore)}function AG(n){return OT(n).then(e=>e.remoteStore)}function QM(n){return OT(n).then(e=>e.syncEngine)}function hg(n){return YM.apply(this,arguments)}function YM(){return(YM=(0,T.A)(function*(n){const e=yield OT(n),t=e.eventManager;return t.onListen=ode.bind(null,e.syncEngine),t.onUnlisten=ade.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=sde.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=cde.bind(null,e.syncEngine),t})).apply(this,arguments)}function RG(n,e,t={}){const r=new ai;return n.asyncQueue.enqueueAndForget((0,T.A)(function*(){return function(o,s,a,c,u){const h=new PT({next:_=>{h.yu(),s.enqueueAndForget(()=>lM(o,m));const v=_.docs.has(a);!v&&_.fromCache?u.reject(new _e(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&_.fromCache&&c&&"server"===c.source?u.reject(new _e(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(_)},error:_=>u.reject(_)}),m=new fM(Up(a.path),h,{includeMetadataChanges:!0,Fa:!0});return aM(o,m)}(yield hg(n),n.asyncQueue,e,t,r)})),r.promise}function NG(n,e,t={}){const r=new ai;return n.asyncQueue.enqueueAndForget((0,T.A)(function*(){return function(o,s,a,c,u){const h=new PT({next:_=>{h.yu(),s.enqueueAndForget(()=>lM(o,m)),_.fromCache&&"server"===c.source?u.reject(new _e(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(_)},error:_=>u.reject(_)}),m=new fM(a,h,{includeMetadataChanges:!0,Fa:!0});return aM(o,m)}(yield hg(n),n.asyncQueue,e,t,r)})),r.promise}function MG(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const PG=new Map;function JM(n,e,t){if(!t)throw new _e(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function OG(n,e,t,r){if(!0===e&&!0===r)throw new _e(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function kG(n){if(!ke.isDocumentKey(n))throw new _e(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function xG(n){if(ke.isDocumentKey(n))throw new _e(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function kT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Ue(12329,{type:typeof n})}function Pt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=kT(n);throw new _e(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function FG(n,e){if(e<=0)throw new _e(Z.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const LG="firestore.googleapis.com";class BG{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new _e(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=LG,this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new _e(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=MG(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new _e(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new _e(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new _e(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lv{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new BG({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new _e(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new BG(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Ice;switch(r.type){case"firstParty":return new Cce(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _e(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,T.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=PG.get(t);r&&(ve("ComponentProvider","Removing Datastore"),PG.delete(t),r.terminate())}(this),Promise.resolve()}}class Ei{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ei(this.firestore,e,this._query)}}class qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new La(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qn(this.firestore,e,this._key)}}class La extends Ei{constructor(e,t,r){super(e,t,Up(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qn(this.firestore,null,new ke(e))}withConverter(e){return new La(this.firestore,e,this._path)}}function jG(n,e,...t){if(n=(0,Ct.Ku)(n),JM("collection","path",e),n instanceof lv){const r=Bt.fromString(e,...t);return xG(r),new La(n,null,r)}{if(!(n instanceof qn||n instanceof La))throw new _e(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Bt.fromString(e,...t));return xG(r),new La(n.firestore,null,r)}}function xT(n,e,...t){if(n=(0,Ct.Ku)(n),1===arguments.length&&(e=f$.newId()),JM("doc","path",e),n instanceof lv){const r=Bt.fromString(e,...t);return kG(r),new qn(n,null,new ke(r))}{if(!(n instanceof qn||n instanceof La))throw new _e(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Bt.fromString(e,...t));return kG(r),new qn(n.firestore,n instanceof La?n.converter:null,new ke(r))}}function HG(n,e){return n=(0,Ct.Ku)(n),e=(0,Ct.Ku)(e),(n instanceof qn||n instanceof La)&&(e instanceof qn||e instanceof La)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ZM(n,e){return n=(0,Ct.Ku)(n),e=(0,Ct.Ku)(e),n instanceof Ei&&e instanceof Ei&&n.firestore===e.firestore&&$y(n._query,e._query)&&n.converter===e.converter}const $G="AsyncQueue";class GG{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new jN(this,"async_queue_retry"),this.ju=()=>{const r=AT();r&&ve($G,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const t=AT();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=AT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new ai;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}Zu(){var e=this;return(0,T.A)(function*(){if(0!==e.Qu.length){try{yield e.Qu[0](),e.Qu.shift(),e.y_.reset()}catch(t){if(!$l(t))throw t;ve($G,"Operation failed with retryable error: "+t)}e.Qu.length>0&&e.y_.E_(()=>e.Zu())}})()}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,Rr("INTERNAL UNHANDLED ERROR: ",zG(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=t,t}enqueueAfterDelay(e,t,r){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const i=sM.createAndSchedule(this,e,t,r,o=>this.Xu(o));return this.Uu.push(i),i}Ju(){this.Ku&&Ue(47125,{ec:zG(this.Ku)})}verifyOperationInProgress(){}tc(){var e=this;return(0,T.A)(function*(){let t;do{t=e.Hu,yield t}while(t!==e.Hu)})()}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function zG(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),e}function XM(n){return function(t){if("object"!=typeof t||null===t)return!1;const i=t;for(const o of["next","error","complete"])if(o in i&&"function"==typeof i[o])return!0;return!1}(n)}class jde{constructor(){this._progressObserver={},this._taskCompletionResolver=new ai,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Nn extends lv{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new GG,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,T.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new GG(t),e._firestoreClient=void 0,yield t}})()}}function or(n){if(n._terminated)throw new _e(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||WG(n),n._firestoreClient}function WG(n){var e,t,r;const i=n._freezeSettings(),o=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new dle(n._databaseId,c,n._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,MG(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator));var c,h;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Sde(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function eP(){return(eP=(0,T.A)(function*(n){Jo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();qG(n,ug.provider,{build:t=>new TG(t,e.cacheSizeBytes)})})).apply(this,arguments)}function qG(n,e,t){if((n=Pt(n,Nn))._firestoreClient||n._terminated)throw new _e(Z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new _e(Z.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},WG(n)}class Va{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Va(Er.fromBase64String(e))}catch(t){throw new _e(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Va(Er.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Gc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new _e(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Kd{constructor(e){this._methodName=e}}class FT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}}class LT{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}const Zde=/^__.*__$/;class Xde{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new jc(e,this.data,this.fieldMask,t,this.fieldTransforms):new zp(e,this.data,t,this.fieldTransforms)}}class KG{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new jc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function QG(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue(40011,{oc:n})}}class VT{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this._c(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new VT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i.lc(e),i}hc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i._c(),i}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return jT(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(0===e.length)throw this.Tc("Document fields must not be empty");if(QG(this.oc)&&Zde.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class ehe{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||av(e)}dc(e,t,r,i=!1){return new VT({oc:e,methodName:t,Ec:r,path:zn.emptyPath(),cc:!1,Ic:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qd(n){const e=n._freezeSettings(),t=av(n._databaseId);return new ehe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function BT(n,e,t,r,i,o={}){const s=n.dc(o.merge||o.mergeFields?2:0,e,t,i);aP("Data must be an object, but it was:",s,r);const a=ZG(r,s);let c,u;if(o.merge)c=new Mo(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const m of o.mergeFields){const _=hv(e,m,t);if(!s.contains(_))throw new _e(Z.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);ez(h,_)||h.push(_)}c=new Mo(h),u=s.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,u=s.fieldTransforms;return new Xde(new vi(a),c,u)}class dv extends Kd{_toFieldTransform(e){if(2!==e.oc)throw e.Tc(1===e.oc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dv}}function YG(n,e,t){return new VT({oc:3,Ec:e.settings.Ec,methodName:n._methodName,cc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class tP extends Kd{_toFieldTransform(e){return new qy(e.path,new $p)}isEqual(e){return e instanceof tP}}class nP extends Kd{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=YG(this,e,!0),r=this.Ac.map(o=>Yd(o,t)),i=new Vd(r);return new qy(e.path,i)}isEqual(e){return e instanceof nP&&(0,Ct.bD)(this.Ac,e.Ac)}}class rP extends Kd{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=YG(this,e,!0),r=this.Ac.map(o=>Yd(o,t)),i=new Bd(r);return new qy(e.path,i)}isEqual(e){return e instanceof rP&&(0,Ct.bD)(this.Ac,e.Ac)}}class iP extends Kd{constructor(e,t){super(e),this.Rc=t}_toFieldTransform(e){const t=new Gp(e.serializer,w3(e.serializer,this.Rc));return new qy(e.path,t)}isEqual(e){return e instanceof iP&&this.Rc===e.Rc}}function oP(n,e,t,r){const i=n.dc(1,e,t);aP("Data must be an object, but it was:",i,r);const o=[],s=vi.empty();zl(r,(c,u)=>{const h=UT(e,c,t);u=(0,Ct.Ku)(u);const m=i.hc(h);if(u instanceof dv)o.push(h);else{const _=Yd(u,m);null!=_&&(o.push(h),s.set(h,_))}});const a=new Mo(o);return new KG(s,a,i.fieldTransforms)}function sP(n,e,t,r,i,o){const s=n.dc(1,e,t),a=[hv(e,r,t)],c=[i];if(o.length%2!=0)throw new _e(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)a.push(hv(e,o[_])),c.push(o[_+1]);const u=[],h=vi.empty();for(let _=a.length-1;_>=0;--_)if(!ez(u,a[_])){const v=a[_];let I=c[_];I=(0,Ct.Ku)(I);const D=s.hc(v);if(I instanceof dv)u.push(v);else{const A=Yd(I,D);null!=A&&(u.push(v),h.set(v,A))}}const m=new Mo(u);return new KG(h,m,s.fieldTransforms)}function JG(n,e,t,r=!1){return Yd(t,n.dc(r?4:3,e))}function Yd(n,e){if(XG(n=(0,Ct.Ku)(n)))return aP("Unsupported field value:",e,n),ZG(n,e);if(n instanceof Kd)return function(r,i){if(!QG(i.oc))throw i.Tc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Tc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&4!==e.oc)throw e.Tc("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let c=Yd(a,i.Pc(s));null==c&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if(null===(r=(0,Ct.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return w3(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=nr.fromDate(r);return{timestampValue:qp(i.serializer,o)}}if(r instanceof nr){const o=new nr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qp(i.serializer,o)}}if(r instanceof FT)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Va)return{bytesValue:G3(i.serializer,r._byteString)};if(r instanceof qn){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Tc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:dN(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof LT)return s=r,a=i,{mapValue:{fields:{[qR]:{stringValue:KR},[Lp]:{arrayValue:{values:s.toArray().map(u=>{if("number"!=typeof u)throw a.Tc("VectorValues must only contain numeric values.");return iN(a.serializer,u)})}}}}};var s,a;throw i.Tc(`Unsupported field value: ${kT(r)}`)}(n,e)}function ZG(n,e){const t={};return B$(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zl(n,(r,i)=>{const o=Yd(i,e.uc(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function XG(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof nr||n instanceof FT||n instanceof Va||n instanceof qn||n instanceof Kd||n instanceof LT)}function aP(n,e,t){if(!XG(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=kT(t);throw e.Tc("an object"===r?n+" a custom object":n+" "+r)}var i}function hv(n,e,t){if((e=(0,Ct.Ku)(e))instanceof Gc)return e._internalPath;if("string"==typeof e)return UT(n,e);throw jT("Field path arguments must be of type string or ",n,!1,void 0,t)}const the=new RegExp("[~\\*/\\[\\]]");function UT(n,e,t){if(e.search(the)>=0)throw jT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Gc(...e.split("."))._internalPath}catch{throw jT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function jT(n,e,t,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new _e(Z.INVALID_ARGUMENT,a+n+c)}function ez(n,e){return n.some(t=>t.isEqual(e))}class fv{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new nhe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(HT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class nhe extends fv{data(){return super.data()}}function HT(n,e){return"string"==typeof e?UT(n,e):e instanceof Gc?e._internalPath:e._delegate._internalPath}function tz(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new _e(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cP{}class pv extends cP{}function su(n,e,...t){let r=[];e instanceof cP&&r.push(e),r=r.concat(t),function(o){const s=o.filter(c=>c instanceof fg).length,a=o.filter(c=>c instanceof gv).length;if(s>1||s>0&&a>0)throw new _e(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class gv extends pv{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new gv(e,t,r)}_apply(e){const t=this._parse(e);return oz(e._query,t),new Ei(e.firestore,e.converter,nN(e._query,t))}_parse(e){const t=Qd(e.firestore);return function(o,s,a,c,u,h,m){let _;if(u.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new _e(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){iz(m,h);const I=[];for(const D of m)I.push(rz(c,o,D));_={arrayValue:{values:I}}}else _=rz(c,o,m)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||iz(m,h),_=JG(a,"where",m,"in"===h||"not-in"===h);return Ut.create(u,h,_)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class fg extends cP{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new fg(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:_n.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const c of a)oz(s,c),s=nN(s,c)}(e._query,t),new Ei(e.firestore,e.converter,nN(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class lP extends pv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new lP(e,t)}_apply(e){const t=function(i,o,s){if(null!==i.startAt)throw new _e(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new _e(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new jy(o,s)}(e._query,this._field,this._direction);return new Ei(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new Bc(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class $T extends pv{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new $T(e,t,r)}_apply(e){return new Ei(e.firestore,e.converter,oT(e._query,this._limit,this._limitType))}}class GT extends pv{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new GT(e,t,r)}_apply(e){const t=nz(e,this.type,this._docOrFields,this._inclusive);return new Ei(e.firestore,e.converter,(o=t,new Bc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)));var i,o}}class zT extends pv{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new zT(e,t,r)}_apply(e){const t=nz(e,this.type,this._docOrFields,this._inclusive);return new Ei(e.firestore,e.converter,(o=t,new Bc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)));var i,o}}function nz(n,e,t,r){if(t[0]=(0,Ct.Ku)(t[0]),t[0]instanceof fv)return function(o,s,a,c,u){if(!c)throw new _e(Z.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const m of jp(o))if(m.field.isKeyField())h.push(Fd(s,c.key));else{const _=c.data.field(m.field);if(JI(_))throw new _e(Z.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_){const v=m.field.canonicalString();throw new _e(Z.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(_)}return new Yl(h,u)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Qd(n.firestore);return function(s,a,c,u,h,m){const _=s.explicitOrderBy;if(h.length>_.length)throw new _e(Z.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const v=[];for(let I=0;I<h.length;I++){const D=h[I];if(_[I].field.isKeyField()){if("string"!=typeof D)throw new _e(Z.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof D}`);if(!tN(s)&&-1!==D.indexOf("/"))throw new _e(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${D}' contains a slash.`);const A=s.path.child(Bt.fromString(D));if(!ke.isDocumentKey(A))throw new _e(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const O=new ke(A);v.push(Fd(a,O))}else{const A=JG(c,u,D);v.push(A)}}return new Yl(v,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function rz(n,e,t){if("string"==typeof(t=(0,Ct.Ku)(t))){if(""===t)throw new _e(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tN(e)&&-1!==t.indexOf("/"))throw new _e(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Bt.fromString(t));if(!ke.isDocumentKey(r))throw new _e(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fd(n,new ke(r))}if(t instanceof qn)return Fd(n,t._key);throw new _e(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kT(t)}.`)}function iz(n,e){if(!Array.isArray(n)||0===n.length)throw new _e(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oz(n,e){const t=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new _e(Z.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class uP{convertValue(e,t="none"){switch(Kl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return zl(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;const o=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t[Lp].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(s=>rr(s.doubleValue));return new LT(o)}convertGeoPoint(e){return new FT(rr(e.latitude),rr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ZI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Fy(e));default:return null}}convertTimestamp(e){const t=Lc(e);return new nr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Bt.fromString(e);We(n4(r),9688,{name:e});const i=new Wl(r.get(1),r.get(3)),o=new ke(r.popFirst(5));return i.isEqual(t)||Rr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function WT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class dhe extends uP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Va(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}class Jd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zc extends fv{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(HT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class mv extends zc{data(e={}){return super.data(e)}}class au{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Jd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new mv(this._firestore,this._userDataWriter,r.key,r,new Jd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new mv(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Jd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const c=new mv(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Jd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return 0!==a.type&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:fhe(a.type),doc:c,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function fhe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue(61501,{type:n})}}function az(n,e){return n instanceof zc&&e instanceof zc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof au&&e instanceof au&&n._firestore===e._firestore&&ZM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class cu extends uP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Va(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}function cz(n,e,t){n=Pt(n,qn);const r=Pt(n.firestore,Nn),i=WT(n.converter,e,t);return pg(r,[BT(Qd(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ir.none())])}function lz(n,e,t,...r){n=Pt(n,qn);const i=Pt(n.firestore,Nn),o=Qd(i);let s;return s="string"==typeof(e=(0,Ct.Ku)(e))||e instanceof Gc?sP(o,"updateDoc",n._key,e,t,r):oP(o,"updateDoc",n._key,e),pg(i,[s.toMutation(n._key,ir.exists(!0))])}function uz(n,...e){var t,r,i;n=(0,Ct.Ku)(n);let o={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof e[s]||XM(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(XM(e[s])){const m=e[s];e[s]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[s+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[s+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let c,u,h;if(n instanceof qn)u=Pt(n.firestore,Nn),h=Up(n._key.path),c={next:m=>{e[s]&&e[s](dP(u,n,m))},error:e[s+1],complete:e[s+2]};else{const m=Pt(n,Ei);u=Pt(m.firestore,Nn),h=m._query;const _=new cu(u);c={next:v=>{e[s]&&e[s](new au(u,_,m,v))},error:e[s+1],complete:e[s+2]},tz(n._query)}return function(_,v,I,D){const A=new PT(D),O=new fM(v,A,I);return _.asyncQueue.enqueueAndForget((0,T.A)(function*(){return aM(yield hg(_),O)})),()=>{A.yu(),_.asyncQueue.enqueueAndForget((0,T.A)(function*(){return lM(yield hg(_),O)}))}}(or(u),h,a,c)}function pg(n,e){return function(r,i){const o=new ai;return r.asyncQueue.enqueueAndForget((0,T.A)(function*(){return function lde(n,e,t){return bM.apply(this,arguments)}(yield QM(r),i,o)})),o.promise}(or(n),e)}function dP(n,e,t){const r=t.docs.get(e._key),i=new cu(n);return new zc(n,i,e._key,r,new Jd(t.hasPendingWrites,t.fromCache),e.converter)}const Mhe={maxAttempts:5};class dz{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Qd(e)}set(e,t,r){this._verifyNotCommitted();const i=lu(e,this._firestore),o=WT(i.converter,t,r),s=BT(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(s.toMutation(i._key,ir.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=lu(e,this._firestore);let s;return s="string"==typeof(t=(0,Ct.Ku)(t))||t instanceof Gc?sP(this._dataReader,"WriteBatch.update",o._key,t,r,i):oP(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=lu(e,this._firestore);return this._mutations=this._mutations.concat(new Wp(t._key,ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _e(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function lu(n,e){if((n=(0,Ct.Ku)(n)).firestore!==e)throw new _e(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Phe{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Qd(e)}get(e){const t=lu(e,this._firestore),r=new dhe(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return Ue(24041);const o=i[0];if(o.isFoundDocument())return new fv(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new fv(this._firestore,r,t._key,null,t.converter);throw Ue(18433,{doc:o})})}set(e,t,r){const i=lu(e,this._firestore),o=WT(i.converter,t,r),s=BT(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){const o=lu(e,this._firestore);let s;return s="string"==typeof(t=(0,Ct.Ku)(t))||t instanceof Gc?sP(this._dataReader,"Transaction.update",o._key,t,r,i):oP(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){const t=lu(e,this._firestore);return this._transaction.delete(t._key),this}}class Ohe extends Phe{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=lu(e,this._firestore),r=new cu(this._firestore);return super.get(e).then(i=>new zc(this._firestore,r,t._key,i._document,new Jd(!1,!1),t.converter))}}function fP(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new _e("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function gz(){if(typeof Uint8Array>"u")throw new _e("unimplemented","Uint8Arrays are not available in this environment.")}function mz(){if(!function lle(){return typeof atob<"u"}())throw new _e("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){Dp=ws.SDK_VERSION,(0,ws._registerComponent)(new AI.uA("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Nn(new wce(r.getProvider("auth-internal")),new Ace(s,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new _e(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wl(u.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),(0,ws.registerVersion)(l$,"4.7.12",e),(0,ws.registerVersion)(l$,"4.7.12","esm2017")}();class _v{constructor(e){this._delegate=e}static fromBase64String(e){return mz(),new _v(Va.fromBase64String(e))}static fromUint8Array(e){return gz(),new _v(Va.fromUint8Array(e))}toBase64(){return mz(),this._delegate.toBase64()}toUint8Array(){return gz(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function pP(n){return function $he(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Ghe{enableIndexedDbPersistence(e,t){return function $de(n,e){Jo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return qG(n,ug.provider,{build:r=>new HM(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Gde(n){return eP.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function zde(n){if(n._initialized&&!n._terminated)throw new _e(Z.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ai;return n._queue.enqueueAndForgetEvenWhileRestricted((0,T.A)(function*(){try{yield(t=(0,T.A)(function*(i){if(!Ma.C())return Promise.resolve();const o=i+"main";yield Ma.delete(o)}),function r(i){return t.apply(this,arguments)})(SN(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class _z{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Wl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Jo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function UG(n,e,t,r={}){var i;n=Pt(n,lv);const o=(0,Ct.zJ)(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&(0,Ct.gE)(`https://${c}`),s.host!==LG&&s.host!==c&&Jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!(0,Ct.bD)(u,a)&&(n._setSettings(u),r.mockUserToken)){let h,m;if("string"==typeof r.mockUserToken)h=r.mockUserToken,m=si.MOCK_USER;else{h=(0,Ct.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new _e(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new si(_)}n._authCredentials=new Tce(new h$(h,m))}}(this._delegate,e,t,r)}enableNetwork(){return function qde(n){return function Rde(n){return n.asyncQueue.enqueue((0,T.A)(function*(){const e=yield CG(n),t=yield AG(n);return e.setNetworkEnabled(!0),function(i){const o=Ne(i);return o.aa.delete(0),cv(o)}(t)}))}(or(n=Pt(n,Nn)))}(this._delegate)}disableNetwork(){return function Kde(n){return function Nde(n){return n.asyncQueue.enqueue((0,T.A)(function*(){const e=yield CG(n),t=yield AG(n);return e.setNetworkEnabled(!1),(r=(0,T.A)(function*(o){const s=Ne(o);s.aa.add(0),yield ng(s),s.la.set("Offline")}),function i(o){return r.apply(this,arguments)})(t);var r}))}(or(n=Pt(n,Nn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,OG("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Wde(n){return function(t){const r=new ai;return t.asyncQueue.enqueueAndForget((0,T.A)(function*(){return function fde(n,e){return CM.apply(this,arguments)}(yield QM(t),r)})),r.promise}(or(n=Pt(n,Nn)))}(this._delegate)}onSnapshotsInSync(e){return function Ihe(n,e){return function kde(n,e){const t=new PT(e);return n.asyncQueue.enqueueAndForget((0,T.A)(function*(){return i=yield hg(n),o=t,Ne(i).fa.add(o),void o.next();var i,o})),()=>{t.yu(),n.asyncQueue.enqueueAndForget((0,T.A)(function*(){return i=yield hg(n),o=t,void Ne(i).fa.delete(o);var i,o}))}}(or(n=Pt(n,Nn)),XM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new _e("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new gg(this,jG(this._delegate,e))}catch(t){throw uo(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ds(this,xT(this._delegate,e))}catch(t){throw uo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ho(this,function Ude(n,e){if(n=Pt(n,lv),JM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new _e(Z.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ei(n,null,(r=e,new Bc(Bt.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw uo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function khe(n,e,t){n=Pt(n,Nn);const r=Object.assign(Object.assign({},Mhe),t);return function(o){if(o.maxAttempts<1)throw new _e(Z.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){const c=new ai;return o.asyncQueue.enqueueAndForget((0,T.A)(function*(){const u=yield function SG(n){return OT(n).then(e=>e.datastore)}(o);new Ade(o.asyncQueue,u,a,s,c).Nu()})),c.promise}(or(n),i=>e(new Ohe(n,i)),r)}(this._delegate,t=>e(new yz(this,t)))}batch(){return or(this._delegate),new vz(new dz(this._delegate,e=>pg(this._delegate,e)))}loadBundle(e){return function Qde(n,e){const t=or(n=Pt(n,Nn)),r=new jde;return function xde(n,e,t,r){const i=function(s,a){let c;return c="string"==typeof s?PR().encode(s):s,h=function(h,m){if(h instanceof Uint8Array)return wG(h,m);if(h instanceof ArrayBuffer)return wG(new Uint8Array(h),m);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new Dde(h,a);var h}(t,av(e));n.asyncQueue.enqueueAndForget((0,T.A)(function*(){!function wde(n,e,t){const r=Ne(n);var i;(i=(0,T.A)(function*(s,a,c){try{const u=yield a.getMetadata();if(yield function(I,D){const A=Ne(I),O=Nr(D.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",P=>A.ci.getBundleMetadata(P,D.id)).then(P=>!!P&&P.createTime.compareTo(O)>=0)}(s.localStore,u))return yield a.close(),c._completeWith({taskState:"Success",documentsLoaded:(I=u).totalDocuments,bytesLoaded:I.totalBytes,totalDocuments:I.totalDocuments,totalBytes:I.totalBytes}),Promise.resolve(new Set);c._updateProgress(fG(u));const h=new tde(u,s.localStore,a.serializer);let m=yield a.du();for(;m;){const v=yield h.Na(m);v&&c._updateProgress(v),m=yield a.du()}const _=yield h.complete();return yield $c(s,_.ka,void 0),yield function(I,D){const A=Ne(I);return A.persistence.runTransaction("Save bundle","readwrite",O=>A.ci.saveBundleMetadata(O,D))}(s.localStore,u),c._completeWith(_.progress),Promise.resolve(_.La)}catch(u){return Jo(iu,`Loading bundle failed with ${u}`),c._failWith(u),Promise.resolve(new Set)}var I}),function o(s,a,c){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield QM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Yde(n,e){return function Fde(n,e){return n.asyncQueue.enqueue((0,T.A)(function*(){return function(r,i){const o=Ne(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.ci.getNamedQuery(s,i))}(yield dg(n),e)}))}(or(n=Pt(n,Nn)),e).then(t=>t?new Ei(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ho(this,t):null)}}class KT extends uP{constructor(e){super(),this.firestore=e}convertBytes(e){return new _v(new Va(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ds.forKey(t,this.firestore,null)}}class yz{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new KT(e)}get(e){const t=Xd(e);return this._delegate.get(t).then(r=>new yv(this._firestore,new zc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Xd(e);return r?(fP("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Xd(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Xd(e);return this._delegate.delete(t),this}}class vz{constructor(e){this._delegate=e}set(e,t,r){const i=Xd(e);return r?(fP("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Xd(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Xd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Zd{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new mv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new vv(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Zd.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new Zd(e,new KT(e),t),i.set(t,o)),o}}Zd.INSTANCES=new WeakMap;class Ds{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new KT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new _e("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ds(t,new qn(t._delegate,r,new ke(e)))}static forKey(e,t,r){return new Ds(t,new qn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new gg(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new gg(this.firestore,jG(this._delegate,e))}catch(t){throw uo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ct.Ku)(e))instanceof qn&&HG(this._delegate,e)}set(e,t){t=fP("DocumentReference.set",t);try{return t?cz(this._delegate,e,t):cz(this._delegate,e)}catch(r){throw uo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?lz(this._delegate,e):lz(this._delegate,e,t,...r)}catch(i){throw uo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Ehe(n){return pg(Pt(n.firestore,Nn),[new Wp(n._key,ir.none())])}(this._delegate)}onSnapshot(...e){const t=Ez(e),r=bz(e,i=>new yv(this.firestore,new zc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return uz(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function ghe(n){n=Pt(n,qn);const e=Pt(n.firestore,Nn),t=or(e),r=new cu(e);return function Mde(n,e){const t=new ai;return n.asyncQueue.enqueueAndForget((0,T.A)(function*(){return(r=(0,T.A)(function*(o,s,a){try{const c=yield function(h,m){const _=Ne(h);return _.persistence.runTransaction("read document","readonly",v=>_.localDocuments.getDocument(v,m))}(o,s);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new _e(Z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const u=sg(c,`Failed to get document '${s} from cache`);a.reject(u)}}),function i(o,s,a){return r.apply(this,arguments)})(yield dg(n),e,t);var r})),t.promise}(t,n._key).then(i=>new zc(e,r,n._key,i,new Jd(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function mhe(n){n=Pt(n,qn);const e=Pt(n.firestore,Nn);return RG(or(e),n._key,{source:"server"}).then(t=>dP(e,n,t))}(this._delegate):function phe(n){n=Pt(n,qn);const e=Pt(n.firestore,Nn);return RG(or(e),n._key).then(t=>dP(e,n,t))}(this._delegate),t.then(r=>new yv(this.firestore,new zc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ds(this.firestore,this._delegate.withConverter(e?Zd.getInstance(this.firestore,e):null))}}function uo(n,e,t){return n.message=n.message.replace(e,t),n}function Ez(n){for(const e of n)if("object"==typeof e&&!pP(e))return e;return{}}function bz(n,e){var t,r;let i;return i=pP(n[0])?n[0]:pP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class yv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ds(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return az(this._delegate,e._delegate)}}class vv extends yv{data(e){const t=this._delegate.data(e);return this._delegate._converter||function bce(n,e){n||Ue(57014,e)}(void 0!==t,"Document in a QueryDocumentSnapshot should exist"),t}}class ho{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new KT(e)}where(e,t,r){try{return new ho(this.firestore,su(this._delegate,function rhe(n,e,t){const r=e,i=HT("where",n);return gv._create(i,r,t)}(e,t,r)))}catch(i){throw uo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ho(this.firestore,su(this._delegate,function ihe(n,e="asc"){const t=e,r=HT("orderBy",n);return lP._create(r,t)}(e,t)))}catch(r){throw uo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ho(this.firestore,su(this._delegate,function ohe(n){return FG("limit",n),$T._create("limit",n,"F")}(e)))}catch(t){throw uo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ho(this.firestore,su(this._delegate,function she(n){return FG("limitToLast",n),$T._create("limitToLast",n,"L")}(e)))}catch(t){throw uo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ho(this.firestore,su(this._delegate,function ahe(...n){return GT._create("startAt",n,!0)}(...e)))}catch(t){throw uo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ho(this.firestore,su(this._delegate,function che(...n){return GT._create("startAfter",n,!1)}(...e)))}catch(t){throw uo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ho(this.firestore,su(this._delegate,function lhe(...n){return zT._create("endBefore",n,!1)}(...e)))}catch(t){throw uo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ho(this.firestore,su(this._delegate,function uhe(...n){return zT._create("endAt",n,!0)}(...e)))}catch(t){throw uo(t,"endAt()","Query.endAt()")}}isEqual(e){return ZM(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function yhe(n){n=Pt(n,Ei);const e=Pt(n.firestore,Nn),t=or(e),r=new cu(e);return function Pde(n,e){const t=new ai;return n.asyncQueue.enqueueAndForget((0,T.A)(function*(){return(r=(0,T.A)(function*(o,s,a){try{const c=yield TT(o,s,!0),u=new mG(s,c.Ns),h=u.Ga(c.documents),m=u.applyChanges(h,!1);a.resolve(m.snapshot)}catch(c){const u=sg(c,`Failed to execute query '${s} against cache`);a.reject(u)}}),function i(o,s,a){return r.apply(this,arguments)})(yield dg(n),e,t);var r})),t.promise}(t,n._query).then(i=>new au(e,r,n,i))}(this._delegate):"server"===e?.source?function vhe(n){n=Pt(n,Ei);const e=Pt(n.firestore,Nn),t=or(e),r=new cu(e);return NG(t,n._query,{source:"server"}).then(i=>new au(e,r,n,i))}(this._delegate):function _he(n){n=Pt(n,Ei);const e=Pt(n.firestore,Nn),t=or(e),r=new cu(e);return tz(n._query),NG(t,n._query).then(i=>new au(e,r,n,i))}(this._delegate),t.then(r=>new gP(this.firestore,new au(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Ez(e),r=bz(e,i=>new gP(this.firestore,new au(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return uz(this._delegate,t,r)}withConverter(e){return new ho(this.firestore,this._delegate.withConverter(e?Zd.getInstance(this.firestore,e):null))}}class Whe{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new vv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class gP{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ho(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new vv(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Whe(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new vv(this._firestore,r))})}isEqual(e){return az(this._delegate,e._delegate)}}class gg extends ho{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ds(this.firestore,e):null}doc(e){try{return new Ds(this.firestore,void 0===e?xT(this._delegate):xT(this._delegate,e))}catch(t){throw uo(t,"doc()","CollectionReference.doc()")}}add(e){return function bhe(n,e){const t=Pt(n.firestore,Nn),r=xT(n),i=WT(n.converter,e);return pg(t,[BT(Qd(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ir.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ds(this.firestore,t))}isEqual(e){return HG(this._delegate,e._delegate)}withConverter(e){return new gg(this.firestore,this._delegate.withConverter(e?Zd.getInstance(this.firestore,e):null))}}function Xd(n){return Pt(n,qn)}class mP{constructor(...e){this._delegate=new Gc(...e)}static documentId(){return new mP(zn.keyField().canonicalString())}isEqual(e){return(e=(0,Ct.Ku)(e))instanceof Gc&&this._delegate._internalPath.isEqual(e._internalPath)}}class eh{static serverTimestamp(){const e=function Fhe(){return new tP("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new eh(e)}static delete(){const e=function xhe(){return new dv("deleteField")}();return e._methodName="FieldValue.delete",new eh(e)}static arrayUnion(...e){const t=function Lhe(...n){return new nP("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new eh(t)}static arrayRemove(...e){const t=function Vhe(...n){return new rP("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new eh(t)}static increment(e){const t=function Bhe(n){return new iP("increment",n)}(e);return t._methodName="FieldValue.increment",new eh(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}const qhe={Firestore:_z,GeoPoint:FT,Timestamp:nr,Blob:_v,Transaction:yz,WriteBatch:vz,DocumentReference:Ds,DocumentSnapshot:yv,Query:ho,QueryDocumentSnapshot:vv,QuerySnapshot:gP,CollectionReference:gg,FieldPath:mP,FieldValue:eh,setLogLevel:function zhe(n){!function Ece(n){jl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Iz(n,e){return function Yhe(n,e=DI){return new R(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function _P(n,e){return Iz(n,e).pipe($e(t=>({payload:t,type:"query"})))}!function Qhe(n){(function Khe(n,e){n.INTERNAL.registerComponent(new AI.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},qhe)))})(n,(e,t)=>new _z(e,t,new Ghe)),n.registerVersion("@firebase/firestore-compat","0.3.47")}(Bl.A);class Tz{ref;afs;injector=N(cr);constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=Rz(r,t);return new Cz(i,o,this.afs)}snapshotChanges(){return function Jhe(n,e){return Iz(n,e).pipe(iy(void 0),SR(),$e(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Yo(this.injector))}valueChanges(e={}){return this.snapshotChanges().pipe($e(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return Un(this.ref.get(e)).pipe(Yo(this.injector))}}function QT(n,e){return _P(n,e).pipe(iy(void 0),SR(),$e(t=>{const[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{const u=o.find(m=>m.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function wz(n,e,t){return QT(n,t).pipe(Wb((r,i)=>function Zhe(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Xhe(n,e){switch(e.type){case"added":if(!n[e.newIndex]?.doc.ref.isEqual(e.doc.ref))return yP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return yP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]?.doc.ref.isEqual(e.doc.ref))return yP(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),function e$(n,e=Ki){return n=n??yce,Ft((t,r)=>{let i,o=!0;t.subscribe(Je(r,s=>{const a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}(),$e(r=>r.map(i=>({type:i.type,payload:i}))))}function yP(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Dz(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Cz{ref;query;afs;injector=N(cr);constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=QT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe($e(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(iy(void 0),SR(),yr(([r,i])=>i.length>0||!r),$e(([,r])=>r),Yo(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(Wb((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Dz(e);return wz(this.query,t,this.afs.schedulers.outsideAngular).pipe(Yo(this.injector))}valueChanges(e={}){return _P(this.query,this.afs.schedulers.outsideAngular).pipe($e(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Yo(this.injector))}get(e){return Un(this.query.get(e)).pipe(Yo(this.injector))}add(e){return this.ref.add(e)}doc(e){return new Tz(this.ref.doc(e),this.afs)}}class efe{query;afs;injector=N(cr);constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?QT(this.query,this.afs.schedulers.outsideAngular).pipe($e(t=>t.filter(r=>e.indexOf(r.type)>-1)),yr(t=>t.length>0),Yo(this.injector)):QT(this.query,this.afs.schedulers.outsideAngular).pipe(Yo(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(Wb((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Dz(e);return wz(this.query,t,this.afs.schedulers.outsideAngular).pipe(Yo(this.injector))}valueChanges(e={}){return _P(this.query,this.afs.schedulers.outsideAngular).pipe($e(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Yo(this.injector))}get(e){return Un(this.query.get(e)).pipe(Yo(this.injector))}}const Az=new pe("angularfire2.enableFirestorePersistence"),Sz=new pe("angularfire2.firestore.persistenceSettings"),tfe=new pe("angularfire2.firestore.settings"),nfe=new pe("angularfire2.firestore.use-emulator");function Rz(n,e=t=>t){return{query:e(n),ref:n}}let Nz=(()=>{class n{schedulers;firestore;persistenceEnabled$;ngZone=N(g);constructor(t,r,i,o,s,a,c,u,h,m,_,v,I,D,A,O,P){this.schedulers=c;const j=AR(t,a,r),X=h;m&&ZH(j,a,_,I,D,A,v,O),[this.firestore,this.persistenceEnabled$]=jH(`${j.name}.firestore`,"AngularFirestore",j.name,()=>{const ae=a.runOutsideAngular(()=>j.firestore());if(o&&ae.settings(o),X&&ae.useEmulator(...X),i&&!Cb(s)){const we=()=>{try{return Un(ae.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(x){return typeof console<"u"&&console.warn(x),ze(!1)}};return[ae,a.runOutsideAngular(we)]}return[ae,ze(!1)]},[o,X,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:s}=Rz(i,r),a=this.ngZone.run(()=>o);return new Cz(a,s,this)}collectionGroup(t,r){const i=r||(s=>s),o=this.firestore.collectionGroup(t);return new efe(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.ngZone.run(()=>r);return new Tz(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(me(xI),me(FI,8),me(Az,8),me(tfe,8),me(sd),me(g),me(nR),me(Sz,8),me(nfe,8),me(XH,8),me(WH,8),me(qH,8),me(KH,8),me(QH,8),me(YH,8),me(JH,8),me(DR,8))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),rfe=(()=>{class n{constructor(){Bl.A.registerVersion("angularfire",eR.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Az,useValue:!0},{provide:Sz,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Qt({type:n});static \u0275inj=Rt({providers:[Nz]})}return n})(),vP=(()=>{class n{collectionName;firestore;items$=new Nt({});collectionRef;constructor(t,r){this.collectionName=t,this.firestore=r,this.collectionRef=this.firestore.collection(this.collectionName)}getItems(){return this.collectionRef?(this.collectionRef.snapshotChanges().pipe($e(t=>t.map(r=>r.payload.doc.data()))).subscribe(t=>this.items$.next(t)),this.items$.asObservable()):ze([])}static \u0275fac=function(r){return new(r||n)(me(gH),me(Nz))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),ife=(()=>{class n{injector;constructor(t){this.injector=t}createService(t){return zt.create({providers:[{provide:gH,useValue:t},{provide:vP,useClass:vP}],parent:this.injector}).get(vP)}static \u0275fac=function(r){return new(r||n)(me(zt))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ofe=(()=>{class n{firestoreFactoryService;db=null;constructor(t){this.firestoreFactoryService=t,this.db=this.firestoreFactoryService.createService("users")}listUsers(){return this.db?this.db.getItems():ze([])}static \u0275fac=function(r){return new(r||n)(me(ife))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Mz(n,e){const t="object"==typeof e;return new Promise((r,i)=>{const o=new us({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new ry)}});n.subscribe(o)})}class YT{}class JT{}class Cs{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Cs?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Cs;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Cs?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=e.value;if(o){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}addHeaderEntry(e,t){const r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class sfe{encodeKey(e){return Pz(e)}encodeValue(e){return Pz(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const cfe=/%(\d[a-f0-9])/gi,lfe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Pz(n){return encodeURIComponent(n).replace(cfe,(e,t)=>lfe[t]??e)}function ZT(n){return`${n}`}class uu{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new sfe,e.fromString){if(e.fromObject)throw new se(2805,!1);this.map=function afe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,a]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(ZT):[ZT(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new uu({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(ZT(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(ZT(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class ufe{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Oz(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function kz(n){return typeof Blob<"u"&&n instanceof Blob}function xz(n){return typeof FormData<"u"&&n instanceof FormData}const Ev="Content-Type",EP="X-Request-URL",Fz="text/plain",Lz="application/json",Vz=`${Lz}, ${Fz}, */*`;class bv{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){let o;if(this.url=t,this.method=e.toUpperCase(),function dfe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Cs,this.context??=new ufe,this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new uu,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||Oz(this.body)||kz(this.body)||xz(this.body)||function hfe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)?this.body:this.body instanceof uu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||xz(this.body)?null:kz(this.body)?this.body.type||null:Oz(this.body)?null:"string"==typeof this.body?Fz:this.body instanceof uu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?Lz:null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=void 0!==e.body?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress;let u=e.headers||this.headers,h=e.params||this.params;const m=e.context??this.context;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((_,v)=>_.set(v,e.setHeaders[v]),u)),e.setParams&&(h=Object.keys(e.setParams).reduce((_,v)=>_.set(v,e.setParams[v]),h)),new bv(t,r,s,{params:h,headers:u,context:m,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}}var du=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(du||{});class bP{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new Cs,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class ew extends bP{constructor(e={}){super(e)}type=du.ResponseHeader;clone(e={}){return new ew({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Iv extends bP{body;constructor(e={}){super(e),this.body=void 0!==e.body?e.body:null}type=du.Response;clone(e={}){return new Iv({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class mg extends bP{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function IP(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let Tv=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof bv)o=t;else{let c,u;c=i.headers instanceof Cs?i.headers:new Cs(i.headers),i.params&&(u=i.params instanceof uu?i.params:new uu({fromObject:i.params})),o=new bv(t,r,void 0!==i.body?i.body:null,{headers:c,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}const s=ze(o).pipe(Td(c=>this.handler.handle(c)));if(t instanceof bv||"events"===i.observe)return s;const a=s.pipe(yr(c=>c instanceof Iv));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe($e(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new se(2806,!1);return c.body}));case"blob":return a.pipe($e(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new se(2807,!1);return c.body}));case"text":return a.pipe($e(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new se(2808,!1);return c.body}));default:return a.pipe($e(c=>c.body))}case"response":return a;default:throw new se(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new uu).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,IP(i,r))}post(t,r,i={}){return this.request("POST",t,IP(i,r))}put(t,r,i={}){return this.request("PUT",t,IP(i,r))}static \u0275fac=function(r){return new(r||n)(me(YT))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();const jz=new pe("");function Hz(n,e){return e(n)}function yfe(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const Efe=new pe(""),wv=new pe(""),bfe=new pe(""),$z=new pe("",{providedIn:"root",factory:()=>!0});function Ife(){let n=null;return(e,t)=>{null===n&&(n=(N(Efe,{optional:!0})??[]).reduceRight(yfe,Hz));const r=N(ys);if(N($z)){const o=r.add();return n(e,t).pipe(oy(()=>r.remove(o)))}return n(e,t)}}let Gz=(()=>{class n extends YT{backend;injector;chain=null;pendingTasks=N(ys);contributeToStability=N($z);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(wv),...this.injector.get(bfe,[])]));this.chain=r.reduceRight((i,o)=>function vfe(n,e,t){return(r,i)=>Eo(t,()=>e(r,o=>n(o,i)))}(i,o,this.injector),Hz)}if(this.contributeToStability){const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(oy(()=>this.pendingTasks.remove(r)))}return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(me(JT),me(cr))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();const Cfe=/^\)\]\}',?\n/,Afe=RegExp(`^${EP}:`,"m");let Wz=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new se(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?Un(r.\u0275loadImpl()):ze(null)).pipe(ur(()=>new R(o=>{const s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((D,A)=>s.setRequestHeader(D,A.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept",Vz),!t.headers.has(Ev)){const D=t.detectContentTypeHeader();null!==D&&s.setRequestHeader(Ev,D)}if(t.responseType){const D=t.responseType.toLowerCase();s.responseType="json"!==D?D:"text"}const a=t.serializeBody();let c=null;const u=()=>{if(null!==c)return c;const D=s.statusText||"OK",A=new Cs(s.getAllResponseHeaders()),O=function Sfe(n){return"responseURL"in n&&n.responseURL?n.responseURL:Afe.test(n.getAllResponseHeaders())?n.getResponseHeader(EP):null}(s)||t.url;return c=new ew({headers:A,status:s.status,statusText:D,url:O}),c},h=()=>{let{headers:D,status:A,statusText:O,url:P}=u(),j=null;204!==A&&(j=typeof s.response>"u"?s.responseText:s.response),0===A&&(A=j?200:0);let X=A>=200&&A<300;if("json"===t.responseType&&"string"==typeof j){const ae=j;j=j.replace(Cfe,"");try{j=""!==j?JSON.parse(j):null}catch(we){j=ae,X&&(X=!1,j={error:we,text:j})}}X?(o.next(new Iv({body:j,headers:D,status:A,statusText:O,url:P||void 0})),o.complete()):o.error(new mg({error:j,headers:D,status:A,statusText:O,url:P||void 0}))},m=D=>{const{url:A}=u(),O=new mg({error:D,status:s.status||0,statusText:s.statusText||"Unknown Error",url:A||void 0});o.error(O)};let _=!1;const v=D=>{_||(o.next(u()),_=!0);let A={type:du.DownloadProgress,loaded:D.loaded};D.lengthComputable&&(A.total=D.total),"text"===t.responseType&&s.responseText&&(A.partialText=s.responseText),o.next(A)},I=D=>{let A={type:du.UploadProgress,loaded:D.loaded};D.lengthComputable&&(A.total=D.total),o.next(A)};return s.addEventListener("load",h),s.addEventListener("error",m),s.addEventListener("timeout",m),s.addEventListener("abort",m),t.reportProgress&&(s.addEventListener("progress",v),null!==a&&s.upload&&s.upload.addEventListener("progress",I)),s.send(a),o.next({type:du.Sent}),()=>{s.removeEventListener("error",m),s.removeEventListener("abort",m),s.removeEventListener("load",h),s.removeEventListener("timeout",m),t.reportProgress&&(s.removeEventListener("progress",v),null!==a&&s.upload&&s.upload.removeEventListener("progress",I)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(me(sU))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();const DP=new pe(""),qz=new pe("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Kz=new pe("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Qz{}let Mfe=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=iU(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(me(_r),me(qz))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();function Pfe(n,e){const t=n.url.toLowerCase();if(!N(DP)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=N(Qz).getToken(),i=N(Kz);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var hu=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(hu||{});function Ofe(...n){const e=[Tv,Wz,Gz,{provide:YT,useExisting:Gz},{provide:JT,useFactory:()=>N(jz,{optional:!0})??N(Wz)},{provide:wv,useValue:Pfe,multi:!0},{provide:DP,useValue:!0},{provide:Qz,useClass:Mfe}];for(const t of n)e.push(...t.\u0275providers);return fs(e)}const Yz=new pe("");function kfe(){return function th(n,e){return{\u0275kind:n,\u0275providers:e}}(hu.LegacyInterceptors,[{provide:Yz,useFactory:Ife},{provide:wv,useExisting:Yz,multi:!0}])}let xfe=(()=>{class n{success(t){const r=new Date,i=`${r.getMonth()+1}-${r.getDate()}-${r.getFullYear()}`;console.log(`${i}: ${t}`)}error(t){const r=new Date,i=`${r.getMonth()+1}-${r.getDate()}-${r.getFullYear()}`;console.warn(`${i}: ${t}`)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),CP=(()=>{class n{http;alerts;constructor(t,r){this.http=t,this.alerts=r}getFile(t){var r=this;return(0,T.A)(function*(){const i=r.http.get(`/assets/jsons/${t}`);try{return yield Mz(i)}catch{return r.alerts.error("Failed"),null}})()}static \u0275fac=function(r){return new(r||n)(me(Tv),me(xfe))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Jz={production:!1,firebase:{apiKey:"AIzaSyDEOKLsumgAaPLVzU7Mqje2PqheTlXwShc",authDomain:"hall-of-fame-c0fbc.firebaseapp.com",projectId:"hall-of-fame-c0fbc",storageBucket:"hall-of-fame-c0fbc.firebasestorage.app",messagingSenderId:"406579591585",appId:"1:406579591585:web:52bc73349d3cba98f573e0",measurementId:"G-ZPPLJ6VZ45"},twitch:{clientId:"gp762nuuoqcoxypju8c569th9wz7q5",oauth:"npofdqokooahh6ijf17dhjzgocqzw2"}},{twitch:Zz}=Jz;let Ffe=(()=>{class n{http;userList$=new Nt([]);constructor(t){this.http=t}_getUsers(t){var r=this;return(0,T.A)(function*(){let i=new Cs;i=i.append("Client-Id",Zz.clientId),i=i.append("Authorization",`Bearer ${Zz.oauth}`);const o=new URLSearchParams;t.forEach(c=>{o.append("login",c)});const s=`https://api.twitch.tv/helix/users?${o.toString()}`,a={method:"GET",headers:i,redirect:"follow"};try{const c=r.http.get(s,a).pipe($e(u=>u.data));return yield Mz(c)}catch{return Promise.resolve([])}})()}getUsers(t){return this._getUsers(t).then(r=>{this.userList$.next(r)}),this.userList$.asObservable()}static \u0275fac=function(r){return new(r||n)(me(Tv))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Lfe=(()=>{class n{userService;reader;twitchApi;userList$=new Nt([]);constructor(t,r,i){this.userService=t,this.reader=r,this.twitchApi=i,this._users()}getBadgesInfo(){return this.reader.getFile("badges.json")}_users(){let t;this.userService.listUsers().pipe(ur(r=>r&&r.length?(t=r,this.twitchApi.getUsers(r.map(i=>i.username))):[])).subscribe(r=>{if(!(r&&r.length||t&&t.length))return;const i=r.length?r:t;console.log({botUsers:t,twitchUsers:r});const o=i.map(s=>{const a=t.find(h=>h.id===s.id)||{},c=r.find(h=>h.id===s.id)||{};return new Yse(c,a)});this.userList$.next(o)})}getUsers(){return this.userList$.asObservable()}static \u0275fac=function(r){return new(r||n)(me(ofe),me(CP),me(Ffe))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Vfe=["addListener","removeListener"],Bfe=["addEventListener","removeEventListener"],Ufe=["on","off"];function bi(n,e,t,r){if(At(t)&&(r=t,t=void 0),r)return bi(n,e,t).pipe(g1(r));const[i,o]=function $fe(n){return At(n.addEventListener)&&At(n.removeEventListener)}(n)?Bfe.map(s=>a=>n[s](e,a,t)):function jfe(n){return At(n.addListener)&&At(n.removeListener)}(n)?Vfe.map(Xz(n,e)):function Hfe(n){return At(n.on)&&At(n.off)}(n)?Ufe.map(Xz(n,e)):[];if(!i&&f1(n))return Qr(s=>bi(s,e,t))(Kr(n));if(!i)throw new TypeError("Invalid event target");return new R(s=>{const a=(...c)=>s.next(1<c.length?c:c[0]);return i(a),()=>o(a)})}function Xz(n,e){return t=>r=>n[t](e,r)}function e8(n=0,e,t=rae){let r=-1;return null!=e&&(ij(e)?t=e:r=e),new R(i=>{let o=function Gfe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}const{isArray:zfe}=Array;function t8(n){return 1===n.length&&zfe(n[0])?n[0]:n}function n8(...n){return 1===(n=t8(n)).length?Kr(n[0]):new R(function Wfe(n){return e=>{let t=[];for(let r=0;t&&!e.closed&&r<n.length;r++)t.push(Kr(n[r]).subscribe(Je(e,i=>{if(t){for(let o=0;o<t.length;o++)o!==r&&t[o].unsubscribe();t=null}e.next(i)})))}}(n))}function AP(...n){const e=Hb(n),t=t8(n);return t.length?new R(r=>{let i=t.map(()=>[]),o=t.map(()=>!1);r.add(()=>{i=o=null});for(let s=0;!r.closed&&s<t.length;s++)Kr(t[s]).subscribe(Je(r,a=>{if(i[s].push(a),i.every(c=>c.length)){const c=i.map(u=>u.shift());r.next(e?e(...c):c),i.some((u,h)=>!u.length&&o[h])&&r.complete()}},()=>{o[s]=!0,!i[s].length&&r.complete()}));return()=>{i=o=null}}):No}function SP(...n){const e=Hb(n);return Ft((t,r)=>{const i=n.length,o=new Array(i);let s=n.map(()=>!1),a=!1;for(let c=0;c<i;c++)Kr(n[c]).subscribe(Je(r,u=>{o[c]=u,!a&&!s[c]&&(s[c]=!0,(a=s.every(Ki))&&(s=null))},cs));t.subscribe(Je(r,c=>{if(a){const u=[c,...o];r.next(e?e(...u):u)}}))})}function r8(n,e){return e?t=>Id(e.pipe(Li(1),function Kfe(){return Ft((n,e)=>{n.subscribe(Je(e,cs))})}()),t.pipe(r8(n))):Qr((t,r)=>Kr(n(t,r)).pipe(Li(1),function Qfe(n){return $e(()=>n)}(t)))}let i8=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(Ie(Ic),Ie(nn))};static \u0275dir=xe({type:n})}return n})(),nh=(()=>{class n extends i8{static \u0275fac=(()=>{let t;return function(i){return(t||(t=hn(n)))(i||n)}})();static \u0275dir=xe({type:n,features:[rn]})}return n})();const As=new pe(""),Xfe={provide:As,useExisting:$t(()=>tw),multi:!0},tpe=new pe("");let tw=(()=>{class n extends i8{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,null==this._compositionMode&&(this._compositionMode=!function epe(){const n=kl()?kl().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(Ie(Ic),Ie(nn),Ie(tpe,8))};static \u0275dir=xe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Yt("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[An([Xfe]),rn]})}return n})();const Ii=new pe(""),fu=new pe("");function p8(n){return null!=n}function g8(n){return R_(n)?Un(n):n}function m8(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function _8(n,e){return e.map(t=>t(n))}function y8(n){return n.map(e=>function rpe(n){return!n.validate}(e)?e:t=>e.validate(t))}function MP(n){return null!=n?function v8(n){if(!n)return null;const e=n.filter(p8);return 0==e.length?null:function(t){return m8(_8(t,e))}}(y8(n)):null}function PP(n){return null!=n?function E8(n){if(!n)return null;const e=n.filter(p8);return 0==e.length?null:function(t){return pH(_8(t,e).map(g8)).pipe($e(m8))}}(y8(n)):null}function b8(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function I8(n){return n._rawValidators}function T8(n){return n._rawAsyncValidators}function OP(n){return n?Array.isArray(n)?n:[n]:[]}function rw(n,e){return Array.isArray(n)?n.includes(e):n===e}function w8(n,e){const t=OP(e);return OP(n).forEach(i=>{rw(t,i)||t.push(i)}),t}function D8(n,e){return OP(e).filter(t=>!rw(n,t))}class C8{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=MP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=PP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class pu extends C8{_parent=null;name=null;valueAccessor=null}class A8{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let S8=(()=>{class n extends A8{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Ie(pu,2))};static \u0275dir=xe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&fn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[rn]})}return n})();const Dv="VALID",ow="INVALID",_g="PENDING",Cv="DISABLED";class yg{}class N8 extends yg{value;source;constructor(e,t){super(),this.value=e,this.source=t}}class FP extends yg{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}}class LP extends yg{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}}class sw extends yg{status;source;constructor(e,t){super(),this.status=e,this.source=t}}function aw(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class UP{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Br(this.statusReactive)}set status(e){Br(()=>this.statusReactive.set(e))}_status=Rc(()=>this.statusReactive());statusReactive=ya(void 0);get valid(){return this.status===Dv}get invalid(){return this.status===ow}get pending(){return this.status==_g}get disabled(){return this.status===Cv}get enabled(){return this.status!==Cv}errors;get pristine(){return Br(this.pristineReactive)}set pristine(e){Br(()=>this.pristineReactive.set(e))}_pristine=Rc(()=>this.pristineReactive());pristineReactive=ya(!0);get dirty(){return!this.pristine}get touched(){return Br(this.touchedReactive)}set touched(e){Br(()=>this.touchedReactive.set(e))}_touched=Rc(()=>this.touchedReactive());touchedReactive=ya(!1);get untouched(){return!this.touched}_events=new Se;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(w8(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(w8(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(D8(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(D8(e,this._rawAsyncValidators))}hasValidator(e){return rw(this._rawValidators,e)}hasAsyncValidator(e){return rw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const t=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new LP(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){const t=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&!1!==e.emitEvent&&this._events.next(new LP(!1,r))}markAsDirty(e={}){const t=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new FP(!1,r))}markAsPristine(e={}){const t=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&!1!==e.emitEvent&&this._events.next(new FP(!0,r))}markAsPending(e={}){this.status=_g;const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new sw(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:t})}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Cv,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new N8(this.value,r)),this._events.next(new sw(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Dv,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Dv||this.status===_g)&&this._runAsyncValidator(r,e.emitEvent)}const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new N8(this.value,t)),this._events.next(new sw(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:t})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Cv:Dv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=_g,this._hasOwnPendingAsyncValidator={emitEvent:!1!==t};const r=g8(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent,this,t.shouldHaveEmitted)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new sw(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Xe,this.statusChanges=new Xe}_calculateStatus(){return this._allControlsDisabled()?Cv:this.errors?ow:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_g)?_g:this._anyControlsHaveStatus(ow)?ow:Dv}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new FP(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new LP(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){aw(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function dpe(n){return Array.isArray(n)?MP(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function hpe(n){return Array.isArray(n)?PP(n):n||null}(this._rawAsyncValidators)}}const vg=new pe("",{providedIn:"root",factory:()=>cw}),cw="always";function Av(n,e,t=cw){(function HP(n,e){const t=I8(n);null!==e.validator?n.setValidators(b8(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=T8(n);null!==e.asyncValidator?n.setAsyncValidators(b8(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();dw(e._rawValidators,i),dw(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function gpe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&x8(n,e)})}(n,e),function _pe(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function mpe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&x8(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function ppe(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function uw(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),function hw(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=I8(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const i=T8(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}const r=()=>{};return dw(e._rawValidators,r),dw(e._rawAsyncValidators,r),t}(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function dw(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function x8(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function V8(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function B8(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}Promise.resolve();const WP=class extends UP{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(function VP(n){return(aw(n)?n.validators:n)||null}(t),function BP(n,e){return(aw(e)?e.asyncValidators:n)||null}(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),aw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=B8(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){V8(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){V8(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){B8(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};Promise.resolve();const Npe={provide:As,useExisting:$t(()=>qP),multi:!0};let Mpe=(()=>{class n{_accessors=[];add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t)return void this._accessors.splice(r,1)}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return!!t[0].control&&t[0]._parent===r._control._parent&&t[1].name===r.name}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qP=(()=>{class n extends nh{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=N(vg,{optional:!0})??cw;constructor(t,r,i,o){super(t,r),this._registry=i,this._injector=o}ngOnInit(){this._control=this._injector.get(pu),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(r){return new(r||n)(Ie(Ic),Ie(nn),Ie(Mpe),Ie(zt))};static \u0275dir=xe({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){1&r&&Yt("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[An([Npe]),rn]})}return n})();const KP=new pe(""),Ope={provide:pu,useExisting:$t(()=>QP)};let QP=(()=>{class n extends pu{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(t){}model;update=new Xe;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=s,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=function zP(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===tw?t=o:function Epe(n){return Object.getPrototypeOf(n.constructor)===nh}(o)?r=o:i=o}),i||r||t||null}(0,i)}ngOnChanges(t){if(this._isControlChanged(t)){const r=t.form.previousValue;r&&uw(r,this,!1),Av(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}(function GP(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)})(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&uw(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}static \u0275fac=function(r){return new(r||n)(Ie(Ii,10),Ie(fu,10),Ie(As,10),Ie(KP,8),Ie(vg,8))};static \u0275dir=xe({type:n,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[An([Ope]),rn,Cr]})}return n})(),Zpe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Qt({type:n});static \u0275inj=Rt({})}return n})(),r5=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:KP,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:vg,useValue:t.callSetDisabledState??cw}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Qt({type:n});static \u0275inj=Rt({imports:[Zpe]})}return n})();var ege={left:"right",right:"left",bottom:"top",top:"bottom"};function yw(n){return n.replace(/left|right|bottom|top/g,function(e){return ege[e]})}function Ba(n){return n.split("-")[0]}var tge={start:"end",end:"start"};function i5(n){return n.replace(/start|end/g,function(e){return tge[e]})}var ts="top",na="bottom",ra="right",ns="left",XP="auto",Nv=[ts,na,ra,ns],Eg="start",Mv="end",o5="viewport",Pv="popper",s5=Nv.reduce(function(n,e){return n.concat([e+"-"+Eg,e+"-"+Mv])},[]),a5=[].concat(Nv,[XP]).reduce(function(n,e){return n.concat([e,e+"-"+Eg,e+"-"+Mv])},[]),fge=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function rs(n){if(null==n)return window;if("[object Window]"!==n.toString()){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function ih(n){return n instanceof rs(n).Element||n instanceof Element}function Ss(n){return n instanceof rs(n).HTMLElement||n instanceof HTMLElement}function eO(n){return!(typeof ShadowRoot>"u")&&(n instanceof rs(n).ShadowRoot||n instanceof ShadowRoot)}function gu(n){return((ih(n)?n.ownerDocument:n.document)||window.document).documentElement}var oh=Math.max,vw=Math.min,bg=Math.round;function tO(){var n=navigator.userAgentData;return null!=n&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function c5(){return!/^((?!chrome|android).)*safari/i.test(tO())}function Ig(n,e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var r=n.getBoundingClientRect(),i=1,o=1;e&&Ss(n)&&(i=n.offsetWidth>0&&bg(r.width)/n.offsetWidth||1,o=n.offsetHeight>0&&bg(r.height)/n.offsetHeight||1);var a=(ih(n)?rs(n):window).visualViewport,c=!c5()&&t,u=(r.left+(c&&a?a.offsetLeft:0))/i,h=(r.top+(c&&a?a.offsetTop:0))/o,m=r.width/i,_=r.height/o;return{width:m,height:_,top:h,right:u+m,bottom:h+_,left:u,x:u,y:h}}function nO(n){var e=rs(n);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function rO(n){return Ig(gu(n)).left+nO(n).scrollLeft}function Wc(n){return rs(n).getComputedStyle(n)}function Ua(n){return n?(n.nodeName||"").toLowerCase():null}function Ew(n){return"html"===Ua(n)?n:n.assignedSlot||n.parentNode||(eO(n)?n.host:null)||gu(n)}function iO(n){var e=Wc(n);return/auto|scroll|overlay|hidden/.test(e.overflow+e.overflowY+e.overflowX)}function l5(n){return["html","body","#document"].indexOf(Ua(n))>=0?n.ownerDocument.body:Ss(n)&&iO(n)?n:l5(Ew(n))}function Ov(n,e){var t;void 0===e&&(e=[]);var r=l5(n),i=r===(null==(t=n.ownerDocument)?void 0:t.body),o=rs(r),s=i?[o].concat(o.visualViewport||[],iO(r)?r:[]):r,a=e.concat(s);return i?a:a.concat(Ov(Ew(s)))}function mge(n){return["table","td","th"].indexOf(Ua(n))>=0}function u5(n){return Ss(n)&&"fixed"!==Wc(n).position?n.offsetParent:null}function kv(n){for(var e=rs(n),t=u5(n);t&&mge(t)&&"static"===Wc(t).position;)t=u5(t);return t&&("html"===Ua(t)||"body"===Ua(t)&&"static"===Wc(t).position)?e:t||function _ge(n){var e=/firefox/i.test(tO());if(/Trident/i.test(tO())&&Ss(n)&&"fixed"===Wc(n).position)return null;var i=Ew(n);for(eO(i)&&(i=i.host);Ss(i)&&["html","body"].indexOf(Ua(i))<0;){var o=Wc(i);if("none"!==o.transform||"none"!==o.perspective||"paint"===o.contain||-1!==["transform","perspective"].indexOf(o.willChange)||e&&"filter"===o.willChange||e&&o.filter&&"none"!==o.filter)return i;i=i.parentNode}return null}(n)||e}function d5(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&eO(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function oO(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function h5(n,e,t){return e===o5?oO(function pge(n,e){var t=rs(n),r=gu(n),i=t.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,c=0;if(i){o=i.width,s=i.height;var u=c5();(u||!u&&"fixed"===e)&&(a=i.offsetLeft,c=i.offsetTop)}return{width:o,height:s,x:a+rO(n),y:c}}(n,t)):ih(e)?function yge(n,e){var t=Ig(n,!1,"fixed"===e);return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}(e,t):oO(function gge(n){var e,t=gu(n),r=nO(n),i=null==(e=n.ownerDocument)?void 0:e.body,o=oh(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=oh(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+rO(n),c=-r.scrollTop;return"rtl"===Wc(i||t).direction&&(a+=oh(t.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:c}}(gu(n)))}function Tg(n){return n.split("-")[1]}function sO(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function f5(n){var c,e=n.reference,t=n.element,r=n.placement,i=r?Ba(r):null,o=r?Tg(r):null,s=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2;switch(i){case ts:c={x:s,y:e.y-t.height};break;case na:c={x:s,y:e.y+e.height};break;case ra:c={x:e.x+e.width,y:a};break;case ns:c={x:e.x-t.width,y:a};break;default:c={x:e.x,y:e.y}}var u=i?sO(i):null;if(null!=u){var h="y"===u?"height":"width";switch(o){case Eg:c[u]=c[u]-(e[h]/2-t[h]/2);break;case Mv:c[u]=c[u]+(e[h]/2-t[h]/2)}}return c}function g5(n){return Object.assign({},{top:0,right:0,bottom:0,left:0},n)}function m5(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}function aO(n,e){void 0===e&&(e={});var r=e.placement,i=void 0===r?n.placement:r,o=e.strategy,s=void 0===o?n.strategy:o,a=e.boundary,c=void 0===a?"clippingParents":a,u=e.rootBoundary,h=void 0===u?o5:u,m=e.elementContext,_=void 0===m?Pv:m,v=e.altBoundary,I=void 0!==v&&v,D=e.padding,A=void 0===D?0:D,O=g5("number"!=typeof A?A:m5(A,Nv)),j=n.rects.popper,X=n.elements[I?_===Pv?"reference":Pv:_],ae=function Ege(n,e,t,r){var i="clippingParents"===e?function vge(n){var e=Ov(Ew(n)),r=["absolute","fixed"].indexOf(Wc(n).position)>=0&&Ss(n)?kv(n):n;return ih(r)?e.filter(function(i){return ih(i)&&d5(i,r)&&"body"!==Ua(i)}):[]}(n):[].concat(e),o=[].concat(i,[t]),a=o.reduce(function(c,u){var h=h5(n,u,r);return c.top=oh(h.top,c.top),c.right=vw(h.right,c.right),c.bottom=vw(h.bottom,c.bottom),c.left=oh(h.left,c.left),c},h5(n,o[0],r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(ih(X)?X:X.contextElement||gu(n.elements.popper),c,h,s),we=Ig(n.elements.reference),x=f5({reference:we,element:j,strategy:"absolute",placement:i}),S=oO(Object.assign({},j,x)),F=_===Pv?S:we,U={top:ae.top-F.top+O.top,bottom:F.bottom-ae.bottom+O.bottom,left:ae.left-F.left+O.left,right:F.right-ae.right+O.right},H=n.modifiersData.offset;if(_===Pv&&H){var W=H[i];Object.keys(U).forEach(function(k){var Di=[ra,na].indexOf(k)>=0?1:-1,is=[ts,na].indexOf(k)>=0?"y":"x";U[k]+=W[is]*Di})}return U}const wge={name:"flip",enabled:!0,phase:"main",fn:function Tge(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var i=t.mainAxis,o=void 0===i||i,s=t.altAxis,a=void 0===s||s,c=t.fallbackPlacements,u=t.padding,h=t.boundary,m=t.rootBoundary,_=t.altBoundary,v=t.flipVariations,I=void 0===v||v,D=t.allowedAutoPlacements,A=e.options.placement,O=Ba(A),j=c||(O!==A&&I?function Ige(n){if(Ba(n)===XP)return[];var e=yw(n);return[i5(n),e,i5(e)]}(A):[yw(A)]),X=[A].concat(j).reduce(function(mu,Fo){return mu.concat(Ba(Fo)===XP?function bge(n,e){void 0===e&&(e={});var i=e.boundary,o=e.rootBoundary,s=e.padding,a=e.flipVariations,c=e.allowedAutoPlacements,u=void 0===c?a5:c,h=Tg(e.placement),m=h?a?s5:s5.filter(function(I){return Tg(I)===h}):Nv,_=m.filter(function(I){return u.indexOf(I)>=0});0===_.length&&(_=m);var v=_.reduce(function(I,D){return I[D]=aO(n,{placement:D,boundary:i,rootBoundary:o,padding:s})[Ba(D)],I},{});return Object.keys(v).sort(function(I,D){return v[I]-v[D]})}(e,{placement:Fo,boundary:h,rootBoundary:m,padding:u,flipVariations:I,allowedAutoPlacements:D}):Fo)},[]),ae=e.rects.reference,we=e.rects.popper,x=new Map,S=!0,F=X[0],U=0;U<X.length;U++){var H=X[U],W=Ba(H),k=Tg(H)===Eg,Di=[ts,na].indexOf(W)>=0,is=Di?"width":"height",po=aO(e,{placement:H,boundary:h,rootBoundary:m,altBoundary:_,padding:u}),Ci=Di?k?ra:ns:k?na:ts;ae[is]>we[is]&&(Ci=yw(Ci));var ja=yw(Ci),oa=[];if(o&&oa.push(po[W]<=0),a&&oa.push(po[Ci]<=0,po[ja]<=0),oa.every(function(mu){return mu})){F=H,S=!1;break}x.set(H,oa)}if(S)for(var Uv=function(Fo){var ph=X.find(function(Ha){var qc=x.get(Ha);if(qc)return qc.slice(0,Fo).every(function(jv){return jv})});if(ph)return F=ph,"break"},xo=I?3:1;xo>0&&"break"!==Uv(xo);xo--);e.placement!==F&&(e.modifiersData[r]._skip=!0,e.placement=F,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function xv(n,e,t){return oh(n,vw(e,t))}function cO(n){var e=Ig(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}const Sge={name:"preventOverflow",enabled:!0,phase:"main",fn:function Age(n){var e=n.state,t=n.options,r=n.name,i=t.mainAxis,o=void 0===i||i,s=t.altAxis,a=void 0!==s&&s,_=t.tether,v=void 0===_||_,I=t.tetherOffset,D=void 0===I?0:I,A=aO(e,{boundary:t.boundary,rootBoundary:t.rootBoundary,padding:t.padding,altBoundary:t.altBoundary}),O=Ba(e.placement),P=Tg(e.placement),j=!P,X=sO(O),ae=function Dge(n){return"x"===n?"y":"x"}(X),we=e.modifiersData.popperOffsets,x=e.rects.reference,S=e.rects.popper,F="function"==typeof D?D(Object.assign({},e.rects,{placement:e.placement})):D,U="number"==typeof F?{mainAxis:F,altAxis:F}:Object.assign({mainAxis:0,altAxis:0},F),H=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,W={x:0,y:0};if(we){if(o){var k,Di="y"===X?ts:ns,is="y"===X?na:ra,po="y"===X?"height":"width",Ci=we[X],ja=Ci+A[Di],oa=Ci-A[is],fh=v?-S[po]/2:0,Uv=P===Eg?x[po]:S[po],xo=P===Eg?-S[po]:-x[po],Mr=e.elements.arrow,mu=v&&Mr?cO(Mr):{width:0,height:0},Fo=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ph=Fo[Di],Ha=Fo[is],qc=xv(0,x[po],mu[po]),jv=j?x[po]/2-fh-qc-ph-U.mainAxis:Uv-qc-ph-U.mainAxis,Ag=j?-x[po]/2+fh+qc+Ha+U.mainAxis:xo+qc+Ha+U.mainAxis,_u=e.elements.arrow&&kv(e.elements.arrow),Hv=_u?"y"===X?_u.clientTop||0:_u.clientLeft||0:0,Sg=null!=(k=H?.[X])?k:0,Gv=Ci+Ag-Sg,zv=xv(v?vw(ja,Ci+jv-Sg-Hv):ja,Ci,v?oh(oa,Gv):oa);we[X]=zv,W[X]=zv-Ci}if(a){var Wv,$a=we[ae],yu="y"===ae?"height":"width",qv=$a+A["x"===X?ts:ns],xw=$a-A["x"===X?na:ra],gh=-1!==[ts,ns].indexOf(O),Rg=null!=(Wv=H?.[ae])?Wv:0,Ng=gh?qv:$a-x[yu]-S[yu]-Rg+U.altAxis,Jr=gh?$a+x[yu]+S[yu]-Rg-U.altAxis:xw,li=v&&gh?function Cge(n,e,t){var r=xv(n,e,t);return r>t?t:r}(Ng,$a,Jr):xv(v?Ng:qv,$a,v?Jr:xw);we[ae]=li,W[ae]=li-$a}e.modifiersData[r]=W}},requiresIfExists:["offset"]},Pge={name:"arrow",enabled:!0,phase:"main",fn:function Nge(n){var e,t=n.state,r=n.name,i=n.options,o=t.elements.arrow,s=t.modifiersData.popperOffsets,a=Ba(t.placement),c=sO(a),h=[ns,ra].indexOf(a)>=0?"height":"width";if(o&&s){var m=function(e,t){return g5("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:m5(e,Nv))}(i.padding,t),_=cO(o),v="y"===c?ts:ns,I="y"===c?na:ra,D=t.rects.reference[h]+t.rects.reference[c]-s[c]-t.rects.popper[h],A=s[c]-t.rects.reference[c],O=kv(o),P=O?"y"===c?O.clientHeight||0:O.clientWidth||0:0,we=P/2-_[h]/2+(D/2-A/2),x=xv(m[v],we,P-_[h]-m[I]);t.modifiersData[r]=((e={})[c]=x,e.centerOffset=x-we,e)}},effect:function Mge(n){var e=n.state,r=n.options.element,i=void 0===r?"[data-popper-arrow]":r;null!=i&&("string"==typeof i&&!(i=e.elements.popper.querySelector(i))||d5(e.elements.popper,i)&&(e.elements.arrow=i))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Fge(n,e,t){void 0===t&&(t=!1);var r=Ss(e),i=Ss(e)&&function xge(n){var e=n.getBoundingClientRect(),t=bg(e.width)/n.offsetWidth||1,r=bg(e.height)/n.offsetHeight||1;return 1!==t||1!==r}(e),o=gu(e),s=Ig(n,i,t),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!t)&&(("body"!==Ua(e)||iO(o))&&(a=function kge(n){return n!==rs(n)&&Ss(n)?function Oge(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}(n):nO(n)}(e)),Ss(e)?((c=Ig(e,!0)).x+=e.clientLeft,c.y+=e.clientTop):o&&(c.x=rO(o))),{x:s.left+a.scrollLeft-c.x,y:s.top+a.scrollTop-c.y,width:s.width,height:s.height}}function Lge(n){var e=new Map,t=new Set,r=[];function i(o){t.add(o.name),[].concat(o.requires||[],o.requiresIfExists||[]).forEach(function(a){if(!t.has(a)){var c=e.get(a);c&&i(c)}}),r.push(o)}return n.forEach(function(o){e.set(o.name,o)}),n.forEach(function(o){t.has(o.name)||i(o)}),r}function Bge(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}var _5={placement:"bottom",modifiers:[],strategy:"absolute"};function y5(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&"function"==typeof r.getBoundingClientRect)})}function jge(n){void 0===n&&(n={});var t=n.defaultModifiers,r=void 0===t?[]:t,i=n.defaultOptions,o=void 0===i?_5:i;return function(a,c,u){void 0===u&&(u=o);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},_5,o),modifiersData:{},elements:{reference:a,popper:c},attributes:{},styles:{}},m=[],_=!1,v={state:h,setOptions:function(O){var P="function"==typeof O?O(h.options):O;D(),h.options=Object.assign({},o,h.options,P),h.scrollParents={reference:ih(a)?Ov(a):a.contextElement?Ov(a.contextElement):[],popper:Ov(c)};var j=function Vge(n){var e=Lge(n);return fge.reduce(function(t,r){return t.concat(e.filter(function(i){return i.phase===r}))},[])}(function Uge(n){var e=n.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}([].concat(r,h.options.modifiers)));return h.orderedModifiers=j.filter(function(X){return X.enabled}),function I(){h.orderedModifiers.forEach(function(A){var P=A.options,X=A.effect;if("function"==typeof X){var ae=X({state:h,name:A.name,instance:v,options:void 0===P?{}:P});m.push(ae||function(){})}})}(),v.update()},forceUpdate:function(){if(!_){var O=h.elements,P=O.reference,j=O.popper;if(y5(P,j)){h.rects={reference:Fge(P,kv(j),"fixed"===h.options.strategy),popper:cO(j)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(U){return h.modifiersData[U.name]=Object.assign({},U.data)});for(var X=0;X<h.orderedModifiers.length;X++)if(!0!==h.reset){var ae=h.orderedModifiers[X],we=ae.fn,x=ae.options;"function"==typeof we&&(h=we({state:h,options:void 0===x?{}:x,name:ae.name,instance:v})||h)}else h.reset=!1,X=-1}}},update:Bge(function(){return new Promise(function(A){v.forceUpdate(),A(h)})}),destroy:function(){D(),_=!0}};if(!y5(a,c))return v;function D(){m.forEach(function(A){return A()}),m=[]}return v.setOptions(u).then(function(A){!_&&u.onFirstUpdate&&u.onFirstUpdate(A)}),v}}var bw={passive:!0},Wge={top:"auto",right:"auto",bottom:"auto",left:"auto"};function v5(n){var e,t=n.popper,r=n.popperRect,i=n.placement,o=n.variation,s=n.offsets,a=n.position,c=n.gpuAcceleration,u=n.adaptive,h=n.roundOffsets,m=n.isFixed,_=s.x,v=void 0===_?0:_,I=s.y,D=void 0===I?0:I,A="function"==typeof h?h({x:v,y:D}):{x:v,y:D};v=A.x,D=A.y;var O=s.hasOwnProperty("x"),P=s.hasOwnProperty("y"),j=ns,X=ts,ae=window;if(u){var we=kv(t),x="clientHeight",S="clientWidth";we===rs(t)&&"static"!==Wc(we=gu(t)).position&&"absolute"===a&&(x="scrollHeight",S="scrollWidth"),(i===ts||(i===ns||i===ra)&&o===Mv)&&(X=na,D-=(m&&we===ae&&ae.visualViewport?ae.visualViewport.height:we[x])-r.height,D*=c?1:-1),i!==ns&&(i!==ts&&i!==na||o!==Mv)||(j=ra,v-=(m&&we===ae&&ae.visualViewport?ae.visualViewport.width:we[S])-r.width,v*=c?1:-1)}var k,H=Object.assign({position:a},u&&Wge),W=!0===h?function qge(n,e){var r=n.y,i=e.devicePixelRatio||1;return{x:bg(n.x*i)/i||0,y:bg(r*i)/i||0}}({x:v,y:D},rs(t)):{x:v,y:D};return v=W.x,D=W.y,Object.assign({},H,c?((k={})[X]=P?"0":"",k[j]=O?"0":"",k.transform=(ae.devicePixelRatio||1)<=1?"translate("+v+"px, "+D+"px)":"translate3d("+v+"px, "+D+"px, 0)",k):((e={})[X]=P?D+"px":"",e[j]=O?v+"px":"",e.transform="",e))}var Xge=jge({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function Hge(n){var e=n.state,t=n.instance,r=n.options,i=r.scroll,o=void 0===i||i,s=r.resize,a=void 0===s||s,c=rs(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&u.forEach(function(h){h.addEventListener("scroll",t.update,bw)}),a&&c.addEventListener("resize",t.update,bw),function(){o&&u.forEach(function(h){h.removeEventListener("scroll",t.update,bw)}),a&&c.removeEventListener("resize",t.update,bw)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function Gge(n){var e=n.state;e.modifiersData[n.name]=f5({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function Kge(n){var e=n.state,t=n.options,r=t.gpuAcceleration,i=void 0===r||r,o=t.adaptive,s=void 0===o||o,a=t.roundOffsets,c=void 0===a||a,u={placement:Ba(e.placement),variation:Tg(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,v5(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:c})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,v5(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function Yge(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},i=e.attributes[t]||{},o=e.elements[t];!Ss(o)||!Ua(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var a=i[s];!1===a?o.removeAttribute(s):o.setAttribute(s,!0===a?"":a)}))})},effect:function Jge(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]).reduce(function(c,u){return c[u]="",c},{});!Ss(i)||!Ua(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(c){i.removeAttribute(c)}))})}},requires:["computeStyles"]}]});const nme={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function tme(n){var e=n.state,r=n.name,i=n.options.offset,o=void 0===i?[0,0]:i,s=a5.reduce(function(h,m){return h[m]=function eme(n,e,t){var r=Ba(n),i=[ns,ts].indexOf(r)>=0?-1:1,o="function"==typeof t?t(Object.assign({},e,{placement:n})):t,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[ns,ra].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}(m,e.rects,o),h},{}),a=s[e.placement],u=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=a.x,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=s}},lO=["*"],kme=["dialog"],b5={animation:!0,transitionTimerDelayMs:5};let Fv=(()=>{class n{constructor(){this.animation=b5.animation}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function sh(n){return"string"==typeof n}function ah(n){return null!=n}function wg(n){return(n||document.body).getBoundingClientRect()}const A_e=()=>{},{transitionTimerDelayMs:S_e}=b5,Lv=new Map,Rs=(n,e,t,r)=>{let i=r.context||{};const o=Lv.get(e);if(o)switch(r.runningTransition){case"continue":return No;case"stop":n.run(()=>o.transition$.complete()),i=Object.assign(o.context,i),Lv.delete(e)}const s=t(e,r.animation,i)||A_e;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>s()),ze(void 0).pipe(function C_e(n){return e=>new R(t=>e.subscribe({next:s=>n.run(()=>t.next(s)),error:s=>n.run(()=>t.error(s)),complete:()=>n.run(()=>t.complete())}))}(n));const a=new Se,c=new Se,u=a.pipe(function qfe(...n){return e=>Id(e,ze(...n))}(!0));Lv.set(e,{transition$:a,complete:()=>{c.next(),c.complete()},context:i});const h=function T_e(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const m=bi(e,"transitionend").pipe(mi(u),yr(({target:v})=>v===e));n8(e8(h+S_e).pipe(mi(u)),m,c).pipe(mi(u)).subscribe(()=>{Lv.delete(e),n.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};let S5=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),R5=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),P5=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),O5=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qt({type:n})}static{this.\u0275inj=Rt({})}}return n})();const Aw=(n,e)=>!!e&&e.some(t=>t.contains(n)),V5=(n,e)=>!e||null!=function D_e(n,e){return!e||typeof n.closest>"u"?null:n.closest(e)}(n,e),tye=typeof navigator<"u"&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function yO(n,e,t,r,i,o,s,a){t&&n.runOutsideAngular((n=>tye?()=>setTimeout(()=>n(),100):n)(()=>{const u=bi(e,"keydown").pipe(mi(i),yr(_=>"Escape"===_.key),oi(_=>_.preventDefault())),h=bi(e,"mousedown").pipe($e(_=>{const v=_.target;return 2!==_.button&&!Aw(v,s)&&("inside"===t?Aw(v,o)&&V5(v,a):"outside"===t?!Aw(v,o):V5(v,a)||!Aw(v,o))}),mi(i)),m=bi(e,"mouseup").pipe(SP(h),yr(([_,v])=>v),function Yfe(n,e=DI){const t=e8(n,e);return r8(()=>t)}(0),mi(i));n8([u.pipe($e(_=>0)),m.pipe($e(_=>1))]).subscribe(_=>n.run(()=>r(_)))}))}const B5=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function U5(n){const e=Array.from(n.querySelectorAll(B5)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}let rye=(()=>{class n{constructor(){this._element=N(_r).documentElement}isRTL(){return"rtl"===(this._element.getAttribute("dir")||"").toLowerCase()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const iye=/\s+/,oye=/  +/gi,sye={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]},cye=/^left/,lye=/^right/,uye=/^start/,dye=/^end/;function H5({placement:n,baseClass:e},t){let r=Array.isArray(n)?n:n.split(iye),o=r.findIndex(u=>"auto"===u);o>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(u){null==r.find(h=>-1!==h.search("^"+u))&&r.splice(o++,1,u)});const s=r.map(u=>function aye(n,e){const[t,r]=sye[n];return e&&r||t}(u,t.isRTL()));return{placement:s.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!e,phase:"write",fn({state:u}){const h=new RegExp(e+"(-[a-z]+)*","gi"),m=u.elements.popper,_=u.placement;let v=m.className;v=v.replace(h,""),v+=` ${function hye(n,e){let[t,r]=e.split("-");const i=t.replace(cye,"start").replace(lye,"end");let o=[i];if(r){let s=r;("left"===t||"right"===t)&&(s=s.replace(uye,"top").replace(dye,"bottom")),o.push(`${i}-${s}`)}return n&&(o=o.map(s=>`${n}-${s}`)),o.join(" ")}(e,_)}`,v=v.trim().replace(oye," "),m.className=v}},wge,Sge,Pge,{enabled:!0,name:"flip",options:{fallbackPlacements:s}}]}}function $5(n){return n}new Date(1882,10,12),new Date(2174,10,25);let eW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),nW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),Mye=(()=>{class n{constructor(){this._ngbConfig=N(Fv),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0,this.role="dialog"}get animation(){return this._animation??this._ngbConfig.animation}set animation(t){this._animation=t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class hh{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}class Pye{constructor(e){this._componentType=e,this._windowRef=null,this._contentRef=null,this._document=N(_r),this._applicationRef=N(so),this._injector=N(zt),this._viewContainerRef=N(Ao),this._ngZone=N(g)}open(e,t,r=!1){this._windowRef||(this._contentRef=this._getContentRef(e,t),this._windowRef=this._viewContainerRef.createComponent(this._componentType,{injector:this._injector,projectableNodes:this._contentRef.nodes}));const{nativeElement:i}=this._windowRef.location,o=new Se;Il({mixedReadWrite:()=>{o.next(),o.complete()}},{injector:this._injector});const s=o.pipe(Qr(()=>Rs(this._ngZone,i,({classList:a})=>a.add("show"),{animation:r,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:s}}close(e=!1){return this._windowRef?Rs(this._ngZone,this._windowRef.location.nativeElement,({classList:t})=>t.remove("show"),{animation:e,runningTransition:"stop"}).pipe(oi(()=>{this._windowRef?.destroy(),this._contentRef?.viewRef?.destroy(),this._windowRef=null,this._contentRef=null})):ze(void 0)}_getContentRef(e,t){if(e){if(e instanceof Sr){const r=e.createEmbeddedView(t);return this._applicationRef.attachView(r),new hh([r.rootNodes],r)}return new hh([[this._document.createTextNode(`${e}`)]])}return new hh([])}}let Oye=(()=>{class n{constructor(){this._document=N(_r)}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,i=r.style,{overflow:o,paddingRight:s}=i;if(t>0){const a=parseFloat(window.getComputedStyle(r).paddingRight);i.paddingRight=`${a+t}px`}return i.overflow="hidden",()=>{t>0&&(i.paddingRight=s),i.overflow=o}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),kye=(()=>{class n{constructor(){this._nativeElement=N(nn).nativeElement,this._zone=N(g),this._injector=N(zt)}ngOnInit(){Il({mixedReadWrite:()=>Rs(this._zone,this._nativeElement,(t,r)=>{r&&wg(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})},{injector:this._injector})}hide(){return Rs(this._zone,this._nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Vr({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(r,i){2&r&&(Nl("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),fn("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(r,i){},encapsulation:2})}}return n})();class rW{update(e){}close(e){}dismiss(e){}}const xye=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","role","scrollable","size","windowClass","modalDialogClass"],Fye=["animation","backdropClass"];class Lye{_applyWindowOptions(e,t){xye.forEach(r=>{ah(t[r])&&(e[r]=t[r])})}_applyBackdropOptions(e,t){Fye.forEach(r=>{ah(t[r])&&(e[r]=t[r])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(mi(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(mi(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,t,r,i){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new Se,this._dismissed=new Se,this._hidden=new Se,e.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,s)=>{this._resolve=o,this._reject=s}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function I5(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(r=>{!1!==r&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():ze(void 0);e.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef?.viewRef?.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),AP(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var AO=function(n){return n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",n}(AO||{});let Vye=(()=>{class n{constructor(){this._document=N(_r),this._elRef=N(nn),this._zone=N(g),this._injector=N(zt),this._closed$=new Se,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.role="dialog",this.dismissEvent=new Xe,this.shown=new Se,this.hidden=new Se}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":sh(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,Il({mixedReadWrite:()=>this._show()},{injector:this._injector})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,r={animation:this.animation,runningTransition:"stop"},s=AP(Rs(this._zone,t,()=>t.classList.remove("show"),r),Rs(this._zone,this._dialogEl.nativeElement,()=>{},r));return s.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),s}_show(){const t={animation:this.animation,runningTransition:"continue"};AP(Rs(this._zone,this._elRef.nativeElement,(o,s)=>{s&&wg(o),o.classList.add("show")},t),Rs(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{bi(t,"keydown").pipe(mi(this._closed$),yr(i=>"Escape"===i.key)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(AO.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;bi(this._dialogEl.nativeElement,"mousedown").pipe(mi(this._closed$),oi(()=>r=!1),ur(()=>bi(t,"mouseup").pipe(mi(this._closed$),Li(1))),yr(({target:i})=>t===i)).subscribe(()=>{r=!0}),bi(t,"click").pipe(mi(this._closed$)).subscribe(({target:i})=>{t===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(AO.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const r=t.querySelector("[ngbAutofocus]"),i=U5(t)[0];(r||i||t).focus()}}_restoreFocus(){const t=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&t.contains(r)?r:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Rs(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Vr({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(r,i){if(1&r&&function Pl(n,e,t){yL(n,e,t)}(kme,7),2&r){let o;(function Ln(n){const e=J(),t=ct(),r=Im();af(r+1);const i=kA(t,r);if(n.dirty&&function AD(n){return!(4&~n[2])}(e)===!(2&~i.metadata.flags)){if(null===i.matches)n.reset([]);else{const o=bL(e,r);n.reset(o,wk),n.notifyOnChanges()}return!0}return!1})(o=function Vn(){return function OA(n,e){return n[18].queries[e].queryList}(J(),Im())}())&&(i._dialogEl=o.first)}},hostAttrs:["tabindex","-1"],hostVars:8,hostBindings:function(r,i){2&r&&(Cn("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy)("role",i.role),Nl("modal d-block"+(i.windowClass?" "+i.windowClass:"")),fn("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",role:"role",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:lO,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(r,i){1&r&&(cb(),Le(0,"div",1,0)(2,"div",2),lb(3),Ve()()),2&r&&Nl("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2})}}return n})(),Bye=(()=>{class n{constructor(){this._applicationRef=N(so),this._injector=N(zt),this._environmentInjector=N(cr),this._document=N(_r),this._scrollBar=N(Oye),this._activeWindowCmptHasChanged=new Se,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new Xe;const t=N(g);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const r=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,r=!1)=>{n.runOutsideAngular(()=>{const i=bi(e,"focusin").pipe(mi(t),$e(o=>o.target));bi(e,"keydown").pipe(mi(t),yr(o=>"Tab"===o.key),SP(i)).subscribe(([o,s])=>{const[a,c]=U5(e);(s===a||s===e)&&o.shiftKey&&(c.focus(),o.preventDefault()),s===c&&!o.shiftKey&&(a.focus(),o.preventDefault())}),r&&bi(e,"click").pipe(mi(t),SP(i),$e(o=>o[1])).subscribe(o=>o.focus())})})(t,r.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(r.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,r,i){const o=i.container instanceof HTMLElement?i.container:ah(i.container)?this._document.querySelector(i.container):this._document.body;if(!o)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const s=new rW,a=(t=i.injector||t).get(cr,null)||this._environmentInjector,c=this._getContentRef(t,a,r,s,i);let u=!1!==i.backdrop?this._attachBackdrop(o):void 0,h=this._attachWindowComponent(o,c.nodes),m=new Lye(h,c,u,i.beforeDismiss);return this._registerModalRef(m),this._registerWindowCmpt(h),m.hidden.pipe(Li(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),s.close=_=>{m.close(_)},s.dismiss=_=>{m.dismiss(_)},s.update=_=>{m.update(_)},m.update(i),1===this._modalRefs.length&&this._document.body.classList.add("modal-open"),u&&u.instance&&u.changeDetectorRef.detectChanges(),h.changeDetectorRef.detectChanges(),m}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(r=>r.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let r=US(kye,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}_attachWindowComponent(t,r){let i=US(Vye,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_getContentRef(t,r,i,o,s){return i?i instanceof Sr?this._createFromTemplateRef(i,o):sh(i)?this._createFromString(i):this._createFromComponent(t,r,i,o,s):new hh([])}_createFromTemplateRef(t,r){const o=t.createEmbeddedView({$implicit:r,close(s){r.close(s)},dismiss(s){r.dismiss(s)}});return this._applicationRef.attachView(o),new hh([o.rootNodes],o)}_createFromString(t){const r=this._document.createTextNode(`${t}`);return new hh([[r]])}_createFromComponent(t,r,i,o,s){const c=US(i,{environmentInjector:r,elementInjector:zt.create({providers:[{provide:rW,useValue:o}],parent:t})}),u=c.location.nativeElement;return s.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new hh([[u]],c.hostView,c)}_setAriaHidden(t){const r=t.parentElement;r&&t!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==t&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,r)=>{t?r.setAttribute("aria-hidden",t):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const r=()=>{const i=this._modalRefs.indexOf(t);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(r,r)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const r=this._windowCmpts.indexOf(t);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Uye=(()=>{class n{constructor(){this._injector=N(zt),this._modalStack=N(Bye),this._config=N(Mye)}open(t,r={}){const i={...this._config,animation:this._config.animation,...r};return this._modalStack.open(this._injector,t,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),iW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qt({type:n})}static{this.\u0275inj=Rt({providers:[Uye]})}}return n})(),aW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),gW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qt({type:n})}static{this.\u0275inj=Rt({})}}return n})();const Qye={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]};let mW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),_W=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),yW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),vW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),EW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),bW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),tve=(()=>{class n{constructor(){this._ngbConfig=N(Fv),this.autoClose=!0,this.placement="auto",this.popperOptions=t=>t,this.triggers="hover focus",this.disableTooltip=!1,this.openDelay=0,this.closeDelay=0}get animation(){return this._animation??this._ngbConfig.animation}set animation(t){this._animation=t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),nve=0,rve=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Vr({type:n,selectors:[["ngb-tooltip-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(r,i){2&r&&(Wo("id",i.id),Nl("tooltip"+(i.tooltipClass?" "+i.tooltipClass:"")),fn("fade",i.animation))},inputs:{animation:"animation",id:"id",tooltipClass:"tooltipClass"},ngContentSelectors:lO,decls:3,vars:0,consts:[["data-popper-arrow","",1,"tooltip-arrow"],[1,"tooltip-inner"]],template:function(r,i){1&r&&(cb(),lr(0,"div",0),Le(1,"div",1),lb(2),Ve())},styles:["ngb-tooltip-window{pointer-events:none;position:absolute}ngb-tooltip-window .tooltip-inner{pointer-events:auto}ngb-tooltip-window.bs-tooltip-top,ngb-tooltip-window.bs-tooltip-bottom{padding-left:0;padding-right:0}ngb-tooltip-window.bs-tooltip-start,ngb-tooltip-window.bs-tooltip-end{padding-top:0;padding-bottom:0}\n"],encapsulation:2,changeDetection:0})}}return n})(),ive=(()=>{class n{constructor(){this._config=N(tve),this.animation=this._config.animation,this.autoClose=this._config.autoClose,this.placement=this._config.placement,this.popperOptions=this._config.popperOptions,this.triggers=this._config.triggers,this.container=this._config.container,this.disableTooltip=this._config.disableTooltip,this.tooltipClass=this._config.tooltipClass,this.openDelay=this._config.openDelay,this.closeDelay=this._config.closeDelay,this.shown=new Xe,this.hidden=new Xe,this._nativeElement=N(nn).nativeElement,this._ngZone=N(g),this._document=N(_r),this._changeDetector=N(qo),this._injector=N(zt),this._ngbTooltipWindowId="ngb-tooltip-"+nve++,this._popupService=new Pye(rve),this._windowRef=null,this._positioning=function vO(){const n=N(rye);let e=null;return{createPopper(t){if(!e){let i=(t.updatePopperOptions||$5)(H5(t,n));e=Xge(t.hostElement,t.targetElement,i)}},update(){e&&e.update()},setOptions(t){if(e){let i=(t.updatePopperOptions||$5)(H5(t,n));e.setOptions(i)}},destroy(){e&&(e.destroy(),e=null)}}}()}set ngbTooltip(t){this._ngbTooltip=t,!t&&this._windowRef&&this.close()}get ngbTooltip(){return this._ngbTooltip}open(t){if(!this._windowRef&&this._ngbTooltip&&!this.disableTooltip){const{windowRef:r,transition$:i}=this._popupService.open(this._ngbTooltip,t??this.tooltipContext,this.animation);this._windowRef=r,this._windowRef.setInput("animation",this.animation),this._windowRef.setInput("tooltipClass",this.tooltipClass),this._windowRef.setInput("id",this._ngbTooltipWindowId),this._getPositionTargetElement().setAttribute("aria-describedby",this._ngbTooltipWindowId),"body"===this.container&&this._document.body.appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._getPositionTargetElement(),targetElement:this._windowRef.location.nativeElement,placement:this.placement,baseClass:"bs-tooltip",updatePopperOptions:o=>this.popperOptions(function EO(n){return e=>(e.modifiers.push(nme,{name:"offset",options:{offset:()=>n}}),e)}([0,6])(o))}),Promise.resolve().then(()=>{this._positioning.update()}),this._afterRenderRef=function Jm(n,e){!e?.injector&&Vs();const t=e?.injector??N(zt);return Do("NgAfterRender"),nx(n,t,e,!1)}({mixedReadWrite:()=>{this._positioning.update()}},{injector:this._injector})}),yO(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement],[this._nativeElement]),i.subscribe(()=>this.shown.emit())}}close(t=this.animation){null!=this._windowRef&&(this._getPositionTargetElement().removeAttribute("aria-describedby"),this._popupService.close(t).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this._afterRenderRef?.destroy(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=function Jye(n,e,t,r,i,o=0,s=0){const a=function Yye(n){const e=(n||"").trim();if(0===e.length)return[];const t=e.split(/\s+/).map(i=>i.split(":")).map(i=>Qye[i[0]]||i),r=t.filter(i=>i.includes("manual"));if(r.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===r.length&&t.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return r.length?[]:t}(e);if(0===a.length)return()=>{};const c=new Set,u=[];let h;function m(v,I){n.addEventListener(v,I),u.push(()=>n.removeEventListener(v,I))}function _(v,I){clearTimeout(h),I>0?h=setTimeout(v,I):v()}for(const[v,I]of a)I?(m(v,()=>{c.add(v),_(()=>c.size>0&&r(),o)}),m(I,()=>{c.delete(v),_(()=>0===c.size&&i(),s)})):m(v,()=>t()?_(i,s):_(r,o));return()=>u.forEach(v=>v())}(this._nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({tooltipClass:t}){t&&this.isOpen()&&this._windowRef.setInput("tooltipClass",t.currentValue)}ngOnDestroy(){this.close(!1),this._unregisterListenersFn?.()}_getPositionTargetElement(){return(sh(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget)||this._nativeElement}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=xe({type:n,selectors:[["","ngbTooltip",""]],inputs:{animation:"animation",autoClose:"autoClose",placement:"placement",popperOptions:"popperOptions",triggers:"triggers",positionTarget:"positionTarget",container:"container",disableTooltip:"disableTooltip",tooltipClass:"tooltipClass",tooltipContext:"tooltipContext",openDelay:"openDelay",closeDelay:"closeDelay",ngbTooltip:"ngbTooltip"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbTooltip"],features:[Cr]})}}return n})(),IW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qt({type:n})}static{this.\u0275inj=Rt({})}}return n})();new pe("live announcer delay",{providedIn:"root",factory:()=>100});let TW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),wW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qt({type:n})}static{this.\u0275inj=Rt({})}}return n})();const sve=[S5,R5,P5,O5,eW,nW,iW,aW,wW,gW,mW,_W,yW,vW,EW,bW,IW,TW];let DW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qt({type:n})}static{this.\u0275inj=Rt({imports:[sve,S5,R5,P5,O5,eW,nW,iW,aW,wW,gW,mW,_W,yW,vW,EW,bW,IW,TW]})}}return n})();function ave(n,e){if(1&n&&(Tc(0),lr(1,"img",5),Cc(2,"translate"),Cc(3,"translate"),wc()),2&n){const t=e.$implicit,r=Ke(2);Re(),ub("ngbTooltip",Ac(2,3,t.label)),_t("src",r.badgeImg(t),kf)("alt",Ac(3,5,t.label))}}function cve(n,e){if(1&n&&(Le(0,"div",1)(1,"p",2),lr(2,"img",3),on(3),Ve(),St(4,ave,4,7,"ng-container",4),Ve()),2&n){const t=Ke();Re(2),_t("src",t.user.profilePic,kf),Re(),vd(" ",t.user.displayName," "),Re(),_t("ngForOf",t.badgesInfo)}}let lve=(()=>{class n{user={badges:[]};badgesInfo=[];processedBadges=[];ngOnInit(){}ngOnChanges(t){}badgeImg(t){if(!this.user)return;const r=this.user.badges.find(o=>o.name==t.name);return`assets/images/${t.path}${r?t.icon:t.not_collected}`}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vr({type:n,selectors:[["app-badges-user-card"]],inputs:{user:"user",badgesInfo:"badgesInfo"},standalone:!1,features:[Cr],decls:1,vars:1,consts:[["class","nes-container is-rounded with-title",4,"ngIf"],[1,"nes-container","is-rounded","with-title"],[1,"title"],["width","50",2,"image-rendering","pixelated","border-radius","100%","border","1px solid #ddd",3,"src"],[4,"ngFor","ngForOf"],["placement","top","width","50",3,"src","ngbTooltip","alt"]],template:function(r,i){1&r&&St(0,cve,5,3,"div",0),2&r&&_t("ngIf",i.user)},dependencies:[cp,lp,ive,II],encapsulation:2})}return n})();function uve(n,e){if(1&n&&(Le(0,"div",5),lr(1,"app-badges-user-card",6),Ve()),2&n){const t=e.$implicit,r=Ke(2);Re(),_t("user",t)("badgesInfo",r.badgesInfo)}}function dve(n,e){if(1&n&&(Tc(0),St(1,uve,2,2,"div",4),wc()),2&n){const t=Ke();Re(),_t("ngForOf",t.users)}}function hve(n,e){if(1&n){const t=So();Le(0,"div",7)(1,"app-loader",8),fb("loadingChange",function(i){ni(t);const o=Ke();return yS(o.loading,i)||(o.loading=i),Fr(i)}),Ve()()}if(2&n){const t=Ke();Re(),hb("loading",t.loading)}}const fve=[{path:"leaderboard",component:Qse},{path:"badges",component:(()=>{class n{badgeSvc;loading=!1;users=[];badgesInfo=[];usersSub=null;constructor(t){this.badgeSvc=t}ngOnInit(){var t=this;return(0,T.A)(function*(){t.loading=!0,t.badgesInfo=yield t.badgeSvc.getBadgesInfo(),t.usersSub=t.badgeSvc.getUsers().subscribe(r=>t.users=r)})()}ngOnDestroy(){this.loading=!1,this.usersSub&&this.usersSub.unsubscribe()}static \u0275fac=function(r){return new(r||n)(Ie(Lfe))};static \u0275cmp=Vr({type:n,selectors:[["app-badges-view"]],standalone:!1,decls:5,vars:2,consts:[["loadingContent",""],[1,"container-fluid"],[1,"row"],[4,"ngIf","ngIfElse"],["class","col-3 mb-3",4,"ngFor","ngForOf"],[1,"col-3","mb-3"],[3,"user","badgesInfo"],[1,"col-12"],[3,"loadingChange","loading"]],template:function(r,i){if(1&r&&(Le(0,"div",1)(1,"div",2),St(2,dve,2,1,"ng-container",3)(3,hve,2,1,"ng-template",null,0,bs),Ve()()),2&r){const o=Qs(4);Re(2),_t("ngIf",!i.loading)("ngIfElse",o)}},dependencies:[cp,lp,fH,lve],encapsulation:2})}return n})()},{path:"**",redirectTo:""}];let pve=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Qt({type:n});static \u0275inj=Rt({imports:[hI.forRoot(fve),hI]})}return n})();const CW={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let NO;const gve=new Uint8Array(16),wi=[];for(let n=0;n<256;++n)wi.push((n+256).toString(16).slice(1));const yve=function _ve(n,e,t){if(CW.randomUUID&&!e&&!n)return CW.randomUUID();const r=(n=n||{}).random??n.rng?.()??function mve(){if(!NO){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");NO=crypto.getRandomValues.bind(crypto)}return NO(gve)}();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){if((t=t||0)<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[t+i]=r[i];return e}return function AW(n,e=0){return(wi[n[e+0]]+wi[n[e+1]]+wi[n[e+2]]+wi[n[e+3]]+"-"+wi[n[e+4]]+wi[n[e+5]]+"-"+wi[n[e+6]]+wi[n[e+7]]+"-"+wi[n[e+8]]+wi[n[e+9]]+"-"+wi[n[e+10]]+wi[n[e+11]]+wi[n[e+12]]+wi[n[e+13]]+wi[n[e+14]]+wi[n[e+15]]).toLowerCase()}(r)};let vve=(()=>{class n{translator;fileReader;constructor(t,r){this.translator=t,this.fileReader=r}setApplicationDefaultLanguage(){var t=this;return(0,T.A)(function*(){const{translator:r}=t,i=r.getBrowserLang(),o=(yield t.fileReader.getFile("languages.json"))?.map(u=>u.code)||["en"],s=o.join("|"),a=new RegExp(s);let c=i?.match(a)?i:"en";1===o.length&&(c=o[0]),r.addLangs(o),r.use(c)})()}static \u0275fac=function(r){return new(r||n)(me(Ip),me(CP))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Eve(n,e){1&n&&lr(0,"img",11),2&n&&db("src","/assets/images/",Ke().selectedLang.code,".png",kf)}function bve(n,e){if(1&n){const t=So();Le(0,"li")(1,"a",12),Yt("click",function(){const i=ni(t).$implicit;return Fr(Ke().selectLang(i))}),on(2),Cc(3,"translate"),Ve()()}if(2&n){const t=e.$implicit,r=Ke();Re(),fn("is-disabled",(null==r.selectedLang?null:r.selectedLang.code)==t.code),Re(),Fi(Ac(3,3,t.label))}}let Ive=(()=>{class n{trasnlatorSvc;jsonReaderService;appLanguageService;title="HEADER.TITLE";languages=null;selectedLang=null;constructor(t,r,i){this.trasnlatorSvc=t,this.jsonReaderService=r,this.appLanguageService=i}ngOnInit(){var t=this;return(0,T.A)(function*(){yield t.appLanguageService.setApplicationDefaultLanguage(),yield t.setStartingLang()})()}selectLang(t){this.selectedLang=t,this.trasnlatorSvc.use(t.code)}setStartingLang(){var t=this;return(0,T.A)(function*(){t.languages=yield t.jsonReaderService.getFile("languages.json"),t.selectedLang=t.languages?.find(r=>r.code===t.trasnlatorSvc.currentLang)||null})()}static \u0275fac=function(r){return new(r||n)(Ie(Ip),Ie(CP),Ie(vve))};static \u0275cmp=Vr({type:n,selectors:[["app-header"]],standalone:!1,decls:14,vars:8,consts:[["id","header",1,"navbar","navbar-expand-lg"],[1,"container-fluid"],[1,"nes-container","with-title","w-100"],["href","https://twitch.tv/kilzakplays","target","_blank",1,"navbar-brand","p-0","m-0"],["src","/assets/images/logo.png",1,"logo",3,"alt"],["id","header-title",1,"me-auto","w-100","text-center"],["id","lang-bar",1,"dropdown"],["href","#","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["alt","",3,"src",4,"ngIf"],[1,"dropdown-menu"],[4,"ngFor","ngForOf"],["alt","",3,"src"],[1,"dropdown-item","nes-text",3,"click"]],template:function(r,i){1&r&&(Le(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),lr(4,"img",4),Cc(5,"translate"),Ve(),Le(6,"div",5),on(7),Cc(8,"translate"),Ve(),Le(9,"div",6)(10,"a",7),St(11,Eve,1,2,"img",8),Ve(),Le(12,"ul",9),St(13,bve,4,5,"li",10),Ve()()()()()),2&r&&(Re(4),ub("alt",Ac(5,4,i.title)),Re(3),vd(" ",Ac(8,6,i.title)," "),Re(4),_t("ngIf",i.selectedLang),Re(2),_t("ngForOf",i.languages))},dependencies:[cp,lp,II],styles:["#header[_ngcontent-%COMP%]   #header-title[_ngcontent-%COMP%]{margin-left:-120px}#header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{cursor:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAzElEQVRYR+2X0Q6AIAhF5f8/2jYXZkwEjNSVvVUjDpcrGgT7FUkI2D9xRfQETwNIiWO85wfINfQUEyxBG2ArsLwC0jioGt5zFcwF4OYDPi/mBYKm4t0U8ATgRm3ThFoAqkhNgWkA0jJLvaOVSs7j3qMnSgXWBMiWPXe94QqMBMBc1VZIvaTu5u5pQewq0EqNZvIEMCmxAawK0DNkay9QmfFNAJUXfgGgUkLaE7j/h8fnASkxHTz0DGIBMCnBeeM7AArpUd3mz2x3C7wADglA8BcWMZhZAAAAAElFTkSuQmCC) 14 0,pointer;width:120px}#header[_ngcontent-%COMP%]   .nes-container[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-content:center;align-items:center}#header[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]{text-decoration:none}#header[_ngcontent-%COMP%]   #lang-bar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;cursor:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAzElEQVRYR+2X0Q6AIAhF5f8/2jYXZkwEjNSVvVUjDpcrGgT7FUkI2D9xRfQETwNIiWO85wfINfQUEyxBG2ArsLwC0jioGt5zFcwF4OYDPi/mBYKm4t0U8ATgRm3ThFoAqkhNgWkA0jJLvaOVSs7j3qMnSgXWBMiWPXe94QqMBMBc1VZIvaTu5u5pQewq0EqNZvIEMCmxAawK0DNkay9QmfFNAJUXfgGgUkLaE7j/h8fnASkxHTz0DGIBMCnBeeM7AArpUd3mz2x3C7wADglA8BcWMZhZAAAAAElFTkSuQmCC) 14 0,pointer;image-rendering:pixelated}#header[_ngcontent-%COMP%]   #lang-bar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{right:0;left:auto}#header[_ngcontent-%COMP%]   #lang-bar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:active{background-color:transparent}#header[_ngcontent-%COMP%]   #lang-bar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background-color:var(--kz-primary-color)}#header[_ngcontent-%COMP%]   #lang-bar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item.is-disabled[_ngcontent-%COMP%]{color:var(--kz-disabled-color);pointer-events:none}"]})}return n})();function Tve(n,e){if(1&n&&(Tc(0),lr(1,"a",7),wc()),2&n){const t=e.$implicit,r=e.first;Re(),aS("nes-icon ",t.icon," is-medium"),fn("ms-2",!r),_t("title",t.label)("href",t.url,kf)}}let wve=(()=>{class n{trademark="FOOTER.TRADEMARK";socials=[{label:"@KilzakPlays",url:"https://instagram.com/kilzakplays",icon:"instagram"},{label:"@KilzakPlays",url:"https://twitch.tv/kilzakplays",icon:"twitch"},{label:"@KilzakPlays",url:"https://www.youtube.com/@kilzakplays5780",icon:"youtube"},{label:"@Arquivo KilzakPlays",url:"https://www.youtube.com/@arquivokilzakplays7140",icon:"youtube"}];openDialog(t){const r=document.getElementById(t);r&&r.showModal()}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Vr({type:n,selectors:[["app-footer"]],standalone:!1,decls:8,vars:1,consts:[[1,"container-fluid"],[1,"row"],[1,"col"],[1,"nes-container","with-title","mt-2","d-flex","align-items-center"],[1,"icon-list"],[4,"ngFor","ngForOf"],[1,"ms-auto"],["target","_blank",3,"title","href"]],template:function(r,i){1&r&&(Le(0,"main",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"section",4),St(5,Tve,2,7,"ng-container",5),Ve(),Le(6,"section",6),on(7," KilzakPlays\u2122 "),Ve()()()()()),2&r&&(Re(5),_t("ngForOf",i.socials))},dependencies:[cp],encapsulation:2})}return n})();function Dve(n,e){if(1&n){const t=So();Le(0,"main",11)(1,"div",2)(2,"div",3)(3,"div",4)(4,"p",5),on(5,"TEMP"),Ve(),Le(6,"P"),on(7),Ve(),Le(8,"button",12),Yt("click",function(){return ni(t),Fr(Ke().generate())}),on(9,"Primary"),Ve()()()()()}if(2&n){const t=Ke();Re(7),Fi(t.uuid)}}let Cve=(()=>{class n{router;title="channel-hall-of-fame";menuLabels={leaderboard:"HEADER.MENU.LEADERBOARD",badges:"HEADER.MENU.BADGES"};routeMenuFormControl=new WP("badges");uuid="";constructor(t){this.router=t}ngOnInit(){this.setRouteMenuControl()}generate(){this.uuid=yve()}setRouteMenuControl(){this.routeMenuFormControl.valueChanges.subscribe(t=>{this.router.navigateByUrl(t)})}static \u0275fac=function(r){return new(r||n)(Ie(kc))};static \u0275cmp=Vr({type:n,selectors:[["app-root"]],standalone:!1,decls:20,vars:13,consts:[["class","container-fluid mb-3",4,"ngIf"],[1,"container-fluid"],[1,"row"],[1,"col"],[1,"nes-container","with-title"],[1,"title"],[1,"mb-0","me-5","link"],["type","radio","name","route","value","badges",1,"nes-radio",3,"formControl"],[1,"mb-0","link"],["type","radio","name","route","value","leaderboard",1,"nes-radio",3,"formControl"],["id","content",1,"container-fluid"],[1,"container-fluid","mb-3"],["type","button",1,"nes-btn","is-primary",3,"click"]],template:function(r,i){1&r&&(lr(0,"app-header"),St(1,Dve,10,1,"main",0),Le(2,"main",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"label",6),lr(8,"input",7),Le(9,"span"),on(10),Cc(11,"translate"),Ve()(),Le(12,"label",8),lr(13,"input",9),Le(14,"span"),on(15),Cc(16,"translate"),Ve()()(),Le(17,"div",10),lr(18,"router-outlet"),Ve()()()()(),lr(19,"app-footer")),2&r&&(Re(),_t("ngIf",!1),Re(6),fn("active","badges"==i.routeMenuFormControl.value),Re(),_t("formControl",i.routeMenuFormControl),Re(2),Fi(Ac(11,9,i.menuLabels.badges)),Re(2),fn("active","leaderboard"==i.routeMenuFormControl.value),Re(),_t("formControl",i.routeMenuFormControl),Re(2),Fi(Ac(16,11,i.menuLabels.leaderboard)))},dependencies:[lp,M1,tw,qP,S8,QP,Ive,wve,II],styles:[".link.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{animation:blink 1s infinite steps(1)!important}"]})}return n})(),MO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Qt({type:n});static \u0275inj=Rt({imports:[Y_,TI,DW,DW]})}return n})(),SW=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Qt({type:n});static \u0275inj=Rt({providers:[Ofe(kfe()),bU],imports:[Y_,TI,hI,r5,MO,Y_,TI,hI,r5,MO]})}return n})(),Ave=(()=>{class n{http;prefix;suffix;constructor(t,r="/assets/i18n/",i=".json"){this.http=t,this.prefix=r,this.suffix=i}getTranslation(t){return this.http.get(`${this.prefix}${t}${this.suffix}`)}static \u0275fac=function(r){return new(r||n)(me(Tv),me(String),me(String))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();function Sve(n){return new Ave(n,"./assets/i18n/",".json")}let Rve=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Qt({type:n});static \u0275inj=Rt({imports:[Y_,SW]})}return n})(),Nve=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Qt({type:n,bootstrap:[Cve]});static \u0275inj=Rt({imports:[uce.initializeApp(Jz.firebase),rfe,Rve,fre,pve,SW,MO,TI.forRoot({loader:{provide:bp,useFactory:Sve,deps:[Tv]}})]})}return n})();hre().bootstrapModule(Nve,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n))},852:(mo,Ir,pt)=>{pt.r(Ir),pt.d(Ir,{FirebaseError:()=>ee.g,SDK_VERSION:()=>Vo,_DEFAULT_ENTRY_NAME:()=>Lo,_addComponent:()=>di,_addOrOverwriteComponent:()=>yo,_apps:()=>Gi,_clearComponents:()=>Ka,_components:()=>Wi,_getProvider:()=>cs,_isFirebaseApp:()=>qa,_isFirebaseServerApp:()=>ls,_registerComponent:()=>Wa,_removeServiceInstance:()=>Ms,_serverApps:()=>zi,deleteApp:()=>Os,getApp:()=>Ps,getApps:()=>bh,initializeApp:()=>aa,initializeServerApp:()=>us,onLog:()=>Ki,registerVersion:()=>qi,setLogLevel:()=>ks});var T=pt(467),st=pt(362),Ce=pt(41),ee=pt(858);let Et,He;const ge=new WeakMap,ye=new WeakMap,Be=new WeakMap,bt=new WeakMap,yt=new WeakMap;let ce={get(K,$,oe){if(K instanceof IDBTransaction){if("done"===$)return ye.get(K);if("objectStoreNames"===$)return K.objectStoreNames||Be.get(K);if("store"===$)return oe.objectStoreNames[1]?void 0:oe.objectStore(oe.objectStoreNames[0])}return dt(K[$])},set:(K,$,oe)=>(K[$]=oe,!0),has:(K,$)=>K instanceof IDBTransaction&&("done"===$||"store"===$)||$ in K};function Qe(K){return"function"==typeof K?function Me(K){return K!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Zt(){return He||(He=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(K)?function(...$){return K.apply(Ye(this),$),dt(ge.get(this))}:function(...$){return dt(K.apply(Ye(this),$))}:function($,...oe){const Ae=K.call(Ye(this),$,...oe);return Be.set(Ae,$.sort?$.sort():[$]),dt(Ae)}}(K):(K instanceof IDBTransaction&&function Ot(K){if(ye.has(K))return;const $=new Promise((oe,Ae)=>{const Ze=()=>{K.removeEventListener("complete",at),K.removeEventListener("error",ht),K.removeEventListener("abort",ht)},at=()=>{oe(),Ze()},ht=()=>{Ae(K.error||new DOMException("AbortError","AbortError")),Ze()};K.addEventListener("complete",at),K.addEventListener("error",ht),K.addEventListener("abort",ht)});ye.set(K,$)}(K),((K,$)=>$.some(oe=>K instanceof oe))(K,function Qn(){return Et||(Et=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(K,ce):K)}function dt(K){if(K instanceof IDBRequest)return function dr(K){const $=new Promise((oe,Ae)=>{const Ze=()=>{K.removeEventListener("success",at),K.removeEventListener("error",ht)},at=()=>{oe(dt(K.result)),Ze()},ht=()=>{Ae(K.error),Ze()};K.addEventListener("success",at),K.addEventListener("error",ht)});return $.then(oe=>{oe instanceof IDBCursor&&ge.set(oe,K)}).catch(()=>{}),yt.set($,K),$}(K);if(bt.has(K))return bt.get(K);const $=Qe(K);return $!==K&&(bt.set(K,$),yt.set($,K)),$}const Ye=K=>yt.get(K),je=["get","getKey","getAll","getAllKeys","count"],jt=["put","add","delete","clear"],Ht=new Map;function he(K,$){if(!(K instanceof IDBDatabase)||$ in K||"string"!=typeof $)return;if(Ht.get($))return Ht.get($);const oe=$.replace(/FromIndex$/,""),Ae=$!==oe,Ze=jt.includes(oe);if(!(oe in(Ae?IDBIndex:IDBObjectStore).prototype)||!Ze&&!je.includes(oe))return;const at=function(){var ht=(0,T.A)(function*(cn,...$n){const Ri=this.transaction(cn,Ze?"readwrite":"readonly");let Mt=Ri.store;return Ae&&(Mt=Mt.index($n.shift())),(yield Promise.all([Mt[oe](...$n),Ze&&Ri.done]))[0]});return function($n){return ht.apply(this,arguments)}}();return Ht.set($,at),at}!function De(K){ce=K(ce)}(K=>({...K,get:($,oe,Ae)=>he($,oe)||K.get($,oe,Ae),has:($,oe)=>!!he($,oe)||K.has($,oe)}));class In{constructor($){this.container=$}getPlatformInfoString(){return this.container.getProviders().map(oe=>{if(function yn(K){const $=K.getComponent();return"VERSION"===$?.type}(oe)){const Ae=oe.getImmediate();return`${Ae.library}/${Ae.version}`}return null}).filter(oe=>oe).join(" ")}}const en="@firebase/app",ar="0.12.1",Yn=new Ce.Vy("@firebase/app"),ss="@firebase/app-compat",Ga="@firebase/analytics-compat",_o="@firebase/analytics",za="@firebase/app-check-compat",Q="@firebase/app-check",te="@firebase/auth",ie="@firebase/auth-compat",re="@firebase/database",le="@firebase/data-connect",ue="@firebase/database-compat",Ge="@firebase/functions",xt="@firebase/functions-compat",On="@firebase/installations",tt="@firebase/installations-compat",tn="@firebase/messaging",Jn="@firebase/messaging-compat",ui="@firebase/performance",an="@firebase/performance-compat",hr="@firebase/remote-config",Hn="@firebase/remote-config-compat",Zn="@firebase/storage",Zr="@firebase/storage-compat",Iu="@firebase/firestore",Eh="@firebase/vertexai",At="@firebase/firestore-compat",Ns="firebase",Lo="[DEFAULT]",Xn={[en]:"fire-core",[ss]:"fire-core-compat",[_o]:"fire-analytics",[Ga]:"fire-analytics-compat",[Q]:"fire-app-check",[za]:"fire-app-check-compat",[te]:"fire-auth",[ie]:"fire-auth-compat",[re]:"fire-rtdb",[le]:"fire-data-connect",[ue]:"fire-rtdb-compat",[Ge]:"fire-fn",[xt]:"fire-fn-compat",[On]:"fire-iid",[tt]:"fire-iid-compat",[tn]:"fire-fcm",[Jn]:"fire-fcm-compat",[ui]:"fire-perf",[an]:"fire-perf-compat",[hr]:"fire-rc",[Hn]:"fire-rc-compat",[Zn]:"fire-gcs",[Zr]:"fire-gcs-compat",[Iu]:"fire-fst",[At]:"fire-fst-compat",[Eh]:"fire-vertex","fire-js":"fire-js",[Ns]:"fire-js-all"},Gi=new Map,zi=new Map,Wi=new Map;function di(K,$){try{K.container.addComponent($)}catch(oe){Yn.debug(`Component ${$.name} failed to register with FirebaseApp ${K.name}`,oe)}}function yo(K,$){K.container.addOrOverwriteComponent($)}function Wa(K){const $=K.name;if(Wi.has($))return Yn.debug(`There were multiple attempts to register component ${$}.`),!1;Wi.set($,K);for(const oe of Gi.values())di(oe,K);for(const oe of zi.values())di(oe,K);return!0}function cs(K,$){const oe=K.container.getProvider("heartbeat").getImmediate({optional:!0});return oe&&oe.triggerHeartbeat(),K.container.getProvider($)}function Ms(K,$,oe=Lo){cs(K,$).clearInstance(oe)}function qa(K){return void 0!==K.options}function ls(K){return null!=K&&void 0!==K.settings}function Ka(){Wi.clear()}const fr=new ee.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Tu{constructor($,oe,Ae){this._isDeleted=!1,this._options=Object.assign({},$),this._config=Object.assign({},oe),this._name=oe.name,this._automaticDataCollectionEnabled=oe.automaticDataCollectionEnabled,this._container=Ae,this.container.addComponent(new st.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($){this.checkDestroyed(),this._automaticDataCollectionEnabled=$}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($){this._isDeleted=$}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}}function Qa(K,$){const oe=(0,ee.u)(K.split(".")[1]);null!==oe?void 0!==JSON.parse(oe).exp?1e3*JSON.parse(oe).exp-(new Date).getTime()<=0&&console.error(`FirebaseServerApp ${$} is invalid: the token has expired.`):console.error(`FirebaseServerApp ${$} is invalid: expiration claim could not be parsed`):console.error(`FirebaseServerApp ${$} is invalid: second part could not be parsed.`)}class Ya extends Tu{constructor($,oe,Ae,Ze){const at=void 0!==oe.automaticDataCollectionEnabled&&oe.automaticDataCollectionEnabled,ht={name:Ae,automaticDataCollectionEnabled:at};super(void 0!==$.apiKey?$:$.options,ht,Ze),this._serverConfig=Object.assign({automaticDataCollectionEnabled:at},oe),this._serverConfig.authIdToken&&Qa(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&Qa(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,oe.releaseOnDeref=void 0,qi(en,ar,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount($){this.isDeleted||(this._refCount++,void 0!==$&&null!==this._finalizationRegistry&&this._finalizationRegistry.register($,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Os(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw fr.create("server-app-deleted")}}const Vo="11.7.1";function aa(K,$={}){let oe=K;"object"!=typeof $&&($={name:$});const Ae=Object.assign({name:Lo,automaticDataCollectionEnabled:!1},$),Ze=Ae.name;if("string"!=typeof Ze||!Ze)throw fr.create("bad-app-name",{appName:String(Ze)});if(oe||(oe=(0,ee.T9)()),!oe)throw fr.create("no-options");const at=Gi.get(Ze);if(at){if((0,ee.bD)(oe,at.options)&&(0,ee.bD)(Ae,at.config))return at;throw fr.create("duplicate-app",{appName:Ze})}const ht=new st.h1(Ze);for(const $n of Wi.values())ht.addComponent($n);const cn=new Tu(oe,Ae,ht);return Gi.set(Ze,cn),cn}function us(K,$){if((0,ee.Bd)()&&!(0,ee.p7)())throw fr.create("invalid-server-app-environment");let oe;void 0===$.automaticDataCollectionEnabled&&($.automaticDataCollectionEnabled=!1),oe=qa(K)?K.options:K;const Ae=Object.assign(Object.assign({},$),oe);if(void 0!==Ae.releaseOnDeref&&delete Ae.releaseOnDeref,void 0!==$.releaseOnDeref&&typeof FinalizationRegistry>"u")throw fr.create("finalization-registry-not-supported",{});const at=""+(Ri=JSON.stringify(Ae),[...Ri].reduce((Mt,xg)=>Math.imul(31,Mt)+xg.charCodeAt(0)|0,0)),ht=zi.get(at);var Ri;if(ht)return ht.incRefCount($.releaseOnDeref),ht;const cn=new st.h1(at);for(const Ri of Wi.values())cn.addComponent(Ri);const $n=new Ya(oe,$,at,cn);return zi.set(at,$n),$n}function Ps(K=Lo){const $=Gi.get(K);if(!$&&K===Lo&&(0,ee.T9)())return aa();if(!$)throw fr.create("no-app",{appName:K});return $}function bh(){return Array.from(Gi.values())}function Os(K){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,T.A)(function*(K){let $=!1;const oe=K.name;Gi.has(oe)?($=!0,Gi.delete(oe)):zi.has(oe)&&K.decRefCount()<=0&&(zi.delete(oe),$=!0),$&&(yield Promise.all(K.container.getProviders().map(Ae=>Ae.delete())),K.isDeleted=!0)})).apply(this,arguments)}function qi(K,$,oe){var Ae;let Ze=null!==(Ae=Xn[K])&&void 0!==Ae?Ae:K;oe&&(Ze+=`-${oe}`);const at=Ze.match(/\s|\//),ht=$.match(/\s|\//);if(at||ht){const cn=[`Unable to register library "${Ze}" with version "${$}":`];return at&&cn.push(`library name "${Ze}" contains illegal characters (whitespace or "/")`),at&&ht&&cn.push("and"),ht&&cn.push(`version name "${$}" contains illegal characters (whitespace or "/")`),void Yn.warn(cn.join(" "))}Wa(new st.uA(`${Ze}-version`,()=>({library:Ze,version:$}),"VERSION"))}function Ki(K,$){if(null!==K&&"function"!=typeof K)throw fr.create("invalid-log-argument");(0,Ce.Ey)(K,$)}function ks(K){(0,Ce.He)(K)}const B="firebase-heartbeat-store";let de=null;function q(){return de||(de=function kt(K,$,{blocked:oe,upgrade:Ae,blocking:Ze,terminated:at}={}){const ht=indexedDB.open(K,$),cn=dt(ht);return Ae&&ht.addEventListener("upgradeneeded",$n=>{Ae(dt(ht.result),$n.oldVersion,$n.newVersion,dt(ht.transaction),$n)}),oe&&ht.addEventListener("blocked",$n=>oe($n.oldVersion,$n.newVersion,$n)),cn.then($n=>{at&&$n.addEventListener("close",()=>at()),Ze&&$n.addEventListener("versionchange",Ri=>Ze(Ri.oldVersion,Ri.newVersion,Ri))}).catch(()=>{}),cn}("firebase-heartbeat-database",1,{upgrade:(K,$)=>{if(0===$)try{K.createObjectStore(B)}catch(oe){console.warn(oe)}}}).catch(K=>{throw fr.create("idb-open",{originalErrorMessage:K.message})})),de}function Se(){return(Se=(0,T.A)(function*(K){try{const oe=(yield q()).transaction(B),Ae=yield oe.objectStore(B).get(pr(K));return yield oe.done,Ae}catch($){if($ instanceof ee.g)Yn.warn($.message);else{const oe=fr.create("idb-get",{originalErrorMessage:$?.message});Yn.warn(oe.message)}}})).apply(this,arguments)}function qt(K,$){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,T.A)(function*(K,$){try{const Ae=(yield q()).transaction(B,"readwrite");yield Ae.objectStore(B).put($,pr(K)),yield Ae.done}catch(oe){if(oe instanceof ee.g)Yn.warn(oe.message);else{const Ae=fr.create("idb-set",{originalErrorMessage:oe?.message});Yn.warn(Ae.message)}}})).apply(this,arguments)}function pr(K){return`${K.name}!${K.options.appId}`}class Si{constructor($){this.container=$,this._heartbeatsCache=null;const oe=this.container.getProvider("app").getImmediate();this._storage=new wu(oe),this._heartbeatsCachePromise=this._storage.read().then(Ae=>(this._heartbeatsCache=Ae,Ae))}triggerHeartbeat(){var $=this;return(0,T.A)(function*(){var oe,Ae;try{const at=$.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ht=$e();if(null==(null===(oe=$._heartbeatsCache)||void 0===oe?void 0:oe.heartbeats)&&($._heartbeatsCache=yield $._heartbeatsCachePromise,null==(null===(Ae=$._heartbeatsCache)||void 0===Ae?void 0:Ae.heartbeats))||$._heartbeatsCache.lastSentHeartbeatDate===ht||$._heartbeatsCache.heartbeats.some(cn=>cn.date===ht))return;if($._heartbeatsCache.heartbeats.push({date:ht,agent:at}),$._heartbeatsCache.heartbeats.length>30){const cn=function Za(K){if(0===K.length)return-1;let $=0,oe=K[0].date;for(let Ae=1;Ae<K.length;Ae++)K[Ae].date<oe&&(oe=K[Ae].date,$=Ae);return $}($._heartbeatsCache.heartbeats);$._heartbeatsCache.heartbeats.splice(cn,1)}return $._storage.overwrite($._heartbeatsCache)}catch(Ze){Yn.warn(Ze)}})()}getHeartbeatsHeader(){var $=this;return(0,T.A)(function*(){var oe;try{if(null===$._heartbeatsCache&&(yield $._heartbeatsCachePromise),null==(null===(oe=$._heartbeatsCache)||void 0===oe?void 0:oe.heartbeats)||0===$._heartbeatsCache.heartbeats.length)return"";const Ae=$e(),{heartbeatsToSend:Ze,unsentEntries:at}=function ca(K,$=1024){const oe=[];let Ae=K.slice();for(const Ze of K){const at=oe.find(ht=>ht.agent===Ze.agent);if(at){if(at.dates.push(Ze.date),se(oe)>$){at.dates.pop();break}}else if(oe.push({agent:Ze.agent,dates:[Ze.date]}),se(oe)>$){oe.pop();break}Ae=Ae.slice(1)}return{heartbeatsToSend:oe,unsentEntries:Ae}}($._heartbeatsCache.heartbeats),ht=(0,ee.Uj)(JSON.stringify({version:2,heartbeats:Ze}));return $._heartbeatsCache.lastSentHeartbeatDate=Ae,at.length>0?($._heartbeatsCache.heartbeats=at,yield $._storage.overwrite($._heartbeatsCache)):($._heartbeatsCache.heartbeats=[],$._storage.overwrite($._heartbeatsCache)),ht}catch(Ae){return Yn.warn(Ae),""}})()}}function $e(){return(new Date).toISOString().substring(0,10)}class wu{constructor($){this.app=$,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,T.A)(function*(){return!!(0,ee.zW)()&&(0,ee.eX)().then(()=>!0).catch(()=>!1)})()}read(){var $=this;return(0,T.A)(function*(){if(yield $._canUseIndexedDBPromise){const Ae=yield function qe(K){return Se.apply(this,arguments)}($.app);return Ae?.heartbeats?Ae:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite($){var oe=this;return(0,T.A)(function*(){var Ae;if(yield oe._canUseIndexedDBPromise){const at=yield oe.read();return qt(oe.app,{lastSentHeartbeatDate:null!==(Ae=$.lastSentHeartbeatDate)&&void 0!==Ae?Ae:at.lastSentHeartbeatDate,heartbeats:$.heartbeats})}})()}add($){var oe=this;return(0,T.A)(function*(){var Ae;if(yield oe._canUseIndexedDBPromise){const at=yield oe.read();return qt(oe.app,{lastSentHeartbeatDate:null!==(Ae=$.lastSentHeartbeatDate)&&void 0!==Ae?Ae:at.lastSentHeartbeatDate,heartbeats:[...at.heartbeats,...$.heartbeats]})}})()}}function se(K){return(0,ee.Uj)(JSON.stringify({version:2,heartbeats:K})).length}!function Bo(K){Wa(new st.uA("platform-logger",$=>new In($),"PRIVATE")),Wa(new st.uA("heartbeat",$=>new Si($),"PRIVATE")),qi(en,ar,K),qi(en,ar,"esm2017"),qi("fire-js","")}("")},858:(mo,Ir,pt)=>{pt.d(Ir,{cY:()=>je,FA:()=>xt,g:()=>Ge,K3:()=>Qn,u:()=>Be,Uj:()=>ye,gR:()=>Zr,Fy:()=>jt,tD:()=>di,bD:()=>Ns,zw:()=>yt,hp:()=>zi,T9:()=>kt,XA:()=>Xt,mS:()=>Ot,Ku:()=>Ja,ZQ:()=>Ht,Bd:()=>yn,sr:()=>Yn,zJ:()=>qi,c1:()=>ar,Im:()=>Eh,lT:()=>_o,zW:()=>ie,jZ:()=>he,Ll:()=>In,lV:()=>ss,nr:()=>te,p7:()=>en,gE:()=>Ki,Am:()=>Xn,I9:()=>Gi,eX:()=>re});var T=pt(467);const Et=function(L){const R=[];let B=0;for(let de=0;de<L.length;de++){let q=L.charCodeAt(de);q<128?R[B++]=q:q<2048?(R[B++]=q>>6|192,R[B++]=63&q|128):55296==(64512&q)&&de+1<L.length&&56320==(64512&L.charCodeAt(de+1))?(q=65536+((1023&q)<<10)+(1023&L.charCodeAt(++de)),R[B++]=q>>18|240,R[B++]=q>>12&63|128,R[B++]=q>>6&63|128,R[B++]=63&q|128):(R[B++]=q>>12|224,R[B++]=q>>6&63|128,R[B++]=63&q|128)}return R},Qn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(L,R){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();const B=R?this.byteToCharMapWebSafe_:this.byteToCharMap_,de=[];for(let q=0;q<L.length;q+=3){const qe=L[q],Se=q+1<L.length,qt=Se?L[q+1]:0,Nt=q+2<L.length,pr=Nt?L[q+2]:0;let Si=(15&qt)<<2|pr>>6,$e=63&pr;Nt||($e=64,Se||(Si=64)),de.push(B[qe>>2],B[(3&qe)<<4|qt>>4],B[Si],B[$e])}return de.join("")},encodeString(L,R){return this.HAS_NATIVE_SUPPORT&&!R?btoa(L):this.encodeByteArray(Et(L),R)},decodeString(L,R){return this.HAS_NATIVE_SUPPORT&&!R?atob(L):function(L){const R=[];let B=0,de=0;for(;B<L.length;){const q=L[B++];if(q<128)R[de++]=String.fromCharCode(q);else if(q>191&&q<224){const qe=L[B++];R[de++]=String.fromCharCode((31&q)<<6|63&qe)}else if(q>239&&q<365){const Nt=((7&q)<<18|(63&L[B++])<<12|(63&L[B++])<<6|63&L[B++])-65536;R[de++]=String.fromCharCode(55296+(Nt>>10)),R[de++]=String.fromCharCode(56320+(1023&Nt))}else{const qe=L[B++],Se=L[B++];R[de++]=String.fromCharCode((15&q)<<12|(63&qe)<<6|63&Se)}}return R.join("")}(this.decodeStringToByteArray(L,R))},decodeStringToByteArray(L,R){this.init_();const B=R?this.charToByteMapWebSafe_:this.charToByteMap_,de=[];for(let q=0;q<L.length;){const qe=B[L.charAt(q++)],qt=q<L.length?B[L.charAt(q)]:0;++q;const pr=q<L.length?B[L.charAt(q)]:64;++q;const Je=q<L.length?B[L.charAt(q)]:64;if(++q,null==qe||null==qt||null==pr||null==Je)throw new Zt;de.push(qe<<2|qt>>4),64!==pr&&(de.push(qt<<4&240|pr>>2),64!==Je&&de.push(pr<<6&192|Je))}return de},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}};class Zt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ye=function(L){return function(L){const R=Et(L);return Qn.encodeByteArray(R,!0)}(L).replace(/\./g,"")},Be=function(L){try{return Qn.decodeString(L,!0)}catch(R){console.error("base64Decode failed: ",R)}return null};function yt(L,R){if(!(R instanceof Object))return R;switch(R.constructor){case Date:return new Date(R.getTime());case Object:void 0===L&&(L={});break;case Array:L=[];break;default:return R}for(const B in R)!R.hasOwnProperty(B)||!dr(B)||(L[B]=yt(L[B],R[B]));return L}function dr(L){return"__proto__"!==L}function Ot(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Qe=()=>{try{return Ot().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const L=process.env.__FIREBASE_DEFAULTS__;return L?JSON.parse(L):void 0})()||(()=>{if(typeof document>"u")return;let L;try{L=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const R=L&&Be(L[1]);return R&&JSON.parse(R)})()}catch(L){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${L}`)}},kt=()=>{var L;return null===(L=Qe())||void 0===L?void 0:L.config},Xt=L=>{var R;return null===(R=Qe())||void 0===R?void 0:R[`_${L}`]};class je{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((R,B)=>{this.resolve=R,this.reject=B})}wrapCallback(R){return(B,de)=>{B?this.reject(B):this.resolve(de),"function"==typeof R&&(this.promise.catch(()=>{}),1===R.length?R(B):R(B,de))}}}function jt(L,R){if(L.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const de=R||"demo-project",q=L.iat||0,qe=L.sub||L.user_id;if(!qe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Se=Object.assign({iss:`https://securetoken.google.com/${de}`,aud:de,iat:q,exp:q+3600,auth_time:q,sub:qe,user_id:qe,firebase:{sign_in_provider:"custom",identities:{}}},L);return[ye(JSON.stringify({alg:"none",type:"JWT"})),ye(JSON.stringify(Se)),""].join(".")}function Ht(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function he(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function In(){var L;const R=null===(L=Qe())||void 0===L?void 0:L.forceEnvironment;if("node"===R)return!0;if("browser"===R)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function yn(){return typeof window<"u"||en()}function en(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ar(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function Yn(){const L="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof L&&void 0!==L.id}function ss(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _o(){const L=Ht();return L.indexOf("MSIE ")>=0||L.indexOf("Trident/")>=0}function te(){return!In()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"==typeof indexedDB}catch{return!1}}function re(){return new Promise((L,R)=>{try{let B=!0;const de="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(de);q.onsuccess=()=>{q.result.close(),B||self.indexedDB.deleteDatabase(de),L(!0)},q.onupgradeneeded=()=>{B=!1},q.onerror=()=>{var qe;R((null===(qe=q.error)||void 0===qe?void 0:qe.message)||"")}}catch(B){R(B)}})}class Ge extends Error{constructor(R,B,de){super(B),this.code=R,this.customData=de,this.name="FirebaseError",Object.setPrototypeOf(this,Ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xt.prototype.create)}}class xt{constructor(R,B,de){this.service=R,this.serviceName=B,this.errors=de}create(R,...B){const de=B[0]||{},q=`${this.service}/${R}`,qe=this.errors[R],Se=qe?function On(L,R){return L.replace(tt,(B,de)=>{const q=R[de];return null!=q?String(q):`<${de}?>`})}(qe,de):"Error";return new Ge(q,`${this.serviceName}: ${Se} (${q}).`,de)}}const tt=/\{\$([^}]+)}/g;function Zr(L,R){return Object.prototype.hasOwnProperty.call(L,R)}function Eh(L){for(const R in L)if(Object.prototype.hasOwnProperty.call(L,R))return!1;return!0}function Ns(L,R){if(L===R)return!0;const B=Object.keys(L),de=Object.keys(R);for(const q of B){if(!de.includes(q))return!1;const qe=L[q],Se=R[q];if(as(qe)&&as(Se)){if(!Ns(qe,Se))return!1}else if(qe!==Se)return!1}for(const q of de)if(!B.includes(q))return!1;return!0}function as(L){return null!==L&&"object"==typeof L}function Xn(L){const R=[];for(const[B,de]of Object.entries(L))Array.isArray(de)?de.forEach(q=>{R.push(encodeURIComponent(B)+"="+encodeURIComponent(q))}):R.push(encodeURIComponent(B)+"="+encodeURIComponent(de));return R.length?"&"+R.join("&"):""}function Gi(L){const R={};return L.replace(/^\?/,"").split("&").forEach(de=>{if(de){const[q,qe]=de.split("=");R[decodeURIComponent(q)]=decodeURIComponent(qe)}}),R}function zi(L){const R=L.indexOf("?");if(!R)return"";const B=L.indexOf("#",R);return L.substring(R,B>0?B:void 0)}function di(L,R){const B=new yo(L,R);return B.subscribe.bind(B)}class yo{constructor(R,B){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=B,this.task.then(()=>{R(this)}).catch(de=>{this.error(de)})}next(R){this.forEachObserver(B=>{B.next(R)})}error(R){this.forEachObserver(B=>{B.error(R)}),this.close(R)}complete(){this.forEachObserver(R=>{R.complete()}),this.close()}subscribe(R,B,de){let q;if(void 0===R&&void 0===B&&void 0===de)throw new Error("Missing Observer.");q=function cs(L,R){if("object"!=typeof L||null===L)return!1;for(const B of R)if(B in L&&"function"==typeof L[B])return!0;return!1}(R,["next","error","complete"])?R:{next:R,error:B,complete:de},void 0===q.next&&(q.next=Ms),void 0===q.error&&(q.error=Ms),void 0===q.complete&&(q.complete=Ms);const qe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch{}}),this.observers.push(q),qe}unsubscribeOne(R){void 0===this.observers||void 0===this.observers[R]||(delete this.observers[R],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(R){if(!this.finalized)for(let B=0;B<this.observers.length;B++)this.sendOne(B,R)}sendOne(R,B){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[R])try{B(this.observers[R])}catch(de){typeof console<"u"&&console.error&&console.error(de)}})}close(R){this.finalized||(this.finalized=!0,void 0!==R&&(this.finalError=R),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ms(){}function Ja(L){return L&&L._delegate?L._delegate:L}function qi(L){return L.endsWith(".cloudworkstations.dev")}function Ki(L){return ks.apply(this,arguments)}function ks(){return(ks=(0,T.A)(function*(L){return(yield fetch(L,{credentials:"include"})).ok})).apply(this,arguments)}},915:(mo,Ir,pt)=>{var T=pt(467),st=pt(345),Ce=pt(852),ee=pt(858),Pn=pt(41),Et=pt(635),He=pt(362);const dr=function bt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}},Ot=function yt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ce=new ee.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Me=new Pn.Vy("@firebase/auth");function dt(p,...l){Me.logLevel<=Pn.$b.ERROR&&Me.error(`Auth (${Ce.SDK_VERSION}): ${p}`,...l)}function Ye(p,...l){throw Ht(p,...l)}function kt(p,...l){return Ht(p,...l)}function Xt(p,l,d){const g=Object.assign(Object.assign({},Ot()),{[l]:d});return new ee.FA("auth","Firebase",g).create(l,{appName:p.name})}function je(p){return Xt(p,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jt(p,l,d){if(!(l instanceof d))throw d.name!==l.constructor.name&&Ye(p,"argument-error"),Xt(p,"argument-error",`Type of ${l.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ht(p,...l){if("string"!=typeof p){const d=l[0],g=[...l.slice(1)];return g[0]&&(g[0].appName=p.name),p._errorFactory.create(d,...g)}return ce.create(p,...l)}function he(p,l,...d){if(!p)throw Ht(l,...d)}function In(p){const l="INTERNAL ASSERTION FAILED: "+p;throw dt(l),new Error(l)}function yn(p,l){p||In(l)}function en(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function ar(){return"http:"===Yn()||"https:"===Yn()}function Yn(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class _o{constructor(l,d){this.shortDelay=l,this.longDelay=d,yn(d>l,"Short delay should be less than long delay!"),this.isMobile=(0,ee.jZ)()||(0,ee.lV)()}get(){return function ss(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ar()||(0,ee.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function za(p,l){yn(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return l?`${d}${l.startsWith("/")?l.slice(1):l}`:d}class Q{static initialize(l,d,g){this.fetchImpl=l,d&&(this.headersImpl=d),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void In("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void In("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void In("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const te={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ie=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],re=new _o(3e4,6e4);function le(p,l){return p.tenantId&&!l.tenantId?Object.assign(Object.assign({},l),{tenantId:p.tenantId}):l}function ue(p,l,d,g){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,T.A)(function*(p,l,d,g,E={}){return xt(p,E,(0,T.A)(function*(){let w={},M={};g&&("GET"===l?M=g:w={body:JSON.stringify(g)});const V=(0,ee.Am)(Object.assign({key:p.config.apiKey},M)).slice(1),Y=yield p._getAdditionalHeaders();Y["Content-Type"]="application/json",p.languageCode&&(Y["X-Firebase-Locale"]=p.languageCode);const be=Object.assign({method:l,headers:Y},w);return(0,ee.c1)()||(be.referrerPolicy="no-referrer"),p.emulatorConfig&&(0,ee.zJ)(p.emulatorConfig.host)&&(be.credentials="include"),Q.fetch()(yield Jn(p,p.config.apiHost,d,V),be)}))})).apply(this,arguments)}function xt(p,l,d){return On.apply(this,arguments)}function On(){return(On=(0,T.A)(function*(p,l,d){p._canInitEmulator=!1;const g=Object.assign(Object.assign({},te),l);try{const E=new hr(p),w=yield Promise.race([d(),E.promise]);E.clearNetworkTimeout();const M=yield w.json();if("needConfirmation"in M)throw Hn(p,"account-exists-with-different-credential",M);if(w.ok&&!("errorMessage"in M))return M;{const V=w.ok?M.errorMessage:M.error.message,[Y,be]=V.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Y)throw Hn(p,"credential-already-in-use",M);if("EMAIL_EXISTS"===Y)throw Hn(p,"email-already-in-use",M);if("USER_DISABLED"===Y)throw Hn(p,"user-disabled",M);const Pe=g[Y]||Y.toLowerCase().replace(/[_\s]+/g,"-");if(be)throw Xt(p,Pe,be);Ye(p,Pe)}}catch(E){if(E instanceof ee.g)throw E;Ye(p,"network-request-failed",{message:String(E)})}})).apply(this,arguments)}function tt(p,l,d,g){return tn.apply(this,arguments)}function tn(){return(tn=(0,T.A)(function*(p,l,d,g,E={}){const w=yield ue(p,l,d,g,E);return"mfaPendingCredential"in w&&Ye(p,"multi-factor-auth-required",{_serverResponse:w}),w})).apply(this,arguments)}function Jn(p,l,d,g){return ui.apply(this,arguments)}function ui(){return(ui=(0,T.A)(function*(p,l,d,g){const E=`${l}${d}?${g}`,w=p,M=w.config.emulator?za(p.config,E):`${p.config.apiScheme}://${E}`;return ie.includes(d)&&(yield w._persistenceManagerAvailable,"COOKIE"===w._getPersistenceType())?w._getPersistence()._getFinalTarget(M).toString():M})).apply(this,arguments)}function an(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hr{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(l){this.auth=l,this.timer=null,this.promise=new Promise((d,g)=>{this.timer=setTimeout(()=>g(kt(this.auth,"network-request-failed")),re.get())})}}function Hn(p,l,d){const g={appName:p.name};d.email&&(g.email=d.email),d.phoneNumber&&(g.phoneNumber=d.phoneNumber);const E=kt(p,l,g);return E.customData._tokenResponse=d,E}function Zn(p){return void 0!==p&&void 0!==p.getResponse}function Zr(p){return void 0!==p&&void 0!==p.enterprise}class Iu{constructor(l){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===l.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=l.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=l.recaptchaEnforcementState}getProviderEnforcementState(l){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===l)return an(d.enforcementState);return null}isProviderEnabled(l){return"ENFORCE"===this.getProviderEnforcementState(l)||"AUDIT"===this.getProviderEnforcementState(l)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}function At(){return(At=(0,T.A)(function*(p){return(yield ue(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ns(p,l){return as.apply(this,arguments)}function as(){return(as=(0,T.A)(function*(p,l){return ue(p,"GET","/v2/recaptchaConfig",le(p,l))})).apply(this,arguments)}function Xn(){return(Xn=(0,T.A)(function*(p,l){return ue(p,"POST","/v1/accounts:delete",l)})).apply(this,arguments)}function zi(){return(zi=(0,T.A)(function*(p,l){return ue(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Wi(p,l){return di.apply(this,arguments)}function di(){return(di=(0,T.A)(function*(p,l){return ue(p,"POST","/v1/accounts:lookup",l)})).apply(this,arguments)}function yo(p){if(p)try{const l=new Date(Number(p));if(!isNaN(l.getTime()))return l.toUTCString()}catch{}}function Ms(){return(Ms=(0,T.A)(function*(p,l=!1){const d=(0,ee.Ku)(p),g=yield d.getIdToken(l),E=ls(g);he(E&&E.exp&&E.auth_time&&E.iat,d.auth,"internal-error");const w="object"==typeof E.firebase?E.firebase:void 0,M=w?.sign_in_provider;return{claims:E,token:g,authTime:yo(qa(E.auth_time)),issuedAtTime:yo(qa(E.iat)),expirationTime:yo(qa(E.exp)),signInProvider:M||null,signInSecondFactor:w?.sign_in_second_factor||null}})).apply(this,arguments)}function qa(p){return 1e3*Number(p)}function ls(p){const[l,d,g]=p.split(".");if(void 0===l||void 0===d||void 0===g)return dt("JWT malformed, contained fewer than 3 sections"),null;try{const E=(0,ee.u)(d);return E?JSON.parse(E):(dt("Failed to decode base64 JWT payload"),null)}catch(E){return dt("Caught error parsing JWT payload as JSON",E?.toString()),null}}function Ka(p){const l=ls(p);return he(l,"internal-error"),he(typeof l.exp<"u","internal-error"),he(typeof l.iat<"u","internal-error"),Number(l.exp)-Number(l.iat)}function Pr(p,l){return fr.apply(this,arguments)}function fr(){return(fr=(0,T.A)(function*(p,l,d=!1){if(d)return l;try{return yield l}catch(g){throw g instanceof ee.g&&function Tu({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(g)&&p.auth.currentUser===p&&(yield p.auth.signOut()),g}})).apply(this,arguments)}class Qa{constructor(l){this.user=l,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(l){var d;if(l){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const E=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,E)}}schedule(l=!1){var d=this;if(!this.isRunning)return;const g=this.getInterval(l);this.timerId=setTimeout((0,T.A)(function*(){yield d.iteration()}),g)}iteration(){var l=this;return(0,T.A)(function*(){try{yield l.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&l.schedule(!0))}l.schedule()})()}}class Ya{constructor(l,d){this.createdAt=l,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=yo(this.lastLoginAt),this.creationTime=yo(this.createdAt)}_copy(l){this.createdAt=l.createdAt,this.lastLoginAt=l.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Vo(p){return aa.apply(this,arguments)}function aa(){return(aa=(0,T.A)(function*(p){var l;const d=p.auth,g=yield p.getIdToken(),E=yield Pr(p,Wi(d,{idToken:g}));he(E?.users.length,d,"internal-error");const w=E.users[0];p._notifyReloadListener(w);const M=null!==(l=w.providerUserInfo)&&void 0!==l&&l.length?Os(w.providerUserInfo):[],V=function bh(p,l){return[...p.filter(g=>!l.some(E=>E.providerId===g.providerId)),...l]}(p.providerData,M),Pe=!!p.isAnonymous&&!(p.email&&w.passwordHash||V?.length),Te={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:V,metadata:new Ya(w.createdAt,w.lastLoginAt),isAnonymous:Pe};Object.assign(p,Te)})).apply(this,arguments)}function Ps(){return(Ps=(0,T.A)(function*(p){const l=(0,ee.Ku)(p);yield Vo(l),yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)})).apply(this,arguments)}function Os(p){return p.map(l=>{var{providerId:d}=l,g=(0,Et.Tt)(l,["providerId"]);return{providerId:d,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}function qi(){return(qi=(0,T.A)(function*(p,l){const d=yield xt(p,{},(0,T.A)(function*(){const g=(0,ee.Am)({grant_type:"refresh_token",refresh_token:l}).slice(1),{tokenApiHost:E,apiKey:w}=p.config,M=yield Jn(p,E,"/v1/token",`key=${w}`),V=yield p._getAdditionalHeaders();return V["Content-Type"]="application/x-www-form-urlencoded",Q.fetch()(M,{method:"POST",headers:V,body:g})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function ks(){return(ks=(0,T.A)(function*(p,l){return ue(p,"POST","/v2/accounts:revokeToken",le(p,l))})).apply(this,arguments)}class L{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(l){he(l.idToken,"internal-error"),he(typeof l.idToken<"u","internal-error"),he(typeof l.refreshToken<"u","internal-error");const d="expiresIn"in l&&typeof l.expiresIn<"u"?Number(l.expiresIn):Ka(l.idToken);this.updateTokensAndExpiration(l.idToken,l.refreshToken,d)}updateFromIdToken(l){he(0!==l.length,"internal-error");const d=Ka(l);this.updateTokensAndExpiration(l,null,d)}getToken(l){var d=this;return(0,T.A)(function*(g,E=!1){return E||!d.accessToken||d.isExpired?(he(d.refreshToken,g,"user-token-expired"),d.refreshToken?(yield d.refresh(g,d.refreshToken),d.accessToken):null):d.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(l,d){var g=this;return(0,T.A)(function*(){const{accessToken:E,refreshToken:w,expiresIn:M}=yield function Ja(p,l){return qi.apply(this,arguments)}(l,d);g.updateTokensAndExpiration(E,w,Number(M))})()}updateTokensAndExpiration(l,d,g){this.refreshToken=d||null,this.accessToken=l||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(l,d){const{refreshToken:g,accessToken:E,expirationTime:w}=d,M=new L;return g&&(he("string"==typeof g,"internal-error",{appName:l}),M.refreshToken=g),E&&(he("string"==typeof E,"internal-error",{appName:l}),M.accessToken=E),w&&(he("number"==typeof w,"internal-error",{appName:l}),M.expirationTime=w),M}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(l){this.accessToken=l.accessToken,this.refreshToken=l.refreshToken,this.expirationTime=l.expirationTime}_clone(){return Object.assign(new L,this.toJSON())}_performRefresh(){return In("not implemented")}}function R(p,l){he("string"==typeof p||typeof p>"u","internal-error",{appName:l})}class B{constructor(l){var{uid:d,auth:g,stsTokenManager:E}=l,w=(0,Et.Tt)(l,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qa(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=g,this.stsTokenManager=E,this.accessToken=E.accessToken,this.displayName=w.displayName||null,this.email=w.email||null,this.emailVerified=w.emailVerified||!1,this.phoneNumber=w.phoneNumber||null,this.photoURL=w.photoURL||null,this.isAnonymous=w.isAnonymous||!1,this.tenantId=w.tenantId||null,this.providerData=w.providerData?[...w.providerData]:[],this.metadata=new Ya(w.createdAt||void 0,w.lastLoginAt||void 0)}getIdToken(l){var d=this;return(0,T.A)(function*(){const g=yield Pr(d,d.stsTokenManager.getToken(d.auth,l));return he(g,d.auth,"internal-error"),d.accessToken!==g&&(d.accessToken=g,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),g})()}getIdTokenResult(l){return function cs(p){return Ms.apply(this,arguments)}(this,l)}reload(){return function us(p){return Ps.apply(this,arguments)}(this)}_assign(l){this!==l&&(he(this.uid===l.uid,this.auth,"internal-error"),this.displayName=l.displayName,this.photoURL=l.photoURL,this.email=l.email,this.emailVerified=l.emailVerified,this.phoneNumber=l.phoneNumber,this.isAnonymous=l.isAnonymous,this.tenantId=l.tenantId,this.providerData=l.providerData.map(d=>Object.assign({},d)),this.metadata._copy(l.metadata),this.stsTokenManager._assign(l.stsTokenManager))}_clone(l){const d=new B(Object.assign(Object.assign({},this),{auth:l,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(l){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=l,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(l){this.reloadListener?this.reloadListener(l):this.reloadUserInfo=l}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(l){var d=this;return(0,T.A)(function*(g,E=!1){let w=!1;g.idToken&&g.idToken!==d.stsTokenManager.accessToken&&(d.stsTokenManager.updateFromServerResponse(g),w=!0),E&&(yield Vo(d)),yield d.auth._persistUserIfCurrent(d),w&&d.auth._notifyListenersIfCurrent(d)}).apply(this,arguments)}delete(){var l=this;return(0,T.A)(function*(){if((0,Ce._isFirebaseServerApp)(l.auth.app))return Promise.reject(je(l.auth));const d=yield l.getIdToken();return yield Pr(l,function Lo(p,l){return Xn.apply(this,arguments)}(l.auth,{idToken:d})),l.stsTokenManager.clearRefreshToken(),l.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(l=>Object.assign({},l)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(l,d){var g,E,w,M,V,Y,be,Pe;const Te=null!==(g=d.displayName)&&void 0!==g?g:void 0,rt=null!==(E=d.email)&&void 0!==E?E:void 0,Dn=null!==(w=d.phoneNumber)&&void 0!==w?w:void 0,no=null!==(M=d.photoURL)&&void 0!==M?M:void 0,El=null!==(V=d.tenantId)&&void 0!==V?V:void 0,ro=null!==(Y=d._redirectEventId)&&void 0!==Y?Y:void 0,iE=null!==(be=d.createdAt)&&void 0!==be?be:void 0,Hm=null!==(Pe=d.lastLoginAt)&&void 0!==Pe?Pe:void 0,{uid:oE,emailVerified:XD,isAnonymous:$m,providerData:Gm,stsTokenManager:sE}=d;he(oE&&sE,l,"internal-error");const eC=L.fromJSON(this.name,sE);he("string"==typeof oE,l,"internal-error"),R(Te,l.name),R(rt,l.name),he("boolean"==typeof XD,l,"internal-error"),he("boolean"==typeof $m,l,"internal-error"),R(Dn,l.name),R(no,l.name),R(El,l.name),R(ro,l.name),R(iE,l.name),R(Hm,l.name);const _a=new B({uid:oE,auth:l,email:rt,emailVerified:XD,displayName:Te,isAnonymous:$m,photoURL:no,phoneNumber:Dn,tenantId:El,stsTokenManager:eC,createdAt:iE,lastLoginAt:Hm});return Gm&&Array.isArray(Gm)&&(_a.providerData=Gm.map(nn=>Object.assign({},nn))),ro&&(_a._redirectEventId=ro),_a}static _fromIdTokenResponse(l,d){return(0,T.A)(function*(g,E,w=!1){const M=new L;M.updateFromServerResponse(E);const V=new B({uid:E.localId,auth:g,stsTokenManager:M,isAnonymous:w});return yield Vo(V),V}).apply(this,arguments)}static _fromGetAccountInfoResponse(l,d,g){return(0,T.A)(function*(){const E=d.users[0];he(void 0!==E.localId,"internal-error");const w=void 0!==E.providerUserInfo?Os(E.providerUserInfo):[],M=!(E.email&&E.passwordHash||w?.length),V=new L;V.updateFromIdToken(g);const Y=new B({uid:E.localId,auth:l,stsTokenManager:V,isAnonymous:M}),be={uid:E.localId,displayName:E.displayName||null,photoURL:E.photoUrl||null,email:E.email||null,emailVerified:E.emailVerified||!1,phoneNumber:E.phoneNumber||null,tenantId:E.tenantId||null,providerData:w,metadata:new Ya(E.createdAt,E.lastLoginAt),isAnonymous:!(E.email&&E.passwordHash||w?.length)};return Object.assign(Y,be),Y})()}}const de=new Map;function q(p){yn(p instanceof Function,"Expected a class definition");let l=de.get(p);return l?(yn(l instanceof p,"Instance stored in cache mismatched with class"),l):(l=new p,de.set(p,l),l)}const Se=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,T.A)(function*(){return!0})()}_set(d,g){var E=this;return(0,T.A)(function*(){E.storage[d]=g})()}_get(d){var g=this;return(0,T.A)(function*(){const E=g.storage[d];return void 0===E?null:E})()}_remove(d){var g=this;return(0,T.A)(function*(){delete g.storage[d]})()}_addListener(d,g){}_removeListener(d,g){}}return p.type="NONE",p})();function qt(p,l,d){return`firebase:${p}:${l}:${d}`}class Nt{constructor(l,d,g){this.persistence=l,this.auth=d,this.userKey=g;const{config:E,name:w}=this.auth;this.fullUserKey=qt(this.userKey,E.apiKey,w),this.fullPersistenceKey=qt("persistence",E.apiKey,w),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(l){return this.persistence._set(this.fullUserKey,l.toJSON())}getCurrentUser(){var l=this;return(0,T.A)(function*(){const d=yield l.persistence._get(l.fullUserKey);if(!d)return null;if("string"==typeof d){const g=yield Wi(l.auth,{idToken:d}).catch(()=>{});return g?B._fromGetAccountInfoResponse(l.auth,g,d):null}return B._fromJSON(l.auth,d)})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(l){var d=this;return(0,T.A)(function*(){if(d.persistence===l)return;const g=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=l,g?d.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(l,d){return(0,T.A)(function*(g,E,w="authUser"){if(!E.length)return new Nt(q(Se),g,w);const M=(yield Promise.all(E.map(function(){var Te=(0,T.A)(function*(rt){if(yield rt._isAvailable())return rt});return function(rt){return Te.apply(this,arguments)}}()))).filter(Te=>Te);let V=M[0]||q(Se);const Y=qt(w,g.config.apiKey,g.name);let be=null;for(const Te of E)try{const rt=yield Te._get(Y);if(rt){let Dn;if("string"==typeof rt){const no=yield Wi(g,{idToken:rt}).catch(()=>{});if(!no)break;Dn=yield B._fromGetAccountInfoResponse(g,no,rt)}else Dn=B._fromJSON(g,rt);Te!==V&&(be=Dn),V=Te;break}}catch{}const Pe=M.filter(Te=>Te._shouldAllowMigration);return V._shouldAllowMigration&&Pe.length?(V=Pe[0],be&&(yield V._set(Y,be.toJSON())),yield Promise.all(E.map(function(){var Te=(0,T.A)(function*(rt){if(rt!==V)try{yield rt._remove(Y)}catch{}});return function(rt){return Te.apply(this,arguments)}}())),new Nt(V,g,w)):new Nt(V,g,w)}).apply(this,arguments)}}function pr(p){const l=p.toLowerCase();if(l.includes("opera/")||l.includes("opr/")||l.includes("opios/"))return"Opera";if($e(l))return"IEMobile";if(l.includes("msie")||l.includes("trident/"))return"IE";if(l.includes("edge/"))return"Edge";if(Ft(l))return"Firefox";if(l.includes("silk/"))return"Silk";if(wu(l))return"Blackberry";if(se(l))return"Webos";if(Je(l))return"Safari";if((l.includes("chrome/")||Si(l))&&!l.includes("edge/"))return"Chrome";if(ca(l))return"Android";{const g=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function Ft(p=(0,ee.ZQ)()){return/firefox\//i.test(p)}function Je(p=(0,ee.ZQ)()){const l=p.toLowerCase();return l.includes("safari/")&&!l.includes("chrome/")&&!l.includes("crios/")&&!l.includes("android")}function Si(p=(0,ee.ZQ)()){return/crios\//i.test(p)}function $e(p=(0,ee.ZQ)()){return/iemobile/i.test(p)}function ca(p=(0,ee.ZQ)()){return/android/i.test(p)}function wu(p=(0,ee.ZQ)()){return/blackberry/i.test(p)}function se(p=(0,ee.ZQ)()){return/webos/i.test(p)}function Za(p=(0,ee.ZQ)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function oe(p=(0,ee.ZQ)()){return Za(p)||ca(p)||se(p)||wu(p)||/windows phone/i.test(p)||$e(p)}function Ae(p,l=[]){let d;switch(p){case"Browser":d=pr((0,ee.ZQ)());break;case"Worker":d=`${pr((0,ee.ZQ)())}-${p}`;break;default:d=p}const g=l.length?l.join(","):"FirebaseCore-web";return`${d}/JsCore/${Ce.SDK_VERSION}/${g}`}class Ze{constructor(l){this.auth=l,this.queue=[]}pushCallback(l,d){const g=w=>new Promise((M,V)=>{try{M(l(w))}catch(Y){V(Y)}});g.onAbort=d,this.queue.push(g);const E=this.queue.length-1;return()=>{this.queue[E]=()=>Promise.resolve()}}runMiddleware(l){var d=this;return(0,T.A)(function*(){if(d.auth.currentUser===l)return;const g=[];try{for(const E of d.queue)yield E(l),E.onAbort&&g.push(E.onAbort)}catch(E){g.reverse();for(const w of g)try{w()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:E?.message})}})()}}function ht(){return(ht=(0,T.A)(function*(p,l={}){return ue(p,"GET","/v2/passwordPolicy",le(p,l))})).apply(this,arguments)}class $n{constructor(l){var d,g,E,w;const M=l.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=M.minPasswordLength)&&void 0!==d?d:6,M.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=M.maxPasswordLength),void 0!==M.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=M.containsLowercaseCharacter),void 0!==M.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=M.containsUppercaseCharacter),void 0!==M.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=M.containsNumericCharacter),void 0!==M.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=M.containsNonAlphanumericCharacter),this.enforcementState=l.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(E=null===(g=l.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==E?E:"",this.forceUpgradeOnSignin=null!==(w=l.forceUpgradeOnSignin)&&void 0!==w&&w,this.schemaVersion=l.schemaVersion}validatePassword(l){var d,g,E,w,M,V;const Y={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(l,Y),this.validatePasswordCharacterOptions(l,Y),Y.isValid&&(Y.isValid=null===(d=Y.meetsMinPasswordLength)||void 0===d||d),Y.isValid&&(Y.isValid=null===(g=Y.meetsMaxPasswordLength)||void 0===g||g),Y.isValid&&(Y.isValid=null===(E=Y.containsLowercaseLetter)||void 0===E||E),Y.isValid&&(Y.isValid=null===(w=Y.containsUppercaseLetter)||void 0===w||w),Y.isValid&&(Y.isValid=null===(M=Y.containsNumericCharacter)||void 0===M||M),Y.isValid&&(Y.isValid=null===(V=Y.containsNonAlphanumericCharacter)||void 0===V||V),Y}validatePasswordLengthOptions(l,d){const g=this.customStrengthOptions.minPasswordLength,E=this.customStrengthOptions.maxPasswordLength;g&&(d.meetsMinPasswordLength=l.length>=g),E&&(d.meetsMaxPasswordLength=l.length<=E)}validatePasswordCharacterOptions(l,d){let g;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let E=0;E<l.length;E++)g=l.charAt(E),this.updatePasswordCharacterOptionsStatuses(d,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(l,d,g,E,w){this.customStrengthOptions.containsLowercaseLetter&&(l.containsLowercaseLetter||(l.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(l.containsUppercaseLetter||(l.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(l.containsNumericCharacter||(l.containsNumericCharacter=E)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(l.containsNonAlphanumericCharacter||(l.containsNonAlphanumericCharacter=w))}}class Ri{constructor(l,d,g,E){this.app=l,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=g,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xg(this),this.idTokenSubscription=new xg(this),this.beforeStateQueue=new Ze(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ce,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=l.name,this.clientVersion=E.sdkClientVersion,this._persistenceManagerAvailable=new Promise(w=>this._resolvePersistenceManagerAvailable=w)}_initializeWithPersistence(l,d){var g=this;return d&&(this._popupRedirectResolver=q(d)),this._initializationPromise=this.queue((0,T.A)(function*(){var E,w,M;if(!g._deleted&&(g.persistenceManager=yield Nt.create(g,l),null===(E=g._resolvePersistenceManagerAvailable)||void 0===E||E.call(g),!g._deleted)){if(null!==(w=g._popupRedirectResolver)&&void 0!==w&&w._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(d),g.lastNotifiedUid=(null===(M=g.currentUser)||void 0===M?void 0:M.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var l=this;return(0,T.A)(function*(){if(l._deleted)return;const d=yield l.assertedPersistence.getCurrentUser();if(l.currentUser||d){if(l.currentUser&&d&&l.currentUser.uid===d.uid)return l._currentUser._assign(d),void(yield l.currentUser.getIdToken());yield l._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(l){var d=this;return(0,T.A)(function*(){try{const g=yield Wi(d,{idToken:l}),E=yield B._fromGetAccountInfoResponse(d,g,l);yield d.directlySetCurrentUser(E)}catch(g){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",g),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(l){var d=this;return(0,T.A)(function*(){var g;if((0,Ce._isFirebaseServerApp)(d.app)){const V=d.app.settings.authIdToken;return V?new Promise(Y=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(V).then(Y,Y))}):d.directlySetCurrentUser(null)}const E=yield d.assertedPersistence.getCurrentUser();let w=E,M=!1;if(l&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const V=null===(g=d.redirectUser)||void 0===g?void 0:g._redirectEventId,Y=w?._redirectEventId,be=yield d.tryRedirectSignIn(l);(!V||V===Y)&&be?.user&&(w=be.user,M=!0)}if(!w)return d.directlySetCurrentUser(null);if(!w._redirectEventId){if(M)try{yield d.beforeStateQueue.runMiddleware(w)}catch(V){w=E,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(V))}return w?d.reloadAndSetCurrentUserOrClear(w):d.directlySetCurrentUser(null)}return he(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===w._redirectEventId?d.directlySetCurrentUser(w):d.reloadAndSetCurrentUserOrClear(w)})()}tryRedirectSignIn(l){var d=this;return(0,T.A)(function*(){let g=null;try{g=yield d._popupRedirectResolver._completeRedirectFn(d,l,!0)}catch{yield d._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(l){var d=this;return(0,T.A)(function*(){try{yield Vo(l)}catch(g){if("auth/network-request-failed"!==g?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(l)})()}useDeviceLanguage(){this.languageCode=function Ga(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var l=this;return(0,T.A)(function*(){l._deleted=!0})()}updateCurrentUser(l){var d=this;return(0,T.A)(function*(){if((0,Ce._isFirebaseServerApp)(d.app))return Promise.reject(je(d));const g=l?(0,ee.Ku)(l):null;return g&&he(g.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(g&&g._clone(d))})()}_updateCurrentUser(l){var d=this;return(0,T.A)(function*(g,E=!1){if(!d._deleted)return g&&he(d.tenantId===g.tenantId,d,"tenant-id-mismatch"),E||(yield d.beforeStateQueue.runMiddleware(g)),d.queue((0,T.A)(function*(){yield d.directlySetCurrentUser(g),d.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var l=this;return(0,T.A)(function*(){return(0,Ce._isFirebaseServerApp)(l.app)?Promise.reject(je(l)):(yield l.beforeStateQueue.runMiddleware(null),(l.redirectPersistenceManager||l._popupRedirectResolver)&&(yield l._setRedirectUser(null)),l._updateCurrentUser(null,!0))})()}setPersistence(l){var d=this;return(0,Ce._isFirebaseServerApp)(this.app)?Promise.reject(je(this)):this.queue((0,T.A)(function*(){yield d.assertedPersistence.setPersistence(q(l))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(l){var d=this;return(0,T.A)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const g=d._getPasswordPolicyInternal();return g.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(l)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var l=this;return(0,T.A)(function*(){const d=yield function at(p){return ht.apply(this,arguments)}(l),g=new $n(d);null===l.tenantId?l._projectPasswordPolicy=g:l._tenantPasswordPolicies[l.tenantId]=g})()}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(l){this._errorFactory=new ee.FA("auth","Firebase",l())}onAuthStateChanged(l,d,g){return this.registerStateListener(this.authStateSubscription,l,d,g)}beforeAuthStateChanged(l,d){return this.beforeStateQueue.pushCallback(l,d)}onIdTokenChanged(l,d,g){return this.registerStateListener(this.idTokenSubscription,l,d,g)}authStateReady(){return new Promise((l,d)=>{if(this.currentUser)l();else{const g=this.onAuthStateChanged(()=>{g(),l()},d)}})}revokeAccessToken(l){var d=this;return(0,T.A)(function*(){if(d.currentUser){const g=yield d.currentUser.getIdToken(),E={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:l,idToken:g};null!=d.tenantId&&(E.tenantId=d.tenantId),yield function Ki(p,l){return ks.apply(this,arguments)}(d,E)}})()}toJSON(){var l;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(l=this._currentUser)||void 0===l?void 0:l.toJSON()}}_setRedirectUser(l,d){var g=this;return(0,T.A)(function*(){const E=yield g.getOrInitRedirectPersistenceManager(d);return null===l?E.removeCurrentUser():E.setCurrentUser(l)})()}getOrInitRedirectPersistenceManager(l){var d=this;return(0,T.A)(function*(){if(!d.redirectPersistenceManager){const g=l&&q(l)||d._popupRedirectResolver;he(g,d,"argument-error"),d.redirectPersistenceManager=yield Nt.create(d,[q(g._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(l){var d=this;return(0,T.A)(function*(){var g,E;return d._isInitialized&&(yield d.queue((0,T.A)(function*(){}))),(null===(g=d._currentUser)||void 0===g?void 0:g._redirectEventId)===l?d._currentUser:(null===(E=d.redirectUser)||void 0===E?void 0:E._redirectEventId)===l?d.redirectUser:null})()}_persistUserIfCurrent(l){var d=this;return(0,T.A)(function*(){if(l===d.currentUser)return d.queue((0,T.A)(function*(){return d.directlySetCurrentUser(l)}))})()}_notifyListenersIfCurrent(l){l===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var l,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(d=null===(l=this.currentUser)||void 0===l?void 0:l.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(l,d,g,E){if(this._deleted)return()=>{};const w="function"==typeof d?d:d.next.bind(d);let M=!1;const V=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(V,this,"internal-error"),V.then(()=>{M||w(this.currentUser)}),"function"==typeof d){const Y=l.addObserver(d,g,E);return()=>{M=!0,Y()}}{const Y=l.addObserver(d);return()=>{M=!0,Y()}}}directlySetCurrentUser(l){var d=this;return(0,T.A)(function*(){d.currentUser&&d.currentUser!==l&&d._currentUser._stopProactiveRefresh(),l&&d.isProactiveRefreshEnabled&&l._startProactiveRefresh(),d.currentUser=l,l?yield d.assertedPersistence.setCurrentUser(l):yield d.assertedPersistence.removeCurrentUser()})()}queue(l){return this.operations=this.operations.then(l,l),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(l){!l||this.frameworks.includes(l)||(this.frameworks.push(l),this.frameworks.sort(),this.clientVersion=Ae(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var l=this;return(0,T.A)(function*(){var d;const g={"X-Client-Version":l.clientVersion};l.app.options.appId&&(g["X-Firebase-gmpid"]=l.app.options.appId);const E=yield null===(d=l.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();E&&(g["X-Firebase-Client"]=E);const w=yield l._getAppCheckToken();return w&&(g["X-Firebase-AppCheck"]=w),g})()}_getAppCheckToken(){var l=this;return(0,T.A)(function*(){var d;if((0,Ce._isFirebaseServerApp)(l.app)&&l.app.settings.appCheckToken)return l.app.settings.appCheckToken;const g=yield null===(d=l.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return g?.error&&function Qe(p,...l){Me.logLevel<=Pn.$b.WARN&&Me.warn(`Auth (${Ce.SDK_VERSION}): ${p}`,...l)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function Mt(p){return(0,ee.Ku)(p)}class xg{constructor(l){this.auth=l,this.observer=null,this.addObserver=(0,ee.tD)(d=>this.observer=d)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let vn={loadJS:()=>(0,T.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function l0(p){return vn.loadJS(p)}function Ih(p){return`__${p}${Math.floor(1e6*Math.random())}`}const $t=1e12;class ft{constructor(l){this.auth=l,this.counter=$t,this._widgets=new Map}render(l,d){const g=this.counter;return this._widgets.set(g,new JO(l,this.auth.name,d||{})),this.counter++,g}reset(l){var d;const g=l||$t;null===(d=this._widgets.get(g))||void 0===d||d.delete(),this._widgets.delete(g)}getResponse(l){var d;return(null===(d=this._widgets.get(l||$t))||void 0===d?void 0:d.getResponse())||""}execute(l){var d=this;return(0,T.A)(function*(){var g;return null===(g=d._widgets.get(l||$t))||void 0===g||g.execute(),""})()}}class Th{constructor(){this.enterprise=new Qi}ready(l){l()}execute(l,d){return Promise.resolve("token")}render(l,d){return""}}class Qi{ready(l){l()}execute(l,d){return Promise.resolve("token")}render(l,d){return""}}class JO{constructor(l,d,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const E="string"==typeof l?document.getElementById(l):l;he(E,"argument-error",{appName:d}),this.container=E,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Xw(p){const l=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<p;g++)l.push(d.charAt(Math.floor(62*Math.random())));return l.join("")}(50);const{callback:l,"expired-callback":d}=this.params;if(l)try{l(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Uo="NO_RECAPTCHA";class eD{constructor(l){this.type="recaptcha-enterprise",this.auth=Mt(l)}verify(){var l=this;return(0,T.A)(function*(d="verify",g=!1){function w(){return w=(0,T.A)(function*(V){if(!g){if(null==V.tenantId&&null!=V._agentRecaptchaConfig)return V._agentRecaptchaConfig.siteKey;if(null!=V.tenantId&&void 0!==V._tenantRecaptchaConfigs[V.tenantId])return V._tenantRecaptchaConfigs[V.tenantId].siteKey}return new Promise(function(){var Y=(0,T.A)(function*(be,Pe){Ns(V,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Te=>{if(void 0!==Te.recaptchaKey){const rt=new Iu(Te);return null==V.tenantId?V._agentRecaptchaConfig=rt:V._tenantRecaptchaConfigs[V.tenantId]=rt,be(rt.siteKey)}Pe(new Error("recaptcha Enterprise site key undefined"))}).catch(Te=>{Pe(Te)})});return function(be,Pe){return Y.apply(this,arguments)}}())}),w.apply(this,arguments)}function M(V,Y,be){const Pe=window.grecaptcha;Zr(Pe)?Pe.enterprise.ready(()=>{Pe.enterprise.execute(V,{action:d}).then(Te=>{Y(Te)}).catch(()=>{Y(Uo)})}):be(Error("No reCAPTCHA enterprise script loaded."))}return l.auth.settings.appVerificationDisabledForTesting?(new Th).execute("siteKey",{action:"verify"}):new Promise((V,Y)=>{(function E(V){return w.apply(this,arguments)})(l.auth).then(be=>{if(!g&&Zr(window.grecaptcha))M(be,V,Y);else{if(typeof window>"u")return void Y(new Error("RecaptchaVerifier is only supported in browser"));let Pe=function Jw(){return vn.recaptchaEnterpriseScript}();0!==Pe.length&&(Pe+=be),l0(Pe).then(()=>{M(be,V,Y)}).catch(Te=>{Y(Te)})}}).catch(be=>{Y(be)})})}).apply(this,arguments)}}function wh(p,l,d){return u0.apply(this,arguments)}function u0(){return(u0=(0,T.A)(function*(p,l,d,g=!1,E=!1){const w=new eD(p);let M;if(E)M=Uo;else try{M=yield w.verify(d)}catch{M=yield w.verify(d,!0)}const V=Object.assign({},l);return"mfaSmsEnrollment"===d||"mfaSmsSignIn"===d?("phoneEnrollmentInfo"in V?Object.assign(V,{phoneEnrollmentInfo:{phoneNumber:V.phoneEnrollmentInfo.phoneNumber,recaptchaToken:V.phoneEnrollmentInfo.recaptchaToken,captchaResponse:M,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}}):"phoneSignInInfo"in V&&Object.assign(V,{phoneSignInInfo:{recaptchaToken:V.phoneSignInInfo.recaptchaToken,captchaResponse:M,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}}),V):(Object.assign(V,g?{captchaResp:M}:{captchaResponse:M}),Object.assign(V,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(V,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),V)})).apply(this,arguments)}function Xa(p,l,d,g,E){return Fg.apply(this,arguments)}function Fg(){return Fg=(0,T.A)(function*(p,l,d,g,E){var w,M;if("EMAIL_PASSWORD_PROVIDER"===E){if(null!==(w=p._getRecaptchaConfig())&&void 0!==w&&w.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const V=yield wh(p,l,d,"getOobCode"===d);return g(p,V)}return g(p,l).catch(function(){var V=(0,T.A)(function*(Y){if("auth/missing-recaptcha-token"===Y.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const be=yield wh(p,l,d,"getOobCode"===d);return g(p,be)}return Promise.reject(Y)});return function(Y){return V.apply(this,arguments)}}())}if("PHONE_PROVIDER"===E){if(null!==(M=p._getRecaptchaConfig())&&void 0!==M&&M.isProviderEnabled("PHONE_PROVIDER")){const V=yield wh(p,l,d);return g(p,V).catch(function(){var Y=(0,T.A)(function*(be){var Pe;if("AUDIT"===(null===(Pe=p._getRecaptchaConfig())||void 0===Pe?void 0:Pe.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===be.code||"auth/invalid-app-credential"===be.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${d} flow.`);const Te=yield wh(p,l,d,!1,!0);return g(p,Te)}return Promise.reject(be)});return function(be){return Y.apply(this,arguments)}}())}{const V=yield wh(p,l,d,!1,!0);return g(p,V)}}return Promise.reject(E+" provider is not supported.")}),Fg.apply(this,arguments)}function Lg(){return(Lg=(0,T.A)(function*(p){const l=Mt(p),d=yield Ns(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),g=new Iu(d);null==l.tenantId?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,g.isAnyProviderEnabled()&&new eD(l).verify()})).apply(this,arguments)}function rD(p){const l=p.indexOf(":");return l<0?"":p.substr(0,l+1)}function iD(p){if(!p)return null;const l=Number(p);return isNaN(l)?null:l}class fe{constructor(l,d){this.providerId=l,this.signInMethod=d}toJSON(){return In("not implemented")}_getIdTokenResponse(l){return In("not implemented")}_linkToIdToken(l,d){return In("not implemented")}_getReauthenticationResolver(l){return In("not implemented")}}function oD(p,l){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,T.A)(function*(p,l){return ue(p,"POST","/v1/accounts:resetPassword",le(p,l))})).apply(this,arguments)}function Vg(){return(Vg=(0,T.A)(function*(p,l){return ue(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function d0(p,l){return Bg.apply(this,arguments)}function Bg(){return(Bg=(0,T.A)(function*(p,l){return ue(p,"POST","/v1/accounts:signUp",l)})).apply(this,arguments)}function Yc(){return(Yc=(0,T.A)(function*(p,l){return ue(p,"POST","/v1/accounts:update",le(p,l))})).apply(this,arguments)}function Ug(p,l){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,T.A)(function*(p,l){return tt(p,"POST","/v1/accounts:signInWithPassword",le(p,l))})).apply(this,arguments)}function Sh(p,l){return pe.apply(this,arguments)}function pe(){return(pe=(0,T.A)(function*(p,l){return ue(p,"POST","/v1/accounts:sendOobCode",le(p,l))})).apply(this,arguments)}function Jc(){return(Jc=(0,T.A)(function*(p,l){return Sh(p,l)})).apply(this,arguments)}function h0(p,l){return Du.apply(this,arguments)}function Du(){return(Du=(0,T.A)(function*(p,l){return Sh(p,l)})).apply(this,arguments)}function sD(p,l){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,T.A)(function*(p,l){return Sh(p,l)})).apply(this,arguments)}function f0(){return(f0=(0,T.A)(function*(p,l){return Sh(p,l)})).apply(this,arguments)}function p0(){return(p0=(0,T.A)(function*(p,l){return tt(p,"POST","/v1/accounts:signInWithEmailLink",le(p,l))})).apply(this,arguments)}function Cu(){return(Cu=(0,T.A)(function*(p,l){return tt(p,"POST","/v1/accounts:signInWithEmailLink",le(p,l))})).apply(this,arguments)}class ds extends fe{constructor(l,d,g,E=null){super("password",g),this._email=l,this._password=d,this._tenantId=E}static _fromEmailAndPassword(l,d){return new ds(l,d,"password")}static _fromEmailAndCode(l,d,g=null){return new ds(l,d,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(l){var d=this;return(0,T.A)(function*(){switch(d.signInMethod){case"password":return Xa(l,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ug,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return function nk(p,l){return p0.apply(this,arguments)}(l,{email:d._email,oobCode:d._password});default:Ye(l,"internal-error")}})()}_linkToIdToken(l,d){var g=this;return(0,T.A)(function*(){switch(g.signInMethod){case"password":return Xa(l,{idToken:d,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",d0,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return function rk(p,l){return Cu.apply(this,arguments)}(l,{idToken:d,email:g._email,oobCode:g._password});default:Ye(l,"internal-error")}})()}_getReauthenticationResolver(l){return this._getIdTokenResponse(l)}}function jo(p,l){return Au.apply(this,arguments)}function Au(){return(Au=(0,T.A)(function*(p,l){return tt(p,"POST","/v1/accounts:signInWithIdp",le(p,l))})).apply(this,arguments)}class Or extends fe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(l){const d=new Or(l.providerId,l.signInMethod);return l.idToken||l.accessToken?(l.idToken&&(d.idToken=l.idToken),l.accessToken&&(d.accessToken=l.accessToken),l.nonce&&!l.pendingToken&&(d.nonce=l.nonce),l.pendingToken&&(d.pendingToken=l.pendingToken)):l.oauthToken&&l.oauthTokenSecret?(d.accessToken=l.oauthToken,d.secret=l.oauthTokenSecret):Ye("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l,{providerId:g,signInMethod:E}=d,w=(0,Et.Tt)(d,["providerId","signInMethod"]);if(!g||!E)return null;const M=new Or(g,E);return M.idToken=w.idToken||void 0,M.accessToken=w.accessToken||void 0,M.secret=w.secret,M.nonce=w.nonce,M.pendingToken=w.pendingToken||null,M}_getIdTokenResponse(l){return jo(l,this.buildRequest())}_linkToIdToken(l,d){const g=this.buildRequest();return g.idToken=d,jo(l,g)}_getReauthenticationResolver(l){const d=this.buildRequest();return d.autoCreate=!1,jo(l,d)}buildRequest(){const l={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)l.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),l.postBody=(0,ee.Am)(d)}return l}}function Xc(p,l){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,T.A)(function*(p,l){return ue(p,"POST","/v1/accounts:sendVerificationCode",le(p,l))})).apply(this,arguments)}function Gt(){return(Gt=(0,T.A)(function*(p,l){return tt(p,"POST","/v1/accounts:signInWithPhoneNumber",le(p,l))})).apply(this,arguments)}function Hg(){return(Hg=(0,T.A)(function*(p,l){const d=yield tt(p,"POST","/v1/accounts:signInWithPhoneNumber",le(p,l));if(d.temporaryProof)throw Hn(p,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const m0={USER_NOT_FOUND:"user-not-found"};function $g(){return($g=(0,T.A)(function*(p,l){return tt(p,"POST","/v1/accounts:signInWithPhoneNumber",le(p,Object.assign(Object.assign({},l),{operation:"REAUTH"})),m0)})).apply(this,arguments)}class xs extends fe{constructor(l){super("phone","phone"),this.params=l}static _fromVerification(l,d){return new xs({verificationId:l,verificationCode:d})}static _fromTokenResponse(l,d){return new xs({phoneNumber:l,temporaryProof:d})}_getIdTokenResponse(l){return function gt(p,l){return Gt.apply(this,arguments)}(l,this._makeVerificationRequest())}_linkToIdToken(l,d){return function ik(p,l){return Hg.apply(this,arguments)}(l,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(l){return function ok(p,l){return $g.apply(this,arguments)}(l,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:l,phoneNumber:d,verificationId:g,verificationCode:E}=this.params;return l&&d?{temporaryProof:l,phoneNumber:d}:{sessionInfo:g,code:E}}toJSON(){const l={providerId:this.providerId};return this.params.phoneNumber&&(l.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(l.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(l.verificationCode=this.params.verificationCode),this.params.verificationId&&(l.verificationId=this.params.verificationId),l}static fromJSON(l){"string"==typeof l&&(l=JSON.parse(l));const{verificationId:d,verificationCode:g,phoneNumber:E,temporaryProof:w}=l;return g||d||E||w?new xs({verificationId:d,verificationCode:g,phoneNumber:E,temporaryProof:w}):null}}class el{constructor(l){var d,g,E,w,M,V;const Y=(0,ee.I9)((0,ee.hp)(l)),be=null!==(d=Y.apiKey)&&void 0!==d?d:null,Pe=null!==(g=Y.oobCode)&&void 0!==g?g:null,Te=function It(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(E=Y.mode)&&void 0!==E?E:null);he(be&&Pe&&Te,"argument-error"),this.apiKey=be,this.operation=Te,this.code=Pe,this.continueUrl=null!==(w=Y.continueUrl)&&void 0!==w?w:null,this.languageCode=null!==(M=Y.lang)&&void 0!==M?M:null,this.tenantId=null!==(V=Y.tenantId)&&void 0!==V?V:null}static parseLink(l){const d=function Gg(p){const l=(0,ee.I9)((0,ee.hp)(p)).link,d=l?(0,ee.I9)((0,ee.hp)(l)).deep_link_id:null,g=(0,ee.I9)((0,ee.hp)(p)).deep_link_id;return(g?(0,ee.I9)((0,ee.hp)(g)).link:null)||g||d||l||p}(l);try{return new el(d)}catch{return null}}}let Nh=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(d,g){return ds._fromEmailAndPassword(d,g)}static credentialWithLink(d,g){const E=el.parseLink(g);return he(E,"argument-error"),ds._fromEmailAndCode(d,E.code,E.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class la{constructor(l){this.providerId=l,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(l){this.defaultLanguageCode=l}setCustomParameters(l){return this.customParameters=l,this}getCustomParameters(){return this.customParameters}}class Su extends la{constructor(){super(...arguments),this.scopes=[]}addScope(l){return this.scopes.includes(l)||this.scopes.push(l),this}getScopes(){return[...this.scopes]}}class vo extends Su{static credentialFromJSON(l){const d="string"==typeof l?JSON.parse(l):l;return he("providerId"in d&&"signInMethod"in d,"argument-error"),Or._fromParams(d)}credential(l){return this._credential(Object.assign(Object.assign({},l),{nonce:l.rawNonce}))}_credential(l){return he(l.idToken||l.accessToken,"argument-error"),Or._fromParams(Object.assign(Object.assign({},l),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(l){return vo.oauthCredentialFromTaggedObject(l)}static credentialFromError(l){return vo.oauthCredentialFromTaggedObject(l.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:d,oauthAccessToken:g,oauthTokenSecret:E,pendingToken:w,nonce:M,providerId:V}=l;if(!g&&!E&&!d&&!w||!V)return null;try{return new vo(V)._credential({idToken:d,accessToken:g,nonce:M,pendingToken:w})}catch{return null}}}let Mh=(()=>{class p extends Su{constructor(){super("facebook.com")}static credential(d){return Or._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),zg=(()=>{class p extends Su{constructor(){super("google.com"),this.addScope("profile")}static credential(d,g){return Or._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:E}=d;if(!g&&!E)return null;try{return p.credential(g,E)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),Ru=(()=>{class p extends Su{constructor(){super("github.com")}static credential(d){return Or._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class tl extends fe{constructor(l,d){super(l,l),this.pendingToken=d}_getIdTokenResponse(l){return jo(l,this.buildRequest())}_linkToIdToken(l,d){const g=this.buildRequest();return g.idToken=d,jo(l,g)}_getReauthenticationResolver(l){const d=this.buildRequest();return d.autoCreate=!1,jo(l,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l,{providerId:g,signInMethod:E,pendingToken:w}=d;return g&&E&&w&&g===E?new tl(g,w):null}static _create(l,d){return new tl(l,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Nu extends la{constructor(l){he(l.startsWith("saml."),"argument-error"),super(l)}static credentialFromResult(l){return Nu.samlCredentialFromTaggedObject(l)}static credentialFromError(l){return Nu.samlCredentialFromTaggedObject(l.customData||{})}static credentialFromJSON(l){const d=tl.fromJSON(l);return he(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{pendingToken:d,providerId:g}=l;if(!d||!g)return null;try{return tl._create(g,d)}catch{return null}}}let _0=(()=>{class p extends Su{constructor(){super("twitter.com")}static credential(d,g){return Or._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:g,oauthTokenSecret:E}=d;if(!g||!E)return null;try{return p.credential(g,E)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function me(p,l){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,T.A)(function*(p,l){return tt(p,"POST","/v1/accounts:signUp",le(p,l))})).apply(this,arguments)}class N{constructor(l){this.user=l.user,this.providerId=l.providerId,this._tokenResponse=l._tokenResponse,this.operationType=l.operationType}static _fromIdTokenResponse(l,d,g){return(0,T.A)(function*(E,w,M,V=!1){const Y=yield B._fromIdTokenResponse(E,M,V),be=Mu(M);return new N({user:Y,providerId:be,_tokenResponse:M,operationType:w})}).apply(this,arguments)}static _forOperation(l,d,g){return(0,T.A)(function*(){yield l._updateTokensIfNecessary(g,!0);const E=Mu(g);return new N({user:l,providerId:E,_tokenResponse:g,operationType:d})})()}}function Mu(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function ec(){return(ec=(0,T.A)(function*(p){var l;if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(je(p));const d=Mt(p);if(yield d._initializationPromise,null!==(l=d.currentUser)&&void 0!==l&&l.isAnonymous)return new N({user:d.currentUser,providerId:null,operationType:"signIn"});const g=yield me(d,{returnSecureToken:!0}),E=yield N._fromIdTokenResponse(d,"signIn",g,!0);return yield d._updateCurrentUser(E.user),E})).apply(this,arguments)}class Oh extends ee.g{constructor(l,d,g,E){var w;super(d.code,d.message),this.operationType=g,this.user=E,Object.setPrototypeOf(this,Oh.prototype),this.customData={appName:l.name,tenantId:null!==(w=l.tenantId)&&void 0!==w?w:void 0,_serverResponse:d.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(l,d,g,E){return new Oh(l,d,g,E)}}function y0(p,l,d,g){return("reauthenticate"===l?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(w=>{throw"auth/multi-factor-auth-required"===w.code?Oh._fromErrorAndOperation(p,w,l,g):w})}function v0(p){return new Set(p.map(({providerId:l})=>l).filter(l=>!!l))}function hs(){return hs=(0,T.A)(function*(p,l){const d=(0,ee.Ku)(p);yield kh(!0,d,l);const{providerUserInfo:g}=yield function Gi(p,l){return zi.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[l]}),E=v0(g||[]);return d.providerData=d.providerData.filter(w=>E.has(w.providerId)),E.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),hs.apply(this,arguments)}function qg(p,l){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,T.A)(function*(p,l,d=!1){const g=yield Pr(p,l._linkToIdToken(p.auth,yield p.getIdToken()),d);return N._forOperation(p,"link",g)})).apply(this,arguments)}function kh(p,l,d){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,T.A)(function*(p,l,d){yield Vo(l);const E=!1===p?"provider-already-linked":"no-such-provider";he(v0(l.providerData).has(d)===p,l.auth,E)})).apply(this,arguments)}function E0(p,l){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,T.A)(function*(p,l,d=!1){const{auth:g}=p;if((0,Ce._isFirebaseServerApp)(g.app))return Promise.reject(je(g));const E="reauthenticate";try{const w=yield Pr(p,y0(g,E,l,p),d);he(w.idToken,g,"internal-error");const M=ls(w.idToken);he(M,g,"internal-error");const{sub:V}=M;return he(p.uid===V,g,"user-mismatch"),N._forOperation(p,E,w)}catch(w){throw"auth/user-not-found"===w?.code&&Ye(g,"user-mismatch"),w}})).apply(this,arguments)}function tc(p,l){return xh.apply(this,arguments)}function xh(){return(xh=(0,T.A)(function*(p,l,d=!1){if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(je(p));const g="signIn",E=yield y0(p,g,l),w=yield N._fromIdTokenResponse(p,g,E);return d||(yield p._updateCurrentUser(w.user)),w})).apply(this,arguments)}function nc(p,l){return nl.apply(this,arguments)}function nl(){return(nl=(0,T.A)(function*(p,l){return tc(Mt(p),l)})).apply(this,arguments)}function Kg(p,l){return Fh.apply(this,arguments)}function Fh(){return(Fh=(0,T.A)(function*(p,l){const d=(0,ee.Ku)(p);return yield kh(!1,d,l.providerId),qg(d,l)})).apply(this,arguments)}function Mi(p,l){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,T.A)(function*(p,l){return E0((0,ee.Ku)(p),l)})).apply(this,arguments)}function Qg(){return(Qg=(0,T.A)(function*(p,l){return tt(p,"POST","/v1/accounts:signInWithCustomToken",le(p,l))})).apply(this,arguments)}function Lt(){return Lt=(0,T.A)(function*(p,l){if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(je(p));const d=Mt(p),g=yield function ku(p,l){return Qg.apply(this,arguments)}(d,{token:l,returnSecureToken:!0}),E=yield N._fromIdTokenResponse(d,"signIn",g);return yield d._updateCurrentUser(E.user),E}),Lt.apply(this,arguments)}class ei{constructor(l,d){this.factorId=l,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(l,d){return"phoneInfo"in d?Lh._fromServerResponse(l,d):"totpInfo"in d?xu._fromServerResponse(l,d):Ye(l,"internal-error")}}class Lh extends ei{constructor(l){super("phone",l),this.phoneNumber=l.phoneInfo}static _fromServerResponse(l,d){return new Lh(d)}}class xu extends ei{constructor(l){super("totp",l)}static _fromServerResponse(l,d){return new xu(d)}}function rc(p,l,d){var g;he((null===(g=d.url)||void 0===g?void 0:g.length)>0,p,"invalid-continue-uri"),he(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),he(typeof d.linkDomain>"u"||d.linkDomain.length>0,p,"invalid-hosting-link-domain"),l.continueUrl=d.url,l.dynamicLinkDomain=d.dynamicLinkDomain,l.linkDomain=d.linkDomain,l.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(he(d.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),l.iOSBundleId=d.iOS.bundleId),d.android&&(he(d.android.packageName.length>0,p,"missing-android-pkg-name"),l.androidInstallApp=d.android.installApp,l.androidMinimumVersionCode=d.android.minimumVersion,l.androidPackageName=d.android.packageName)}function hi(p){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,T.A)(function*(p){const l=Mt(p);l._getPasswordPolicyInternal()&&(yield l._updatePasswordPolicy())})).apply(this,arguments)}function fi(){return(fi=(0,T.A)(function*(p,l,d){const g=Mt(p),E={requestType:"PASSWORD_RESET",email:l,clientType:"CLIENT_TYPE_WEB"};d&&rc(g,E,d),yield Xa(g,E,"getOobCode",h0,"EMAIL_PASSWORD_PROVIDER")})).apply(this,arguments)}function fs(){return fs=(0,T.A)(function*(p,l,d){yield oD((0,ee.Ku)(p),{oobCode:l,newPassword:d}).catch(function(){var g=(0,T.A)(function*(E){throw"auth/password-does-not-meet-requirements"===E.code&&hi(p),E});return function(E){return g.apply(this,arguments)}}())}),fs.apply(this,arguments)}function Yg(){return Yg=(0,T.A)(function*(p,l){yield function Ch(p,l){return Yc.apply(this,arguments)}((0,ee.Ku)(p),{oobCode:l})}),Yg.apply(this,arguments)}function Vh(p,l){return Bh.apply(this,arguments)}function Bh(){return(Bh=(0,T.A)(function*(p,l){const d=(0,ee.Ku)(p),g=yield oD(d,{oobCode:l}),E=g.requestType;switch(he(E,d,"internal-error"),E){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":he(g.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":he(g.mfaInfo,d,"internal-error");default:he(g.email,d,"internal-error")}let w=null;return g.mfaInfo&&(w=ei._fromServerResponse(Mt(d),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:w},operation:E}})).apply(this,arguments)}function b0(){return(b0=(0,T.A)(function*(p,l){const{data:d}=yield Vh((0,ee.Ku)(p),l);return d.email})).apply(this,arguments)}function Zg(){return(Zg=(0,T.A)(function*(p,l,d){if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(je(p));const g=Mt(p),M=yield Xa(g,{returnSecureToken:!0,email:l,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",me,"EMAIL_PASSWORD_PROVIDER").catch(Y=>{throw"auth/password-does-not-meet-requirements"===Y.code&&hi(p),Y}),V=yield N._fromIdTokenResponse(g,"signIn",M);return yield g._updateCurrentUser(V.user),V})).apply(this,arguments)}function jh(){return(jh=(0,T.A)(function*(p,l,d){const g=Mt(p),E={requestType:"EMAIL_SIGNIN",email:l,clientType:"CLIENT_TYPE_WEB"};(function w(M,V){he(V.handleCodeInApp,g,"argument-error"),V&&rc(g,M,V)})(E,d),yield Xa(g,E,"getOobCode",sD,"EMAIL_PASSWORD_PROVIDER")})).apply(this,arguments)}function Fu(){return(Fu=(0,T.A)(function*(p,l,d){if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(je(p));const g=(0,ee.Ku)(p),E=Nh.credentialWithLink(l,d||en());return he(E._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),nc(g,E)})).apply(this,arguments)}function $h(){return($h=(0,T.A)(function*(p,l){return ue(p,"POST","/v1/accounts:createAuthUri",le(p,l))})).apply(this,arguments)}function rl(){return rl=(0,T.A)(function*(p,l){const g={identifier:l,continueUri:ar()?en():"http://localhost"},{signinMethods:E}=yield function Hh(p,l){return $h.apply(this,arguments)}((0,ee.Ku)(p),g);return E||[]}),rl.apply(this,arguments)}function Ls(){return Ls=(0,T.A)(function*(p,l){const d=(0,ee.Ku)(p),E={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};l&&rc(d.auth,E,l);const{email:w}=yield function jg(p,l){return Jc.apply(this,arguments)}(d.auth,E);w!==p.email&&(yield p.reload())}),Ls.apply(this,arguments)}function nm(){return nm=(0,T.A)(function*(p,l,d){const g=(0,ee.Ku)(p),w={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:l};d&&rc(g.auth,w,d);const{email:M}=yield function tk(p,l){return f0.apply(this,arguments)}(g.auth,w);M!==p.email&&(yield p.reload())}),nm.apply(this,arguments)}function Gh(){return(Gh=(0,T.A)(function*(p,l){return ue(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function ua(){return ua=(0,T.A)(function*(p,{displayName:l,photoURL:d}){if(void 0===l&&void 0===d)return;const g=(0,ee.Ku)(p),w={idToken:yield g.getIdToken(),displayName:l,photoUrl:d,returnSecureToken:!0},M=yield Pr(g,function dD(p,l){return Gh.apply(this,arguments)}(g.auth,w));g.displayName=M.displayName||null,g.photoURL=M.photoUrl||null;const V=g.providerData.find(({providerId:Y})=>"password"===Y);V&&(V.displayName=g.displayName,V.photoURL=g.photoURL),yield g._updateTokensIfNecessary(M)}),ua.apply(this,arguments)}function T0(p,l,d){return Vu.apply(this,arguments)}function Vu(){return Vu=(0,T.A)(function*(p,l,d){const{auth:g}=p,w={idToken:yield p.getIdToken(),returnSecureToken:!0};l&&(w.email=l),d&&(w.password=d);const M=yield Pr(p,function Dh(p,l){return Vg.apply(this,arguments)}(g,w));yield p._updateTokensIfNecessary(M,!0)}),Vu.apply(this,arguments)}class sc{constructor(l,d,g={}){this.isNewUser=l,this.providerId=d,this.profile=g}}class Vs extends sc{constructor(l,d,g,E){super(l,d,g),this.username=E}}class il extends sc{constructor(l,d){super(l,"facebook.com",d)}}class pD extends Vs{constructor(l,d){super(l,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class gD extends sc{constructor(l,d){super(l,"google.com",d)}}class wr extends Vs{constructor(l,d,g){super(l,"twitter.com",d,g)}}function w0(p){const{user:l,_tokenResponse:d}=p;return l.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function Eo(p){var l,d;if(!p)return null;const{providerId:g}=p,E=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},w=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!g&&p?.idToken){const M=null===(d=null===(l=ls(p.idToken))||void 0===l?void 0:l.firebase)||void 0===d?void 0:d.sign_in_provider;if(M)return new sc(w,"anonymous"!==M&&"custom"!==M?M:null)}if(!g)return null;switch(g){case"facebook.com":return new il(w,E);case"github.com":return new pD(w,E);case"google.com":return new gD(w,E);case"twitter.com":return new wr(w,E,p.screenName||null);case"custom":case"anonymous":return new sc(w,null);default:return new sc(w,g,E)}}(d)}class un{constructor(l,d,g){this.type=l,this.credential=d,this.user=g}static _fromIdtoken(l,d){return new un("enroll",l,d)}static _fromMfaPendingCredential(l){return new un("signin",l)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(l){var d,g;if(l?.multiFactorSession){if(null!==(d=l.multiFactorSession)&&void 0!==d&&d.pendingCredential)return un._fromMfaPendingCredential(l.multiFactorSession.pendingCredential);if(null!==(g=l.multiFactorSession)&&void 0!==g&&g.idToken)return un._fromIdtoken(l.multiFactorSession.idToken)}return null}}class kr{constructor(l,d,g){this.session=l,this.hints=d,this.signInResolver=g}static _fromError(l,d){const g=Mt(l),E=d.customData._serverResponse,w=(E.mfaInfo||[]).map(V=>ei._fromServerResponse(g,V));he(E.mfaPendingCredential,g,"internal-error");const M=un._fromMfaPendingCredential(E.mfaPendingCredential);return new kr(M,w,function(){var V=(0,T.A)(function*(Y){const be=yield Y._process(g,M);delete E.mfaInfo,delete E.mfaPendingCredential;const Pe=Object.assign(Object.assign({},E),{idToken:be.idToken,refreshToken:be.refreshToken});switch(d.operationType){case"signIn":const Te=yield N._fromIdTokenResponse(g,d.operationType,Pe);return yield g._updateCurrentUser(Te.user),Te;case"reauthenticate":return he(d.user,g,"internal-error"),N._forOperation(d.user,d.operationType,Pe);default:Ye(g,"internal-error")}});return function(Y){return V.apply(this,arguments)}}())}resolveSignIn(l){var d=this;return(0,T.A)(function*(){return d.signInResolver(l)})()}}function ti(p,l){return ue(p,"POST","/v2/accounts/mfaEnrollment:start",le(p,l))}class ot{constructor(l){this.user=l,this.enrolledFactors=[],l._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(g=>ei._fromServerResponse(l.auth,g)))})}static _fromUser(l){return new ot(l)}getSession(){var l=this;return(0,T.A)(function*(){return un._fromIdtoken(yield l.user.getIdToken(),l.user)})()}enroll(l,d){var g=this;return(0,T.A)(function*(){const E=l,w=yield g.getSession(),M=yield Pr(g.user,E._process(g.user.auth,w,d));return yield g.user._updateTokensIfNecessary(M),g.user.reload()})()}unenroll(l){var d=this;return(0,T.A)(function*(){const g="string"==typeof l?l:l.uid,E=yield d.user.getIdToken();try{const w=yield Pr(d.user,function ps(p,l){return ue(p,"POST","/v2/accounts/mfaEnrollment:withdraw",le(p,l))}(d.user.auth,{idToken:E,mfaEnrollmentId:g}));d.enrolledFactors=d.enrolledFactors.filter(({uid:M})=>M!==g),yield d.user._updateTokensIfNecessary(w),yield d.user.reload()}catch(w){throw w}})()}}const Bs=new WeakMap,Us="__sak";class Tn{constructor(l,d){this.storageRetriever=l,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Us,"1"),this.storage.removeItem(Us),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(l,d){return this.storage.setItem(l,JSON.stringify(d)),Promise.resolve()}_get(l){const d=this.storage.getItem(l);return Promise.resolve(d?JSON.parse(d):null)}_remove(l){return this.storage.removeItem(l),Promise.resolve()}get storage(){return this.storageRetriever()}}const ha=(()=>{class p extends Tn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,g)=>this.onStorageEvent(d,g),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oe(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const g of Object.keys(this.listeners)){const E=this.storage.getItem(g),w=this.localCache[g];E!==w&&d(g,w,E)}}onStorageEvent(d,g=!1){if(!d.key)return void this.forAllChangedKeys((V,Y,be)=>{this.notifyListeners(V,be)});const E=d.key;g?this.detachListener():this.stopPolling();const w=()=>{const V=this.storage.getItem(E);!g&&this.localCache[E]===V||this.notifyListeners(E,V)},M=this.storage.getItem(E);!function $(){return(0,ee.lT)()&&10===document.documentMode}()||M===d.newValue||d.newValue===d.oldValue?w():setTimeout(w,10)}notifyListeners(d,g){this.localCache[d]=g;const E=this.listeners[d];if(E)for(const w of Array.from(E))w(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,g,E)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:g,newValue:E}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,g){var E=()=>super._set,w=this;return(0,T.A)(function*(){yield E().call(w,d,g),w.localCache[d]=JSON.stringify(g)})()}_get(d){var g=()=>super._get,E=this;return(0,T.A)(function*(){const w=yield g().call(E,d);return E.localCache[d]=JSON.stringify(w),w})()}_remove(d){var g=()=>super._remove,E=this;return(0,T.A)(function*(){yield g().call(E,d),delete E.localCache[d]})()}}return p.type="LOCAL",p})(),Fe=(()=>{class p extends Tn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,g){}_removeListener(d,g){}}return p.type="SESSION",p})();let $o=(()=>{class p{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const g=this.receivers.find(w=>w.isListeningto(d));if(g)return g;const E=new p(d);return this.receivers.push(E),E}isListeningto(d){return this.eventTarget===d}handleEvent(d){var g=this;return(0,T.A)(function*(){const E=d,{eventId:w,eventType:M,data:V}=E.data,Y=g.handlersMap[M];if(!Y?.size)return;E.ports[0].postMessage({status:"ack",eventId:w,eventType:M});const be=Array.from(Y).map(function(){var Te=(0,T.A)(function*(rt){return rt(E.origin,V)});return function(rt){return Te.apply(this,arguments)}}()),Pe=yield function sm(p){return Promise.all(p.map(function(){var l=(0,T.A)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(g){return{fulfilled:!1,reason:g}}});return function(d){return l.apply(this,arguments)}}()))}(be);E.ports[0].postMessage({status:"done",eventId:w,eventType:M,response:Pe})})()}_subscribe(d,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(g)}_unsubscribe(d,g){this.handlersMap[d]&&g&&this.handlersMap[d].delete(g),(!g||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function Pi(p="",l=10){let d="";for(let g=0;g<l;g++)d+=Math.floor(10*Math.random());return p+d}class qh{constructor(l){this.target=l,this.handlers=new Set}removeMessageHandler(l){l.messageChannel&&(l.messageChannel.port1.removeEventListener("message",l.onMessage),l.messageChannel.port1.close()),this.handlers.delete(l)}_send(l,d){var g=this;return(0,T.A)(function*(E,w,M=50){const V=typeof MessageChannel<"u"?new MessageChannel:null;if(!V)throw new Error("connection_unavailable");let Y,be;return new Promise((Pe,Te)=>{const rt=Pi("",20);V.port1.start();const Dn=setTimeout(()=>{Te(new Error("unsupported_event"))},M);be={messageChannel:V,onMessage(no){const El=no;if(El.data.eventId===rt)switch(El.data.status){case"ack":clearTimeout(Dn),Y=setTimeout(()=>{Te(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),Pe(El.data.response);break;default:clearTimeout(Dn),clearTimeout(Y),Te(new Error("invalid_response"))}}},g.handlers.add(be),V.port1.addEventListener("message",be.onMessage),g.target.postMessage({eventType:E,eventId:rt,data:w},[V.port2])}).finally(()=>{be&&g.removeMessageHandler(be)})}).apply(this,arguments)}}function wn(){return window}function xn(){return typeof wn().WorkerGlobalScope<"u"&&"function"==typeof wn().importScripts}function Uu(){return(Uu=(0,T.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Oi="firebaseLocalStorageDb",ju="firebaseLocalStorage",C0="fbase_key";class Ji{constructor(l){this.request=l}toPromise(){return new Promise((l,d)=>{this.request.addEventListener("success",()=>{l(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function Hu(p,l){return p.transaction([ju],l?"readwrite":"readonly").objectStore(ju)}function cl(){const p=indexedDB.open(Oi,1);return new Promise((l,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const g=p.result;try{g.createObjectStore(ju,{keyPath:C0})}catch(E){d(E)}}),p.addEventListener("success",(0,T.A)(function*(){const g=p.result;g.objectStoreNames.contains(ju)?l(g):(g.close(),yield function vD(){const p=indexedDB.deleteDatabase(Oi);return new Ji(p).toPromise()}(),l(yield cl()))}))})}function ED(p,l,d){return A0.apply(this,arguments)}function A0(){return(A0=(0,T.A)(function*(p,l,d){const g=Hu(p,!0).put({[C0]:l,value:d});return new Ji(g).toPromise()})).apply(this,arguments)}function S0(){return(S0=(0,T.A)(function*(p,l){const d=Hu(p,!1).get(l),g=yield new Ji(d).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function bD(p,l){const d=Hu(p,!0).delete(l);return new Ji(d).toPromise()}const $u=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,T.A)(function*(){return d.db||(d.db=yield cl()),d.db})()}_withRetries(d){var g=this;return(0,T.A)(function*(){let E=0;for(;;)try{const w=yield g._openDb();return yield d(w)}catch(w){if(E++>3)throw w;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,T.A)(function*(){return xn()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,T.A)(function*(){d.receiver=$o._getInstance(function Kh(){return xn()?self:null}()),d.receiver._subscribe("keyChanged",function(){var g=(0,T.A)(function*(E,w){return{keyProcessed:(yield d._poll()).includes(w.key)}});return function(E,w){return g.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var g=(0,T.A)(function*(E,w){return["keyChanged"]});return function(E,w){return g.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,T.A)(function*(){var g,E;if(d.activeServiceWorker=yield function Dr(){return Uu.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new qh(d.activeServiceWorker);const w=yield d.sender._send("ping",{},800);w&&null!==(g=w[0])&&void 0!==g&&g.fulfilled&&null!==(E=w[0])&&void 0!==E&&E.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var g=this;return(0,T.A)(function*(){if(g.sender&&g.activeServiceWorker&&function Go(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:d},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,T.A)(function*(){try{if(!indexedDB)return!1;const d=yield cl();return yield ED(d,Us,"1"),yield bD(d,Us),!0}catch{}return!1})()}_withPendingWrite(d){var g=this;return(0,T.A)(function*(){g.pendingWrites++;try{yield d()}finally{g.pendingWrites--}})()}_set(d,g){var E=this;return(0,T.A)(function*(){return E._withPendingWrite((0,T.A)(function*(){return yield E._withRetries(w=>ED(w,d,g)),E.localCache[d]=g,E.notifyServiceWorker(d)}))})()}_get(d){var g=this;return(0,T.A)(function*(){const E=yield g._withRetries(w=>function dk(p,l){return S0.apply(this,arguments)}(w,d));return g.localCache[d]=E,E})()}_remove(d){var g=this;return(0,T.A)(function*(){return g._withPendingWrite((0,T.A)(function*(){return yield g._withRetries(E=>bD(E,d)),delete g.localCache[d],g.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,T.A)(function*(){const g=yield d._withRetries(M=>{const V=Hu(M,!1).getAll();return new Ji(V).toPromise()});if(!g)return[];if(0!==d.pendingWrites)return[];const E=[],w=new Set;if(0!==g.length)for(const{fbase_key:M,value:V}of g)w.add(M),JSON.stringify(d.localCache[M])!==JSON.stringify(V)&&(d.notifyListeners(M,V),E.push(M));for(const M of Object.keys(d.localCache))d.localCache[M]&&!w.has(M)&&(d.notifyListeners(M,null),E.push(M));return E})()}notifyListeners(d,g){this.localCache[d]=g;const E=this.listeners[d];if(E)for(const w of Array.from(E))w(g)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,T.A)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})();function ID(p,l){return ue(p,"POST","/v2/accounts/mfaSignIn:start",le(p,l))}const Qh=Ih("rcb"),pk=new _o(3e4,6e4);class gk{constructor(){var l;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(l=wn().grecaptcha)||void 0===l||!l.render)}load(l,d=""){return he(function mk(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(d),l,"argument-error"),this.shouldResolveImmediately(d)&&Zn(wn().grecaptcha)?Promise.resolve(wn().grecaptcha):new Promise((g,E)=>{const w=wn().setTimeout(()=>{E(kt(l,"network-request-failed"))},pk.get());wn()[Qh]=()=>{wn().clearTimeout(w),delete wn()[Qh];const V=wn().grecaptcha;if(!V||!Zn(V))return void E(kt(l,"internal-error"));const Y=V.render;V.render=(be,Pe)=>{const Te=Y(be,Pe);return this.counter++,Te},this.hostLanguage=d,g(V)},l0(`${function ln(){return vn.recaptchaV2Script}()}?${(0,ee.Am)({onload:Qh,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(w),E(kt(l,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(l){var d;return!(null===(d=wn().grecaptcha)||void 0===d||!d.render)&&(l===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class TD{load(l){return(0,T.A)(function*(){return new ft(l)})()}clearedOneInstance(){}}const ll="recaptcha",Cr={theme:"light",type:"image"};class M0{constructor(l,d,g=Object.assign({},Cr)){this.parameters=g,this.type=ll,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mt(l),this.isInvisible="invisible"===this.parameters.size,he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const E="string"==typeof d?document.getElementById(d):d;he(E,this.auth,"argument-error"),this.container=E,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new TD:new gk,this.validateStartingState()}verify(){var l=this;return(0,T.A)(function*(){l.assertNotDestroyed();const d=yield l.render(),g=l.getAssertedRecaptcha();return g.getResponse(d)||new Promise(w=>{const M=V=>{V&&(l.tokenChangeListeners.delete(M),w(V))};l.tokenChangeListeners.add(M),l.isInvisible&&g.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(l){return Promise.reject(l)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(l=>{throw this.renderPromise=null,l})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(l=>{this.container.removeChild(l)})}validateStartingState(){he(!this.parameters.sitekey,this.auth,"argument-error"),he(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(l){return d=>{if(this.tokenChangeListeners.forEach(g=>g(d)),"function"==typeof l)l(d);else if("string"==typeof l){const g=wn()[l];"function"==typeof g&&g(d)}}}assertNotDestroyed(){he(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var l=this;return(0,T.A)(function*(){if(yield l.init(),!l.widgetId){let d=l.container;if(!l.isInvisible){const g=document.createElement("div");d.appendChild(g),d=g}l.widgetId=l.getAssertedRecaptcha().render(d,l.parameters)}return l.widgetId})()}init(){var l=this;return(0,T.A)(function*(){he(ar()&&!xn(),l.auth,"internal-error"),yield function wD(){let p=null;return new Promise(l=>{"complete"!==document.readyState?(p=()=>l(),window.addEventListener("load",p)):l()}).catch(l=>{throw p&&window.removeEventListener("load",p),l})}(),l.recaptcha=yield l._recaptchaLoader.load(l.auth,l.auth.languageCode||void 0);const d=yield function Eh(p){return At.apply(this,arguments)}(l.auth);he(d,l.auth,"internal-error"),l.parameters.sitekey=d})()}getAssertedRecaptcha(){return he(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class am{constructor(l,d){this.verificationId=l,this.onConfirmation=d}confirm(l){const d=xs._fromVerification(this.verificationId,l);return this.onConfirmation(d)}}function Yh(){return(Yh=(0,T.A)(function*(p,l,d){if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(je(p));const g=Mt(p),E=yield zu(g,l,(0,ee.Ku)(d));return new am(E,w=>nc(g,w))})).apply(this,arguments)}function Gu(){return(Gu=(0,T.A)(function*(p,l,d){const g=(0,ee.Ku)(p);yield kh(!1,g,"phone");const E=yield zu(g.auth,l,(0,ee.Ku)(d));return new am(E,w=>Kg(g,w))})).apply(this,arguments)}function Kt(){return(Kt=(0,T.A)(function*(p,l,d){const g=(0,ee.Ku)(p);if((0,Ce._isFirebaseServerApp)(g.auth.app))return Promise.reject(je(g.auth));const E=yield zu(g.auth,l,(0,ee.Ku)(d));return new am(E,w=>Mi(g,w))})).apply(this,arguments)}function zu(p,l,d){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,T.A)(function*(p,l,d){var g;if(!p._getRecaptchaConfig())try{yield function tD(p){return Lg.apply(this,arguments)}(p)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let E;if(E="string"==typeof l?{phoneNumber:l}:l,"session"in E){const w=E.session;if("phoneNumber"in E){he("enroll"===w.type,p,"internal-error");const M={idToken:w.credential,phoneEnrollmentInfo:{phoneNumber:E.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(yield Xa(p,M,"mfaSmsEnrollment",function(){var Pe=(0,T.A)(function*(Te,rt){return rt.phoneEnrollmentInfo.captchaResponse===Uo?(he(d?.type===ll,Te,"argument-error"),ti(Te,yield fa(Te,rt,d))):ti(Te,rt)});return function(rt,Dn){return Pe.apply(this,arguments)}}(),"PHONE_PROVIDER").catch(Pe=>Promise.reject(Pe))).phoneSessionInfo.sessionInfo}{he("signin"===w.type,p,"internal-error");const M=(null===(g=E.multiFactorHint)||void 0===g?void 0:g.uid)||E.multiFactorUid;he(M,p,"missing-multi-factor-info");const V={mfaPendingCredential:w.credential,mfaEnrollmentId:M,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(yield Xa(p,V,"mfaSmsSignIn",function(){var Te=(0,T.A)(function*(rt,Dn){return Dn.phoneSignInInfo.captchaResponse===Uo?(he(d?.type===ll,rt,"argument-error"),ID(rt,yield fa(rt,Dn,d))):ID(rt,Dn)});return function(Dn,no){return Te.apply(this,arguments)}}(),"PHONE_PROVIDER").catch(Te=>Promise.reject(Te))).phoneResponseInfo.sessionInfo}}{const w={phoneNumber:E.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(yield Xa(p,w,"sendVerificationCode",function(){var be=(0,T.A)(function*(Pe,Te){return Te.captchaResponse===Uo?(he(d?.type===ll,Pe,"argument-error"),Xc(Pe,yield fa(Pe,Te,d))):Xc(Pe,Te)});return function(Te,rt){return be.apply(this,arguments)}}(),"PHONE_PROVIDER").catch(be=>Promise.reject(be))).sessionInfo}}finally{d?._reset()}}),Jh.apply(this,arguments)}function Wu(){return(Wu=(0,T.A)(function*(p,l){const d=(0,ee.Ku)(p);if((0,Ce._isFirebaseServerApp)(d.auth.app))return Promise.reject(je(d.auth));yield qg(d,l)})).apply(this,arguments)}function fa(p,l,d){return zr.apply(this,arguments)}function zr(){return(zr=(0,T.A)(function*(p,l,d){he(d.type===ll,p,"argument-error");const g=yield d.verify();he("string"==typeof g,p,"argument-error");const E=Object.assign({},l);return"phoneEnrollmentInfo"in E?(Object.assign(E,{phoneEnrollmentInfo:{phoneNumber:E.phoneEnrollmentInfo.phoneNumber,recaptchaToken:g,captchaResponse:E.phoneEnrollmentInfo.captchaResponse,clientType:E.phoneEnrollmentInfo.clientType,recaptchaVersion:E.phoneEnrollmentInfo.recaptchaVersion}}),E):"phoneSignInInfo"in E?(Object.assign(E,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:E.phoneSignInInfo.captchaResponse,clientType:E.phoneSignInInfo.clientType,recaptchaVersion:E.phoneSignInInfo.recaptchaVersion}}),E):(Object.assign(E,{recaptchaToken:g}),E)})).apply(this,arguments)}let qu=(()=>{class p{constructor(d){this.providerId=p.PROVIDER_ID,this.auth=Mt(d)}verifyPhoneNumber(d,g){return zu(this.auth,d,(0,ee.Ku)(g))}static credential(d,g){return xs._fromVerification(d,g)}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:g,temporaryProof:E}=d;return g&&E?xs._fromTokenResponse(g,E):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function Zi(p,l){return l?q(l):(he(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class Hs extends fe{constructor(l){super("custom","custom"),this.params=l}_getIdTokenResponse(l){return jo(l,this._buildIdpRequest())}_linkToIdToken(l,d){return jo(l,this._buildIdpRequest(d))}_getReauthenticationResolver(l){return jo(l,this._buildIdpRequest())}_buildIdpRequest(l){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return l&&(d.idToken=l),d}}function pi(p){return tc(p.auth,new Hs(p),p.bypassAuthState)}function AD(p){const{auth:l,user:d}=p;return he(d,l,"internal-error"),E0(d,new Hs(p),p.bypassAuthState)}function cm(p){return lm.apply(this,arguments)}function lm(){return(lm=(0,T.A)(function*(p){const{auth:l,user:d}=p;return he(d,l,"internal-error"),qg(d,new Hs(p),p.bypassAuthState)})).apply(this,arguments)}class Xi{constructor(l,d,g,E,w=!1){this.auth=l,this.resolver=g,this.user=E,this.bypassAuthState=w,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var l=this;return new Promise(function(){var d=(0,T.A)(function*(g,E){l.pendingPromise={resolve:g,reject:E};try{l.eventManager=yield l.resolver._initialize(l.auth),yield l.onExecution(),l.eventManager.registerConsumer(l)}catch(w){l.reject(w)}});return function(g,E){return d.apply(this,arguments)}}())}onAuthEvent(l){var d=this;return(0,T.A)(function*(){const{urlResponse:g,sessionId:E,postBody:w,tenantId:M,error:V,type:Y}=l;if(V)return void d.reject(V);const be={auth:d.auth,requestUri:g,sessionId:E,tenantId:M||void 0,postBody:w||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(Y)(be))}catch(Pe){d.reject(Pe)}})()}onError(l){this.reject(l)}getIdpTask(l){switch(l){case"signInViaPopup":case"signInViaRedirect":return pi;case"linkViaPopup":case"linkViaRedirect":return cm;case"reauthViaPopup":case"reauthViaRedirect":return AD;default:Ye(this.auth,"internal-error")}}resolve(l){yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(l),this.unregisterAndCleanUp()}reject(l){yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(l),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const O0=new _o(2e3,1e4);function Zh(){return(Zh=(0,T.A)(function*(p,l,d){if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(kt(p,"operation-not-supported-in-this-environment"));const g=Mt(p);jt(p,l,la);const E=Zi(g,d);return new Yu(g,"signInViaPopup",l,E).executeNotNull()})).apply(this,arguments)}function Qu(){return(Qu=(0,T.A)(function*(p,l,d){const g=(0,ee.Ku)(p);if((0,Ce._isFirebaseServerApp)(g.auth.app))return Promise.reject(kt(g.auth,"operation-not-supported-in-this-environment"));jt(g.auth,l,la);const E=Zi(g.auth,d);return new Yu(g.auth,"reauthViaPopup",l,E,g).executeNotNull()})).apply(this,arguments)}function dl(){return(dl=(0,T.A)(function*(p,l,d){const g=(0,ee.Ku)(p);jt(g.auth,l,la);const E=Zi(g.auth,d);return new Yu(g.auth,"linkViaPopup",l,E,g).executeNotNull()})).apply(this,arguments)}let Yu=(()=>{class p extends Xi{constructor(d,g,E,w,M){super(d,g,w,M),this.provider=E,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var d=this;return(0,T.A)(function*(){const g=yield d.execute();return he(g,d.auth,"internal-error"),g})()}onExecution(){var d=this;return(0,T.A)(function*(){yn(1===d.filter.length,"Popup operations only handle one event");const g=Pi();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],g),d.authWindow.associatedEvent=g,d.resolver._originValidation(d.auth).catch(E=>{d.reject(E)}),d.resolver._isIframeWebStorageSupported(d.auth,E=>{E||d.reject(kt(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(kt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const d=()=>{var g,E;this.pollId=null!==(E=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==E&&E.closed?window.setTimeout(()=>{this.pollId=null,this.reject(kt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,O0.get())};d()}}return p.currentPopupAction=null,p})();const lc=new Map;class dm extends Xi{constructor(l,d,g=!1){super(l,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,g),this.eventId=null}execute(){var l=()=>super.execute,d=this;return(0,T.A)(function*(){let g=lc.get(d.auth._key());if(!g){try{const w=(yield function SD(p,l){return ut.apply(this,arguments)}(d.resolver,d.auth))?yield l().call(d):null;g=()=>Promise.resolve(w)}catch(E){g=()=>Promise.reject(E)}lc.set(d.auth._key(),g)}return d.bypassAuthState||lc.set(d.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(l){var d=()=>super.onAuthEvent,g=this;return(0,T.A)(function*(){if("signInViaRedirect"===l.type)return d().call(g,l);if("unknown"!==l.type){if(l.eventId){const E=yield g.auth._redirectUserForId(l.eventId);if(E)return g.user=E,d().call(g,l);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,T.A)(function*(){})()}cleanUp(){}}function ut(){return(ut=(0,T.A)(function*(p,l){const d=x0(l),g=k0(p);if(!(yield g._isAvailable()))return!1;const E="true"===(yield g._get(d));return yield g._remove(d),E})).apply(this,arguments)}function hl(p,l){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,T.A)(function*(p,l){return k0(p)._set(x0(l),"true")})).apply(this,arguments)}function fm(p,l){lc.set(p._key(),l)}function k0(p){return q(p._redirectPersistence)}function x0(p){return qt("pendingRedirect",p.config.apiKey,p.name)}function gm(){return(gm=(0,T.A)(function*(p,l,d){if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(je(p));const g=Mt(p);jt(p,l,la),yield g._initializationPromise;const E=Zi(g,d);return yield hl(E,g),E._openRedirect(g,l,"signInViaRedirect")})).apply(this,arguments)}function mm(){return(mm=(0,T.A)(function*(p,l,d){const g=(0,ee.Ku)(p);if(jt(g.auth,l,la),(0,Ce._isFirebaseServerApp)(g.auth.app))return Promise.reject(je(g.auth));yield g.auth._initializationPromise;const E=Zi(g.auth,d);yield hl(E,g.auth);const w=yield fl(g);return E._openRedirect(g.auth,l,"reauthViaRedirect",w)})).apply(this,arguments)}function ct(){return(ct=(0,T.A)(function*(p,l,d){const g=(0,ee.Ku)(p);jt(g.auth,l,la),yield g.auth._initializationPromise;const E=Zi(g.auth,d);yield kh(!1,g,l.providerId),yield hl(E,g.auth);const w=yield fl(g);return E._openRedirect(g.auth,l,"linkViaRedirect",w)})).apply(this,arguments)}function Fr(){return(Fr=(0,T.A)(function*(p,l){return yield Mt(p)._initializationPromise,vt(p,l,!1)})).apply(this,arguments)}function vt(p,l){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,T.A)(function*(p,l,d=!1){if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(je(p));const g=Mt(p),E=Zi(g,l),M=yield new dm(g,E,d).execute();return M&&!d&&(delete M.user._redirectEventId,yield g._persistUserIfCurrent(M.user),yield g._setRedirectUser(null,l)),M})).apply(this,arguments)}function fl(p){return eo.apply(this,arguments)}function eo(){return(eo=(0,T.A)(function*(p){const l=Pi(`${p.uid}:::`);return p._redirectEventId=l,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),l})).apply(this,arguments)}class ef{constructor(l){this.auth=l,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(l){this.consumers.add(l),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,l)&&(this.sendToConsumer(this.queuedRedirectEvent,l),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(l){this.consumers.delete(l)}onEvent(l){if(this.hasEventBeenHandled(l))return!1;let d=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(l,g)&&(d=!0,this.sendToConsumer(l,g),this.saveEventToCache(l))}),this.hasHandledPotentialRedirect||!function _k(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PD(p);default:return!1}}(l)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=l,d=!0)),d}sendToConsumer(l,d){var g;if(l.error&&!PD(l)){const E=(null===(g=l.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";d.onError(kt(this.auth,E))}else d.onAuthEvent(l)}isEventForConsumer(l,d){const g=null===d.eventId||!!l.eventId&&l.eventId===d.eventId;return d.filter.includes(l.type)&&g}hasEventBeenHandled(l){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ym(l))}saveEventToCache(l){this.cachedEventUids.add(ym(l)),this.lastProcessedEventTime=Date.now()}}function ym(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(l=>l).join("-")}function PD({type:p,error:l}){return"unknown"===p&&"auth/no-auth-event"===l?.code}function vm(p){return tf.apply(this,arguments)}function tf(){return(tf=(0,T.A)(function*(p,l={}){return ue(p,"GET","/v1/projects",l)})).apply(this,arguments)}const nf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gi=/^https?/;function rf(){return(rf=(0,T.A)(function*(p){if(p.config.emulator)return;const{authorizedDomains:l}=yield vm(p);for(const d of l)try{if(Io(d))return}catch{}Ye(p,"unauthorized-domain")})).apply(this,arguments)}function Io(p){const l=en(),{protocol:d,hostname:g}=new URL(l);if(p.startsWith("chrome-extension://")){const M=new URL(p);return""===M.hostname&&""===g?"chrome-extension:"===d&&p.replace("chrome-extension://","")===l.replace("chrome-extension://",""):"chrome-extension:"===d&&M.hostname===g}if(!gi.test(d))return!1;if(nf.test(p))return g===p;const E=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+E+"|"+E+")$","i").test(g)}const zs=new _o(3e4,6e4);function F0(){const p=wn().___jsl;if(p?.H)for(const l of Object.keys(p.H))if(p.H[l].r=p.H[l].r||[],p.H[l].L=p.H[l].L||[],p.H[l].r=[...p.H[l].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}let sf=null;const Em=new _o(5e3,15e3),af={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function V0(p){const l=p.config;he(l.authDomain,p,"auth-domain-config-required");const d=l.emulator?za(l,"emulator/auth/iframe"):`https://${p.config.authDomain}/__/auth/iframe`,g={apiKey:l.apiKey,appName:p.name,v:Ce.SDK_VERSION},E=kD.get(p.config.apiHost);E&&(g.eid=E);const w=p._getFrameworks();return w.length&&(g.fw=w.join(",")),`${d}?${(0,ee.Am)(g).slice(1)}`}function cf(){return cf=(0,T.A)(function*(p){const l=yield function OD(p){return sf=sf||function L0(p){return new Promise((l,d)=>{var g,E,w;function M(){F0(),gapi.load("gapi.iframes",{callback:()=>{l(gapi.iframes.getContext())},ontimeout:()=>{F0(),d(kt(p,"network-request-failed"))},timeout:zs.get()})}if(null!==(E=null===(g=wn().gapi)||void 0===g?void 0:g.iframes)&&void 0!==E&&E.Iframe)l(gapi.iframes.getContext());else{if(null===(w=wn().gapi)||void 0===w||!w.load){const V=Ih("iframefcb");return wn()[V]=()=>{gapi.load?M():d(kt(p,"network-request-failed"))},l0(`${function Tr(){return vn.gapiScript}()}?onload=${V}`).catch(Y=>d(Y))}M()}}).catch(l=>{throw sf=null,l})}(p),sf}(p),d=wn().gapi;return he(d,p,"internal-error"),l.open({where:document.body,url:V0(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:af,dontclear:!0},g=>new Promise(function(){var E=(0,T.A)(function*(w,M){yield g.restyle({setHideOnLeave:!1});const V=kt(p,"network-request-failed"),Y=wn().setTimeout(()=>{M(V)},Em.get());function be(){wn().clearTimeout(Y),w(g)}g.ping(be).then(be,()=>{M(V)})});return function(w,M){return E.apply(this,arguments)}}()))}),cf.apply(this,arguments)}const B0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Lr{constructor(l){this.window=l,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const VD=encodeURIComponent("fac");function Dm(p,l,d,g,E,w){return lf.apply(this,arguments)}function lf(){return(lf=(0,T.A)(function*(p,l,d,g,E,w){he(p.config.authDomain,p,"auth-domain-config-required"),he(p.config.apiKey,p,"invalid-api-key");const M={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:g,v:Ce.SDK_VERSION,eventId:E};if(l instanceof la){l.setDefaultLanguage(p.languageCode),M.providerId=l.providerId||"",(0,ee.Im)(l.getCustomParameters())||(M.customParameters=JSON.stringify(l.getCustomParameters()));for(const[Pe,Te]of Object.entries(w||{}))M[Pe]=Te}if(l instanceof Su){const Pe=l.getScopes().filter(Te=>""!==Te);Pe.length>0&&(M.scopes=Pe.join(","))}p.tenantId&&(M.tid=p.tenantId);const V=M;for(const Pe of Object.keys(V))void 0===V[Pe]&&delete V[Pe];const Y=yield p._getAppCheckToken(),be=Y?`#${VD}=${encodeURIComponent(Y)}`:"";return`${function H0({config:p}){return p.emulator?za(p,"emulator/auth/handler"):`https://${p.authDomain}/__/auth/handler`}(p)}?${(0,ee.Am)(V).slice(1)}${be}`})).apply(this,arguments)}const hc="webStorageSupport",$0=class gs{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fe,this._completeRedirectFn=vt,this._overrideRedirectResult=fm}_openPopup(l,d,g,E){var w=this;return(0,T.A)(function*(){var M;yn(null===(M=w.eventManagers[l._key()])||void 0===M?void 0:M.manager,"_initialize() not called before _openPopup()");const V=yield Dm(l,d,g,en(),E);return function dc(p,l,d,g=500,E=600){const w=Math.max((window.screen.availHeight-E)/2,0).toString(),M=Math.max((window.screen.availWidth-g)/2,0).toString();let V="";const Y=Object.assign(Object.assign({},B0),{width:g.toString(),height:E.toString(),top:w,left:M}),be=(0,ee.ZQ)().toLowerCase();d&&(V=Si(be)?"_blank":d),Ft(be)&&(l=l||"http://localhost",Y.scrollbars="yes");const Pe=Object.entries(Y).reduce((rt,[Dn,no])=>`${rt}${Dn}=${no},`,"");if(function K(p=(0,ee.ZQ)()){var l;return Za(p)&&!(null===(l=window.navigator)||void 0===l||!l.standalone)}(be)&&"_self"!==V)return function gn(p,l){const d=document.createElement("a");d.href=p,d.target=l;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(g)}(l||"",V),new Lr(null);const Te=window.open(l||"",V,Pe);he(Te,p,"popup-blocked");try{Te.focus()}catch{}return new Lr(Te)}(l,V,Pi())})()}_openRedirect(l,d,g,E){var w=this;return(0,T.A)(function*(){return yield w._originValidation(l),function kn(p){wn().location.href=p}(yield Dm(l,d,g,en(),E)),new Promise(()=>{})})()}_initialize(l){const d=l._key();if(this.eventManagers[d]){const{manager:E,promise:w}=this.eventManagers[d];return E?Promise.resolve(E):(yn(w,"If manager is not set, promise should be"),w)}const g=this.initAndGetManager(l);return this.eventManagers[d]={promise:g},g.catch(()=>{delete this.eventManagers[d]}),g}initAndGetManager(l){var d=this;return(0,T.A)(function*(){const g=yield function Tm(p){return cf.apply(this,arguments)}(l),E=new ef(l);return g.register("authEvent",w=>(he(w?.authEvent,l,"invalid-auth-event"),{status:E.onEvent(w.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[l._key()]={manager:E},d.iframes[l._key()]=g,E})()}_isIframeWebStorageSupported(l,d){this.iframes[l._key()].send(hc,{type:hc},E=>{var w;const M=null===(w=E?.[0])||void 0===w?void 0:w[hc];void 0!==M&&d(!!M),Ye(l,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(l){const d=l._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Gs(p){return rf.apply(this,arguments)}(l)),this.originValidationPromises[d]}get _shouldInitProactively(){return oe()||Je()||Za()}};class uf{constructor(l){this.factorId=l}_process(l,d,g){switch(d.type){case"enroll":return this._finalizeEnroll(l,d.credential,g);case"signin":return this._finalizeSignIn(l,d.credential);default:return In("unexpected MultiFactorSessionType")}}}class pl extends uf{constructor(l){super("phone"),this.credential=l}static _fromCredential(l){return new pl(l)}_finalizeEnroll(l,d,g){return function ol(p,l){return ue(p,"POST","/v2/accounts/mfaEnrollment:finalize",le(p,l))}(l,{idToken:d,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(l,d){return function fk(p,l){return ue(p,"POST","/v2/accounts/mfaSignIn:finalize",le(p,l))}(l,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let df=(()=>{class p{constructor(){}static assertion(d){return pl._fromCredential(d)}}return p.FACTOR_ID="phone",p})();var fc="@firebase/auth";class Am{constructor(l){this.auth=l,this.internalListeners=new Map}getUid(){var l;return this.assertAuthConfigured(),(null===(l=this.auth.currentUser)||void 0===l?void 0:l.uid)||null}getToken(l){var d=this;return(0,T.A)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(l)}:null})()}addAuthTokenListener(l){if(this.assertAuthConfigured(),this.internalListeners.has(l))return;const d=this.auth.onIdTokenChanged(g=>{l(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(l,d),this.updateProactiveRefresh()}removeAuthTokenListener(l){this.assertAuthConfigured();const d=this.internalListeners.get(l);d&&(this.internalListeners.delete(l),d(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function pa(){return window}function Zu(){return Zu=(0,T.A)(function*(p,l,d){var g;const{BuildInfo:E}=pa();yn(l.sessionId,"AuthEvent did not contain a session ID");const w=yield function q0(p){return pf.apply(this,arguments)}(l.sessionId),M={};return Za()?M.ibi=E.packageName:ca()?M.apn=E.packageName:Ye(p,"operation-not-supported-in-this-environment"),E.displayName&&(M.appDisplayName=E.displayName),M.sessionId=w,Dm(p,d,l.type,void 0,null!==(g=l.eventId)&&void 0!==g?g:void 0,M)}),Zu.apply(this,arguments)}function Rm(){return(Rm=(0,T.A)(function*(p){const{BuildInfo:l}=pa(),d={};Za()?d.iosBundleId=l.packageName:ca()?d.androidPackageName=l.packageName:Ye(p,"operation-not-supported-in-this-environment"),yield vm(p,d)})).apply(this,arguments)}function _l(){return(_l=(0,T.A)(function*(p,l,d){const{cordova:g}=pa();let E=()=>{};try{yield new Promise((w,M)=>{let V=null;function Y(){var Te;w();const rt=null===(Te=g.plugins.browsertab)||void 0===Te?void 0:Te.close;"function"==typeof rt&&rt(),"function"==typeof d?.close&&d.close()}function be(){V||(V=window.setTimeout(()=>{M(kt(p,"redirect-cancelled-by-user"))},2e3))}function Pe(){"visible"===document?.visibilityState&&be()}l.addPassiveListener(Y),document.addEventListener("resume",be,!1),ca()&&document.addEventListener("visibilitychange",Pe,!1),E=()=>{l.removePassiveListener(Y),document.removeEventListener("resume",be,!1),document.removeEventListener("visibilitychange",Pe,!1),V&&window.clearTimeout(V)}})}finally{E()}})).apply(this,arguments)}function pf(){return(pf=(0,T.A)(function*(p){const l=function $D(p){if(yn(/[0-9a-zA-Z]+/.test(p),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(p);const l=new ArrayBuffer(p.length),d=new Uint8Array(l);for(let g=0;g<p.length;g++)d[g]=p.charCodeAt(g);return d}(p),d=yield crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(d)).map(E=>E.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}(0,ee.XA)("authIdTokenMaxAge"),function QO(p){vn=p}({loadJS:p=>new Promise((l,d)=>{const g=document.createElement("script");g.setAttribute("src",p),g.onload=l,g.onerror=E=>{const w=kt("internal-error");w.customData=E,d(w)},g.type="text/javascript",g.charset="UTF-8",function z0(){var p,l;return null!==(l=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==l?l:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function BD(p){(0,Ce._registerComponent)(new He.uA("auth",(l,{options:d})=>{const g=l.getProvider("app").getImmediate(),E=l.getProvider("heartbeat"),w=l.getProvider("app-check-internal"),{apiKey:M,authDomain:V}=g.options;he(M&&!M.includes(":"),"invalid-api-key",{appName:g.name});const Y={apiKey:M,authDomain:V,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ae(p)},be=new Ri(g,E,w,Y);return function it(p,l){const d=l?.persistence||[],g=(Array.isArray(d)?d:[d]).map(q);l?.errorMap&&p._updateErrorMap(l.errorMap),p._initializeWithPersistence(g,l?.popupRedirectResolver)}(be,d),be},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((l,d,g)=>{l.getProvider("auth-internal").initialize()})),(0,Ce._registerComponent)(new He.uA("auth-internal",l=>{const d=Mt(l.getProvider("auth").getImmediate());return new Am(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ce.registerVersion)(fc,"1.10.2",function Sm(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,Ce.registerVersion)(fc,"1.10.2","esm2017")}("Browser");class GD extends ef{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(l=>{this.resolveInitialized=l})}addPassiveListener(l){this.passiveListeners.add(l)}removePassiveListener(l){this.passiveListeners.delete(l)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(l){return this.resolveInitialized(),this.passiveListeners.forEach(d=>d(l)),super.onEvent(l)}initialized(){var l=this;return(0,T.A)(function*(){yield l.initPromise})()}}function Pm(p){return yl.apply(this,arguments)}function yl(){return(yl=(0,T.A)(function*(p){const l=yield mf()._get(_f(p));return l&&(yield mf()._remove(_f(p))),l})).apply(this,arguments)}function zD(){const p=[];for(let d=0;d<20;d++){const g=Math.floor(62*Math.random());p.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(g))}return p.join("")}function mf(){return q(ha)}function _f(p){return qt("authEvent",p.config.apiKey,p.name)}function yf(p){if(!p?.includes("?"))return{};const[l,...d]=p.split("?");return(0,ee.I9)(d.join("?"))}const WD=class td{constructor(){this._redirectPersistence=Fe,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=vt,this._overrideRedirectResult=fm}_initialize(l){var d=this;return(0,T.A)(function*(){const g=l._key();let E=d.eventManagers.get(g);return E||(E=new GD(l),d.eventManagers.set(g,E),d.attachCallbackListeners(l,E)),E})()}_openPopup(l){Ye(l,"operation-not-supported-in-this-environment")}_openRedirect(l,d,g,E){var w=this;return(0,T.A)(function*(){!function Ek(p){var l,d,g,E,w,M,V,Y,be,Pe;const Te=pa();he("function"==typeof(null===(l=Te?.universalLinks)||void 0===l?void 0:l.subscribe),p,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),he(typeof(null===(d=Te?.BuildInfo)||void 0===d?void 0:d.packageName)<"u",p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),he("function"==typeof(null===(w=null===(E=null===(g=Te?.cordova)||void 0===g?void 0:g.plugins)||void 0===E?void 0:E.browsertab)||void 0===w?void 0:w.openUrl),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),he("function"==typeof(null===(Y=null===(V=null===(M=Te?.cordova)||void 0===M?void 0:M.plugins)||void 0===V?void 0:V.browsertab)||void 0===Y?void 0:Y.isAvailable),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),he("function"==typeof(null===(Pe=null===(be=Te?.cordova)||void 0===be?void 0:be.InAppBrowser)||void 0===Pe?void 0:Pe.open),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(l);const M=yield w._initialize(l);yield M.initialized(),M.resetRedirect(),function hm(){lc.clear()}(),yield w._originValidation(l);const V=function gf(p,l,d=null){return{type:l,eventId:d,urlResponse:null,sessionId:zD(),postBody:null,tenantId:p.tenantId,error:kt(p,"no-auth-event")}}(l,g,E);yield function Mm(p,l){return mf()._set(_f(p),l)}(l,V);const Y=yield function W0(p,l,d){return Zu.apply(this,arguments)}(l,V,d),be=yield function ed(p){const{cordova:l}=pa();return new Promise(d=>{l.plugins.browsertab.isAvailable(g=>{let E=null;g?l.plugins.browsertab.openUrl(p):E=l.InAppBrowser.open(p,function Bo(p=(0,ee.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}()?"_blank":"_system","location=yes"),d(E)})})}(Y);return function Nm(p,l,d){return _l.apply(this,arguments)}(l,M,be)})()}_isIframeWebStorageSupported(l,d){throw new Error("Method not implemented.")}_originValidation(l){const d=l._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Xu(p){return Rm.apply(this,arguments)}(l)),this.originValidationPromises[d]}attachCallbackListeners(l,d){const{universalLinks:g,handleOpenURL:E,BuildInfo:w}=pa(),M=setTimeout((0,T.A)(function*(){yield Pm(l),d.onEvent(km())}),500),V=function(){var Pe=(0,T.A)(function*(Te){clearTimeout(M);const rt=yield Pm(l);let Dn=null;rt&&Te?.url&&(Dn=function Om(p,l){var d,g;const E=function Q0(p){const l=yf(p),d=l.link?decodeURIComponent(l.link):void 0,g=yf(d).link,E=l.deep_link_id?decodeURIComponent(l.deep_link_id):void 0;return yf(E).link||E||g||d||p}(l);if(E.includes("/__/auth/callback")){const w=yf(E),M=w.firebaseError?function K0(p){try{return JSON.parse(p)}catch{return null}}(decodeURIComponent(w.firebaseError)):null,V=null===(g=null===(d=M?.code)||void 0===d?void 0:d.split("auth/"))||void 0===g?void 0:g[1],Y=V?kt(V):null;return Y?{type:p.type,eventId:p.eventId,tenantId:p.tenantId,error:Y,urlResponse:null,sessionId:null,postBody:null}:{type:p.type,eventId:p.eventId,tenantId:p.tenantId,sessionId:p.sessionId,urlResponse:E,postBody:null}}return null}(rt,Te.url)),d.onEvent(Dn||km())});return function(rt){return Pe.apply(this,arguments)}}();typeof g<"u"&&"function"==typeof g.subscribe&&g.subscribe(null,V);const Y=E,be=`${w.packageName.toLowerCase()}://`;pa().handleOpenURL=function(){var Pe=(0,T.A)(function*(Te){if(Te.toLowerCase().startsWith(be)&&V({url:Te}),"function"==typeof Y)try{Y(Te)}catch(rt){console.error(rt)}});return function(Te){return Pe.apply(this,arguments)}}()}};function km(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:kt("no-auth-event")}}function nd(){var p;return(null===(p=self?.location)||void 0===p?void 0:p.protocol)||null}function Ef(p=(0,ee.ZQ)()){return!("file:"!==nd()&&"ionic:"!==nd()&&"capacitor:"!==nd()||!p.toLowerCase().match(/iphone|ipad|ipod|android/))}function xm(){try{const p=self.localStorage,l=Pi();if(p)return p.setItem(l,"1"),p.removeItem(l),!function KD(p=(0,ee.ZQ)()){return function J0(){return(0,ee.lT)()&&11===document?.documentMode}()||function ma(p=(0,ee.ZQ)()){return/Edge\/\d+/.test(p)}(p)}()||(0,ee.zW)()}catch{return rd()&&(0,ee.zW)()}return!1}function rd(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function vl(){return(function hn(){return"http:"===nd()||"https:"===nd()}()||(0,ee.sr)()||Ef())&&!function qD(){return(0,ee.lV)()||(0,ee.Ll)()}()&&xm()&&!rd()}function Fm(){return Ef()&&typeof document<"u"}function Lm(){return(Lm=(0,T.A)(function*(){return!!Fm()&&new Promise(p=>{const l=setTimeout(()=>{p(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(l),p(!0)})})})).apply(this,arguments)}const ki={LOCAL:"local",NONE:"none",SESSION:"session"},id=he,Vm="persistence";function Bm(p){return Z0.apply(this,arguments)}function Z0(){return(Z0=(0,T.A)(function*(p){yield p._initializationPromise;const l=Um(),d=qt(Vm,p.config.apiKey,p.name);l&&l.setItem(d,p._getPersistenceType())})).apply(this,arguments)}function Um(){var p;try{return(null===(p=function YD(){return typeof window<"u"?window:null}())||void 0===p?void 0:p.sessionStorage)||null}catch{return null}}const zt=he;class gc{constructor(){this.browserResolver=q($0),this.cordovaResolver=q(WD),this.underlyingResolver=null,this._redirectPersistence=Fe,this._completeRedirectFn=vt,this._overrideRedirectResult=fm}_initialize(l){var d=this;return(0,T.A)(function*(){return yield d.selectUnderlyingResolver(),d.assertedUnderlyingResolver._initialize(l)})()}_openPopup(l,d,g,E){var w=this;return(0,T.A)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._openPopup(l,d,g,E)})()}_openRedirect(l,d,g,E){var w=this;return(0,T.A)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._openRedirect(l,d,g,E)})()}_isIframeWebStorageSupported(l,d){this.assertedUnderlyingResolver._isIframeWebStorageSupported(l,d)}_originValidation(l){return this.assertedUnderlyingResolver._originValidation(l)}get _shouldInitProactively(){return Fm()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return zt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var l=this;return(0,T.A)(function*(){if(l.underlyingResolver)return;const d=yield function QD(){return Lm.apply(this,arguments)}();l.underlyingResolver=d?l.cordovaResolver:l.browserResolver})()}}function eE(p){return p.unwrap()}function tE(p){return jm(p)}function jm(p){const{_tokenResponse:l}=p instanceof ee.g?p.customData:p;if(!l)return null;if(!(p instanceof ee.g)&&"temporaryProof"in l&&"phoneNumber"in l)return qu.credentialFromResult(p);const d=l.providerId;if(!d||"password"===d)return null;let g;switch(d){case"google.com":g=zg;break;case"facebook.com":g=Mh;break;case"github.com":g=Ru;break;case"twitter.com":g=_0;break;default:const{oauthIdToken:E,oauthAccessToken:w,oauthTokenSecret:M,pendingToken:V,nonce:Y}=l;return w||M||E||V?V?d.startsWith("saml.")?tl._create(d,V):Or._fromParams({providerId:d,signInMethod:d,pendingToken:V,idToken:E,accessToken:w}):new vo(d).credential({idToken:E,accessToken:w,rawNonce:Y}):null}return p instanceof ee.g?g.credentialFromError(p):g.credentialFromResult(p)}function xi(p,l){return l.catch(d=>{throw d instanceof ee.g&&function to(p,l){var d;const g=null===(d=l.customData)||void 0===d?void 0:d._tokenResponse;if("auth/multi-factor-auth-required"===l?.code)l.resolver=new Ik(p,function xr(p,l){var d;const g=(0,ee.Ku)(p),E=l;return he(l.customData.operationType,g,"argument-error"),he(null===(d=E.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,g,"argument-error"),kr._fromError(g,E)}(p,l));else if(g){const E=jm(l),w=l;E&&(w.credential=E,w.tenantId=g.tenantId||void 0,w.email=g.email||void 0,w.phoneNumber=g.phoneNumber||void 0)}}(p,d),d}).then(d=>{const E=d.user;return{operationType:d.operationType,credential:tE(d),additionalUserInfo:w0(d),user:_s.getOrCreate(E)}})}function zo(p,l){return mc.apply(this,arguments)}function mc(){return(mc=(0,T.A)(function*(p,l){const d=yield l;return{verificationId:d.verificationId,confirm:g=>xi(p,d.confirm(g))}})).apply(this,arguments)}class Ik{constructor(l,d){this.resolver=d,this.auth=function bk(p){return p.wrapped()}(l)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(l){return xi(eE(this.auth),this.resolver.resolveSignIn(l))}}class _s{constructor(l){this._delegate=l,this.multiFactor=function Wh(p){const l=(0,ee.Ku)(p);return Bs.has(l)||Bs.set(l,ot._fromUser(l)),Bs.get(l)}(l)}static getOrCreate(l){return _s.USER_MAP.has(l)||_s.USER_MAP.set(l,new _s(l)),_s.USER_MAP.get(l)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(l){return this._delegate.getIdTokenResult(l)}getIdToken(l){return this._delegate.getIdToken(l)}linkAndRetrieveDataWithCredential(l){return this.linkWithCredential(l)}linkWithCredential(l){var d=this;return(0,T.A)(function*(){return xi(d.auth,Kg(d._delegate,l))})()}linkWithPhoneNumber(l,d){var g=this;return(0,T.A)(function*(){return zo(g.auth,function DD(p,l,d){return Gu.apply(this,arguments)}(g._delegate,l,d))})()}linkWithPopup(l){var d=this;return(0,T.A)(function*(){return xi(d.auth,function ul(p,l,d){return dl.apply(this,arguments)}(d._delegate,l,gc))})()}linkWithRedirect(l){var d=this;return(0,T.A)(function*(){return yield Bm(Mt(d.auth)),function MD(p,l,d){return function J(p,l,d){return ct.apply(this,arguments)}(p,l,d)}(d._delegate,l,gc)})()}reauthenticateAndRetrieveDataWithCredential(l){return this.reauthenticateWithCredential(l)}reauthenticateWithCredential(l){var d=this;return(0,T.A)(function*(){return xi(d.auth,Mi(d._delegate,l))})()}reauthenticateWithPhoneNumber(l,d){return zo(this.auth,function CD(p,l,d){return Kt.apply(this,arguments)}(this._delegate,l,d))}reauthenticateWithPopup(l){return xi(this.auth,function Ku(p,l,d){return Qu.apply(this,arguments)}(this._delegate,l,gc))}reauthenticateWithRedirect(l){var d=this;return(0,T.A)(function*(){return yield Bm(Mt(d.auth)),function RD(p,l,d){return function ND(p,l,d){return mm.apply(this,arguments)}(p,l,d)}(d._delegate,l,gc)})()}sendEmailVerification(l){return function cr(p,l){return Ls.apply(this,arguments)}(this._delegate,l)}unlink(l){var d=this;return(0,T.A)(function*(){return yield function lD(p,l){return hs.apply(this,arguments)}(d._delegate,l),d})()}updateEmail(l){return function hD(p,l){const d=(0,ee.Ku)(p);return(0,Ce._isFirebaseServerApp)(d.auth.app)?Promise.reject(je(d.auth)):T0(d,l,null)}(this._delegate,l)}updatePassword(l){return function fD(p,l){return T0((0,ee.Ku)(p),null,l)}(this._delegate,l)}updatePhoneNumber(l){return function Vt(p,l){return Wu.apply(this,arguments)}(this._delegate,l)}updateProfile(l){return function Lu(p,l){return ua.apply(this,arguments)}(this._delegate,l)}verifyBeforeUpdateEmail(l,d){return function tm(p,l,d){return nm.apply(this,arguments)}(this._delegate,l,d)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}_s.USER_MAP=new WeakMap;const _c=he;let ys=(()=>{class p{constructor(d,g){if(this.app=d,g.isInitialized())return this._delegate=g.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:E}=d.options;_c(E,"invalid-api-key",{appName:d.name}),_c(E,"invalid-api-key",{appName:d.name});const w=typeof window<"u"?gc:void 0;this._delegate=g.initialize({options:{persistence:ZD(E,d.name),popupRedirectResolver:w}}),this._delegate._updateErrorMap(dr),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?_s.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(d){this._delegate.languageCode=d}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(d){this._delegate.tenantId=d}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(d,g){!function nD(p,l,d){const g=Mt(p);he(/^https?:\/\//.test(l),g,"invalid-emulator-scheme");const E=!!d?.disableWarnings,w=rD(l),{host:M,port:V}=function XO(p){const l=rD(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(l.length));if(!d)return{host:"",port:null};const g=d[2].split("@").pop()||"",E=/^(\[[^\]]+\])(:|$)/.exec(g);if(E){const w=E[1];return{host:w,port:iD(g.substr(w.length+1))}}{const[w,M]=g.split(":");return{host:w,port:iD(M)}}}(l),Y=null===V?"":`:${V}`,be={url:`${w}//${M}${Y}/`},Pe=Object.freeze({host:M,port:V,protocol:w.replace(":",""),options:Object.freeze({disableWarnings:E})});if(!g._canInitEmulator)return he(g.config.emulator&&g.emulatorConfig,g,"emulator-config-failed"),void he((0,ee.bD)(be,g.config.emulator)&&(0,ee.bD)(Pe,g.emulatorConfig),g,"emulator-config-failed");g.config.emulator=be,g.emulatorConfig=Pe,g.settings.appVerificationDisabledForTesting=!0,E||function ek(){function p(){const l=document.createElement("p"),d=l.style;l.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",l.classList.add("firebase-emulator-warning"),document.body.appendChild(l)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}(),(0,ee.zJ)(M)&&(0,ee.gE)(`${w}//${M}${Y}`)}(this._delegate,d,g)}applyActionCode(d){return function sk(p,l){return Yg.apply(this,arguments)}(this._delegate,d)}checkActionCode(d){return Vh(this._delegate,d)}confirmPasswordReset(d,g){return function ic(p,l,d){return fs.apply(this,arguments)}(this._delegate,d,g)}createUserWithEmailAndPassword(d,g){var E=this;return(0,T.A)(function*(){return xi(E._delegate,function Jg(p,l,d){return Zg.apply(this,arguments)}(E._delegate,d,g))})()}fetchProvidersForEmail(d){return this.fetchSignInMethodsForEmail(d)}fetchSignInMethodsForEmail(d){return function em(p,l){return rl.apply(this,arguments)}(this._delegate,d)}isSignInWithEmailLink(d){return function oc(p,l){const d=el.parseLink(l);return"EMAIL_SIGNIN"===d?.operation}(0,d)}getRedirectResult(){var d=this;return(0,T.A)(function*(){_c(vl(),d._delegate,"operation-not-supported-in-this-environment");const g=yield function ni(p,l){return Fr.apply(this,arguments)}(d._delegate,gc);return g?xi(d._delegate,Promise.resolve(g)):{credential:null,user:null}})()}addFrameworkForLogging(d){!function Y0(p,l){Mt(p)._logFramework(l)}(this._delegate,d)}onAuthStateChanged(d,g,E){const{next:w,error:M,complete:V}=bf(d,g,E);return this._delegate.onAuthStateChanged(w,M,V)}onIdTokenChanged(d,g,E){const{next:w,error:M,complete:V}=bf(d,g,E);return this._delegate.onIdTokenChanged(w,M,V)}sendSignInLinkToEmail(d,g){return function I0(p,l,d){return jh.apply(this,arguments)}(this._delegate,d,g)}sendPasswordResetEmail(d,g){return function Gr(p,l,d){return fi.apply(this,arguments)}(this._delegate,d,g||void 0)}setPersistence(d){var g=this;return(0,T.A)(function*(){let E;switch(function JD(p,l){id(Object.values(ki).includes(l),p,"invalid-persistence-type"),(0,ee.lV)()?id(l!==ki.SESSION,p,"unsupported-persistence-type"):(0,ee.Ll)()?id(l===ki.NONE,p,"unsupported-persistence-type"):rd()?id(l===ki.NONE||l===ki.LOCAL&&(0,ee.zW)(),p,"unsupported-persistence-type"):id(l===ki.NONE||xm(),p,"unsupported-persistence-type")}(g._delegate,d),d){case ki.SESSION:E=Fe;break;case ki.LOCAL:E=(yield q($u)._isAvailable())?$u:ha;break;case ki.NONE:E=Se;break;default:return Ye("argument-error",{appName:g._delegate.name})}return g._delegate.setPersistence(E)})()}signInAndRetrieveDataWithCredential(d){return this.signInWithCredential(d)}signInAnonymously(){return xi(this._delegate,function Wg(p){return ec.apply(this,arguments)}(this._delegate))}signInWithCredential(d){return xi(this._delegate,nc(this._delegate,d))}signInWithCustomToken(d){return xi(this._delegate,function Ho(p,l){return Lt.apply(this,arguments)}(this._delegate,d))}signInWithEmailAndPassword(d,g){return xi(this._delegate,function Xg(p,l,d){return(0,Ce._isFirebaseServerApp)(p.app)?Promise.reject(je(p)):nc((0,ee.Ku)(p),Nh.credential(l,d)).catch(function(){var g=(0,T.A)(function*(E){throw"auth/password-does-not-meet-requirements"===E.code&&hi(p),E});return function(E){return g.apply(this,arguments)}}())}(this._delegate,d,g))}signInWithEmailLink(d,g){return xi(this._delegate,function uD(p,l,d){return Fu.apply(this,arguments)}(this._delegate,d,g))}signInWithPhoneNumber(d,g){return zo(this._delegate,function P0(p,l,d){return Yh.apply(this,arguments)}(this._delegate,d,g))}signInWithPopup(d){var g=this;return(0,T.A)(function*(){return _c(vl(),g._delegate,"operation-not-supported-in-this-environment"),xi(g._delegate,function um(p,l,d){return Zh.apply(this,arguments)}(g._delegate,d,gc))})()}signInWithRedirect(d){var g=this;return(0,T.A)(function*(){return _c(vl(),g._delegate,"operation-not-supported-in-this-environment"),yield Bm(g._delegate),function pm(p,l,d){return function uc(p,l,d){return gm.apply(this,arguments)}(p,l,d)}(g._delegate,d,gc)})()}updateCurrentUser(d){return this._delegate.updateCurrentUser(d)}verifyPasswordResetCode(d){return function Uh(p,l){return b0.apply(this,arguments)}(this._delegate,d)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return p.Persistence=ki,p})();function bf(p,l,d){let g=p;"function"!=typeof p&&({next:g,error:l,complete:d}=p);const E=g;return{next:M=>E(M&&_s.getOrCreate(M)),error:l,complete:d}}function ZD(p,l){const d=function X0(p,l){const d=Um();if(!d)return[];const g=qt(Vm,p,l);switch(d.getItem(g)){case ki.NONE:return[Se];case ki.LOCAL:return[$u,Fe];case ki.SESSION:return[Fe];default:return[]}}(p,l);if(typeof self<"u"&&!d.includes($u)&&d.push($u),typeof window<"u")for(const g of[ha,Fe])d.includes(g)||d.push(g);return d.includes(Se)||d.push(Se),d}class Xe{static credential(l,d){return qu.credential(l,d)}constructor(){this.providerId="phone",this._delegate=new qu(eE(st.A.auth()))}verifyPhoneNumber(l,d){return this._delegate.verifyPhoneNumber(l,d)}unwrap(){return this._delegate}}Xe.PHONE_SIGN_IN_METHOD=qu.PHONE_SIGN_IN_METHOD,Xe.PROVIDER_ID=qu.PROVIDER_ID;const od=he;class nE{constructor(l,d,g=st.A.app()){var E;od(null===(E=g.options)||void 0===E?void 0:E.apiKey,"invalid-api-key",{appName:g.name}),this._delegate=new M0(g.auth(),l,d),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Tk(p){p.INTERNAL.registerComponent(new He.uA("auth-compat",l=>{const d=l.getProvider("app-compat").getImmediate(),g=l.getProvider("auth");return new ys(d,g)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Nh,FacebookAuthProvider:Mh,GithubAuthProvider:Ru,GoogleAuthProvider:zg,OAuthProvider:vo,SAMLAuthProvider:Nu,PhoneAuthProvider:Xe,PhoneMultiFactorGenerator:df,RecaptchaVerifier:nE,TwitterAuthProvider:_0,Auth:ys,AuthCredential:fe,Error:ee.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),p.registerVersion("@firebase/auth-compat","0.5.22")}(st.A)}},mo=>{var Ir=T=>mo(mo.s=T);Ir(532),Ir(665)}]);