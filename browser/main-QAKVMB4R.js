import{A as RI,B as xI,C as oo,D as mn,a as H,b as he,c as ev,d as N,e as bI,f as If,g as DI,h as CI,i as TI,j as tv,k as nv,l as II,m as Eu,n as rv,o as Sf,p as SI,q as AI,r as Af,s as rt,t as iv,u as MI,v as us,w as Pr,x as Mf,y as bu,z as NI}from"./chunk-DRHOSL6N.js";function cv(n,e){return Object.is(n,e)}var At=null,Nf=!1,lv=1,$n=Symbol("SIGNAL");function be(n){let e=At;return At=n,e}function uv(){return At}var Cu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Tu(n){if(Nf)throw new Error("");if(At===null)return;At.consumerOnSignalRead(n);let e=At.nextProducerIndex++;if(Pf(At),e<At.producerNode.length&&At.producerNode[e]!==n&&Du(At)){let t=At.producerNode[e];Of(t,At.producerIndexOfThis[e])}At.producerNode[e]!==n&&(At.producerNode[e]=n,At.producerIndexOfThis[e]=Du(At)?PI(n,At,e):0),At.producerLastReadVersion[e]=n.version}function OI(){lv++}function dv(n){if(!(Du(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===lv)){if(!n.producerMustRecompute(n)&&!gv(n)){av(n);return}n.producerRecomputeValue(n),av(n)}}function hv(n){if(n.liveConsumerNode===void 0)return;let e=Nf;Nf=!0;try{for(let t of n.liveConsumerNode)t.dirty||kV(t)}finally{Nf=e}}function fv(){return At?.consumerAllowSignalWrites!==!1}function kV(n){n.dirty=!0,hv(n),n.consumerMarkedDirty?.(n)}function av(n){n.dirty=!1,n.lastCleanEpoch=lv}function xf(n){return n&&(n.nextProducerIndex=0),be(n)}function pv(n,e){if(be(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Du(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Of(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function gv(n){Pf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(dv(t),r!==t.version))return!0}return!1}function mv(n){if(Pf(n),Du(n))for(let e=0;e<n.producerNode.length;e++)Of(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function PI(n,e,t){if(kI(n),n.liveConsumerNode.length===0&&FI(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=PI(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Of(n,e){if(kI(n),n.liveConsumerNode.length===1&&FI(n))for(let r=0;r<n.producerNode.length;r++)Of(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Pf(i),i.producerIndexOfThis[r]=e}}function Du(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Pf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function kI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function FI(n){return n.producerNode!==void 0}function _v(n,e){let t=Object.create(FV);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(dv(t),Tu(t),t.value===Rf)throw t.error;return t.value};return r[$n]=t,r}var ov=Symbol("UNSET"),sv=Symbol("COMPUTING"),Rf=Symbol("ERRORED"),FV=he(H({},Cu),{value:ov,dirty:!0,error:null,equal:cv,kind:"computed",producerMustRecompute(n){return n.value===ov||n.value===sv},producerRecomputeValue(n){if(n.value===sv)throw new Error("Detected cycle in computations.");let e=n.value;n.value=sv;let t=xf(n),r,i=!1;try{r=n.computation(),be(null),i=e!==ov&&e!==Rf&&r!==Rf&&n.equal(e,r)}catch(o){r=Rf,n.error=o}finally{pv(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function LV(){throw new Error}var LI=LV;function VI(n){LI(n)}function yv(n){LI=n}var VV=null;function vv(n,e){let t=Object.create(kf);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(Tu(t),t.value);return r[$n]=t,r}function Iu(n,e){fv()||VI(n),n.equal(n.value,e)||(n.value=e,BV(n))}function wv(n,e){fv()||VI(n),Iu(n,e(n.value))}var kf=he(H({},Cu),{equal:cv,value:void 0,kind:"signal"});function BV(n){n.version++,OI(),hv(n),VV?.()}function Ev(n){let e=be(null);try{return n()}finally{be(e)}}var bv;function Su(){return bv}function _i(n){let e=bv;return bv=n,e}var Ff=Symbol("NotFound");function te(n){return typeof n=="function"}function $a(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Lf=$a(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ds(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var at=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(o){e=o instanceof Lf?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{BI(o)}catch(s){e=e??[],s instanceof Lf?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Lf(e)}}add(e){var t;if(e&&e!==this)if(this.closed)BI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ds(t,e)}remove(e){let{_finalizers:t}=this;t&&ds(t,e),e instanceof n&&e._removeParent(this)}};at.EMPTY=(()=>{let n=new at;return n.closed=!0,n})();var Dv=at.EMPTY;function Vf(n){return n instanceof at||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function BI(n){te(n)?n():n.unsubscribe()}var ar={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ga={setTimeout(n,e,...t){let{delegate:r}=Ga;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ga;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Bf(n){Ga.setTimeout(()=>{let{onUnhandledError:e}=ar;if(e)e(n);else throw n})}function yi(){}var jI=Cv("C",void 0,void 0);function HI(n){return Cv("E",void 0,n)}function UI(n){return Cv("N",n,void 0)}function Cv(n,e,t){return{kind:n,value:e,error:t}}var hs=null;function za(n){if(ar.useDeprecatedSynchronousErrorHandling){let e=!hs;if(e&&(hs={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=hs;if(hs=null,t)throw r}}else n()}function $I(n){ar.useDeprecatedSynchronousErrorHandling&&hs&&(hs.errorThrown=!0,hs.error=n)}var fs=class extends at{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Vf(e)&&e.add(this)):this.destination=zV}static create(e,t,r){return new cr(e,t,r)}next(e){this.isStopped?Iv(UI(e),this):this._next(e)}error(e){this.isStopped?Iv(HI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Iv(jI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},$V=Function.prototype.bind;function Tv(n,e){return $V.call(n,e)}var Sv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){jf(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){jf(r)}else jf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){jf(t)}}},cr=class extends fs{constructor(e,t,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&ar.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Tv(e.next,o),error:e.error&&Tv(e.error,o),complete:e.complete&&Tv(e.complete,o)}):i=e}this.destination=new Sv(i)}};function jf(n){ar.useDeprecatedSynchronousErrorHandling?$I(n):Bf(n)}function GV(n){throw n}function Iv(n,e){let{onStoppedNotification:t}=ar;t&&Ga.setTimeout(()=>t(n,e))}var zV={closed:!0,next:yi,error:GV,complete:yi};var qa=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ut(n){return n}function Av(...n){return Mv(n)}function Mv(n){return n.length===0?Ut:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ne=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=WV(t)?t:new cr(t,r,i);return za(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=GI(r),new r((i,o)=>{let s=new cr({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[qa](){return this}pipe(...t){return Mv(t)(this)}toPromise(t){return t=GI(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function GI(n){var e;return(e=n??ar.Promise)!==null&&e!==void 0?e:Promise}function qV(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}function WV(n){return n&&n instanceof fs||qV(n)&&Vf(n)}function Nv(n){return te(n?.lift)}function le(n){return e=>{if(Nv(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function re(n,e,t,r,i){return new Rv(n,e,t,r,i)}var Rv=class extends fs{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Wa(){return le((n,e)=>{let t=null;n._refCount++;let r=re(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Ka=class extends ne{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Nv(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new at;let t=this.getSubject();e.add(this.source.subscribe(re(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=at.EMPTY)}return e}refCount(){return Wa()(this)}};var zI=$a(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var we=(()=>{class n extends ne{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Hf(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new zI}next(t){za(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){za(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){za(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Dv:(this.currentObservers=null,o.push(t),new at(()=>{this.currentObservers=null,ds(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ne;return t.source=this,t}}return n.create=(e,t)=>new Hf(e,t),n})(),Hf=class extends we{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Dv}};var Xe=class extends we{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Au={now(){return(Au.delegate||Date).now()},delegate:void 0};var Mu=class extends we{constructor(e=1/0,t=1/0,r=Au){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Uf=class extends at{constructor(e,t){super()}schedule(e,t=0){return this}};var Nu={setInterval(n,e,...t){let{delegate:r}=Nu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Nu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Qa=class extends Uf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Nu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Nu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ds(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ya=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ya.now=Au.now;var Za=class extends Ya{constructor(e,t=Ya.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var so=new Za(Qa),xv=so;var $f=class extends Qa{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Gf=class extends Za{};var Ov=new Gf($f);var yt=new ne(n=>n.complete());function zf(n){return n&&te(n.schedule)}function Pv(n){return n[n.length-1]}function ao(n){return te(Pv(n))?n.pop():void 0}function kr(n){return zf(Pv(n))?n.pop():void 0}function qI(n,e){return typeof Pv(n)=="number"?n.pop():e}var Ja=n=>n&&typeof n.length=="number"&&typeof n!="function";function qf(n){return te(n?.then)}function Wf(n){return te(n[qa])}function Kf(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function Qf(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function KV(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Yf=KV();function Zf(n){return te(n?.[Yf])}function Jf(n){return DI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield If(t.read());if(i)return yield If(void 0);yield yield If(r)}}finally{t.releaseLock()}})}function Xf(n){return te(n?.getReader)}function De(n){if(n instanceof ne)return n;if(n!=null){if(Wf(n))return QV(n);if(Ja(n))return YV(n);if(qf(n))return ZV(n);if(Kf(n))return WI(n);if(Zf(n))return JV(n);if(Xf(n))return XV(n)}throw Qf(n)}function QV(n){return new ne(e=>{let t=n[qa]();if(te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function YV(n){return new ne(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function ZV(n){return new ne(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Bf)})}function JV(n){return new ne(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function WI(n){return new ne(e=>{e2(n,e).catch(t=>e.error(t))})}function XV(n){return WI(Jf(n))}function e2(n,e){var t,r,i,o;return bI(this,void 0,void 0,function*(){try{for(t=CI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function _n(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Fr(n,e=0){return le((t,r)=>{t.subscribe(re(r,i=>_n(r,n,()=>r.next(i),e),()=>_n(r,n,()=>r.complete(),e),i=>_n(r,n,()=>r.error(i),e)))})}function vi(n,e=0){return le((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function KI(n,e){return De(n).pipe(vi(e),Fr(e))}function QI(n,e){return De(n).pipe(vi(e),Fr(e))}function YI(n,e){return new ne(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function ZI(n,e){return new ne(t=>{let r;return _n(t,e,()=>{r=n[Yf](),_n(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function ep(n,e){if(!n)throw new Error("Iterable cannot be null");return new ne(t=>{_n(t,e,()=>{let r=n[Symbol.asyncIterator]();_n(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function JI(n,e){return ep(Jf(n),e)}function XI(n,e){if(n!=null){if(Wf(n))return KI(n,e);if(Ja(n))return YI(n,e);if(qf(n))return QI(n,e);if(Kf(n))return ep(n,e);if(Zf(n))return ZI(n,e);if(Xf(n))return JI(n,e)}throw Qf(n)}function Ce(n,e){return e?XI(n,e):De(n)}function Q(...n){let e=kr(n);return Ce(n,e)}function Xa(n,e){let t=te(n)?n:()=>n,r=i=>i.error(t());return new ne(e?i=>e.schedule(r,0,i):r)}function wi(n){return!!n&&(n instanceof ne||te(n.lift)&&te(n.subscribe))}var lr=$a(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ru(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new cr({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new lr)}});n.subscribe(o)})}function eS(n){return n instanceof Date&&!isNaN(n)}function Y(n,e){return le((t,r)=>{let i=0;t.subscribe(re(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:t2}=Array;function n2(n,e){return t2(e)?n(...e):n(e)}function ec(n){return Y(e=>n2(n,e))}var{isArray:r2}=Array,{getPrototypeOf:i2,prototype:o2,keys:s2}=Object;function tp(n){if(n.length===1){let e=n[0];if(r2(e))return{args:e,keys:null};if(a2(e)){let t=s2(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function a2(n){return n&&typeof n=="object"&&i2(n)===o2}function np(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function tc(...n){let e=kr(n),t=ao(n),{args:r,keys:i}=tp(n);if(r.length===0)return Ce([],e);let o=new ne(c2(r,e,i?s=>np(i,s):Ut));return t?o.pipe(ec(t)):o}function c2(n,e,t=Ut){return r=>{tS(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)tS(e,()=>{let u=Ce(n[c],e),d=!1;u.subscribe(re(r,f=>{o[c]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function tS(n,e,t){n?_n(t,n,e):e()}function nS(n,e,t,r,i,o,s,a){let c=[],u=0,d=0,f=!1,g=()=>{f&&!c.length&&!u&&e.complete()},m=b=>u<r?v(b):c.push(b),v=b=>{o&&e.next(b),u++;let T=!1;De(t(b,d++)).subscribe(re(e,F=>{i?.(F),o?m(F):e.next(F)},()=>{T=!0},void 0,()=>{if(T)try{for(u--;c.length&&u<r;){let F=c.shift();s?_n(e,s,()=>v(F)):v(F)}g()}catch(F){e.error(F)}}))};return n.subscribe(re(e,m,()=>{f=!0,g()})),()=>{a?.()}}function He(n,e,t=1/0){return te(e)?He((r,i)=>Y((o,s)=>e(r,o,i,s))(De(n(r,i))),t):(typeof e=="number"&&(t=e),le((r,i)=>nS(r,i,n,t)))}function co(n=1/0){return He(Ut,n)}function rS(){return co(1)}function Rn(...n){return rS()(Ce(n,kr(n)))}function ps(n){return new ne(e=>{De(n()).subscribe(e)})}function xu(...n){let e=ao(n),{args:t,keys:r}=tp(n),i=new ne(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let d=0;d<s;d++){let f=!1;De(t[d]).subscribe(re(o,g=>{f||(f=!0,u--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(u||o.next(r?np(r,a):a),o.complete())}))}});return e?i.pipe(ec(e)):i}var l2=["addListener","removeListener"],u2=["addEventListener","removeEventListener"],d2=["on","off"];function sn(n,e,t,r){if(te(t)&&(r=t,t=void 0),r)return sn(n,e,t).pipe(ec(r));let[i,o]=p2(n)?u2.map(s=>a=>n[s](e,a,t)):h2(n)?l2.map(iS(n,e)):f2(n)?d2.map(iS(n,e)):[];if(!i&&Ja(n))return He(s=>sn(s,e,t))(De(n));if(!i)throw new TypeError("Invalid event target");return new ne(s=>{let a=(...c)=>s.next(1<c.length?c:c[0]);return i(a),()=>o(a)})}function iS(n,e){return t=>r=>n[t](e,r)}function h2(n){return te(n.addListener)&&te(n.removeListener)}function f2(n){return te(n.on)&&te(n.off)}function p2(n){return te(n.addEventListener)&&te(n.removeEventListener)}function Ou(n=0,e,t=xv){let r=-1;return e!=null&&(zf(e)?t=e:r=e),new ne(i=>{let o=eS(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function rp(...n){let e=kr(n),t=qI(n,1/0),r=n;return r.length?r.length===1?De(r[0]):co(t)(Ce(r,e)):yt}var{isArray:g2}=Array;function ip(n){return n.length===1&&g2(n[0])?n[0]:n}function Ue(n,e){return le((t,r)=>{let i=0;t.subscribe(re(r,o=>n.call(e,o,i++)&&r.next(o)))})}function op(...n){return n=ip(n),n.length===1?De(n[0]):new ne(m2(n))}function m2(n){return e=>{let t=[];for(let r=0;t&&!e.closed&&r<n.length;r++)t.push(De(n[r]).subscribe(re(e,i=>{if(t){for(let o=0;o<t.length;o++)o!==r&&t[o].unsubscribe();t=null}e.next(i)})))}}function Pu(...n){let e=ao(n),t=ip(n);return t.length?new ne(r=>{let i=t.map(()=>[]),o=t.map(()=>!1);r.add(()=>{i=o=null});for(let s=0;!r.closed&&s<t.length;s++)De(t[s]).subscribe(re(r,a=>{if(i[s].push(a),i.every(c=>c.length)){let c=i.map(u=>u.shift());r.next(e?e(...c):c),i.some((u,d)=>!u.length&&o[d])&&r.complete()}},()=>{o[s]=!0,!i[s].length&&r.complete()}));return()=>{i=o=null}}):yt}function Ei(n){return le((e,t)=>{let r=null,i=!1,o;r=e.subscribe(re(t,void 0,void 0,s=>{o=De(n(s,Ei(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function oS(n,e,t,r,i){return(o,s)=>{let a=t,c=e,u=0;o.subscribe(re(s,d=>{let f=u++;c=a?n(c,d,f):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Gn(n,e){return te(e)?He(n,e,1):He(n,1)}function lo(n){return le((e,t)=>{let r=!1;e.subscribe(re(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function vt(n){return n<=0?()=>yt:le((e,t)=>{let r=0;e.subscribe(re(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function sS(){return le((n,e)=>{n.subscribe(re(e,yi))})}function aS(n){return Y(()=>n)}function kv(n,e){return e?t=>Rn(e.pipe(vt(1),sS()),t.pipe(kv(n))):He((t,r)=>De(n(t,r)).pipe(vt(1),aS(t)))}function Fv(n,e=so){let t=Ou(n,e);return kv(()=>t)}function sp(n,e=Ut){return n=n??_2,le((t,r)=>{let i,o=!0;t.subscribe(re(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function _2(n,e){return n===e}function ap(n=y2){return le((e,t)=>{let r=!1;e.subscribe(re(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function y2(){return new lr}function Lv(...n){return e=>Rn(e,Q(...n))}function bi(n){return le((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function ur(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ue((i,o)=>n(i,o,r)):Ut,vt(1),t?lo(e):ap(()=>new lr))}function nc(n){return n<=0?()=>yt:le((e,t)=>{let r=[];e.subscribe(re(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Vv(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ue((i,o)=>n(i,o,r)):Ut,nc(1),t?lo(e):ap(()=>new lr))}function ku(){return le((n,e)=>{let t,r=!1;n.subscribe(re(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function gs(n,e){return le(oS(n,e,arguments.length>=2,!0))}function cS(n={}){let{connector:e=()=>new we,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,u=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},m=()=>{g(),s=c=void 0,d=f=!1},v=()=>{let b=s;m(),b?.unsubscribe()};return le((b,T)=>{u++,!f&&!d&&g();let F=c=c??e();T.add(()=>{u--,u===0&&!f&&!d&&(a=Bv(v,i))}),F.subscribe(T),!s&&u>0&&(s=new cr({next:$=>F.next($),error:$=>{f=!0,g(),a=Bv(m,t,$),F.error($)},complete:()=>{d=!0,g(),a=Bv(m,r),F.complete()}}),De(b).subscribe(s))})(o)}}function Bv(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new cr({next:()=>{r.unsubscribe(),n()}});return De(e(...t)).subscribe(r)}function ms(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,cS({connector:()=>new Mu(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function uo(...n){let e=kr(n);return le((t,r)=>{(e?Rn(n,t,e):Rn(n,t)).subscribe(r)})}function Re(n,e){return le((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(re(r,c=>{i?.unsubscribe();let u=0,d=o++;De(n(c,d)).subscribe(i=re(r,f=>r.next(e?e(c,f,d,u++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function cp(n,e){return te(e)?Re(()=>n,e):Re(()=>n)}function Mt(n){return le((e,t)=>{De(n).subscribe(re(t,()=>t.complete(),yi)),!t.closed&&e.subscribe(t)})}function dt(n,e,t){let r=te(n)||e||t?{next:n,error:e,complete:t}:n;return r?le((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(re(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Ut}function Fu(...n){let e=ao(n);return le((t,r)=>{let i=n.length,o=new Array(i),s=n.map(()=>!1),a=!1;for(let c=0;c<i;c++)De(n[c]).subscribe(re(r,u=>{o[c]=u,!a&&!s[c]&&(s[c]=!0,(a=s.every(Ut))&&(s=null))},yi));t.subscribe(re(r,c=>{if(a){let u=[c,...o];r.next(e?e(...u):u)}}))})}var WS="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Z=class extends Error{code;constructor(e,t){super(KS(e,t)),this.code=e}};function v2(n){return`NG0${Math.abs(n)}`}function KS(n,e){return`${v2(n)}${e?": "+e:""}`}var QS=Symbol("InputSignalNode#UNSET"),w2=he(H({},kf),{transformFn:void 0,applyValueToInputSignal(n,e){Iu(n,e)}});function YS(n,e){let t=Object.create(w2);t.value=n,t.transformFn=e?.transform;function r(){if(Tu(t),t.value===QS){let i=null;throw new Z(-950,i)}return t.value}return r[$n]=t,r}function Qu(n){return{toString:n}.toString()}var lp="__parameters__";function E2(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function ZS(n,e,t){return Qu(()=>{let r=E2(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,d){let f=c.hasOwnProperty(lp)?c[lp]:Object.defineProperty(c,lp,{value:[]})[lp];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var xn=globalThis;function $e(n){for(let e in n)if(n[e]===$e)return e;throw Error("Could not find renamed property on target object.")}function b2(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function wn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(wn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function e0(n,e){return n?e?`${n} ${e}`:n:e||""}var D2=$e({__forward_ref__:$e});function xs(n){return n.__forward_ref__=xs,n.toString=function(){return wn(this())},n}function an(n){return JS(n)?n():n}function JS(n){return typeof n=="function"&&n.hasOwnProperty(D2)&&n.__forward_ref__===xs}function V(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ie(n){return{providers:n.providers||[],imports:n.imports||[]}}function Gp(n){return lS(n,eA)||lS(n,tA)}function XS(n){return Gp(n)!==null}function lS(n,e){return n.hasOwnProperty(e)?n[e]:null}function C2(n){let e=n&&(n[eA]||n[tA]);return e||null}function uS(n){return n&&(n.hasOwnProperty(dS)||n.hasOwnProperty(T2))?n[dS]:null}var eA=$e({\u0275prov:$e}),dS=$e({\u0275inj:$e}),tA=$e({ngInjectableDef:$e}),T2=$e({ngInjectorDef:$e}),j=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=V({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function nA(n){return n&&!!n.\u0275providers}var I2=$e({\u0275cmp:$e}),S2=$e({\u0275dir:$e}),A2=$e({\u0275pipe:$e}),M2=$e({\u0275mod:$e}),_p=$e({\u0275fac:$e}),ju=$e({__NG_ELEMENT_ID__:$e}),hS=$e({__NG_ENV_ID__:$e});function zp(n){return typeof n=="string"?n:n==null?"":String(n)}function N2(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():zp(n)}function rA(n,e){throw new Z(-200,n)}function Y0(n,e){throw new Z(-201,!1)}var _e=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(_e||{}),t0;function iA(){return t0}function yn(n){let e=t0;return t0=n,e}function oA(n,e,t){let r=Gp(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&_e.Optional)return null;if(e!==void 0)return e;Y0(n,"Injector")}var R2={},ys=R2,n0="__NG_DI_FLAG__",yp=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?Ff:ys,r)}},vp="ngTempTokenPath",x2="ngTokenPath",O2=/\n/gm,P2="\u0275",fS="__source";function k2(n,e=_e.Default){if(Su()===void 0)throw new Z(-203,!1);if(Su()===null)return oA(n,void 0,e);{let t=Su(),r;return t instanceof yp?r=t.injector:r=t,r.get(n,e&_e.Optional?null:void 0,e)}}function k(n,e=_e.Default){return(iA()||k2)(an(n),e)}function R(n,e=_e.Default){return k(n,qp(e))}function qp(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function r0(n){let e=[];for(let t=0;t<n.length;t++){let r=an(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Z(900,!1);let i,o=_e.Default;for(let s=0;s<r.length;s++){let a=r[s],c=F2(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(k(i,o))}else e.push(k(r))}return e}function sA(n,e){return n[n0]=e,n.prototype[n0]=e,n}function F2(n){return n[n0]}function L2(n,e,t,r){let i=n[vp];throw e[fS]&&i.unshift(e[fS]),n.message=V2(`
`+n.message,i,t,r),n[x2]=i,n[vp]=null,n}function V2(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==P2?n.slice(2):n;let i=wn(e);if(Array.isArray(e))i=e.map(wn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):wn(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(O2,`
  `)}`}var Z0=sA(ZS("Optional"),8);var B2=sA(ZS("SkipSelf"),4);function ws(n,e){let t=n.hasOwnProperty(_p);return t?n[_p]:null}function j2(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function H2(n){return n.flat(Number.POSITIVE_INFINITY)}function J0(n,e){n.forEach(t=>Array.isArray(t)?J0(t,e):e(t))}function aA(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function wp(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function U2(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function $2(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Wp(n,e,t){let r=Yu(n,e);return r>=0?n[r|1]=t:(r=~r,$2(n,r,e,t)),r}function jv(n,e){let t=Yu(n,e);if(t>=0)return n[t|1]}function Yu(n,e){return G2(n,e,1)}function G2(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Es={},vn=[],Uu=new j(""),cA=new j("",-1),lA=new j(""),Ep=class{get(e,t=ys){if(t===ys){let r=new Error(`NullInjectorError: No provider for ${wn(e)}!`);throw r.name="NullInjectorError",r}return t}};function uA(n,e){let t=n[M2]||null;if(!t&&e===!0)throw new Error(`Type ${wn(n)} does not have '\u0275mod' property.`);return t}function po(n){return n[I2]||null}function z2(n){return n[S2]||null}function q2(n){return n[A2]||null}function Zu(n){return{\u0275providers:n}}function W2(...n){return{\u0275providers:dA(!0,n),\u0275fromNgModule:!0}}function dA(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return J0(e,s=>{let a=s;i0(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&hA(i,o),t}function hA(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];X0(i,o=>{e(o,r)})}}function i0(n,e,t,r){if(n=an(n),!n)return!1;let i=null,o=uS(n),s=!o&&po(n);if(!o&&!s){let c=n.ngModule;if(o=uS(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)i0(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{J0(o.imports,d=>{i0(d,e,t,r)&&(u||=[],u.push(d))})}finally{}u!==void 0&&hA(u,e)}if(!a){let u=ws(i)||(()=>new i);e({provide:i,useFactory:u,deps:vn},i),e({provide:lA,useValue:i,multi:!0},i),e({provide:Uu,useValue:()=>k(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=n;X0(c,d=>{e(d,u)})}}else return!1;return i!==n&&n.providers!==void 0}function X0(n,e){for(let t of n)nA(t)&&(t=t.\u0275providers),Array.isArray(t)?X0(t,e):e(t)}var K2=$e({provide:String,useValue:$e});function fA(n){return n!==null&&typeof n=="object"&&K2 in n}function Q2(n){return!!(n&&n.useExisting)}function Y2(n){return!!(n&&n.useFactory)}function lc(n){return typeof n=="function"}function Z2(n){return!!n.useClass}var Kp=new j(""),hp={},pS={},Hv;function Qp(){return Hv===void 0&&(Hv=new Ep),Hv}var qe=class{},$u=class extends qe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,s0(e,s=>this.processProvider(s)),this.records.set(cA,rc(void 0,this)),i.has("environment")&&this.records.set(qe,rc(void 0,this));let o=this.records.get(Kp);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(lA,vn,_e.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?Ff:ys,r)}destroy(){Vu(this),this._destroyed=!0;let e=be(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),be(e)}}onDestroy(e){return Vu(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Vu(this);let t=_i(this),r=yn(void 0),i;try{return e()}finally{_i(t),yn(r)}}get(e,t=ys,r=_e.Default){if(Vu(this),e.hasOwnProperty(hS))return e[hS](this);r=qp(r);let i,o=_i(this),s=yn(void 0);try{if(!(r&_e.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=nB(e)&&Gp(e);u&&this.injectableDefInScope(u)?c=rc(o0(e),hp):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,r)}let a=r&_e.Self?Qp():this.parent;return t=r&_e.Optional&&t===ys?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[vp]=a[vp]||[]).unshift(wn(e)),o)throw a;return L2(a,e,"R3InjectorError",this.source)}else throw a}finally{yn(s),_i(o)}}resolveInjectorInitializers(){let e=be(null),t=_i(this),r=yn(void 0),i;try{let o=this.get(Uu,vn,_e.Self);for(let s of o)s()}finally{_i(t),yn(r),be(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(wn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=an(e);let t=lc(e)?e:an(e&&e.provide),r=X2(e);if(!lc(e)&&e.multi===!0){let i=this.records.get(t);i||(i=rc(void 0,hp,!0),i.factory=()=>r0(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=be(null);try{return t.value===pS?rA(wn(e)):t.value===hp&&(t.value=pS,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&tB(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{be(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=an(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function o0(n){let e=Gp(n),t=e!==null?e.factory:ws(n);if(t!==null)return t;if(n instanceof j)throw new Z(204,!1);if(n instanceof Function)return J2(n);throw new Z(204,!1)}function J2(n){if(n.length>0)throw new Z(204,!1);let t=C2(n);return t!==null?()=>t.factory(n):()=>new n}function X2(n){if(fA(n))return rc(void 0,n.useValue);{let e=pA(n);return rc(e,hp)}}function pA(n,e,t){let r;if(lc(n)){let i=an(n);return ws(i)||o0(i)}else if(fA(n))r=()=>an(n.useValue);else if(Y2(n))r=()=>n.useFactory(...r0(n.deps||[]));else if(Q2(n))r=(i,o)=>k(an(n.useExisting),o!==void 0&&o&_e.Optional?_e.Optional:void 0);else{let i=an(n&&(n.useClass||n.provide));if(eB(n))r=()=>new i(...r0(n.deps));else return ws(i)||o0(i)}return r}function Vu(n){if(n.destroyed)throw new Z(205,!1)}function rc(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function eB(n){return!!n.deps}function tB(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function nB(n){return typeof n=="function"||typeof n=="object"&&n instanceof j}function s0(n,e){for(let t of n)Array.isArray(t)?s0(t,e):t&&nA(t)?s0(t.\u0275providers,e):e(t)}function ln(n,e){let t;n instanceof $u?(Vu(n),t=n):t=new yp(n);let r,i=_i(t),o=yn(void 0);try{return e()}finally{_i(i),yn(o)}}function gA(){return iA()!==void 0||Su()!=null}function Yp(n){if(!gA())throw new Z(-203,!1)}function rB(n){let e=xn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function iB(n){return typeof n=="function"}var Ii=0,ye=1,ue=2,Yt=3,fr=4,bn=5,Gu=6,bp=7,En=8,bs=9,Di=10,et=11,zu=12,gS=13,mc=14,qn=15,Ds=16,ic=17,Ci=18,Zp=19,mA=20,ho=21,Uv=22,Dp=23,zn=24,ac=25,cn=26,_A=1;var Cs=7,Cp=8,uc=9,On=10;function fo(n){return Array.isArray(n)&&typeof n[_A]=="object"}function Si(n){return Array.isArray(n)&&n[_A]===!0}function ew(n){return(n.flags&4)!==0}function _c(n){return n.componentOffset>-1}function Jp(n){return(n.flags&1)===1}function Vr(n){return!!n.template}function Tp(n){return(n[ue]&512)!==0}function yc(n){return(n[ue]&256)===256}var a0=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function yA(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Wn=(()=>{let n=()=>vA;return n.ngInherit=!0,n})();function vA(n){return n.type.prototype.ngOnChanges&&(n.setInput=sB),oB}function oB(){let n=EA(this),e=n?.current;if(e){let t=n.previous;if(t===Es)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function sB(n,e,t,r,i){let o=this.declaredInputs[r],s=EA(n)||aB(n,{previous:Es,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new a0(u&&u.currentValue,t,c===Es),yA(n,e,i,t)}var wA="__ngSimpleChanges__";function EA(n){return n[wA]||null}function aB(n,e){return n[wA]=e}var mS=null;var ze=function(n,e=null,t){mS?.(n,e,t)},cB="svg",lB="math";function Br(n){for(;Array.isArray(n);)n=n[Ii];return n}function bA(n,e){return Br(e[n])}function Gr(n,e){return Br(e[n.index])}function DA(n,e){return n.data[e]}function CA(n,e){return n[e]}function jr(n,e){let t=e[n];return fo(t)?t:t[Ii]}function uB(n){return(n[ue]&4)===4}function tw(n){return(n[ue]&128)===128}function dB(n){return Si(n[Yt])}function dc(n,e){return e==null?null:n[e]}function TA(n){n[ic]=0}function IA(n){n[ue]&1024||(n[ue]|=1024,tw(n)&&Ju(n))}function hB(n,e){for(;n>0;)e=e[mc],n--;return e}function Xp(n){return!!(n[ue]&9216||n[zn]?.dirty)}function c0(n){n[Di].changeDetectionScheduler?.notify(8),n[ue]&64&&(n[ue]|=1024),Xp(n)&&Ju(n)}function Ju(n){n[Di].changeDetectionScheduler?.notify(0);let e=Ts(n);for(;e!==null&&!(e[ue]&8192||(e[ue]|=8192,!tw(e)));)e=Ts(e)}function SA(n,e){if(yc(n))throw new Z(911,!1);n[ho]===null&&(n[ho]=[]),n[ho].push(e)}function fB(n,e){if(n[ho]===null)return;let t=n[ho].indexOf(e);t!==-1&&n[ho].splice(t,1)}function Ts(n){let e=n[Yt];return Si(e)?e[Yt]:e}function nw(n){return n[bp]??=[]}function rw(n){return n.cleanup??=[]}function pB(n,e,t,r){let i=nw(e);i.push(t),n.firstCreatePass&&rw(n).push(r,i.length-1)}var ve={lFrame:kA(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var l0=!1;function gB(){return ve.lFrame.elementDepthCount}function mB(){ve.lFrame.elementDepthCount++}function _B(){ve.lFrame.elementDepthCount--}function iw(){return ve.bindingsEnabled}function AA(){return ve.skipHydrationRootTNode!==null}function yB(n){return ve.skipHydrationRootTNode===n}function vB(){ve.skipHydrationRootTNode=null}function Ee(){return ve.lFrame.lView}function ct(){return ve.lFrame.tView}function Ai(n){return ve.lFrame.contextLView=n,n[En]}function Mi(n){return ve.lFrame.contextLView=null,n}function Dn(){let n=MA();for(;n!==null&&n.type===64;)n=n.parent;return n}function MA(){return ve.lFrame.currentTNode}function wB(){let n=ve.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Os(n,e){let t=ve.lFrame;t.currentTNode=n,t.isParent=e}function ow(){return ve.lFrame.isParent}function sw(){ve.lFrame.isParent=!1}function EB(){return ve.lFrame.contextLView}function NA(){return l0}function _S(n){let e=l0;return l0=n,e}function bB(){let n=ve.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function DB(n){return ve.lFrame.bindingIndex=n}function Xu(){return ve.lFrame.bindingIndex++}function RA(n){let e=ve.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function CB(){return ve.lFrame.inI18n}function TB(n,e){let t=ve.lFrame;t.bindingIndex=t.bindingRootIndex=n,u0(e)}function IB(){return ve.lFrame.currentDirectiveIndex}function u0(n){ve.lFrame.currentDirectiveIndex=n}function SB(n){let e=ve.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function xA(){return ve.lFrame.currentQueryIndex}function aw(n){ve.lFrame.currentQueryIndex=n}function AB(n){let e=n[ye];return e.type===2?e.declTNode:e.type===1?n[bn]:null}function OA(n,e,t){if(t&_e.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&_e.Host);)if(i=AB(o),i===null||(o=o[mc],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ve.lFrame=PA();return r.currentTNode=e,r.lView=n,!0}function cw(n){let e=PA(),t=n[ye];ve.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function PA(){let n=ve.lFrame,e=n===null?null:n.child;return e===null?kA(n):e}function kA(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function FA(){let n=ve.lFrame;return ve.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var LA=FA;function lw(){let n=FA();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function MB(n){return(ve.lFrame.contextLView=hB(n,ve.lFrame.contextLView))[En]}function Ps(){return ve.lFrame.selectedIndex}function Is(n){ve.lFrame.selectedIndex=n}function ed(){let n=ve.lFrame;return DA(n.tView,n.selectedIndex)}function NB(){return ve.lFrame.currentNamespace}var VA=!0;function eg(){return VA}function tg(n){VA=n}function RB(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=vA(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function uw(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function fp(n,e,t){BA(n,e,3,t)}function pp(n,e,t,r){(n[ue]&3)===t&&BA(n,e,t,r)}function $v(n,e){let t=n[ue];(t&3)===e&&(t&=16383,t+=1,n[ue]=t)}function BA(n,e,t,r){let i=r!==void 0?n[ic]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[ic]+=65536),(a<o||o==-1)&&(xB(n,t,e,c),n[ic]=(n[ic]&4294901760)+c+2),c++}function yS(n,e){ze(4,n,e);let t=be(null);try{e.call(n)}finally{be(t),ze(5,n,e)}}function xB(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ue]>>14<n[ic]>>16&&(n[ue]&3)===e&&(n[ue]+=16384,yS(a,o)):yS(a,o)}var cc=-1,Ss=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function OB(n){return(n.flags&8)!==0}function PB(n){return(n.flags&16)!==0}function kB(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];LB(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function FB(n){return n===3||n===4||n===6}function LB(n){return n.charCodeAt(0)===64}function hc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?vS(n,t,i,null,e[++r]):vS(n,t,i,null,null))}}return n}function vS(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function jA(n){return n!==cc}function Ip(n){return n&32767}function VB(n){return n>>16}function Sp(n,e){let t=VB(n),r=e;for(;t>0;)r=r[mc],t--;return r}var d0=!0;function Ap(n){let e=d0;return d0=n,e}var BB=256,HA=BB-1,UA=5,jB=0,Lr={};function HB(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ju)&&(r=t[ju]),r==null&&(r=t[ju]=jB++);let i=r&HA,o=1<<i;e.data[n+(i>>UA)]|=o}function Mp(n,e){let t=$A(n,e);if(t!==-1)return t;let r=e[ye];r.firstCreatePass&&(n.injectorIndex=e.length,Gv(r.data,n),Gv(e,null),Gv(r.blueprint,null));let i=dw(n,e),o=n.injectorIndex;if(jA(i)){let s=Ip(i),a=Sp(i,e),c=a[ye].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function Gv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function $A(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function dw(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=KA(i),r===null)return cc;if(t++,i=i[mc],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return cc}function h0(n,e,t){HB(n,e,t)}function GA(n,e,t){if(t&_e.Optional||n!==void 0)return n;Y0(e,"NodeInjector")}function zA(n,e,t,r){if(t&_e.Optional&&r===void 0&&(r=null),(t&(_e.Self|_e.Host))===0){let i=n[bs],o=yn(void 0);try{return i?i.get(e,r,t&_e.Optional):oA(e,r,t&_e.Optional)}finally{yn(o)}}return GA(r,e,t)}function qA(n,e,t,r=_e.Default,i){if(n!==null){if(e[ue]&2048&&!(r&_e.Self)){let s=zB(n,e,t,r,Lr);if(s!==Lr)return s}let o=WA(n,e,t,r,Lr);if(o!==Lr)return o}return zA(e,t,r,i)}function WA(n,e,t,r,i){let o=$B(t);if(typeof o=="function"){if(!OA(e,n,r))return r&_e.Host?GA(i,t,r):zA(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&_e.Optional))Y0(t);else return s}finally{LA()}}else if(typeof o=="number"){let s=null,a=$A(n,e),c=cc,u=r&_e.Host?e[qn][bn]:null;for((a===-1||r&_e.SkipSelf)&&(c=a===-1?dw(n,e):e[a+8],c===cc||!ES(r,!1)?a=-1:(s=e[ye],a=Ip(c),e=Sp(c,e)));a!==-1;){let d=e[ye];if(wS(o,a,d.data)){let f=UB(a,e,t,s,r,u);if(f!==Lr)return f}c=e[a+8],c!==cc&&ES(r,e[ye].data[a+8]===u)&&wS(o,a,e)?(s=d,a=Ip(c),e=Sp(c,e)):a=-1}}return i}function UB(n,e,t,r,i,o){let s=e[ye],a=s.data[n+8],c=r==null?_c(a)&&d0:r!=s&&(a.type&3)!==0,u=i&_e.Host&&o===a,d=gp(a,s,t,c,u);return d!==null?qu(e,s,d,a,i):Lr}function gp(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,u=n.directiveEnd,d=o>>20,f=r?a:a+d,g=i?a+d:u;for(let m=f;m<g;m++){let v=s[m];if(m<c&&t===v||m>=c&&v.type===t)return m}if(i){let m=s[c];if(m&&Vr(m)&&m.type===t)return c}return null}function qu(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Ss){let a=o;a.resolving&&rA(N2(s[t]));let c=Ap(a.canSeeViewProviders);a.resolving=!0;let u,d=a.injectImpl?yn(a.injectImpl):null,f=OA(n,r,_e.Default);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&RB(t,s[t],e)}finally{d!==null&&yn(d),Ap(c),a.resolving=!1,LA()}}return o}function $B(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ju)?n[ju]:void 0;return typeof e=="number"?e>=0?e&HA:GB:e}function wS(n,e,t){let r=1<<n;return!!(t[e+(n>>UA)]&r)}function ES(n,e){return!(n&_e.Self)&&!(n&_e.Host&&e)}var vs=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return qA(this._tNode,this._lView,e,qp(r),t)}};function GB(){return new vs(Dn(),Ee())}function zr(n){return Qu(()=>{let e=n.prototype.constructor,t=e[_p]||f0(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[_p]||f0(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function f0(n){return JS(n)?()=>{let e=f0(an(n));return e&&e()}:ws(n)}function zB(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ue]&2048&&!Tp(s);){let a=WA(o,s,t,r|_e.Self,Lr);if(a!==Lr)return a;let c=o.parent;if(!c){let u=s[mA];if(u){let d=u.get(t,Lr,r);if(d!==Lr)return d}c=KA(s),s=s[mc]}o=c}return i}function KA(n){let e=n[ye],t=e.type;return t===2?e.declTNode:t===1?n[bn]:null}function bS(n,e=null,t=null,r){let i=QA(n,e,t,r);return i.resolveInjectorInitializers(),i}function QA(n,e=null,t=null,r,i=new Set){let o=[t||vn,W2(n)];return r=r||(typeof n=="object"?void 0:wn(n)),new $u(o,e||Qp(),r||null,i)}var Oe=class n{static THROW_IF_NOT_FOUND=ys;static NULL=new Ep;static create(e,t){if(Array.isArray(e))return bS({name:""},t,e,"");{let r=e.name??"";return bS({name:r},e.parent,e.providers,r)}}static \u0275prov=V({token:n,providedIn:"any",factory:()=>k(cA)});static __NG_ELEMENT_ID__=-1};var qB=new j("");qB.__NG_ELEMENT_ID__=n=>{let e=Dn();if(e===null)throw new Z(204,!1);if(e.type&2)return e.value;if(n&_e.Optional)return null;throw new Z(204,!1)};var YA=!1,ks=(()=>{class n{static __NG_ELEMENT_ID__=WB;static __NG_ENV_ID__=t=>t}return n})(),p0=class extends ks{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return yc(t)?(e(),()=>{}):(SA(t,e),()=>fB(t,e))}};function WB(){return new p0(Ee())}var As=class{},ZA=new j("",{providedIn:"root",factory:()=>!1});var JA=new j(""),XA=new j(""),qr=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Xe(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}return n})(),hw=(()=>{class n{internalPendingTasks=R(qr);scheduler=R(As);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){return N(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}return n})(),g0=class extends we{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,gA()&&(this.destroyRef=R(ks,{optional:!0})??void 0,this.pendingTasks=R(qr,{optional:!0})??void 0)}emit(e){let t=be(null);try{super.next(e)}finally{be(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof at&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Pe=g0;function Np(...n){}function eM(n){let e,t;function r(){n=Np;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function DS(n){return queueMicrotask(()=>n()),()=>{n=Np}}var fw="isAngularZone",Rp=fw+"_ID",KB=0,fe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Pe(!1);onMicrotaskEmpty=new Pe(!1);onStable=new Pe(!1);onError=new Pe(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=YA}=e;if(typeof Zone>"u")throw new Z(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,ZB(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(fw)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Z(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Z(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,QB,Np,Np);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},QB={};function pw(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function YB(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){eM(()=>{n.callbackScheduled=!1,m0(n),n.isCheckStableRunning=!0,pw(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),m0(n)}function ZB(n){let e=()=>{YB(n)},t=KB++;n._inner=n._inner.fork({name:"angular",properties:{[fw]:!0,[Rp]:t,[Rp+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(JB(c))return r.invokeTask(o,s,a,c);try{return CS(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),TS(n)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return CS(n),r.invoke(o,s,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!XB(c)&&e(),TS(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,m0(n),pw(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function m0(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function CS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function TS(n){n._nesting--,pw(n)}var xp=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Pe;onMicrotaskEmpty=new Pe;onStable=new Pe;onError=new Pe;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function JB(n){return tM(n,"__ignore_ng_zone__")}function XB(n){return tM(n,"__scheduler_tick__")}function tM(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function ej(n="zone.js",e){return n==="noop"?new xp:n==="zone.js"?new fe(e):n}var Hr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},tj=new j("",{providedIn:"root",factory:()=>{let n=R(fe),e=R(Hr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function IS(n,e){return YS(n,e)}function nj(n){return YS(QS,n)}var nM=(IS.required=nj,IS);function rj(){return vc(Dn(),Ee())}function vc(n,e){return new Zt(Gr(n,e))}var Zt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=rj}return n})();function ij(n){return n instanceof Zt?n.nativeElement:n}function oj(n){return typeof n=="function"&&n[$n]!==void 0}function td(n,e){let t=vv(n,e?.equal),r=t[$n];return t.set=i=>Iu(r,i),t.update=i=>wv(r,i),t.asReadonly=sj.bind(t),t}function sj(){let n=this[$n];if(n.readonlyFn===void 0){let e=()=>this();e[$n]=n,n.readonlyFn=e}return n.readonlyFn}function rM(n){return oj(n)&&typeof n.set=="function"}function aj(){return this._results[Symbol.iterator]()}var _0=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new we}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=H2(e);(this._changesDetected=!j2(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=aj};function iM(n){return(n.flags&128)===128}var oM=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(oM||{}),sM=new Map,cj=0;function lj(){return cj++}function uj(n){sM.set(n[Zp],n)}function y0(n){sM.delete(n[Zp])}var SS="__ngContext__";function wc(n,e){fo(e)?(n[SS]=e[Zp],uj(e)):n[SS]=e}function aM(n){return lM(n[zu])}function cM(n){return lM(n[fr])}function lM(n){for(;n!==null&&!Si(n);)n=n[fr];return n}var v0;function uM(n){v0=n}function dj(){if(v0!==void 0)return v0;if(typeof document<"u")return document;throw new Z(210,!1)}var ng=new j("",{providedIn:"root",factory:()=>hj}),hj="ng",gw=new j(""),Pn=new j("",{providedIn:"platform",factory:()=>"unknown"});var mw=new j("",{providedIn:"root",factory:()=>dj().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var fj="h",pj="b";var dM=!1,gj=new j("",{providedIn:"root",factory:()=>dM});var _w=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(_w||{}),Ec=new j(""),AS=new Set;function bc(n){AS.has(n)||(AS.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var hM=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=mj}return n})();function mj(){return new hM(Ee(),Dn())}var oc=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(oc||{}),fM=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}return n})(),_j=[oc.EarlyRead,oc.Write,oc.MixedReadWrite,oc.Read],yj=(()=>{class n{ngZone=R(fe);scheduler=R(As);errorHandler=R(Hr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){R(Ec,{optional:!0})}execute(){let t=this.sequences.size>0;t&&ze(16),this.executing=!0;for(let r of _j)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&ze(17)}register(t){let{view:r}=t;r!==void 0?((r[ac]??=[]).push(t),Ju(r),r[ue]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(_w.AFTER_NEXT_RENDER,t):t()}static \u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}return n})(),w0=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[ac];e&&(this.view[ac]=e.filter(t=>t!==this))}};function yw(n,e){!e?.injector&&Yp(yw);let t=e?.injector??R(Oe);return bc("NgAfterRender"),pM(n,t,e,!1)}function Fs(n,e){!e?.injector&&Yp(Fs);let t=e?.injector??R(Oe);return bc("NgAfterNextRender"),pM(n,t,e,!0)}function vj(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function pM(n,e,t,r){let i=e.get(fM);i.impl??=e.get(yj);let o=e.get(Ec,null,{optional:!0}),s=t?.phase??oc.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(ks):null,c=e.get(hM,null,{optional:!0}),u=new w0(i.impl,vj(n,s),c?.view,r,a,o?.snapshot(null));return i.impl.register(u),u}var wj=()=>null;function gM(n,e,t=!1){return wj(n,e,t)}function mM(n,e){let t=n.contentQueries;if(t!==null){let r=be(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];aw(o),a.contentQueries(2,e[s],s)}}}finally{be(r)}}}function E0(n,e,t){aw(0);let r=be(null);try{e(n,t)}finally{be(r)}}function vw(n,e,t){if(ew(e)){let r=be(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{be(r)}}}var Ur=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ur||{});var Op=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${WS})`}};function rg(n){return n instanceof Op?n.changingThisBreaksApplicationSecurity:n}function Ej(n,e){let t=bj(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${WS})`)}return t===e}function bj(n){return n instanceof Op&&n.getTypeName()||null}var Dj=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Cj(n){return n=String(n),n.match(Dj)?n:"unsafe:"+n}var _M=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(_M||{});function Ls(n){let e=Tj();return e?e.sanitize(_M.URL,n)||"":Ej(n,"URL")?rg(n):Cj(zp(n))}function Tj(){let n=Ee();return n&&n[Di].sanitizer}var Ij=/^>|^->|<!--|-->|--!>|<!-$/g,Sj=/(<|>)/g,Aj="\u200B$1\u200B";function Mj(n){return n.replace(Ij,e=>e.replace(Sj,Aj))}function yM(n){return n instanceof Function?n():n}function Nj(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var vM="ng-template";function Rj(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Nj(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(ww(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function ww(n){return n.type===4&&n.value!==vM}function xj(n,e,t){let r=n.type===4&&!t?vM:n.value;return e===r}function Oj(n,e,t){let r=4,i=n.attrs,o=i!==null?Fj(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!dr(r)&&!dr(c))return!1;if(s&&dr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!xj(n,c,t)||c===""&&e.length===1){if(dr(r))return!1;s=!0}}else if(r&8){if(i===null||!Rj(n,i,c,t)){if(dr(r))return!1;s=!0}}else{let u=e[++a],d=Pj(c,i,ww(n),t);if(d===-1){if(dr(r))return!1;s=!0;continue}if(u!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&u!==f){if(dr(r))return!1;s=!0}}}}return dr(r)||s}function dr(n){return(n&1)===0}function Pj(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Lj(e,n)}function wM(n,e,t=!1){for(let r=0;r<e.length;r++)if(Oj(n,e[r],t))return!0;return!1}function kj(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function Fj(n){for(let e=0;e<n.length;e++){let t=n[e];if(FB(t))return e}return n.length}function Lj(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Vj(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function MS(n,e){return n?":not("+e.trim()+")":e}function Bj(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!dr(s)&&(e+=MS(o,i),i=""),r=s,o=o||!dr(r);t++}return i!==""&&(e+=MS(o,i)),e}function jj(n){return n.map(Bj).join(",")}function Hj(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!dr(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Wr={};function Uj(n,e){return n.createText(e)}function $j(n,e,t){n.setValue(e,t)}function Gj(n,e){return n.createComment(Mj(e))}function EM(n,e,t){return n.createElement(e,t)}function Pp(n,e,t,r,i){n.insertBefore(e,t,r,i)}function bM(n,e,t){n.appendChild(e,t)}function NS(n,e,t,r,i){r!==null?Pp(n,e,t,r,i):bM(n,e,t)}function zj(n,e,t){n.removeChild(null,e,t)}function qj(n,e,t){n.setAttribute(e,"style",t)}function Wj(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function DM(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&kB(n,e,r),i!==null&&Wj(n,e,i),o!==null&&qj(n,e,o)}function Ew(n,e,t,r,i,o,s,a,c,u,d){let f=cn+r,g=f+i,m=Kj(f,g),v=typeof u=="function"?u():u;return m[ye]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:v,incompleteFirstPass:!1,ssrId:d}}function Kj(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Wr);return t}function Qj(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Ew(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function bw(n,e,t,r,i,o,s,a,c,u,d){let f=e.blueprint.slice();return f[Ii]=i,f[ue]=r|4|128|8|64|1024,(u!==null||n&&n[ue]&2048)&&(f[ue]|=2048),TA(f),f[Yt]=f[mc]=n,f[En]=t,f[Di]=s||n&&n[Di],f[et]=a||n&&n[et],f[bs]=c||n&&n[bs]||null,f[bn]=o,f[Zp]=lj(),f[Gu]=d,f[mA]=u,f[qn]=e.type==2?n[qn]:f,f}function Yj(n,e,t){let r=Gr(e,n),i=Qj(t),o=n[Di].rendererFactory,s=Dw(n,bw(n,i,null,CM(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function CM(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function TM(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Dw(n,e){return n[zu]?n[gS][fr]=e:n[zu]=e,n[gS]=e,e}function de(n=1){IM(ct(),Ee(),Ps()+n,!1)}function IM(n,e,t,r){if(!r)if((e[ue]&3)===3){let o=n.preOrderCheckHooks;o!==null&&fp(e,o,t)}else{let o=n.preOrderHooks;o!==null&&pp(e,o,0,t)}Is(t)}var ig=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(ig||{});function b0(n,e,t,r){let i=be(null);try{let[o,s,a]=n.inputs[t],c=null;(s&ig.SignalBased)!==0&&(c=e[o][$n]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):yA(e,c,o,r)}finally{be(i)}}function SM(n,e,t,r,i){let o=Ps(),s=r&2;try{Is(-1),s&&e.length>cn&&IM(n,e,cn,!1),ze(s?2:0,i),t(r,i)}finally{Is(o),ze(s?3:1,i)}}function og(n,e,t){nH(n,e,t),(t.flags&64)===64&&rH(n,e,t)}function Cw(n,e,t=Gr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function Zj(n,e,t,r){let o=r.get(gj,dM)||t===Ur.ShadowDom,s=n.selectRootElement(e,o);return Jj(s),s}function Jj(n){Xj(n)}var Xj=()=>null;function eH(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function sg(n,e,t,r,i,o,s,a){if(!a&&Iw(e,n,t,r,i)){_c(e)&&tH(t,e.index);return}if(e.type&3){let c=Gr(e,t);r=eH(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)}else e.type&12}function tH(n,e){let t=jr(e,n);t[ue]&16||(t[ue]|=64)}function nH(n,e,t){let r=t.directiveStart,i=t.directiveEnd;_c(t)&&Yj(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Mp(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=qu(e,n,s,t);if(wc(c,e),o!==null&&aH(e,s-r,c,a,t,o),Vr(a)){let u=jr(t.index,e);u[En]=qu(e,n,s,t)}}}function rH(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=IB();try{Is(o);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];u0(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&iH(c,u)}}finally{Is(-1),u0(s)}}function iH(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Tw(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];wM(e,o.selectors,!1)&&(r??=[],Vr(o)?r.unshift(o):r.push(o))}return r}function oH(n,e,t,r,i,o){let s=Gr(n,e);sH(e[et],s,o,n.value,t,r,i)}function sH(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?zp(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function aH(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],u=s[a+1];b0(r,t,c,u)}}function cH(n,e){let t=n[bs],r=t?t.get(Hr,null):null;r&&r.handleError(e)}function Iw(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let u=s[c],d=s[c+1],f=e.data[u];b0(f,t[u],d,i),a=!0}if(o)for(let c of o){let u=t[c],d=e.data[c];b0(d,u,r,i),a=!0}return a}function lH(n,e){let t=jr(e,n),r=t[ye];uH(r,t);let i=t[Ii];i!==null&&t[Gu]===null&&(t[Gu]=gM(i,t[bs])),ze(18),Sw(r,t,t[En]),ze(19,t[En])}function uH(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Sw(n,e,t){cw(e);try{let r=n.viewQuery;r!==null&&E0(1,r,t);let i=n.template;i!==null&&SM(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ci]?.finishViewCreation(n),n.staticContentQueries&&mM(n,e),n.staticViewQueries&&E0(2,n.viewQuery,t);let o=n.components;o!==null&&dH(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ue]&=-5,lw()}}function dH(n,e){for(let t=0;t<e.length;t++)lH(n,e[t])}function AM(n,e,t,r){let i=be(null);try{let o=e.tView,a=n[ue]&4096?4096:16,c=bw(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[Ds]=u;let d=n[Ci];return d!==null&&(c[Ci]=d.createEmbeddedView(o)),Sw(o,c,t),c}finally{be(i)}}function D0(n,e){return!e||e.firstChild===null||iM(n)}var hH;function Aw(n,e){return hH(n,e)}var Ti=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ti||{});function Mw(n){return(n.flags&32)===32}function sc(n,e,t,r,i){if(r!=null){let o,s=!1;Si(r)?o=r:fo(r)&&(s=!0,r=r[Ii]);let a=Br(r);n===0&&t!==null?i==null?bM(e,t,a):Pp(e,t,a,i||null,!0):n===1&&t!==null?Pp(e,t,a,i||null,!0):n===2?zj(e,a,s):n===3&&e.destroyNode(a),o!=null&&bH(e,n,o,t,i)}}function fH(n,e){MM(n,e),e[Ii]=null,e[bn]=null}function pH(n,e,t,r,i,o){r[Ii]=i,r[bn]=e,cg(n,r,t,1,i,o)}function MM(n,e){e[Di].changeDetectionScheduler?.notify(9),cg(n,e,e[et],2,null,null)}function gH(n){let e=n[zu];if(!e)return zv(n[ye],n);for(;e;){let t=null;if(fo(e))t=e[zu];else{let r=e[On];r&&(t=r)}if(!t){for(;e&&!e[fr]&&e!==n;)fo(e)&&zv(e[ye],e),e=e[Yt];e===null&&(e=n),fo(e)&&zv(e[ye],e),t=e&&e[fr]}e=t}}function Nw(n,e){let t=n[uc],r=t.indexOf(e);t.splice(r,1)}function NM(n,e){if(yc(e))return;let t=e[et];t.destroyNode&&cg(n,e,t,3,null,null),gH(e)}function zv(n,e){if(yc(e))return;let t=be(null);try{e[ue]&=-129,e[ue]|=256,e[zn]&&mv(e[zn]),_H(n,e),mH(n,e),e[ye].type===1&&e[et].destroy();let r=e[Ds];if(r!==null&&Si(e[Yt])){r!==e[Yt]&&Nw(r,e);let i=e[Ci];i!==null&&i.detachView(n)}y0(e)}finally{be(t)}}function mH(n,e){let t=n.cleanup,r=e[bp];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[bp]=null);let i=e[ho];if(i!==null){e[ho]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Dp];if(o!==null){e[Dp]=null;for(let s of o)s.destroy()}}function _H(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ss)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];ze(4,a,c);try{c.call(a)}finally{ze(5,a,c)}}else{ze(4,i,o);try{o.call(i)}finally{ze(5,i,o)}}}}}function RM(n,e,t){return yH(n,e.parent,t)}function yH(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Ii];if(_c(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Ur.None||i===Ur.Emulated)return null}return Gr(r,t)}function xM(n,e,t){return wH(n,e,t)}function vH(n,e,t){return n.type&40?Gr(n,t):null}var wH=vH,RS;function ag(n,e,t,r){let i=RM(n,r,e),o=e[et],s=r.parent||e[bn],a=xM(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)NS(o,i,t[c],a,!1);else NS(o,i,t,a,!1);RS!==void 0&&RS(o,r,e,t,i)}function Bu(n,e){if(e!==null){let t=e.type;if(t&3)return Gr(e,n);if(t&4)return C0(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Bu(n,r);{let i=n[e.index];return Si(i)?C0(-1,i):Br(i)}}else{if(t&128)return Bu(n,e.next);if(t&32)return Aw(e,n)()||Br(n[e.index]);{let r=OM(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ts(n[qn]);return Bu(i,r)}else return Bu(n,e.next)}}}return null}function OM(n,e){if(e!==null){let r=n[qn][bn],i=e.projection;return r.projection[i]}return null}function C0(n,e){let t=On+n+1;if(t<e.length){let r=e[t],i=r[ye].firstChild;if(i!==null)return Bu(r,i)}return e[Cs]}function Rw(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&wc(Br(a),r),t.flags|=2),!Mw(t))if(c&8)Rw(n,e,t.child,r,i,o,!1),sc(e,n,i,a,o);else if(c&32){let u=Aw(t,r),d;for(;d=u();)sc(e,n,i,d,o);sc(e,n,i,a,o)}else c&16?PM(n,e,r,t,i,o):sc(e,n,i,a,o);t=s?t.projectionNext:t.next}}function cg(n,e,t,r,i,o){Rw(t,r,n.firstChild,e,i,o,!1)}function EH(n,e,t){let r=e[et],i=RM(n,t,e),o=t.parent||e[bn],s=xM(o,t,e);PM(r,0,e,t,i,s)}function PM(n,e,t,r,i,o){let s=t[qn],c=s[bn].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];sc(e,n,i,d,o)}else{let u=c,d=s[Yt];iM(r)&&(u.flags|=128),Rw(n,e,u,d,i,o,!0)}}function bH(n,e,t,r,i){let o=t[Cs],s=Br(t);o!==s&&sc(e,n,r,o,i);for(let a=On;a<t.length;a++){let c=t[a];cg(c[ye],c,n,e,r,o)}}function DH(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Ti.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ti.Important),n.setStyle(t,r,i,o))}}function kp(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Br(o)),Si(o)&&CH(o,r);let s=t.type;if(s&8)kp(n,e,t.child,r);else if(s&32){let a=Aw(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=OM(e,t);if(Array.isArray(a))r.push(...a);else{let c=Ts(e[qn]);kp(c[ye],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function CH(n,e){for(let t=On;t<n.length;t++){let r=n[t],i=r[ye].firstChild;i!==null&&kp(r[ye],r,i,e)}n[Cs]!==n[Ii]&&e.push(n[Cs])}function kM(n){if(n[ac]!==null){for(let e of n[ac])e.impl.addSequence(e);n[ac].length=0}}var FM=[];function TH(n){return n[zn]??IH(n)}function IH(n){let e=FM.pop()??Object.create(AH);return e.lView=n,e}function SH(n){n.lView[zn]!==n&&(n.lView=null,FM.push(n))}var AH=he(H({},Cu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Ju(n.lView)},consumerOnSignalRead(){this.lView[zn]=this}});function MH(n){let e=n[zn]??Object.create(NH);return e.lView=n,e}var NH=he(H({},Cu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Ts(n.lView);for(;e&&!LM(e[ye]);)e=Ts(e);e&&IA(e)},consumerOnSignalRead(){this.lView[zn]=this}});function LM(n){return n.type!==2}function VM(n){if(n[Dp]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Dp])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ue]&8192)}}var RH=100;function BM(n,e=!0,t=0){let i=n[Di].rendererFactory,o=!1;o||i.begin?.();try{xH(n,t)}catch(s){throw e&&cH(n,s),s}finally{o||i.end?.()}}function xH(n,e){let t=NA();try{_S(!0),T0(n,e);let r=0;for(;Xp(n);){if(r===RH)throw new Z(103,!1);r++,T0(n,1)}}finally{_S(t)}}function OH(n,e,t,r){if(yc(e))return;let i=e[ue],o=!1,s=!1;cw(e);let a=!0,c=null,u=null;o||(LM(n)?(u=TH(e),c=xf(u)):uv()===null?(a=!1,u=MH(e),c=xf(u)):e[zn]&&(mv(e[zn]),e[zn]=null));try{TA(e),DB(n.bindingStartIndex),t!==null&&SM(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let m=n.preOrderCheckHooks;m!==null&&fp(e,m,null)}else{let m=n.preOrderHooks;m!==null&&pp(e,m,0,null),$v(e,0)}if(s||PH(e),VM(e),jM(e,0),n.contentQueries!==null&&mM(n,e),!o)if(d){let m=n.contentCheckHooks;m!==null&&fp(e,m)}else{let m=n.contentHooks;m!==null&&pp(e,m,1),$v(e,1)}FH(n,e);let f=n.components;f!==null&&UM(e,f,0);let g=n.viewQuery;if(g!==null&&E0(2,g,r),!o)if(d){let m=n.viewCheckHooks;m!==null&&fp(e,m)}else{let m=n.viewHooks;m!==null&&pp(e,m,2),$v(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Uv]){for(let m of e[Uv])m();e[Uv]=null}o||(kM(e),e[ue]&=-73)}catch(d){throw o||Ju(e),d}finally{u!==null&&(pv(u,c),a&&SH(u)),lw()}}function jM(n,e){for(let t=aM(n);t!==null;t=cM(t))for(let r=On;r<t.length;r++){let i=t[r];HM(i,e)}}function PH(n){for(let e=aM(n);e!==null;e=cM(e)){if(!(e[ue]&2))continue;let t=e[uc];for(let r=0;r<t.length;r++){let i=t[r];IA(i)}}}function kH(n,e,t){ze(18);let r=jr(e,n);HM(r,t),ze(19,r[En])}function HM(n,e){tw(n)&&T0(n,e)}function T0(n,e){let r=n[ye],i=n[ue],o=n[zn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&gv(o)),s||=!1,o&&(o.dirty=!1),n[ue]&=-9217,s)OH(r,n,r.template,n[En]);else if(i&8192){VM(n),jM(n,1);let a=r.components;a!==null&&UM(n,a,1),kM(n)}}function UM(n,e,t){for(let r=0;r<e.length;r++)kH(n,e[r],t)}function FH(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Is(~i);else{let o=i,s=t[++r],a=t[++r];TB(s,o);let c=e[o];ze(24,c),a(2,c),ze(25,c)}}}finally{Is(-1)}}function xw(n,e){let t=NA()?64:1088;for(n[Di].changeDetectionScheduler?.notify(e);n;){n[ue]|=t;let r=Ts(n);if(Tp(n)&&!r)return n;n=r}return null}function $M(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function GM(n,e,t,r=!0){let i=e[ye];if(LH(i,e,n,t),r){let s=C0(t,n),a=e[et],c=a.parentNode(n[Cs]);c!==null&&pH(i,n[bn],a,e,c,s)}let o=e[Gu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function I0(n,e){if(n.length<=On)return;let t=On+e,r=n[t];if(r){let i=r[Ds];i!==null&&i!==n&&Nw(i,r),e>0&&(n[t-1][fr]=r[fr]);let o=wp(n,On+e);fH(r[ye],r);let s=o[Ci];s!==null&&s.detachView(o[ye]),r[Yt]=null,r[fr]=null,r[ue]&=-129}return r}function LH(n,e,t,r){let i=On+r,o=t.length;r>0&&(t[i-1][fr]=e),r<o-On?(e[fr]=t[i],aA(t,On+r,e)):(t.push(e),e[fr]=null),e[Yt]=t;let s=e[Ds];s!==null&&t!==s&&zM(s,e);let a=e[Ci];a!==null&&a.insertView(n),c0(e),e[ue]|=128}function zM(n,e){let t=n[uc],r=e[Yt];if(fo(r))n[ue]|=2;else{let i=r[Yt][qn];e[qn]!==i&&(n[ue]|=2)}t===null?n[uc]=[e]:t.push(e)}var Wu=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[ye];return kp(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[En]}set context(e){this._lView[En]=e}get destroyed(){return yc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Yt];if(Si(e)){let t=e[Cp],r=t?t.indexOf(this):-1;r>-1&&(I0(e,r),wp(t,r))}this._attachedToViewContainer=!1}NM(this._lView[ye],this._lView)}onDestroy(e){SA(this._lView,e)}markForCheck(){xw(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ue]&=-129}reattach(){c0(this._lView),this._lView[ue]|=128}detectChanges(){this._lView[ue]|=1024,BM(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Tp(this._lView),t=this._lView[Ds];t!==null&&!e&&Nw(t,this._lView),MM(this._lView[ye],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Z(902,!1);this._appRef=e;let t=Tp(this._lView),r=this._lView[Ds];r!==null&&!t&&zM(r,this._lView),c0(this._lView)}};var $r=(()=>{class n{static __NG_ELEMENT_ID__=jH}return n})(),VH=$r,BH=class extends VH{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=AM(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Wu(i)}};function jH(){return lg(Dn(),Ee())}function lg(n,e){return n.type&4?new BH(e,n,vc(n,e)):null}function nd(n,e,t,r,i){let o=n.data[e];if(o===null)o=HH(n,e,t,r,i),CB()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=wB();o.injectorIndex=s===null?-1:s.injectorIndex}return Os(o,!0),o}function HH(n,e,t,r,i){let o=MA(),s=ow(),a=s?o:o&&o.parent,c=n.data[e]=$H(n,a,t,e,r,i);return UH(n,c,o,s),c}function UH(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function $H(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return AA()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var WX=new RegExp(`^(\\d+)*(${pj}|${fj})*(.*)`);var GH=()=>null;function S0(n,e){return GH(n,e)}var zH=class{},qM=class{},A0=class{resolveComponentFactory(e){throw Error(`No component factory found for ${wn(e)}.`)}},ug=class{static NULL=new A0},fc=class{},Vs=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>qH()}return n})();function qH(){let n=Ee(),e=Dn(),t=jr(e.index,n);return(fo(t)?t:n)[et]}var WH=(()=>{class n{static \u0275prov=V({token:n,providedIn:"root",factory:()=>null})}return n})();var qv={},M0=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=qp(r);let i=this.injector.get(e,qv,r);return i!==qv||t===qv?i:this.parentInjector.get(e,t,r)}};function N0(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=e0(i,a);else if(o==2){let c=a,u=e[++s];r=e0(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function pe(n,e=_e.Default){let t=Ee();if(t===null)return k(n,e);let r=Dn();return qA(r,t,an(n),e)}function WM(){let n="invalid";throw new Error(n)}function Ow(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a,c=null,u=null,d=QH(s);d===null?a=s:[a,c,u]=d,JH(n,e,t,a,o,c,u)}o!==null&&r!==null&&KH(t,r,o)}function KH(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Z(-301,!1);r.push(e[i],o)}}function QH(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&Vr(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,YH(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function YH(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function ZH(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function JH(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let g=0;g<a;g++){let m=r[g];!c&&Vr(m)&&(c=!0,ZH(n,t,g)),h0(Mp(t,e),n,m.type)}iU(t,n.data.length,a);for(let g=0;g<a;g++){let m=r[g];m.providersResolver&&m.providersResolver(m)}let u=!1,d=!1,f=TM(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let m=r[g];if(t.mergedAttrs=hc(t.mergedAttrs,m.hostAttrs),eU(n,t,e,f,m),rU(f,m,i),s!==null&&s.has(m)){let[b,T]=s.get(m);t.directiveToIndex.set(m.type,[f,b+t.directiveStart,T+t.directiveStart])}else(o===null||!o.has(m))&&t.directiveToIndex.set(m.type,f);m.contentQueries!==null&&(t.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(t.flags|=64);let v=m.type.prototype;!u&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!d&&(v.ngOnChanges||v.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),d=!0),f++}XH(n,t,o)}function XH(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))xS(0,e,i,r),xS(1,e,i,r),PS(e,r,!1);else{let o=t.get(i);OS(0,e,o,r),OS(1,e,o,r),PS(e,r,!0)}}}function xS(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),KM(e,o)}}function OS(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),KM(e,s)}}function KM(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function PS(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||ww(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let u=i[c];for(let d of u)if(d===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let u=o[c];for(let d=0;d<u.length;d+=2)if(u[d]===e){s??=[],s.push(u[d+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function eU(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ws(i.type,!0)),s=new Ss(o,Vr(i),pe);n.blueprint[r]=s,t[r]=s,tU(n,e,r,TM(n,t,i.hostVars,Wr),i)}function tU(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;nU(s)!=a&&s.push(a),s.push(t,r,o)}}function nU(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function rU(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Vr(e)&&(t[""]=n)}}function iU(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function QM(n,e,t,r,i,o,s,a){let c=e.consts,u=dc(c,s),d=nd(e,n,2,r,u);return o&&Ow(e,t,d,dc(c,a),i),d.mergedAttrs=hc(d.mergedAttrs,d.attrs),d.attrs!==null&&N0(d,d.attrs,!1),d.mergedAttrs!==null&&N0(d,d.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,d),d}function YM(n,e){uw(n,e),ew(e)&&n.queries.elementEnd(e)}var Fp=class extends ug{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=po(e);return new Ms(t,this.ngModule)}};function oU(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&ig.SignalBased)!==0};return i&&(o.transform=i),o})}function sU(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function aU(n,e,t){let r=e instanceof qe?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new M0(t,r):t}function cU(n){let e=n.get(fc,null);if(e===null)throw new Z(407,!1);let t=n.get(WH,null),r=n.get(As,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function lU(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return EM(e,t,t==="svg"?cB:t==="math"?lB:null)}var Ms=class extends qM{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=oU(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=sU(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=jj(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){ze(22);let o=be(null);try{let s=this.componentDef,a=r?["ng-version","19.2.10"]:Hj(this.componentDef.selectors[0]),c=Ew(0,null,null,1,0,null,null,null,null,[a],null),u=aU(s,i||this.ngModule,e),d=cU(u),f=d.rendererFactory.createRenderer(null,s),g=r?Zj(f,r,s.encapsulation,u):lU(s,f),m=bw(null,c,null,512|CM(s),null,null,d,f,u,null,gM(g,u,!0));m[cn]=g,cw(m);let v=null;try{let b=QM(cn,c,m,"#host",()=>[this.componentDef],!0,0);g&&(DM(f,g,b),wc(g,m)),og(c,m,b),vw(c,b,m),YM(c,b),t!==void 0&&uU(b,this.ngContentSelectors,t),v=jr(b.index,m),m[En]=v[En],Sw(c,m,null)}catch(b){throw v!==null&&y0(v),y0(m),b}finally{ze(23),lw()}return new R0(this.componentType,m)}finally{be(o)}}},R0=class extends zH{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=DA(t[ye],cn),this.location=vc(this._tNode,t),this.instance=jr(this._tNode.index,t)[En],this.hostView=this.changeDetectorRef=new Wu(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Iw(r,i[ye],i,e,t);this.previousInputValues.set(e,t);let s=jr(r.index,i);xw(s,1)}get injector(){return new vs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function uU(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Kr=(()=>{class n{static __NG_ELEMENT_ID__=dU}return n})();function dU(){let n=Dn();return JM(n,Ee())}var hU=Kr,ZM=class extends hU{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return vc(this._hostTNode,this._hostLView)}get injector(){return new vs(this._hostTNode,this._hostLView)}get parentInjector(){let e=dw(this._hostTNode,this._hostLView);if(jA(e)){let t=Sp(e,this._hostLView),r=Ip(e),i=t[ye].data[r+8];return new vs(i,t)}else return new vs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=kS(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-On}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=S0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,D0(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!iB(e),a;if(s)a=t;else{let v=t||{};a=v.index,r=v.injector,i=v.projectableNodes,o=v.environmentInjector||v.ngModuleRef}let c=s?e:new Ms(po(e)),u=r||this.parentInjector;if(!o&&c.ngModule==null){let b=(s?u:this.parentInjector).get(qe,null);b&&(o=b)}let d=po(c.componentType??{}),f=S0(this._lContainer,d?.id??null),g=f?.firstChild??null,m=c.create(u,i,g,o);return this.insertImpl(m.hostView,a,D0(this._hostTNode,f)),m}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(dB(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Yt],u=new ZM(c,c[bn],c[Yt]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return GM(s,i,o,r),e.attachToViewContainerRef(),aA(Wv(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=kS(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=I0(this._lContainer,t);r&&(wp(Wv(this._lContainer),t),NM(r[ye],r))}detach(e){let t=this._adjustIndex(e,-1),r=I0(this._lContainer,t);return r&&wp(Wv(this._lContainer),t)!=null?new Wu(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function kS(n){return n[Cp]}function Wv(n){return n[Cp]||(n[Cp]=[])}function JM(n,e){let t,r=e[n.index];return Si(r)?t=r:(t=$M(r,e,null,n),e[n.index]=t,Dw(e,t)),pU(t,e,n,r),new ZM(t,n,e)}function fU(n,e){let t=n[et],r=t.createComment(""),i=Gr(e,n),o=t.parentNode(i);return Pp(t,o,r,t.nextSibling(i),!1),r}var pU=_U,gU=()=>!1;function mU(n,e,t){return gU(n,e,t)}function _U(n,e,t,r){if(n[Cs])return;let i;t.type&8?i=Br(r):i=fU(e,t),n[Cs]=i}var x0=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},O0=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Pw(e,t).matches!==null&&this.queries[t].setDirty()}},P0=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=TU(e):this.predicate=e}},k0=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},F0=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,yU(t,o)),this.matchTNodeWithReadOption(e,t,gp(t,e,o,!1,!1))}else r===$r?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,gp(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Zt||i===Kr||i===$r&&t.type&4)this.addMatch(t.index,-2);else{let o=gp(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function yU(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function vU(n,e){return n.type&11?vc(n,e):n.type&4?lg(n,e):null}function wU(n,e,t,r){return t===-1?vU(e,n):t===-2?EU(n,e,r):qu(n,n[ye],t,e)}function EU(n,e,t){if(t===Zt)return vc(e,n);if(t===$r)return lg(e,n);if(t===Kr)return JM(e,n)}function XM(n,e,t,r){let i=e[Ci].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let d=o[u];a.push(wU(e,d,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function L0(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=XM(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let u=o[a+1],d=e[-c];for(let f=On;f<d.length;f++){let g=d[f];g[Ds]===g[Yt]&&L0(g[ye],g,u,r)}if(d[uc]!==null){let f=d[uc];for(let g=0;g<f.length;g++){let m=f[g];L0(m[ye],m,u,r)}}}}}return r}function bU(n,e){return n[Ci].queries[e].queryList}function DU(n,e,t){let r=new _0((t&4)===4);return pB(n,e,r,r.destroy),(e[Ci]??=new O0).queries.push(new x0(r))-1}function CU(n,e,t){let r=ct();return r.firstCreatePass&&(IU(r,new P0(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),DU(r,Ee(),e)}function TU(n){return n.split(",").map(e=>e.trim())}function IU(n,e,t){n.queries===null&&(n.queries=new k0),n.queries.track(new F0(e,t))}function Pw(n,e){return n.queries.getByIndex(e)}function SU(n,e){let t=n[ye],r=Pw(t,e);return r.crossesNgTemplate?L0(t,n,e,[]):XM(t,n,r,e)}function AU(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(xU))}return o}return Lp.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(u=>{i.template=u}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let u=i.styles.length,d=i.styleUrls;i.styleUrls.forEach((f,g)=>{a.push(""),s.push(r(f).then(m=>{a[u+g]=m,d.splice(d.indexOf(f),1),d.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(u=>{a.push(u),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>OU(o));e.push(c)}),NU(),Promise.all(e).then(()=>{})}var Lp=new Map,MU=new Set;function NU(){let n=Lp;return Lp=new Map,n}function RU(){return Lp.size===0}function xU(n){return typeof n=="string"?n:n.text()}function OU(n){MU.delete(n)}var pc=class{},kw=class{};var Vp=class extends pc{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Fp(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=uA(e);this._bootstrapComponents=yM(o.bootstrap),this._r3Injector=QA(e,t,[{provide:pc,useValue:this},{provide:ug,useValue:this.componentFactoryResolver},...r],wn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Bp=class extends kw{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Vp(this.moduleType,e,[])}};function PU(n,e,t){return new Vp(n,e,t,!1)}var V0=class extends pc{injector;componentFactoryResolver=new Fp(this);instance=null;constructor(e){super();let t=new $u([...e.providers,{provide:pc,useValue:this},{provide:ug,useValue:this.componentFactoryResolver}],e.parent||Qp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function rd(n,e,t=null){return new V0({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var kU=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=dA(!1,t.type),i=r.length>0?rd([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=V({token:n,providedIn:"environment",factory:()=>new n(k(qe))})}return n})();function wt(n){return Qu(()=>{let e=eN(n),t=he(H({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===oM.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(kU).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ur.Emulated,styles:n.styles||vn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&bc("NgStandalone"),tN(t);let r=n.dependencies;return t.directiveDefs=FS(r,!1),t.pipeDefs=FS(r,!0),t.id=jU(t),t})}function FU(n){return po(n)||z2(n)}function LU(n){return n!==null}function oe(n){return Qu(()=>({type:n.type,bootstrap:n.bootstrap||vn,declarations:n.declarations||vn,imports:n.imports||vn,exports:n.exports||vn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function VU(n,e){if(n==null)return Es;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=ig.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function BU(n){if(n==null)return Es;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Jt(n){return Qu(()=>{let e=eN(n);return tN(e),e})}function dg(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function eN(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Es,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||vn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:VU(n.inputs,e),outputs:BU(n.outputs),debugInfo:null}}function tN(n){n.features?.forEach(e=>e(n))}function FS(n,e){if(!n)return null;let t=e?q2:FU;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(LU)}function jU(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function HU(n){return Object.getPrototypeOf(n.prototype).constructor}function go(n){let e=HU(n.type),t=!0,r=[n];for(;e;){let i;if(Vr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Z(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Kv(n.inputs),s.declaredInputs=Kv(n.declaredInputs),s.outputs=Kv(n.outputs);let a=i.hostBindings;a&&qU(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&GU(n,c),u&&zU(n,u),UU(n,i),b2(n.outputs,i.outputs),Vr(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===go&&(t=!1)}}e=Object.getPrototypeOf(e)}$U(r)}function UU(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function $U(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=hc(i.hostAttrs,t=hc(t,i.hostAttrs))}}function Kv(n){return n===Es?{}:n===vn?[]:n}function GU(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function zU(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function qU(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function nN(n){return KU(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function WU(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function KU(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function QU(n,e,t){return n[e]=t}function mo(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function YU(n,e,t,r,i,o,s,a,c){let u=e.consts,d=nd(e,n,4,s||null,a||null);iw()&&Ow(e,t,d,dc(u,c),Tw),d.mergedAttrs=hc(d.mergedAttrs,d.attrs),uw(e,d);let f=d.tView=Ew(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function rN(n,e,t,r,i,o,s,a,c,u){let d=t+cn,f=e.firstCreatePass?YU(d,e,n,r,i,o,s,a,c):e.data[d];Os(f,!1);let g=ZU(e,n,f,t);eg()&&ag(e,n,g,f),wc(g,n);let m=$M(g,n,g,f);return n[d]=m,Dw(n,m),mU(m,f,n),Jp(f)&&og(e,n,f),c!=null&&Cw(n,f,u),f}function ht(n,e,t,r,i,o,s,a){let c=Ee(),u=ct(),d=dc(u.consts,o);return rN(c,u,n,e,t,r,i,d,s,a),ht}var ZU=JU;function JU(n,e,t,r){return tg(!0),e[et].createComment("")}var iN=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Fw=new j(""),id=new j(""),hg=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];taskTrackingZone=null;constructor(t,r,i){this._ngZone=t,this.registry=r,Lw||(XU(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{fe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static \u0275fac=function(r){return new(r||n)(k(fe),k(fg),k(id))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),fg=(()=>{class n{_applications=new Map;registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Lw?.findTestabilityInTree(this,t,r)??null}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function XU(n){Lw=n}var Lw,e$=(()=>{class n{static \u0275prov=V({token:n,providedIn:"root",factory:()=>new B0})}return n})(),B0=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Bs(n){return!!n&&typeof n.then=="function"}function oN(n){return!!n&&typeof n.subscribe=="function"}var sN=new j("");function Vw(n){return Zu([{provide:sN,multi:!0,useValue:n}])}var aN=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=R(sN,{optional:!0})??[];injector=R(Oe);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=ln(this.injector,i);if(Bs(o))t.push(o);else if(oN(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bw=new j("");function t$(){yv(()=>{throw new Z(600,!1)})}function n$(n){return n.isBoundToModule}var r$=10;function cN(n,e){return Array.isArray(e)?e.reduce(cN,n):H(H({},n),e)}var pr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=R(tj);afterRenderManager=R(fM);zonelessEnabled=R(ZA);rootEffectScheduler=R(e$);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new we;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=R(qr).hasPendingTasks.pipe(Y(t=>!t));constructor(){R(Ec,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=R(qe);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Oe.NULL){ze(10);let o=t instanceof qM;if(!this._injector.get(aN).done){let m="";throw new Z(405,m)}let a;o?a=t:a=this._injector.get(ug).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let c=n$(a)?void 0:this._injector.get(pc),u=r||a.selector,d=a.create(i,[],u,c),f=d.location.nativeElement,g=d.injector.get(Fw,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),mp(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),ze(11,d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ze(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(_w.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Z(101,!1);let t=be(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,be(t),this.afterTick.next(),ze(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(fc,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<r$;)ze(14),this.synchronizeOnce(),ze(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)i$(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Xp(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;mp(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Bw,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>mp(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Z(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mp(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function i$(n,e,t,r){if(!t&&!Xp(n))return;BM(n,e,t&&!r?0:1)}function od(n,e,t,r){let i=Ee(),o=Xu();if(mo(i,o,e)){let s=ct(),a=ed();oH(a,i,n,e,t,r)}return od}function jw(n,e,t,r){return mo(n,Xu(),t)?e+zp(t)+r:Wr}function up(n,e){return n<<17|e<<2}function Ns(n){return n>>17&32767}function o$(n){return(n&2)==2}function s$(n,e){return n&131071|e<<17}function j0(n){return n|2}function gc(n){return(n&131068)>>2}function Qv(n,e){return n&-131069|e<<2}function a$(n){return(n&1)===1}function H0(n){return n|1}function c$(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ns(s),c=gc(s);n[r]=t;let u=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||Yu(f,d)>0)&&(u=!0)}else d=t;if(i)if(c!==0){let g=Ns(n[a+1]);n[r+1]=up(g,a),g!==0&&(n[g+1]=Qv(n[g+1],r)),n[a+1]=s$(n[a+1],r)}else n[r+1]=up(a,0),a!==0&&(n[a+1]=Qv(n[a+1],r)),a=r;else n[r+1]=up(c,0),a===0?a=r:n[c+1]=Qv(n[c+1],r),c=r;u&&(n[r+1]=j0(n[r+1])),LS(n,d,r,!0),LS(n,d,r,!1),l$(e,d,n,r,o),s=up(a,c),o?e.classBindings=s:e.styleBindings=s}function l$(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Yu(o,e)>=0&&(t[r+1]=H0(t[r+1]))}function LS(n,e,t,r){let i=n[t+1],o=e===null,s=r?Ns(i):gc(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],u=n[s+1];u$(c,e)&&(a=!0,n[s+1]=r?H0(u):j0(u)),s=r?Ns(u):gc(u)}a&&(n[t+1]=r?j0(i):H0(i))}function u$(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Yu(n,e)>=0:!1}var hr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function d$(n){return n.substring(hr.key,hr.keyEnd)}function h$(n){return f$(n),lN(n,uN(n,0,hr.textEnd))}function lN(n,e){let t=hr.textEnd;return t===e?-1:(e=hr.keyEnd=p$(n,hr.key=e,t),uN(n,e,t))}function f$(n){hr.key=0,hr.keyEnd=0,hr.value=0,hr.valueEnd=0,hr.textEnd=n.length}function uN(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function p$(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function ke(n,e,t){let r=Ee(),i=Xu();if(mo(r,i,e)){let o=ct(),s=ed();sg(o,s,r,n,e,r[et],t,!1)}return ke}function U0(n,e,t,r,i){Iw(e,n,t,i?"class":"style",r)}function Cn(n,e){return g$(n,e,null,!0),Cn}function _o(n){hN(E$,dN,n,!0)}function dN(n,e){for(let t=h$(e);t>=0;t=lN(e,t))Wp(n,d$(e),!0)}function g$(n,e,t,r){let i=Ee(),o=ct(),s=RA(2);if(o.firstUpdatePass&&pN(o,n,s,r),e!==Wr&&mo(i,s,e)){let a=o.data[Ps()];gN(o,a,i,i[et],n,i[s+1]=D$(e,t),r,s)}}function hN(n,e,t,r){let i=ct(),o=RA(2);i.firstUpdatePass&&pN(i,null,o,r);let s=Ee();if(t!==Wr&&mo(s,o,t)){let a=i.data[Ps()];if(mN(a,r)&&!fN(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=e0(c,t||"")),U0(i,a,s,t,r)}else b$(i,a,s,s[et],s[o+1],s[o+1]=w$(n,e,t),r,o)}}function fN(n,e){return e>=n.expandoStartIndex}function pN(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Ps()],s=fN(n,t);mN(o,r)&&e===null&&!s&&(e=!1),e=m$(i,o,e,r),c$(i,o,e,t,s,r)}}function m$(n,e,t,r){let i=SB(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Yv(null,n,e,t,r),t=Ku(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Yv(i,n,e,t,r),o===null){let c=_$(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Yv(null,n,e,c[1],r),c=Ku(c,e.attrs,r),y$(n,e,r,c))}else o=v$(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function _$(n,e,t){let r=t?e.classBindings:e.styleBindings;if(gc(r)!==0)return n[Ns(r)]}function y$(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ns(i)]=r}function v$(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Ku(r,s,t)}return Ku(r,e.attrs,t)}function Yv(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Ku(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ku(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Wp(n,s,t?!0:e[++o]))}return n===void 0?null:n}function w$(n,e,t){if(t==null||t==="")return vn;let r=[],i=rg(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function E$(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&Wp(n,r,t)}function b$(n,e,t,r,i,o,s,a){i===Wr&&(i=vn);let c=0,u=0,d=0<i.length?i[0]:null,f=0<o.length?o[0]:null;for(;d!==null||f!==null;){let g=c<i.length?i[c+1]:void 0,m=u<o.length?o[u+1]:void 0,v=null,b;d===f?(c+=2,u+=2,g!==m&&(v=f,b=m)):f===null||d!==null&&d<f?(c+=2,v=d):(u+=2,v=f,b=m),v!==null&&gN(n,e,t,r,v,b,s,a),d=c<i.length?i[c]:null,f=u<o.length?o[u]:null}}function gN(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],d=a$(u)?VS(c,e,t,i,gc(u),s):void 0;if(!jp(d)){jp(o)||o$(u)&&(o=VS(c,null,t,i,a,s));let f=bA(Ps(),t);DH(r,s,f,i,o)}}function VS(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),d=u?c[1]:c,f=d===null,g=t[i+1];g===Wr&&(g=f?vn:void 0);let m=f?jv(g,r):d===r?g:void 0;if(u&&!jp(m)&&(m=jv(c,r)),jp(m)&&(a=m,s))return a;let v=n[i+1];i=s?Ns(v):gc(v)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=jv(c,r))}return a}function jp(n){return n!==void 0}function D$(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=wn(rg(n)))),n}function mN(n,e){return(n.flags&(e?8:16))!==0}function pg(n,e,t){let r=Ee(),i=jw(r,n,e,t);hN(Wp,dN,i,!0)}function se(n,e,t,r){let i=Ee(),o=ct(),s=cn+n,a=i[et],c=o.firstCreatePass?QM(s,o,i,e,Tw,iw(),t,r):o.data[s],u=C$(o,i,c,a,e,n);i[s]=u;let d=Jp(c);return Os(c,!0),DM(a,u,c),!Mw(c)&&eg()&&ag(o,i,u,c),(gB()===0||d)&&wc(u,i),mB(),d&&(og(o,i,c),vw(o,c,i)),r!==null&&Cw(i,c),se}function ce(){let n=Dn();ow()?sw():(n=n.parent,Os(n,!1));let e=n;yB(e)&&vB(),_B();let t=ct();return t.firstCreatePass&&YM(t,e),e.classesWithoutHost!=null&&OB(e)&&U0(t,e,Ee(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&PB(e)&&U0(t,e,Ee(),e.stylesWithoutHost,!1),ce}function Ze(n,e,t,r){return se(n,e,t,r),ce(),Ze}var C$=(n,e,t,r,i,o)=>(tg(!0),EM(r,i,NB()));function T$(n,e,t,r,i){let o=e.consts,s=dc(o,r),a=nd(e,n,8,"ng-container",s);s!==null&&N0(a,s,!0);let c=dc(o,i);return iw()&&Ow(e,t,a,c,Tw),a.mergedAttrs=hc(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function Kn(n,e,t){let r=Ee(),i=ct(),o=n+cn,s=i.firstCreatePass?T$(o,i,r,e,t):i.data[o];Os(s,!0);let a=I$(i,r,s,n);return r[o]=a,eg()&&ag(i,r,a,s),wc(a,r),Jp(s)&&(og(i,r,s),vw(i,s,r)),t!=null&&Cw(r,s),Kn}function Qn(){let n=Dn(),e=ct();return ow()?sw():(n=n.parent,Os(n,!1)),e.firstCreatePass&&(uw(e,n),ew(n)&&e.queries.elementEnd(n)),Qn}var I$=(n,e,t,r)=>(tg(!0),Gj(e[et],""));function Ni(){return Ee()}function Hw(n,e,t){let r=Ee(),i=Xu();if(mo(r,i,e)){let o=ct(),s=ed();sg(o,s,r,n,e,r[et],t,!0)}return Hw}var _s=void 0;function S$(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var A$=["en",[["a","p"],["AM","PM"],_s],[["AM","PM"],_s,_s],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_s,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_s,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_s,"{1} 'at' {0}",_s],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",S$],Zv={};function Yn(n){let e=M$(n),t=BS(e);if(t)return t;let r=e.split("-")[0];if(t=BS(r),t)return t;if(r==="en")return A$;throw new Z(701,!1)}function BS(n){return n in Zv||(Zv[n]=xn.ng&&xn.ng.common&&xn.ng.common.locales&&xn.ng.common.locales[n]),Zv[n]}var ft=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(ft||{});function M$(n){return n.toLowerCase().replace(/_/g,"-")}var Hp="en-US";var N$=Hp;function R$(n){typeof n=="string"&&(N$=n.toLowerCase().replace(/_/g,"-"))}function jS(n,e,t){return function r(i){if(i===Function)return t;let o=_c(n)?jr(n.index,e):e;xw(o,5);let s=e[En],a=HS(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=HS(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function HS(n,e,t,r){let i=be(null);try{return ze(6,e,t),t(r)!==!1}catch(o){return x$(n,o),!1}finally{ze(7,e,t),be(i)}}function x$(n,e){let t=n[bs],r=t?t.get(Hr,null):null;r&&r.handleError(e)}function US(n,e,t,r,i,o){let s=e[t],a=e[ye],u=a.data[t].outputs[r],d=s[u],f=a.firstCreatePass?rw(a):null,g=nw(e),m=d.subscribe(o),v=g.length;g.push(o,m),f&&f.push(i,n.index,v,-(v+1))}var O$=new Map;function Qr(n,e,t,r){let i=Ee(),o=ct(),s=Dn();return _N(o,i,i[et],s,n,e,r),Qr}function P$(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[bp],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function _N(n,e,t,r,i,o,s){let a=Jp(r),u=n.firstCreatePass?rw(n):null,d=nw(e),f=!0;if(r.type&3||s){let g=Gr(r,e),m=s?s(g):g,v=d.length,b=s?F=>s(Br(F[r.index])):r.index,T=null;if(!s&&a&&(T=P$(n,e,i,r.index)),T!==null){let F=T.__ngLastListenerFn__||T;F.__ngNextListenerFn__=o,T.__ngLastListenerFn__=o,f=!1}else{o=jS(r,e,o);let F=e[bs].get(ng);O$.get(F)?.(m,i,o);let P=t.listen(m,i,o);d.push(o,P),u&&u.push(i,b,v,v+1)}}else o=jS(r,e,o);if(f){let g=r.outputs?.[i],m=r.hostDirectiveOutputs?.[i];if(m&&m.length)for(let v=0;v<m.length;v+=2){let b=m[v],T=m[v+1];US(r,e,b,T,i,o)}if(g&&g.length)for(let v of g)US(r,e,v,i,i,o)}}function We(n=1){return MB(n)}function k$(n,e){let t=null,r=kj(n);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){t=i;continue}if(r===null?wM(n,o,!0):Vj(r,o))return i}return t}function Uw(n){let e=Ee()[qn][bn];if(!e.projection){let t=n?n.length:1,r=e.projection=U2(t,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=n?k$(o,n):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function $w(n,e=0,t,r,i,o){let s=Ee(),a=ct(),c=r?n+1:null;c!==null&&rN(s,a,c,r,i,o,null,t);let u=nd(a,cn+n,16,null,t||null);u.projection===null&&(u.projection=e),sw();let f=!s[Gu]||AA();s[qn][bn].projection[u.projection]===null&&c!==null?F$(s,a,c):f&&!Mw(u)&&EH(a,s,u)}function F$(n,e,t){let r=cn+t,i=e.data[r],o=n[r],s=S0(o,i.tView.ssrId),a=AM(n,i,void 0,{dehydratedView:s});GM(o,a,0,D0(i,s))}function sd(n,e,t){return gg(n,"",e,"",t),sd}function gg(n,e,t,r,i){let o=Ee(),s=jw(o,e,t,r);if(s!==Wr){let a=ct(),c=ed();sg(a,c,o,n,s,o[et],i,!1)}return gg}function yN(n,e,t){CU(n,e,t)}function Gw(n){let e=Ee(),t=ct(),r=xA();aw(r+1);let i=Pw(t,r);if(n.dirty&&uB(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=SU(e,r);n.reset(o,ij),n.notifyOnChanges()}return!0}return!1}function zw(){return bU(Ee(),xA())}function L$(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function ad(n){let e=EB();return CA(e,cn+n)}function Le(n,e=""){let t=Ee(),r=ct(),i=n+cn,o=r.firstCreatePass?nd(r,i,1,e,null):r.data[i],s=V$(r,t,o,e,n);t[i]=s,eg()&&ag(r,t,s,o),Os(o,!1)}var V$=(n,e,t,r,i)=>(tg(!0),Uj(e[et],r));function Zn(n){return js("",n,""),Zn}function js(n,e,t){let r=Ee(),i=jw(r,n,e,t);return i!==Wr&&B$(r,Ps(),i),js}function B$(n,e,t){let r=bA(e,n);$j(n[et],r,t)}function cd(n,e,t){rM(e)&&(e=e());let r=Ee(),i=Xu();if(mo(r,i,e)){let o=ct(),s=ed();sg(o,s,r,n,e,r[et],t,!1)}return cd}function mg(n,e){let t=rM(n);return t&&n.set(e),t}function ld(n,e){let t=Ee(),r=ct(),i=Dn();return _N(r,t,t[et],i,n,e),ld}function j$(n,e,t){let r=ct();if(r.firstCreatePass){let i=Vr(n);$0(t,r.data,r.blueprint,i,!0),$0(e,r.data,r.blueprint,i,!1)}}function $0(n,e,t,r,i){if(n=an(n),Array.isArray(n))for(let o=0;o<n.length;o++)$0(n[o],e,t,r,i);else{let o=ct(),s=Ee(),a=Dn(),c=lc(n)?n:an(n.provide),u=pA(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(lc(n)||!n.multi){let m=new Ss(u,i,pe),v=Xv(c,e,i?d:d+g,f);v===-1?(h0(Mp(a,s),o,c),Jv(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(m),s.push(m)):(t[v]=m,s[v]=m)}else{let m=Xv(c,e,d+g,f),v=Xv(c,e,d,d+g),b=m>=0&&t[m],T=v>=0&&t[v];if(i&&!T||!i&&!b){h0(Mp(a,s),o,c);let F=$$(i?U$:H$,t.length,i,r,u);!i&&T&&(t[v].providerFactory=F),Jv(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(F),s.push(F)}else{let F=vN(t[i?v:m],u,!i&&r);Jv(o,n,m>-1?m:v,F)}!i&&r&&T&&t[v].componentProviders++}}}function Jv(n,e,t,r){let i=lc(e),o=Z2(e);if(i||o){let c=(o?an(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=u.indexOf(t);d===-1?u.push(t,[r,c]):u[d+1].push(r,c)}else u.push(t,c)}}}function vN(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Xv(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function H$(n,e,t,r,i){return G0(this.multi,[])}function U$(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=qu(r,r[ye],this.providerFactory.index,i);s=c.slice(0,a),G0(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],G0(o,s);return s}function G0(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function $$(n,e,t,r,i){let o=new Ss(n,t,pe);return o.multi=[],o.index=e,o.componentProviders=0,vN(o,i,r&&!t),o}function ud(n,e=[]){return t=>{t.providersResolver=(r,i)=>j$(r,i?i(n):n,e)}}function G$(n,e){let t=n[e];return t===Wr?void 0:t}function z$(n,e,t,r,i,o){let s=e+t;return mo(n,s,i)?QU(n,s+1,o?r.call(o,i):r(i)):G$(n,s+1)}function kn(n,e){let t=ct(),r,i=n+cn;t.firstCreatePass?(r=q$(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=ws(r.type,!0)),s,a=yn(pe);try{let c=Ap(!1),u=o();return Ap(c),L$(t,Ee(),i,u),u}finally{yn(a)}}function q$(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Fn(n,e,t){let r=n+cn,i=Ee(),o=CA(i,r);return W$(i,r)?z$(i,bB(),e,o.transform,t,o):o.transform(t)}function W$(n,e){return n[ye].data[e].pure}function dd(n,e){return lg(n,e)}var dp=null;function K$(n){dp!==null&&(n.defaultEncapsulation!==dp.defaultEncapsulation||n.preserveWhitespaces!==dp.preserveWhitespaces)||(dp=n)}var Rs=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},wN=new Rs("19.2.10"),z0=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},EN=(()=>{class n{compileModuleSync(t){return new Bp(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=uA(t),o=yM(i.declarations).reduce((s,a)=>{let c=po(a);return c&&s.push(new Ms(c)),s},[]);return new z0(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Q$=new j("");function Y$(n,e,t){let r=new Bp(t);return Promise.resolve(r)}function $S(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var Z$=(()=>{class n{zone=R(fe);changeDetectionScheduler=R(As);applicationRef=R(pr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function J$({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new fe(he(H({},bN()),{scheduleInRootZone:t})),[{provide:fe,useFactory:n},{provide:Uu,multi:!0,useFactory:()=>{let r=R(Z$,{optional:!0});return()=>r.initialize()}},{provide:Uu,multi:!0,useFactory:()=>{let r=R(X$);return()=>{r.initialize()}}},e===!0?{provide:JA,useValue:!0}:[],{provide:XA,useValue:t??YA}]}function bN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var X$=(()=>{class n{subscription=new at;initialized=!1;zone=R(fe);pendingTasks=R(qr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{fe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{fe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var e3=(()=>{class n{appRef=R(pr);taskService=R(qr);ngZone=R(fe);zonelessEnabled=R(ZA);tracing=R(Ec,{optional:!0});disableScheduling=R(JA,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new at;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Rp):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(R(XA,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof xp||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?DS:eM;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Rp+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,DS(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function t3(){return typeof $localize<"u"&&$localize.locale||Hp}var hd=new j("",{providedIn:"root",factory:()=>R(hd,_e.Optional|_e.SkipSelf)||t3()});var Up=new j(""),n3=new j("");function Lu(n){return!n.moduleRef}function r3(n){let e=Lu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(fe);return t.run(()=>{Lu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Hr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Lu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Up);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Up);s.add(o),n.moduleRef.onDestroy(()=>{mp(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return o3(r,t,()=>{let o=e.get(aN);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(hd,Hp);if(R$(s||Hp),!e.get(n3,!0))return Lu(n)?e.get(pr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Lu(n)){let c=e.get(pr);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return i3(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function i3(n,e){let t=n.injector.get(pr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Z(-403,!1);e.push(n)}function o3(n,e,t){try{let r=t();return Bs(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var DN=(()=>{class n{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(t){this._injector=t}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>ej(r?.ngZone,he(H({},bN({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[J$({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:As,useExisting:e3}],c=PU(t.moduleType,this.injector,a);return r3({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=cN({},r);return Y$(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Z(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Up,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(r){return new(r||n)(k(Oe))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Hu=null,CN=new j("");function s3(n){if(Hu&&!Hu.get(CN,!1))throw new Z(400,!1);t$(),Hu=n;let e=n.get(DN);return l3(n),e}function qw(n,e,t=[]){let r=`Platform: ${e}`,i=new j(r);return(o=[])=>{let s=TN();if(!s||s.injector.get(CN,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):s3(a3(a,r))}return c3(i)}}function a3(n=[],e){return Oe.create({name:e,providers:[{provide:Kp,useValue:"platform"},{provide:Up,useValue:new Set([()=>Hu=null])},...n]})}function c3(n){let e=TN();if(!e)throw new Z(401,!1);return e}function TN(){return Hu?.get(DN)??null}function l3(n){let e=n.get(gw,null);ln(n,()=>{e?.forEach(t=>t())})}function fd(){return!1}var gr=(()=>{class n{static __NG_ELEMENT_ID__=u3}return n})();function u3(n){return d3(Dn(),Ee(),(n&16)===16)}function d3(n,e,t){if(_c(n)&&!t){let r=jr(n.index,e);return new Wu(r,r)}else if(n.type&175){let r=e[qn];return new Wu(r,e)}return null}var q0=class{constructor(){}supports(e){return nN(e)}create(e){return new W0(e)}},h3=(n,e)=>e,W0=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||h3}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<GS(r,i,o)?t:r,a=GS(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,d=c-i;if(u!=d){for(let g=0;g<u;g++){let m=g<o.length?o[g]:o[g]=0,v=m+g;d<=v&&v<u&&(o[g]=m+1)}let f=s.previousIndex;o[f]=d-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!nN(e))throw new Z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,WU(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new K0(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new $p),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new $p),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},K0=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Q0=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},$p=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Q0,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function GS(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function zS(){return new Ww([new q0])}var Ww=(()=>{class n{factories;static \u0275prov=V({token:n,providedIn:"root",factory:zS});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||zS()),deps:[[n,new B2,new Z0]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Z(901,!1)}}return n})();var IN=qw(null,"core",[]),SN=(()=>{class n{constructor(t){}static \u0275fac=function(r){return new(r||n)(k(pr))};static \u0275mod=oe({type:n});static \u0275inj=ie({})}return n})();function Ri(n){return Ev(n)}function pd(n,e){return _v(n,e?.equal)}var qS=class{[$n];constructor(e){this[$n]=e}destroy(){this[$n].destroy()}};function _g(n,e){let t=po(n),r=e.elementInjector||Qp();return new Ms(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector)}function AN(n){let e=po(n);if(!e)return null;let t=new Ms(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Ge=new j("");var RN=null;function Ln(){return RN}function Kw(n){RN??=n}var gd=class{},md=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>R(xN),providedIn:"platform"})}return n})(),Qw=new j(""),xN=(()=>{class n extends md{_location;_history;_doc=R(Ge);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ln().getBaseHref(this._doc)}onPopState(t){let r=Ln().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Ln().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function yg(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function MN(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function mr(n){return n&&n[0]!=="?"?`?${n}`:n}var xi=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>R(wg),providedIn:"root"})}return n})(),vg=new j(""),wg=(()=>{class n extends xi{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??R(Ge).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return yg(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+mr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+mr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+mr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(k(md),k(vg,8))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yo=(()=>{class n{_subject=new we;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=g3(MN(NN(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+mr(r))}normalize(t){return n.stripTrailingSlash(p3(this._basePath,NN(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+mr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+mr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=mr;static joinWithSlash=yg;static stripTrailingSlash=MN;static \u0275fac=function(r){return new(r||n)(k(xi))};static \u0275prov=V({token:n,factory:()=>f3(),providedIn:"root"})}return n})();function f3(){return new yo(k(xi))}function p3(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function NN(n){return n.replace(/\/index.html$/,"")}function g3(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Xw=(()=>{class n extends xi{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=yg(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+mr(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+mr(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(k(md),k(vg,8))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();var Xt=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Xt||{}),Ve=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Ve||{}),Tn=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Tn||{}),Pi={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function LN(n){return Yn(n)[ft.LocaleId]}function VN(n,e,t){let r=Yn(n),i=[r[ft.DayPeriodsFormat],r[ft.DayPeriodsStandalone]],o=Jn(i,e);return Jn(o,t)}function BN(n,e,t){let r=Yn(n),i=[r[ft.DaysFormat],r[ft.DaysStandalone]],o=Jn(i,e);return Jn(o,t)}function jN(n,e,t){let r=Yn(n),i=[r[ft.MonthsFormat],r[ft.MonthsStandalone]],o=Jn(i,e);return Jn(o,t)}function HN(n,e){let r=Yn(n)[ft.Eras];return Jn(r,e)}function _d(n,e){let t=Yn(n);return Jn(t[ft.DateFormat],e)}function yd(n,e){let t=Yn(n);return Jn(t[ft.TimeFormat],e)}function vd(n,e){let r=Yn(n)[ft.DateTimeFormat];return Jn(r,e)}function wd(n,e){let t=Yn(n),r=t[ft.NumberSymbols][e];if(typeof r>"u"){if(e===Pi.CurrencyDecimal)return t[ft.NumberSymbols][Pi.Decimal];if(e===Pi.CurrencyGroup)return t[ft.NumberSymbols][Pi.Group]}return r}function UN(n){if(!n[ft.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[ft.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function $N(n){let e=Yn(n);return UN(e),(e[ft.ExtraData][2]||[]).map(r=>typeof r=="string"?Yw(r):[Yw(r[0]),Yw(r[1])])}function GN(n,e,t){let r=Yn(n);UN(r);let i=[r[ft.ExtraData][0],r[ft.ExtraData][1]],o=Jn(i,e)||[];return Jn(o,t)||[]}function Jn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Yw(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var m3=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Eg={},_3=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function eE(n,e,t,r){let i=I3(n);e=Oi(t,e)||e;let s=[],a;for(;e;)if(a=_3.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=qN(r,c),i=T3(i,r));let u="";return s.forEach(d=>{let f=D3(d);u+=f?f(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function Ig(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Oi(n,e){let t=LN(n);if(Eg[t]??={},Eg[t][e])return Eg[t][e];let r="";switch(e){case"shortDate":r=_d(n,Tn.Short);break;case"mediumDate":r=_d(n,Tn.Medium);break;case"longDate":r=_d(n,Tn.Long);break;case"fullDate":r=_d(n,Tn.Full);break;case"shortTime":r=yd(n,Tn.Short);break;case"mediumTime":r=yd(n,Tn.Medium);break;case"longTime":r=yd(n,Tn.Long);break;case"fullTime":r=yd(n,Tn.Full);break;case"short":let i=Oi(n,"shortTime"),o=Oi(n,"shortDate");r=bg(vd(n,Tn.Short),[i,o]);break;case"medium":let s=Oi(n,"mediumTime"),a=Oi(n,"mediumDate");r=bg(vd(n,Tn.Medium),[s,a]);break;case"long":let c=Oi(n,"longTime"),u=Oi(n,"longDate");r=bg(vd(n,Tn.Long),[c,u]);break;case"full":let d=Oi(n,"fullTime"),f=Oi(n,"fullDate");r=bg(vd(n,Tn.Full),[d,f]);break}return r&&(Eg[t][e]=r),r}function bg(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function _r(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function y3(n,e){return _r(n,3).substring(0,e)}function Et(n,e,t=0,r=!1,i=!1){return function(o,s){let a=v3(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return y3(a,e);let c=wd(s,Pi.MinusSign);return _r(a,e,c,r,i)}}function v3(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Ke(n,e,t=Xt.Format,r=!1){return function(i,o){return w3(i,o,n,e,t,r)}}function w3(n,e,t,r,i,o){switch(t){case 2:return jN(e,i,r)[n.getMonth()];case 1:return BN(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let u=$N(e),d=GN(e,i,r),f=u.findIndex(g=>{if(Array.isArray(g)){let[m,v]=g,b=s>=m.hours&&a>=m.minutes,T=s<v.hours||s===v.hours&&a<v.minutes;if(m.hours<v.hours){if(b&&T)return!0}else if(b||T)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return VN(e,i,r)[s<12?0:1];case 3:return HN(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new Error(`unexpected translation type ${c}`)}}function Dg(n){return function(e,t,r){let i=-1*r,o=wd(t,Pi.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+_r(s,2,o)+_r(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+_r(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+_r(s,2,o)+":"+_r(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+_r(s,2,o)+":"+_r(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var E3=0,Tg=4;function b3(n){let e=Ig(n,E3,1).getDay();return Ig(n,0,1+(e<=Tg?Tg:Tg+7)-e)}function zN(n){let e=n.getDay(),t=e===0?-3:Tg-e;return Ig(n.getFullYear(),n.getMonth(),n.getDate()+t)}function Zw(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=zN(t),s=b3(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return _r(i,n,wd(r,Pi.MinusSign))}}function Cg(n,e=!1){return function(t,r){let o=zN(t).getFullYear();return _r(o,n,wd(r,Pi.MinusSign),e)}}var Jw={};function D3(n){if(Jw[n])return Jw[n];let e;switch(n){case"G":case"GG":case"GGG":e=Ke(3,Ve.Abbreviated);break;case"GGGG":e=Ke(3,Ve.Wide);break;case"GGGGG":e=Ke(3,Ve.Narrow);break;case"y":e=Et(0,1,0,!1,!0);break;case"yy":e=Et(0,2,0,!0,!0);break;case"yyy":e=Et(0,3,0,!1,!0);break;case"yyyy":e=Et(0,4,0,!1,!0);break;case"Y":e=Cg(1);break;case"YY":e=Cg(2,!0);break;case"YYY":e=Cg(3);break;case"YYYY":e=Cg(4);break;case"M":case"L":e=Et(1,1,1);break;case"MM":case"LL":e=Et(1,2,1);break;case"MMM":e=Ke(2,Ve.Abbreviated);break;case"MMMM":e=Ke(2,Ve.Wide);break;case"MMMMM":e=Ke(2,Ve.Narrow);break;case"LLL":e=Ke(2,Ve.Abbreviated,Xt.Standalone);break;case"LLLL":e=Ke(2,Ve.Wide,Xt.Standalone);break;case"LLLLL":e=Ke(2,Ve.Narrow,Xt.Standalone);break;case"w":e=Zw(1);break;case"ww":e=Zw(2);break;case"W":e=Zw(1,!0);break;case"d":e=Et(2,1);break;case"dd":e=Et(2,2);break;case"c":case"cc":e=Et(7,1);break;case"ccc":e=Ke(1,Ve.Abbreviated,Xt.Standalone);break;case"cccc":e=Ke(1,Ve.Wide,Xt.Standalone);break;case"ccccc":e=Ke(1,Ve.Narrow,Xt.Standalone);break;case"cccccc":e=Ke(1,Ve.Short,Xt.Standalone);break;case"E":case"EE":case"EEE":e=Ke(1,Ve.Abbreviated);break;case"EEEE":e=Ke(1,Ve.Wide);break;case"EEEEE":e=Ke(1,Ve.Narrow);break;case"EEEEEE":e=Ke(1,Ve.Short);break;case"a":case"aa":case"aaa":e=Ke(0,Ve.Abbreviated);break;case"aaaa":e=Ke(0,Ve.Wide);break;case"aaaaa":e=Ke(0,Ve.Narrow);break;case"b":case"bb":case"bbb":e=Ke(0,Ve.Abbreviated,Xt.Standalone,!0);break;case"bbbb":e=Ke(0,Ve.Wide,Xt.Standalone,!0);break;case"bbbbb":e=Ke(0,Ve.Narrow,Xt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ke(0,Ve.Abbreviated,Xt.Format,!0);break;case"BBBB":e=Ke(0,Ve.Wide,Xt.Format,!0);break;case"BBBBB":e=Ke(0,Ve.Narrow,Xt.Format,!0);break;case"h":e=Et(3,1,-12);break;case"hh":e=Et(3,2,-12);break;case"H":e=Et(3,1);break;case"HH":e=Et(3,2);break;case"m":e=Et(4,1);break;case"mm":e=Et(4,2);break;case"s":e=Et(5,1);break;case"ss":e=Et(5,2);break;case"S":e=Et(6,1);break;case"SS":e=Et(6,2);break;case"SSS":e=Et(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Dg(0);break;case"ZZZZZ":e=Dg(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Dg(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Dg(2);break;default:return null}return Jw[n]=e,e}function qN(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function C3(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function T3(n,e,t){let i=n.getTimezoneOffset(),o=qN(e,i);return C3(n,-1*(o-i))}function I3(n){if(ON(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Ig(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(m3))return S3(r)}let e=new Date(n);if(!ON(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function S3(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,u),e}function ON(n){return n instanceof Date&&!isNaN(n.valueOf())}var Sg=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Xn=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Sg(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),PN(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);PN(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(pe(Kr),pe($r),pe(Ww))};static \u0275dir=Jt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function PN(n,e){n.context.$implicit=e.item}var yr=(()=>{class n{_viewContainer;_context=new Ag;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){kN(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){kN(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(pe(Kr),pe($r))};static \u0275dir=Jt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Ag=class{$implicit=null;ngIf=null};function kN(n,e){if(n&&!n.createEmbeddedView)throw new Z(2020,!1)}function A3(n,e){return new Z(2100,!1)}var M3="mediumDate",WN=new j(""),KN=new j(""),tE=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??M3,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return eE(t,s,o||this.locale,a)}catch(s){throw A3(n,s.message)}}static \u0275fac=function(r){return new(r||n)(pe(hd,16),pe(WN,24),pe(KN,24))};static \u0275pipe=dg({name:"date",type:n,pure:!0})}return n})();var Yr=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=oe({type:n});static \u0275inj=ie({})}return n})();function Ed(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var nE="browser",QN="server";function vo(n){return n===QN}var Hs=class{};var ZN=(()=>{class n{static \u0275prov=V({token:n,providedIn:"root",factory:()=>new rE(R(Ge),window)})}return n})(),rE=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=x3(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function x3(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Rg=new j(""),aE=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Z(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(k(Rg),k(fe))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),bd=class{_doc;constructor(e){this._doc=e}manager},Mg="ng-app-id";function JN(n){for(let e of n)e.remove()}function XN(n,e){let t=e.createElement("style");return t.textContent=n,t}function O3(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Mg}="${e}"],link[${Mg}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Mg),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function oE(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var cE=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=vo(o),O3(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,XN);r?.forEach(i=>this.addUsage(i,this.external,oE))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(JN(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])JN(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,XN(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,oE(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Mg,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(k(Ge),k(ng),k(mw,8),k(Pn))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),iE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},lE=/%COMP%/g;var tR="%COMP%",P3=`_nghost-${tR}`,k3=`_ngcontent-${tR}`,F3=!0,L3=new j("",{providedIn:"root",factory:()=>F3});function V3(n){return k3.replace(lE,n)}function B3(n){return P3.replace(lE,n)}function nR(n,e){return e.map(t=>t.replace(lE,n))}var uE=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c,u=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.tracingService=d,this.platformIsServer=vo(a),this.defaultRenderer=new Dd(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ur.ShadowDom&&(r=he(H({},r),{encapsulation:Ur.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Ng?i.applyToHost(t):i instanceof Cd&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case Ur.Emulated:o=new Ng(c,u,r,this.appId,d,s,a,f,g);break;case Ur.ShadowDom:return new sE(c,u,t,r,s,a,this.nonce,f,g);default:o=new Cd(c,u,r,d,s,a,f,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(k(aE),k(cE),k(ng),k(L3),k(Ge),k(Pn),k(fe),k(mw),k(Ec,8))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),Dd=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(iE[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(eR(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(eR(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Z(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=iE[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=iE[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ti.DashCase|Ti.Important)?e.style.setProperty(t,r,i&Ti.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ti.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Ln().getGlobalEventTarget(this.doc,e),!e))throw new Z(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function eR(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var sE=class extends Dd{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=i.styles;d=nR(i.id,d);for(let g of d){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=g,this.shadowRoot.appendChild(m)}let f=i.getExternalStyles?.();if(f)for(let g of f){let m=oE(g,o);a&&m.setAttribute("nonce",a),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Cd=class extends Dd{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=u?nR(u,d):d,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Ng=class extends Cd{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,u){let d=i+"-"+r.id;super(e,t,r,o,s,a,c,u,d),this.contentAttr=V3(d),this.hostAttr=B3(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var xg=class n extends gd{supportsDOMEvents=!0;static makeCurrent(){Kw(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=j3();return t==null?null:H3(t)}resetBaseElement(){Td=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ed(document.cookie,e)}},Td=null;function j3(){return Td=Td||document.querySelector("base"),Td?Td.getAttribute("href"):null}function H3(n){return new URL(n,document.baseURI).pathname}var Og=class{addToWindow(e){xn.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new Z(5103,!1);return o},xn.getAllAngularTestabilities=()=>e.getAllTestabilities(),xn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=xn.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};xn.frameworkStabilizers||(xn.frameworkStabilizers=[]),xn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Ln().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},U3=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),iR=(()=>{class n extends bd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(k(Ge))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),rR=["alt","control","meta","shift"],$3={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},G3={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},oR=(()=>{class n extends bd{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ln().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),rR.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=$3[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),rR.forEach(s=>{if(s!==i){let a=G3[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(k(Ge))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();function z3(){xg.makeCurrent()}function q3(){return new Hr}function W3(){return uM(document),document}var K3=[{provide:Pn,useValue:nE},{provide:gw,useValue:z3,multi:!0},{provide:Ge,useFactory:W3}],dE=qw(IN,"browser",K3);var Q3=[{provide:id,useClass:Og},{provide:Fw,useClass:hg,deps:[fe,fg,id]},{provide:hg,useClass:hg,deps:[fe,fg,id]}],Y3=[{provide:Kp,useValue:"root"},{provide:Hr,useFactory:q3},{provide:Rg,useClass:iR,multi:!0,deps:[Ge]},{provide:Rg,useClass:oR,multi:!0,deps:[Ge]},uE,cE,aE,{provide:fc,useExisting:uE},{provide:Hs,useClass:U3},[]],hE=(()=>{class n{constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275mod=oe({type:n});static \u0275inj=ie({providers:[...Y3,...Q3],imports:[Yr,SN]})}return n})();var Tc=class{},Id=class{},Zr=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var kg=class{encodeKey(e){return sR(e)}encodeValue(e){return sR(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function Z3(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var J3=/%(\d[a-f0-9])/gi,X3={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function sR(n){return encodeURIComponent(n).replace(J3,(e,t)=>X3[t]??e)}function Pg(n){return`${n}`}var ki=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new kg,e.fromString){if(e.fromObject)throw new Z(2805,!1);this.map=Z3(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Pg):[Pg(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Pg(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Pg(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Fg=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function e4(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function aR(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function cR(n){return typeof Blob<"u"&&n instanceof Blob}function lR(n){return typeof FormData<"u"&&n instanceof FormData}function t4(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var uR="Content-Type",dR="Accept",fR="X-Request-URL",pR="text/plain",gR="application/json",n4=`${gR}, ${pR}, */*`,Cc=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(e4(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Zr,this.context??=new Fg,!this.params)this.params=new ki,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||aR(this.body)||cR(this.body)||lR(this.body)||t4(this.body)?this.body:this.body instanceof ki?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||lR(this.body)?null:cR(this.body)?this.body.type||null:aR(this.body)?null:typeof this.body=="string"?pR:this.body instanceof ki?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?gR:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,u=e.headers||this.headers,d=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((g,m)=>g.set(m,e.setHeaders[m]),u)),e.setParams&&(d=Object.keys(e.setParams).reduce((g,m)=>g.set(m,e.setParams[m]),d)),new n(t,r,s,{params:d,headers:u,context:f,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},Us=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Us||{}),Ic=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new Zr,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Lg=class n extends Ic{constructor(e={}){super(e)}type=Us.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Sd=class n extends Ic{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Us.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ad=class extends Ic{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},r4=200,i4=204;function fE(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Jr=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Cc)o=t;else{let c;i.headers instanceof Zr?c=i.headers:c=new Zr(i.headers);let u;i.params&&(i.params instanceof ki?u=i.params:u=new ki({fromObject:i.params})),o=new Cc(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=Q(o).pipe(Gn(c=>this.handler.handle(c)));if(t instanceof Cc||i.observe==="events")return s;let a=s.pipe(Ue(c=>c instanceof Sd));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Y(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Z(2806,!1);return c.body}));case"blob":return a.pipe(Y(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Z(2807,!1);return c.body}));case"text":return a.pipe(Y(c=>{if(c.body!==null&&typeof c.body!="string")throw new Z(2808,!1);return c.body}));case"json":default:return a.pipe(Y(c=>c.body))}case"response":return a;default:throw new Z(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new ki().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,fE(i,r))}post(t,r,i={}){return this.request("POST",t,fE(i,r))}put(t,r,i={}){return this.request("PUT",t,fE(i,r))}static \u0275fac=function(r){return new(r||n)(k(Tc))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();var o4=new j("");function mR(n,e){return e(n)}function s4(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function a4(n,e,t){return(r,i)=>ln(t,()=>e(r,o=>n(o,i)))}var _R=new j(""),gE=new j(""),yR=new j(""),mE=new j("",{providedIn:"root",factory:()=>!0});function c4(){let n=null;return(e,t)=>{n===null&&(n=(R(_R,{optional:!0})??[]).reduceRight(s4,mR));let r=R(qr);if(R(mE)){let o=r.add();return n(e,t).pipe(bi(()=>r.remove(o)))}else return n(e,t)}}var Vg=(()=>{class n extends Tc{backend;injector;chain=null;pendingTasks=R(qr);contributeToStability=R(mE);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(gE),...this.injector.get(yR,[])]));this.chain=r.reduceRight((i,o)=>a4(i,o,this.injector),mR)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(bi(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(k(Id),k(qe))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();var l4=/^\)\]\}',?\n/,u4=RegExp(`^${fR}:`,"m");function d4(n){return"responseURL"in n&&n.responseURL?n.responseURL:u4.test(n.getAllResponseHeaders())?n.getResponseHeader(fR):null}var pE=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new Z(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Ce(r.\u0275loadImpl()):Q(null)).pipe(Re(()=>new ne(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((b,T)=>s.setRequestHeader(b,T.join(","))),t.headers.has(dR)||s.setRequestHeader(dR,n4),!t.headers.has(uR)){let b=t.detectContentTypeHeader();b!==null&&s.setRequestHeader(uR,b)}if(t.responseType){let b=t.responseType.toLowerCase();s.responseType=b!=="json"?b:"text"}let a=t.serializeBody(),c=null,u=()=>{if(c!==null)return c;let b=s.statusText||"OK",T=new Zr(s.getAllResponseHeaders()),F=d4(s)||t.url;return c=new Lg({headers:T,status:s.status,statusText:b,url:F}),c},d=()=>{let{headers:b,status:T,statusText:F,url:$}=u(),P=null;T!==i4&&(P=typeof s.response>"u"?s.responseText:s.response),T===0&&(T=P?r4:0);let U=T>=200&&T<300;if(t.responseType==="json"&&typeof P=="string"){let W=P;P=P.replace(l4,"");try{P=P!==""?JSON.parse(P):null}catch(K){P=W,U&&(U=!1,P={error:K,text:P})}}U?(o.next(new Sd({body:P,headers:b,status:T,statusText:F,url:$||void 0})),o.complete()):o.error(new Ad({error:P,headers:b,status:T,statusText:F,url:$||void 0}))},f=b=>{let{url:T}=u(),F=new Ad({error:b,status:s.status||0,statusText:s.statusText||"Unknown Error",url:T||void 0});o.error(F)},g=!1,m=b=>{g||(o.next(u()),g=!0);let T={type:Us.DownloadProgress,loaded:b.loaded};b.lengthComputable&&(T.total=b.total),t.responseType==="text"&&s.responseText&&(T.partialText=s.responseText),o.next(T)},v=b=>{let T={type:Us.UploadProgress,loaded:b.loaded};b.lengthComputable&&(T.total=b.total),o.next(T)};return s.addEventListener("load",d),s.addEventListener("error",f),s.addEventListener("timeout",f),s.addEventListener("abort",f),t.reportProgress&&(s.addEventListener("progress",m),a!==null&&s.upload&&s.upload.addEventListener("progress",v)),s.send(a),o.next({type:Us.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",d),s.removeEventListener("timeout",f),t.reportProgress&&(s.removeEventListener("progress",m),a!==null&&s.upload&&s.upload.removeEventListener("progress",v)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(k(Hs))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),vR=new j(""),h4="XSRF-TOKEN",f4=new j("",{providedIn:"root",factory:()=>h4}),p4="X-XSRF-TOKEN",g4=new j("",{providedIn:"root",factory:()=>p4}),Md=class{},m4=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ed(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(k(Ge),k(f4))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();function _4(n,e){let t=n.url.toLowerCase();if(!R(vR)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=R(Md).getToken(),i=R(g4);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var _E=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(_E||{});function y4(n,e){return{\u0275kind:n,\u0275providers:e}}function yE(...n){let e=[Jr,pE,Vg,{provide:Tc,useExisting:Vg},{provide:Id,useFactory:()=>R(o4,{optional:!0})??R(pE)},{provide:gE,useValue:_4,multi:!0},{provide:vR,useValue:!0},{provide:Md,useClass:m4}];for(let t of n)e.push(...t.\u0275providers);return Zu(e)}var hR=new j("");function vE(){return y4(_E.LegacyInterceptors,[{provide:hR,useFactory:c4},{provide:gE,useExisting:hR,multi:!0}])}var wR=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(k(Ge))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ge="primary",Ud=Symbol("RouteTitle"),TE=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function zs(n){return new TE(n)}function AR(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function w4(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Xr(n[t],e[t]))return!1;return!0}function Xr(n,e){let t=n?IE(n):void 0,r=e?IE(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!MR(n[i],e[i]))return!1;return!0}function IE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function MR(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function NR(n){return n.length>0?n[n.length-1]:null}function Co(n){return wi(n)?n:Bs(n)?Ce(Promise.resolve(n)):Q(n)}var E4={exact:xR,subset:OR},RR={exact:b4,subset:D4,ignored:()=>!0};function ER(n,e,t){return E4[t.paths](n.root,e.root,t.matrixParams)&&RR[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function b4(n,e){return Xr(n,e)}function xR(n,e,t){if(!$s(n.segments,e.segments)||!Hg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!xR(n.children[r],e.children[r],t))return!1;return!0}function D4(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>MR(n[t],e[t]))}function OR(n,e,t){return PR(n,e,e.segments,t)}function PR(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!$s(i,t)||e.hasChildren()||!Hg(i,t,r))}else if(n.segments.length===t.length){if(!$s(n.segments,t)||!Hg(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!OR(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!$s(n.segments,i)||!Hg(n.segments,i,r)||!n.children[ge]?!1:PR(n.children[ge],e,o,r)}}function Hg(n,e,t){return e.every((r,i)=>RR[t](n[i].parameters,r.parameters))}var ti=class{root;queryParams;fragment;_queryParamMap;constructor(e=new xe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=zs(this.queryParams),this._queryParamMap}toString(){return I4.serialize(this)}},xe=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ug(this)}},wo=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=zs(this.parameters),this._parameterMap}toString(){return FR(this)}};function C4(n,e){return $s(n,e)&&n.every((t,r)=>Xr(t.parameters,e[r].parameters))}function $s(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function T4(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ge&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ge&&(t=t.concat(e(i,r)))}),t}var qs=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>new Eo,providedIn:"root"})}return n})(),Eo=class{parse(e){let t=new AE(e);return new ti(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Nd(e.root,!0)}`,r=M4(e.queryParams),i=typeof e.fragment=="string"?`#${S4(e.fragment)}`:"";return`${t}${r}${i}`}},I4=new Eo;function Ug(n){return n.segments.map(e=>FR(e)).join("/")}function Nd(n,e){if(!n.hasChildren())return Ug(n);if(e){let t=n.children[ge]?Nd(n.children[ge],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ge&&r.push(`${i}:${Nd(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=T4(n,(r,i)=>i===ge?[Nd(n.children[ge],!1)]:[`${i}:${Nd(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ge]!=null?`${Ug(n)}/${t[0]}`:`${Ug(n)}/(${t.join("//")})`}}function kR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Bg(n){return kR(n).replace(/%3B/gi,";")}function S4(n){return encodeURI(n)}function SE(n){return kR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $g(n){return decodeURIComponent(n)}function bR(n){return $g(n.replace(/\+/g,"%20"))}function FR(n){return`${SE(n.path)}${A4(n.parameters)}`}function A4(n){return Object.entries(n).map(([e,t])=>`;${SE(e)}=${SE(t)}`).join("")}function M4(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Bg(t)}=${Bg(i)}`).join("&"):`${Bg(t)}=${Bg(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var N4=/^[^\/()?;#]+/;function EE(n){let e=n.match(N4);return e?e[0]:""}var R4=/^[^\/()?;=#]+/;function x4(n){let e=n.match(R4);return e?e[0]:""}var O4=/^[^=?&#]+/;function P4(n){let e=n.match(O4);return e?e[0]:""}var k4=/^[^&#]+/;function F4(n){let e=n.match(k4);return e?e[0]:""}var AE=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ge]=new xe(e,t)),r}parseSegment(){let e=EE(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Z(4009,!1);return this.capture(e),new wo($g(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=x4(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=EE(this.remaining);i&&(r=i,this.capture(r))}e[$g(t)]=$g(r)}parseQueryParam(e){let t=P4(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=F4(this.remaining);s&&(r=s,this.capture(r))}let i=bR(t),o=bR(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=EE(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Z(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ge);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ge]:new xe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Z(4011,!1)}};function LR(n){return n.segments.length>0?new xe([],{[ge]:n}):n}function VR(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=VR(i);if(r===ge&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new xe(n.segments,e);return L4(t)}function L4(n){if(n.numberOfChildren===1&&n.children[ge]){let e=n.children[ge];return new xe(n.segments.concat(e.segments),e.children)}return n}function Rc(n){return n instanceof ti}function BR(n,e,t=null,r=null){let i=jR(n);return HR(i,e,t,r)}function jR(n){let e;function t(o){let s={};for(let c of o.children){let u=t(c);s[c.outlet]=u}let a=new xe(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=LR(r);return e??i}function HR(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return bE(i,i,i,t,r);let o=V4(e);if(o.toRoot())return bE(i,i,new xe([],{}),t,r);let s=B4(o,i,n),a=s.processChildren?xd(s.segmentGroup,s.index,o.commands):$R(s.segmentGroup,s.index,o.commands);return bE(i,s.segmentGroup,a,t,r)}function zg(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Pd(n){return typeof n=="object"&&n!=null&&n.outlets}function bE(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let s;n===e?s=t:s=UR(n,e,t);let a=LR(VR(s));return new ti(a,o,i)}function UR(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=UR(o,e,t)}),new xe(n.segments,r)}var qg=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&zg(r[0]))throw new Z(4003,!1);let i=r.find(Pd);if(i&&i!==NR(r))throw new Z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function V4(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new qg(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new qg(t,e,r)}var Mc=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function B4(n,e,t){if(n.isAbsolute)return new Mc(e,!0,0);if(!t)return new Mc(e,!1,NaN);if(t.parent===null)return new Mc(t,!0,0);let r=zg(n.commands[0])?0:1,i=t.segments.length-1+r;return j4(t,i,n.numberOfDoubleDots)}function j4(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Z(4005,!1);i=r.segments.length}return new Mc(r,!1,i-o)}function H4(n){return Pd(n[0])?n[0].outlets:{[ge]:n}}function $R(n,e,t){if(n??=new xe([],{}),n.segments.length===0&&n.hasChildren())return xd(n,e,t);let r=U4(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new xe(n.segments.slice(0,r.pathIndex),{});return o.children[ge]=new xe(n.segments.slice(r.pathIndex),n.children),xd(o,0,i)}else return r.match&&i.length===0?new xe(n.segments,{}):r.match&&!n.hasChildren()?ME(n,e,t):r.match?xd(n,0,i):ME(n,e,t)}function xd(n,e,t){if(t.length===0)return new xe(n.segments,{});{let r=H4(t),i={};if(Object.keys(r).some(o=>o!==ge)&&n.children[ge]&&n.numberOfChildren===1&&n.children[ge].segments.length===0){let o=xd(n.children[ge],e,t);return new xe(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=$R(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new xe(n.segments,i)}}function U4(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Pd(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!CR(c,u,s))return o;r+=2}else{if(!CR(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ME(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Pd(o)){let c=$4(o.outlets);return new xe(r,c)}if(i===0&&zg(t[0])){let c=n.segments[e];r.push(new wo(c.path,DR(t[0]))),i++;continue}let s=Pd(o)?o.outlets[ge]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&zg(a)?(r.push(new wo(s,DR(a))),i+=2):(r.push(new wo(s,{})),i++)}return new xe(r,{})}function $4(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=ME(new xe([],{}),0,r))}),e}function DR(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function CR(n,e,t){return n==t.path&&Xr(e,t.parameters)}var Gg="imperative",Nt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Nt||{}),Bn=class{id;url;constructor(e,t){this.id=e,this.url=t}},bo=class extends Bn{type=Nt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},wr=class extends Bn{urlAfterRedirects;type=Nt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},In=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(In||{}),xc=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(xc||{}),ei=class extends Bn{reason;code;type=Nt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ni=class extends Bn{reason;code;type=Nt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Oc=class extends Bn{error;target;type=Nt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},kd=class extends Bn{urlAfterRedirects;state;type=Nt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wg=class extends Bn{urlAfterRedirects;state;type=Nt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kg=class extends Bn{urlAfterRedirects;state;shouldActivate;type=Nt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Qg=class extends Bn{urlAfterRedirects;state;type=Nt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yg=class extends Bn{urlAfterRedirects;state;type=Nt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zg=class{route;type=Nt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Jg=class{route;type=Nt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Xg=class{snapshot;type=Nt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},em=class{snapshot;type=Nt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tm=class{snapshot;type=Nt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nm=class{snapshot;type=Nt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pc=class{routerEvent;position;anchor;type=Nt.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Fd=class{},kc=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function G4(n,e){return n.providers&&!n._injector&&(n._injector=rd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function vr(n){return n.outlet||ge}function z4(n,e){let t=n.filter(r=>vr(r)===e);return t.push(...n.filter(r=>vr(r)!==e)),t}function $d(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var rm=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return $d(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ws(this.rootInjector)}},Ws=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new rm(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(k(qe))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),im=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=NE(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=NE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=RE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return RE(e,this._root).map(t=>t.value)}};function NE(n,e){if(n===e.value)return e;for(let t of e.children){let r=NE(n,t);if(r)return r}return null}function RE(n,e){if(n===e.value)return[e];for(let t of e.children){let r=RE(n,t);if(r.length)return r.unshift(e),r}return[]}var Vn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ac(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Ld=class extends im{snapshot;constructor(e,t){super(e),this.snapshot=t,BE(this,e)}toString(){return this.snapshot.toString()}};function GR(n){let e=q4(n),t=new Xe([new wo("",{})]),r=new Xe({}),i=new Xe({}),o=new Xe({}),s=new Xe(""),a=new Do(t,r,o,s,i,ge,n,e.root);return a.snapshot=e.root,new Ld(new Vn(a,[]),e)}function q4(n){let e={},t={},r={},i="",o=new Gs([],e,r,i,t,ge,n,null,{});return new Vd("",new Vn(o,[]))}var Do=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Y(u=>u[Ud]))??Q(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Y(e=>zs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Y(e=>zs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function om(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:H(H({},e.params),n.params),data:H(H({},e.data),n.data),resolve:H(H(H(H({},n.data),e.data),i?.data),n._resolvedData)}:r={params:H({},n.params),data:H({},n.data),resolve:H(H({},n.data),n._resolvedData??{})},i&&qR(i)&&(r.resolve[Ud]=i.title),r}var Gs=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ud]}constructor(e,t,r,i,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=zs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=zs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Vd=class extends im{url;constructor(e,t){super(t),this.url=e,BE(this,t)}toString(){return zR(this._root)}};function BE(n,e){e.value._routerState=n,e.children.forEach(t=>BE(n,t))}function zR(n){let e=n.children.length>0?` { ${n.children.map(zR).join(", ")} } `:"";return`${n.value}${e}`}function DE(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Xr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Xr(e.params,t.params)||n.paramsSubject.next(t.params),w4(e.url,t.url)||n.urlSubject.next(t.url),Xr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function xE(n,e){let t=Xr(n.params,e.params)&&C4(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||xE(n.parent,e.parent))}function qR(n){return typeof n.title=="string"||n.title===null}var WR=new j(""),Gd=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ge;activateEvents=new Pe;deactivateEvents=new Pe;attachEvents=new Pe;detachEvents=new Pe;routerOutletData=nM(void 0);parentContexts=R(Ws);location=R(Kr);changeDetector=R(gr);inputBinder=R(zd,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Z(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Z(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new OE(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Jt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Wn]})}return n})(),OE=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Do?this.route:e===Ws?this.childContexts:e===WR?this.outletData:this.parent.get(e,t)}},zd=new j(""),jE=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=tc([r.queryParams,r.params,r.data]).pipe(Re(([o,s,a],c)=>(a=H(H(H({},o),s),a),c===0?Q(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=AN(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();function W4(n,e,t){let r=Bd(n,e._root,t?t._root:void 0);return new Ld(r,e)}function Bd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=K4(n,e,t);return new Vn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Bd(n,a)),s}}let r=Q4(e.value),i=e.children.map(o=>Bd(n,o));return new Vn(r,i)}}function K4(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Bd(n,r,i);return Bd(n,r)})}function Q4(n){return new Do(new Xe(n.url),new Xe(n.params),new Xe(n.queryParams),new Xe(n.fragment),new Xe(n.data),n.outlet,n.component,n)}var Fc=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},KR="ngNavigationCancelingError";function sm(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Rc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=QR(!1,In.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function QR(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[KR]=!0,t.cancellationCode=e,t}function Y4(n){return YR(n)&&Rc(n.url)}function YR(n){return!!n&&n[KR]}var Z4=(n,e,t,r)=>Y(i=>(new PE(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),PE=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),DE(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ac(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ac(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ac(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ac(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new nm(o.value.snapshot))}),e.children.length&&this.forwardEvent(new em(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(DE(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),DE(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},am=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Nc=class{component;route;constructor(e,t){this.component=e,this.route=t}};function J4(n,e,t){let r=n._root,i=e?e._root:null;return Rd(r,i,t,[r.value])}function X4(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Vc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!XS(n)?n:e.get(n):r}function Rd(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ac(e);return n.children.forEach(s=>{eG(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Od(a,t.getContext(s),i)),i}function eG(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=tG(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new am(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Rd(n,e,a?a.children:null,r,i):Rd(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Nc(a.outlet.component,s))}else s&&Od(e,a,i),i.canActivateChecks.push(new am(r)),o.component?Rd(n,null,a?a.children:null,r,i):Rd(n,null,t,r,i);return i}function tG(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!$s(n.url,e.url);case"pathParamsOrQueryParamsChange":return!$s(n.url,e.url)||!Xr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xE(n,e)||!Xr(n.queryParams,e.queryParams);case"paramsChange":default:return!xE(n,e)}}function Od(n,e,t){let r=Ac(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Od(s,e.children.getContext(o),t):Od(s,null,t):Od(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Nc(e.outlet.component,i)):t.canDeactivateChecks.push(new Nc(null,i)):t.canDeactivateChecks.push(new Nc(null,i))}function qd(n){return typeof n=="function"}function nG(n){return typeof n=="boolean"}function rG(n){return n&&qd(n.canLoad)}function iG(n){return n&&qd(n.canActivate)}function oG(n){return n&&qd(n.canActivateChild)}function sG(n){return n&&qd(n.canDeactivate)}function aG(n){return n&&qd(n.canMatch)}function ZR(n){return n instanceof lr||n?.name==="EmptyError"}var jg=Symbol("INITIAL_VALUE");function Lc(){return Re(n=>tc(n.map(e=>e.pipe(vt(1),uo(jg)))).pipe(Y(e=>{for(let t of e)if(t!==!0){if(t===jg)return jg;if(t===!1||cG(t))return t}return!0}),Ue(e=>e!==jg),vt(1)))}function cG(n){return Rc(n)||n instanceof Fc}function lG(n,e){return He(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Q(he(H({},t),{guardsResult:!0})):uG(s,r,i,n).pipe(He(a=>a&&nG(a)?dG(r,o,n,e):Q(a)),Y(a=>he(H({},t),{guardsResult:a})))})}function uG(n,e,t,r){return Ce(n).pipe(He(i=>mG(i.component,i.route,t,e,r)),ur(i=>i!==!0,!0))}function dG(n,e,t,r){return Ce(e).pipe(Gn(i=>Rn(fG(i.route.parent,r),hG(i.route,r),gG(n,i.path,t),pG(n,i.route,t))),ur(i=>i!==!0,!0))}function hG(n,e){return n!==null&&e&&e(new tm(n)),Q(!0)}function fG(n,e){return n!==null&&e&&e(new Xg(n)),Q(!0)}function pG(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Q(!0);let i=r.map(o=>ps(()=>{let s=$d(e)??t,a=Vc(o,s),c=iG(a)?a.canActivate(e,n):ln(s,()=>a(e,n));return Co(c).pipe(ur())}));return Q(i).pipe(Lc())}function gG(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>X4(s)).filter(s=>s!==null).map(s=>ps(()=>{let a=s.guards.map(c=>{let u=$d(s.node)??t,d=Vc(c,u),f=oG(d)?d.canActivateChild(r,n):ln(u,()=>d(r,n));return Co(f).pipe(ur())});return Q(a).pipe(Lc())}));return Q(o).pipe(Lc())}function mG(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Q(!0);let s=o.map(a=>{let c=$d(e)??i,u=Vc(a,c),d=sG(u)?u.canDeactivate(n,e,t,r):ln(c,()=>u(n,e,t,r));return Co(d).pipe(ur())});return Q(s).pipe(Lc())}function _G(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Q(!0);let o=i.map(s=>{let a=Vc(s,n),c=rG(a)?a.canLoad(e,t):ln(n,()=>a(e,t));return Co(c)});return Q(o).pipe(Lc(),JR(r))}function JR(n){return Av(dt(e=>{if(typeof e!="boolean")throw sm(n,e)}),Y(e=>e===!0))}function yG(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Q(!0);let o=i.map(s=>{let a=Vc(s,n),c=aG(a)?a.canMatch(e,t):ln(n,()=>a(e,t));return Co(c)});return Q(o).pipe(Lc(),JR(r))}var jd=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Hd=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Sc(n){return Xa(new jd(n))}function vG(n){return Xa(new Z(4e3,!1))}function wG(n){return Xa(QR(!1,In.GuardRejected))}var kE=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Q(r);if(i.numberOfChildren>1||!i.children[ge])return vG(`${e.redirectTo}`);i=i.children[ge]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:u,routeConfig:d,url:f,outlet:g,params:m,data:v,title:b}=i,T=ln(o,()=>a({params:m,data:v,queryParams:c,fragment:u,routeConfig:d,url:f,outlet:g,title:b}));if(T instanceof ti)throw new Hd(T);t=T}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Hd(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new ti(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new xe(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Z(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},FE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function EG(n,e,t,r,i){let o=XR(n,e,t);return o.matched?(r=G4(e,r),yG(r,e,t,i).pipe(Y(s=>s===!0?o:H({},FE)))):Q(o)}function XR(n,e,t){if(e.path==="**")return bG(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?H({},FE):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||AR)(t,n,e);if(!i)return H({},FE);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?H(H({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function bG(n){return{matched:!0,parameters:n.length>0?NR(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function TR(n,e,t,r){return t.length>0&&TG(n,t,r)?{segmentGroup:new xe(e,CG(r,new xe(t,n.children))),slicedSegments:[]}:t.length===0&&IG(n,t,r)?{segmentGroup:new xe(n.segments,DG(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new xe(n.segments,n.children),slicedSegments:t}}function DG(n,e,t,r){let i={};for(let o of t)if(lm(n,e,o)&&!r[vr(o)]){let s=new xe([],{});i[vr(o)]=s}return H(H({},r),i)}function CG(n,e){let t={};t[ge]=e;for(let r of n)if(r.path===""&&vr(r)!==ge){let i=new xe([],{});t[vr(r)]=i}return t}function TG(n,e,t){return t.some(r=>lm(n,e,r)&&vr(r)!==ge)}function IG(n,e,t){return t.some(r=>lm(n,e,r))}function lm(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function SG(n,e,t){return e.length===0&&!n.children[t]}var LE=class{};function AG(n,e,t,r,i,o,s="emptyOnly"){return new VE(n,e,t,r,i,s,o).recognize()}var MG=31,VE=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new kE(this.urlSerializer,this.urlTree)}noMatchError(e){return new Z(4002,`'${e.segmentGroup}'`)}recognize(){let e=TR(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Y(({children:t,rootSnapshot:r})=>{let i=new Vn(r,t),o=new Vd("",i),s=BR(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Gs([],Object.freeze({}),Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ge,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ge,t).pipe(Y(r=>({children:r,rootSnapshot:t})),Ei(r=>{if(r instanceof Hd)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof jd?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Y(s=>s instanceof Vn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ce(o).pipe(Gn(s=>{let a=r.children[s],c=z4(t,s);return this.processSegmentGroup(e,c,a,s,i)}),gs((s,a)=>(s.push(...a),s)),lo(null),Vv(),He(s=>{if(s===null)return Sc(r);let a=ex(s);return NG(a),Q(a)}))}processSegment(e,t,r,i,o,s,a){return Ce(t).pipe(Gn(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Ei(u=>{if(u instanceof jd)return Q(null);throw u}))),ur(c=>!!c),Ei(c=>{if(ZR(c))return SG(r,i,o)?Q(new LE):Sc(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return vr(r)!==s&&(s===ge||!lm(i,o,r))?Sc(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Sc(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=XR(t,i,o);if(!c)return Sc(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>MG&&(this.allowRedirects=!1));let m=new Gs(o,u,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,IR(i),vr(i),i.component??i._loadedComponent??null,i,SR(i)),v=om(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(v.params),m.data=Object.freeze(v.data);let b=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,m,e);return this.applyRedirects.lineralizeSegments(i,b).pipe(He(T=>this.processSegment(e,r,t,T.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=EG(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Re(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Re(({routes:u})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:m}=c,v=new Gs(g,f,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,IR(r),vr(r),r.component??r._loadedComponent??null,r,SR(r)),b=om(v,s,this.paramsInheritanceStrategy);v.params=Object.freeze(b.params),v.data=Object.freeze(b.data);let{segmentGroup:T,slicedSegments:F}=TR(t,g,m,u);if(F.length===0&&T.hasChildren())return this.processChildren(d,u,T,v).pipe(Y(P=>new Vn(v,P)));if(u.length===0&&F.length===0)return Q(new Vn(v,[]));let $=vr(r)===o;return this.processSegment(d,u,T,F,$?ge:o,!0,v).pipe(Y(P=>new Vn(v,P instanceof Vn?[P]:[])))}))):Sc(t)))}getChildConfig(e,t,r){return t.children?Q({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Q({routes:t._loadedRoutes,injector:t._loadedInjector}):_G(e,t,r,this.urlSerializer).pipe(He(i=>i?this.configLoader.loadChildren(e,t).pipe(dt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):wG(t))):Q({routes:[],injector:e})}};function NG(n){n.sort((e,t)=>e.value.outlet===ge?-1:t.value.outlet===ge?1:e.value.outlet.localeCompare(t.value.outlet))}function RG(n){let e=n.value.routeConfig;return e&&e.path===""}function ex(n){let e=[],t=new Set;for(let r of n){if(!RG(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=ex(r.children);e.push(new Vn(r.value,i))}return e.filter(r=>!t.has(r))}function IR(n){return n.data||{}}function SR(n){return n.resolve||{}}function xG(n,e,t,r,i,o){return He(s=>AG(n,e,t,r,s.extractedUrl,i,o).pipe(Y(({state:a,tree:c})=>he(H({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function OG(n,e){return He(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Q(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of tx(c))s.add(u);let a=0;return Ce(s).pipe(Gn(c=>o.has(c)?PG(c,r,n,e):(c.data=om(c,c.parent,n).resolve,Q(void 0))),dt(()=>a++),nc(1),He(c=>a===s.size?Q(t):yt))})}function tx(n){let e=n.children.map(t=>tx(t)).flat();return[n,...e]}function PG(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!qR(i)&&(o[Ud]=i.title),kG(o,n,e,r).pipe(Y(s=>(n._resolvedData=s,n.data=om(n,n.parent,t).resolve,null)))}function kG(n,e,t,r){let i=IE(n);if(i.length===0)return Q({});let o={};return Ce(i).pipe(He(s=>FG(n[s],e,t,r).pipe(ur(),dt(a=>{if(a instanceof Fc)throw sm(new Eo,a);o[s]=a}))),nc(1),Y(()=>o),Ei(s=>ZR(s)?yt:Xa(s)))}function FG(n,e,t,r){let i=$d(e)??r,o=Vc(n,i),s=o.resolve?o.resolve(e,t):ln(i,()=>o(e,t));return Co(s)}function CE(n){return Re(e=>{let t=n(e);return t?Ce(t).pipe(Y(()=>e)):Q(e)})}var HE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ge);return r}getResolvedTitleForRoute(t){return t.data[Ud]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>R(nx),providedIn:"root"})}return n})(),nx=(()=>{class n extends HE{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(k(wR))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ks=new j("",{providedIn:"root",factory:()=>({})}),UE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=wt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Ze(0,"router-outlet")},dependencies:[Gd],encapsulation:2})}return n})();function $E(n){let e=n.children&&n.children.map($E),t=e?he(H({},n),{children:e}):H({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ge&&(t.component=UE),t}var Bc=new j(""),um=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=R(EN);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Q(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Co(t.loadComponent()).pipe(Y(ix),dt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),bi(()=>{this.componentLoaders.delete(t)})),i=new Ka(r,()=>new we).pipe(Wa());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=rx(r,this.compiler,t,this.onLoadEndListener).pipe(bi(()=>{this.childrenLoaders.delete(r)})),s=new Ka(o,()=>new we).pipe(Wa());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rx(n,e,t,r){return Co(n.loadChildren()).pipe(Y(ix),He(i=>i instanceof kw||Array.isArray(i)?Q(i):Ce(e.compileModuleAsync(i))),Y(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Bc,[],{optional:!0,self:!0}).flat()),{routes:s.map($E),injector:o}}))}function LG(n){return n&&typeof n=="object"&&"default"in n}function ix(n){return LG(n)?n.default:n}var dm=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>R(VG),providedIn:"root"})}return n})(),VG=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),GE=new j(""),zE=new j("");function ox(n,e,t){let r=n.get(zE),i=n.get(Ge);return n.get(fe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),BG(n))),{onViewTransitionCreated:c}=r;return c&&ln(n,()=>c({transition:a,from:e,to:t})),s})}function BG(n){return new Promise(e=>{Fs({read:()=>setTimeout(e)},{injector:n})})}var qE=new j(""),hm=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new we;transitionAbortSubject=new we;configLoader=R(um);environmentInjector=R(qe);destroyRef=R(ks);urlSerializer=R(qs);rootContexts=R(Ws);location=R(yo);inputBindingEnabled=R(zd,{optional:!0})!==null;titleStrategy=R(HE);options=R(Ks,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=R(dm);createViewTransition=R(GE,{optional:!0});navigationErrorHandler=R(qE,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Q(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Zg(i)),r=i=>this.events.next(new Jg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(he(H({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new Xe(null),this.transitions.pipe(Ue(r=>r!==null),Re(r=>{let i=!1,o=!1;return Q(r).pipe(Re(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",In.SupersededByNewNavigation),yt;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?he(H({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&c!=="reload"){let u="";return this.events.next(new ni(s.id,this.urlSerializer.serialize(s.rawUrl),u,xc.IgnoredSameUrlNavigation)),s.resolve(!1),yt}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Q(s).pipe(Re(u=>(this.events.next(new bo(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?yt:Promise.resolve(u))),xG(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),dt(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=he(H({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let d=new kd(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:u,extractedUrl:d,source:f,restoredState:g,extras:m}=s,v=new bo(u,this.urlSerializer.serialize(d),f,g);this.events.next(v);let b=GR(this.rootComponentType).snapshot;return this.currentTransition=r=he(H({},s),{targetSnapshot:b,urlAfterRedirects:d,extras:he(H({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=d,Q(r)}else{let u="";return this.events.next(new ni(s.id,this.urlSerializer.serialize(s.extractedUrl),u,xc.IgnoredByUrlHandlingStrategy)),s.resolve(!1),yt}}),dt(s=>{let a=new Wg(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Y(s=>(this.currentTransition=r=he(H({},s),{guards:J4(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),lG(this.environmentInjector,s=>this.events.next(s)),dt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw sm(this.urlSerializer,s.guardsResult);let a=new Kg(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Ue(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",In.GuardRejected),!1)),CE(s=>{if(s.guards.canActivateChecks.length!==0)return Q(s).pipe(dt(a=>{let c=new Qg(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Re(a=>{let c=!1;return Q(a).pipe(OG(this.paramsInheritanceStrategy,this.environmentInjector),dt({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",In.NoDataFromResolver)}}))}),dt(a=>{let c=new Yg(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),CE(s=>{let a=c=>{let u=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(c.routeConfig).pipe(dt(d=>{c.component=d}),Y(()=>{})));for(let d of c.children)u.push(...a(d));return u};return tc(a(s.targetSnapshot.root)).pipe(lo(null),vt(1))}),CE(()=>this.afterPreactivation()),Re(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?Ce(c).pipe(Y(()=>r)):Q(r)}),Y(s=>{let a=W4(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=he(H({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),dt(()=>{this.events.next(new Fd)}),Z4(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),vt(1),dt({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new wr(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Mt(this.transitionAbortSubject.pipe(dt(s=>{throw s}))),bi(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",In.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ei(s=>{if(this.destroyed)return r.resolve(!1),yt;if(o=!0,YR(s))this.events.next(new ei(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),Y4(s)?this.events.next(new kc(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Oc(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=ln(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Fc){let{message:u,cancellationCode:d}=sm(this.urlSerializer,c);this.events.next(new ei(r.id,this.urlSerializer.serialize(r.extractedUrl),u,d)),this.events.next(new kc(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return yt}))}))}cancelNavigationTransition(t,r,i){let o=new ei(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jG(n){return n!==Gg}var sx=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>R(HG),providedIn:"root"})}return n})(),cm=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},HG=(()=>{class n extends cm{static \u0275fac=(()=>{let t;return function(i){return(t||(t=zr(n)))(i||n)}})();static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ax=(()=>{class n{urlSerializer=R(qs);options=R(Ks,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=R(yo);urlHandlingStrategy=R(dm);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ti;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof ti?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=GR(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>R(UG),providedIn:"root"})}return n})(),UG=(()=>{class n extends ax{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof bo?this.updateStateMemento():t instanceof ni?this.commitTransition(r):t instanceof kd?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Fd?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof ei&&(t.code===In.GuardRejected||t.code===In.NoDataFromResolver)?this.restoreHistory(r):t instanceof Oc?this.restoreHistory(r,!0):t instanceof wr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=H(H({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=H(H({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=zr(n)))(i||n)}})();static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fm(n,e){n.events.pipe(Ue(t=>t instanceof wr||t instanceof ei||t instanceof Oc||t instanceof ni),Y(t=>t instanceof wr||t instanceof ni?0:(t instanceof ei?t.code===In.Redirect||t.code===In.SupersededByNewNavigation:!1)?2:1),Ue(t=>t!==2),vt(1)).subscribe(()=>{e()})}var $G={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},GG={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ri=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=R(iN);stateManager=R(ax);options=R(Ks,{optional:!0})||{};pendingTasks=R(qr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=R(hm);urlSerializer=R(qs);location=R(yo);urlHandlingStrategy=R(dm);_events=new we;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=R(sx);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=R(Bc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!R(zd,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new at;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ei&&r.code!==In.Redirect&&r.code!==In.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof wr)this.navigated=!0;else if(r instanceof kc){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=H({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||jG(i.source)},s);this.scheduleNavigation(a,Gg,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}qG(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Gg,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=H({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map($E),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=H(H({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=jR(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return HR(f,t,d,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Rc(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Gg,null,r)}navigate(t,r={skipLocationChange:!1}){return zG(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=H({},$G):r===!1?i=H({},GG):i=r,Rc(t))return ER(this.currentUrlTree,t,i);let o=this.parseUrl(t);return ER(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((f,g)=>{a=f,c=g});let d=this.pendingTasks.add();return fm(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zG(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Z(4008,!1)}function qG(n){return!(n instanceof Fd)&&!(n instanceof kc)}var Wd=class{};var cx=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ue(t=>t instanceof wr),Gn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=rd(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ce(i).pipe(co())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Q(null);let o=i.pipe(He(s=>s===null?Q(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Ce([o,s]).pipe(co())}else return o})}static \u0275fac=function(r){return new(r||n)(k(ri),k(qe),k(Wd),k(um))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lx=new j(""),KG=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof bo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof wr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ni&&t.code===xc.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Pc&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Pc(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){WM()};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();function QG(n){return n.routerState.root}function Kd(n,e){return{\u0275kind:n,\u0275providers:e}}function YG(){let n=R(Oe);return e=>{let t=n.get(pr);if(e!==t.components[0])return;let r=n.get(ri),i=n.get(ux);n.get(KE)===1&&r.initialNavigation(),n.get(fx,null,_e.Optional)?.setUpPreloading(),n.get(lx,null,_e.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var ux=new j("",{factory:()=>new we}),KE=new j("",{providedIn:"root",factory:()=>1});function dx(){let n=[{provide:KE,useValue:0},Vw(()=>{let e=R(Oe);return e.get(Qw,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(ri),o=e.get(ux);fm(i,()=>{r(!0)}),e.get(hm).afterPreactivation=()=>(r(!0),o.closed?Q(void 0):o),i.initialNavigation()}))})];return Kd(2,n)}function hx(){let n=[Vw(()=>{R(ri).setUpLocationChangeListener()}),{provide:KE,useValue:2}];return Kd(3,n)}var fx=new j("");function px(n){return Kd(0,[{provide:fx,useExisting:cx},{provide:Wd,useExisting:n}])}function gx(){return Kd(8,[jE,{provide:zd,useExisting:jE}])}function mx(n){bc("NgRouterViewTransitions");let e=[{provide:GE,useValue:ox},{provide:zE,useValue:H({skipNextTransition:!!n?.skipInitialTransition},n)}];return Kd(9,e)}var _x=[yo,{provide:qs,useClass:Eo},ri,Ws,{provide:Do,useFactory:QG,deps:[ri]},um,[]],Qs=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[_x,[],{provide:Bc,multi:!0,useValue:t},[],r?.errorHandler?{provide:qE,useValue:r.errorHandler}:[],{provide:Ks,useValue:r||{}},r?.useHash?JG():XG(),ZG(),r?.preloadingStrategy?px(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?ez(r):[],r?.bindToComponentInputs?gx().\u0275providers:[],r?.enableViewTransitions?mx().\u0275providers:[],tz()]}}static forChild(t){return{ngModule:n,providers:[{provide:Bc,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=oe({type:n});static \u0275inj=ie({})}return n})();function ZG(){return{provide:lx,useFactory:()=>{let n=R(ZN),e=R(fe),t=R(Ks),r=R(hm),i=R(qs);return t.scrollOffset&&n.setOffset(t.scrollOffset),new KG(i,r,n,e,t)}}}function JG(){return{provide:xi,useClass:Xw}}function XG(){return{provide:xi,useClass:wg}}function ez(n){return[n.initialNavigation==="disabled"?hx().\u0275providers:[],n.initialNavigation==="enabledBlocking"?dx().\u0275providers:[]]}var WE=new j("");function tz(){return[{provide:WE,useFactory:YG},{provide:Bw,multi:!0,useExisting:WE}]}var jc=class n{loading=!1;loadingChange=new Pe(!1);progress={value:0,status:"is-error"};ngOnChanges(e){this.loading&&this.startLoading()}startLoading(){return N(this,null,function*(){yield new Promise(t=>setTimeout(t,1e3));let e=[...Array.from({length:Math.ceil(20/2)},(t,r)=>1+r*2),...Array.from({length:Math.ceil(30/3)},(t,r)=>21+r*3),...Array.from({length:Math.ceil(50/5)},(t,r)=>51+r*5),100];for(let t of e)this.progress.value=t,t>=33&&t<=50,t>51&&t<75&&(this.progress.status="is-warning"),t>75&&(this.progress.status="is-primary"),t==100&&(this.progress.status="is-success"),yield new Promise(r=>setTimeout(r,t*10));this.loading=!1,this.loadingChange.emit(this.loading)})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=wt({type:n,selectors:[["app-loader"]],inputs:{loading:"loading"},outputs:{loadingChange:"loadingChange"},standalone:!1,features:[Wn],decls:3,vars:4,consts:[[1,"nes-text","mt-3"],["max","100",3,"value"]],template:function(t,r){t&1&&(se(0,"p",0),Le(1,` Loading...
`),ce(),Ze(2,"progress",1)),t&2&&(de(2),pg("nes-progress ",r.progress.status,""),ke("value",r.progress.value))},encapsulation:2})};var Io=class{},vx=(()=>{class n extends Io{getTranslation(t){return Q({})}static \u0275fac=(()=>{let t;return function(i){return(t||(t=zr(n)))(i||n)}})();static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),Yd=class{},wx=(()=>{class n{handle(t){return t.key}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();function gm(n,e){if(n===e)return!0;if(n===null||e===null)return!1;if(n!==n&&e!==e)return!0;let t=typeof n,r=typeof e,i,o,s;if(t==r&&t=="object")if(Array.isArray(n)){if(!Array.isArray(e))return!1;if((i=n.length)==e.length){for(o=0;o<i;o++)if(!gm(n[o],e[o]))return!1;return!0}}else{if(Array.isArray(e))return!1;s=Object.create(null);for(o in n){if(!gm(n[o],e[o]))return!1;s[o]=!0}for(o in e)if(!(o in s)&&typeof e[o]<"u")return!1;return!0}return!1}function To(n){return typeof n<"u"&&n!==null}function Jd(n){return pm(n)&&!tb(n)&&n!==null}function pm(n){return typeof n=="object"}function tb(n){return Array.isArray(n)}function nb(n){return typeof n=="string"}function iz(n){return typeof n=="function"}function QE(n,e){let t=Object.assign({},n);return pm(n)?(pm(n)&&pm(e)&&Object.keys(e).forEach(r=>{Jd(e[r])?r in n?t[r]=QE(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t):QE({},e)}function YE(n,e){let t=e.split(".");e="";do e+=t.shift(),To(n)&&To(n[e])&&(Jd(n[e])||tb(n[e])||!t.length)?(n=n[e],e=""):t.length?e+=".":n=void 0;while(t.length);return n}function oz(n,e,t){let r=e.split("."),i=n;for(let o=0;o<r.length;o++){let s=r[o];o===r.length-1?i[s]=t:((!i[s]||!Jd(i[s]))&&(i[s]={}),i=i[s])}}var Uc=class{},Ex=(()=>{class n extends Uc{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(t,r){if(nb(t))return this.interpolateString(t,r);if(iz(t))return this.interpolateFunction(t,r)}interpolateFunction(t,r){return t(r)}interpolateString(t,r){return r?t.replace(this.templateMatcher,(i,o)=>{let s=YE(r,o);return To(s)?s:i}):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=zr(n)))(i||n)}})();static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),$c=class{},bx=(()=>{class n extends $c{compile(t,r){return t}compileTranslations(t,r){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=zr(n)))(i||n)}})();static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),Zd=class{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new Pe;onLangChange=new Pe;onDefaultLangChange=new Pe},ZE=new j("ISOLATE_TRANSLATE_SERVICE"),JE=new j("USE_DEFAULT_LANG"),XE=new j("DEFAULT_LANGUAGE"),eb=new j("USE_EXTEND"),Qd=n=>wi(n)?n:Q(n),Ys=(()=>{class n{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;extend;loadingTranslations;pending=!1;_translationRequests={};lastUseLanguage=null;get onTranslationChange(){return this.store.onTranslationChange}get onLangChange(){return this.store.onLangChange}get onDefaultLangChange(){return this.store.onDefaultLangChange}get defaultLang(){return this.store.defaultLang}set defaultLang(t){this.store.defaultLang=t}get currentLang(){return this.store.currentLang}set currentLang(t){this.store.currentLang=t}get langs(){return this.store.langs}set langs(t){this.store.langs=t}get translations(){return this.store.translations}set translations(t){this.store.translations=t}constructor(t,r,i,o,s,a=!0,c=!1,u=!1,d){this.store=t,this.currentLoader=r,this.compiler=i,this.parser=o,this.missingTranslationHandler=s,this.useDefaultLang=a,this.extend=u,c&&(this.store=new Zd),d&&this.setDefaultLang(d)}setDefaultLang(t){if(t===this.defaultLang)return;let r=this.retrieveTranslations(t);typeof r<"u"?(this.defaultLang==null&&(this.defaultLang=t),r.pipe(vt(1)).subscribe(()=>{this.changeDefaultLang(t)})):this.changeDefaultLang(t)}getDefaultLang(){return this.defaultLang}use(t){if(this.lastUseLanguage=t,t===this.currentLang)return Q(this.translations[t]);this.currentLang||(this.currentLang=t);let r=this.retrieveTranslations(t);return wi(r)?(r.pipe(vt(1)).subscribe(()=>{this.changeLang(t)}),r):(this.changeLang(t),Q(this.translations[t]))}changeLang(t){t===this.lastUseLanguage&&(this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]}),this.defaultLang==null&&this.changeDefaultLang(t))}retrieveTranslations(t){if(typeof this.translations[t]>"u"||this.extend)return this._translationRequests[t]=this._translationRequests[t]||this.loadAndCompileTranslations(t),this._translationRequests[t]}getTranslation(t){return this.loadAndCompileTranslations(t)}loadAndCompileTranslations(t){this.pending=!0;let r=this.currentLoader.getTranslation(t).pipe(ms(1),vt(1));return this.loadingTranslations=r.pipe(Y(i=>this.compiler.compileTranslations(i,t)),ms(1),vt(1)),this.loadingTranslations.subscribe({next:i=>{this.translations[t]=this.extend&&this.translations[t]?H(H({},i),this.translations[t]):i,this.updateLangs(),this.pending=!1},error:i=>{this.pending=!1}}),r}setTranslation(t,r,i=!1){let o=this.compiler.compileTranslations(r,t);(i||this.extend)&&this.translations[t]?this.translations[t]=QE(this.translations[t],o):this.translations[t]=o,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})}getLangs(){return this.langs}addLangs(t){let r=t.filter(i=>!this.langs.includes(i));r.length>0&&(this.langs=[...this.langs,...r])}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResultForKey(t,r,i){let o;if(t&&(o=this.runInterpolation(YE(t,r),i)),o===void 0&&this.defaultLang!=null&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(o=this.runInterpolation(YE(this.translations[this.defaultLang],r),i)),o===void 0){let s={key:r,translateService:this};typeof i<"u"&&(s.interpolateParams=i),o=this.missingTranslationHandler.handle(s)}return o!==void 0?o:r}runInterpolation(t,r){if(tb(t))return t.map(i=>this.runInterpolation(i,r));if(Jd(t)){let i={};for(let o in t){let s=this.runInterpolation(t[o],r);s!==void 0&&(i[o]=s)}return i}else return this.parser.interpolate(t,r)}getParsedResult(t,r,i){if(r instanceof Array){let o={},s=!1;for(let c of r)o[c]=this.getParsedResultForKey(t,c,i),s=s||wi(o[c]);if(!s)return o;let a=r.map(c=>Qd(o[c]));return xu(a).pipe(Y(c=>{let u={};return c.forEach((d,f)=>{u[r[f]]=d}),u}))}return this.getParsedResultForKey(t,r,i)}get(t,r){if(!To(t)||!t.length)throw new Error('Parameter "key" is required and cannot be empty');return this.pending?this.loadingTranslations.pipe(Gn(i=>Qd(this.getParsedResult(i,t,r)))):Qd(this.getParsedResult(this.translations[this.currentLang],t,r))}getStreamOnTranslationChange(t,r){if(!To(t)||!t.length)throw new Error('Parameter "key" is required and cannot be empty');return Rn(ps(()=>this.get(t,r)),this.onTranslationChange.pipe(Re(i=>{let o=this.getParsedResult(i.translations,t,r);return Qd(o)})))}stream(t,r){if(!To(t)||!t.length)throw new Error('Parameter "key" required');return Rn(ps(()=>this.get(t,r)),this.onLangChange.pipe(Re(i=>{let o=this.getParsedResult(i.translations,t,r);return Qd(o)})))}instant(t,r){if(!To(t)||t.length===0)throw new Error('Parameter "key" is required and cannot be empty');let i=this.getParsedResult(this.translations[this.currentLang],t,r);return wi(i)?Array.isArray(t)?t.reduce((o,s)=>(o[s]=s,o),{}):t:i}set(t,r,i=this.currentLang){oz(this.translations[i],t,nb(r)?this.compiler.compile(r,i):this.compiler.compileTranslations(r,i)),this.updateLangs(),this.onTranslationChange.emit({lang:i,translations:this.translations[i]})}changeDefaultLang(t){this.defaultLang=t,this.onDefaultLangChange.emit({lang:t,translations:this.translations[t]})}reloadLang(t){return this.resetLang(t),this.loadAndCompileTranslations(t)}resetLang(t){delete this._translationRequests[t],delete this.translations[t]}getBrowserLang(){if(typeof window>"u"||!window.navigator)return;let t=this.getBrowserCultureLang();return t?t.split(/[-_]/)[0]:void 0}getBrowserCultureLang(){if(!(typeof window>"u"||typeof window.navigator>"u"))return window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}static \u0275fac=function(r){return new(r||n)(k(Zd),k(Io),k($c),k(Uc),k(Yd),k(JE),k(ZE),k(eb),k(XE))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var So=(()=>{class n{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(t,r){this.translate=t,this._ref=r}updateValue(t,r,i){let o=s=>{this.value=s!==void 0?s:t,this.lastKey=t,this._ref.markForCheck()};if(i){let s=this.translate.getParsedResult(i,t,r);wi(s)?s.subscribe(o):o(s)}this.translate.get(t,r).subscribe(o)}transform(t,...r){if(!t||!t.length)return t;if(gm(t,this.lastKey)&&gm(r,this.lastParams))return this.value;let i;if(To(r[0])&&r.length)if(nb(r[0])&&r[0].length){let o=r[0].replace(/(')?([a-zA-Z0-9_]+)(')?(\s)?:/g,'"$2":').replace(/:(\s)?(')(.*?)(')/g,':"$3"');try{i=JSON.parse(o)}catch(s){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${r[0]}`)}}else Jd(r[0])&&(i=r[0]);return this.lastKey=t,this.lastParams=r,this.updateValue(t,i),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(o=>{this.lastKey&&o.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(t,i,o.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(o=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,i,o.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,i))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(r){return new(r||n)(pe(Ys,16),pe(gr,16))};static \u0275pipe=dg({name:"translate",type:n,pure:!1});static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();var Zs=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[t.loader||{provide:Io,useClass:vx},t.compiler||{provide:$c,useClass:bx},t.parser||{provide:Uc,useClass:Ex},t.missingTranslationHandler||{provide:Yd,useClass:wx},Zd,{provide:ZE,useValue:t.isolate},{provide:JE,useValue:t.useDefaultLang},{provide:eb,useValue:t.extend},{provide:XE,useValue:t.defaultLanguage},Ys]}}static forChild(t={}){return{ngModule:n,providers:[t.loader||{provide:Io,useClass:vx},t.compiler||{provide:$c,useClass:bx},t.parser||{provide:Uc,useClass:Ex},t.missingTranslationHandler||{provide:Yd,useClass:wx},{provide:ZE,useValue:t.isolate},{provide:JE,useValue:t.useDefaultLang},{provide:eb,useValue:t.extend},{provide:XE,useValue:t.defaultLanguage},Ys]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=oe({type:n});static \u0275inj=ie({})}return n})();function sz(n,e){if(n&1&&(Kn(0),se(1,"td"),Le(2),ce(),Qn()),n&2){let t=e.$implicit,r=We().$implicit,i=We(2);de(),_o(t),de(),Zn(i.parseCell(t,r))}}function az(n,e){if(n&1&&(se(0,"tr"),ht(1,sz,3,4,"ng-container",14),ce()),n&2){let t=We(2);de(),ke("ngForOf",t.getCells("loyitePoints"))}}function cz(n,e){if(n&1&&(Kn(0),se(1,"td"),Le(2),ce(),Qn()),n&2){let t=e.$implicit,r=We().$implicit,i=We(2);de(),_o(t),de(),Zn(i.parseCell(t,r))}}function lz(n,e){if(n&1&&(se(0,"tr"),ht(1,cz,3,4,"ng-container",14),ce()),n&2){let t=We(2);de(),ke("ngForOf",t.getCells("badges"))}}function uz(n,e){if(n&1&&(Kn(0),se(1,"div",8)(2,"p",9),Le(3,"Points"),ce(),se(4,"table",10)(5,"thead")(6,"tr")(7,"th",11),Le(8,"Rank"),ce(),se(9,"th",12),Le(10,"User"),ce(),se(11,"th",13),Le(12,'"SCORE"'),ce()()(),se(13,"tbody"),ht(14,az,2,1,"tr",14),ce()()(),se(15,"div",15)(16,"p",16),Le(17,"Badge Collectors"),ce(),se(18,"table",10)(19,"thead")(20,"tr")(21,"th",11),Le(22,"Rank"),ce(),se(23,"th",12),Le(24,"User"),ce(),se(25,"th",17),Le(26,"Badges"),ce()()(),se(27,"tbody"),ht(28,lz,2,1,"tr",14),ce()()(),Qn()),n&2){let t=We();de(14),ke("ngForOf",t.leaderboards.loyitePoints),de(14),ke("ngForOf",t.leaderboards.gameBadges)}}function dz(n,e){if(n&1){let t=Ni();se(0,"div",18)(1,"app-loader",19),ld("loadingChange",function(i){Ai(t);let o=We();return mg(o.loading,i)||(o.loading=i),Mi(i)}),ce()()}if(n&2){let t=We();de(),cd("loading",t.loading)}}var mm=class n{loading=!1;leaderboards={loyitePoints:[{rank:1,name:"ArthurKnight",points:1520},{rank:2,name:"LadyElira",points:1485},{rank:3,name:"ShadowHex",points:1450},{rank:4,name:"BlazeWolf",points:1400},{rank:5,name:"Nexarion",points:1370},{rank:6,name:"FrostNova",points:1340},{rank:7,name:"MiraFlare",points:1325},{rank:8,name:"GrimVox",points:1300},{rank:9,name:"ZenithOne",points:1285},{rank:10,name:"EchoMist",points:1270},{rank:11,name:"Valcrys",points:1240},{rank:12,name:"LunaSpark",points:1215},{rank:13,name:"IronCrow",points:1200},{rank:14,name:"SableFox",points:1180},{rank:15,name:"CrystalWave",points:1165},{rank:16,name:"PyroJin",points:1150},{rank:17,name:"RavenLock",points:1135},{rank:18,name:"StormHowl",points:1120},{rank:19,name:"DuskSpire",points:1105},{rank:20,name:"SolarMagi",points:1090},{rank:21,name:"QuorraRay",points:1075},{rank:22,name:"ThornBane",points:1060},{rank:23,name:"EmberFall",points:1040},{rank:24,name:"NightShard",points:1020},{rank:25,name:"ZephyrRune",points:1e3}],gameBadges:[{rank:1,name:"ArthurKnight",badges:12},{rank:2,name:"LadyElira",badges:11},{rank:2,name:"ShadowHex",badges:11},{rank:4,name:"BlazeWolf",badges:10},{rank:4,name:"Nexarion",badges:10},{rank:4,name:"FrostNova",badges:10},{rank:7,name:"MiraFlare",badges:9},{rank:7,name:"GrimVox",badges:9},{rank:9,name:"ZenithOne",badges:8},{rank:9,name:"EchoMist",badges:8},{rank:9,name:"Valcrys",badges:8},{rank:12,name:"LunaSpark",badges:7},{rank:12,name:"IronCrow",badges:7},{rank:12,name:"SableFox",badges:7},{rank:15,name:"CrystalWave",badges:6},{rank:15,name:"PyroJin",badges:6},{rank:17,name:"RavenLock",badges:5},{rank:17,name:"StormHowl",badges:5},{rank:17,name:"DuskSpire",badges:5},{rank:20,name:"SolarMagi",badges:4},{rank:20,name:"QuorraRay",badges:4},{rank:22,name:"ThornBane",badges:3},{rank:22,name:"EmberFall",badges:3},{rank:24,name:"NightShard",badges:2},{rank:24,name:"ZephyrRune",badges:2}]};tableCells=["rank","name","points","badges"];constructor(){}ngOnDestroy(){this.loading=!1}ngOnInit(){this.loading=!0}parseCell(e,t){return e==="rank"||e=="badges"?t[e].toString().padStart(4,"0"):t[e]}getCells(e){return e==="loyitePoints"?this.tableCells.filter(t=>t!=="badges"):e==="badges"?this.tableCells.filter(t=>t!=="points"):[]}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=wt({type:n,selectors:[["app-leaderboard-view"]],standalone:!1,decls:12,vars:5,consts:[["loadingContent",""],[1,"container-fluid"],[1,"row"],[1,"col-12","mb-5"],[1,"d-flex"],[1,"nes-bcrikko","mt-2","me-2"],[1,"nes-balloon","from-left"],[4,"ngIf","ngIfElse"],[1,"col","nes-container","is-rounded","with-title","me-5"],[1,"title","nes-text"],[1,"border-0","leaderboards","points-table","w-50"],[1,"rank"],[1,"name"],[1,"points"],[4,"ngFor","ngForOf"],[1,"col","nes-container","is-rounded","with-title"],[1,"title"],[1,"badges"],[1,"col-12"],[3,"loadingChange","loading"]],template:function(t,r){if(t&1&&(se(0,"div",1)(1,"div",2)(2,"div",3)(3,"section",4),Ze(4,"i",5),se(5,"div",6)(6,"p"),Le(7),kn(8,"translate"),ce()()()(),ht(9,uz,29,2,"ng-container",7)(10,dz,2,1,"ng-template",null,0,dd),ce()()),t&2){let i=ad(11);de(7),Zn(Fn(8,3,"MESSAGE_LEADERBOARDS")),de(2),ke("ngIf",!r.loading)("ngIfElse",i)}},dependencies:[Xn,yr,jc,So],styles:[".leaderboards[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{padding:0 20px}.leaderboards[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]{padding-left:25px}"]})};var _m=class{type="";displayName="";profilePic="";badges=[];constructor(e,t){if(!e||!t)throw"missing parameter @ UserBadgeCard::new";let{type:r,display_name:i,profile_image_url:o}=e,{badges:s,username:a}=t;this.type=r,this.displayName=i||a,this.badges=s,this.profilePic=o}get totalBadges(){return this.badges.length}};var rb=new j("COLLECTION");var hz="firebase",fz="11.7.1";oo(hz,fz,"app");function un(n){n===void 0&&(Yp(un),n=R(Oe));let e=n.get(hw);return t=>new ne(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Gc=new Rs("ANGULARFIRE2_VERSION");var Dx=(n,e)=>{let t=e?[e]:xI(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},ib=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(ib||{}),nie=fd()&&typeof Zone<"u"?ib.WARN:ib.SILENT;var ym=class{zone;delegate;constructor(e,t=Ov){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},eh=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=R(fe);this.outsideAngular=t.runOutsideAngular(()=>new ym(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new ym(typeof Zone>"u"?void 0:Zone.current,so))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var mz=new Map,_z={activated:!1,tokenObservers:[]},yz={initialized:!1,enabled:!1};function Er(n){return mz.get(n)||Object.assign({},_z)}function Ax(){return yz}var vz="https://content-firebaseappcheck.googleapis.com/v1";var wz="exchangeDebugToken",Tx={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},lie=24*60*60*1e3;var ab=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new nv,this.pending.promise.catch(t=>{}),yield Ez(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new nv,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Ez(n){return new Promise(e=>{setTimeout(e,n)})}var bz={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ao=new AI("appCheck","AppCheck",bz);function Mx(n){if(!Er(n).activated)throw Ao.create("use-before-activation",{appName:n.name})}function Nx(r,i){return N(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let m=yield s.getHeartbeatsHeader();m&&(o["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(m){throw Ao.create("fetch-network-error",{originalErrorMessage:m?.message})}if(c.status!==200)throw Ao.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(m){throw Ao.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=u.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Ao.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:u.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function Rx(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${vz}/projects/${t}/apps/${r}:${wz}?key=${i}`,body:{debug_token:e}}}var Dz="firebase-app-check-database",Cz=1,cb="firebase-app-check-store";var vm=null;function Tz(){return vm||(vm=new Promise((n,e)=>{try{let t=indexedDB.open(Dz,Cz);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ao.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(cb,{keyPath:"compositeKey"})}}}catch(t){e(Ao.create("storage-open",{originalErrorMessage:t?.message}))}}),vm)}function Iz(n,e){return Sz(Az(n),e)}function Sz(n,e){return N(this,null,function*(){let r=(yield Tz()).transaction(cb,"readwrite"),o=r.objectStore(cb).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(Ao.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function Az(n){return`${n.options.appId}-${n.name}`}var th=new Mf("@firebase/app-check");function ob(n,e){return Sf()?Iz(n,e).catch(t=>{th.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function xx(){return Ax().enabled}function Ox(){return N(this,null,function*(){let n=Ax();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Mz={error:"UNKNOWN_ERROR"};function Nz(n){return TI.encodeString(JSON.stringify(n),!1)}function lb(n,e=!1,t=!1){return N(this,null,function*(){let r=n.app;Mx(r);let i=Er(r),o=i.token,s;if(o&&!nh(o)&&(i.token=void 0,o=void 0),!o){let u=yield i.cachedTokenPromise;u&&(nh(u)?o=u:yield ob(r,void 0))}if(!e&&o&&nh(o))return{token:o.token};let a=!1;if(xx())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=Nx(Rx(r,yield Ox()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=yield i.exchangeTokenPromise;return yield ob(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?th.warn(u.message):t&&th.error(u),sb(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield Er(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?th.warn(u.message):t&&th.error(u),s=u}let c;return o?s?nh(o)?c={token:o.token,internalError:s}:c=sb(s):(c={token:o.token},i.token=o,yield ob(r,o)):c=sb(s),a&&Pz(r,c),c})}function Rz(n){return N(this,null,function*(){let e=n.app;Mx(e);let{provider:t}=Er(e);if(xx()){let r=yield Ox(),{token:i}=yield Nx(Rx(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function xz(n,e,t,r){let{app:i}=n,o=Er(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&nh(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),Ix(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>Ix(n))}function Px(n,e){let t=Er(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Ix(n){let{app:e}=n,t=Er(e),r=t.tokenRefresher;r||(r=Oz(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Oz(n){let{app:e}=n;return new ab(()=>N(null,null,function*(){let t=Er(e),r;if(t.token?r=yield lb(n,!0):r=yield lb(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Er(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Tx.RETRIAL_MIN_WAIT,Tx.RETRIAL_MAX_WAIT)}function Pz(n,e){let t=Er(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function nh(n){return n.expireTimeMillis-Date.now()>0}function sb(n){return{token:Nz(Mz),error:n}}var ub=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Er(this.app);for(let t of e)Px(this.app,t.next);return Promise.resolve()}};function kz(n,e){return new ub(n,e)}function Fz(n){return{getToken:e=>lb(n,e),getLimitedUseToken:()=>Rz(n),addTokenListener:e=>xz(n,"INTERNAL",e),removeTokenListener:e=>Px(n.app,e)}}var Lz="@firebase/app-check",Vz="0.9.1";var Bz="app-check",Sx="app-check-internal";function jz(){bu(new us(Bz,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return kz(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Sx).initialize()})),bu(new us(Sx,n=>{let e=n.getProvider("app-check").getImmediate();return Fz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),oo(Lz,Vz)}jz();var Hz="app-check";var zc=class{constructor(){return Dx(Hz)}};var Uz=["localhost","0.0.0.0","127.0.0.1"],Cie=typeof window<"u"&&Uz.includes(window.location.hostname);var $z="firebase",Gz="11.7.1";mn.registerVersion($z,Gz,"app-compat");var zz=["ngOnDestroy"],Lx=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(zz.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(u=>t.run(()=>u)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,u)=>s.then(d=>{let f=d?.(...u);return r?.spy?.apply&&r.spy.apply(o,u,f),f})})})});var wm=class{constructor(e){return e}},qc=new j("angularfire2.app.options"),Wc=new j("angularfire2.app.name");function rh(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=mn.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>mn.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;qz("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new wm(s)}var qz=(n,...e)=>{fd()&&typeof console<"u"&&console[n](...e)},Wz={provide:wm,useFactory:rh,deps:[qc,fe,[new Z0,Wc]]},Vx=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:qc,useValue:t},{provide:Wc,useValue:r}]}}constructor(t){mn.registerVersion("angularfire",Gc.full,"core"),mn.registerVersion("angularfire",Gc.full,"app-compat"),mn.registerVersion("angular",wN.full,t.toString())}static \u0275fac=function(r){return new(r||n)(k(Pn))};static \u0275mod=oe({type:n});static \u0275inj=ie({providers:[Wz]})}return n})();function Em(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return Kz(i,s)||(Fx("error",`${e} was already initialized on the ${t} Firebase App with different settings.${Qz?" You may need to reload as Firebase is not HMR aware.":""}`),Fx("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function Kz(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var Qz=typeof module<"u"&&!!module.hot,Fx=(n,...e)=>{fd()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var db=new j("angularfire2.auth.use-emulator"),hb=new j("angularfire2.auth.settings"),fb=new j("angularfire2.auth.tenant-id"),pb=new j("angularfire2.auth.langugage-code"),gb=new j("angularfire2.auth.use-device-language"),mb=new j("angularfire.auth.persistence"),_b=(n,e,t,r,i,o,s,a)=>Em(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[u,d]of Object.entries(s))c.settings[u]=d;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),Bx=(()=>{class n{injector=R(qe);authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,u,d,f,g,m){let v=new we,b=Q(void 0).pipe(Fr(s.outsideAngular),Re(()=>o.runOutsideAngular(()=>import("./chunk-H3C6MM54.js"))),Y(()=>rh(t,o,r)),Y(T=>_b(T,o,a,u,d,f,c,g)),ms({bufferSize:1,refCount:!1}));if(vo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Q(null);else{b.pipe(ur()).subscribe();let T=b.pipe(Re(P=>P.getRedirectResult().then(U=>U,()=>null)),un(this.injector),ms({bufferSize:1,refCount:!1})),F=b.pipe(Re(P=>new ne(U=>({unsubscribe:o.runOutsideAngular(()=>P.onAuthStateChanged(W=>U.next(W),W=>U.error(W),()=>U.complete()))})))),$=b.pipe(Re(P=>new ne(U=>({unsubscribe:o.runOutsideAngular(()=>P.onIdTokenChanged(W=>U.next(W),W=>U.error(W),()=>U.complete()))}))));this.authState=T.pipe(cp(F),vi(s.outsideAngular),Fr(s.insideAngular)),this.user=T.pipe(cp($),vi(s.outsideAngular),Fr(s.insideAngular)),this.idToken=this.user.pipe(Re(P=>P?Ce(P.getIdToken()):Q(null))),this.idTokenResult=this.user.pipe(Re(P=>P?Ce(P.getIdTokenResult()):Q(null))),this.credential=rp(T,v,this.authState.pipe(Ue(P=>!P))).pipe(Y(P=>P?.user?P:null),vi(s.outsideAngular),Fr(s.insideAngular))}return Lx(this,b,o,{spy:{apply:(T,F,$)=>{(T.startsWith("signIn")||T.startsWith("createUser"))&&$.then(P=>v.next(P))}}})}static \u0275fac=function(r){return new(r||n)(k(qc),k(Wc,8),k(Pn),k(fe),k(eh),k(db,8),k(hb,8),k(fb,8),k(pb,8),k(gb,8),k(mb,8),k(zc,8))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var jx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Hx={};var Fi,yb;(function(){var n;function e(D,y){function E(){}E.prototype=y.prototype,D.D=y.prototype,D.prototype=new E,D.prototype.constructor=D,D.C=function(C,I,A){for(var w=Array(arguments.length-2),Bt=2;Bt<arguments.length;Bt++)w[Bt-2]=arguments[Bt];return y.prototype[I].apply(C,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,y,E){E||(E=0);var C=Array(16);if(typeof y=="string")for(var I=0;16>I;++I)C[I]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(I=0;16>I;++I)C[I]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=D.g[0],E=D.g[1],I=D.g[2];var A=D.g[3],w=y+(A^E&(I^A))+C[0]+3614090360&4294967295;y=E+(w<<7&4294967295|w>>>25),w=A+(I^y&(E^I))+C[1]+3905402710&4294967295,A=y+(w<<12&4294967295|w>>>20),w=I+(E^A&(y^E))+C[2]+606105819&4294967295,I=A+(w<<17&4294967295|w>>>15),w=E+(y^I&(A^y))+C[3]+3250441966&4294967295,E=I+(w<<22&4294967295|w>>>10),w=y+(A^E&(I^A))+C[4]+4118548399&4294967295,y=E+(w<<7&4294967295|w>>>25),w=A+(I^y&(E^I))+C[5]+1200080426&4294967295,A=y+(w<<12&4294967295|w>>>20),w=I+(E^A&(y^E))+C[6]+2821735955&4294967295,I=A+(w<<17&4294967295|w>>>15),w=E+(y^I&(A^y))+C[7]+4249261313&4294967295,E=I+(w<<22&4294967295|w>>>10),w=y+(A^E&(I^A))+C[8]+1770035416&4294967295,y=E+(w<<7&4294967295|w>>>25),w=A+(I^y&(E^I))+C[9]+2336552879&4294967295,A=y+(w<<12&4294967295|w>>>20),w=I+(E^A&(y^E))+C[10]+4294925233&4294967295,I=A+(w<<17&4294967295|w>>>15),w=E+(y^I&(A^y))+C[11]+2304563134&4294967295,E=I+(w<<22&4294967295|w>>>10),w=y+(A^E&(I^A))+C[12]+1804603682&4294967295,y=E+(w<<7&4294967295|w>>>25),w=A+(I^y&(E^I))+C[13]+4254626195&4294967295,A=y+(w<<12&4294967295|w>>>20),w=I+(E^A&(y^E))+C[14]+2792965006&4294967295,I=A+(w<<17&4294967295|w>>>15),w=E+(y^I&(A^y))+C[15]+1236535329&4294967295,E=I+(w<<22&4294967295|w>>>10),w=y+(I^A&(E^I))+C[1]+4129170786&4294967295,y=E+(w<<5&4294967295|w>>>27),w=A+(E^I&(y^E))+C[6]+3225465664&4294967295,A=y+(w<<9&4294967295|w>>>23),w=I+(y^E&(A^y))+C[11]+643717713&4294967295,I=A+(w<<14&4294967295|w>>>18),w=E+(A^y&(I^A))+C[0]+3921069994&4294967295,E=I+(w<<20&4294967295|w>>>12),w=y+(I^A&(E^I))+C[5]+3593408605&4294967295,y=E+(w<<5&4294967295|w>>>27),w=A+(E^I&(y^E))+C[10]+38016083&4294967295,A=y+(w<<9&4294967295|w>>>23),w=I+(y^E&(A^y))+C[15]+3634488961&4294967295,I=A+(w<<14&4294967295|w>>>18),w=E+(A^y&(I^A))+C[4]+3889429448&4294967295,E=I+(w<<20&4294967295|w>>>12),w=y+(I^A&(E^I))+C[9]+568446438&4294967295,y=E+(w<<5&4294967295|w>>>27),w=A+(E^I&(y^E))+C[14]+3275163606&4294967295,A=y+(w<<9&4294967295|w>>>23),w=I+(y^E&(A^y))+C[3]+4107603335&4294967295,I=A+(w<<14&4294967295|w>>>18),w=E+(A^y&(I^A))+C[8]+1163531501&4294967295,E=I+(w<<20&4294967295|w>>>12),w=y+(I^A&(E^I))+C[13]+2850285829&4294967295,y=E+(w<<5&4294967295|w>>>27),w=A+(E^I&(y^E))+C[2]+4243563512&4294967295,A=y+(w<<9&4294967295|w>>>23),w=I+(y^E&(A^y))+C[7]+1735328473&4294967295,I=A+(w<<14&4294967295|w>>>18),w=E+(A^y&(I^A))+C[12]+2368359562&4294967295,E=I+(w<<20&4294967295|w>>>12),w=y+(E^I^A)+C[5]+4294588738&4294967295,y=E+(w<<4&4294967295|w>>>28),w=A+(y^E^I)+C[8]+2272392833&4294967295,A=y+(w<<11&4294967295|w>>>21),w=I+(A^y^E)+C[11]+1839030562&4294967295,I=A+(w<<16&4294967295|w>>>16),w=E+(I^A^y)+C[14]+4259657740&4294967295,E=I+(w<<23&4294967295|w>>>9),w=y+(E^I^A)+C[1]+2763975236&4294967295,y=E+(w<<4&4294967295|w>>>28),w=A+(y^E^I)+C[4]+1272893353&4294967295,A=y+(w<<11&4294967295|w>>>21),w=I+(A^y^E)+C[7]+4139469664&4294967295,I=A+(w<<16&4294967295|w>>>16),w=E+(I^A^y)+C[10]+3200236656&4294967295,E=I+(w<<23&4294967295|w>>>9),w=y+(E^I^A)+C[13]+681279174&4294967295,y=E+(w<<4&4294967295|w>>>28),w=A+(y^E^I)+C[0]+3936430074&4294967295,A=y+(w<<11&4294967295|w>>>21),w=I+(A^y^E)+C[3]+3572445317&4294967295,I=A+(w<<16&4294967295|w>>>16),w=E+(I^A^y)+C[6]+76029189&4294967295,E=I+(w<<23&4294967295|w>>>9),w=y+(E^I^A)+C[9]+3654602809&4294967295,y=E+(w<<4&4294967295|w>>>28),w=A+(y^E^I)+C[12]+3873151461&4294967295,A=y+(w<<11&4294967295|w>>>21),w=I+(A^y^E)+C[15]+530742520&4294967295,I=A+(w<<16&4294967295|w>>>16),w=E+(I^A^y)+C[2]+3299628645&4294967295,E=I+(w<<23&4294967295|w>>>9),w=y+(I^(E|~A))+C[0]+4096336452&4294967295,y=E+(w<<6&4294967295|w>>>26),w=A+(E^(y|~I))+C[7]+1126891415&4294967295,A=y+(w<<10&4294967295|w>>>22),w=I+(y^(A|~E))+C[14]+2878612391&4294967295,I=A+(w<<15&4294967295|w>>>17),w=E+(A^(I|~y))+C[5]+4237533241&4294967295,E=I+(w<<21&4294967295|w>>>11),w=y+(I^(E|~A))+C[12]+1700485571&4294967295,y=E+(w<<6&4294967295|w>>>26),w=A+(E^(y|~I))+C[3]+2399980690&4294967295,A=y+(w<<10&4294967295|w>>>22),w=I+(y^(A|~E))+C[10]+4293915773&4294967295,I=A+(w<<15&4294967295|w>>>17),w=E+(A^(I|~y))+C[1]+2240044497&4294967295,E=I+(w<<21&4294967295|w>>>11),w=y+(I^(E|~A))+C[8]+1873313359&4294967295,y=E+(w<<6&4294967295|w>>>26),w=A+(E^(y|~I))+C[15]+4264355552&4294967295,A=y+(w<<10&4294967295|w>>>22),w=I+(y^(A|~E))+C[6]+2734768916&4294967295,I=A+(w<<15&4294967295|w>>>17),w=E+(A^(I|~y))+C[13]+1309151649&4294967295,E=I+(w<<21&4294967295|w>>>11),w=y+(I^(E|~A))+C[4]+4149444226&4294967295,y=E+(w<<6&4294967295|w>>>26),w=A+(E^(y|~I))+C[11]+3174756917&4294967295,A=y+(w<<10&4294967295|w>>>22),w=I+(y^(A|~E))+C[2]+718787259&4294967295,I=A+(w<<15&4294967295|w>>>17),w=E+(A^(I|~y))+C[9]+3951481745&4294967295,D.g[0]=D.g[0]+y&4294967295,D.g[1]=D.g[1]+(I+(w<<21&4294967295|w>>>11))&4294967295,D.g[2]=D.g[2]+I&4294967295,D.g[3]=D.g[3]+A&4294967295}r.prototype.u=function(D,y){y===void 0&&(y=D.length);for(var E=y-this.blockSize,C=this.B,I=this.h,A=0;A<y;){if(I==0)for(;A<=E;)i(this,D,A),A+=this.blockSize;if(typeof D=="string"){for(;A<y;)if(C[I++]=D.charCodeAt(A++),I==this.blockSize){i(this,C),I=0;break}}else for(;A<y;)if(C[I++]=D[A++],I==this.blockSize){i(this,C),I=0;break}}this.h=I,this.o+=y},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var y=1;y<D.length-8;++y)D[y]=0;var E=8*this.o;for(y=D.length-8;y<D.length;++y)D[y]=E&255,E/=256;for(this.u(D),D=Array(16),y=E=0;4>y;++y)for(var C=0;32>C;C+=8)D[E++]=this.g[y]>>>C&255;return D};function o(D,y){var E=a;return Object.prototype.hasOwnProperty.call(E,D)?E[D]:E[D]=y(D)}function s(D,y){this.h=y;for(var E=[],C=!0,I=D.length-1;0<=I;I--){var A=D[I]|0;C&&A==y||(E[I]=A,C=!1)}this.g=E}var a={};function c(D){return-128<=D&&128>D?o(D,function(y){return new s([y|0],0>y?-1:0)}):new s([D|0],0>D?-1:0)}function u(D){if(isNaN(D)||!isFinite(D))return f;if(0>D)return T(u(-D));for(var y=[],E=1,C=0;D>=E;C++)y[C]=D/E|0,E*=4294967296;return new s(y,0)}function d(D,y){if(D.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(D.charAt(0)=="-")return T(d(D.substring(1),y));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=u(Math.pow(y,8)),C=f,I=0;I<D.length;I+=8){var A=Math.min(8,D.length-I),w=parseInt(D.substring(I,I+A),y);8>A?(A=u(Math.pow(y,A)),C=C.j(A).add(u(w))):(C=C.j(E),C=C.add(u(w)))}return C}var f=c(0),g=c(1),m=c(16777216);n=s.prototype,n.m=function(){if(b(this))return-T(this).m();for(var D=0,y=1,E=0;E<this.g.length;E++){var C=this.i(E);D+=(0<=C?C:4294967296+C)*y,y*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(v(this))return"0";if(b(this))return"-"+T(this).toString(D);for(var y=u(Math.pow(D,6)),E=this,C="";;){var I=U(E,y).g;E=F(E,I.j(y));var A=((0<E.g.length?E.g[0]:E.h)>>>0).toString(D);if(E=I,v(E))return A+C;for(;6>A.length;)A="0"+A;C=A+C}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function v(D){if(D.h!=0)return!1;for(var y=0;y<D.g.length;y++)if(D.g[y]!=0)return!1;return!0}function b(D){return D.h==-1}n.l=function(D){return D=F(this,D),b(D)?-1:v(D)?0:1};function T(D){for(var y=D.g.length,E=[],C=0;C<y;C++)E[C]=~D.g[C];return new s(E,~D.h).add(g)}n.abs=function(){return b(this)?T(this):this},n.add=function(D){for(var y=Math.max(this.g.length,D.g.length),E=[],C=0,I=0;I<=y;I++){var A=C+(this.i(I)&65535)+(D.i(I)&65535),w=(A>>>16)+(this.i(I)>>>16)+(D.i(I)>>>16);C=w>>>16,A&=65535,w&=65535,E[I]=w<<16|A}return new s(E,E[E.length-1]&-2147483648?-1:0)};function F(D,y){return D.add(T(y))}n.j=function(D){if(v(this)||v(D))return f;if(b(this))return b(D)?T(this).j(T(D)):T(T(this).j(D));if(b(D))return T(this.j(T(D)));if(0>this.l(m)&&0>D.l(m))return u(this.m()*D.m());for(var y=this.g.length+D.g.length,E=[],C=0;C<2*y;C++)E[C]=0;for(C=0;C<this.g.length;C++)for(var I=0;I<D.g.length;I++){var A=this.i(C)>>>16,w=this.i(C)&65535,Bt=D.i(I)>>>16,Mn=D.i(I)&65535;E[2*C+2*I]+=w*Mn,$(E,2*C+2*I),E[2*C+2*I+1]+=A*Mn,$(E,2*C+2*I+1),E[2*C+2*I+1]+=w*Bt,$(E,2*C+2*I+1),E[2*C+2*I+2]+=A*Bt,$(E,2*C+2*I+2)}for(C=0;C<y;C++)E[C]=E[2*C+1]<<16|E[2*C];for(C=y;C<2*y;C++)E[C]=0;return new s(E,0)};function $(D,y){for(;(D[y]&65535)!=D[y];)D[y+1]+=D[y]>>>16,D[y]&=65535,y++}function P(D,y){this.g=D,this.h=y}function U(D,y){if(v(y))throw Error("division by zero");if(v(D))return new P(f,f);if(b(D))return y=U(T(D),y),new P(T(y.g),T(y.h));if(b(y))return y=U(D,T(y)),new P(T(y.g),y.h);if(30<D.g.length){if(b(D)||b(y))throw Error("slowDivide_ only works with positive integers.");for(var E=g,C=y;0>=C.l(D);)E=W(E),C=W(C);var I=K(E,1),A=K(C,1);for(C=K(C,2),E=K(E,2);!v(C);){var w=A.add(C);0>=w.l(D)&&(I=I.add(E),A=w),C=K(C,1),E=K(E,1)}return y=F(D,I.j(y)),new P(I,y)}for(I=f;0<=D.l(y);){for(E=Math.max(1,Math.floor(D.m()/y.m())),C=Math.ceil(Math.log(E)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),A=u(E),w=A.j(y);b(w)||0<w.l(D);)E-=C,A=u(E),w=A.j(y);v(A)&&(A=g),I=I.add(A),D=F(D,w)}return new P(I,D)}n.A=function(D){return U(this,D).h},n.and=function(D){for(var y=Math.max(this.g.length,D.g.length),E=[],C=0;C<y;C++)E[C]=this.i(C)&D.i(C);return new s(E,this.h&D.h)},n.or=function(D){for(var y=Math.max(this.g.length,D.g.length),E=[],C=0;C<y;C++)E[C]=this.i(C)|D.i(C);return new s(E,this.h|D.h)},n.xor=function(D){for(var y=Math.max(this.g.length,D.g.length),E=[],C=0;C<y;C++)E[C]=this.i(C)^D.i(C);return new s(E,this.h^D.h)};function W(D){for(var y=D.g.length+1,E=[],C=0;C<y;C++)E[C]=D.i(C)<<1|D.i(C-1)>>>31;return new s(E,D.h)}function K(D,y){var E=y>>5;y%=32;for(var C=D.g.length-E,I=[],A=0;A<C;A++)I[A]=0<y?D.i(A+E)>>>y|D.i(A+E+1)<<32-y:D.i(A+E);return new s(I,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,yb=Hx.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,Fi=Hx.Integer=s}).apply(typeof jx<"u"?jx:typeof self<"u"?self:typeof window<"u"?window:{});var bm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Li={};var vb,Zz,Kc,wb,ih,Dm,Eb,bb,Db;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof bm=="object"&&bm];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(l,h){if(h)e:{var p=r;l=l.split(".");for(var _=0;_<l.length-1;_++){var S=l[_];if(!(S in p))break e;p=p[S]}l=l[l.length-1],_=p[l],h=h(_),h!=_&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function o(l,h){l instanceof String&&(l+="");var p=0,_=!1,S={next:function(){if(!_&&p<l.length){var O=p++;return{value:h(O,l[O]),done:!1}}return _=!0,{done:!0,value:void 0}}};return S[Symbol.iterator]=function(){return S},S}i("Array.prototype.values",function(l){return l||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function u(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,p){return l.call.apply(l.bind,arguments)}function f(l,h,p){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var S=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(S,_),l.apply(h,S)}}return function(){return l.apply(h,arguments)}}function g(l,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function m(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function v(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(_,S,O){for(var G=Array(arguments.length-2),je=2;je<arguments.length;je++)G[je-2]=arguments[je];return h.prototype[S].apply(_,G)}}function b(l){let h=l.length;if(0<h){let p=Array(h);for(let _=0;_<h;_++)p[_]=l[_];return p}return[]}function T(l,h){for(let p=1;p<arguments.length;p++){let _=arguments[p];if(c(_)){let S=l.length||0,O=_.length||0;l.length=S+O;for(let G=0;G<O;G++)l[S+G]=_[G]}else l.push(_)}}class F{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function $(l){return/^[\s\xa0]*$/.test(l)}function P(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function U(l){return U[" "](l),l}U[" "]=function(){};var W=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function K(l,h,p){for(let _ in l)h.call(p,l[_],_,l)}function D(l,h){for(let p in l)h.call(void 0,l[p],p,l)}function y(l){let h={};for(let p in l)h[p]=l[p];return h}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(l,h){let p,_;for(let S=1;S<arguments.length;S++){_=arguments[S];for(p in _)l[p]=_[p];for(let O=0;O<E.length;O++)p=E[O],Object.prototype.hasOwnProperty.call(_,p)&&(l[p]=_[p])}}function I(l){var h=1;l=l.split(":");let p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function A(l){a.setTimeout(()=>{throw l},0)}function w(){var l=or;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class Bt{constructor(){this.h=this.g=null}add(h,p){let _=Mn.get();_.set(h,p),this.h?this.h.next=_:this.g=_,this.h=_}}var Mn=new F(()=>new rn,l=>l.reset());class rn{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let jt,Rr=!1,or=new Bt,rs=()=>{let l=a.Promise.resolve(void 0);jt=()=>{l.then(Xl)}};var Xl=()=>{for(var l;l=w();){try{l.h.call(l.g)}catch(p){A(p)}var h=Mn;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}Rr=!1};function pn(){this.s=this.s,this.C=this.C}pn.prototype.s=!1,pn.prototype.ma=function(){this.s||(this.s=!0,this.N())},pn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ut(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}ut.prototype.h=function(){this.defaultPrevented=!0};var Xi=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return l}();function gn(l,h){if(ut.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(W){e:{try{U(h.nodeName);var S=!0;break e}catch{}S=!1}S||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:is[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&gn.aa.h.call(this)}}v(gn,ut);var is={2:"touch",3:"pen",4:"mouse"};gn.prototype.h=function(){gn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var xr="closure_listenable_"+(1e6*Math.random()|0),pi=0;function eu(l,h,p,_,S){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!_,this.ha=S,this.key=++pi,this.da=this.fa=!1}function ka(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function eo(l){this.src=l,this.g={},this.h=0}eo.prototype.add=function(l,h,p,_,S){var O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);var G=Fa(l,h,_,S);return-1<G?(h=l[G],p||(h.fa=!1)):(h=new eu(h,this.src,O,!!_,S),h.fa=p,l.push(h)),h};function tu(l,h){var p=h.type;if(p in l.g){var _=l.g[p],S=Array.prototype.indexOf.call(_,h,void 0),O;(O=0<=S)&&Array.prototype.splice.call(_,S,1),O&&(ka(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Fa(l,h,p,_){for(var S=0;S<l.length;++S){var O=l[S];if(!O.da&&O.listener==h&&O.capture==!!p&&O.ha==_)return S}return-1}var nu="closure_lm_"+(1e6*Math.random()|0),ru={};function iu(l,h,p,_,S){if(_&&_.once)return lf(l,h,p,_,S);if(Array.isArray(h)){for(var O=0;O<h.length;O++)iu(l,h[O],p,_,S);return null}return p=Va(p),l&&l[xr]?l.K(h,p,u(_)?!!_.capture:!!_,S):ou(l,h,p,!1,_,S)}function ou(l,h,p,_,S,O){if(!h)throw Error("Invalid event type");var G=u(S)?!!S.capture:!!S,je=os(l);if(je||(l[nu]=je=new eo(l)),p=je.add(h,p,_,G,O),p.proxy)return p;if(_=Ly(),p.proxy=_,_.src=l,_.listener=p,l.addEventListener)Xi||(S=G),S===void 0&&(S=!1),l.addEventListener(h.toString(),_,S);else if(l.attachEvent)l.attachEvent(su(h.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Ly(){function l(p){return h.call(l.src,l.listener,p)}let h=uf;return l}function lf(l,h,p,_,S){if(Array.isArray(h)){for(var O=0;O<h.length;O++)lf(l,h[O],p,_,S);return null}return p=Va(p),l&&l[xr]?l.L(h,p,u(_)?!!_.capture:!!_,S):ou(l,h,p,!0,_,S)}function Or(l,h,p,_,S){if(Array.isArray(h))for(var O=0;O<h.length;O++)Or(l,h[O],p,_,S);else _=u(_)?!!_.capture:!!_,p=Va(p),l&&l[xr]?(l=l.i,h=String(h).toString(),h in l.g&&(O=l.g[h],p=Fa(O,p,_,S),-1<p&&(ka(O[p]),Array.prototype.splice.call(O,p,1),O.length==0&&(delete l.g[h],l.h--)))):l&&(l=os(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Fa(h,p,_,S)),(p=-1<l?h[l]:null)&&to(p))}function to(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[xr])tu(h.i,l);else{var p=l.type,_=l.proxy;h.removeEventListener?h.removeEventListener(p,_,l.capture):h.detachEvent?h.detachEvent(su(p),_):h.addListener&&h.removeListener&&h.removeListener(_),(p=os(h))?(tu(p,l),p.h==0&&(p.src=null,h[nu]=null)):ka(l)}}}function su(l){return l in ru?ru[l]:ru[l]="on"+l}function uf(l,h){if(l.da)l=!0;else{h=new gn(h,this);var p=l.listener,_=l.ha||l.src;l.fa&&to(l),l=p.call(_,h)}return l}function os(l){return l=l[nu],l instanceof eo?l:null}var La="__closure_events_fn_"+(1e9*Math.random()>>>0);function Va(l){return typeof l=="function"?l:(l[La]||(l[La]=function(h){return l.handleEvent(h)}),l[La])}function St(){pn.call(this),this.i=new eo(this),this.M=this,this.F=null}v(St,pn),St.prototype[xr]=!0,St.prototype.removeEventListener=function(l,h,p,_){Or(this,l,h,p,_)};function kt(l,h){var p,_=l.F;if(_)for(p=[];_;_=_.F)p.push(_);if(l=l.M,_=h.type||h,typeof h=="string")h=new ut(h,l);else if(h instanceof ut)h.target=h.target||l;else{var S=h;h=new ut(_,l),C(h,S)}if(S=!0,p)for(var O=p.length-1;0<=O;O--){var G=h.g=p[O];S=df(G,_,!0,h)&&S}if(G=h.g=l,S=df(G,_,!0,h)&&S,S=df(G,_,!1,h)&&S,p)for(O=0;O<p.length;O++)G=h.g=p[O],S=df(G,_,!1,h)&&S}St.prototype.N=function(){if(St.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],_=0;_<p.length;_++)ka(p[_]);delete l.g[h],l.h--}}this.F=null},St.prototype.K=function(l,h,p,_){return this.i.add(String(l),h,!1,p,_)},St.prototype.L=function(l,h,p,_){return this.i.add(String(l),h,!0,p,_)};function df(l,h,p,_){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var S=!0,O=0;O<h.length;++O){var G=h[O];if(G&&!G.da&&G.capture==p){var je=G.listener,Ht=G.ha||G.src;G.fa&&tu(l.i,G),S=je.call(Ht,_)!==!1&&S}}return S&&!_.defaultPrevented}function S1(l,h,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function A1(l){l.g=S1(()=>{l.g=null,l.i&&(l.i=!1,A1(l))},l.l);let h=l.h;l.h=null,l.m.apply(null,h)}class lV extends pn{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:A1(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function au(l){pn.call(this),this.h=l,this.g={}}v(au,pn);var M1=[];function N1(l){K(l.g,function(h,p){this.g.hasOwnProperty(p)&&to(h)},l),l.g={}}au.prototype.N=function(){au.aa.N.call(this),N1(this)},au.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vy=a.JSON.stringify,uV=a.JSON.parse,dV=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function By(){}By.prototype.h=null;function R1(l){return l.h||(l.h=l.i())}function x1(){}var cu={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jy(){ut.call(this,"d")}v(jy,ut);function Hy(){ut.call(this,"c")}v(Hy,ut);var ss={},O1=null;function hf(){return O1=O1||new St}ss.La="serverreachability";function P1(l){ut.call(this,ss.La,l)}v(P1,ut);function lu(l){let h=hf();kt(h,new P1(h))}ss.STAT_EVENT="statevent";function k1(l,h){ut.call(this,ss.STAT_EVENT,l),this.stat=h}v(k1,ut);function on(l){let h=hf();kt(h,new k1(h,l))}ss.Ma="timingevent";function F1(l,h){ut.call(this,ss.Ma,l),this.size=h}v(F1,ut);function uu(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function du(){this.g=!0}du.prototype.xa=function(){this.g=!1};function hV(l,h,p,_,S,O){l.info(function(){if(l.g)if(O)for(var G="",je=O.split("&"),Ht=0;Ht<je.length;Ht++){var Ne=je[Ht].split("=");if(1<Ne.length){var Kt=Ne[0];Ne=Ne[1];var Qt=Kt.split("_");G=2<=Qt.length&&Qt[1]=="type"?G+(Kt+"="+Ne+"&"):G+(Kt+"=redacted&")}}else G=null;else G=O;return"XMLHTTP REQ ("+_+") [attempt "+S+"]: "+h+`
`+p+`
`+G})}function fV(l,h,p,_,S,O,G){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+S+"]: "+h+`
`+p+`
`+O+" "+G})}function Ba(l,h,p,_){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+gV(l,p)+(_?" "+_:"")})}function pV(l,h){l.info(function(){return"TIMEOUT: "+h})}du.prototype.info=function(){};function gV(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var _=p[l];if(!(2>_.length)){var S=_[1];if(Array.isArray(S)&&!(1>S.length)){var O=S[0];if(O!="noop"&&O!="stop"&&O!="close")for(var G=1;G<S.length;G++)S[G]=""}}}}return Vy(p)}catch{return h}}var ff={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},L1={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Uy;function pf(){}v(pf,By),pf.prototype.g=function(){return new XMLHttpRequest},pf.prototype.i=function(){return{}},Uy=new pf;function no(l,h,p,_){this.j=l,this.i=h,this.l=p,this.R=_||1,this.U=new au(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new V1}function V1(){this.i=null,this.g="",this.h=!1}var B1={},$y={};function Gy(l,h,p){l.L=1,l.v=yf(gi(h)),l.m=p,l.P=!0,j1(l,null)}function j1(l,h){l.F=Date.now(),gf(l),l.A=gi(l.v);var p=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),eI(p.i,"t",_),l.C=0,p=l.j.J,l.h=new V1,l.g=yI(l.j,p?h:null,!l.m),0<l.O&&(l.M=new lV(g(l.Y,l,l.g),l.O)),h=l.U,p=l.g,_=l.ca;var S="readystatechange";Array.isArray(S)||(S&&(M1[0]=S.toString()),S=M1);for(var O=0;O<S.length;O++){var G=iu(p,S[O],_||h.handleEvent,!1,h.h||h);if(!G)break;h.g[G.key]=G}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),lu(),hV(l.i,l.u,l.A,l.l,l.R,l.m)}no.prototype.ca=function(l){l=l.target;let h=this.M;h&&mi(l)==3?h.j():this.Y(l)},no.prototype.Y=function(l){try{if(l==this.g)e:{let Qt=mi(this.g);var h=this.g.Ba();let Ua=this.g.Z();if(!(3>Qt)&&(Qt!=3||this.g&&(this.h.h||this.g.oa()||aI(this.g)))){this.J||Qt!=4||h==7||(h==8||0>=Ua?lu(3):lu(2)),zy(this);var p=this.g.Z();this.X=p;t:if(H1(this)){var _=aI(this.g);l="";var S=_.length,O=mi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){as(this),hu(this);var G="";break t}this.h.i=new a.TextDecoder}for(h=0;h<S;h++)this.h.h=!0,l+=this.h.i.decode(_[h],{stream:!(O&&h==S-1)});_.length=0,this.h.g+=l,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=p==200,fV(this.i,this.u,this.A,this.l,this.R,Qt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var je,Ht=this.g;if((je=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(je)){var Ne=je;break t}}Ne=null}if(p=Ne)Ba(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qy(this,p);else{this.o=!1,this.s=3,on(12),as(this),hu(this);break e}}if(this.P){p=!0;let sr;for(;!this.J&&this.C<G.length;)if(sr=mV(this,G),sr==$y){Qt==4&&(this.s=4,on(14),p=!1),Ba(this.i,this.l,null,"[Incomplete Response]");break}else if(sr==B1){this.s=4,on(15),Ba(this.i,this.l,G,"[Invalid Chunk]"),p=!1;break}else Ba(this.i,this.l,sr,null),qy(this,sr);if(H1(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qt!=4||G.length!=0||this.h.h||(this.s=1,on(16),p=!1),this.o=this.o&&p,!p)Ba(this.i,this.l,G,"[Invalid Chunked Response]"),as(this),hu(this);else if(0<G.length&&!this.W){this.W=!0;var Kt=this.j;Kt.g==this&&Kt.ba&&!Kt.M&&(Kt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),Jy(Kt),Kt.M=!0,on(11))}}else Ba(this.i,this.l,G,null),qy(this,G);Qt==4&&as(this),this.o&&!this.J&&(Qt==4?pI(this.j,this):(this.o=!1,gf(this)))}else OV(this.g),p==400&&0<G.indexOf("Unknown SID")?(this.s=3,on(12)):(this.s=0,on(13)),as(this),hu(this)}}}catch{}finally{}};function H1(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function mV(l,h){var p=l.C,_=h.indexOf(`
`,p);return _==-1?$y:(p=Number(h.substring(p,_)),isNaN(p)?B1:(_+=1,_+p>h.length?$y:(h=h.slice(_,_+p),l.C=_+p,h)))}no.prototype.cancel=function(){this.J=!0,as(this)};function gf(l){l.S=Date.now()+l.I,U1(l,l.I)}function U1(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=uu(g(l.ba,l),h)}function zy(l){l.B&&(a.clearTimeout(l.B),l.B=null)}no.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(pV(this.i,this.A),this.L!=2&&(lu(),on(17)),as(this),this.s=2,hu(this)):U1(this,this.S-l)};function hu(l){l.j.G==0||l.J||pI(l.j,l)}function as(l){zy(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,N1(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function qy(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Wy(p.h,l))){if(!l.K&&Wy(p.h,l)&&p.G==3){try{var _=p.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var S=_;if(S[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Df(p),Ef(p);else break e;Zy(p),on(18)}}else p.za=S[1],0<p.za-p.T&&37500>S[2]&&p.F&&p.v==0&&!p.C&&(p.C=uu(g(p.Za,p),6e3));if(1>=z1(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else ls(p,11)}else if((l.K||p.g==l)&&Df(p),!$(h))for(S=p.Da.g.parse(h),h=0;h<S.length;h++){let Ne=S[h];if(p.T=Ne[0],Ne=Ne[1],p.G==2)if(Ne[0]=="c"){p.K=Ne[1],p.ia=Ne[2];let Kt=Ne[3];Kt!=null&&(p.la=Kt,p.j.info("VER="+p.la));let Qt=Ne[4];Qt!=null&&(p.Aa=Qt,p.j.info("SVER="+p.Aa));let Ua=Ne[5];Ua!=null&&typeof Ua=="number"&&0<Ua&&(_=1.5*Ua,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;let sr=l.g;if(sr){let Tf=sr.g?sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Tf){var O=_.h;O.g||Tf.indexOf("spdy")==-1&&Tf.indexOf("quic")==-1&&Tf.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Ky(O,O.h),O.h=null))}if(_.D){let Xy=sr.g?sr.g.getResponseHeader("X-HTTP-Session-Id"):null;Xy&&(_.ya=Xy,Ye(_.I,_.D,Xy))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var G=l;if(_.qa=_I(_,_.J?_.ia:null,_.W),G.K){q1(_.h,G);var je=G,Ht=_.L;Ht&&(je.I=Ht),je.B&&(zy(je),gf(je)),_.g=G}else hI(_);0<p.i.length&&bf(p)}else Ne[0]!="stop"&&Ne[0]!="close"||ls(p,7);else p.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?ls(p,7):Yy(p):Ne[0]!="noop"&&p.l&&p.l.ta(Ne),p.v=0)}}lu(4)}catch{}}var _V=class{constructor(l,h){this.g=l,this.map=h}};function $1(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function G1(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function z1(l){return l.h?1:l.g?l.g.size:0}function Wy(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Ky(l,h){l.g?l.g.add(h):l.h=h}function q1(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}$1.prototype.cancel=function(){if(this.i=W1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function W1(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(let p of l.g.values())h=h.concat(p.D);return h}return b(l.i)}function yV(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],p=l.length,_=0;_<p;_++)h.push(l[_]);return h}h=[],p=0;for(_ in l)h[p++]=l[_];return h}function vV(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(let _ in l)h[p++]=_;return h}}}function K1(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=vV(l),_=yV(l),S=_.length,O=0;O<S;O++)h.call(void 0,_[O],p&&p[O],l)}var Q1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wV(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var _=l[p].indexOf("="),S=null;if(0<=_){var O=l[p].substring(0,_);S=l[p].substring(_+1)}else O=l[p];h(O,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function cs(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof cs){this.h=l.h,mf(this,l.j),this.o=l.o,this.g=l.g,_f(this,l.s),this.l=l.l;var h=l.i,p=new gu;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Y1(this,p),this.m=l.m}else l&&(h=String(l).match(Q1))?(this.h=!1,mf(this,h[1]||"",!0),this.o=fu(h[2]||""),this.g=fu(h[3]||"",!0),_f(this,h[4]),this.l=fu(h[5]||"",!0),Y1(this,h[6]||"",!0),this.m=fu(h[7]||"")):(this.h=!1,this.i=new gu(null,this.h))}cs.prototype.toString=function(){var l=[],h=this.j;h&&l.push(pu(h,Z1,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(pu(h,Z1,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(pu(p,p.charAt(0)=="/"?DV:bV,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",pu(p,TV)),l.join("")};function gi(l){return new cs(l)}function mf(l,h,p){l.j=p?fu(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function _f(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function Y1(l,h,p){h instanceof gu?(l.i=h,IV(l.i,l.h)):(p||(h=pu(h,CV)),l.i=new gu(h,l.h))}function Ye(l,h,p){l.i.set(h,p)}function yf(l){return Ye(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function fu(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function pu(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,EV),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function EV(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Z1=/[#\/\?@]/g,bV=/[#\?:]/g,DV=/[#\?]/g,CV=/[#\?@]/g,TV=/#/g;function gu(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function ro(l){l.g||(l.g=new Map,l.h=0,l.i&&wV(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=gu.prototype,n.add=function(l,h){ro(this),this.i=null,l=ja(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function J1(l,h){ro(l),h=ja(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function X1(l,h){return ro(l),h=ja(l,h),l.g.has(h)}n.forEach=function(l,h){ro(this),this.g.forEach(function(p,_){p.forEach(function(S){l.call(h,S,_,this)},this)},this)},n.na=function(){ro(this);let l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let _=0;_<h.length;_++){let S=l[_];for(let O=0;O<S.length;O++)p.push(h[_])}return p},n.V=function(l){ro(this);let h=[];if(typeof l=="string")X1(this,l)&&(h=h.concat(this.g.get(ja(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},n.set=function(l,h){return ro(this),this.i=null,l=ja(this,l),X1(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},n.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function eI(l,h,p){J1(l,h),0<p.length&&(l.i=null,l.g.set(ja(l,h),b(p)),l.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var _=h[p];let O=encodeURIComponent(String(_)),G=this.V(_);for(_=0;_<G.length;_++){var S=O;G[_]!==""&&(S+="="+encodeURIComponent(String(G[_]))),l.push(S)}}return this.i=l.join("&")};function ja(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function IV(l,h){h&&!l.j&&(ro(l),l.i=null,l.g.forEach(function(p,_){var S=_.toLowerCase();_!=S&&(J1(this,_),eI(this,S,p))},l)),l.j=h}function SV(l,h){let p=new du;if(a.Image){let _=new Image;_.onload=m(io,p,"TestLoadImage: loaded",!0,h,_),_.onerror=m(io,p,"TestLoadImage: error",!1,h,_),_.onabort=m(io,p,"TestLoadImage: abort",!1,h,_),_.ontimeout=m(io,p,"TestLoadImage: timeout",!1,h,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else h(!1)}function AV(l,h){let p=new du,_=new AbortController,S=setTimeout(()=>{_.abort(),io(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:_.signal}).then(O=>{clearTimeout(S),O.ok?io(p,"TestPingServer: ok",!0,h):io(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(S),io(p,"TestPingServer: error",!1,h)})}function io(l,h,p,_,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),_(p)}catch{}}function MV(){this.g=new dV}function NV(l,h,p){let _=p||"";try{K1(l,function(S,O){let G=S;u(S)&&(G=Vy(S)),h.push(_+O+"="+encodeURIComponent(G))})}catch(S){throw h.push(_+"type="+encodeURIComponent("_badmap")),S}}function mu(l){this.l=l.Ub||null,this.j=l.eb||!1}v(mu,By),mu.prototype.g=function(){return new vf(this.l,this.j)},mu.prototype.i=function(l){return function(){return l}}({});function vf(l,h){St.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(vf,St),n=vf.prototype,n.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,yu(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_u(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,yu(this)),this.g&&(this.readyState=3,yu(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tI(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function tI(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?_u(this):yu(this),this.readyState==3&&tI(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,_u(this))},n.Qa=function(l){this.g&&(this.response=l,_u(this))},n.ga=function(){this.g&&_u(this)};function _u(l){l.readyState=4,l.l=null,l.j=null,l.v=null,yu(l)}n.setRequestHeader=function(l,h){this.u.append(l,h)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function yu(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(vf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function nI(l){let h="";return K(l,function(p,_){h+=_,h+=":",h+=p,h+=`\r
`}),h}function Qy(l,h,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=nI(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):Ye(l,h,p))}function st(l){St.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(st,St);var RV=/^https?$/i,xV=["POST","PUT"];n=st.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,h,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Uy.g(),this.v=this.o?R1(this.o):R1(Uy),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(O){rI(this,O);return}if(l=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var S in _)p.set(S,_[S]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(let O of _.keys())p.set(O,_.get(O));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),S=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(xV,h,void 0))||_||S||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[O,G]of p)this.g.setRequestHeader(O,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sI(this),this.u=!0,this.g.send(l),this.u=!1}catch(O){rI(this,O)}};function rI(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,iI(l),wf(l)}function iI(l){l.A||(l.A=!0,kt(l,"complete"),kt(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,kt(this,"complete"),kt(this,"abort"),wf(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wf(this,!0)),st.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?oI(this):this.bb())},n.bb=function(){oI(this)};function oI(l){if(l.h&&typeof s<"u"&&(!l.v[1]||mi(l)!=4||l.Z()!=2)){if(l.u&&mi(l)==4)S1(l.Ea,0,l);else if(kt(l,"readystatechange"),mi(l)==4){l.h=!1;try{let G=l.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var _;if(_=G===0){var S=String(l.D).match(Q1)[1]||null;!S&&a.self&&a.self.location&&(S=a.self.location.protocol.slice(0,-1)),_=!RV.test(S?S.toLowerCase():"")}p=_}if(p)kt(l,"complete"),kt(l,"success");else{l.m=6;try{var O=2<mi(l)?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.Z()+"]",iI(l)}}finally{wf(l)}}}}function wf(l,h){if(l.g){sI(l);let p=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||kt(l,"ready");try{p.onreadystatechange=_}catch{}}}function sI(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function mi(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<mi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),uV(h)}};function aI(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function OV(l){let h={};l=(l.g&&2<=mi(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if($(l[_]))continue;var p=I(l[_]);let S=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let O=h[S]||[];h[S]=O,O.push(p)}D(h,function(_){return _.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vu(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function cI(l){this.Aa=0,this.i=[],this.j=new du,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vu("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vu("baseRetryDelayMs",5e3,l),this.cb=vu("retryDelaySeedMs",1e4,l),this.Wa=vu("forwardChannelMaxRetries",2,l),this.wa=vu("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new $1(l&&l.concurrentRequestLimit),this.Da=new MV,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=cI.prototype,n.la=8,n.G=1,n.connect=function(l,h,p,_){on(0),this.W=l,this.H=h||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=_I(this,null,this.W),bf(this)};function Yy(l){if(lI(l),l.G==3){var h=l.U++,p=gi(l.I);if(Ye(p,"SID",l.K),Ye(p,"RID",h),Ye(p,"TYPE","terminate"),wu(l,p),h=new no(l,l.j,h),h.L=2,h.v=yf(gi(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=yI(h.j,null),h.g.ea(h.v)),h.F=Date.now(),gf(h)}mI(l)}function Ef(l){l.g&&(Jy(l),l.g.cancel(),l.g=null)}function lI(l){Ef(l),l.u&&(a.clearTimeout(l.u),l.u=null),Df(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function bf(l){if(!G1(l.h)&&!l.s){l.s=!0;var h=l.Ga;jt||rs(),Rr||(jt(),Rr=!0),or.add(h,l),l.B=0}}function PV(l,h){return z1(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=uu(g(l.Ga,l,h),gI(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let S=new no(this,this.j,l),O=this.o;if(this.S&&(O?(O=y(O),C(O,this.S)):O=this.S),this.m!==null||this.O||(S.H=O,O=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=dI(this,S,h),p=gi(this.I),Ye(p,"RID",l),Ye(p,"CVER",22),this.D&&Ye(p,"X-HTTP-Session-Id",this.D),wu(this,p),O&&(this.O?h="headers="+encodeURIComponent(String(nI(O)))+"&"+h:this.m&&Qy(p,this.m,O)),Ky(this.h,S),this.Ua&&Ye(p,"TYPE","init"),this.P?(Ye(p,"$req",h),Ye(p,"SID","null"),S.T=!0,Gy(S,p,null)):Gy(S,p,h),this.G=2}}else this.G==3&&(l?uI(this,l):this.i.length==0||G1(this.h)||uI(this))};function uI(l,h){var p;h?p=h.l:p=l.U++;let _=gi(l.I);Ye(_,"SID",l.K),Ye(_,"RID",p),Ye(_,"AID",l.T),wu(l,_),l.m&&l.o&&Qy(_,l.m,l.o),p=new no(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=dI(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Ky(l.h,p),Gy(p,_,h)}function wu(l,h){l.H&&K(l.H,function(p,_){Ye(h,_,p)}),l.l&&K1({},function(p,_){Ye(h,_,p)})}function dI(l,h,p){p=Math.min(l.i.length,p);var _=l.l?g(l.l.Na,l.l,l):null;e:{var S=l.i;let O=-1;for(;;){let G=["count="+p];O==-1?0<p?(O=S[0].g,G.push("ofs="+O)):O=0:G.push("ofs="+O);let je=!0;for(let Ht=0;Ht<p;Ht++){let Ne=S[Ht].g,Kt=S[Ht].map;if(Ne-=O,0>Ne)O=Math.max(0,S[Ht].g-100),je=!1;else try{NV(Kt,G,"req"+Ne+"_")}catch{_&&_(Kt)}}if(je){_=G.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,_}function hI(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;jt||rs(),Rr||(jt(),Rr=!0),or.add(h,l),l.v=0}}function Zy(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=uu(g(l.Fa,l),gI(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,fI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=uu(g(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,on(10),Ef(this),fI(this))};function Jy(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function fI(l){l.g=new no(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=gi(l.qa);Ye(h,"RID","rpc"),Ye(h,"SID",l.K),Ye(h,"AID",l.T),Ye(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ye(h,"TO",l.ja),Ye(h,"TYPE","xmlhttp"),wu(l,h),l.m&&l.o&&Qy(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=yf(gi(h)),p.m=null,p.P=!0,j1(p,l)}n.Za=function(){this.C!=null&&(this.C=null,Ef(this),Zy(this),on(19))};function Df(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function pI(l,h){var p=null;if(l.g==h){Df(l),Jy(l),l.g=null;var _=2}else if(Wy(l.h,h))p=h.D,q1(l.h,h),_=1;else return;if(l.G!=0){if(h.o)if(_==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var S=l.B;_=hf(),kt(_,new F1(_,p)),bf(l)}else hI(l);else if(S=h.s,S==3||S==0&&0<h.X||!(_==1&&PV(l,h)||_==2&&Zy(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),S){case 1:ls(l,5);break;case 4:ls(l,10);break;case 3:ls(l,6);break;default:ls(l,2)}}}function gI(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function ls(l,h){if(l.j.info("Error code "+h),h==2){var p=g(l.fb,l),_=l.Xa;let S=!_;_=new cs(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||mf(_,"https"),yf(_),S?SV(_.toString(),p):AV(_.toString(),p)}else on(2);l.G=0,l.l&&l.l.sa(h),mI(l),lI(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),on(2)):(this.j.info("Failed to ping google.com"),on(1))};function mI(l){if(l.G=0,l.ka=[],l.l){let h=W1(l.h);(h.length!=0||l.i.length!=0)&&(T(l.ka,h),T(l.ka,l.i),l.h.i.length=0,b(l.i),l.i.length=0),l.l.ra()}}function _I(l,h,p){var _=p instanceof cs?gi(p):new cs(p);if(_.g!="")h&&(_.g=h+"."+_.g),_f(_,_.s);else{var S=a.location;_=S.protocol,h=h?h+"."+S.hostname:S.hostname,S=+S.port;var O=new cs(null);_&&mf(O,_),h&&(O.g=h),S&&_f(O,S),p&&(O.l=p),_=O}return p=l.D,h=l.ya,p&&h&&Ye(_,p,h),Ye(_,"VER",l.la),wu(l,_),_}function yI(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new st(new mu({eb:p})):new st(l.pa),h.Ha(l.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function vI(){}n=vI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Cf(){}Cf.prototype.g=function(l,h){return new Nn(l,h)};function Nn(l,h){St.call(this),this.g=new cI(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!$(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!$(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ha(this)}v(Nn,St),Nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){Yy(this.g)},Nn.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=Vy(l),l=p);h.i.push(new _V(h.Ya++,l)),h.G==3&&bf(h)},Nn.prototype.N=function(){this.g.l=null,delete this.j,Yy(this.g),delete this.g,Nn.aa.N.call(this)};function wI(l){jy.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(let p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}v(wI,jy);function EI(){Hy.call(this),this.status=1}v(EI,Hy);function Ha(l){this.g=l}v(Ha,vI),Ha.prototype.ua=function(){kt(this.g,"a")},Ha.prototype.ta=function(l){kt(this.g,new wI(l))},Ha.prototype.sa=function(l){kt(this.g,new EI)},Ha.prototype.ra=function(){kt(this.g,"b")},Cf.prototype.createWebChannel=Cf.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,Db=Li.createWebChannelTransport=function(){return new Cf},bb=Li.getStatEventTarget=function(){return hf()},Eb=Li.Event=ss,Dm=Li.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ff.NO_ERROR=0,ff.TIMEOUT=8,ff.HTTP_ERROR=6,ih=Li.ErrorCode=ff,L1.COMPLETE="complete",wb=Li.EventType=L1,x1.EventType=cu,cu.OPEN="a",cu.CLOSE="b",cu.ERROR="c",cu.MESSAGE="d",St.prototype.listen=St.prototype.K,Kc=Li.WebChannel=x1,Zz=Li.FetchXmlHttpFactory=mu,st.prototype.listenOnce=st.prototype.L,st.prototype.getLastError=st.prototype.Ka,st.prototype.getLastErrorCode=st.prototype.Ba,st.prototype.getStatus=st.prototype.Z,st.prototype.getResponseJson=st.prototype.Oa,st.prototype.getResponseText=st.prototype.oa,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Ha,vb=Li.XhrIo=st}).apply(typeof bm<"u"?bm:typeof self<"u"?self:typeof window<"u"?window:{});var Ux="@firebase/firestore",$x="4.7.12";var Ct=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");var Ol="11.7.0";var Lo=new Mf("@firebase/firestore");function tl(){return Lo.logLevel}function rP(n){Lo.setLogLevel(n)}function B(n,...e){if(Lo.logLevel<=Pr.DEBUG){let t=e.map(LC);Lo.debug(`Firestore (${Ol}): ${n}`,...t)}}function pt(n,...e){if(Lo.logLevel<=Pr.ERROR){let t=e.map(LC);Lo.error(`Firestore (${Ol}): ${n}`,...t)}}function Dr(n,...e){if(Lo.logLevel<=Pr.WARN){let t=e.map(LC);Lo.warn(`Firestore (${Ol}): ${n}`,...t)}}function LC(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function J(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,iP(n,r,t)}function iP(n,e,t){let r=`FIRESTORE (${Ol}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw pt(r),new Error(r)}function X(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||iP(e,i,r)}function oP(n,e){n||J(57014,e)}function z(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends SI{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Rt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Fm=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Rb=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ct.UNAUTHENTICATED))}shutdown(){}},xb=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Ob=class{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){X(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Rt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Rt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>N(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Rt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(X(typeof r.accessToken=="string",31837,{l:r}),new Fm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return X(e===null||typeof e=="string",2055,{h:e}),new Ct(e)}},Pb=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},kb=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Pb(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Lm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Fb=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,NI(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){X(this.o===void 0,3512);let r=o=>{o.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,B("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Lm(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(X(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Lm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Jz(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function VC(){return new TextEncoder}var Vm=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Jz(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ae(n,e){return n<e?-1:n>e?1:0}function Lb(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ae(r,i);{let o=VC(),s=Xz(o.encode(Gx(n,t)),o.encode(Gx(e,t)));return s!==0?s:ae(r,i)}}t+=r>65535?2:1}return ae(n.length,e.length)}function Gx(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Xz(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ae(n[t],e[t]);return ae(n.length,e.length)}function ul(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function sP(n){return n+"\0"}var zx=-62135596800,qx=1e6,it=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*qx);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new L(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new L(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<zx)throw new L(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qx}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-zx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ee=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new it(0,0))}static max(){return new n(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Wx="__name__",Bm=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&J(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&J(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ae(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Lb(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fi.fromString(e.substring(4,e.length-2))}},Ae=class n extends Bm{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},e5=/^[_a-zA-Z][_a-zA-Z0-9]*$/,gt=class n extends Bm{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return e5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Wx}static keyField(){return new n([Wx])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new L(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new L(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new L(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new L(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var q=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ae.fromString(e))}static fromName(e){return new n(Ae.fromString(e).popFirst(5))}static empty(){return new n(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ae.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ae(e.slice()))}};var dl=-1,hl=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Vb(n){return n.fields.find(e=>e.kind===2)}function Xs(n){return n.fields.filter(e=>e.kind!==2)}hl.UNKNOWN_ID=-1;var al=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var _h=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,er.min())}};function aP(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new it(t+1,0):new it(t,r));return new er(i,q.empty(),e)}function cP(n){return new er(n.readTime,n.key,dl)}var er=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ee.min(),q.empty(),dl)}static max(){return new n(ee.max(),q.empty(),dl)}};function BC(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=q.comparator(n.documentKey,e.documentKey),t!==0?t:ae(n.largestBatchId,e.largestBatchId))}var lP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",jm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ko(n){return N(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==lP)throw n;B("LocalStore","Unexpectedly lost primary lease")})}var M=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&J(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;t(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var jn="SimpleDb",Hm=class n{static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new aa(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Rt,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new aa(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{let i=jC(r.target.error);this.S.reject(new aa(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(B(jn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new jb(t)}},Vo=class n{static delete(e){return B(jn,"Removing database:",e),ta(tv().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Sf())return!1;if(n.F())return!0;let e=Eu(),t=n.M(e),r=0<t&&t<10,i=uP(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,n.M(Eu())===12.2&&pt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}k(e){return N(this,null,function*(){return this.db||(B(jn,"Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new aa(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new L(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new L(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new aa(e,s))},i.onupgradeneeded=o=>{B(jn,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;if(this.L!==null&&this.L!==o.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${o.oldVersion}, event.newVersion=${o.newVersion}, db.version=${s.version}`);this.B.q(s,i.transaction,o.oldVersion,this.version).next(()=>{B(jn,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{let r=t.target;this.L=r.version},{passive:!0})),this.$&&(this.db.onversionchange=t=>this.$(t)),this.db})}U(e){this.$=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.k(e);let a=Hm.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(u=>(a.v(),u)).catch(u=>(a.abort(u),M.reject(u))).toPromise();return c.catch(()=>{}),yield a.D,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&s<3;if(B(jn,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function uP(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Bb=class{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return ta(this.K.delete())}},aa=class extends L{constructor(e,t){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Qo(n){return n.name==="IndexedDbTransactionError"}var jb=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(B(jn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(B(jn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ta(r)}add(e){return B(jn,"ADD",this.store.name,e,e),ta(this.store.add(e))}get(e){return ta(this.store.get(e)).next(t=>(t===void 0&&(t=null),B(jn,"GET",this.store.name,e,t),t))}delete(e){return B(jn,"DELETE",this.store.name,e),ta(this.store.delete(e))}count(){return B(jn,"COUNT",this.store.name),ta(this.store.count())}J(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new M((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.Y(o,(a,c)=>{s.push(c)}).next(()=>s)}}Z(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new M((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}X(e,t){B(jn,"DELETE ALL",this.store.name);let r=this.options(e,t);r.ee=!1;let i=this.cursor(r);return this.Y(i,(o,s,a)=>a.delete())}te(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.Y(i,t)}ne(e){let t=this.cursor({});return new M((r,i)=>{t.onerror=o=>{let s=jC(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}Y(e,t){let r=[];return new M((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new Bb(a),u=t(a.primaryKey,a.value,c);if(u instanceof M){let d=u.catch(f=>(c.done(),M.reject(f)));r.push(d)}c.isDone?i():c.j===null?a.continue():a.continue(c.j)}}).next(()=>M.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.ee?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function ta(n){return new M((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=jC(r.target.error);t(i)}})}var Kx=!1;function jC(n){let e=Vo.M(Eu());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new L("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Kx||(Kx=!0,setTimeout(()=>{throw r},0)),r}}return n}var dh="IndexBackfiller",Hb=class{constructor(e,t){this.asyncQueue=e,this.re=t,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ie(e){B(dh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{let t=yield this.re.se();B(dh,`Documents written: ${t}`)}catch(t){Qo(t)?B(dh,"Ignoring IndexedDB error during index backfill: ",t):yield Ko(t)}yield this.ie(6e4)}))}},Ub=class{constructor(e,t){this.localStore=e,this.persistence=t}se(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.oe(t,e))})}oe(e,t){let r=new Set,i=t,o=!0;return M.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return B(dh,`Processing collection: ${s}`),this._e(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}_e(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ae(i,o)).next(a=>(B(dh,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}ae(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=cP(o);BC(s,r)>0&&(r=s)}),new er(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Hn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ce&&this.ce(t),t}}n.le=-1;return n})(),ko=-1;function Uh(n){return n==null}function yh(n){return n===0&&1/n==-1/0}function dP(n){return typeof n=="number"&&Number.isInteger(n)&&!yh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Um="";function nn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Qx(e)),e=t5(n.get(t),e);return Qx(e)}function t5(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case Um:t+="";break;default:t+=o}}return t}function Qx(n){return n+Um+""}function oi(n){let e=n.length;if(X(e>=2,64408,{path:n}),e===2)return X(n.charAt(0)===Um&&n.charAt(1)==="",56145,{path:n}),Ae.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf(Um,o);switch((s<0||s>t)&&J(50515,{path:n}),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:J(61167,{path:n})}o=s+2}return new Ae(r)}var ea="remoteDocuments",$h="owner",Qc="owner",vh="mutationQueues",n5="userId",br="mutations",Yx="batchId",oa="userMutationsIndex",Zx=["userId","batchId"];function Mm(n,e){return[n,nn(e)]}function hP(n,e,t){return[n,nn(e),t]}var r5={},fl="documentMutations",$m="remoteDocumentsV14",i5=["prefixPath","collectionGroup","readTime","documentId"],Nm="documentKeyIndex",o5=["prefixPath","collectionGroup","documentId"],fP="collectionGroupIndex",s5=["collectionGroup","readTime","prefixPath","documentId"],wh="remoteDocumentGlobal",$b="remoteDocumentGlobalKey",pl="targets",pP="queryTargetsIndex",a5=["canonicalId","targetId"],gl="targetDocuments",c5=["targetId","path"],HC="documentTargetsIndex",l5=["path","targetId"],Gm="targetGlobalKey",ca="targetGlobal",Eh="collectionParents",u5=["collectionId","parent"],ml="clientMetadata",d5="clientId",j_="bundles",h5="bundleId",H_="namedQueries",f5="name",UC="indexConfiguration",p5="indexId",Gb="collectionGroupIndex",g5="collectionGroup",zm="indexState",m5=["indexId","uid"],gP="sequenceNumberIndex",_5=["uid","sequenceNumber"],qm="indexEntries",y5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],mP="documentKeyIndex",v5=["indexId","uid","orderedDocumentKey"],U_="documentOverlays",w5=["userId","collectionPath","documentId"],zb="collectionPathOverlayIndex",E5=["userId","collectionPath","largestBatchId"],_P="collectionGroupOverlayIndex",b5=["userId","collectionGroup","largestBatchId"],$C="globals",D5="name",yP=[vh,br,fl,ea,pl,$h,ca,gl,ml,wh,Eh,j_,H_],C5=[...yP,U_],vP=[vh,br,fl,$m,pl,$h,ca,gl,ml,wh,Eh,j_,H_,U_],wP=vP,GC=[...wP,UC,zm,qm],T5=GC,I5=[...GC,$C];var bh=class extends jm{constructor(e,t){super(),this.he=e,this.currentSequenceNumber=t}};function xt(n,e){let t=z(n);return Vo.N(t.he,e)}function Jx(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Yo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function EP(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Je=class n{constructor(e,t){this.comparator=e,this.root=t||ai.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ai.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ai.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sl(this.root,e,this.comparator,!1)}getReverseIterator(){return new sl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sl(this.root,e,this.comparator,!0)}},sl=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ai=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw J(43730,{key:this.key,value:this.value});if(this.right.isRed())throw J(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw J(27949);return e+(this.isRed()?0:1)}};ai.EMPTY=null,ai.RED=!0,ai.BLACK=!1;ai.EMPTY=new class{constructor(){this.size=0}get key(){throw J(57766)}get value(){throw J(16141)}get color(){throw J(16727)}get left(){throw J(29726)}get right(){throw J(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new ai(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Be=class n{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Wm(this.data.getIterator())}getIteratorFrom(e){return new Wm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Wm=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Yc(n){return n.hasNext()?n.getNext():void 0}var Un=class n{constructor(e){this.fields=e,e.sort(gt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Be(gt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ul(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Km=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function bP(){return typeof atob<"u"}var _t=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Km("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};_t.EMPTY_BYTE_STRING=new _t("");var S5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ji(n){if(X(!!n,39018),typeof n=="string"){let e=0,t=S5.exec(n);if(X(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tt(n.seconds),nanos:tt(n.nanos)}}function tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Hi(n){return typeof n=="string"?_t.fromBase64String(n):_t.fromUint8Array(n)}var DP="server_timestamp",CP="__type__",TP="__previous_value__",IP="__local_write_time__";function $_(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[CP])===null||t===void 0?void 0:t.stringValue)===DP}function G_(n){let e=n.mapValue.fields[TP];return $_(e)?G_(e):e}function Dh(n){let e=ji(n.mapValue.fields[IP].timestampValue);return new it(e.seconds,e.nanos)}var qb=class{constructor(e,t,r,i,o,s,a,c,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}},Wb="(default)",Bo=class n{constructor(e,t){this.projectId=e,this.database=t||Wb}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Wb}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var zC="__type__",SP="__max__",Oo={mapValue:{fields:{__type__:{stringValue:SP}}}},qC="__vector__",_l="value",Rm={nullValue:"NULL_VALUE"};function jo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?$_(n)?4:AP(n)?9007199254740991:z_(n)?10:11:J(28295,{value:n})}function ui(n,e){if(n===e)return!0;let t=jo(n);if(t!==jo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Dh(n).isEqual(Dh(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=ji(i.timestampValue),a=ji(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Hi(i.bytesValue).isEqual(Hi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return tt(i.geoPointValue.latitude)===tt(o.geoPointValue.latitude)&&tt(i.geoPointValue.longitude)===tt(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return tt(i.integerValue)===tt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=tt(i.doubleValue),a=tt(o.doubleValue);return s===a?yh(s)===yh(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ul(n.arrayValue.values||[],e.arrayValue.values||[],ui);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Jx(s)!==Jx(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!ui(s[c],a[c])))return!1;return!0}(n,e);default:return J(52216,{left:n})}}function Ch(n,e){return(n.values||[]).find(t=>ui(t,e))!==void 0}function Ho(n,e){if(n===e)return 0;let t=jo(n),r=jo(e);if(t!==r)return ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ae(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=tt(o.integerValue||o.doubleValue),c=tt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return Xx(n.timestampValue,e.timestampValue);case 4:return Xx(Dh(n),Dh(e));case 5:return Lb(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Hi(o),c=Hi(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=ae(a[u],c[u]);if(d!==0)return d}return ae(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ae(tt(o.latitude),tt(s.latitude));return a!==0?a:ae(tt(o.longitude),tt(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return eO(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,d;let f=o.fields||{},g=s.fields||{},m=(a=f[_l])===null||a===void 0?void 0:a.arrayValue,v=(c=g[_l])===null||c===void 0?void 0:c.arrayValue,b=ae(((u=m?.values)===null||u===void 0?void 0:u.length)||0,((d=v?.values)===null||d===void 0?void 0:d.length)||0);return b!==0?b:eO(m,v)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Oo.mapValue&&s===Oo.mapValue)return 0;if(o===Oo.mapValue)return 1;if(s===Oo.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=Lb(c[f],d[f]);if(g!==0)return g;let m=Ho(a[c[f]],u[d[f]]);if(m!==0)return m}return ae(c.length,d.length)}(n.mapValue,e.mapValue);default:throw J(23264,{Pe:t})}}function Xx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ae(n,e);let t=ji(n),r=ji(e),i=ae(t.seconds,r.seconds);return i!==0?i:ae(t.nanos,r.nanos)}function eO(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ho(t[i],r[i]);if(o)return o}return ae(t.length,r.length)}function yl(n){return Kb(n)}function Kb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=ji(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Hi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Kb(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Kb(t.fields[s])}`;return i+"}"}(n.mapValue):J(61005,{value:n})}function xm(n){switch(jo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=G_(n);return e?16+xm(e):16;case 5:return 2*n.stringValue.length;case 6:return Hi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+xm(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Yo(r.fields,(o,s)=>{i+=o.length+xm(s)}),i}(n.mapValue);default:throw J(13486,{value:n})}}function la(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Qb(n){return!!n&&"integerValue"in n}function Th(n){return!!n&&"arrayValue"in n}function tO(n){return!!n&&"nullValue"in n}function nO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Om(n){return!!n&&"mapValue"in n}function z_(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[zC])===null||t===void 0?void 0:t.stringValue)===qC}function hh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Yo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=hh(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function AP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===SP}var MP={mapValue:{fields:{[zC]:{stringValue:qC},[_l]:{arrayValue:{}}}}};function A5(n){return"nullValue"in n?Rm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?la(Bo.empty(),q.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?z_(n)?MP:{mapValue:{}}:J(35942,{value:n})}function M5(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?la(Bo.empty(),q.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?MP:"mapValue"in n?z_(n)?{mapValue:{}}:Oo:J(61959,{value:n})}function rO(n,e){let t=Ho(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function iO(n,e){let t=Ho(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var tn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Om(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hh(t)}setAll(e){let t=gt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=hh(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Om(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ui(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Om(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Yo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(hh(this.value))}};function NP(n){let e=[];return Yo(n.fields,(t,r)=>{let i=new gt([t]);if(Om(r)){let o=NP(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Un(e)}var Tt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ee.min(),ee.min(),ee.min(),tn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ee.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ee.min(),ee.min(),tn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ee.min(),ee.min(),tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var di=class{constructor(e,t){this.position=e,this.inclusive=t}};function oO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=q.comparator(q.fromName(s.referenceValue),t.key):r=Ho(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function sO(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ui(n.position[t],e.position[t]))return!1;return!0}var ua=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function N5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Qm=class{},Te=class n extends Qm{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Jb(e,t,r):t==="array-contains"?new tD(e,r):t==="in"?new Ym(e,r):t==="not-in"?new nD(e,r):t==="array-contains-any"?new rD(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Xb(e,r):new eD(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ho(t,this.value)):t!==null&&jo(this.value)===jo(t)&&this.matchesComparison(Ho(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Fe=class n extends Qm{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new n(e,t)}matches(e){return vl(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function vl(n){return n.op==="and"}function Yb(n){return n.op==="or"}function WC(n){return RP(n)&&vl(n)}function RP(n){for(let e of n.filters)if(e instanceof Fe)return!1;return!0}function Zb(n){if(n instanceof Te)return n.field.canonicalString()+n.op.toString()+yl(n.value);if(WC(n))return n.filters.map(e=>Zb(e)).join(",");{let e=n.filters.map(t=>Zb(t)).join(",");return`${n.op}(${e})`}}function xP(n,e){return n instanceof Te?function(r,i){return i instanceof Te&&r.op===i.op&&r.field.isEqual(i.field)&&ui(r.value,i.value)}(n,e):n instanceof Fe?function(r,i){return i instanceof Fe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&xP(s,i.filters[a]),!0):!1}(n,e):void J(19439)}function OP(n,e){let t=n.filters.concat(e);return Fe.create(t,n.op)}function PP(n){return n instanceof Te?function(t){return`${t.field.canonicalString()} ${t.op} ${yl(t.value)}`}(n):n instanceof Fe?function(t){return t.op.toString()+" {"+t.getFilters().map(PP).join(" ,")+"}"}(n):"Filter"}var Jb=class extends Te{constructor(e,t,r){super(e,t,r),this.key=q.fromName(r.referenceValue)}matches(e){let t=q.comparator(e.key,this.key);return this.matchesComparison(t)}},Xb=class extends Te{constructor(e,t){super(e,"in",t),this.keys=kP("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},eD=class extends Te{constructor(e,t){super(e,"not-in",t),this.keys=kP("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function kP(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>q.fromName(r.referenceValue))}var tD=class extends Te{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Th(t)&&Ch(t.arrayValue,this.value)}},Ym=class extends Te{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Ch(this.value.arrayValue,t)}},nD=class extends Te{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ch(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ch(this.value.arrayValue,t)}},rD=class extends Te{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Th(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ch(this.value.arrayValue,r))}};var iD=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Ie=null}};function oD(n,e=null,t=[],r=[],i=null,o=null,s=null){return new iD(n,e,t,r,i,o,s)}function da(n){let e=z(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Zb(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Uh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>yl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>yl(r)).join(",")),e.Ie=t}return e.Ie}function Gh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!N5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!xP(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!sO(n.startAt,e.startAt)&&sO(n.endAt,e.endAt)}function Zm(n){return q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Jm(n,e){return n.filters.filter(t=>t instanceof Te&&t.field.isEqual(e))}function aO(n,e,t){let r=Rm,i=!0;for(let o of Jm(n,e)){let s=Rm,a=!0;switch(o.op){case"<":case"<=":s=A5(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Rm}rO({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];rO({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function cO(n,e,t){let r=Oo,i=!0;for(let o of Jm(n,e)){let s=Oo,a=!0;switch(o.op){case">=":case">":s=M5(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Oo}iO({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];iO({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Cr=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function FP(n,e,t,r,i,o,s,a){return new Cr(n,e,t,r,i,o,s,a)}function Pl(n){return new Cr(n)}function lO(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function KC(n){return n.collectionGroup!==null}function cl(n){let e=z(n);if(e.Ee===null){e.Ee=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ee.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Be(gt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new ua(o,r))}),t.has(gt.keyField().canonicalString())||e.Ee.push(new ua(gt.keyField(),r))}return e.Ee}function dn(n){let e=z(n);return e.de||(e.de=R5(e,cl(n))),e.de}function R5(n,e){if(n.limitType==="F")return oD(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ua(i.field,o)});let t=n.endAt?new di(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new di(n.startAt.position,n.startAt.inclusive):null;return oD(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function sD(n,e){let t=n.filters.concat([e]);return new Cr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Xm(n,e,t){return new Cr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zh(n,e){return Gh(dn(n),dn(e))&&n.limitType===e.limitType}function LP(n){return`${da(dn(n))}|lt:${n.limitType}`}function nl(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>PP(i)).join(", ")}]`),Uh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>yl(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>yl(i)).join(",")),`Target(${r})`}(dn(n))}; limitType=${n.limitType})`}function qh(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of cl(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=oO(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,cl(r),i)||r.endAt&&!function(s,a,c){let u=oO(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,cl(r),i))}(n,e)}function VP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function BP(n){return(e,t)=>{let r=!1;for(let i of cl(n)){let o=x5(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function x5(n,e,t){let r=n.field.isKeyField()?q.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?Ho(c,u):J(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return J(19790,{direction:n.dir})}}var Tr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Yo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return EP(this.inner)}size(){return this.innerSize}};var O5=new Je(q.comparator);function An(){return O5}var jP=new Je(q.comparator);function lh(...n){let e=jP;for(let t of n)e=e.insert(t.key,t);return e}function HP(n){let e=jP;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function si(){return fh()}function UP(){return fh()}function fh(){return new Tr(n=>n.toString(),(n,e)=>n.isEqual(e))}var P5=new Je(q.comparator),k5=new Be(q.comparator);function me(...n){let e=k5;for(let t of n)e=e.add(t);return e}var F5=new Be(ae);function QC(){return F5}function YC(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yh(e)?"-0":e}}function $P(n){return{integerValue:""+n}}function GP(n,e){return dP(e)?$P(e):YC(n,e)}var wl=class{constructor(){this._=void 0}};function L5(n,e,t){return n instanceof Uo?function(i,o){let s={fields:{[CP]:{stringValue:DP},[IP]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&$_(o)&&(o=G_(o)),o&&(s.fields[TP]=o),{mapValue:s}}(t,e):n instanceof Ui?qP(n,e):n instanceof $i?WP(n,e):function(i,o){let s=zP(i,o),a=uO(s)+uO(i.Re);return Qb(s)&&Qb(i.Re)?$P(a):YC(i.serializer,a)}(n,e)}function V5(n,e,t){return n instanceof Ui?qP(n,e):n instanceof $i?WP(n,e):t}function zP(n,e){return n instanceof $o?function(r){return Qb(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Uo=class extends wl{},Ui=class extends wl{constructor(e){super(),this.elements=e}};function qP(n,e){let t=KP(e);for(let r of n.elements)t.some(i=>ui(i,r))||t.push(r);return{arrayValue:{values:t}}}var $i=class extends wl{constructor(e){super(),this.elements=e}};function WP(n,e){let t=KP(e);for(let r of n.elements)t=t.filter(i=>!ui(i,r));return{arrayValue:{values:t}}}var $o=class extends wl{constructor(e,t){super(),this.serializer=e,this.Re=t}};function uO(n){return tt(n.integerValue||n.doubleValue)}function KP(n){return Th(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var ha=class{constructor(e,t){this.field=e,this.transform=t}};function B5(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ui&&i instanceof Ui||r instanceof $i&&i instanceof $i?ul(r.elements,i.elements,ui):r instanceof $o&&i instanceof $o?ui(r.Re,i.Re):r instanceof Uo&&i instanceof Uo}(n.transform,e.transform)}var aD=class{constructor(e,t){this.version=e,this.transformResults=t}},lt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Pm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var El=class{};function QP(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new zo(n.key,lt.none()):new Go(n.key,n.data,lt.none());{let t=n.data,r=tn.empty(),i=new Be(gt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Ir(n.key,r,new Un(i.toArray()),lt.none())}}function j5(n,e,t){n instanceof Go?function(i,o,s){let a=i.value.clone(),c=hO(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ir?function(i,o,s){if(!Pm(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=hO(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(YP(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function ph(n,e,t,r){return n instanceof Go?function(o,s,a,c){if(!Pm(o.precondition,s))return a;let u=o.value.clone(),d=fO(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ir?function(o,s,a,c){if(!Pm(o.precondition,s))return a;let u=fO(o.fieldTransforms,c,s),d=s.data;return d.setAll(YP(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return Pm(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function H5(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=zP(r.transform,i||null);o!=null&&(t===null&&(t=tn.empty()),t.set(r.field,o))}return t||null}function dO(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ul(r,i,(o,s)=>B5(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Go=class extends El{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ir=class extends El{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function YP(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function hO(n,e,t){let r=new Map;X(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,V5(s,a,t[i]))}return r}function fO(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,L5(o,s,e))}return r}var zo=class extends El{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ih=class extends El{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Sh=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&j5(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ph(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ph(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=UP();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=QP(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),me())}isEqual(e){return this.batchId===e.batchId&&ul(this.mutations,e.mutations,(t,r)=>dO(t,r))&&ul(this.baseMutations,e.baseMutations,(t,r)=>dO(t,r))}},cD=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){X(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return P5}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Ah=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var lD=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var bt,Se;function ZP(n){switch(n){case x.OK:return J(64938);case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0;default:return J(15467,{code:n})}}function JP(n){if(n===void 0)return pt("GRPC error has no .code"),x.UNKNOWN;switch(n){case bt.OK:return x.OK;case bt.CANCELLED:return x.CANCELLED;case bt.UNKNOWN:return x.UNKNOWN;case bt.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case bt.INTERNAL:return x.INTERNAL;case bt.UNAVAILABLE:return x.UNAVAILABLE;case bt.UNAUTHENTICATED:return x.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case bt.NOT_FOUND:return x.NOT_FOUND;case bt.ALREADY_EXISTS:return x.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return x.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case bt.ABORTED:return x.ABORTED;case bt.OUT_OF_RANGE:return x.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return x.UNIMPLEMENTED;case bt.DATA_LOSS:return x.DATA_LOSS;default:return J(39323,{code:n})}}(Se=bt||(bt={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";var pO=null;var U5=new Fi([4294967295,4294967295],0);function gO(n){let e=VC().encode(n),t=new yb;return t.update(e),new Uint8Array(t.digest())}function mO(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Fi([t,r],0),new Fi([i,o],0)]}var uD=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new sa(`Invalid padding: ${t}`);if(r<0)throw new sa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new sa(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new sa(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Fi.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(Fi.fromNumber(r)));return i.compare(U5)===1&&(i=new Fi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let t=gO(e),[r,i]=mO(t);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);if(!this.be(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.pe===0)return;let t=gO(e),[r,i]=mO(t);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},sa=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Mh=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Nh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ee.min(),i,new Je(ae),An(),me())}},Nh=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,me(),me(),me())}};var ll=class{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}},e_=class{constructor(e,t){this.targetId=e,this.Ce=t}},t_=class{constructor(e,t,r=_t.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},n_=class{constructor(){this.Fe=0,this.Me=_O(),this.xe=_t.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=me(),t=me(),r=me();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:J(38017,{changeType:o})}}),new Nh(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=_O()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,X(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},dD=class{constructor(e){this.ze=e,this.je=new Map,this.He=An(),this.Je=Cm(),this.Ye=Cm(),this.Ze=new Je(ae)}Xe(e){for(let t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(let t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{let r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:J(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){let t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){let o=i.target;if(Zm(o))if(r===0){let s=new q(o.path);this.tt(t,s,Tt.newNoDocument(s,ee.min()))}else X(r===1,20013,{expectedCount:r});else{let s=this.ut(t);if(s!==r){let a=this.ct(e),c=a?this.lt(a,e,s):1;if(c!==0){this.st(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,u)}pO?.ht(function(d,f,g,m,v){var b,T,F,$,P,U;let W={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},K=f.unchangedNames;return K&&(W.bloomFilter={applied:v===0,hashCount:(b=K?.hashCount)!==null&&b!==void 0?b:0,bitmapLength:($=(F=(T=K?.bits)===null||T===void 0?void 0:T.bitmap)===null||F===void 0?void 0:F.length)!==null&&$!==void 0?$:0,padding:(U=(P=K?.bits)===null||P===void 0?void 0:P.padding)!==null&&U!==void 0?U:0,mightContain:D=>{var y;return(y=m?.mightContain(D))!==null&&y!==void 0&&y}}),W}(s,e.Ce,this.ze.Pt(),a,c))}}}}ct(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Hi(r).toUint8Array()}catch(c){if(c instanceof Km)return Dr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new uD(s,i,o)}catch(c){return Dr(c instanceof sa?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.pe===0?null:a}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){let r=this.ze.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.ze.Pt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.tt(t,o,null),i++)}),i}It(e){let t=new Map;this.je.forEach((o,s)=>{let a=this._t(s);if(a){if(o.current&&Zm(a.target)){let c=new q(a.target.path);this.Et(c).has(s)||this.dt(s,c)||this.tt(s,c,Tt.newNoDocument(c,e))}o.Le&&(t.set(s,o.qe()),o.Qe())}});let r=me();this.Ye.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this._t(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.He.forEach((o,s)=>s.setReadTime(e));let i=new Mh(e,t,this.Ze,this.He,r);return this.He=An(),this.Je=Cm(),this.Ye=Cm(),this.Ze=new Je(ae),i}et(e,t){if(!this.it(e))return;let r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;let i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){let t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new n_,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Be(ae),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Be(ae),this.Je=this.Je.insert(e,t)),t}it(e){let t=this._t(e)!==null;return t||B("WatchChangeAggregator","Detected inactive target",e),t}_t(e){let t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new n_),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}};function Cm(){return new Je(q.comparator)}function _O(){return new Je(q.comparator)}var $5={asc:"ASCENDING",desc:"DESCENDING"},G5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},z5={and:"AND",or:"OR"},hD=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function fD(n,e){return n.useProto3Json||Uh(e)?e:{value:e}}function bl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function q5(n,e){return bl(n,e.toTimestamp())}function mt(n){return X(!!n,49232),ee.fromTimestamp(function(t){let r=ji(t);return new it(r.seconds,r.nanos)}(n))}function ZC(n,e){return pD(n,e).canonicalString()}function pD(n,e){let t=function(i){return new Ae(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function ek(n){let e=Ae.fromString(n);return X(uk(e),10190,{key:e.toString()}),e}function Rh(n,e){return ZC(n.databaseId,e.path)}function ci(n,e){let t=ek(e);if(t.get(1)!==n.databaseId.projectId)throw new L(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new L(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new q(rk(t))}function tk(n,e){return ZC(n.databaseId,e)}function nk(n){let e=ek(n);return e.length===4?Ae.emptyPath():rk(e)}function gD(n){return new Ae(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rk(n){return X(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function yO(n,e,t){return{name:Rh(n,e),fields:t.value.mapValue.fields}}function ik(n,e,t){let r=ci(n,e.name),i=mt(e.updateTime),o=e.createTime?mt(e.createTime):ee.min(),s=new tn({mapValue:{fields:e.fields}}),a=Tt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function W5(n,e){return"found"in e?function(r,i){X(!!i.found,43571),i.found.name,i.found.updateTime;let o=ci(r,i.found.name),s=mt(i.found.updateTime),a=i.found.createTime?mt(i.found.createTime):ee.min(),c=new tn({mapValue:{fields:i.found.fields}});return Tt.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){X(!!i.missing,3894),X(!!i.readTime,22933);let o=ci(r,i.missing),s=mt(i.readTime);return Tt.newNoDocument(o,s)}(n,e):J(7234,{result:e})}function K5(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:J(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(X(d===void 0||typeof d=="string",58123),_t.fromBase64String(d||"")):(X(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),_t.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let d=u.code===void 0?x.UNKNOWN:JP(u.code);return new L(d,u.message||"")}(s);t=new t_(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ci(n,r.document.name),o=mt(r.document.updateTime),s=r.document.createTime?mt(r.document.createTime):ee.min(),a=new tn({mapValue:{fields:r.document.fields}}),c=Tt.newFoundDocument(i,o,s,a),u=r.targetIds||[],d=r.removedTargetIds||[];t=new ll(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ci(n,r.document),o=r.readTime?mt(r.readTime):ee.min(),s=Tt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ll([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ci(n,r.document),o=r.removedTargetIds||[];t=new ll([],o,i,null)}else{if(!("filter"in e))return J(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new lD(i,o),a=r.targetId;t=new e_(a,s)}}return t}function xh(n,e){let t;if(e instanceof Go)t={update:yO(n,e.key,e.value)};else if(e instanceof zo)t={delete:Rh(n,e.key)};else if(e instanceof Ir)t={update:yO(n,e.key,e.data),updateMask:e8(e.fieldMask)};else{if(!(e instanceof Ih))return J(16599,{ft:e.type});t={verify:Rh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Uo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ui)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof $i)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof $o)return{fieldPath:s.field.canonicalString(),increment:a.Re};throw J(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:q5(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:J(27497)}(n,e.precondition)),t}function mD(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?lt.updateTime(mt(o.updateTime)):o.exists!==void 0?lt.exists(o.exists):lt.none()}(e.currentDocument):lt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)X(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),c=new Uo;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new Ui(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new $i(d)}else"increment"in a?c=new $o(s,a.increment):J(16584,{proto:a});let u=gt.fromServerFormat(a.fieldPath);return new ha(u,c)}(n,i)):[];if(e.update){e.update.name;let i=ci(n,e.update.name),o=new tn({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let u=c.fieldPaths||[];return new Un(u.map(d=>gt.fromServerFormat(d)))}(e.updateMask);return new Ir(i,o,s,t,r)}return new Go(i,o,t,r)}if(e.delete){let i=ci(n,e.delete);return new zo(i,t)}if(e.verify){let i=ci(n,e.verify);return new Ih(i,t)}return J(1463,{proto:e})}function Q5(n,e){return n&&n.length>0?(X(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?mt(i.updateTime):mt(o);return s.isEqual(ee.min())&&(s=mt(o)),new aD(s,i.transformResults||[])}(t,e))):[]}function ok(n,e){return{documents:[tk(n,e.path)]}}function sk(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=tk(n,i);let o=function(u){if(u.length!==0)return lk(Fe.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(d=>function(g){return{field:rl(g.field),direction:Z5(g.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=fD(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{gt:t,parent:i}}function ak(n){let e=nk(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){X(r===1,65062);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(f){let g=ck(f);return g instanceof Fe&&WC(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(g=>function(v){return new ua(il(v.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,Uh(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(f){let g=!!f.before,m=f.values||[];return new di(m,g)}(t.startAt));let u=null;return t.endAt&&(u=function(f){let g=!f.before,m=f.values||[];return new di(m,g)}(t.endAt)),FP(e,i,s,o,a,"F",c,u)}function Y5(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ck(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=il(t.unaryFilter.field);return Te.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=il(t.unaryFilter.field);return Te.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=il(t.unaryFilter.field);return Te.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=il(t.unaryFilter.field);return Te.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return J(61313);default:return J(60726)}}(n):n.fieldFilter!==void 0?function(t){return Te.create(il(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return J(58110);default:return J(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Fe.create(t.compositeFilter.filters.map(r=>ck(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return J(1026)}}(t.compositeFilter.op))}(n):J(30097,{filter:n})}function Z5(n){return $5[n]}function J5(n){return G5[n]}function X5(n){return z5[n]}function rl(n){return{fieldPath:n.canonicalString()}}function il(n){return gt.fromServerFormat(n.fieldPath)}function lk(n){return n instanceof Te?function(t){if(t.op==="=="){if(nO(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NAN"}};if(tO(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(nO(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NOT_NAN"}};if(tO(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rl(t.field),op:J5(t.op),value:t.value}}}(n):n instanceof Fe?function(t){let r=t.getFilters().map(i=>lk(i));return r.length===1?r[0]:{compositeFilter:{op:X5(t.op),filters:r}}}(n):J(54877,{filter:n})}function e8(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function uk(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Dl=class n{constructor(e,t,r,i,o=ee.min(),s=ee.min(),a=_t.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var r_=class{constructor(e){this.wt=e}};function t8(n,e){let t;if(e.document)t=ik(n.wt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=q.fromSegments(e.noDocument.path),i=pa(e.noDocument.readTime);t=Tt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return J(56709);{let r=q.fromSegments(e.unknownDocument.path),i=pa(e.unknownDocument.version);t=Tt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new it(i[0],i[1]);return ee.fromTimestamp(o)}(e.readTime)),t}function vO(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:i_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Rh(o,s.key),fields:s.data.value.mapValue.fields,updateTime:bl(o,s.version.toTimestamp()),createTime:bl(o,s.createTime.toTimestamp())}}(n.wt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:fa(e.version)};else{if(!e.isUnknownDocument())return J(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:fa(e.version)}}return r}function i_(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function fa(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function pa(n){let e=new it(n.seconds,n.nanoseconds);return ee.fromTimestamp(e)}function na(n,e){let t=(e.baseMutations||[]).map(o=>mD(n.wt,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>mD(n.wt,o)),i=it.fromMillis(e.localWriteTimeMs);return new Sh(e.batchId,i,t,r)}function uh(n){let e=pa(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?pa(n.lastLimboFreeSnapshotVersion):ee.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){let s=o.documents.length;return X(s===1,1966,{count:s}),dn(Pl(nk(o.documents[0])))}(n.query):function(o){return dn(ak(o))}(n.query),new Dl(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,_t.fromBase64String(n.resumeToken))}function dk(n,e){let t=fa(e.snapshotVersion),r=fa(e.lastLimboFreeSnapshotVersion),i;i=Zm(e.target)?ok(n.wt,e.target):sk(n.wt,e.target).gt;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:da(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function JC(n){let e=ak({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Xm(e,e.limit,"L"):e}function Cb(n,e){return new Ah(e.largestBatchId,mD(n.wt,e.overlayMutation))}function wO(n,e){let t=e.path.lastSegment();return[n,nn(e.path.popLast()),t]}function EO(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:fa(r.readTime),documentKey:nn(r.documentKey.path),largestBatchId:r.largestBatchId}}var _D=class{getBundleMetadata(e,t){return bO(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:pa(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return bO(e).put(function(i){return{bundleId:i.id,createTime:fa(mt(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return DO(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:JC(o.bundledQuery),readTime:pa(o.readTime)}}(r)})}saveNamedQuery(e,t){return DO(e).put(function(i){return{name:i.name,readTime:fa(mt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function bO(n){return xt(n,j_)}function DO(n){return xt(n,H_)}var o_=class n{constructor(e,t){this.serializer=e,this.userId=t}static bt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return oh(e).get(wO(this.userId,t)).next(r=>r?Cb(this.serializer,r):null)}getOverlays(e,t){let r=si();return M.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Ah(t,s);i.push(this.St(e,a))}),M.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(nn(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(oh(e).X(zb,a))}),M.waitFor(o)}getOverlaysForCollection(e,t,r){let i=si(),o=nn(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return oh(e).J(zb,s).next(a=>{for(let c of a){let u=Cb(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=si(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return oh(e).te({index:_P,range:a},(c,u,d)=>{let f=Cb(this.serializer,u);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}St(e,t){return oh(e).put(function(i,o,s){let[a,c,u]=wO(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:xh(i.wt,s.mutation)}}(this.serializer,this.userId,t))}};function oh(n){return xt(n,U_)}var yD=class{Dt(e){return xt(e,$C)}getSessionToken(e){return this.Dt(e).get("sessionToken").next(t=>{let r=t?.value;return r?_t.fromUint8Array(r):_t.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Dt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Vi=class{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(tt(e.integerValue));else if("doubleValue"in e){let r=tt(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),yh(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=ji(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(Hi(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?AP(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):z_(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):J(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){let r=e.fields||{};this.Mt(t,55);for(let i of Object.keys(r))this.Nt(i,t),this.Ct(r[i],t)}qt(e,t){var r,i;let o=e.fields||{};this.Mt(t,53);let s=_l,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Mt(t,15),t.xt(tt(a)),this.Nt(s,t),this.Ct(o[s],t)}$t(e,t){let r=e.values||[];this.Mt(t,50);for(let i of r)this.Ct(i,t)}kt(e,t){this.Mt(t,37),q.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}};Vi.Wt=new Vi;var Zc=255;function n8(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function CO(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=n8(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var vD=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.zt(r.value),r=t.next();this.jt()}Ht(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Yt()}Zt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.zt(r);else if(r<2048)this.zt(960|r>>>6),this.zt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.zt(480|r>>>12),this.zt(128|63&r>>>6),this.zt(128|63&r);else{let i=t.codePointAt(0);this.zt(240|i>>>18),this.zt(128|63&i>>>12),this.zt(128|63&i>>>6),this.zt(128|63&i)}}this.jt()}Xt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{let i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Yt()}en(e){let t=this.tn(e),r=CO(t);this.nn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}rn(e){let t=this.tn(e),r=CO(t);this.nn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}sn(){this._n(Zc),this._n(255)}an(){this.un(Zc),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}zt(e){let t=255&e;t===0?(this._n(0),this._n(255)):t===Zc?(this._n(Zc),this._n(0)):this._n(t)}Jt(e){let t=255&e;t===0?(this.un(0),this.un(255)):t===Zc?(this.un(Zc),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},wD=class{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}},ED=class{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}},ra=class{constructor(){this.ln=new vD,this.hn=new wD(this.ln),this.Pn=new ED(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return e===0?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}};var ia=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}In(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Mo(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=TO(n.arrayValue,e.arrayValue),t!==0?t:(t=TO(n.directionalValue,e.directionalValue),t!==0?t:q.comparator(n.documentKey,e.documentKey)))}function TO(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var s_=class{constructor(e){this.En=new Be((t,r)=>gt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.An=[];for(let t of e.filters){let r=t;r.isInequality()?this.En=this.En.add(r):this.An.push(r)}}get Rn(){return this.En.size>1}Vn(e){if(X(e.collectionGroup===this.collectionId,49279),this.Rn)return!1;let t=Vb(e);if(t!==void 0&&!this.mn(t))return!1;let r=Xs(e),i=new Set,o=0,s=0;for(;o<r.length&&this.mn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.En.size>0){let a=this.En.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.fn(a,c)||!this.gn(this.dn[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.dn.length||!this.gn(this.dn[s++],a))return!1}return!0}pn(){if(this.Rn)return null;let e=new Be(gt.comparator),t=[];for(let r of this.An)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new al(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new al(r.field,0))}for(let r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new al(r.field,r.dir==="asc"?0:1)));return new hl(hl.UNKNOWN_ID,this.collectionId,t,_h.empty())}mn(e){for(let t of this.An)if(this.fn(t,e))return!0;return!1}fn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}gn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function hk(n){var e,t;if(X(n instanceof Te||n instanceof Fe,20012),n instanceof Te){if(n instanceof Ym){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>Te.create(n.field,"==",o)))||[];return Fe.create(i,"or")}return n}let r=n.filters.map(i=>hk(i));return Fe.create(r,n.op)}function r8(n){if(n.getFilters().length===0)return[];let e=CD(hk(n));return X(fk(e),7391),bD(e)||DD(e)?[e]:e.getFilters()}function bD(n){return n instanceof Te}function DD(n){return n instanceof Fe&&WC(n)}function fk(n){return bD(n)||DD(n)||function(t){if(t instanceof Fe&&Yb(t)){for(let r of t.getFilters())if(!bD(r)&&!DD(r))return!1;return!0}return!1}(n)}function CD(n){if(X(n instanceof Te||n instanceof Fe,34018),n instanceof Te)return n;if(n.filters.length===1)return CD(n.filters[0]);let e=n.filters.map(r=>CD(r)),t=Fe.create(e,n.op);return t=a_(t),fk(t)?t:(X(t instanceof Fe,64498),X(vl(t),40251),X(t.filters.length>1,57927),t.filters.reduce((r,i)=>XC(r,i)))}function XC(n,e){let t;return X(n instanceof Te||n instanceof Fe,38388),X(e instanceof Te||e instanceof Fe,25473),t=n instanceof Te?e instanceof Te?function(i,o){return Fe.create([i,o],"and")}(n,e):IO(n,e):e instanceof Te?IO(e,n):function(i,o){if(X(i.filters.length>0&&o.filters.length>0,48005),vl(i)&&vl(o))return OP(i,o.getFilters());let s=Yb(i)?i:o,a=Yb(i)?o:i,c=s.filters.map(u=>XC(u,a));return Fe.create(c,"or")}(n,e),a_(t)}function IO(n,e){if(vl(e))return OP(e,n.getFilters());{let t=e.filters.map(r=>XC(n,r));return Fe.create(t,"or")}}function a_(n){if(X(n instanceof Te||n instanceof Fe,11850),n instanceof Te)return n;let e=n.getFilters();if(e.length===1)return a_(e[0]);if(RP(n))return n;let t=e.map(i=>a_(i)),r=[];return t.forEach(i=>{i instanceof Te?r.push(i):i instanceof Fe&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Fe.create(r,n.op)}var TD=class{constructor(){this.yn=new Oh}addToCollectionParentIndex(e,t){return this.yn.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(er.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(er.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}},Oh=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Be(Ae.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Be(Ae.comparator)).toArray()}};var SO="IndexedDbIndexManager",Tm=new Uint8Array(0),ID=class{constructor(e,t){this.databaseId=t,this.wn=new Oh,this.bn=new Tr(r=>da(r),(r,i)=>Gh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.wn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.wn.add(t)});let o={collectionId:r,parent:nn(i)};return AO(e).put(o)}return M.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[sP(t),""],!1,!0);return AO(e).J(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(oi(s.parent))}return r})}addFieldIndex(e,t){let r=sh(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Xc(e);return o.next(a=>{s.put(EO(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=sh(e),i=Xc(e),o=Jc(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=sh(e),r=Jc(e),i=Xc(e);return t.X().next(()=>r.X()).next(()=>i.X())}createTargetIndexes(e,t){return M.forEach(this.Sn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new s_(r).pn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Jc(e),i=!0,o=new Map;return M.forEach(this.Sn(t),s=>this.Dn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=me(),a=[];return M.forEach(o,(c,u)=>{B(SO,`Using index ${function(P){return`id=${P.indexId}|cg=${P.collectionGroup}|f=${P.fields.map(U=>`${U.fieldPath}:${U.kind}`).join(",")}`}(c)} to execute ${da(t)}`);let d=function(P,U){let W=Vb(U);if(W===void 0)return null;for(let K of Jm(P,W.fieldPath))switch(K.op){case"array-contains-any":return K.value.arrayValue.values||[];case"array-contains":return[K.value]}return null}(u,c),f=function(P,U){let W=new Map;for(let K of Xs(U))for(let D of Jm(P,K.fieldPath))switch(D.op){case"==":case"in":W.set(K.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return W.set(K.fieldPath.canonicalString(),D.value),Array.from(W.values())}return null}(u,c),g=function(P,U){let W=[],K=!0;for(let D of Xs(U)){let y=D.kind===0?aO(P,D.fieldPath,P.startAt):cO(P,D.fieldPath,P.startAt);W.push(y.value),K&&(K=y.inclusive)}return new di(W,K)}(u,c),m=function(P,U){let W=[],K=!0;for(let D of Xs(U)){let y=D.kind===0?cO(P,D.fieldPath,P.endAt):aO(P,D.fieldPath,P.endAt);W.push(y.value),K&&(K=y.inclusive)}return new di(W,K)}(u,c),v=this.vn(c,u,g),b=this.vn(c,u,m),T=this.Cn(c,u,f),F=this.Fn(c.indexId,d,v,g.inclusive,b,m.inclusive,T);return M.forEach(F,$=>r.Z($,t.limit).next(P=>{P.forEach(U=>{let W=q.fromSegments(U.documentKey);s.has(W)||(s=s.add(W),a.push(W))})}))}).next(()=>a)}return M.resolve(null)})}Sn(e){let t=this.bn.get(e);return t||(e.filters.length===0?t=[e]:t=r8(Fe.create(e.filters,"and")).map(r=>oD(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.bn.set(e,t),t)}Fn(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),u=c/(t!=null?t.length:1),d=[];for(let f=0;f<c;++f){let g=t?this.Mn(t[f/u]):Tm,m=this.xn(e,g,r[f%u],i),v=this.On(e,g,o[f%u],s),b=a.map(T=>this.xn(e,g,T,!0));d.push(...this.createRange(m,v,b))}return d}xn(e,t,r,i){let o=new ia(e,q.empty(),t,r);return i?o:o.In()}On(e,t,r,i){let o=new ia(e,q.empty(),t,r);return i?o.In():o}Dn(e,t){let r=new s_(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.Vn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.Sn(t);return M.forEach(i,o=>this.Dn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let u=new Be(gt.comparator),d=!1;for(let f of c.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:u=u.add(g.field));for(let f of c.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(d?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Nn(e,t){let r=new ra;for(let i of Xs(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Tn(i.kind);Vi.Wt.vt(o,s)}return r.cn()}Mn(e){let t=new ra;return Vi.Wt.vt(e,t.Tn(0)),t.cn()}Bn(e,t){let r=new ra;return Vi.Wt.vt(la(this.databaseId,t),r.Tn(function(o){let s=Xs(o);return s.length===0?0:s[s.length-1].kind}(e))),r.cn()}Cn(e,t,r){if(r===null)return[];let i=[];i.push(new ra);let o=0;for(let s of Xs(e)){let a=r[o++];for(let c of i)if(this.Ln(t,s.fieldPath)&&Th(a))i=this.kn(i,s,a);else{let u=c.Tn(s.kind);Vi.Wt.vt(a,u)}}return this.qn(i)}vn(e,t,r){return this.Cn(e,t,r.position)}qn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].cn();return t}kn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new ra;c.seed(a.cn()),Vi.Wt.vt(s,c.Tn(t.kind)),o.push(c)}return o}Ln(e,t){return!!e.filters.find(r=>r instanceof Te&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=sh(e),i=Xc(e);return(t?r.J(Gb,IDBKeyRange.bound(t,t)):r.J()).next(o=>{let s=[];return M.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(d,f){let g=f?new _h(f.sequenceNumber,new er(pa(f.readTime),new q(oi(f.documentKey)),f.largestBatchId)):_h.empty(),m=d.fields.map(([v,b])=>new al(gt.fromServerFormat(v),b));return new hl(d.indexId,d.collectionGroup,m,g)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ae(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=sh(e),o=Xc(e);return this.Qn(e).next(s=>i.J(Gb,IDBKeyRange.bound(t,t)).next(a=>M.forEach(a,c=>o.put(EO(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return M.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?M.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),M.forEach(a,c=>this.$n(e,i,c).next(u=>{let d=this.Un(o,c);return u.isEqual(d)?M.resolve():this.Kn(e,o,c,u,d)}))))})}Wn(e,t,r,i){return Jc(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Bn(r,t.key),documentKey:t.key.path.toArray()})}Gn(e,t,r,i){return Jc(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Bn(r,t.key),t.key.path.toArray()])}$n(e,t,r){let i=Jc(e),o=new Be(Mo);return i.te({index:mP,range:IDBKeyRange.only([r.indexId,this.uid,this.Bn(r,t)])},(s,a)=>{o=o.add(new ia(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Un(e,t){let r=new Be(Mo),i=this.Nn(t,e);if(i==null)return r;let o=Vb(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Th(s))for(let a of s.arrayValue.values||[])r=r.add(new ia(t.indexId,e.key,this.Mn(a),i))}else r=r.add(new ia(t.indexId,e.key,Tm,i));return r}Kn(e,t,r,i,o){B(SO,"Updating index entries for document '%s'",t.key);let s=[];return function(c,u,d,f,g){let m=c.getIterator(),v=u.getIterator(),b=Yc(m),T=Yc(v);for(;b||T;){let F=!1,$=!1;if(b&&T){let P=d(b,T);P<0?$=!0:P>0&&(F=!0)}else b!=null?$=!0:F=!0;F?(f(T),T=Yc(v)):$?(g(b),b=Yc(m)):(b=Yc(m),T=Yc(v))}}(i,o,Mo,a=>{s.push(this.Wn(e,t,r,a))},a=>{s.push(this.Gn(e,t,r,a))}),M.waitFor(s)}Qn(e){let t=1;return Xc(e).te({index:gP,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Mo(s,a)).filter((s,a,c)=>!a||Mo(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Mo(s,e),c=Mo(s,t);if(a===0)i[0]=e.In();else if(a>0&&c<0)i.push(s),i.push(s.In());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.zn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Tm,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Tm,[]];o.push(IDBKeyRange.bound(a,c))}return o}zn(e,t){return Mo(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(MO)}getMinOffset(e,t){return M.mapArray(this.Sn(t),r=>this.Dn(e,r).next(i=>i||J(44426))).next(MO)}};function AO(n){return xt(n,Eh)}function Jc(n){return xt(n,qm)}function sh(n){return xt(n,UC)}function Xc(n){return xt(n,zm)}function MO(n){X(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;BC(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new er(e.readTime,e.documentKey,t)}var NO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pk=41943040,Sn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};function gk(n,e,t){let r=n.store(br),i=n.store(fl),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.te({range:s},(d,f,g)=>(a++,g.delete()));o.push(c.next(()=>{X(a===1,47070,{batchId:t.batchId})}));let u=[];for(let d of t.mutations){let f=hP(e,d.key.path,t.batchId);o.push(i.delete(f)),u.push(d.key)}return M.waitFor(o).next(()=>u)}function c_(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw J(14731);e=n.noDocument}return JSON.stringify(e).length}Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(pk,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);var l_=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.jn={}}static bt(e,t,r,i){X(e.uid!=="",64387);let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return No(e).te({index:oa,range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=ol(e),s=No(e);return s.add({}).next(a=>{X(typeof a=="number",49019);let c=new Sh(a,t,r,i),u=function(m,v,b){let T=b.baseMutations.map($=>xh(m.wt,$)),F=b.mutations.map($=>xh(m.wt,$));return{userId:v,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:T,mutations:F}}(this.serializer,this.userId,c),d=[],f=new Be((g,m)=>ae(g.canonicalString(),m.canonicalString()));for(let g of i){let m=hP(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(s.put(u)),d.push(o.put(m,r5))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.jn[a]=c.keys()}),M.waitFor(d).next(()=>c)})}lookupMutationBatch(e,t){return No(e).get(t).next(r=>r?(X(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),na(this.serializer,r)):null)}Hn(e,t){return this.jn[t]?M.resolve(this.jn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.jn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return No(e).te({index:oa,range:i},(s,a,c)=>{a.userId===this.userId&&(X(a.batchId>=r,47524,{Jn:r}),o=na(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=ko;return No(e).te({index:oa,range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,ko],[this.userId,Number.POSITIVE_INFINITY]);return No(e).J(oa,t).next(r=>r.map(i=>na(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Mm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return ol(e).te({range:i},(s,a,c)=>{let[u,d,f]=s,g=oi(d);if(u===this.userId&&t.path.isEqual(g))return No(e).get(f).next(m=>{if(!m)throw J(61480,{Yn:s,batchId:f});X(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:f}),o.push(na(this.serializer,m))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Be(ae),i=[];return t.forEach(o=>{let s=Mm(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=ol(e).te({range:a},(u,d,f)=>{let[g,m,v]=u,b=oi(m);g===this.userId&&o.path.isEqual(b)?r=r.add(v):f.done()});i.push(c)}),M.waitFor(i).next(()=>this.Zn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Mm(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Be(ae);return ol(e).te({range:s},(c,u,d)=>{let[f,g,m]=c,v=oi(g);f===this.userId&&r.isPrefixOf(v)?v.length===i&&(a=a.add(m)):d.done()}).next(()=>this.Zn(e,a))}Zn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(No(e).get(o).next(s=>{if(s===null)throw J(35274,{batchId:o});X(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(na(this.serializer,s))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return gk(e.he,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Xn(t.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Xn(e){delete this.jn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return M.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return ol(e).te({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=oi(o[1]);i.push(c)}else a.done()}).next(()=>{X(i.length===0,56720,{er:i.map(o=>o.canonicalString())})})})}containsKey(e,t){return mk(e,this.userId,t)}tr(e){return _k(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:ko,lastStreamToken:""})}};function mk(n,e,t){let r=Mm(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return ol(n).te({range:o,ee:!0},(a,c,u)=>{let[d,f,g]=a;d===e&&f===i&&(s=!0),u.done()}).next(()=>s)}function No(n){return xt(n,br)}function ol(n){return xt(n,fl)}function _k(n){return xt(n,vh)}var Cl=class n{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new n(0)}static ir(){return new n(-1)}};var SD=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.sr(e).next(t=>{let r=new Cl(t.highestTargetId);return t.highestTargetId=r.next(),this._r(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.sr(e).next(t=>ee.fromTimestamp(new it(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.sr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.sr(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this._r(e,i)))}addTargetData(e,t){return this.ar(e,t).next(()=>this.sr(e).next(r=>(r.targetCount+=1,this.ur(t,r),this._r(e,r))))}updateTargetData(e,t){return this.ar(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>el(e).delete(t.targetId)).next(()=>this.sr(e)).next(r=>(X(r.targetCount>0,8065),r.targetCount-=1,this._r(e,r)))}removeTargets(e,t,r){let i=0,o=[];return el(e).te((s,a)=>{let c=uh(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>M.waitFor(o)).next(()=>i)}forEachTarget(e,t){return el(e).te((r,i)=>{let o=uh(i);t(o)})}sr(e){return RO(e).get(Gm).next(t=>(X(t!==null,2888),t))}_r(e,t){return RO(e).put(Gm,t)}ar(e,t){return el(e).put(dk(this.serializer,t))}ur(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.sr(e).next(t=>t.targetCount)}getTargetData(e,t){let r=da(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return el(e).te({range:i,index:pP},(s,a,c)=>{let u=uh(a);Gh(t,u.target)&&(o=u,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=xo(e);return t.forEach(s=>{let a=nn(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),M.waitFor(i)}removeMatchingKeys(e,t,r){let i=xo(e);return M.forEach(t,o=>{let s=nn(o.path);return M.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=xo(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=xo(e),o=me();return i.te({range:r,ee:!0},(s,a,c)=>{let u=oi(s[1]),d=new q(u);o=o.add(d)}).next(()=>o)}containsKey(e,t){let r=nn(t.path),i=IDBKeyRange.bound([r],[sP(r)],!1,!0),o=0;return xo(e).te({index:HC,ee:!0,range:i},([s,a],c,u)=>{s!==0&&(o++,u.done())}).next(()=>o>0)}Rt(e,t){return el(e).get(t).next(r=>r?uh(r):null)}};function el(n){return xt(n,pl)}function RO(n){return xt(n,ca)}function xo(n){return xt(n,gl)}var xO="LruGarbageCollector",i8=1048576;function OO([n,e],[t,r]){let i=ae(n,t);return i===0?ae(e,r):i}var AD=class{constructor(e){this.cr=e,this.buffer=new Be(OO),this.lr=0}hr(){return++this.lr}Pr(e){let t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();OO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},u_=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){B(xO,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.Tr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Qo(t)?B(xO,"Ignoring IndexedDB error during garbage collection: ",t):yield Ko(t)}yield this.Ir(3e5)}))}},MD=class{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return M.resolve(Hn.le);let r=new AD(t);return this.Er.forEachTarget(e,i=>r.Pr(i.sequenceNumber)).next(()=>this.Er.Ar(e,i=>r.Pr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Er.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(NO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),NO):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let r,i,o,s,a,c,u,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),tl()<=Pr.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function yk(n,e){return new MD(n,e)}var ND=class{constructor(e,t){this.db=e,this.garbageCollector=yk(this,t)}dr(e){let t=this.Vr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ar(e,t){return this.mr(e,(r,i)=>t(i))}addReference(e,t,r){return Im(e,r)}removeReference(e,t,r){return Im(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Im(e,t)}gr(e,t){return function(i,o){let s=!1;return _k(i).ne(a=>mk(i,a,o).next(c=>(c&&(s=!0),M.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.mr(e,(s,a)=>{if(a<=t){let c=this.gr(e,s).next(u=>{if(!u)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,ee.min()),xo(e).delete(function(f){return[0,nn(f.path)]}(s))))});i.push(c)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Im(e,t)}mr(e,t){let r=xo(e),i,o=Hn.le;return r.te({index:HC},([s,a],{path:c,sequenceNumber:u})=>{s===0?(o!==Hn.le&&t(new q(oi(i)),o),o=u,i=c):o=Hn.le}).next(()=>{o!==Hn.le&&t(new q(oi(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Im(n,e){return xo(n).put(function(r,i){return{targetId:0,path:nn(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var d_=class{constructor(){this.changes=new Tr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var RD=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Js(e).put(r)}removeEntry(e,t,r){return Js(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],i_(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.pr(e,r)))}getEntry(e,t){let r=Tt.newInvalidDocument(t);return Js(e).te({index:Nm,range:IDBKeyRange.only(ah(t))},(i,o)=>{r=this.yr(t,o)}).next(()=>r)}wr(e,t){let r={size:0,document:Tt.newInvalidDocument(t)};return Js(e).te({index:Nm,range:IDBKeyRange.only(ah(t))},(i,o)=>{r={document:this.yr(t,o),size:c_(o)}}).next(()=>r)}getEntries(e,t){let r=An();return this.br(e,t,(i,o)=>{let s=this.yr(i,o);r=r.insert(i,s)}).next(()=>r)}Sr(e,t){let r=An(),i=new Je(q.comparator);return this.br(e,t,(o,s)=>{let a=this.yr(o,s);r=r.insert(o,a),i=i.insert(o,c_(s))}).next(()=>({documents:r,Dr:i}))}br(e,t,r){if(t.isEmpty())return M.resolve();let i=new Be(FO);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(ah(i.first()),ah(i.last())),s=i.getIterator(),a=s.getNext();return Js(e).te({index:Nm,range:o},(c,u,d)=>{let f=q.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&FO(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,u),a=s.hasNext()?s.getNext():null),a?d.H(ah(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),i_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Js(e).J(IDBKeyRange.bound(a,c,!0)).next(u=>{o?.incrementDocumentReadCount(u.length);let d=An();for(let f of u){let g=this.yr(q.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(qh(t,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,t,r,i){let o=An(),s=kO(t,r),a=kO(t,er.max());return Js(e).te({index:fP,range:IDBKeyRange.bound(s,a,!0)},(c,u,d)=>{let f=this.yr(q.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(f.key,f),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new xD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return PO(e).get($b).next(t=>(X(!!t,20021),t))}pr(e,t){return PO(e).put($b,t)}yr(e,t){if(t){let r=t8(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ee.min())))return r}return Tt.newInvalidDocument(e)}};function vk(n){return new RD(n)}var xD=class extends d_{constructor(e,t){super(),this.vr=e,this.trackRemovals=t,this.Cr=new Tr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Be((o,s)=>ae(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.Cr.get(o);if(t.push(this.vr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=vO(this.vr.serializer,s);i=i.add(o.path.popLast());let u=c_(c);r+=u-a.size,t.push(this.vr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=vO(this.vr.serializer,s.convertToNoDocument(ee.min()));t.push(this.vr.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.vr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.vr.updateMetadata(e,r)),M.waitFor(t)}getFromCache(e,t){return this.vr.wr(e,t).next(r=>(this.Cr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.vr.Sr(e,t).next(({documents:r,Dr:i})=>(i.forEach((o,s)=>{this.Cr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function PO(n){return xt(n,wh)}function Js(n){return xt(n,$m)}function ah(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function kO(n,e){let t=e.documentKey.path.toArray();return[n,i_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function FO(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=ae(t[o],r[o]),i)return i;return i=ae(t.length,r.length),i||(i=ae(t[t.length-2],r[r.length-2]),i||ae(t[t.length-1],r[r.length-1]))}var OD=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var h_=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ph(r.mutation,i,Un.empty(),it.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,t,r=me()){let i=si();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=lh();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=si();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,me()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=An(),s=fh(),a=function(){return fh()}();return t.forEach((c,u)=>{let d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Ir)?o=o.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),ph(d.mutation,u,d.mutation.getFieldMask(),it.now())):s.set(u.key,Un.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),t.forEach((u,d)=>{var f;return a.set(u,new OD(d,(f=s.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=fh(),i=new Je((s,a)=>s-a),o=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let d=r.get(c)||Un.empty();d=a.applyToLocalView(u,d),r.set(c,d);let f=(i.get(a.batchId)||me()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,f=UP();d.forEach(g=>{if(!o.has(g)){let m=QP(t.get(g),r.get(g));m!==null&&f.set(g,m),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return M.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):KC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):M.resolve(si()),a=dl,c=o;return s.next(u=>M.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,me())).next(d=>({batchId:a,changes:HP(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new q(t)).next(r=>{let i=lh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=lh();return this.indexManager.getCollectionParents(e,o).next(a=>M.forEach(a,c=>{let u=function(f,g){return new Cr(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{let d=u.getKey();s.get(d)===null&&(s=s.insert(d,Tt.newInvalidDocument(d)))});let a=lh();return s.forEach((c,u)=>{let d=o.get(c);d!==void 0&&ph(d.mutation,u,Un.empty(),it.now()),qh(t,u)&&(a=a.insert(c,u))}),a})}};var PD=class{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return M.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:mt(i.createTime)}}(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(i){return{name:i.name,query:JC(i.bundledQuery),readTime:mt(i.readTime)}}(t)),M.resolve()}};var kD=class{constructor(){this.overlays=new Je(q.comparator),this.Or=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){let r=si();return M.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),M.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Or.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Or.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){let i=si(),o=t.length+1,s=new q(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return M.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Je((u,d)=>u-d),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=o.get(u.largestBatchId);d===null&&(d=si(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=si(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return M.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Or.get(i.largestBatchId).delete(r.key);this.Or.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Ah(t,r));let o=this.Or.get(t);o===void 0&&(o=me(),this.Or.set(t,o)),this.Or.set(t,o.add(r.key))}};var FD=class{constructor(){this.sessionToken=_t.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}};var Ph=class{constructor(){this.Nr=new Be(Dt.Br),this.Lr=new Be(Dt.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){let r=new Dt(e,t);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Qr(new Dt(e,t))}$r(e,t){e.forEach(r=>this.removeReference(r,t))}Ur(e){let t=new q(new Ae([])),r=new Dt(t,e),i=new Dt(t,e+1),o=[];return this.Lr.forEachInRange([r,i],s=>{this.Qr(s),o.push(s.key)}),o}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){let t=new q(new Ae([])),r=new Dt(t,e),i=new Dt(t,e+1),o=me();return this.Lr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Dt(e,0),r=this.Nr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Dt=class{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return q.comparator(e.key,t.key)||ae(e.Gr,t.Gr)}static kr(e,t){return ae(e.Gr,t.Gr)||q.comparator(e.key,t.key)}};var LD=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new Be(Dt.Br)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Sh(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.zr=this.zr.add(new Dt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(s)}lookupMutationBatch(e,t){return M.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Hr(r),o=i<0?0:i;return M.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?ko:this.Jn-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Dt(t,0),i=new Dt(t,Number.POSITIVE_INFINITY),o=[];return this.zr.forEachInRange([r,i],s=>{let a=this.jr(s.Gr);o.push(a)}),M.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Be(ae);return t.forEach(i=>{let o=new Dt(i,0),s=new Dt(i,Number.POSITIVE_INFINITY);this.zr.forEachInRange([o,s],a=>{r=r.add(a.Gr)})}),M.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;q.isDocumentKey(o)||(o=o.child(""));let s=new Dt(new q(o),0),a=new Be(ae);return this.zr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Gr)),!0)},s),M.resolve(this.Jr(a))}Jr(e){let t=[];return e.forEach(r=>{let i=this.jr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){X(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return M.forEach(t.mutations,i=>{let o=new Dt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,t){let r=new Dt(t,0),i=this.zr.firstAfterOrEqual(r);return M.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){let t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var VD=class{constructor(e){this.Zr=e,this.docs=function(){return new Je(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Zr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():Tt.newInvalidDocument(t))}getEntries(e,t){let r=An();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Tt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=An(),s=t.path,a=new q(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||BC(cP(d),r)<=0||(i.has(d.key)||qh(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return M.resolve(o)}getAllFromCollectionGroup(e,t,r,i){J(9500)}Xr(e,t){return M.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new BD(this)}getSize(e){return M.resolve(this.size)}},BD=class extends d_{constructor(e){super(),this.vr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.vr.addEntry(e,i)):this.vr.removeEntry(r)}),M.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}};var jD=class{constructor(e){this.persistence=e,this.ei=new Tr(t=>da(t),Gh),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.ti=0,this.ni=new Ph,this.targetCount=0,this.ri=Cl.rr()}forEachTarget(e,t){return this.ei.forEach((r,i)=>t(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ti&&(this.ti=t),M.resolve()}ar(e){this.ei.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ri=new Cl(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.ar(t),M.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ei.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ei.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(o).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){let r=this.ei.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this.ni.qr(t,r),M.resolve()}removeMatchingKeys(e,t,r){this.ni.$r(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),M.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),M.resolve()}getMatchingKeysForTargetId(e,t){let r=this.ni.Wr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this.ni.containsKey(t))}};var kh=class{constructor(e,t){this.ii={},this.overlays={},this.si=new Hn(0),this.oi=!1,this.oi=!0,this._i=new FD,this.referenceDelegate=e(this),this.ai=new jD(this),this.indexManager=new TD,this.remoteDocumentCache=function(i){return new VD(i)}(r=>this.referenceDelegate.ui(r)),this.serializer=new r_(t),this.ci=new PD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ii[e.toKey()];return r||(r=new LD(t,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,r){B("MemoryPersistence","Starting transaction:",e);let i=new HD(this.si.next());return this.referenceDelegate.li(),r(i).next(o=>this.referenceDelegate.hi(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Pi(e,t){return M.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,t)))}},HD=class extends jm{constructor(e){super(),this.currentSequenceNumber=e}},f_=class n{constructor(e){this.persistence=e,this.Ti=new Ph,this.Ii=null}static Ei(e){return new n(e)}get di(){if(this.Ii)return this.Ii;throw J(60996)}addReference(e,t,r){return this.Ti.addReference(r,t),this.di.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.Ti.removeReference(r,t),this.di.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),M.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(i=>this.di.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.di.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.di,r=>{let i=q.fromPath(r);return this.Ai(e,i).next(o=>{o||t.removeEntry(i,ee.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return M.or([()=>M.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}},p_=class n{constructor(e,t){this.persistence=e,this.Ri=new Tr(r=>nn(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=yk(this,t)}static Ei(e,t){return new n(e,t)}li(){}hi(e){return M.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){let t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}Ar(e,t){return M.forEach(this.Ri,(r,i)=>this.gr(e,r,i).next(o=>o?M.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Xr(e,s=>this.gr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,ee.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),M.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),M.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=xm(e.data.value)),t}gr(e,t,r){return M.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.Ri.get(t);return M.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var UD=class{constructor(e){this.serializer=e}q(e,t,r,i){let o=new Hm("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore($h)}(e),function(c){c.createObjectStore(vh,{keyPath:n5}),c.createObjectStore(br,{keyPath:Yx,autoIncrement:!0}).createIndex(oa,Zx,{unique:!0}),c.createObjectStore(fl)}(e),LO(e),function(c){c.createObjectStore(ea)}(e));let s=M.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore(gl),c.deleteObjectStore(pl),c.deleteObjectStore(ca)}(e),LO(e)),s=s.next(()=>function(c){let u=c.store(ca),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ee.min().toTimestamp(),targetCount:0};return u.put(Gm,d)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,u){return u.store(br).J().next(f=>{c.deleteObjectStore(br),c.createObjectStore(br,{keyPath:Yx,autoIncrement:!0}).createIndex(oa,Zx,{unique:!0});let g=u.store(br),m=f.map(v=>g.put(v));return M.waitFor(m)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore(ml,{keyPath:d5})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Vi(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore(wh)}(e),this.mi(o)))),r<7&&i>=7&&(s=s.next(()=>this.fi(o))),r<8&&i>=8&&(s=s.next(()=>this.gi(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.pi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore(j_,{keyPath:h5})})(e),function(c){c.createObjectStore(H_,{keyPath:f5})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let u=c.createObjectStore(U_,{keyPath:w5});u.createIndex(zb,E5,{unique:!1}),u.createIndex(_P,b5,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let u=c.createObjectStore($m,{keyPath:i5});u.createIndex(Nm,o5),u.createIndex(fP,s5)}(e)).next(()=>this.yi(e,o)).next(()=>e.deleteObjectStore(ea))),r<14&&i>=14&&(s=s.next(()=>this.wi(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore(UC,{keyPath:p5,autoIncrement:!0}).createIndex(Gb,g5,{unique:!1}),c.createObjectStore(zm,{keyPath:m5}).createIndex(gP,_5,{unique:!1}),c.createObjectStore(qm,{keyPath:y5}).createIndex(mP,v5,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore(zm).clear()}).next(()=>{t.objectStore(qm).clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore($C,{keyPath:D5})})(e)})),s}mi(e){let t=0;return e.store(ea).te((r,i)=>{t+=c_(i)}).next(()=>{let r={byteSize:t};return e.store(wh).put($b,r)})}Vi(e){let t=e.store(vh),r=e.store(br);return t.J().next(i=>M.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,ko],[o.userId,o.lastAcknowledgedBatchId]);return r.J(oa,s).next(a=>M.forEach(a,c=>{X(c.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});let u=na(this.serializer,c);return gk(e,o.userId,u).next(()=>{})}))}))}fi(e){let t=e.store(gl),r=e.store(ea);return e.store(ca).get(Gm).next(i=>{let o=[];return r.te((s,a)=>{let c=new Ae(s),u=function(f){return[0,nn(f)]}(c);o.push(t.get(u).next(d=>d?M.resolve():(f=>t.put({targetId:0,path:nn(f),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>M.waitFor(o))})}gi(e,t){e.createObjectStore(Eh,{keyPath:u5});let r=t.store(Eh),i=new Oh,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:nn(c)})}};return t.store(ea).te({ee:!0},(s,a)=>{let c=new Ae(s);return o(c.popLast())}).next(()=>t.store(fl).te({ee:!0},([s,a,c],u)=>{let d=oi(a);return o(d.popLast())}))}pi(e){let t=e.store(pl);return t.te((r,i)=>{let o=uh(i),s=dk(this.serializer,o);return t.put(s)})}yi(e,t){let r=t.store(ea),i=[];return r.te((o,s)=>{let a=t.store($m),c=function(f){return f.document?new q(Ae.fromString(f.document.name).popFirst(5)):f.noDocument?q.fromSegments(f.noDocument.path):f.unknownDocument?q.fromSegments(f.unknownDocument.path):J(36783)}(s).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(u))}).next(()=>M.waitFor(i))}wi(e,t){let r=t.store(br),i=vk(this.serializer),o=new kh(f_.Ei,this.serializer.wt);return r.J().next(s=>{let a=new Map;return s.forEach(c=>{var u;let d=(u=a.get(c.userId))!==null&&u!==void 0?u:me();na(this.serializer,c).keys().forEach(f=>d=d.add(f)),a.set(c.userId,d)}),M.forEach(a,(c,u)=>{let d=new Ct(u),f=o_.bt(this.serializer,d),g=o.getIndexManager(d),m=l_.bt(d,this.serializer,g,o.referenceDelegate);return new h_(i,m,f,g).recalculateAndSaveOverlaysForDocumentKeys(new bh(t,Hn.le),c).next()})})}};function LO(n){n.createObjectStore(gl,{keyPath:c5}).createIndex(HC,l5,{unique:!0}),n.createObjectStore(pl,{keyPath:"targetId"}).createIndex(pP,a5,{unique:!0}),n.createObjectStore(ca)}var Ro="IndexedDbPersistence",Tb=18e5,Ib=5e3,Sb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",wk="main",$D=class n{constructor(e,t,r,i,o,s,a,c,u,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.bi=o,this.window=s,this.document=a,this.Si=u,this.Di=d,this.Ci=f,this.si=null,this.oi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fi=null,this.inForeground=!1,this.Mi=null,this.xi=null,this.Oi=Number.NEGATIVE_INFINITY,this.Ni=g=>Promise.resolve(),!n.C())throw new L(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ND(this,i),this.Bi=t+wk,this.serializer=new r_(c),this.Li=new Vo(this.Bi,this.Ci,new UD(this.serializer)),this._i=new yD,this.ai=new SD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=vk(this.serializer),this.ci=new _D,this.window&&this.window.localStorage?this.ki=this.window.localStorage:(this.ki=null,d===!1&&pt(Ro,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.qi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new L(x.FAILED_PRECONDITION,Sb);return this.Qi(),this.$i(),this.Ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ai.getHighestSequenceNumber(e))}).then(e=>{this.si=new Hn(e,this.Si)}).then(()=>{this.oi=!0}).catch(e=>(this.Li&&this.Li.close(),Promise.reject(e)))}Ki(e){return this.Ni=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Li.U(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.bi.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.qi())})))}qi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Sm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Wi(e).next(t=>{t||(this.isPrimary=!1,this.bi.enqueueRetryable(()=>this.Ni(!1)))})}).next(()=>this.Gi(e)).next(t=>this.isPrimary&&!t?this.zi(e).next(()=>!1):!!t&&this.ji(e).next(()=>!0))).catch(e=>{if(Qo(e))return B(Ro,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return B(Ro,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.bi.enqueueRetryable(()=>this.Ni(e)),this.isPrimary=e})}Wi(e){return ch(e).get(Qc).next(t=>M.resolve(this.Hi(t)))}Ji(e){return Sm(e).delete(this.clientId)}Yi(){return N(this,null,function*(){if(this.isPrimary&&!this.Zi(this.Oi,Tb)){this.Oi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=xt(t,ml);return r.J().next(i=>{let o=this.Xi(i,Tb),s=i.filter(a=>o.indexOf(a)===-1);return M.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.ki)for(let t of e)this.ki.removeItem(this.es(t.clientId))}})}Ui(){this.xi=this.bi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.qi().then(()=>this.Yi()).then(()=>this.Ui()))}Hi(e){return!!e&&e.ownerId===this.clientId}Gi(e){return this.Di?M.resolve(!0):ch(e).get(Qc).next(t=>{if(t!==null&&this.Zi(t.leaseTimestampMs,Ib)&&!this.ts(t.ownerId)){if(this.Hi(t)&&this.networkEnabled)return!0;if(!this.Hi(t)){if(!t.allowTabSynchronization)throw new L(x.FAILED_PRECONDITION,Sb);return!1}}return!(!this.networkEnabled||!this.inForeground)||Sm(e).J().next(r=>this.Xi(r,Ib).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&B(Ro,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.oi=!1,this.ns(),this.xi&&(this.xi.cancel(),this.xi=null),this.rs(),this.ss(),yield this.Li.runTransaction("shutdown","readwrite",[$h,ml],e=>{let t=new bh(e,Hn.le);return this.zi(t).next(()=>this.Ji(t))}),this.Li.close(),this._s()})}Xi(e,t){return e.filter(r=>this.Zi(r.updateTimeMs,t)&&!this.ts(r.clientId))}us(){return this.runTransaction("getActiveClients","readonly",e=>Sm(e).J().next(t=>this.Xi(t,Tb).map(r=>r.clientId)))}get started(){return this.oi}getGlobalsCache(){return this._i}getMutationQueue(e,t){return l_.bt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ID(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return o_.bt(this.serializer,e)}getBundleCache(){return this.ci}runTransaction(e,t,r){B(Ro,"Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===17?I5:c===16?T5:c===15?GC:c===14?wP:c===13?vP:c===12?C5:c===11?yP:void J(60245)}(this.Ci),s;return this.Li.runTransaction(e,i,o,a=>(s=new bh(a,this.si?this.si.next():Hn.le),t==="readwrite-primary"?this.Wi(s).next(c=>!!c||this.Gi(s)).next(c=>{if(!c)throw pt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.bi.enqueueRetryable(()=>this.Ni(!1)),new L(x.FAILED_PRECONDITION,lP);return r(s)}).next(c=>this.ji(s).next(()=>c)):this.cs(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}cs(e){return ch(e).get(Qc).next(t=>{if(t!==null&&this.Zi(t.leaseTimestampMs,Ib)&&!this.ts(t.ownerId)&&!this.Hi(t)&&!(this.Di||this.allowTabSynchronization&&t.allowTabSynchronization))throw new L(x.FAILED_PRECONDITION,Sb)})}ji(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ch(e).put(Qc,t)}static C(){return Vo.C()}zi(e){let t=ch(e);return t.get(Qc).next(r=>this.Hi(r)?(B(Ro,"Releasing primary lease."),t.delete(Qc)):M.resolve())}Zi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(pt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Qi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Mi=()=>{this.bi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.qi()))},this.document.addEventListener("visibilitychange",this.Mi),this.inForeground=this.document.visibilityState==="visible")}rs(){this.Mi&&(this.document.removeEventListener("visibilitychange",this.Mi),this.Mi=null)}$i(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Fi=()=>{this.ns();let t=/(?:Version|Mobile)\/1[456]/;rv()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.bi.enterRestrictedMode(!0),this.bi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Fi))}ss(){this.Fi&&(this.window.removeEventListener("pagehide",this.Fi),this.Fi=null)}ts(e){var t;try{let r=((t=this.ki)===null||t===void 0?void 0:t.getItem(this.es(e)))!==null;return B(Ro,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return pt(Ro,"Failed to get zombied client id.",r),!1}}ns(){if(this.ki)try{this.ki.setItem(this.es(this.clientId),String(Date.now()))}catch(e){pt("Failed to set zombie client id.",e)}}_s(){if(this.ki)try{this.ki.removeItem(this.es(this.clientId))}catch{}}es(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function ch(n){return xt(n,$h)}function Sm(n){return xt(n,ml)}function eT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var GD=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ls=r,this.hs=i}static Ps(e,t){let r=me(),i=me();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var zD=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var g_=class{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return rv()?8:uP(Eu())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Rs(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Vs(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new zD;return this.fs(e,t,s).next(a=>{if(o.result=a,this.Is)return this.gs(e,t,s,a.size)})}).next(()=>o.result)}gs(e,t,r,i){return r.documentReadCount<this.Es?(tl()<=Pr.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",nl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),M.resolve()):(tl()<=Pr.DEBUG&&B("QueryEngine","Query:",nl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(tl()<=Pr.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",nl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dn(t))):M.resolve())}Rs(e,t){if(lO(t))return M.resolve(null);let r=dn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Xm(t,null,"F"),r=dn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=me(...o);return this.As.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.ps(t,a);return this.ys(t,u,s,c.readTime)?this.Rs(e,Xm(t,null,"F")):this.ws(e,u,t,c)}))})))}Vs(e,t,r,i){return lO(t)||i.isEqual(ee.min())?M.resolve(null):this.As.getDocuments(e,r).next(o=>{let s=this.ps(t,o);return this.ys(t,s,r,i)?M.resolve(null):(tl()<=Pr.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),nl(t)),this.ws(e,s,t,aP(i,dl)).next(a=>a))})}ps(e,t){let r=new Be(BP(e));return t.forEach((i,o)=>{qh(e,o)&&(r=r.add(o))}),r}ys(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}fs(e,t,r){return tl()<=Pr.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",nl(t)),this.As.getDocumentsMatchingQuery(e,t,er.min(),r)}ws(e,t,r,i){return this.As.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var tT="LocalStore",o8=3e8,qD=class{constructor(e,t,r,i){this.persistence=e,this.bs=t,this.serializer=i,this.Ss=new Je(ae),this.Ds=new Tr(o=>da(o),Gh),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new h_(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}};function Ek(n,e,t,r){return new qD(n,e,t,r)}function bk(n,e){return N(this,null,function*(){let t=z(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Fs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=me();for(let u of i){s.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of o){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Ms:u,removedBatchIds:s,addedBatchIds:a}))})})})}function s8(n,e){let t=z(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Cs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){let f=u.batch,g=f.keys(),m=M.resolve();return g.forEach(v=>{m=m.next(()=>d.getEntry(c,v)).next(b=>{let T=u.docVersions.get(v);X(T!==null,48541),b.version.compareTo(T)<0&&(f.applyToRemoteDocument(b,u),b.isValidDocument()&&(b.setReadTime(u.commitVersion),d.addEntry(b)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=me();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Dk(n){let e=z(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function a8(n,e){let t=z(n),r=e.snapshotVersion,i=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Cs.newChangeBuffer({trackRemovals:!0});i=t.Ss;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.ai.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.ai.addMatchingKeys(o,d.addedDocuments,f)));let m=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(_t.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(f,m),function(b,T,F){return b.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=o8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(g,m,d)&&a.push(t.ai.updateTargetData(o,m))});let c=An(),u=me();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(Ck(o,s,e.documentUpdates).next(d=>{c=d.xs,u=d.Os})),!r.isEqual(ee.min())){let d=t.ai.getLastRemoteSnapshotVersion(o).next(f=>t.ai.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.Ss=i,o))}function Ck(n,e,t){let r=me(),i=me();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=An();return t.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ee.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):B(tT,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{xs:s,Os:i}})}function c8(n,e){let t=z(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ko),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Tl(n,e){let t=z(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ai.getTargetData(r,e).next(o=>o?(i=o,M.resolve(i)):t.ai.allocateTargetId(r).next(s=>(i=new Dl(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.ai.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ss.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(r.targetId,r),t.Ds.set(e,r.targetId)),r})}function Il(n,e,t){return N(this,null,function*(){let r=z(n),i=r.Ss.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Qo(s))throw s;B(tT,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(i.target)})}function m_(n,e,t){let r=z(n),i=ee.min(),o=me();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,d){let f=z(c),g=f.Ds.get(d);return g!==void 0?M.resolve(f.Ss.get(g)):f.ai.getTargetData(u,d)}(r,s,dn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.bs.getDocumentsMatchingQuery(s,e,t?i:ee.min(),t?o:me())).next(a=>(Sk(r,VP(e),a),{documents:a,Ns:o})))}function Tk(n,e){let t=z(n),r=z(t.ai),i=t.Ss.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.Rt(o,e).next(s=>s?s.target:null))}function Ik(n,e){let t=z(n),r=t.vs.get(e)||ee.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Cs.getAllFromCollectionGroup(i,e,aP(r,dl),Number.MAX_SAFE_INTEGER)).then(i=>(Sk(t,e,i),i))}function Sk(n,e,t){let r=n.vs.get(e)||ee.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.vs.set(e,r)}function l8(n,e,t,r){return N(this,null,function*(){let i=z(n),o=me(),s=An();for(let u of t){let d=e.Bs(u.metadata.name);u.document&&(o=o.add(d));let f=e.Ls(u);f.setReadTime(e.ks(u.metadata.readTime)),s=s.insert(d,f)}let a=i.Cs.newChangeBuffer({trackRemovals:!0}),c=yield Tl(i,function(d){return dn(Pl(Ae.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>Ck(u,a,s).next(d=>(a.apply(u),d)).next(d=>i.ai.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.ai.addMatchingKeys(u,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,d.xs,d.Os)).next(()=>d.xs)))})}function u8(r,i){return N(this,arguments,function*(n,e,t=me()){let o=yield Tl(n,dn(JC(e.bundledQuery))),s=z(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=mt(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.ci.saveNamedQuery(a,e);let u=o.withResumeToken(_t.EMPTY_BYTE_STRING,c);return s.Ss=s.Ss.insert(u.targetId,u),s.ai.updateTargetData(a,u).next(()=>s.ai.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.ai.addMatchingKeys(a,t,o.targetId)).next(()=>s.ci.saveNamedQuery(a,e))})})}var Ak="firestore_clients";function VO(n,e){return`${Ak}_${n}_${e}`}var Mk="firestore_mutations";function BO(n,e,t){let r=`${Mk}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}var Nk="firestore_targets";function Ab(n,e){return`${Nk}_${n}_${e}`}var ii="SharedClientState",__=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static qs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new L(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(pt(ii,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Qs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},gh=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static qs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new L(r.error.code,r.error.message))),o?new n(e,r.state,i):(pt(ii,`Failed to parse target state for ID '${e}': ${t}`),null)}Qs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},y_=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static qs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=QC();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=dP(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(pt(ii,`Failed to parse client data for instance '${e}': ${t}`),null)}},WD=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static qs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(pt(ii,`Failed to parse online state: ${e}`),null)}},Fh=class{constructor(){this.activeTargetIds=QC()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},mh=class{constructor(e,t,r,i,o){this.window=e,this.bi=t,this.persistenceKey=r,this.Ks=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ws=this.Gs.bind(this),this.zs=new Je(ae),this.started=!1,this.js=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Hs=VO(this.persistenceKey,this.Ks),this.Js=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.zs=this.zs.insert(this.Ks,new Fh),this.Ys=new RegExp(`^${Ak}_${s}_([^_]*)$`),this.Zs=new RegExp(`^${Mk}_${s}_(\\d+)(?:_(.*))?$`),this.Xs=new RegExp(`^${Nk}_${s}_(\\d+)$`),this.eo=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.no=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Ws)}static C(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.us();for(let r of e){if(r===this.Ks)continue;let i=this.getItem(VO(this.persistenceKey,r));if(i){let o=y_.qs(r,i);o&&(this.zs=this.zs.insert(o.clientId,o))}}this.ro();let t=this.storage.getItem(this.eo);if(t){let r=this.io(t);r&&this.so(r)}for(let r of this.js)this.Gs(r);this.js=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Js,JSON.stringify(e))}getAllActiveQueryTargets(){return this.oo(this.zs)}isActiveQueryTarget(e){let t=!1;return this.zs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this._o(e,"pending")}updateMutationState(e,t,r){this._o(e,t,r),this.ao(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Ab(this.persistenceKey,e));if(i){let o=gh.qs(e,i);o&&(r=o.state)}}return t&&this.uo.$s(e),this.ro(),r}removeLocalQueryTarget(e){this.uo.Us(e),this.ro()}isLocalQueryTarget(e){return this.uo.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ab(this.persistenceKey,e))}updateQueryState(e,t,r){this.co(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.ao(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.lo(e)}notifyBundleLoaded(e){this.ho(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ws),this.removeItem(this.Hs),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return B(ii,"READ",e,t),t}setItem(e,t){B(ii,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){B(ii,"REMOVE",e),this.storage.removeItem(e)}Gs(e){let t=e;if(t.storageArea===this.storage){if(B(ii,"EVENT",t.key,t.newValue),t.key===this.Hs)return void pt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.bi.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Ys.test(t.key)){if(t.newValue==null){let r=this.Po(t.key);return this.To(r,null)}{let r=this.Io(t.key,t.newValue);if(r)return this.To(r.clientId,r)}}else if(this.Zs.test(t.key)){if(t.newValue!==null){let r=this.Eo(t.key,t.newValue);if(r)return this.Ao(r)}}else if(this.Xs.test(t.key)){if(t.newValue!==null){let r=this.Ro(t.key,t.newValue);if(r)return this.Vo(r)}}else if(t.key===this.eo){if(t.newValue!==null){let r=this.io(t.newValue);if(r)return this.so(r)}}else if(t.key===this.Js){let r=function(o){let s=Hn.le;if(o!=null)try{let a=JSON.parse(o);X(typeof a=="number",30636,{mo:o}),s=a}catch(a){pt(ii,"Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==Hn.le&&this.sequenceNumberHandler(r)}else if(t.key===this.no){let r=this.fo(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.po(i)))}}}else this.js.push(t)}))}}get uo(){return this.zs.get(this.Ks)}ro(){this.setItem(this.Hs,this.uo.Qs())}_o(e,t,r){let i=new __(this.currentUser,e,t,r),o=BO(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Qs())}ao(e){let t=BO(this.persistenceKey,this.currentUser,e);this.removeItem(t)}lo(e){let t={clientId:this.Ks,onlineState:e};this.storage.setItem(this.eo,JSON.stringify(t))}co(e,t,r){let i=Ab(this.persistenceKey,e),o=new gh(e,t,r);this.setItem(i,o.Qs())}ho(e){let t=JSON.stringify(Array.from(e));this.setItem(this.no,t)}Po(e){let t=this.Ys.exec(e);return t?t[1]:null}Io(e,t){let r=this.Po(e);return y_.qs(r,t)}Eo(e,t){let r=this.Zs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return __.qs(new Ct(o),i,t)}Ro(e,t){let r=this.Xs.exec(e),i=Number(r[1]);return gh.qs(i,t)}io(e){return WD.qs(e)}fo(e){return JSON.parse(e)}Ao(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.yo(e.batchId,e.state,e.error);B(ii,`Ignoring mutation for non-active user ${e.user.uid}`)})}Vo(e){return this.syncEngine.wo(e.targetId,e.state,e.error)}To(e,t){let r=t?this.zs.insert(e,t):this.zs.remove(e),i=this.oo(this.zs),o=this.oo(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.bo(s,a).then(()=>{this.zs=r})}so(e){this.zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}oo(e){let t=QC();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},v_=class{constructor(){this.So=new Fh,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,r){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new Fh,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var KD=class{vo(e){}shutdown(){}};var jO="ConnectivityMonitor",w_=class{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){B(jO,"Network connectivity changed: AVAILABLE");for(let e of this.Oo)e(0)}xo(){B(jO,"Network connectivity changed: UNAVAILABLE");for(let e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Am=null;function QD(){return Am===null?Am=function(){return 268435456+Math.round(2147483648*Math.random())}():Am++,"0x"+Am.toString(16)}var Mb="RestConnection",d8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},YD=class{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${r}/databases/${i}`,this.qo=this.databaseId.database===Wb?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Qo(e,t,r,i,o){let s=QD(),a=this.$o(e,t.toUriEncodedString());B(Mb,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(c,i,o);let{host:u}=new URL(a),d=iv(u);return this.Ko(e,a,c,r,d).then(f=>(B(Mb,`Received RPC '${e}' ${s}: `,f),f),f=>{throw Dr(Mb,`RPC '${e}' ${s} failed with error: `,f,"url: ",a,"request:",r),f})}Wo(e,t,r,i,o,s){return this.Qo(e,t,r,i,o)}Uo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ol}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}$o(e,t){let r=d8[e];return`${this.Lo}/v1/${t}:${r}`}terminate(){}};var ZD=class{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}};var en="WebChannelConnection",JD=class extends YD{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,r,i,o){let s=QD();return new Promise((a,c)=>{let u=new vb;u.setWithCredentials(!0),u.listenOnce(wb.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ih.NO_ERROR:let f=u.getResponseJson();B(en,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),a(f);break;case ih.TIMEOUT:B(en,`RPC '${e}' ${s} timed out`),c(new L(x.DEADLINE_EXCEEDED,"Request time out"));break;case ih.HTTP_ERROR:let g=u.getStatus();if(B(en,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let b=function(F){let $=F.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf($)>=0?$:x.UNKNOWN}(v.status);c(new L(b,v.message))}else c(new L(x.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new L(x.UNAVAILABLE,"Connection failed."));break;default:J(9055,{s_:e,streamId:s,o_:u.getLastErrorCode(),__:u.getLastError()})}}finally{B(en,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);B(en,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",d,r,15)})}a_(e,t,r){let i=QD(),o=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Db(),a=bb(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Uo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=o.join("");B(en,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=s.createWebChannel(d,c),g=!1,m=!1,v=new ZD({Go:T=>{m?B(en,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(g||(B(en,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),B(en,`RPC '${e}' stream ${i} sending:`,T),f.send(T))},zo:()=>f.close()}),b=(T,F,$)=>{T.listen(F,P=>{try{$(P)}catch(U){setTimeout(()=>{throw U},0)}})};return b(f,Kc.EventType.OPEN,()=>{m||(B(en,`RPC '${e}' stream ${i} transport opened.`),v.t_())}),b(f,Kc.EventType.CLOSE,()=>{m||(m=!0,B(en,`RPC '${e}' stream ${i} transport closed`),v.r_())}),b(f,Kc.EventType.ERROR,T=>{m||(m=!0,Dr(en,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),v.r_(new L(x.UNAVAILABLE,"The operation could not be completed")))}),b(f,Kc.EventType.MESSAGE,T=>{var F;if(!m){let $=T.data[0];X(!!$,16349);let P=$,U=P?.error||((F=P[0])===null||F===void 0?void 0:F.error);if(U){B(en,`RPC '${e}' stream ${i} received error:`,U);let W=U.status,K=function(E){let C=bt[E];if(C!==void 0)return JP(C)}(W),D=U.message;K===void 0&&(K=x.INTERNAL,D="Unknown error status: "+W+" with message "+U.message),m=!0,v.r_(new L(K,D)),f.close()}else B(en,`RPC '${e}' stream ${i} received:`,$),v.i_($)}}),b(a,Eb.STAT_EVENT,T=>{T.stat===Dm.PROXY?B(en,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===Dm.NOPROXY&&B(en,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.n_()},0),v}};function Rk(){return typeof window<"u"?window:null}function km(){return typeof document<"u"?document:null}function Wh(n){return new hD(n,!0)}var Lh=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.bi=e,this.timerId=t,this.u_=r,this.c_=i,this.l_=o,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();let t=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),i=Math.max(0,t-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}};var HO="PersistentStream",E_=class{constructor(e,t,r,i,o,s,a,c){this.bi=e,this.R_=r,this.V_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new Lh(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}stop(){return N(this,null,function*(){this.w_()&&(yield this.close(0))})}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}C_(){return N(this,null,function*(){if(this.b_())return this.close(0)})}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}close(e,t){return N(this,null,function*(){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(pt(t.toString()),pt("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Zo(t)})}O_(){}auth(){this.state=1;let e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.m_===t&&this.B_(r,i)},r=>{e(()=>{let i=new L(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(i)})})}B_(e,t){let r=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(i=>{r(()=>this.L_(i))}),this.stream.onMessage(i=>{r(()=>++this.p_==1?this.q_(i):this.onNext(i))})}S_(){this.state=5,this.y_.E_(()=>N(this,null,function*(){this.state=0,this.start()}))}L_(e){return B(HO,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(B(HO,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},XD=class extends E_{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();let t=K5(this.serializer,e),r=function(o){if(!("targetChange"in o))return ee.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ee.min():s.readTime?mt(s.readTime):ee.min()}(e);return this.listener.Q_(t,r)}U_(e){let t={};t.database=gD(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=Zm(c)?{documents:ok(o,c)}:{query:sk(o,c).gt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=XP(o,s.resumeToken);let u=fD(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(ee.min())>0){a.readTime=bl(o,s.snapshotVersion.toTimestamp());let u=fD(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=Y5(this.serializer,e);r&&(t.labels=r),this.F_(t)}K_(e){let t={};t.database=gD(this.serializer),t.removeTarget=e,this.F_(t)}},eC=class extends E_{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return X(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,X(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){X(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();let t=Q5(e.writeResults,e.commitTime),r=mt(e.commitTime);return this.listener.j_(r,t)}H_(){let e={};e.database=gD(this.serializer),this.F_(e)}G_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>xh(this.serializer,r))};this.F_(t)}};var tC=class{},nC=class extends tC{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new L(x.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Qo(e,pD(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(x.UNKNOWN,o.toString())})}Wo(e,t,r,i,o){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Wo(e,pD(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(x.UNKNOWN,s.toString())})}terminate(){this.J_=!0,this.connection.terminate()}},rC=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(pt(t),this.ea=!1):B("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}};var ga="RemoteStore",iC=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=o,this.ca.vo(s=>{r.enqueueAndForget(()=>N(this,null,function*(){Zo(this)&&(B(ga,"Restarting streams for network reachability change."),yield function(c){return N(this,null,function*(){let u=z(c);u.aa.add(4),yield kl(u),u.la.set("Unknown"),u.aa.delete(4),yield Kh(u)})}(this))}))}),this.la=new rC(r,i)}};function Kh(n){return N(this,null,function*(){if(Zo(n))for(let e of n.ua)yield e(!0)})}function kl(n){return N(this,null,function*(){for(let e of n.ua)yield e(!1)})}function q_(n,e){let t=z(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),iT(t)?rT(t):Ll(t).b_()&&nT(t,e))}function Sl(n,e){let t=z(n),r=Ll(t);t._a.delete(e),r.b_()&&xk(t,e),t._a.size===0&&(r.b_()?r.v_():Zo(t)&&t.la.set("Unknown"))}function nT(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ll(n).U_(e)}function xk(n,e){n.ha.Ke(e),Ll(n).K_(e)}function rT(n){n.ha=new dD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Ll(n).start(),n.la.ta()}function iT(n){return Zo(n)&&!Ll(n).w_()&&n._a.size>0}function Zo(n){return z(n).aa.size===0}function Ok(n){n.ha=void 0}function h8(n){return N(this,null,function*(){n.la.set("Online")})}function f8(n){return N(this,null,function*(){n._a.forEach((e,t)=>{nT(n,e)})})}function p8(n,e){return N(this,null,function*(){Ok(n),iT(n)?(n.la.ia(e),rT(n)):n.la.set("Unknown")})}function g8(n,e,t){return N(this,null,function*(){if(n.la.set("Online"),e instanceof t_&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i._a.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i._a.delete(a),i.ha.removeTarget(a))})}(n,e)}catch(r){B(ga,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield b_(n,r)}else if(e instanceof ll?n.ha.Xe(e):e instanceof e_?n.ha.ot(e):n.ha.nt(e),!t.isEqual(ee.min()))try{let r=yield Dk(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.ha.It(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=o._a.get(u);d&&o._a.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let d=o._a.get(c);if(!d)return;o._a.set(c,d.withResumeToken(_t.EMPTY_BYTE_STRING,d.snapshotVersion)),xk(o,c);let f=new Dl(d.target,c,u,d.sequenceNumber);nT(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){B(ga,"Failed to raise snapshot:",r),yield b_(n,r)}})}function b_(n,e,t){return N(this,null,function*(){if(!Qo(e))throw e;n.aa.add(1),yield kl(n),n.la.set("Offline"),t||(t=()=>Dk(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(null,null,function*(){B(ga,"Retrying IndexedDB access"),yield t(),n.aa.delete(1),yield Kh(n)}))})}function Pk(n,e){return e().catch(t=>b_(n,t,e))}function Fl(n){return N(this,null,function*(){let e=z(n),t=qo(e),r=e.oa.length>0?e.oa[e.oa.length-1].batchId:ko;for(;m8(e);)try{let i=yield c8(e.localStore,r);if(i===null){e.oa.length===0&&t.v_();break}r=i.batchId,_8(e,i)}catch(i){yield b_(e,i)}kk(e)&&Fk(e)})}function m8(n){return Zo(n)&&n.oa.length<10}function _8(n,e){n.oa.push(e);let t=qo(n);t.b_()&&t.W_&&t.G_(e.mutations)}function kk(n){return Zo(n)&&!qo(n).w_()&&n.oa.length>0}function Fk(n){qo(n).start()}function y8(n){return N(this,null,function*(){qo(n).H_()})}function v8(n){return N(this,null,function*(){let e=qo(n);for(let t of n.oa)e.G_(t.mutations)})}function w8(n,e,t){return N(this,null,function*(){let r=n.oa.shift(),i=cD.from(r,e,t);yield Pk(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Fl(n)})}function E8(n,e){return N(this,null,function*(){e&&qo(n).W_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return ZP(s)&&s!==x.ABORTED}(i.code)){let o=r.oa.shift();qo(r).D_(),yield Pk(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Fl(r)}})}(n,e)),kk(n)&&Fk(n)})}function UO(n,e){return N(this,null,function*(){let t=z(n);t.asyncQueue.verifyOperationInProgress(),B(ga,"RemoteStore received new credentials");let r=Zo(t);t.aa.add(3),yield kl(t),r&&t.la.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),yield Kh(t)})}function oC(n,e){return N(this,null,function*(){let t=z(n);e?(t.aa.delete(2),yield Kh(t)):e||(t.aa.add(2),yield kl(t),t.la.set("Unknown"))})}function Ll(n){return n.Pa||(n.Pa=function(t,r,i){let o=z(t);return o.Y_(),new XD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{jo:h8.bind(null,n),Jo:f8.bind(null,n),Zo:p8.bind(null,n),Q_:g8.bind(null,n)}),n.ua.push(e=>N(null,null,function*(){e?(n.Pa.D_(),iT(n)?rT(n):n.la.set("Unknown")):(yield n.Pa.stop(),Ok(n))}))),n.Pa}function qo(n){return n.Ta||(n.Ta=function(t,r,i){let o=z(t);return o.Y_(),new eC(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:y8.bind(null,n),Zo:E8.bind(null,n),z_:v8.bind(null,n),j_:w8.bind(null,n)}),n.ua.push(e=>N(null,null,function*(){e?(n.Ta.D_(),yield Fl(n)):(yield n.Ta.stop(),n.oa.length>0&&(B(ga,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))}))),n.Ta}var sC=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Rt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Vl(n,e){if(pt("AsyncQueue",`${e}: ${n}`),Qo(n))return new L(x.UNAVAILABLE,`${e}: ${n}`);throw n}var D_=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||q.comparator(t.key,r.key):(t,r)=>q.comparator(t.key,r.key),this.keyedMap=lh(),this.sortedSet=new Je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var C_=class{constructor(){this.Ia=new Je(q.comparator)}track(e){let t=e.doc.key,r=this.Ia.get(t);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(t):e.type===1&&r.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):J(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(t,e)}da(){let e=[];return this.Ia.inorderTraversal((t,r)=>{e.push(r)}),e}},Al=class n{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,D_.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var aC=class{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}},cC=class{constructor(){this.queries=$O(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,r){let i=z(t),o=i.queries;i.queries=$O(),o.forEach((s,a)=>{for(let c of a.Ra)c.onError(r)})})(this,new L(x.ABORTED,"Firestore shutting down"))}};function $O(){return new Tr(n=>LP(n),zh)}function oT(n,e){return N(this,null,function*(){let t=z(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Va()&&e.ma()&&(r=2):(o=new aC,r=e.ma()?0:1);try{switch(r){case 0:o.Aa=yield t.onListen(i,!0);break;case 1:o.Aa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Vl(s,`Initialization of query '${nl(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Ra.push(e),e.ga(t.onlineState),o.Aa&&e.pa(o.Aa)&&aT(t)})}function sT(n,e){return N(this,null,function*(){let t=z(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Ra.indexOf(e);s>=0&&(o.Ra.splice(s,1),o.Ra.length===0?i=e.ma()?0:1:!o.Va()&&e.ma()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function b8(n,e){let t=z(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Ra)a.pa(i)&&(r=!0);s.Aa=i}}r&&aT(t)}function D8(n,e,t){let r=z(n),i=r.queries.get(e);if(i)for(let o of i.Ra)o.onError(t);r.queries.delete(e)}function aT(n){n.fa.forEach(e=>{e.next()})}var lC,GO;(GO=lC||(lC={})).ya="default",GO.Cache="cache";var Vh=class{constructor(e,t,r){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Al(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;let r=t!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;let t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=Al.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==lC.Cache}};var uC=class{constructor(e,t){this.Ma=e,this.byteLength=t}xa(){return"metadata"in this.Ma}};var T_=class{constructor(e){this.serializer=e}Bs(e){return ci(this.serializer,e)}Ls(e){return e.metadata.exists?ik(this.serializer,e.document,!1):Tt.newNoDocument(this.Bs(e.metadata.name),this.ks(e.metadata.readTime))}ks(e){return mt(e)}},dC=class{constructor(e,t,r){this.Oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Lk(e)}Na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ma.namedQuery)this.queries.push(e.Ma.namedQuery);else if(e.Ma.documentMetadata){this.documents.push({metadata:e.Ma.documentMetadata}),e.Ma.documentMetadata.exists||++t;let r=Ae.fromString(e.Ma.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Ma.document&&(this.documents[this.documents.length-1].document=e.Ma.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ba(e){let t=new Map,r=new T_(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Bs(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||me()).add(o);t.set(s,a)}}return t}complete(){return N(this,null,function*(){let e=yield l8(this.localStore,new T_(this.serializer),this.documents,this.Oa.id),t=this.Ba(this.documents);for(let r of this.queries)yield u8(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,La:this.collectionGroups,ka:e}})}};function Lk(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var I_=class{constructor(e){this.key=e}},S_=class{constructor(e){this.key=e}},A_=class{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=me(),this.mutatedKeys=me(),this.Ua=BP(e),this.Ka=new D_(this.Ua)}get Wa(){return this.qa}Ga(e,t){let r=t?t.za:new C_,i=t?t.Ka:this.Ka,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),m=qh(this.query,f)?f:null,v=!!g&&this.mutatedKeys.has(g.key),b=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),T=!1;g&&m?g.data.isEqual(m.data)?v!==b&&(r.track({type:3,doc:m}),T=!0):this.ja(g,m)||(r.track({type:2,doc:m}),T=!0,(c&&this.Ua(m,c)>0||u&&this.Ua(m,u)<0)&&(a=!0)):!g&&m?(r.track({type:0,doc:m}),T=!0):g&&!m&&(r.track({type:1,doc:g}),T=!0,(c||u)&&(a=!0)),T&&(m?(s=s.add(m),o=b?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ka:s,za:r,ys:a,mutatedKeys:o}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;let s=e.za.da();s.sort((d,f)=>function(m,v){let b=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J(20277,{Vt:T})}};return b(m)-b(v)}(d.type,f.type)||this.Ua(d.doc,f.doc)),this.Ha(r),i=i!=null&&i;let a=t&&!i?this.Ja():[],c=this.$a.size===0&&this.current&&!i?1:0,u=c!==this.Qa;return this.Qa=c,s.length!==0||u?{snapshot:new Al(this.query,e.Ka,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:a}:{Ya:a}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new C_,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];let e=this.$a;this.$a=me(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});let t=[];return e.forEach(r=>{this.$a.has(r)||t.push(new S_(r))}),this.$a.forEach(r=>{e.has(r)||t.push(new I_(r))}),t}Xa(e){this.qa=e.Ns,this.$a=me();let t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Al.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}},Jo="SyncEngine",hC=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},fC=class{constructor(e){this.key=e,this.tu=!1}},pC=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.nu={},this.ru=new Tr(a=>LP(a),zh),this.iu=new Map,this.su=new Set,this.ou=new Je(q.comparator),this._u=new Map,this.au=new Ph,this.uu={},this.cu=new Map,this.lu=Cl.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}};function C8(n,e,t=!0){return N(this,null,function*(){let r=W_(n),i,o=r.ru.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.eu()):i=yield Vk(r,e,t,!0),i})}function T8(n,e){return N(this,null,function*(){let t=W_(n);yield Vk(t,e,!0,!1)})}function Vk(n,e,t,r){return N(this,null,function*(){let i=yield Tl(n.localStore,dn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield cT(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&q_(n.remoteStore,i),a})}function cT(n,e,t,r,i){return N(this,null,function*(){n.Pu=(f,g,m)=>function(b,T,F,$){return N(this,null,function*(){let P=T.view.Ga(F);P.ys&&(P=yield m_(b.localStore,T.query,!1).then(({documents:D})=>T.view.Ga(D,P)));let U=$&&$.targetChanges.get(T.targetId),W=$&&$.targetMismatches.get(T.targetId)!=null,K=T.view.applyChanges(P,b.isPrimaryClient,U,W);return gC(b,T.targetId,K.Ya),K.snapshot})}(n,f,g,m);let o=yield m_(n.localStore,e,!0),s=new A_(e,o.Ns),a=s.Ga(o.documents),c=Nh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,c);gC(n,t,u.Ya);let d=new hC(e,t,s);return n.ru.set(e,d),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),u.snapshot})}function I8(n,e,t){return N(this,null,function*(){let r=z(n),i=r.ru.get(e),o=r.iu.get(i.targetId);if(o.length>1)return r.iu.set(i.targetId,o.filter(s=>!zh(s,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Il(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Sl(r.remoteStore,i.targetId),Ml(r,i.targetId)}).catch(Ko))):(Ml(r,i.targetId),yield Il(r.localStore,i.targetId,!0))})}function S8(n,e){return N(this,null,function*(){let t=z(n),r=t.ru.get(e),i=t.iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Sl(t.remoteStore,r.targetId))})}function A8(n,e,t){return N(this,null,function*(){let r=hT(n);try{let i=yield function(s,a){let c=z(s),u=it.now(),d=a.reduce((m,v)=>m.add(v.key),me()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=An(),b=me();return c.Cs.getEntries(m,d).next(T=>{v=T,v.forEach((F,$)=>{$.isValidDocument()||(b=b.add(F))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,v)).next(T=>{f=T;let F=[];for(let $ of a){let P=H5($,f.get($.key).overlayedDocument);P!=null&&F.push(new Ir($.key,P,NP(P.value.mapValue),lt.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,F,a)}).next(T=>{g=T;let F=T.applyToLocalDocumentSet(f,b);return c.documentOverlayCache.saveOverlays(m,T.batchId,F)})}).then(()=>({batchId:g.batchId,changes:HP(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.uu[s.currentUser.toKey()];u||(u=new Je(ae)),u=u.insert(a,c),s.uu[s.currentUser.toKey()]=u}(r,i.batchId,t),yield qi(r,i.changes),yield Fl(r.remoteStore)}catch(i){let o=Vl(i,"Failed to persist write");t.reject(o)}})}function Bk(n,e){return N(this,null,function*(){let t=z(n);try{let r=yield a8(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t._u.get(o);s&&(X(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.tu=!0:i.modifiedDocuments.size>0?X(s.tu,14607):i.removedDocuments.size>0&&(X(s.tu,42227),s.tu=!1))}),yield qi(t,r,e)}catch(r){yield Ko(r)}})}function zO(n,e,t){let r=z(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.ru.forEach((o,s)=>{let a=s.view.ga(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=z(s);c.onlineState=a;let u=!1;c.queries.forEach((d,f)=>{for(let g of f.Ra)g.ga(a)&&(u=!0)}),u&&aT(c)}(r.eventManager,e),i.length&&r.nu.Q_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function M8(n,e,t){return N(this,null,function*(){let r=z(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r._u.get(e),o=i&&i.key;if(o){let s=new Je(q.comparator);s=s.insert(o,Tt.newNoDocument(o,ee.min()));let a=me().add(o),c=new Mh(ee.min(),new Map,new Je(ae),s,a);yield Bk(r,c),r.ou=r.ou.remove(o),r._u.delete(e),dT(r)}else yield Il(r.localStore,e,!1).then(()=>Ml(r,e,t)).catch(Ko)})}function N8(n,e){return N(this,null,function*(){let t=z(n),r=e.batch.batchId;try{let i=yield s8(t.localStore,e);uT(t,r,null),lT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield qi(t,i)}catch(i){yield Ko(i)}})}function R8(n,e,t){return N(this,null,function*(){let r=z(n);try{let i=yield function(s,a){let c=z(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(X(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);uT(r,e,t),lT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield qi(r,i)}catch(i){yield Ko(i)}})}function x8(n,e){return N(this,null,function*(){let t=z(n);Zo(t.remoteStore)||B(Jo,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=z(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===ko)return void e.resolve();let i=t.cu.get(r)||[];i.push(e),t.cu.set(r,i)}catch(r){let i=Vl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function lT(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function uT(n,e,t){let r=z(n),i=r.uu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.uu[r.currentUser.toKey()]=i}}function Ml(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.iu.get(e))n.ru.delete(r),t&&n.nu.Tu(r,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(r=>{n.au.containsKey(r)||jk(n,r)})}function jk(n,e){n.su.delete(e.path.canonicalString());let t=n.ou.get(e);t!==null&&(Sl(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),dT(n))}function gC(n,e,t){for(let r of t)r instanceof I_?(n.au.addReference(r.key,e),O8(n,r)):r instanceof S_?(B(Jo,"Document no longer in limbo: "+r.key),n.au.removeReference(r.key,e),n.au.containsKey(r.key)||jk(n,r.key)):J(19791,{Iu:r})}function O8(n,e){let t=e.key,r=t.path.canonicalString();n.ou.get(t)||n.su.has(r)||(B(Jo,"New document in limbo: "+t),n.su.add(r),dT(n))}function dT(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){let e=n.su.values().next().value;n.su.delete(e);let t=new q(Ae.fromString(e)),r=n.lu.next();n._u.set(r,new fC(t)),n.ou=n.ou.insert(t,r),q_(n.remoteStore,new Dl(dn(Pl(t.path)),r,"TargetPurposeLimboResolution",Hn.le))}}function qi(n,e,t){return N(this,null,function*(){let r=z(n),i=[],o=[],s=[];r.ru.isEmpty()||(r.ru.forEach((a,c)=>{s.push(r.Pu(c,e,t).then(u=>{var d;if((u||t)&&r.isPrimaryClient){let f=u?!u.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);let f=GD.Ps(c.targetId,u);o.push(f)}}))}),yield Promise.all(s),r.nu.Q_(i),yield function(c,u){return N(this,null,function*(){let d=z(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>M.forEach(u,g=>M.forEach(g.ls,m=>d.persistence.referenceDelegate.addReference(f,g.targetId,m)).next(()=>M.forEach(g.hs,m=>d.persistence.referenceDelegate.removeReference(f,g.targetId,m)))))}catch(f){if(!Qo(f))throw f;B(tT,"Failed to update sequence numbers: "+f)}for(let f of u){let g=f.targetId;if(!f.fromCache){let m=d.Ss.get(g),v=m.snapshotVersion,b=m.withLastLimboFreeSnapshotVersion(v);d.Ss=d.Ss.insert(g,b)}}})}(r.localStore,o))})}function P8(n,e){return N(this,null,function*(){let t=z(n);if(!t.currentUser.isEqual(e)){B(Jo,"User change. New user:",e.toKey());let r=yield bk(t.localStore,e);t.currentUser=e,function(o,s){o.cu.forEach(a=>{a.forEach(c=>{c.reject(new L(x.CANCELLED,s))})}),o.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield qi(t,r.Ms)}})}function k8(n,e){let t=z(n),r=t._u.get(e);if(r&&r.tu)return me().add(r.key);{let i=me(),o=t.iu.get(e);if(!o)return i;for(let s of o){let a=t.ru.get(s);i=i.unionWith(a.view.Wa)}return i}}function F8(n,e){return N(this,null,function*(){let t=z(n),r=yield m_(t.localStore,e.query,!0),i=e.view.Xa(r);return t.isPrimaryClient&&gC(t,e.targetId,i.Ya),i})}function L8(n,e){return N(this,null,function*(){let t=z(n);return Ik(t.localStore,e).then(r=>qi(t,r))})}function V8(n,e,t,r){return N(this,null,function*(){let i=z(n),o=yield function(a,c){let u=z(a),d=z(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Hn(f,c).next(g=>g?u.localDocuments.getDocuments(f,g):M.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Fl(i.remoteStore):t==="acknowledged"||t==="rejected"?(uT(i,e,r||null),lT(i,e),function(a,c){z(z(a).mutationQueue).Xn(c)}(i.localStore,e)):J(6720,"Unknown batchState",{Eu:t}),yield qi(i,o)):B(Jo,"Cannot apply mutation batch with id: "+e)})}function B8(n,e){return N(this,null,function*(){let t=z(n);if(W_(t),hT(t),e===!0&&t.hu!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield qO(t,r.toArray());t.hu=!0,yield oC(t.remoteStore,!0);for(let o of i)q_(t.remoteStore,o)}else if(e===!1&&t.hu!==!1){let r=[],i=Promise.resolve();t.iu.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Ml(t,s),Il(t.localStore,s,!0))),Sl(t.remoteStore,s)}),yield i,yield qO(t,r),function(s){let a=z(s);a._u.forEach((c,u)=>{Sl(a.remoteStore,u)}),a.au.Kr(),a._u=new Map,a.ou=new Je(q.comparator)}(t),t.hu=!1,yield oC(t.remoteStore,!1)}})}function qO(n,e,t){return N(this,null,function*(){let r=z(n),i=[],o=[];for(let s of e){let a,c=r.iu.get(s);if(c&&c.length!==0){a=yield Tl(r.localStore,dn(c[0]));for(let u of c){let d=r.ru.get(u),f=yield F8(r,d);f.snapshot&&o.push(f.snapshot)}}else{let u=yield Tk(r.localStore,s);a=yield Tl(r.localStore,u),yield cT(r,Hk(u),s,!1,a.resumeToken)}i.push(a)}return r.nu.Q_(o),i})}function Hk(n){return FP(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function j8(n){return function(t){return z(z(t).persistence).us()}(z(n).localStore)}function H8(n,e,t,r){return N(this,null,function*(){let i=z(n);if(i.hu)return void B(Jo,"Ignoring unexpected query state notification.");let o=i.iu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield Ik(i.localStore,VP(o[0])),a=Mh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",_t.EMPTY_BYTE_STRING);yield qi(i,s,a);break}case"rejected":yield Il(i.localStore,e,!0),Ml(i,e,r);break;default:J(64155,t)}})}function U8(n,e,t){return N(this,null,function*(){let r=W_(n);if(r.hu){for(let i of e){if(r.iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){B(Jo,"Adding an already active target "+i);continue}let o=yield Tk(r.localStore,i),s=yield Tl(r.localStore,o);yield cT(r,Hk(o),s.targetId,!1,s.resumeToken),q_(r.remoteStore,s)}for(let i of t)r.iu.has(i)&&(yield Il(r.localStore,i,!1).then(()=>{Sl(r.remoteStore,i),Ml(r,i)}).catch(Ko))}})}function W_(n){let e=z(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Bk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=k8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=M8.bind(null,e),e.nu.Q_=b8.bind(null,e.eventManager),e.nu.Tu=D8.bind(null,e.eventManager),e}function hT(n){let e=z(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=N8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=R8.bind(null,e),e}function $8(n,e,t){let r=z(n);(function(o,s,a){return N(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(m,v){let b=z(m),T=mt(v.createTime);return b.persistence.runTransaction("hasNewerBundle","readonly",F=>b.ci.getBundleMetadata(F,v.id)).then(F=>!!F&&F.createTime.compareTo(T)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(Lk(c));let u=new dC(c,o.localStore,s.serializer),d=yield s.du();for(;d;){let g=yield u.Na(d);g&&a._updateProgress(g),d=yield s.du()}let f=yield u.complete();return yield qi(o,f.ka,void 0),yield function(m,v){let b=z(m);return b.persistence.runTransaction("Save bundle","readwrite",T=>b.ci.saveBundleMetadata(T,v))}(o.localStore,c),a._completeWith(f.progress),Promise.resolve(f.La)}catch(c){return Dr(Jo,`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var fT=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return N(this,null,function*(){this.serializer=Wh(t.databaseInfo.databaseId),this.sharedClientState=this.Au(t),this.persistence=this.Ru(t),yield this.persistence.start(),this.localStore=this.Vu(t),this.gcScheduler=this.mu(t,this.localStore),this.indexBackfillerScheduler=this.fu(t,this.localStore)})}mu(t,r){return null}fu(t,r){return null}Vu(t){return Ek(this.persistence,new g_,t.initialUser,this.serializer)}Ru(t){return new kh(f_.Ei,this.serializer)}Au(t){return new v_}terminate(){return N(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),mC=class extends fT{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){X(this.persistence.referenceDelegate instanceof p_,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new u_(r,e.asyncQueue,t)}Ru(e){let t=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new kh(r=>p_.Ei(r,t),this.serializer)}},M_=class n extends fT{constructor(e,t,r){super(),this.gu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield ev(n.prototype,this,"initialize").call(this,e),yield this.gu.initialize(this,e),yield hT(this.gu.syncEngine),yield Fl(this.gu.remoteStore),yield this.persistence.Ki(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}Vu(e){return Ek(this.persistence,new g_,e.initialUser,this.serializer)}mu(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new u_(r,e.asyncQueue,t)}fu(e,t){let r=new Ub(t,this.persistence);return new Hb(e.asyncQueue,r)}Ru(e){let t=eT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new $D(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Rk(),km(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Au(e){return new v_}},_C=class n extends M_{constructor(e,t){super(e,t,!1),this.gu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield ev(n.prototype,this,"initialize").call(this,e);let t=this.gu.syncEngine;this.sharedClientState instanceof mh&&(this.sharedClientState.syncEngine={yo:V8.bind(null,t),wo:H8.bind(null,t),bo:U8.bind(null,t),us:j8.bind(null,t),po:L8.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.Ki(r=>N(this,null,function*(){yield B8(this.gu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Au(e){let t=Rk();if(!mh.C(t))throw new L(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=eT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new mh(t,e.asyncQueue,r,e.clientId,e.initialUser)}},pT=(()=>{class n{initialize(t,r){return N(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>zO(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=P8.bind(null,this.syncEngine),yield oC(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new cC}()}createDatastore(t){let r=Wh(t.databaseInfo.databaseId),i=function(s){return new JD(s)}(t.databaseInfo);return function(s,a,c,u){return new nC(s,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new iC(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>zO(this.syncEngine,r,0),function(){return w_.C()?new w_:new KD}())}createSyncEngine(t,r){return function(o,s,a,c,u,d,f){let g=new pC(o,s,a,c,u,d);return f&&(g.hu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return N(this,null,function*(){var t,r;yield function(o){return N(this,null,function*(){let s=z(o);B(ga,"RemoteStore shutting down."),s.aa.add(5),yield kl(s),s.ca.shutdown(),s.la.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function WO(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Nl=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):pt("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var yC=class{constructor(e,t){this.wu=e,this.serializer=t,this.metadata=new Rt,this.buffer=new Uint8Array,this.bu=function(){return new TextDecoder("utf-8")}(),this.Su().then(r=>{r&&r.xa()?this.metadata.resolve(r.Ma.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.Ma)}`))},r=>this.metadata.reject(r))}close(){return this.wu.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}du(){return N(this,null,function*(){return yield this.getMetadata(),this.Su()})}Su(){return N(this,null,function*(){let e=yield this.Du();if(e===null)return null;let t=this.bu.decode(e),r=Number(t);isNaN(r)&&this.vu(`length string (${t}) is not valid number`);let i=yield this.Cu(r);return new uC(JSON.parse(i),e.length+r)})}Fu(){return this.buffer.findIndex(e=>e===123)}Du(){return N(this,null,function*(){for(;this.Fu()<0&&!(yield this.Mu()););if(this.buffer.length===0)return null;let e=this.Fu();e<0&&this.vu("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}Cu(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.Mu())&&this.vu("Reached the end of bundle when more is expected.");let t=this.bu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}vu(e){throw this.wu.cancel(),new Error(`Invalid bundle format: ${e}`)}Mu(){return N(this,null,function*(){let e=yield this.wu.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var vC=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new L(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return N(this,null,function*(){let s=z(i),a={documents:o.map(f=>Rh(s.serializer,f))},c=yield s.Wo("BatchGetDocuments",s.serializer.databaseId,Ae.emptyPath(),a,o.length),u=new Map;c.forEach(f=>{let g=W5(s.serializer,f);u.set(g.key.toString(),g)});let d=[];return o.forEach(f=>{let g=u.get(f.toString());X(!!g,55234,{key:f}),d.push(g)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new zo(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=q.fromPath(r);this.mutations.push(new Ih(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=z(r),s={writes:i.map(a=>xh(o.serializer,a))};yield o.Qo("Commit",o.serializer.databaseId,Ae.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw J(50498,{xu:e.constructor.name});t=ee.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new L(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ee.min())?lt.exists(!1):lt.updateTime(t):lt.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ee.min()))throw new L(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return lt.updateTime(t)}return lt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var wC=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Ou=r.maxAttempts,this.y_=new Lh(this.asyncQueue,"transaction_retry")}Nu(){this.Ou-=1,this.Bu()}Bu(){this.y_.E_(()=>N(this,null,function*(){let e=new vC(this.datastore),t=this.Lu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.ku(i)}))}).catch(r=>{this.ku(r)})}))}Lu(e){try{let t=this.updateFunction(e);return!Uh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ku(e){this.Ou>0&&this.qu(e)?(this.Ou-=1,this.asyncQueue.enqueueAndForget(()=>(this.Bu(),Promise.resolve()))):this.deferred.reject(e)}qu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!ZP(t)}return!1}};var Wo="FirestoreClient",EC=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ct.UNAUTHENTICATED,this.clientId=Vm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>N(this,null,function*(){B(Wo,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(B(Wo,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Rt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Vl(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Nb(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),B(Wo,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(null,null,function*(){r.isEqual(i)||(yield bk(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function KO(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield gT(n);B(Wo,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>UO(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>UO(e.remoteStore,i)),n._onlineComponents=e})}function gT(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){B(Wo,"Using user provided OfflineComponentProvider");try{yield Nb(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Dr("Error using user provided cache. Falling back to memory cache: "+t),yield Nb(n,new fT)}}else B(Wo,"Using default OfflineComponentProvider"),yield Nb(n,new mC(void 0));return n._offlineComponents})}function K_(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(B(Wo,"Using user provided OnlineComponentProvider"),yield KO(n,n._uninitializedComponentsProvider._online)):(B(Wo,"Using default OnlineComponentProvider"),yield KO(n,new pT))),n._onlineComponents})}function Uk(n){return gT(n).then(e=>e.persistence)}function mT(n){return gT(n).then(e=>e.localStore)}function $k(n){return K_(n).then(e=>e.remoteStore)}function _T(n){return K_(n).then(e=>e.syncEngine)}function G8(n){return K_(n).then(e=>e.datastore)}function Rl(n){return N(this,null,function*(){let e=yield K_(n),t=e.eventManager;return t.onListen=C8.bind(null,e.syncEngine),t.onUnlisten=I8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=T8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=S8.bind(null,e.syncEngine),t})}function z8(n){return n.asyncQueue.enqueue(()=>N(null,null,function*(){let e=yield Uk(n),t=yield $k(n);return e.setNetworkEnabled(!0),function(i){let o=z(i);return o.aa.delete(0),Kh(o)}(t)}))}function q8(n){return n.asyncQueue.enqueue(()=>N(null,null,function*(){let e=yield Uk(n),t=yield $k(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=z(i);o.aa.add(0),yield kl(o),o.la.set("Offline")})}(t)}))}function W8(n,e){let t=new Rt;return n.asyncQueue.enqueueAndForget(()=>N(null,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(u,d){let f=z(u);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new L(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Vl(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield mT(n),e,t)})),t.promise}function Gk(n,e,t={}){let r=new Rt;return n.asyncQueue.enqueueAndForget(()=>N(null,null,function*(){return function(o,s,a,c,u){let d=new Nl({next:g=>{d.yu(),s.enqueueAndForget(()=>sT(o,f));let m=g.docs.has(a);!m&&g.fromCache?u.reject(new L(x.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&c&&c.source==="server"?u.reject(new L(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),f=new Vh(Pl(a.path),d,{includeMetadataChanges:!0,Fa:!0});return oT(o,f)}(yield Rl(n),n.asyncQueue,e,t,r)})),r.promise}function K8(n,e){let t=new Rt;return n.asyncQueue.enqueueAndForget(()=>N(null,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield m_(i,o,!0),c=new A_(o,a.Ns),u=c.Ga(a.documents),d=c.applyChanges(u,!1);s.resolve(d.snapshot)}catch(a){let c=Vl(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield mT(n),e,t)})),t.promise}function zk(n,e,t={}){let r=new Rt;return n.asyncQueue.enqueueAndForget(()=>N(null,null,function*(){return function(o,s,a,c,u){let d=new Nl({next:g=>{d.yu(),s.enqueueAndForget(()=>sT(o,f)),g.fromCache&&c.source==="server"?u.reject(new L(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),f=new Vh(a,d,{includeMetadataChanges:!0,Fa:!0});return oT(o,f)}(yield Rl(n),n.asyncQueue,e,t,r)})),r.promise}function Q8(n,e){let t=new Nl(e);return n.asyncQueue.enqueueAndForget(()=>N(null,null,function*(){return function(i,o){z(i).fa.add(o),o.next()}(yield Rl(n),t)})),()=>{t.yu(),n.asyncQueue.enqueueAndForget(()=>N(null,null,function*(){return function(i,o){z(i).fa.delete(o)}(yield Rl(n),t)}))}}function Y8(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?VC().encode(s):s,function(d,f){return new yC(d,f)}(function(d,f){if(d instanceof Uint8Array)return WO(d,f);if(d instanceof ArrayBuffer)return WO(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,Wh(e));n.asyncQueue.enqueueAndForget(()=>N(null,null,function*(){$8(yield _T(n),i,r)}))}function Z8(n,e){return n.asyncQueue.enqueue(()=>N(null,null,function*(){return function(r,i){let o=z(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.ci.getNamedQuery(s,i))}(yield mT(n),e)}))}function qk(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var QO=new Map;function yT(n,e,t){if(!t)throw new L(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function vT(n,e,t,r){if(e===!0&&r===!0)throw new L(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function YO(n){if(!q.isDocumentKey(n))throw new L(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ZO(n){if(q.isDocumentKey(n))throw new L(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Q_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":J(12329,{type:typeof n})}function Me(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new L(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Q_(n);throw new L(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Wk(n,e){if(e<=0)throw new L(x.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Kk="firestore.googleapis.com",JO=!0,N_=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Kk,this.ssl=JO}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:JO;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=pk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<i8)throw new L(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qk((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new L(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new L(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new L(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ma=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new N_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new N_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Rb;switch(r.type){case"firstParty":return new kb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return N(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=QO.get(t);r&&(B("ComponentProvider","Removing Datastore"),QO.delete(t),r.terminate())}(this),Promise.resolve()}};function Qk(n,e,t,r={}){var i;n=Me(n,ma);let o=iv(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&MI(`https://${c}`),s.host!==Kk&&s.host!==c&&Dr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!Af(u,a)&&(n._setSettings(u),r.mockUserToken)){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=Ct.MOCK_USER;else{d=II(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new L(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ct(g)}n._authCredentials=new xb(new Fm(d,f))}}var $t=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Qe=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new li(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},li=class n extends $t{constructor(e,t,r){super(e,t,Pl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Qe(this.firestore,null,new q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function wT(n,e,...t){if(n=rt(n),yT("collection","path",e),n instanceof ma){let r=Ae.fromString(e,...t);return ZO(r),new li(n,null,r)}{if(!(n instanceof Qe||n instanceof li))throw new L(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ae.fromString(e,...t));return ZO(r),new li(n.firestore,null,r)}}function Yk(n,e){if(n=Me(n,ma),yT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new L(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $t(n,null,function(r){return new Cr(Ae.emptyPath(),r)}(e))}function Qh(n,e,...t){if(n=rt(n),arguments.length===1&&(e=Vm.newId()),yT("doc","path",e),n instanceof ma){let r=Ae.fromString(e,...t);return YO(r),new Qe(n,null,new q(r))}{if(!(n instanceof Qe||n instanceof li))throw new L(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ae.fromString(e,...t));return YO(r),new Qe(n.firestore,n instanceof li?n.converter:null,new q(r))}}function ET(n,e){return n=rt(n),e=rt(e),(n instanceof Qe||n instanceof li)&&(e instanceof Qe||e instanceof li)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function bT(n,e){return n=rt(n),e=rt(e),n instanceof $t&&e instanceof $t&&n.firestore===e.firestore&&zh(n._query,e._query)&&n.converter===e.converter}var XO="AsyncQueue",R_=class{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new Lh(this,"async_queue_retry"),this.ju=()=>{let r=km();r&&B(XO,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;let t=km();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;let t=km();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});let t=new Rt;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}Zu(){return N(this,null,function*(){if(this.Qu.length!==0){try{yield this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!Qo(e))throw e;B(XO,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}})}Yu(e){let t=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,pt("INTERNAL UNHANDLED ERROR: ",eP(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=t,t}enqueueAfterDelay(e,t,r){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);let i=sC.createAndSchedule(this,e,t,r,o=>this.Xu(o));return this.Uu.push(i),i}Ju(){this.Ku&&J(47125,{ec:eP(this.Ku)})}verifyOperationInProgress(){}tc(){return N(this,null,function*(){let e;do e=this.Hu,yield e;while(e!==this.Hu)})}nc(e){for(let t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){let t=this.Uu.indexOf(e);this.Uu.splice(t,1)}};function eP(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function bC(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var DC=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var Zk=-1,ot=class extends ma{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new R_,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return N(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new R_(e),this._firestoreClient=void 0,yield e}})}};function Gt(n){if(n._terminated)throw new L(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Jk(n),n._firestoreClient}function Jk(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,u,d){return new qb(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,qk(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new EC(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function Xk(n,e){Dr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return tF(n,pT.provider,{build:r=>new M_(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function eF(n){return N(this,null,function*(){Dr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();tF(n,pT.provider,{build:t=>new _C(t,e.cacheSizeBytes)})})}function tF(n,e,t){if((n=Me(n,ot))._firestoreClient||n._terminated)throw new L(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new L(x.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},Jk(n)}function nF(n){if(n._initialized&&!n._terminated)throw new L(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Rt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(null,null,function*(){try{yield function(r){return N(this,null,function*(){if(!Vo.C())return Promise.resolve();let i=r+wk;yield Vo.delete(i)})}(eT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function rF(n){return function(t){let r=new Rt;return t.asyncQueue.enqueueAndForget(()=>N(null,null,function*(){return x8(yield _T(t),r)})),r.promise}(Gt(n=Me(n,ot)))}function iF(n){return z8(Gt(n=Me(n,ot)))}function oF(n){return q8(Gt(n=Me(n,ot)))}function sF(n,e){let t=Gt(n=Me(n,ot)),r=new DC;return Y8(t,n._databaseId,e,r),r}function aF(n,e){return Z8(Gt(n=Me(n,ot)),e).then(t=>t?new $t(n,null,t.query):null)}var hi=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(_t.fromBase64String(e))}catch(t){throw new L(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(_t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Sr=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new L(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Gi=class{constructor(e){this._methodName=e}};var _a=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new L(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new L(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}};var Bh=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var J8=/^__.*__$/,CC=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ir(e,this.data,this.fieldMask,t,this.fieldTransforms):new Go(e,this.data,t,this.fieldTransforms)}},x_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ir(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function cF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J(40011,{oc:n})}}var O_=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this._c(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i.lc(e),i}hc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i._c(),i}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return P_(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(cF(this.oc)&&J8.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}},TC=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Wh(e)}dc(e,t,r,i=!1){return new O_({oc:e,methodName:t,Ec:r,path:gt.emptyPath(),cc:!1,Ic:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function wa(n){let e=n._freezeSettings(),t=Wh(n._databaseId);return new TC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Y_(n,e,t,r,i,o={}){let s=n.dc(o.merge||o.mergeFields?2:0,e,t,i);TT("Data must be an object, but it was:",s,r);let a=dF(r,s),c,u;if(o.merge)c=new Un(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let g=NC(e,f,t);if(!s.contains(g))throw new L(x.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);fF(d,g)||d.push(g)}c=new Un(d),u=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=s.fieldTransforms;return new CC(new tn(a),c,u)}var jh=class n extends Gi{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function lF(n,e,t){return new O_({oc:3,Ec:e.settings.Ec,methodName:n._methodName,cc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var IC=class n extends Gi{_toFieldTransform(e){return new ha(e.path,new Uo)}isEqual(e){return e instanceof n}},SC=class n extends Gi{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){let t=lF(this,e,!0),r=this.Ac.map(o=>Ea(o,t)),i=new Ui(r);return new ha(e.path,i)}isEqual(e){return e instanceof n&&Af(this.Ac,e.Ac)}},AC=class n extends Gi{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){let t=lF(this,e,!0),r=this.Ac.map(o=>Ea(o,t)),i=new $i(r);return new ha(e.path,i)}isEqual(e){return e instanceof n&&Af(this.Ac,e.Ac)}},MC=class n extends Gi{constructor(e,t){super(e),this.Rc=t}_toFieldTransform(e){let t=new $o(e.serializer,GP(e.serializer,this.Rc));return new ha(e.path,t)}isEqual(e){return e instanceof n&&this.Rc===e.Rc}};function DT(n,e,t,r){let i=n.dc(1,e,t);TT("Data must be an object, but it was:",i,r);let o=[],s=tn.empty();Yo(r,(c,u)=>{let d=IT(e,c,t);u=rt(u);let f=i.hc(d);if(u instanceof jh)o.push(d);else{let g=Ea(u,f);g!=null&&(o.push(d),s.set(d,g))}});let a=new Un(o);return new x_(s,a,i.fieldTransforms)}function CT(n,e,t,r,i,o){let s=n.dc(1,e,t),a=[NC(e,r,t)],c=[i];if(o.length%2!=0)throw new L(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(NC(e,o[g])),c.push(o[g+1]);let u=[],d=tn.empty();for(let g=a.length-1;g>=0;--g)if(!fF(u,a[g])){let m=a[g],v=c[g];v=rt(v);let b=s.hc(m);if(v instanceof jh)u.push(m);else{let T=Ea(v,b);T!=null&&(u.push(m),d.set(m,T))}}let f=new Un(u);return new x_(d,f,s.fieldTransforms)}function uF(n,e,t,r=!1){return Ea(t,n.dc(r?4:3,e))}function Ea(n,e){if(hF(n=rt(n)))return TT("Unsupported field value:",e,n),dF(n,e);if(n instanceof Gi)return function(r,i){if(!cF(i.oc))throw i.Tc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Tc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Ea(a,i.Pc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return GP(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=it.fromDate(r);return{timestampValue:bl(i.serializer,o)}}if(r instanceof it){let o=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:bl(i.serializer,o)}}if(r instanceof _a)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof hi)return{bytesValue:XP(i.serializer,r._byteString)};if(r instanceof Qe){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Tc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ZC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Bh)return function(s,a){return{mapValue:{fields:{[zC]:{stringValue:qC},[_l]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Tc("VectorValues must only contain numeric values.");return YC(a.serializer,u)})}}}}}}(r,i);throw i.Tc(`Unsupported field value: ${Q_(r)}`)}(n,e)}function dF(n,e){let t={};return EP(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yo(n,(r,i)=>{let o=Ea(i,e.uc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function hF(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof it||n instanceof _a||n instanceof hi||n instanceof Qe||n instanceof Gi||n instanceof Bh)}function TT(n,e,t){if(!hF(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Q_(t);throw r==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+r)}}function NC(n,e,t){if((e=rt(e))instanceof Sr)return e._internalPath;if(typeof e=="string")return IT(n,e);throw P_("Field path arguments must be of type string or ",n,!1,void 0,t)}var X8=new RegExp("[~\\*/\\[\\]]");function IT(n,e,t){if(e.search(X8)>=0)throw P_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Sr(...e.split("."))._internalPath}catch{throw P_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function P_(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new L(x.INVALID_ARGUMENT,a+n+c)}function fF(n,e){return n.some(t=>t.isEqual(e))}var ya=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new RC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Z_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},RC=class extends ya{data(){return super.data()}};function Z_(n,e){return typeof e=="string"?IT(n,e):e instanceof Sr?e._internalPath:e._delegate._internalPath}function pF(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new L(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Hh=class{},va=class extends Hh{};function Wi(n,e,...t){let r=[];e instanceof Hh&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof xC).length,a=o.filter(c=>c instanceof k_).length;if(s>1||s>0&&a>0)throw new L(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var k_=class n extends va{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return CF(e._query,t),new $t(e.firestore,e.converter,sD(e._query,t))}_parse(e){let t=wa(e.firestore);return function(o,s,a,c,u,d,f){let g;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new L(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){nP(f,d);let v=[];for(let b of f)v.push(tP(c,o,b));g={arrayValue:{values:v}}}else g=tP(c,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||nP(f,d),g=uF(a,s,f,d==="in"||d==="not-in");return Te.create(u,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function gF(n,e,t){let r=e,i=Z_("where",n);return k_._create(i,r,t)}var xC=class n extends Hh{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Fe.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)CF(s,c),s=sD(s,c)}(e._query,t),new $t(e.firestore,e.converter,sD(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var OC=class n extends va{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new L(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new L(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ua(o,s)}(e._query,this._field,this._direction);return new $t(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Cr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function mF(n,e="asc"){let t=e,r=Z_("orderBy",n);return OC._create(r,t)}var F_=class n extends va{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new $t(e.firestore,e.converter,Xm(e._query,this._limit,this._limitType))}};function _F(n){return Wk("limit",n),F_._create("limit",n,"F")}function yF(n){return Wk("limitToLast",n),F_._create("limitToLast",n,"L")}var L_=class n extends va{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=DF(e,this.type,this._docOrFields,this._inclusive);return new $t(e.firestore,e.converter,function(i,o){return new Cr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function vF(...n){return L_._create("startAt",n,!0)}function wF(...n){return L_._create("startAfter",n,!1)}var V_=class n extends va{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=DF(e,this.type,this._docOrFields,this._inclusive);return new $t(e.firestore,e.converter,function(i,o){return new Cr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function EF(...n){return V_._create("endBefore",n,!1)}function bF(...n){return V_._create("endAt",n,!0)}function DF(n,e,t,r){if(t[0]=rt(t[0]),t[0]instanceof ya)return function(o,s,a,c,u){if(!c)throw new L(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of cl(o))if(f.field.isKeyField())d.push(la(s,c.key));else{let g=c.data.field(f.field);if($_(g))throw new L(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let m=f.field.canonicalString();throw new L(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(g)}return new di(d,u)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=wa(n.firestore);return function(s,a,c,u,d,f){let g=s.explicitOrderBy;if(d.length>g.length)throw new L(x.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let m=[];for(let v=0;v<d.length;v++){let b=d[v];if(g[v].field.isKeyField()){if(typeof b!="string")throw new L(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof b}`);if(!KC(s)&&b.indexOf("/")!==-1)throw new L(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${b}' contains a slash.`);let T=s.path.child(Ae.fromString(b));if(!q.isDocumentKey(T))throw new L(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);let F=new q(T);m.push(la(a,F))}else{let T=uF(c,u,b);m.push(T)}}return new di(m,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function tP(n,e,t){if(typeof(t=rt(t))=="string"){if(t==="")throw new L(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KC(e)&&t.indexOf("/")!==-1)throw new L(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ae.fromString(t));if(!q.isDocumentKey(r))throw new L(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return la(n,new q(r))}if(t instanceof Qe)return la(n,t._key);throw new L(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Q_(t)}.`)}function nP(n,e){if(!Array.isArray(n)||n.length===0)throw new L(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CF(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new L(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var xl=class{convertValue(e,t="none"){switch(jo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw J(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Yo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[_l].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>tt(s.doubleValue));return new Bh(o)}convertGeoPoint(e){return new _a(tt(e.latitude),tt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=G_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Dh(e));default:return null}}convertTimestamp(e){let t=ji(e);return new it(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ae.fromString(e);X(uk(r),9688,{name:e});let i=new Bo(r.get(1),r.get(3)),o=new q(r.popFirst(5));return i.isEqual(t)||pt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function J_(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var PC=class extends xl{constructor(e){super(),this.firestore=e}convertBytes(e){return new hi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qe(this.firestore,null,t)}};var Bi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},tr=class extends ya{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Fo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Z_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Fo=class extends tr{data(e={}){return super.data(e)}},Ar=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Bi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Fo(this._firestore,this._userDataWriter,r.key,r,new Bi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new L(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Fo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Bi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Fo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Bi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,d=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:eq(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function eq(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J(61501,{type:n})}}function ST(n,e){return n instanceof tr&&e instanceof tr?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ar&&e instanceof Ar&&n._firestore===e._firestore&&bT(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function TF(n){n=Me(n,Qe);let e=Me(n.firestore,ot);return Gk(Gt(e),n._key).then(t=>RT(e,n,t))}var zi=class extends xl{constructor(e){super(),this.firestore=e}convertBytes(e){return new hi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qe(this.firestore,null,t)}};function IF(n){n=Me(n,Qe);let e=Me(n.firestore,ot),t=Gt(e),r=new zi(e);return W8(t,n._key).then(i=>new tr(e,r,n._key,i,new Bi(i!==null&&i.hasLocalMutations,!0),n.converter))}function SF(n){n=Me(n,Qe);let e=Me(n.firestore,ot);return Gk(Gt(e),n._key,{source:"server"}).then(t=>RT(e,n,t))}function AF(n){n=Me(n,$t);let e=Me(n.firestore,ot),t=Gt(e),r=new zi(e);return pF(n._query),zk(t,n._query).then(i=>new Ar(e,r,n,i))}function MF(n){n=Me(n,$t);let e=Me(n.firestore,ot),t=Gt(e),r=new zi(e);return K8(t,n._query).then(i=>new Ar(e,r,n,i))}function NF(n){n=Me(n,$t);let e=Me(n.firestore,ot),t=Gt(e),r=new zi(e);return zk(t,n._query,{source:"server"}).then(i=>new Ar(e,r,n,i))}function AT(n,e,t){n=Me(n,Qe);let r=Me(n.firestore,ot),i=J_(n.converter,e,t);return Bl(r,[Y_(wa(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,lt.none())])}function MT(n,e,t,...r){n=Me(n,Qe);let i=Me(n.firestore,ot),o=wa(i),s;return s=typeof(e=rt(e))=="string"||e instanceof Sr?CT(o,"updateDoc",n._key,e,t,r):DT(o,"updateDoc",n._key,e),Bl(i,[s.toMutation(n._key,lt.exists(!0))])}function RF(n){return Bl(Me(n.firestore,ot),[new zo(n._key,lt.none())])}function xF(n,e){let t=Me(n.firestore,ot),r=Qh(n),i=J_(n.converter,e);return Bl(t,[Y_(wa(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,lt.exists(!1))]).then(()=>r)}function NT(n,...e){var t,r,i;n=rt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||bC(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(bC(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,u,d;if(n instanceof Qe)u=Me(n.firestore,ot),d=Pl(n._key.path),c={next:f=>{e[s]&&e[s](RT(u,n,f))},error:e[s+1],complete:e[s+2]};else{let f=Me(n,$t);u=Me(f.firestore,ot),d=f._query;let g=new zi(u);c={next:m=>{e[s]&&e[s](new Ar(u,g,f,m))},error:e[s+1],complete:e[s+2]},pF(n._query)}return function(g,m,v,b){let T=new Nl(b),F=new Vh(m,T,v);return g.asyncQueue.enqueueAndForget(()=>N(null,null,function*(){return oT(yield Rl(g),F)})),()=>{T.yu(),g.asyncQueue.enqueueAndForget(()=>N(null,null,function*(){return sT(yield Rl(g),F)}))}}(Gt(u),d,a,c)}function OF(n,e){return Q8(Gt(n=Me(n,ot)),bC(e)?e:{next:e})}function Bl(n,e){return function(r,i){let o=new Rt;return r.asyncQueue.enqueueAndForget(()=>N(null,null,function*(){return A8(yield _T(r),i,o)})),o.promise}(Gt(n),e)}function RT(n,e,t){let r=t.docs.get(e._key),i=new zi(n);return new tr(n,i,e._key,r,new Bi(t.hasPendingWrites,t.fromCache),e.converter)}var tq={maxAttempts:5};var B_=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=wa(e)}set(e,t,r){this._verifyNotCommitted();let i=Po(e,this._firestore),o=J_(i.converter,t,r),s=Y_(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,lt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Po(e,this._firestore),s;return s=typeof(t=rt(t))=="string"||t instanceof Sr?CT(this._dataReader,"WriteBatch.update",o._key,t,r,i):DT(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,lt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Po(e,this._firestore);return this._mutations=this._mutations.concat(new zo(t._key,lt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new L(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Po(n,e){if((n=rt(n)).firestore!==e)throw new L(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var kC=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=wa(e)}get(e){let t=Po(e,this._firestore),r=new PC(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return J(24041);let o=i[0];if(o.isFoundDocument())return new ya(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new ya(this._firestore,r,t._key,null,t.converter);throw J(18433,{doc:o})})}set(e,t,r){let i=Po(e,this._firestore),o=J_(i.converter,t,r),s=Y_(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){let o=Po(e,this._firestore),s;return s=typeof(t=rt(t))=="string"||t instanceof Sr?CT(this._dataReader,"Transaction.update",o._key,t,r,i):DT(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){let t=Po(e,this._firestore);return this._transaction.delete(t._key),this}};var FC=class extends kC{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Po(e,this._firestore),r=new zi(this._firestore);return super.get(e).then(i=>new tr(this._firestore,r,t._key,i._document,new Bi(!1,!1),t.converter))}};function PF(n,e,t){n=Me(n,ot);let r=Object.assign(Object.assign({},tq),t);return function(o){if(o.maxAttempts<1)throw new L(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new Rt;return o.asyncQueue.enqueueAndForget(()=>N(null,null,function*(){let u=yield G8(o);new wC(o.asyncQueue,u,a,s,c).Nu()})),c.promise}(Gt(n),i=>e(new FC(n,i)),r)}function kF(){return new jh("deleteField")}function FF(){return new IC("serverTimestamp")}function LF(...n){return new SC("arrayUnion",n)}function VF(...n){return new AC("arrayRemove",n)}function BF(n){return new MC("increment",n)}(function(e,t=!0){(function(i){Ol=i})(RI),bu(new us("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ot(new Ob(r.getProvider("auth-internal")),new Fb(s,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new L(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bo(u.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),oo(Ux,$x,e),oo(Ux,$x,"esm2017")})();var nq="@firebase/firestore-compat",rq="0.3.47";function LT(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new L("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function jF(){if(typeof Uint8Array>"u")throw new L("unimplemented","Uint8Arrays are not available in this environment.")}function HF(){if(!bP())throw new L("unimplemented","Blobs are unavailable in Firestore in this environment.")}var X_=class n{constructor(e){this._delegate=e}static fromBase64String(e){return HF(),new n(hi.fromBase64String(e))}static fromUint8Array(e){return jF(),new n(hi.fromUint8Array(e))}toBase64(){return HF(),this._delegate.toBase64()}toUint8Array(){return jF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function xT(n){return iq(n,["next","error","complete"])}function iq(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var OT=class{enableIndexedDbPersistence(e,t){return Xk(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return eF(e._delegate)}clearIndexedDbPersistence(e){return nF(e._delegate)}},ey=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Bo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Dr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){Qk(this._delegate,e,t,r)}enableNetwork(){return iF(this._delegate)}disableNetwork(){return oF(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,vT("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return rF(this._delegate)}onSnapshotsInSync(e){return OF(this._delegate,e)}get app(){if(!this._appCompat)throw new L("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ul(this,wT(this._delegate,e))}catch(t){throw hn(t,"collection()","Firestore.collection()")}}doc(e){try{return new fi(this,Qh(this._delegate,e))}catch(t){throw hn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ta(this,Yk(this._delegate,e))}catch(t){throw hn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return PF(this._delegate,t=>e(new ty(this,t)))}batch(){return Gt(this._delegate),new ny(new B_(this._delegate,e=>Bl(this._delegate,e)))}loadBundle(e){return sF(this._delegate,e)}namedQuery(e){return aF(this._delegate,e).then(t=>t?new Ta(this,t):null)}},jl=class extends xl{constructor(e){super(),this.firestore=e}convertBytes(e){return new X_(new hi(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return fi.forKey(t,this.firestore,null)}};function oq(n){rP(n)}var ty=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new jl(e)}get(e){let t=ba(e);return this._delegate.get(t).then(r=>new Da(this._firestore,new tr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=ba(e);return r?(LT("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=ba(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=ba(e);return this._delegate.delete(t),this}},ny=class{constructor(e){this._delegate=e}set(e,t,r){let i=ba(e);return r?(LT("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=ba(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=ba(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Hl=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Fo(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ca(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new jl(e),t),i.set(t,o)),o}};Hl.INSTANCES=new WeakMap;var fi=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jl(e)}static forPath(e,t,r){if(e.length%2!==0)throw new L("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Qe(t._delegate,r,new q(e)))}static forKey(e,t,r){return new n(t,new Qe(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ul(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ul(this.firestore,wT(this._delegate,e))}catch(t){throw hn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=rt(e),e instanceof Qe?ET(this._delegate,e):!1}set(e,t){t=LT("DocumentReference.set",t);try{return t?AT(this._delegate,e,t):AT(this._delegate,e)}catch(r){throw hn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?MT(this._delegate,e):MT(this._delegate,e,t,...r)}catch(i){throw hn(i,"updateDoc()","DocumentReference.update()")}}delete(){return RF(this._delegate)}onSnapshot(...e){let t=UF(e),r=$F(e,i=>new Da(this.firestore,new tr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return NT(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=IF(this._delegate):e?.source==="server"?t=SF(this._delegate):t=TF(this._delegate),t.then(r=>new Da(this.firestore,new tr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Hl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function hn(n,e,t){return n.message=n.message.replace(e,t),n}function UF(n){for(let e of n)if(typeof e=="object"&&!xT(e))return e;return{}}function $F(n,e){var t,r;let i;return xT(n[0])?i=n[0]:xT(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Da=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new fi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ST(this._delegate,e._delegate)}},Ca=class extends Da{data(e){let t=this._delegate.data(e);return this._delegate._converter||oP(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Ta=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jl(e)}where(e,t,r){try{return new n(this.firestore,Wi(this._delegate,gF(e,t,r)))}catch(i){throw hn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Wi(this._delegate,mF(e,t)))}catch(r){throw hn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Wi(this._delegate,_F(e)))}catch(t){throw hn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Wi(this._delegate,yF(e)))}catch(t){throw hn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Wi(this._delegate,vF(...e)))}catch(t){throw hn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Wi(this._delegate,wF(...e)))}catch(t){throw hn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Wi(this._delegate,EF(...e)))}catch(t){throw hn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Wi(this._delegate,bF(...e)))}catch(t){throw hn(t,"endAt()","Query.endAt()")}}isEqual(e){return bT(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=MF(this._delegate):e?.source==="server"?t=NF(this._delegate):t=AF(this._delegate),t.then(r=>new Yh(this.firestore,new Ar(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=UF(e),r=$F(e,i=>new Yh(this.firestore,new Ar(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return NT(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Hl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},PT=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ca(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Yh=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ta(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ca(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new PT(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Ca(this._firestore,r))})}isEqual(e){return ST(this._delegate,e._delegate)}},Ul=class n extends Ta{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new fi(this.firestore,e):null}doc(e){try{return e===void 0?new fi(this.firestore,Qh(this._delegate)):new fi(this.firestore,Qh(this._delegate,e))}catch(t){throw hn(t,"doc()","CollectionReference.doc()")}}add(e){return xF(this._delegate,e).then(t=>new fi(this.firestore,t))}isEqual(e){return ET(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Hl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function ba(n){return Me(n,Qe)}var kT=class n{constructor(...e){this._delegate=new Sr(...e)}static documentId(){return new n(gt.keyField().canonicalString())}isEqual(e){return e=rt(e),e instanceof Sr?this._delegate._internalPath.isEqual(e._internalPath):!1}};var FT=class n{static serverTimestamp(){let e=FF();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=kF();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=LF(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=VF(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=BF(e);return t._methodName="FieldValue.increment",new n(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}};var sq={Firestore:ey,GeoPoint:_a,Timestamp:it,Blob:X_,Transaction:ty,WriteBatch:ny,DocumentReference:fi,DocumentSnapshot:Da,Query:Ta,QueryDocumentSnapshot:Ca,QuerySnapshot:Yh,CollectionReference:Ul,FieldPath:kT,FieldValue:FT,setLogLevel:oq,CACHE_SIZE_UNLIMITED:Zk};function aq(n,e){n.INTERNAL.registerComponent(new us("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},sq)))}function cq(n){aq(n,(e,t)=>new ey(e,t,new OT)),n.registerVersion(nq,rq)}cq(mn);function lq(n,e=so){return new ne(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function GF(n,e){return lq(n,e)}function uq(n,e){return GF(n,e).pipe(uo(void 0),ku(),Y(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function jT(n,e){return GF(n,e).pipe(Y(t=>({payload:t,type:"query"})))}var ry=class{ref;afs;injector=R(qe);constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=QF(r,t);return new oy(i,o,this.afs)}snapshotChanges(){return uq(this.ref,this.afs.schedulers.outsideAngular).pipe(un(this.injector))}valueChanges(e={}){return this.snapshotChanges().pipe(Y(({payload:t})=>e.idField?he(H({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Ce(this.ref.get(e)).pipe(un(this.injector))}};function iy(n,e){return jT(n,e).pipe(uo(void 0),ku(),Y(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let u=o.find(f=>f.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function zF(n,e,t){return iy(n,t).pipe(gs((r,i)=>dq(r,i.map(o=>o.payload),e),[]),sp(),Y(r=>r.map(i=>({type:i.type,payload:i}))))}function dq(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=hq(n,r))}),n}function VT(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function hq(n,e){switch(e.type){case"added":if(!n[e.newIndex]?.doc.ref.isEqual(e.doc.ref))return VT(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return VT(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]?.doc.ref.isEqual(e.doc.ref))return VT(n,e.oldIndex,1);break}return n}function qF(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var oy=class{ref;query;afs;injector=R(qe);constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=iy(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Y(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(uo(void 0),ku(),Ue(([r,i])=>i.length>0||!r),Y(([,r])=>r),un(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(gs((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=qF(e);return zF(this.query,t,this.afs.schedulers.outsideAngular).pipe(un(this.injector))}valueChanges(e={}){return jT(this.query,this.afs.schedulers.outsideAngular).pipe(Y(t=>t.payload.docs.map(r=>e.idField?he(H({},r.data()),{[e.idField]:r.id}):r.data())),un(this.injector))}get(e){return Ce(this.query.get(e)).pipe(un(this.injector))}add(e){return this.ref.add(e)}doc(e){return new ry(this.ref.doc(e),this.afs)}},BT=class{query;afs;injector=R(qe);constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?iy(this.query,this.afs.schedulers.outsideAngular).pipe(un(this.injector)):iy(this.query,this.afs.schedulers.outsideAngular).pipe(Y(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ue(t=>t.length>0),un(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(gs((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=qF(e);return zF(this.query,t,this.afs.schedulers.outsideAngular).pipe(un(this.injector))}valueChanges(e={}){return jT(this.query,this.afs.schedulers.outsideAngular).pipe(Y(r=>r.payload.docs.map(i=>e.idField?H({[e.idField]:i.id},i.data()):i.data())),un(this.injector))}get(e){return Ce(this.query.get(e)).pipe(un(this.injector))}},WF=new j("angularfire2.enableFirestorePersistence"),KF=new j("angularfire2.firestore.persistenceSettings"),fq=new j("angularfire2.firestore.settings"),pq=new j("angularfire2.firestore.use-emulator");function QF(n,e=t=>t){return{query:e(n),ref:n}}var HT=(()=>{class n{schedulers;firestore;persistenceEnabled$;ngZone=R(fe);constructor(t,r,i,o,s,a,c,u,d,f,g,m,v,b,T,F,$){this.schedulers=c;let P=rh(t,a,r),U=d;f&&_b(P,a,g,v,b,T,m,F),[this.firestore,this.persistenceEnabled$]=Em(`${P.name}.firestore`,"AngularFirestore",P.name,()=>{let W=a.runOutsideAngular(()=>P.firestore());if(o&&W.settings(o),U&&W.useEmulator(...U),i&&!vo(s)){let K=()=>{try{return Ce(W.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(D){return typeof console<"u"&&console.warn(D),Q(!1)}};return[W,a.runOutsideAngular(K)]}else return[W,Q(!1)]},[o,U,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=QF(i,r),a=this.ngZone.run(()=>o);return new oy(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new BT(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.ngZone.run(()=>r);return new ry(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(k(qc),k(Wc,8),k(WF,8),k(fq,8),k(Pn),k(fe),k(eh),k(KF,8),k(pq,8),k(Bx,8),k(db,8),k(hb,8),k(fb,8),k(pb,8),k(gb,8),k(mb,8),k(zc,8))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),YF=(()=>{class n{constructor(){mn.registerVersion("angularfire",Gc.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:WF,useValue:!0},{provide:KF,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=oe({type:n});static \u0275inj=ie({providers:[HT]})}return n})();var Zh=class n{constructor(e,t){this.collectionName=e;this.firestore=t;this.collectionRef=this.firestore.collection(this.collectionName)}items$=new Xe({});collectionRef;getItems(){return this.collectionRef?(this.collectionRef.snapshotChanges().pipe(Y(e=>e.map(t=>t.payload.doc.data()))).subscribe(e=>this.items$.next(e)),this.items$.asObservable()):Q([])}static \u0275fac=function(t){return new(t||n)(k(rb),k(HT))};static \u0275prov=V({token:n,factory:n.\u0275fac})},sy=class n{constructor(e){this.injector=e}createService(e){return Oe.create({providers:[{provide:rb,useValue:e},{provide:Zh,useClass:Zh}],parent:this.injector}).get(Zh)}static \u0275fac=function(t){return new(t||n)(k(Oe))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var ay=class n{constructor(e){this.firestoreFactoryService=e;this.db=this.firestoreFactoryService.createService("users")}db=null;listUsers(){return this.db?this.db.getItems():Q([])}static \u0275fac=function(t){return new(t||n)(k(sy))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var cy=class n{success(e){let t=new Date,r=`${t.getMonth()+1}-${t.getDate()}-${t.getFullYear()}`;console.log(`${r}: ${e}`)}error(e){let t=new Date,r=`${t.getMonth()+1}-${t.getDate()}-${t.getFullYear()}`;console.warn(`${r}: ${e}`)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var Xo=class n{constructor(e,t){this.http=e;this.alerts=t}getFile(e){return N(this,null,function*(){let t=this.http.get(`/assets/jsons/${e}`);try{return yield Ru(t)}catch{return this.alerts.error("Failed"),null}})}static \u0275fac=function(t){return new(t||n)(k(Jr),k(cy))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var ly={production:!1,firebase:{apiKey:"AIzaSyDEOKLsumgAaPLVzU7Mqje2PqheTlXwShc",authDomain:"hall-of-fame-c0fbc.firebaseapp.com",projectId:"hall-of-fame-c0fbc",storageBucket:"hall-of-fame-c0fbc.firebasestorage.app",messagingSenderId:"406579591585",appId:"1:406579591585:web:52bc73349d3cba98f573e0",measurementId:"G-ZPPLJ6VZ45"},twitch:{clientId:"gp762nuuoqcoxypju8c569th9wz7q5",oauth:"npofdqokooahh6ijf17dhjzgocqzw2"}};var{twitch:ZF}=ly,uy=class n{constructor(e){this.http=e}userList$=new Xe([]);_getUsers(e){return N(this,null,function*(){let t=new Zr;t=t.append("Client-Id",ZF.clientId),t=t.append("Authorization",`Bearer ${ZF.oauth}`);let r=new URLSearchParams;e.forEach(s=>{r.append("login",s)});let i=`https://api.twitch.tv/helix/users?${r.toString()}`,o={method:"GET",headers:t,redirect:"follow"};try{let s=this.http.get(i,o).pipe(Y(a=>a.data));return yield Ru(s)}catch{return Promise.resolve([])}})}getUsers(e){return this._getUsers(e).then(t=>{this.userList$.next(t)}),this.userList$.asObservable()}static \u0275fac=function(t){return new(t||n)(k(Jr))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var dy=class n{constructor(e,t,r){this.userService=e;this.reader=t;this.twitchApi=r;this._users()}userList$=new Xe([]);getBadgesInfo(){return this.reader.getFile("badges.json")}_users(){let e;this.userService.listUsers().pipe(Re(t=>!t||!t.length?[]:(e=t,this.twitchApi.getUsers(t.map(r=>r.username))))).subscribe(t=>{if((!t||!t.length)&&(!e||!e.length))return;let r=t.length?t:e;console.log({botUsers:e,twitchUsers:t});let i=r.map(o=>{let s=e.find(u=>u.id===o.id)||{},a=t.find(u=>u.id===o.id)||{};return new _m(a,s)});this.userList$.next(i)})}getUsers(){return this.userList$.asObservable()}static \u0275fac=function(t){return new(t||n)(k(ay),k(Xo),k(uy))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var iL=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(pe(Vs),pe(Zt))};static \u0275dir=Jt({type:n})}return n})(),oL=(()=>{class n extends iL{static \u0275fac=(()=>{let t;return function(i){return(t||(t=zr(n)))(i||n)}})();static \u0275dir=Jt({type:n,features:[go]})}return n})(),WT=new j("");var Eq={provide:WT,useExisting:xs(()=>my),multi:!0};function bq(){let n=Ln()?Ln().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Dq=new j(""),my=(()=>{class n extends iL{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!bq())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(pe(Vs),pe(Zt),pe(Dq,8))};static \u0275dir=Jt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Qr("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[ud([Eq]),go]})}return n})();var Cq=new j(""),Tq=new j("");function sL(n){return n!=null}function aL(n){return Bs(n)?Ce(n):n}function cL(n){let e={};return n.forEach(t=>{e=t!=null?H(H({},e),t):e}),Object.keys(e).length===0?null:e}function lL(n,e){return e.map(t=>t(n))}function Iq(n){return!n.validate}function uL(n){return n.map(e=>Iq(e)?e:t=>e.validate(t))}function Sq(n){if(!n)return null;let e=n.filter(sL);return e.length==0?null:function(t){return cL(lL(t,e))}}function dL(n){return n!=null?Sq(uL(n)):null}function Aq(n){if(!n)return null;let e=n.filter(sL);return e.length==0?null:function(t){let r=lL(t,e).map(aL);return xu(r).pipe(Y(cL))}}function hL(n){return n!=null?Aq(uL(n)):null}function JF(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function fL(n){return n._rawValidators}function pL(n){return n._rawAsyncValidators}function $T(n){return n?Array.isArray(n)?n:[n]:[]}function fy(n,e){return Array.isArray(n)?n.includes(e):n===e}function XF(n,e){let t=$T(e);return $T(n).forEach(i=>{fy(t,i)||t.push(i)}),t}function eL(n,e){return $T(e).filter(t=>!fy(n,t))}var GT=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=dL(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=hL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}};var zl=class extends GT{_parent=null;name=null;valueAccessor=null},zT=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Mq={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},use=he(H({},Mq),{"[class.ng-submitted]":"isSubmitted"}),gL=(()=>{class n extends zT{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(pe(zl,2))};static \u0275dir=Jt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Cn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[go]})}return n})();var Jh="VALID",hy="INVALID",$l="PENDING",Xh="DISABLED",ql=class{},py=class extends ql{value;source;constructor(e,t){super(),this.value=e,this.source=t}},ef=class extends ql{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},tf=class extends ql{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Gl=class extends ql{status;source;constructor(e,t){super(),this.status=e,this.source=t}};function Nq(n){return(_y(n)?n.validators:n)||null}function Rq(n){return Array.isArray(n)?dL(n):n||null}function xq(n,e){return(_y(e)?e.asyncValidators:n)||null}function Oq(n){return Array.isArray(n)?hL(n):n||null}function _y(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var qT=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ri(this.statusReactive)}set status(e){Ri(()=>this.statusReactive.set(e))}_status=pd(()=>this.statusReactive());statusReactive=td(void 0);get valid(){return this.status===Jh}get invalid(){return this.status===hy}get pending(){return this.status==$l}get disabled(){return this.status===Xh}get enabled(){return this.status!==Xh}errors;get pristine(){return Ri(this.pristineReactive)}set pristine(e){Ri(()=>this.pristineReactive.set(e))}_pristine=pd(()=>this.pristineReactive());pristineReactive=td(!0);get dirty(){return!this.pristine}get touched(){return Ri(this.touchedReactive)}set touched(e){Ri(()=>this.touchedReactive.set(e))}_touched=pd(()=>this.touchedReactive());touchedReactive=td(!1);get untouched(){return!this.touched}_events=new we;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(XF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(XF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(eL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(eL(e,this._rawAsyncValidators))}hasValidator(e){return fy(this._rawValidators,e)}hasAsyncValidator(e){return fy(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(he(H({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new tf(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new tf(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(he(H({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ef(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new ef(!0,r))}markAsPending(e={}){this.status=$l;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Gl(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(he(H({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Xh,this.errors=null,this._forEachChild(i=>{i.disable(he(H({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new py(this.value,r)),this._events.next(new Gl(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(he(H({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Jh,this._forEachChild(r=>{r.enable(he(H({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(he(H({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Jh||this.status===$l)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new py(this.value,t)),this._events.next(new Gl(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(he(H({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xh:Jh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=$l,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=aL(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Gl(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Pe,this.statusChanges=new Pe}_calculateStatus(){return this._allControlsDisabled()?Xh:this.errors?hy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($l)?$l:this._anyControlsHaveStatus(hy)?hy:Jh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new ef(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new tf(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){_y(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Rq(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Oq(this._rawAsyncValidators)}};var KT=new j("",{providedIn:"root",factory:()=>yy}),yy="always";function Pq(n,e,t=yy){Fq(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Vq(n,e),jq(n,e),Bq(n,e),kq(n,e)}function tL(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Lq(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function gy(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function kq(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Fq(n,e){let t=fL(n);e.validator!==null?n.setValidators(JF(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=pL(n);e.asyncValidator!==null?n.setAsyncValidators(JF(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();gy(e._rawValidators,i),gy(e._rawAsyncValidators,i)}function Lq(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=fL(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=pL(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return gy(e._rawValidators,r),gy(e._rawAsyncValidators,r),t}function Vq(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&mL(n,e)})}function Bq(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&mL(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function mL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function jq(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Hq(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Uq(n){return Object.getPrototypeOf(n.constructor)===oL}function $q(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===my?t=o:Uq(o)?r=o:i=o}),i||r||t||null}function nL(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function rL(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var _L=class extends qT{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(Nq(t),xq(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_y(t)&&(t.nonNullable||t.initialValueIsDefault)&&(rL(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){nL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){nL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){rL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Gq={provide:WT,useExisting:xs(()=>QT),multi:!0};var zq=(()=>{class n{_accessors=[];add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t){this._accessors.splice(r,1);return}}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return t[0].control?t[0]._parent===r._control._parent&&t[1].name===r.name:!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),QT=(()=>{class n extends oL{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=R(KT,{optional:!0})??yy;constructor(t,r,i,o){super(t,r),this._registry=i,this._injector=o}ngOnInit(){this._control=this._injector.get(zl),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(r){return new(r||n)(pe(Vs),pe(Zt),pe(zq),pe(Oe))};static \u0275dir=Jt({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){r&1&&Qr("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[ud([Gq]),go]})}return n})();var yL=new j(""),qq={provide:zl,useExisting:xs(()=>YT)},YT=(()=>{class n extends zl{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(t){}model;update=new Pe;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=s,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=$q(this,i)}ngOnChanges(t){if(this._isControlChanged(t)){let r=t.form.previousValue;r&&tL(r,this,!1),Pq(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Hq(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&tL(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}static \u0275fac=function(r){return new(r||n)(pe(Cq,10),pe(Tq,10),pe(WT,10),pe(yL,8),pe(KT,8))};static \u0275dir=Jt({type:n,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[ud([qq]),go,Wn]})}return n})();var Wq=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=oe({type:n});static \u0275inj=ie({})}return n})();var ZT=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:yL,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:KT,useValue:t.callSetDisabledState??yy}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=oe({type:n});static \u0275inj=ie({imports:[Wq]})}return n})();var It="top",zt="bottom",Ft="right",Ot="left",vy="auto",es=[It,zt,Ft,Ot],Ki="start",Ia="end",vL="clippingParents",wy="viewport",Wl="popper",wL="reference",JT=es.reduce(function(n,e){return n.concat([e+"-"+Ki,e+"-"+Ia])},[]),Ey=[].concat(es,[vy]).reduce(function(n,e){return n.concat([e,e+"-"+Ki,e+"-"+Ia])},[]),Qq="beforeRead",Yq="read",Zq="afterRead",Jq="beforeMain",Xq="main",e9="afterMain",t9="beforeWrite",n9="write",r9="afterWrite",EL=[Qq,Yq,Zq,Jq,Xq,e9,t9,n9,r9];function Lt(n){return n?(n.nodeName||"").toLowerCase():null}function nt(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function nr(n){var e=nt(n).Element;return n instanceof e||n instanceof Element}function Pt(n){var e=nt(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function Kl(n){if(typeof ShadowRoot>"u")return!1;var e=nt(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function i9(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},i=e.attributes[t]||{},o=e.elements[t];!Pt(o)||!Lt(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var a=i[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function o9(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},s=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),a=s.reduce(function(c,u){return c[u]="",c},{});!Pt(i)||!Lt(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(c){i.removeAttribute(c)}))})}}var bL={name:"applyStyles",enabled:!0,phase:"write",fn:i9,effect:o9,requires:["computeStyles"]};function Vt(n){return n.split("-")[0]}var Mr=Math.max,Sa=Math.min,Qi=Math.round;function Ql(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function nf(){return!/^((?!chrome|android).)*safari/i.test(Ql())}function rr(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=n.getBoundingClientRect(),i=1,o=1;e&&Pt(n)&&(i=n.offsetWidth>0&&Qi(r.width)/n.offsetWidth||1,o=n.offsetHeight>0&&Qi(r.height)/n.offsetHeight||1);var s=nr(n)?nt(n):window,a=s.visualViewport,c=!nf()&&t,u=(r.left+(c&&a?a.offsetLeft:0))/i,d=(r.top+(c&&a?a.offsetTop:0))/o,f=r.width/i,g=r.height/o;return{width:f,height:g,top:d,right:u+f,bottom:d+g,left:u,x:u,y:d}}function Aa(n){var e=rr(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function rf(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&Kl(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function fn(n){return nt(n).getComputedStyle(n)}function XT(n){return["table","td","th"].indexOf(Lt(n))>=0}function qt(n){return((nr(n)?n.ownerDocument:n.document)||window.document).documentElement}function Yi(n){return Lt(n)==="html"?n:n.assignedSlot||n.parentNode||(Kl(n)?n.host:null)||qt(n)}function DL(n){return!Pt(n)||fn(n).position==="fixed"?null:n.offsetParent}function s9(n){var e=/firefox/i.test(Ql()),t=/Trident/i.test(Ql());if(t&&Pt(n)){var r=fn(n);if(r.position==="fixed")return null}var i=Yi(n);for(Kl(i)&&(i=i.host);Pt(i)&&["html","body"].indexOf(Lt(i))<0;){var o=fn(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function Nr(n){for(var e=nt(n),t=DL(n);t&&XT(t)&&fn(t).position==="static";)t=DL(t);return t&&(Lt(t)==="html"||Lt(t)==="body"&&fn(t).position==="static")?e:t||s9(n)||e}function Ma(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function Na(n,e,t){return Mr(n,Sa(e,t))}function CL(n,e,t){var r=Na(n,e,t);return r>t?t:r}function of(){return{top:0,right:0,bottom:0,left:0}}function sf(n){return Object.assign({},of(),n)}function af(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var a9=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,sf(typeof e!="number"?e:af(e,es))};function c9(n){var e,t=n.state,r=n.name,i=n.options,o=t.elements.arrow,s=t.modifiersData.popperOffsets,a=Vt(t.placement),c=Ma(a),u=[Ot,Ft].indexOf(a)>=0,d=u?"height":"width";if(!(!o||!s)){var f=a9(i.padding,t),g=Aa(o),m=c==="y"?It:Ot,v=c==="y"?zt:Ft,b=t.rects.reference[d]+t.rects.reference[c]-s[c]-t.rects.popper[d],T=s[c]-t.rects.reference[c],F=Nr(o),$=F?c==="y"?F.clientHeight||0:F.clientWidth||0:0,P=b/2-T/2,U=f[m],W=$-g[d]-f[v],K=$/2-g[d]/2+P,D=Na(U,K,W),y=c;t.modifiersData[r]=(e={},e[y]=D,e.centerOffset=D-K,e)}}function l9(n){var e=n.state,t=n.options,r=t.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||rf(e.elements.popper,i)&&(e.elements.arrow=i))}var e1={name:"arrow",enabled:!0,phase:"main",fn:c9,effect:l9,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ir(n){return n.split("-")[1]}var u9={top:"auto",right:"auto",bottom:"auto",left:"auto"};function d9(n,e){var t=n.x,r=n.y,i=e.devicePixelRatio||1;return{x:Qi(t*i)/i||0,y:Qi(r*i)/i||0}}function TL(n){var e,t=n.popper,r=n.popperRect,i=n.placement,o=n.variation,s=n.offsets,a=n.position,c=n.gpuAcceleration,u=n.adaptive,d=n.roundOffsets,f=n.isFixed,g=s.x,m=g===void 0?0:g,v=s.y,b=v===void 0?0:v,T=typeof d=="function"?d({x:m,y:b}):{x:m,y:b};m=T.x,b=T.y;var F=s.hasOwnProperty("x"),$=s.hasOwnProperty("y"),P=Ot,U=It,W=window;if(u){var K=Nr(t),D="clientHeight",y="clientWidth";if(K===nt(t)&&(K=qt(t),fn(K).position!=="static"&&a==="absolute"&&(D="scrollHeight",y="scrollWidth")),K=K,i===It||(i===Ot||i===Ft)&&o===Ia){U=zt;var E=f&&K===W&&W.visualViewport?W.visualViewport.height:K[D];b-=E-r.height,b*=c?1:-1}if(i===Ot||(i===It||i===zt)&&o===Ia){P=Ft;var C=f&&K===W&&W.visualViewport?W.visualViewport.width:K[y];m-=C-r.width,m*=c?1:-1}}var I=Object.assign({position:a},u&&u9),A=d===!0?d9({x:m,y:b},nt(t)):{x:m,y:b};if(m=A.x,b=A.y,c){var w;return Object.assign({},I,(w={},w[U]=$?"0":"",w[P]=F?"0":"",w.transform=(W.devicePixelRatio||1)<=1?"translate("+m+"px, "+b+"px)":"translate3d("+m+"px, "+b+"px, 0)",w))}return Object.assign({},I,(e={},e[U]=$?b+"px":"",e[P]=F?m+"px":"",e.transform="",e))}function h9(n){var e=n.state,t=n.options,r=t.gpuAcceleration,i=r===void 0?!0:r,o=t.adaptive,s=o===void 0?!0:o,a=t.roundOffsets,c=a===void 0?!0:a,u={placement:Vt(e.placement),variation:ir(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,TL(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:c})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,TL(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var IL={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:h9,data:{}};var by={passive:!0};function f9(n){var e=n.state,t=n.instance,r=n.options,i=r.scroll,o=i===void 0?!0:i,s=r.resize,a=s===void 0?!0:s,c=nt(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&u.forEach(function(d){d.addEventListener("scroll",t.update,by)}),a&&c.addEventListener("resize",t.update,by),function(){o&&u.forEach(function(d){d.removeEventListener("scroll",t.update,by)}),a&&c.removeEventListener("resize",t.update,by)}}var SL={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:f9,data:{}};var p9={left:"right",right:"left",bottom:"top",top:"bottom"};function Yl(n){return n.replace(/left|right|bottom|top/g,function(e){return p9[e]})}var g9={start:"end",end:"start"};function Dy(n){return n.replace(/start|end/g,function(e){return g9[e]})}function Ra(n){var e=nt(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function xa(n){return rr(qt(n)).left+Ra(n).scrollLeft}function t1(n,e){var t=nt(n),r=qt(n),i=t.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,c=0;if(i){o=i.width,s=i.height;var u=nf();(u||!u&&e==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:o,height:s,x:a+xa(n),y:c}}function n1(n){var e,t=qt(n),r=Ra(n),i=(e=n.ownerDocument)==null?void 0:e.body,o=Mr(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Mr(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+xa(n),c=-r.scrollTop;return fn(i||t).direction==="rtl"&&(a+=Mr(t.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:c}}function Oa(n){var e=fn(n),t=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+r)}function Cy(n){return["html","body","#document"].indexOf(Lt(n))>=0?n.ownerDocument.body:Pt(n)&&Oa(n)?n:Cy(Yi(n))}function ts(n,e){var t;e===void 0&&(e=[]);var r=Cy(n),i=r===((t=n.ownerDocument)==null?void 0:t.body),o=nt(r),s=i?[o].concat(o.visualViewport||[],Oa(r)?r:[]):r,a=e.concat(s);return i?a:a.concat(ts(Yi(s)))}function Zl(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function m9(n,e){var t=rr(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function AL(n,e,t){return e===wy?Zl(t1(n,t)):nr(e)?m9(e,t):Zl(n1(qt(n)))}function _9(n){var e=ts(Yi(n)),t=["absolute","fixed"].indexOf(fn(n).position)>=0,r=t&&Pt(n)?Nr(n):n;return nr(r)?e.filter(function(i){return nr(i)&&rf(i,r)&&Lt(i)!=="body"}):[]}function r1(n,e,t,r){var i=e==="clippingParents"?_9(n):[].concat(e),o=[].concat(i,[t]),s=o[0],a=o.reduce(function(c,u){var d=AL(n,u,r);return c.top=Mr(d.top,c.top),c.right=Sa(d.right,c.right),c.bottom=Sa(d.bottom,c.bottom),c.left=Mr(d.left,c.left),c},AL(n,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function cf(n){var e=n.reference,t=n.element,r=n.placement,i=r?Vt(r):null,o=r?ir(r):null,s=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,c;switch(i){case It:c={x:s,y:e.y-t.height};break;case zt:c={x:s,y:e.y+e.height};break;case Ft:c={x:e.x+e.width,y:a};break;case Ot:c={x:e.x-t.width,y:a};break;default:c={x:e.x,y:e.y}}var u=i?Ma(i):null;if(u!=null){var d=u==="y"?"height":"width";switch(o){case Ki:c[u]=c[u]-(e[d]/2-t[d]/2);break;case Ia:c[u]=c[u]+(e[d]/2-t[d]/2);break;default:}}return c}function ns(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=r===void 0?n.placement:r,o=t.strategy,s=o===void 0?n.strategy:o,a=t.boundary,c=a===void 0?vL:a,u=t.rootBoundary,d=u===void 0?wy:u,f=t.elementContext,g=f===void 0?Wl:f,m=t.altBoundary,v=m===void 0?!1:m,b=t.padding,T=b===void 0?0:b,F=sf(typeof T!="number"?T:af(T,es)),$=g===Wl?wL:Wl,P=n.rects.popper,U=n.elements[v?$:g],W=r1(nr(U)?U:U.contextElement||qt(n.elements.popper),c,d,s),K=rr(n.elements.reference),D=cf({reference:K,element:P,strategy:"absolute",placement:i}),y=Zl(Object.assign({},P,D)),E=g===Wl?y:K,C={top:W.top-E.top+F.top,bottom:E.bottom-W.bottom+F.bottom,left:W.left-E.left+F.left,right:E.right-W.right+F.right},I=n.modifiersData.offset;if(g===Wl&&I){var A=I[i];Object.keys(C).forEach(function(w){var Bt=[Ft,zt].indexOf(w)>=0?1:-1,Mn=[It,zt].indexOf(w)>=0?"y":"x";C[w]+=A[Mn]*Bt})}return C}function i1(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=t.boundary,o=t.rootBoundary,s=t.padding,a=t.flipVariations,c=t.allowedAutoPlacements,u=c===void 0?Ey:c,d=ir(r),f=d?a?JT:JT.filter(function(v){return ir(v)===d}):es,g=f.filter(function(v){return u.indexOf(v)>=0});g.length===0&&(g=f);var m=g.reduce(function(v,b){return v[b]=ns(n,{placement:b,boundary:i,rootBoundary:o,padding:s})[Vt(b)],v},{});return Object.keys(m).sort(function(v,b){return m[v]-m[b]})}function y9(n){if(Vt(n)===vy)return[];var e=Yl(n);return[Dy(n),e,Dy(e)]}function v9(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var i=t.mainAxis,o=i===void 0?!0:i,s=t.altAxis,a=s===void 0?!0:s,c=t.fallbackPlacements,u=t.padding,d=t.boundary,f=t.rootBoundary,g=t.altBoundary,m=t.flipVariations,v=m===void 0?!0:m,b=t.allowedAutoPlacements,T=e.options.placement,F=Vt(T),$=F===T,P=c||($||!v?[Yl(T)]:y9(T)),U=[T].concat(P).reduce(function(Xi,gn){return Xi.concat(Vt(gn)===vy?i1(e,{placement:gn,boundary:d,rootBoundary:f,padding:u,flipVariations:v,allowedAutoPlacements:b}):gn)},[]),W=e.rects.reference,K=e.rects.popper,D=new Map,y=!0,E=U[0],C=0;C<U.length;C++){var I=U[C],A=Vt(I),w=ir(I)===Ki,Bt=[It,zt].indexOf(A)>=0,Mn=Bt?"width":"height",rn=ns(e,{placement:I,boundary:d,rootBoundary:f,altBoundary:g,padding:u}),jt=Bt?w?Ft:Ot:w?zt:It;W[Mn]>K[Mn]&&(jt=Yl(jt));var Rr=Yl(jt),or=[];if(o&&or.push(rn[A]<=0),a&&or.push(rn[jt]<=0,rn[Rr]<=0),or.every(function(Xi){return Xi})){E=I,y=!1;break}D.set(I,or)}if(y)for(var rs=v?3:1,Xl=function(gn){var is=U.find(function(xr){var pi=D.get(xr);if(pi)return pi.slice(0,gn).every(function(eu){return eu})});if(is)return E=is,"break"},pn=rs;pn>0;pn--){var ut=Xl(pn);if(ut==="break")break}e.placement!==E&&(e.modifiersData[r]._skip=!0,e.placement=E,e.reset=!0)}}var o1={name:"flip",enabled:!0,phase:"main",fn:v9,requiresIfExists:["offset"],data:{_skip:!1}};function w9(n,e,t){var r=Vt(n),i=[Ot,It].indexOf(r)>=0?-1:1,o=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[Ot,Ft].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function E9(n){var e=n.state,t=n.options,r=n.name,i=t.offset,o=i===void 0?[0,0]:i,s=Ey.reduce(function(d,f){return d[f]=w9(f,e.rects,o),d},{}),a=s[e.placement],c=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=s}var s1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:E9};function b9(n){var e=n.state,t=n.name;e.modifiersData[t]=cf({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var ML={name:"popperOffsets",enabled:!0,phase:"read",fn:b9,data:{}};function a1(n){return n==="x"?"y":"x"}function D9(n){var e=n.state,t=n.options,r=n.name,i=t.mainAxis,o=i===void 0?!0:i,s=t.altAxis,a=s===void 0?!1:s,c=t.boundary,u=t.rootBoundary,d=t.altBoundary,f=t.padding,g=t.tether,m=g===void 0?!0:g,v=t.tetherOffset,b=v===void 0?0:v,T=ns(e,{boundary:c,rootBoundary:u,padding:f,altBoundary:d}),F=Vt(e.placement),$=ir(e.placement),P=!$,U=Ma(F),W=a1(U),K=e.modifiersData.popperOffsets,D=e.rects.reference,y=e.rects.popper,E=typeof b=="function"?b(Object.assign({},e.rects,{placement:e.placement})):b,C=typeof E=="number"?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),I=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,A={x:0,y:0};if(K){if(o){var w,Bt=U==="y"?It:Ot,Mn=U==="y"?zt:Ft,rn=U==="y"?"height":"width",jt=K[U],Rr=jt+T[Bt],or=jt-T[Mn],rs=m?-y[rn]/2:0,Xl=$===Ki?D[rn]:y[rn],pn=$===Ki?-y[rn]:-D[rn],ut=e.elements.arrow,Xi=m&&ut?Aa(ut):{width:0,height:0},gn=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:of(),is=gn[Bt],xr=gn[Mn],pi=Na(0,D[rn],Xi[rn]),eu=P?D[rn]/2-rs-pi-is-C.mainAxis:Xl-pi-is-C.mainAxis,ka=P?-D[rn]/2+rs+pi+xr+C.mainAxis:pn+pi+xr+C.mainAxis,eo=e.elements.arrow&&Nr(e.elements.arrow),tu=eo?U==="y"?eo.clientTop||0:eo.clientLeft||0:0,Fa=(w=I?.[U])!=null?w:0,nu=jt+eu-Fa-tu,ru=jt+ka-Fa,iu=Na(m?Sa(Rr,nu):Rr,jt,m?Mr(or,ru):or);K[U]=iu,A[U]=iu-jt}if(a){var ou,Ly=U==="x"?It:Ot,lf=U==="x"?zt:Ft,Or=K[W],to=W==="y"?"height":"width",su=Or+T[Ly],uf=Or-T[lf],os=[It,Ot].indexOf(F)!==-1,La=(ou=I?.[W])!=null?ou:0,Va=os?su:Or-D[to]-y[to]-La+C.altAxis,St=os?Or+D[to]+y[to]-La-C.altAxis:uf,kt=m&&os?CL(Va,Or,St):Na(m?Va:su,Or,m?St:uf);K[W]=kt,A[W]=kt-Or}e.modifiersData[r]=A}}var c1={name:"preventOverflow",enabled:!0,phase:"main",fn:D9,requiresIfExists:["offset"]};function l1(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function u1(n){return n===nt(n)||!Pt(n)?Ra(n):l1(n)}function C9(n){var e=n.getBoundingClientRect(),t=Qi(e.width)/n.offsetWidth||1,r=Qi(e.height)/n.offsetHeight||1;return t!==1||r!==1}function d1(n,e,t){t===void 0&&(t=!1);var r=Pt(e),i=Pt(e)&&C9(e),o=qt(e),s=rr(n,i,t),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!t)&&((Lt(e)!=="body"||Oa(o))&&(a=u1(e)),Pt(e)?(c=rr(e,!0),c.x+=e.clientLeft,c.y+=e.clientTop):o&&(c.x=xa(o))),{x:s.left+a.scrollLeft-c.x,y:s.top+a.scrollTop-c.y,width:s.width,height:s.height}}function T9(n){var e=new Map,t=new Set,r=[];n.forEach(function(o){e.set(o.name,o)});function i(o){t.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!t.has(a)){var c=e.get(a);c&&i(c)}}),r.push(o)}return n.forEach(function(o){t.has(o.name)||i(o)}),r}function h1(n){var e=T9(n);return EL.reduce(function(t,r){return t.concat(e.filter(function(i){return i.phase===r}))},[])}function f1(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function p1(n){var e=n.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var NL={placement:"bottom",modifiers:[],strategy:"absolute"};function RL(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function xL(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,i=e.defaultOptions,o=i===void 0?NL:i;return function(a,c,u){u===void 0&&(u=o);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},NL,o),modifiersData:{},elements:{reference:a,popper:c},attributes:{},styles:{}},f=[],g=!1,m={state:d,setOptions:function(F){var $=typeof F=="function"?F(d.options):F;b(),d.options=Object.assign({},o,d.options,$),d.scrollParents={reference:nr(a)?ts(a):a.contextElement?ts(a.contextElement):[],popper:ts(c)};var P=h1(p1([].concat(r,d.options.modifiers)));return d.orderedModifiers=P.filter(function(U){return U.enabled}),v(),m.update()},forceUpdate:function(){if(!g){var F=d.elements,$=F.reference,P=F.popper;if(RL($,P)){d.rects={reference:d1($,Nr(P),d.options.strategy==="fixed"),popper:Aa(P)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(C){return d.modifiersData[C.name]=Object.assign({},C.data)});for(var U=0;U<d.orderedModifiers.length;U++){if(d.reset===!0){d.reset=!1,U=-1;continue}var W=d.orderedModifiers[U],K=W.fn,D=W.options,y=D===void 0?{}:D,E=W.name;typeof K=="function"&&(d=K({state:d,options:y,name:E,instance:m})||d)}}}},update:f1(function(){return new Promise(function(T){m.forceUpdate(),T(d)})}),destroy:function(){b(),g=!0}};if(!RL(a,c))return m;m.setOptions(u).then(function(T){!g&&u.onFirstUpdate&&u.onFirstUpdate(T)});function v(){d.orderedModifiers.forEach(function(T){var F=T.name,$=T.options,P=$===void 0?{}:$,U=T.effect;if(typeof U=="function"){var W=U({state:d,name:F,instance:m,options:P}),K=function(){};f.push(W||K)}})}function b(){f.forEach(function(T){return T()}),f=[]}return m}}var I9=[SL,ML,IL,bL],g1=xL({defaultModifiers:I9});var FL=["*"];var S9=["dialog"];var LL={animation:!0,transitionTimerDelayMs:5},VL=(()=>{class n{constructor(){this.animation=LL.animation}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function A9(n){let{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n),r=parseFloat(e),i=parseFloat(t);return(r+i)*1e3}function w1(n){return typeof n=="string"}function m1(n){return n!=null}function M9(n){return n&&n.then}function N9(n,e){return!e||typeof n.closest>"u"?null:n.closest(e)}function BL(n){return(n||document.body).getBoundingClientRect()}function R9(n){return e=>new ne(t=>{let r=s=>n.run(()=>t.next(s)),i=s=>n.run(()=>t.error(s)),o=()=>n.run(()=>t.complete());return e.subscribe({next:r,error:i,complete:o})})}var x9=()=>{},{transitionTimerDelayMs:O9}=LL,Ty=new Map,Zi=(n,e,t,r)=>{let i=r.context||{},o=Ty.get(e);if(o)switch(r.runningTransition){case"continue":return yt;case"stop":n.run(()=>o.transition$.complete()),i=Object.assign(o.context,i),Ty.delete(e)}let s=t(e,r.animation,i)||x9;if(!r.animation||window.getComputedStyle(e).transitionProperty==="none")return n.run(()=>s()),Q(void 0).pipe(R9(n));let a=new we,c=new we,u=a.pipe(Lv(!0));Ty.set(e,{transition$:a,complete:()=>{c.next(),c.complete()},context:i});let d=A9(e);return n.runOutsideAngular(()=>{let f=sn(e,"transitionend").pipe(Mt(u),Ue(({target:m})=>m===e)),g=Ou(d+O9).pipe(Mt(u));op(g,f,c).pipe(Mt(u)).subscribe(()=>{Ty.delete(e),n.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};var jL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=ie({})}}return n})();var HL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=ie({})}}return n})();var UL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=ie({})}}return n})(),$L=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=ie({})}}return n})();var Iy=(n,e)=>e?e.some(t=>t.contains(n)):!1,OL=(n,e)=>!e||N9(n,e)!=null,P9=(()=>{let n=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,e=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(n()||e()):!1})(),k9=n=>P9?()=>setTimeout(()=>n(),100):n;function F9(n,e,t,r,i,o,s,a){t&&n.runOutsideAngular(k9(()=>{let c=g=>{let m=g.target;return g.button===2||Iy(m,s)?!1:t==="inside"?Iy(m,o)&&OL(m,a):t==="outside"?!Iy(m,o):OL(m,a)||!Iy(m,o)},u=sn(e,"keydown").pipe(Mt(i),Ue(g=>g.key==="Escape"),dt(g=>g.preventDefault())),d=sn(e,"mousedown").pipe(Y(c),Mt(i)),f=sn(e,"mouseup").pipe(Fu(d),Ue(([g,m])=>m),Fv(0),Mt(i));op([u.pipe(Y(g=>0)),f.pipe(Y(g=>1))]).subscribe(g=>n.run(()=>r(g)))}))}var L9=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function GL(n){let e=Array.from(n.querySelectorAll(L9)).filter(t=>t.tabIndex!==-1);return[e[0],e[e.length-1]]}var V9=(n,e,t,r=!1)=>{n.runOutsideAngular(()=>{let i=sn(e,"focusin").pipe(Mt(t),Y(o=>o.target));sn(e,"keydown").pipe(Mt(t),Ue(o=>o.key==="Tab"),Fu(i)).subscribe(([o,s])=>{let[a,c]=GL(e);(s===a||s===e)&&o.shiftKey&&(c.focus(),o.preventDefault()),s===c&&!o.shiftKey&&(a.focus(),o.preventDefault())}),r&&sn(e,"click").pipe(Mt(t),Fu(i),Y(o=>o[1])).subscribe(o=>o.focus())})},B9=(()=>{class n{constructor(){this._element=R(Ge).documentElement}isRTL(){return(this._element.getAttribute("dir")||"").toLowerCase()==="rtl"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),j9=/\s+/,H9=/  +/gi,U9={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]};function $9(n,e){let[t,r]=U9[n];return e&&r||t}var G9=/^left/,z9=/^right/,q9=/^start/,W9=/^end/;function K9(n,e){let[t,r]=e.split("-"),i=t.replace(G9,"start").replace(z9,"end"),o=[i];if(r){let s=r;(t==="left"||t==="right")&&(s=s.replace(q9,"top").replace(W9,"bottom")),o.push(`${i}-${s}`)}return n&&(o=o.map(s=>`${n}-${s}`)),o.join(" ")}function PL({placement:n,baseClass:e},t){let r=Array.isArray(n)?n:n.split(j9),i=["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"],o=r.findIndex(u=>u==="auto");o>=0&&i.forEach(function(u){r.find(d=>d.search("^"+u)!==-1)==null&&r.splice(o++,1,u)});let s=r.map(u=>$9(u,t.isRTL()));return{placement:s.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!e,phase:"write",fn({state:u}){let d=new RegExp(e+"(-[a-z]+)*","gi"),f=u.elements.popper,g=u.placement,m=f.className;m=m.replace(d,""),m+=` ${K9(e,g)}`,m=m.trim().replace(H9," "),f.className=m}},o1,c1,e1,{enabled:!0,name:"flip",options:{fallbackPlacements:s}}]}}function kL(n){return n}function Q9(){let n=R(B9),e=null;return{createPopper(t){if(!e){let i=(t.updatePopperOptions||kL)(PL(t,n));e=g1(t.hostElement,t.targetElement,i)}},update(){e&&e.update()},setOptions(t){if(e){let i=(t.updatePopperOptions||kL)(PL(t,n));e.setOptions(i)}},destroy(){e&&(e.destroy(),e=null)}}}function Y9(n){return e=>(e.modifiers.push(s1,{name:"offset",options:{offset:()=>n}}),e)}var Vue=new Date(1882,10,12),Bue=new Date(2174,10,25);var jue=1e3*60*60*24;var E1=1080,Z9=24*E1,J9=12*E1+793,Hue=29*Z9+J9,Uue=11*E1+204;var zL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=ie({})}}return n})();var qL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=ie({})}}return n})(),X9=(()=>{class n{constructor(){this._ngbConfig=R(VL),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0,this.role="dialog"}get animation(){return this._animation??this._ngbConfig.animation}set animation(t){this._animation=t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ji=class{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}},_1=class{constructor(e){this._componentType=e,this._windowRef=null,this._contentRef=null,this._document=R(Ge),this._applicationRef=R(pr),this._injector=R(Oe),this._viewContainerRef=R(Kr),this._ngZone=R(fe)}open(e,t,r=!1){this._windowRef||(this._contentRef=this._getContentRef(e,t),this._windowRef=this._viewContainerRef.createComponent(this._componentType,{injector:this._injector,projectableNodes:this._contentRef.nodes}));let{nativeElement:i}=this._windowRef.location,o=new we;Fs({mixedReadWrite:()=>{o.next(),o.complete()}},{injector:this._injector});let s=o.pipe(He(()=>Zi(this._ngZone,i,({classList:a})=>a.add("show"),{animation:r,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:s}}close(e=!1){return this._windowRef?Zi(this._ngZone,this._windowRef.location.nativeElement,({classList:t})=>t.remove("show"),{animation:e,runningTransition:"stop"}).pipe(dt(()=>{this._windowRef?.destroy(),this._contentRef?.viewRef?.destroy(),this._windowRef=null,this._contentRef=null})):Q(void 0)}_getContentRef(e,t){if(e)if(e instanceof $r){let r=e.createEmbeddedView(t);return this._applicationRef.attachView(r),new Ji([r.rootNodes],r)}else return new Ji([[this._document.createTextNode(`${e}`)]]);else return new Ji([])}},e6=(()=>{class n{constructor(){this._document=R(Ge)}hide(){let t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,i=r.style,{overflow:o,paddingRight:s}=i;if(t>0){let a=parseFloat(window.getComputedStyle(r).paddingRight);i.paddingRight=`${a+t}px`}return i.overflow="hidden",()=>{t>0&&(i.paddingRight=s),i.overflow=o}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),t6=(()=>{class n{constructor(){this._nativeElement=R(Zt).nativeElement,this._zone=R(fe),this._injector=R(Oe)}ngOnInit(){Fs({mixedReadWrite:()=>Zi(this._zone,this._nativeElement,(t,r)=>{r&&BL(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})},{injector:this._injector})}hide(){return Zi(this._zone,this._nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=wt({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(r,i){r&2&&(_o("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),Cn("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(r,i){},encapsulation:2})}}return n})(),Sy=class{update(e){}close(e){}dismiss(e){}},n6=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","role","scrollable","size","windowClass","modalDialogClass"],r6=["animation","backdropClass"],y1=class{_applyWindowOptions(e,t){n6.forEach(r=>{m1(t[r])&&(e[r]=t[r])})}_applyBackdropOptions(e,t){r6.forEach(r=>{m1(t[r])&&(e[r]=t[r])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Mt(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Mt(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,t,r,i){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new we,this._dismissed=new we,this._hidden=new we,e.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,s)=>{this._resolve=o,this._reject=s}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(e);else{let t=this._beforeDismiss();M9(t)?t.then(r=>{r!==!1&&this._dismiss(e)},()=>{}):t!==!1&&this._dismiss(e)}}_removeModalElements(){let e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Q(void 0);e.subscribe(()=>{let{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef?.viewRef?.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Pu(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},v1=function(n){return n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",n}(v1||{}),i6=(()=>{class n{constructor(){this._document=R(Ge),this._elRef=R(Zt),this._zone=R(fe),this._injector=R(Oe),this._closed$=new we,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.role="dialog",this.dismissEvent=new Pe,this.shown=new we,this.hidden=new we}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":w1(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,Fs({mixedReadWrite:()=>this._show()},{injector:this._injector})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:t}=this._elRef,r={animation:this.animation,runningTransition:"stop"},i=Zi(this._zone,t,()=>t.classList.remove("show"),r),o=Zi(this._zone,this._dialogEl.nativeElement,()=>{},r),s=Pu(i,o);return s.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),s}_show(){let t={animation:this.animation,runningTransition:"continue"},r=Zi(this._zone,this._elRef.nativeElement,(o,s)=>{s&&BL(o),o.classList.add("show")},t),i=Zi(this._zone,this._dialogEl.nativeElement,()=>{},t);Pu(r,i).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{sn(t,"keydown").pipe(Mt(this._closed$),Ue(i=>i.key==="Escape")).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(v1.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let r=!1;sn(this._dialogEl.nativeElement,"mousedown").pipe(Mt(this._closed$),dt(()=>r=!1),Re(()=>sn(t,"mouseup").pipe(Mt(this._closed$),vt(1))),Ue(({target:i})=>t===i)).subscribe(()=>{r=!0}),sn(t,"click").pipe(Mt(this._closed$)).subscribe(({target:i})=>{t===i&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!r&&this._zone.run(()=>this.dismiss(v1.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){let r=t.querySelector("[ngbAutofocus]"),i=GL(t)[0];(r||i||t).focus()}}_restoreFocus(){let t=this._document.body,r=this._elWithFocus,i;r&&r.focus&&t.contains(r)?i=r:i=t,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&Zi(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=wt({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(r,i){if(r&1&&yN(S9,7),r&2){let o;Gw(o=zw())&&(i._dialogEl=o.first)}},hostAttrs:["tabindex","-1"],hostVars:8,hostBindings:function(r,i){r&2&&(od("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy)("role",i.role),_o("modal d-block"+(i.windowClass?" "+i.windowClass:"")),Cn("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",role:"role",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:FL,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(r,i){r&1&&(Uw(),se(0,"div",1,0)(2,"div",2),$w(3),ce()()),r&2&&_o("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2})}}return n})(),o6=(()=>{class n{constructor(){this._applicationRef=R(pr),this._injector=R(Oe),this._environmentInjector=R(qe),this._document=R(Ge),this._scrollBar=R(e6),this._activeWindowCmptHasChanged=new we,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new Pe;let t=R(fe);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let r=this._windowCmpts[this._windowCmpts.length-1];V9(t,r.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(r.location.nativeElement)}})}_restoreScrollBar(){let t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,r,i){let o=i.container instanceof HTMLElement?i.container:m1(i.container)?this._document.querySelector(i.container):this._document.body;if(!o)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let s=new Sy;t=i.injector||t;let a=t.get(qe,null)||this._environmentInjector,c=this._getContentRef(t,a,r,s,i),u=i.backdrop!==!1?this._attachBackdrop(o):void 0,d=this._attachWindowComponent(o,c.nodes),f=new y1(d,c,u,i.beforeDismiss);return this._registerModalRef(f),this._registerWindowCmpt(d),f.hidden.pipe(vt(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),s.close=g=>{f.close(g)},s.dismiss=g=>{f.dismiss(g)},s.update=g=>{f.update(g)},f.update(i),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),u&&u.instance&&u.changeDetectorRef.detectChanges(),d.changeDetectorRef.detectChanges(),f}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(r=>r.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let r=_g(t6,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}_attachWindowComponent(t,r){let i=_g(i6,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_getContentRef(t,r,i,o,s){return i?i instanceof $r?this._createFromTemplateRef(i,o):w1(i)?this._createFromString(i):this._createFromComponent(t,r,i,o,s):new Ji([])}_createFromTemplateRef(t,r){let i={$implicit:r,close(s){r.close(s)},dismiss(s){r.dismiss(s)}},o=t.createEmbeddedView(i);return this._applicationRef.attachView(o),new Ji([o.rootNodes],o)}_createFromString(t){let r=this._document.createTextNode(`${t}`);return new Ji([[r]])}_createFromComponent(t,r,i,o,s){let a=Oe.create({providers:[{provide:Sy,useValue:o}],parent:t}),c=_g(i,{environmentInjector:r,elementInjector:a}),u=c.location.nativeElement;return s.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new Ji([[u]],c.hostView,c)}_setAriaHidden(t){let r=t.parentElement;r&&t!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==t&&i.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,r)=>{t?r.setAttribute("aria-hidden",t):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){let r=()=>{let i=this._modalRefs.indexOf(t);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(r,r)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{let r=this._windowCmpts.indexOf(t);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),s6=(()=>{class n{constructor(){this._injector=R(Oe),this._modalStack=R(o6),this._config=R(X9)}open(t,r={}){let i=H(he(H({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._injector,t,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),WL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=ie({providers:[s6]})}}return n})();var KL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=ie({})}}return n})();var QL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=ie({})}}return n})(),a6={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]};function c6(n){let e=(n||"").trim();if(e.length===0)return[];let t=e.split(/\s+/).map(i=>i.split(":")).map(i=>a6[i[0]]||i),r=t.filter(i=>i.includes("manual"));if(r.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(r.length===1&&t.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return r.length?[]:t}function l6(n,e,t,r,i,o=0,s=0){let a=c6(e);if(a.length===0)return()=>{};let c=new Set,u=[],d;function f(m,v){n.addEventListener(m,v),u.push(()=>n.removeEventListener(m,v))}function g(m,v){clearTimeout(d),v>0?d=setTimeout(m,v):m()}for(let[m,v]of a)v?(f(m,()=>{c.add(m),g(()=>c.size>0&&r(),o)}),f(v,()=>{c.delete(m),g(()=>c.size===0&&i(),s)})):f(m,()=>t()?g(i,s):g(r,o));return()=>u.forEach(m=>m())}var YL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=ie({})}}return n})();var ZL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=ie({})}}return n})();var JL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=ie({})}}return n})();var XL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=ie({})}}return n})();var eV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=ie({})}}return n})();var tV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=ie({})}}return n})(),u6=(()=>{class n{constructor(){this._ngbConfig=R(VL),this.autoClose=!0,this.placement="auto",this.popperOptions=t=>t,this.triggers="hover focus",this.disableTooltip=!1,this.openDelay=0,this.closeDelay=0}get animation(){return this._animation??this._ngbConfig.animation}set animation(t){this._animation=t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),d6=0,h6=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=wt({type:n,selectors:[["ngb-tooltip-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(r,i){r&2&&(Hw("id",i.id),_o("tooltip"+(i.tooltipClass?" "+i.tooltipClass:"")),Cn("fade",i.animation))},inputs:{animation:"animation",id:"id",tooltipClass:"tooltipClass"},ngContentSelectors:FL,decls:3,vars:0,consts:[["data-popper-arrow","",1,"tooltip-arrow"],[1,"tooltip-inner"]],template:function(r,i){r&1&&(Uw(),Ze(0,"div",0),se(1,"div",1),$w(2),ce())},styles:[`ngb-tooltip-window{pointer-events:none;position:absolute}ngb-tooltip-window .tooltip-inner{pointer-events:auto}ngb-tooltip-window.bs-tooltip-top,ngb-tooltip-window.bs-tooltip-bottom{padding-left:0;padding-right:0}ngb-tooltip-window.bs-tooltip-start,ngb-tooltip-window.bs-tooltip-end{padding-top:0;padding-bottom:0}
`],encapsulation:2,changeDetection:0})}}return n})(),nV=(()=>{class n{constructor(){this._config=R(u6),this.animation=this._config.animation,this.autoClose=this._config.autoClose,this.placement=this._config.placement,this.popperOptions=this._config.popperOptions,this.triggers=this._config.triggers,this.container=this._config.container,this.disableTooltip=this._config.disableTooltip,this.tooltipClass=this._config.tooltipClass,this.openDelay=this._config.openDelay,this.closeDelay=this._config.closeDelay,this.shown=new Pe,this.hidden=new Pe,this._nativeElement=R(Zt).nativeElement,this._ngZone=R(fe),this._document=R(Ge),this._changeDetector=R(gr),this._injector=R(Oe),this._ngbTooltipWindowId=`ngb-tooltip-${d6++}`,this._popupService=new _1(h6),this._windowRef=null,this._positioning=Q9()}set ngbTooltip(t){this._ngbTooltip=t,!t&&this._windowRef&&this.close()}get ngbTooltip(){return this._ngbTooltip}open(t){if(!this._windowRef&&this._ngbTooltip&&!this.disableTooltip){let{windowRef:r,transition$:i}=this._popupService.open(this._ngbTooltip,t??this.tooltipContext,this.animation);this._windowRef=r,this._windowRef.setInput("animation",this.animation),this._windowRef.setInput("tooltipClass",this.tooltipClass),this._windowRef.setInput("id",this._ngbTooltipWindowId),this._getPositionTargetElement().setAttribute("aria-describedby",this._ngbTooltipWindowId),this.container==="body"&&this._document.body.appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._getPositionTargetElement(),targetElement:this._windowRef.location.nativeElement,placement:this.placement,baseClass:"bs-tooltip",updatePopperOptions:o=>this.popperOptions(Y9([0,6])(o))}),Promise.resolve().then(()=>{this._positioning.update()}),this._afterRenderRef=yw({mixedReadWrite:()=>{this._positioning.update()}},{injector:this._injector})}),F9(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement],[this._nativeElement]),i.subscribe(()=>this.shown.emit())}}close(t=this.animation){this._windowRef!=null&&(this._getPositionTargetElement().removeAttribute("aria-describedby"),this._popupService.close(t).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this._afterRenderRef?.destroy(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return this._windowRef!=null}ngOnInit(){this._unregisterListenersFn=l6(this._nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({tooltipClass:t}){t&&this.isOpen()&&this._windowRef.setInput("tooltipClass",t.currentValue)}ngOnDestroy(){this.close(!1),this._unregisterListenersFn?.()}_getPositionTargetElement(){return(w1(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget)||this._nativeElement}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Jt({type:n,selectors:[["","ngbTooltip",""]],inputs:{animation:"animation",autoClose:"autoClose",placement:"placement",popperOptions:"popperOptions",triggers:"triggers",positionTarget:"positionTarget",container:"container",disableTooltip:"disableTooltip",tooltipClass:"tooltipClass",tooltipContext:"tooltipContext",openDelay:"openDelay",closeDelay:"closeDelay",ngbTooltip:"ngbTooltip"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbTooltip"],features:[Wn]})}}return n})(),rV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=ie({})}}return n})();var $ue=new j("live announcer delay",{providedIn:"root",factory:()=>100});var iV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=ie({})}}return n})();var oV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=ie({})}}return n})(),f6=[jL,HL,UL,$L,zL,qL,WL,KL,oV,QL,YL,ZL,JL,XL,eV,tV,rV,iV],b1=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=ie({imports:[f6,jL,HL,UL,$L,zL,qL,WL,KL,oV,QL,YL,ZL,JL,XL,eV,tV,rV,iV]})}}return n})();function g6(n,e){if(n&1&&(Kn(0),Ze(1,"img",5),kn(2,"translate"),kn(3,"translate"),Qn()),n&2){let t=e.$implicit,r=We(2);de(),sd("ngbTooltip",Fn(2,3,t.label)),ke("src",r.badgeImg(t),Ls)("alt",Fn(3,5,t.label))}}function m6(n,e){if(n&1&&(se(0,"div",1)(1,"p",2),Ze(2,"img",3),Le(3),ce(),ht(4,g6,4,7,"ng-container",4),ce()),n&2){let t=We();de(2),ke("src",t.user.profilePic,Ls),de(),js(" ",t.user.displayName," "),de(),ke("ngForOf",t.badgesInfo)}}var Ay=class n{user={badges:[]};badgesInfo=[];processedBadges=[];ngOnInit(){}ngOnChanges(e){}badgeImg(e){if(!this.user)return;let t=this.user.badges.find(i=>i.name==e.name);return`${`assets/images/${e.path}`}${t?e.icon:e.not_collected}`}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=wt({type:n,selectors:[["app-badges-user-card"]],inputs:{user:"user",badgesInfo:"badgesInfo"},standalone:!1,features:[Wn],decls:1,vars:1,consts:[["class","nes-container is-rounded with-title",4,"ngIf"],[1,"nes-container","is-rounded","with-title"],[1,"title"],["width","50",2,"image-rendering","pixelated","border-radius","100%","border","1px solid #ddd",3,"src"],[4,"ngFor","ngForOf"],["placement","top","width","50",3,"src","ngbTooltip","alt"]],template:function(t,r){t&1&&ht(0,m6,5,3,"div",0),t&2&&ke("ngIf",r.user)},dependencies:[Xn,yr,nV,So],encapsulation:2})};function y6(n,e){if(n&1&&(se(0,"div",5),Ze(1,"app-badges-user-card",6),ce()),n&2){let t=e.$implicit,r=We(2);de(),ke("user",t)("badgesInfo",r.badgesInfo)}}function v6(n,e){if(n&1&&(Kn(0),ht(1,y6,2,2,"div",4),Qn()),n&2){let t=We();de(),ke("ngForOf",t.users)}}function w6(n,e){if(n&1){let t=Ni();se(0,"div",7)(1,"app-loader",8),ld("loadingChange",function(i){Ai(t);let o=We();return mg(o.loading,i)||(o.loading=i),Mi(i)}),ce()()}if(n&2){let t=We();de(),cd("loading",t.loading)}}var My=class n{constructor(e){this.badgeSvc=e}loading=!1;users=[];badgesInfo=[];usersSub=null;ngOnInit(){return N(this,null,function*(){this.loading=!0,this.badgesInfo=yield this.badgeSvc.getBadgesInfo(),this.usersSub=this.badgeSvc.getUsers().subscribe(e=>this.users=e)})}ngOnDestroy(){this.loading=!1,this.usersSub&&this.usersSub.unsubscribe()}static \u0275fac=function(t){return new(t||n)(pe(dy))};static \u0275cmp=wt({type:n,selectors:[["app-badges-view"]],standalone:!1,decls:5,vars:2,consts:[["loadingContent",""],[1,"container-fluid"],[1,"row"],[4,"ngIf","ngIfElse"],["class","col-3 mb-3",4,"ngFor","ngForOf"],[1,"col-3","mb-3"],[3,"user","badgesInfo"],[1,"col-12"],[3,"loadingChange","loading"]],template:function(t,r){if(t&1&&(se(0,"div",1)(1,"div",2),ht(2,v6,2,1,"ng-container",3)(3,w6,2,1,"ng-template",null,0,dd),ce()()),t&2){let i=ad(4);de(2),ke("ngIf",!r.loading)("ngIfElse",i)}},dependencies:[Xn,yr,jc,Ay],encapsulation:2})};var E6=[{path:"leaderboard",component:mm},{path:"badges",component:My},{path:"**",redirectTo:""}],Ny=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=oe({type:n});static \u0275inj=ie({imports:[Qs.forRoot(E6),Qs]})};var Wt=[];for(let n=0;n<256;++n)Wt.push((n+256).toString(16).slice(1));function sV(n,e=0){return(Wt[n[e+0]]+Wt[n[e+1]]+Wt[n[e+2]]+Wt[n[e+3]]+"-"+Wt[n[e+4]]+Wt[n[e+5]]+"-"+Wt[n[e+6]]+Wt[n[e+7]]+"-"+Wt[n[e+8]]+Wt[n[e+9]]+"-"+Wt[n[e+10]]+Wt[n[e+11]]+Wt[n[e+12]]+Wt[n[e+13]]+Wt[n[e+14]]+Wt[n[e+15]]).toLowerCase()}var D1,b6=new Uint8Array(16);function C1(){if(!D1){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");D1=crypto.getRandomValues.bind(crypto)}return D1(b6)}var D6=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),T1={randomUUID:D6};function C6(n,e,t){if(T1.randomUUID&&!e&&!n)return T1.randomUUID();n=n||{};let r=n.random??n.rng?.()??C1();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){if(t=t||0,t<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[t+i]=r[i];return e}return sV(r)}var I1=C6;var Ry=class n{constructor(e,t){this.translator=e;this.fileReader=t}setApplicationDefaultLanguage(){return N(this,null,function*(){let{translator:e}=this,t=e.getBrowserLang(),r=(yield this.fileReader.getFile("languages.json"))?.map(a=>a.code)||["en"],i=r.join("|"),o=new RegExp(i),s=t?.match(o)?t:"en";r.length===1&&(s=r[0]),e.addLangs(r),e.use(s)})}static \u0275fac=function(t){return new(t||n)(k(Ys),k(Xo))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};function I6(n,e){if(n&1&&Ze(0,"img",11),n&2){let t=We();gg("src","/assets/images/",t.selectedLang.code,".png",Ls)}}function S6(n,e){if(n&1){let t=Ni();se(0,"li")(1,"a",12),Qr("click",function(){let i=Ai(t).$implicit,o=We();return Mi(o.selectLang(i))}),Le(2),kn(3,"translate"),ce()()}if(n&2){let t=e.$implicit,r=We();de(),Cn("is-disabled",(r.selectedLang==null?null:r.selectedLang.code)==t.code),de(),Zn(Fn(3,3,t.label))}}var xy=class n{constructor(e,t,r){this.trasnlatorSvc=e;this.jsonReaderService=t;this.appLanguageService=r}title="HEADER.TITLE";languages=null;selectedLang=null;ngOnInit(){return N(this,null,function*(){yield this.appLanguageService.setApplicationDefaultLanguage(),yield this.setStartingLang()})}selectLang(e){this.selectedLang=e,this.trasnlatorSvc.use(e.code)}setStartingLang(){return N(this,null,function*(){this.languages=yield this.jsonReaderService.getFile("languages.json"),this.selectedLang=this.languages?.find(e=>e.code===this.trasnlatorSvc.currentLang)||null})}static \u0275fac=function(t){return new(t||n)(pe(Ys),pe(Xo),pe(Ry))};static \u0275cmp=wt({type:n,selectors:[["app-header"]],standalone:!1,decls:14,vars:8,consts:[["id","header",1,"navbar","navbar-expand-lg"],[1,"container-fluid"],[1,"nes-container","with-title","w-100"],["href","https://twitch.tv/kilzakplays","target","_blank",1,"navbar-brand","p-0","m-0"],["src","/assets/images/logo.png",1,"logo",3,"alt"],["id","header-title",1,"me-auto","w-100","text-center"],["id","lang-bar",1,"dropdown"],["href","#","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["alt","",3,"src",4,"ngIf"],[1,"dropdown-menu"],[4,"ngFor","ngForOf"],["alt","",3,"src"],[1,"dropdown-item","nes-text",3,"click"]],template:function(t,r){t&1&&(se(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),Ze(4,"img",4),kn(5,"translate"),ce(),se(6,"div",5),Le(7),kn(8,"translate"),ce(),se(9,"div",6)(10,"a",7),ht(11,I6,1,2,"img",8),ce(),se(12,"ul",9),ht(13,S6,4,5,"li",10),ce()()()()()),t&2&&(de(4),sd("alt",Fn(5,4,r.title)),de(3),js(" ",Fn(8,6,r.title)," "),de(4),ke("ngIf",r.selectedLang),de(2),ke("ngForOf",r.languages))},dependencies:[Xn,yr,So],styles:["#header[_ngcontent-%COMP%]   #header-title[_ngcontent-%COMP%]{margin-left:-120px}#header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{cursor:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAzElEQVRYR+2X0Q6AIAhF5f8/2jYXZkwEjNSVvVUjDpcrGgT7FUkI2D9xRfQETwNIiWO85wfINfQUEyxBG2ArsLwC0jioGt5zFcwF4OYDPi/mBYKm4t0U8ATgRm3ThFoAqkhNgWkA0jJLvaOVSs7j3qMnSgXWBMiWPXe94QqMBMBc1VZIvaTu5u5pQewq0EqNZvIEMCmxAawK0DNkay9QmfFNAJUXfgGgUkLaE7j/h8fnASkxHTz0DGIBMCnBeeM7AArpUd3mz2x3C7wADglA8BcWMZhZAAAAAElFTkSuQmCC) 14 0,pointer;width:120px}#header[_ngcontent-%COMP%]   .nes-container[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-content:center;align-items:center}#header[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]{text-decoration:none}#header[_ngcontent-%COMP%]   #lang-bar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;cursor:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAzElEQVRYR+2X0Q6AIAhF5f8/2jYXZkwEjNSVvVUjDpcrGgT7FUkI2D9xRfQETwNIiWO85wfINfQUEyxBG2ArsLwC0jioGt5zFcwF4OYDPi/mBYKm4t0U8ATgRm3ThFoAqkhNgWkA0jJLvaOVSs7j3qMnSgXWBMiWPXe94QqMBMBc1VZIvaTu5u5pQewq0EqNZvIEMCmxAawK0DNkay9QmfFNAJUXfgGgUkLaE7j/h8fnASkxHTz0DGIBMCnBeeM7AArpUd3mz2x3C7wADglA8BcWMZhZAAAAAElFTkSuQmCC) 14 0,pointer;image-rendering:pixelated}#header[_ngcontent-%COMP%]   #lang-bar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{right:0;left:auto}#header[_ngcontent-%COMP%]   #lang-bar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:active{background-color:transparent}#header[_ngcontent-%COMP%]   #lang-bar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background-color:var(--kz-primary-color)}#header[_ngcontent-%COMP%]   #lang-bar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item.is-disabled[_ngcontent-%COMP%]{color:var(--kz-disabled-color);pointer-events:none}"]})};function M6(n,e){if(n&1&&(Kn(0),Ze(1,"a",7),Qn()),n&2){let t=e.$implicit,r=e.first;de(),pg("nes-icon ",t.icon," is-medium"),Cn("ms-2",!r),ke("title",t.label)("href",t.url,Ls)}}var Oy=class n{trademark="FOOTER.TRADEMARK";socials=[{label:"@KilzakPlays",url:"https://instagram.com/kilzakplays",icon:"instagram"},{label:"@KilzakPlays",url:"https://twitch.tv/kilzakplays",icon:"twitch"},{label:"@KilzakPlays",url:"https://www.youtube.com/@kilzakplays5780",icon:"youtube"},{label:"@Arquivo KilzakPlays",url:"https://www.youtube.com/@arquivokilzakplays7140",icon:"youtube"}];openDialog(e){let t=document.getElementById(e);t&&t.showModal()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=wt({type:n,selectors:[["app-footer"]],standalone:!1,decls:8,vars:1,consts:[[1,"container-fluid"],[1,"row"],[1,"col"],[1,"nes-container","with-title","mt-2","d-flex","align-items-center"],[1,"icon-list"],[4,"ngFor","ngForOf"],[1,"ms-auto"],["target","_blank",3,"title","href"]],template:function(t,r){t&1&&(se(0,"main",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"section",4),ht(5,M6,2,7,"ng-container",5),ce(),se(6,"section",6),Le(7," KilzakPlays\u2122 "),ce()()()()()),t&2&&(de(5),ke("ngForOf",r.socials))},dependencies:[Xn],encapsulation:2})};function R6(n,e){if(n&1){let t=Ni();se(0,"main",11)(1,"div",2)(2,"div",3)(3,"div",4)(4,"p",5),Le(5,"TEMP"),ce(),se(6,"P"),Le(7),ce(),se(8,"button",12),Qr("click",function(){Ai(t);let i=We();return Mi(i.generate())}),Le(9,"Primary"),ce()()()()()}if(n&2){let t=We();de(7),Zn(t.uuid)}}var Py=class n{constructor(e){this.router=e}title="channel-hall-of-fame";menuLabels={leaderboard:"HEADER.MENU.LEADERBOARD",badges:"HEADER.MENU.BADGES"};routeMenuFormControl=new _L("badges");uuid="";ngOnInit(){this.setRouteMenuControl()}generate(){this.uuid=I1()}setRouteMenuControl(){this.routeMenuFormControl.valueChanges.subscribe(e=>{this.router.navigateByUrl(e)})}static \u0275fac=function(t){return new(t||n)(pe(ri))};static \u0275cmp=wt({type:n,selectors:[["app-root"]],standalone:!1,decls:20,vars:13,consts:[["class","container-fluid mb-3",4,"ngIf"],[1,"container-fluid"],[1,"row"],[1,"col"],[1,"nes-container","with-title"],[1,"title"],[1,"mb-0","me-5","link"],["type","radio","name","route","value","badges",1,"nes-radio",3,"formControl"],[1,"mb-0","link"],["type","radio","name","route","value","leaderboard",1,"nes-radio",3,"formControl"],["id","content",1,"container-fluid"],[1,"container-fluid","mb-3"],["type","button",1,"nes-btn","is-primary",3,"click"]],template:function(t,r){t&1&&(Ze(0,"app-header"),ht(1,R6,10,1,"main",0),se(2,"main",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"label",6),Ze(8,"input",7),se(9,"span"),Le(10),kn(11,"translate"),ce()(),se(12,"label",8),Ze(13,"input",9),se(14,"span"),Le(15),kn(16,"translate"),ce()()(),se(17,"div",10),Ze(18,"router-outlet"),ce()()()()(),Ze(19,"app-footer")),t&2&&(de(),ke("ngIf",!1),de(6),Cn("active",r.routeMenuFormControl.value=="badges"),de(),ke("formControl",r.routeMenuFormControl),de(2),Zn(Fn(11,9,r.menuLabels.badges)),de(2),Cn("active",r.routeMenuFormControl.value=="leaderboard"),de(),ke("formControl",r.routeMenuFormControl),de(2),Zn(Fn(16,11,r.menuLabels.leaderboard)))},dependencies:[yr,Gd,my,QT,gL,YT,xy,Oy,So],styles:[".link.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{animation:blink 1s infinite steps(1)!important}"]})};var Pa=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=oe({type:n});static \u0275inj=ie({imports:[Yr,Zs,b1,b1]})};var Jl=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=oe({type:n});static \u0275inj=ie({providers:[yE(vE()),tE],imports:[Yr,Zs,Qs,ZT,Pa,Yr,Zs,Qs,ZT,Pa]})};var aV=(()=>{class n{http;prefix;suffix;constructor(t,r="/assets/i18n/",i=".json"){this.http=t,this.prefix=r,this.suffix=i}getTranslation(t){return this.http.get(`${this.prefix}${t}${this.suffix}`)}static \u0275fac=function(r){return new(r||n)(k(Jr),k(String),k(String))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();function cV(n){return new aV(n,"./assets/i18n/",".json")}var ky=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=oe({type:n});static \u0275inj=ie({imports:[Yr,Jl]})};var Fy=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=oe({type:n,bootstrap:[Py]});static \u0275inj=ie({imports:[Vx.initializeApp(ly.firebase),YF,ky,hE,Ny,Jl,Pa,Zs.forRoot({loader:{provide:Io,useFactory:cV,deps:[Jr]}})]})};dE().bootstrapModule(Fy,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
