"use strict";(self.webpackChunkchannel_hall_of_fame=self.webpackChunkchannel_hall_of_fame||[]).push([[792],{41:(_o,Tr,gt)=>{gt.d(Tr,{$b:()=>st,Ey:()=>Xt,He:()=>Qn,Vy:()=>He});const T=[];var st=function(ge){return ge[ge.DEBUG=0]="DEBUG",ge[ge.VERBOSE=1]="VERBOSE",ge[ge.INFO=2]="INFO",ge[ge.WARN=3]="WARN",ge[ge.ERROR=4]="ERROR",ge[ge.SILENT=5]="SILENT",ge}(st||{});const Ce={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},ee=st.INFO,xn={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},Et=(ge,ye,...Be)=>{if(ye<ge.logLevel)return;const bt=(new Date).toISOString(),yt=xn[ye];if(!yt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ye})`);console[yt](`[${bt}]  ${ge.name}:`,...Be)};class He{constructor(ye){this.name=ye,this._logLevel=ee,this._logHandler=Et,this._userLogHandler=null,T.push(this)}get logLevel(){return this._logLevel}set logLevel(ye){if(!(ye in st))throw new TypeError(`Invalid value "${ye}" assigned to \`logLevel\``);this._logLevel=ye}setLogLevel(ye){this._logLevel="string"==typeof ye?Ce[ye]:ye}get logHandler(){return this._logHandler}set logHandler(ye){if("function"!=typeof ye)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ye}get userLogHandler(){return this._userLogHandler}set userLogHandler(ye){this._userLogHandler=ye}debug(...ye){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...ye),this._logHandler(this,st.DEBUG,...ye)}log(...ye){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...ye),this._logHandler(this,st.VERBOSE,...ye)}info(...ye){this._userLogHandler&&this._userLogHandler(this,st.INFO,...ye),this._logHandler(this,st.INFO,...ye)}warn(...ye){this._userLogHandler&&this._userLogHandler(this,st.WARN,...ye),this._logHandler(this,st.WARN,...ye)}error(...ye){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...ye),this._logHandler(this,st.ERROR,...ye)}}function Qn(ge){T.forEach(ye=>{ye.setLogLevel(ge)})}function Xt(ge,ye){for(const Be of T){let bt=null;ye&&ye.level&&(bt=Ce[ye.level]),Be.userLogHandler=null===ge?null:(yt,dr,...Ot)=>{const ce=Ot.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch{return null}}).filter(De=>De).join(" ");dr>=(bt??yt.logLevel)&&ge({level:st[dr].toLowerCase(),message:ce,args:Ot,type:yt.name})}}}},345:(_o,Tr,gt)=>{gt.d(Tr,{A:()=>dr});var T=gt(858),st=gt(362),Ce=gt(852),ee=gt(41);class xn{constructor(ce,De){this._delegate=ce,this.firebase=De,(0,Ce._addComponent)(ce,new st.uA("app-compat",()=>this,"PUBLIC")),this.container=ce.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ce){this._delegate.automaticDataCollectionEnabled=ce}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ce=>{this._delegate.checkDestroyed(),ce()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Ce.deleteApp)(this._delegate)))}_getService(ce,De=Ce._DEFAULT_ENTRY_NAME){var Pe;this._delegate.checkDestroyed();const Qe=this._delegate.container.getProvider(ce);return!Qe.isInitialized()&&"EXPLICIT"===(null===(Pe=Qe.getComponent())||void 0===Pe?void 0:Pe.instantiationMode)&&Qe.initialize(),Qe.getImmediate({identifier:De})}_removeServiceInstance(ce,De=Ce._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ce).clearInstance(De)}_addComponent(ce){(0,Ce._addComponent)(this._delegate,ce)}_addOrOverwriteComponent(ce){(0,Ce._addOrOverwriteComponent)(this._delegate,ce)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const He=new T.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ge=function Xt(){const Ot=function Qn(Ot){const ce={},De={__esModule:!0,initializeApp:function dt(je,Ht={}){const $t=Ce.initializeApp(je,Ht);if((0,T.gR)(ce,$t.name))return ce[$t.name];const he=new Ot($t,De);return ce[$t.name]=he,he},app:Qe,registerVersion:Ce.registerVersion,setLogLevel:Ce.setLogLevel,onLog:Ce.onLog,apps:null,SDK_VERSION:Ce.SDK_VERSION,INTERNAL:{registerComponent:function xt(je){const Ht=je.name,$t=Ht.replace("-compat","");if(Ce._registerComponent(je)&&"PUBLIC"===je.type){const he=(wn=Qe())=>{if("function"!=typeof wn[$t])throw He.create("invalid-app-argument",{appName:Ht});return wn[$t]()};void 0!==je.serviceProps&&(0,T.zw)(he,je.serviceProps),De[$t]=he,Ot.prototype[$t]=function(...wn){return this._getService.bind(this,Ht).apply(this,je.multipleInstances?wn:[])}}return"PUBLIC"===je.type?De[$t]:null},removeApp:function Pe(je){delete ce[je]},useAsService:function en(je,Ht){return"serverAuth"===Ht?null:Ht},modularAPIs:Ce}};function Qe(je){if(!(0,T.gR)(ce,je=je||Ce._DEFAULT_ENTRY_NAME))throw He.create("no-app",{appName:je});return ce[je]}return De.default=De,Object.defineProperty(De,"apps",{get:function Ye(){return Object.keys(ce).map(je=>ce[je])}}),Qe.App=Ot,De}(xn);return Ot.INTERNAL=Object.assign(Object.assign({},Ot.INTERNAL),{createFirebaseNamespace:Xt,extendNamespace:function ce(De){(0,T.zw)(Ot,De)},createSubscribe:T.tD,ErrorFactory:T.FA,deepExtend:T.zw}),Ot}(),ye=new ee.Vy("@firebase/app-compat");try{const Ot=(0,T.mS)();if(void 0!==Ot.firebase){ye.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const ce=Ot.firebase.SDK_VERSION;ce&&ce.indexOf("LITE")>=0&&ye.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const dr=ge;!function yt(Ot){(0,Ce.registerVersion)("@firebase/app-compat","0.3.1",Ot)}()},362:(_o,Tr,gt)=>{gt.d(Tr,{h1:()=>Qn,uA:()=>Ce});var T=gt(467),st=gt(858);class Ce{constructor(ge,ye,Be){this.name=ge,this.instanceFactory=ye,this.type=Be,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ge){return this.instantiationMode=ge,this}setMultipleInstances(ge){return this.multipleInstances=ge,this}setServiceProps(ge){return this.serviceProps=ge,this}setInstanceCreatedCallback(ge){return this.onInstanceCreated=ge,this}}const ee="[DEFAULT]";class xn{constructor(ge,ye){this.name=ge,this.container=ye,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ge){const ye=this.normalizeInstanceIdentifier(ge);if(!this.instancesDeferred.has(ye)){const Be=new st.cY;if(this.instancesDeferred.set(ye,Be),this.isInitialized(ye)||this.shouldAutoInitialize())try{const bt=this.getOrInitializeService({instanceIdentifier:ye});bt&&Be.resolve(bt)}catch{}}return this.instancesDeferred.get(ye).promise}getImmediate(ge){var ye;const Be=this.normalizeInstanceIdentifier(ge?.identifier),bt=null!==(ye=ge?.optional)&&void 0!==ye&&ye;if(!this.isInitialized(Be)&&!this.shouldAutoInitialize()){if(bt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Be})}catch(yt){if(bt)return null;throw yt}}getComponent(){return this.component}setComponent(ge){if(ge.name!==this.name)throw Error(`Mismatching Component ${ge.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ge,this.shouldAutoInitialize()){if(function He(Xt){return"EAGER"===Xt.instantiationMode}(ge))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[ye,Be]of this.instancesDeferred.entries()){const bt=this.normalizeInstanceIdentifier(ye);try{const yt=this.getOrInitializeService({instanceIdentifier:bt});Be.resolve(yt)}catch{}}}}clearInstance(ge=ee){this.instancesDeferred.delete(ge),this.instancesOptions.delete(ge),this.instances.delete(ge)}delete(){var ge=this;return(0,T.A)(function*(){const ye=Array.from(ge.instances.values());yield Promise.all([...ye.filter(Be=>"INTERNAL"in Be).map(Be=>Be.INTERNAL.delete()),...ye.filter(Be=>"_delete"in Be).map(Be=>Be._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ge=ee){return this.instances.has(ge)}getOptions(ge=ee){return this.instancesOptions.get(ge)||{}}initialize(ge={}){const{options:ye={}}=ge,Be=this.normalizeInstanceIdentifier(ge.instanceIdentifier);if(this.isInitialized(Be))throw Error(`${this.name}(${Be}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const bt=this.getOrInitializeService({instanceIdentifier:Be,options:ye});for(const[yt,dr]of this.instancesDeferred.entries())Be===this.normalizeInstanceIdentifier(yt)&&dr.resolve(bt);return bt}onInit(ge,ye){var Be;const bt=this.normalizeInstanceIdentifier(ye),yt=null!==(Be=this.onInitCallbacks.get(bt))&&void 0!==Be?Be:new Set;yt.add(ge),this.onInitCallbacks.set(bt,yt);const dr=this.instances.get(bt);return dr&&ge(dr,bt),()=>{yt.delete(ge)}}invokeOnInitCallbacks(ge,ye){const Be=this.onInitCallbacks.get(ye);if(Be)for(const bt of Be)try{bt(ge,ye)}catch{}}getOrInitializeService({instanceIdentifier:ge,options:ye={}}){let Be=this.instances.get(ge);if(!Be&&this.component&&(Be=this.component.instanceFactory(this.container,{instanceIdentifier:(Xt=ge,Xt===ee?void 0:Xt),options:ye}),this.instances.set(ge,Be),this.instancesOptions.set(ge,ye),this.invokeOnInitCallbacks(Be,ge),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ge,Be)}catch{}var Xt;return Be||null}normalizeInstanceIdentifier(ge=ee){return this.component?this.component.multipleInstances?ge:ee:ge}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Qn{constructor(ge){this.name=ge,this.providers=new Map}addComponent(ge){const ye=this.getProvider(ge.name);if(ye.isComponentSet())throw new Error(`Component ${ge.name} has already been registered with ${this.name}`);ye.setComponent(ge)}addOrOverwriteComponent(ge){this.getProvider(ge.name).isComponentSet()&&this.providers.delete(ge.name),this.addComponent(ge)}getProvider(ge){if(this.providers.has(ge))return this.providers.get(ge);const ye=new xn(ge,this);return this.providers.set(ge,ye),ye}getProviders(){return Array.from(this.providers.values())}}},467:(_o,Tr,gt)=>{function T(Ce,ee,xn,Et,He,Qn,Xt){try{var ge=Ce[Qn](Xt),ye=ge.value}catch(Be){return void xn(Be)}ge.done?ee(ye):Promise.resolve(ye).then(Et,He)}function st(Ce){return function(){var ee=this,xn=arguments;return new Promise(function(Et,He){var Qn=Ce.apply(ee,xn);function Xt(ye){T(Qn,Et,He,Xt,ge,"next",ye)}function ge(ye){T(Qn,Et,He,Xt,ge,"throw",ye)}Xt(void 0)})}}gt.d(Tr,{A:()=>st})},532:()=>{const yt=function(ce,...De){if(yt.translate){const Qe=yt.translate(ce,De);ce=Qe[0],De=Qe[1]}let Pe=Ot(ce[0],ce.raw[0]);for(let Qe=1;Qe<ce.length;Qe++)Pe+=De[Qe-1]+Ot(ce[Qe],ce.raw[Qe]);return Pe},dr=":";function Ot(ce,De){return De.charAt(0)===dr?ce.substring(function bt(ce,De){for(let Pe=1,Qe=1;Pe<ce.length;Pe++,Qe++)if("\\"===De[Qe])Qe++;else if(":"===ce[Pe])return Pe;throw new Error(`Unterminated $localize metadata block in "${De}".`)}(ce,De)+1):ce}globalThis.$localize=yt},635:(_o,Tr,gt)=>{function ee(Q,te){var ie={};for(var re in Q)Object.prototype.hasOwnProperty.call(Q,re)&&te.indexOf(re)<0&&(ie[re]=Q[re]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var le=0;for(re=Object.getOwnPropertySymbols(Q);le<re.length;le++)te.indexOf(re[le])<0&&Object.prototype.propertyIsEnumerable.call(Q,re[le])&&(ie[re[le]]=Q[re[le]])}return ie}function Be(Q,te,ie,re){return new(ie||(ie=Promise))(function(ue,Ge){function kt(rn){try{tt(re.next(rn))}catch(Jn){Ge(Jn)}}function kn(rn){try{tt(re.throw(rn))}catch(Jn){Ge(Jn)}}function tt(rn){rn.done?ue(rn.value):function le(ue){return ue instanceof ie?ue:new ie(function(Ge){Ge(ue)})}(rn.value).then(kt,kn)}tt((re=re.apply(Q,te||[])).next())})}function dt(Q){return this instanceof dt?(this.v=Q,this):new dt(Q)}function Ye(Q,te,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,re=ie.apply(Q,te||[]),ue=[];return le=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),kt("next"),kt("throw"),kt("return",function Ge(cn){return function(hr){return Promise.resolve(hr).then(cn,Jn)}}),le[Symbol.asyncIterator]=function(){return this},le;function kt(cn,hr){re[cn]&&(le[cn]=function(Hn){return new Promise(function(Zn,ei){ue.push([cn,Hn,Zn,ei])>1||kn(cn,Hn)})},hr&&(le[cn]=hr(le[cn])))}function kn(cn,hr){try{!function tt(cn){cn.value instanceof dt?Promise.resolve(cn.value.v).then(rn,Jn):di(ue[0][2],cn)}(re[cn](hr))}catch(Hn){di(ue[0][3],Hn)}}function rn(cn){kn("next",cn)}function Jn(cn){kn("throw",cn)}function di(cn,hr){cn(hr),ue.shift(),ue.length&&kn(ue[0][0],ue[0][1])}}function en(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,te=Q[Symbol.asyncIterator];return te?te.call(Q):(Q=function Ot(Q){var te="function"==typeof Symbol&&Symbol.iterator,ie=te&&Q[te],re=0;if(ie)return ie.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&re>=Q.length&&(Q=void 0),{value:Q&&Q[re++],done:!Q}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),ie={},re("next"),re("throw"),re("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function re(ue){ie[ue]=Q[ue]&&function(Ge){return new Promise(function(kt,kn){!function le(ue,Ge,kt,kn){Promise.resolve(kn).then(function(tt){ue({value:tt,done:kt})},Ge)}(kt,kn,(Ge=Q[ue](Ge)).done,Ge.value)})}}}gt.d(Tr,{AQ:()=>Ye,N3:()=>dt,Tt:()=>ee,sH:()=>Be,xN:()=>en}),"function"==typeof SuppressedError&&SuppressedError},647:(_o,Tr,gt)=>{var T=gt(467);function st(n,e){return Object.is(n,e)}let Ce=null,ee=!1,xn=1;const Et=Symbol("SIGNAL");function He(n){const e=Ce;return Ce=n,e}const ye={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Be(n){if(ee)throw new Error("");if(null===Ce)return;Ce.consumerOnSignalRead(n);const e=Ce.nextProducerIndex++;Ht(Ce),e<Ce.producerNode.length&&Ce.producerNode[e]!==n&&je(Ce)&&en(Ce.producerNode[e],Ce.producerIndexOfThis[e]),Ce.producerNode[e]!==n&&(Ce.producerNode[e]=n,Ce.producerIndexOfThis[e]=je(Ce)?xt(n,Ce,e):0),Ce.producerLastReadVersion[e]=n.version}function yt(n){if((!je(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==xn)){if(!n.producerMustRecompute(n)&&!dt(n))return void De(n);n.producerRecomputeValue(n),De(n)}}function dr(n){if(void 0===n.liveConsumerNode)return;const e=ee;ee=!0;try{for(const t of n.liveConsumerNode)t.dirty||ce(t)}finally{ee=e}}function Ot(){return!1!==Ce?.consumerAllowSignalWrites}function ce(n){n.dirty=!0,dr(n),n.consumerMarkedDirty?.(n)}function De(n){n.dirty=!1,n.lastCleanEpoch=xn}function Pe(n){return n&&(n.nextProducerIndex=0),He(n)}function Qe(n,e){if(He(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(je(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)en(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function dt(n){Ht(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(yt(t),r!==t.version))return!0}return!1}function Ye(n){if(Ht(n),je(n))for(let e=0;e<n.producerNode.length;e++)en(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function xt(n,e,t){if($t(n),0===n.liveConsumerNode.length&&he(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=xt(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function en(n,e){if($t(n),1===n.liveConsumerNode.length&&he(n))for(let r=0;r<n.producerNode.length;r++)en(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Ht(i),i.producerIndexOfThis[r]=e}}function je(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ht(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function $t(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function he(n){return void 0!==n.producerNode}const En=Symbol("UNSET"),nn=Symbol("COMPUTING"),ar=Symbol("ERRORED"),Yn={...ye,value:En,dirty:!0,error:null,equal:st,kind:"computed",producerMustRecompute:n=>n.value===En||n.value===nn,producerRecomputeValue(n){if(n.value===nn)throw new Error("Detected cycle in computations.");const e=n.value;n.value=nn;const t=Pe(n);let r,i=!1;try{r=n.computation(),He(null),i=e!==En&&e!==ar&&r!==ar&&n.equal(e,r)}catch(o){r=ar,n.error=o}finally{Qe(n,t)}i?n.value=e:(n.value=r,n.version++)}};let Za=function cs(){throw new Error};function yo(n){Za(n)}function re(n,e){Ot()||yo(n),n.equal(n.value,e)||(n.value=e,function kt(n){n.version++,function bt(){xn++}(),dr(n)}(n))}const Ge={...ye,equal:st,value:void 0,kind:"signal"};let hr;function Hn(){return hr}function Zn(n){const e=hr;return hr=n,e}const ei=Symbol("NotFound");function St(n){return"function"==typeof n}function Ps(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}Error;const ls=Ps(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Bo(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Xn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(St(r))try{r()}catch(o){e=o instanceof ls?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{Wi(o)}catch(s){e=e??[],s instanceof ls?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ls(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Wi(e);else{if(e instanceof Xn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Bo(t,e)}remove(e){const{_finalizers:t}=this;t&&Bo(t,e),e instanceof Xn&&e._removeParent(this)}}Xn.EMPTY=(()=>{const n=new Xn;return n.closed=!0,n})();const Gi=Xn.EMPTY;function zi(n){return n instanceof Xn||n&&"closed"in n&&St(n.remove)&&St(n.add)&&St(n.unsubscribe)}function Wi(n){St(n)?n():n.unsubscribe()}const hi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},vo={setTimeout(n,e,...t){const{delegate:r}=vo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=vo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ec(n){vo.setTimeout(()=>{const{onUnhandledError:e}=hi;if(!e)throw n;e(n)})}function us(){}const Os=nc("C",void 0,void 0);function nc(n,e,t){return{kind:n,value:e,error:t}}let xr=null;function fr(n){if(hi.useDeprecatedSynchronousErrorHandling){const e=!xr;if(e&&(xr={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=xr;if(xr=null,t)throw r}}else n()}class rc extends Xn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,zi(e)&&e.add(this)):this.destination=oc}static create(e,t,r){return new hs(e,t,r)}next(e){this.isStopped?ks(function ds(n){return nc("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ks(function tc(n){return nc("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ks(Os,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ic=Function.prototype.bind;function Uo(n,e){return ic.call(n,e)}class da{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){xs(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){xs(r)}else xs(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){xs(t)}}}class hs extends rc{constructor(e,t,r){let i;if(super(),St(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&hi.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Uo(e.next,o),error:e.error&&Uo(e.error,o),complete:e.complete&&Uo(e.complete,o)}):i=e}this.destination=new da(i)}}function xs(n){hi.useDeprecatedSynchronousErrorHandling?function Tu(n){hi.useDeprecatedSynchronousErrorHandling&&xr&&(xr.errorThrown=!0,xr.error=n)}(n):ec(n)}function ks(n,e){const{onStoppedNotification:t}=hi;t&&vo.setTimeout(()=>t(n,e))}const oc={closed:!0,next:us,error:function bh(n){throw n},complete:us},qi="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ki(n){return n}function L(n){return 0===n.length?Ki:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let R=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function q(n){return n&&n instanceof rc||function de(n){return n&&St(n.next)&&St(n.error)&&St(n.complete)}(n)&&zi(n)}(t)?t:new hs(t,r,i);return fr(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=B(r))((i,o)=>{const s=new hs({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[qi](){return this}pipe(...t){return L(t)(this)}toPromise(t){return new(t=B(t))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function B(n){var e;return null!==(e=n??hi.Promise)&&void 0!==e?e:Promise}const Ke=Ps(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Re=(()=>{class n extends R{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new Qt(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Ke}next(t){fr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){fr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){fr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?Gi:(this.currentObservers=null,o.push(t),new Xn(()=>{this.currentObservers=null,Bo(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new R;return t.source=this,t}}return n.create=(e,t)=>new Qt(e,t),n})();class Qt extends Re{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Gi}}class Nt extends Re{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function pr(n){return St(n?.lift)}function Lt(n){return e=>{if(pr(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Je(n,e,t,r,i){return new Ri(n,e,t,r,i)}class Ri extends rc{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function $e(n,e){return Lt((t,r)=>{let i=0;t.subscribe(Je(r,o=>{r.next(n.call(e,o,i++))}))})}const wu="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss";class se extends Error{code;constructor(e,t){super(function jo(n,e){return`${function sc(n){return`NG0${Math.abs(n)}`}(n)}${e?": "+e:""}`}(e,t)),this.code=e}}const K=Symbol("InputSignalNode#UNSET"),$={...Ge,transformFn:void 0,applyValueToInputSignal(n,e){re(n,e)}};function Se(n,e){const t=Object.create($);function r(){if(Be(t),t.value===K)throw new se(-950,null);return t.value}return t.value=n,t.transformFn=e?.transform,r[Et]=t,r}function Ze(n){return{toString:n}.toString()}const ht="__parameters__";function Mt(n,e,t){return Ze(()=>{const r=function Ni(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(c,u,h){const m=c.hasOwnProperty(ht)?c[ht]:Object.defineProperty(c,ht,{value:[]})[ht];for(;m.length<=h;)m.push(null);return(m[h]=m[h]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}const bn=globalThis;function un(n){for(let e in n)if(n[e]===un)return e;throw Error("Could not find renamed property on target object.")}function Jw(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function wr(n){if("string"==typeof n)return n;if(Array.isArray(n))return`[${n.map(wr).join(", ")}]`;if(null==n)return""+n;const e=n.overriddenName||n.name;if(e)return`${e}`;const t=n.toString();if(null==t)return""+t;const r=t.indexOf("\n");return r>=0?t.slice(0,r):t}function Ih(n,e){return n?e?`${n} ${e}`:n:e||""}const Zw=un({__forward_ref__:un});function Gt(n){return n.__forward_ref__=Gt,n.toString=function(){return wr(this())},n}function ft(n){return Th(n)?n():n}function Th(n){return"function"==typeof n&&n.hasOwnProperty(Zw)&&n.__forward_ref__===Gt}function fe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Rt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Dh(n){return d0(n,Jc)||d0(n,Ah)}function d0(n,e){return n.hasOwnProperty(e)?n[e]:null}function Ch(n){return n&&(n.hasOwnProperty(jg)||n.hasOwnProperty(Sh))?n[jg]:null}const Jc=un({\u0275prov:un}),jg=un({\u0275inj:un}),Ah=un({ngInjectableDef:un}),Sh=un({ngInjectorDef:un});class pe{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=fe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Cu(n){return n&&!!n.\u0275providers}const fs=un({\u0275cmp:un}),$o=un({\u0275dir:un}),Au=un({\u0275pipe:un}),g0=un({\u0275mod:un}),kr=un({\u0275fac:un}),el=un({__NG_ELEMENT_ID__:un}),Rh=un({__NG_ENV_ID__:un});function mt(n){return"string"==typeof n?n:null==n?"":String(n)}function m0(n,e){throw new se(-200,n)}function Ls(n,e){throw new se(-201,!1)}var It=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(It||{});let zg;function tl(){return zg}function Yi(n){const e=zg;return zg=n,e}function Nh(n,e,t){const r=Dh(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&It.Optional?null:void 0!==e?e:void Ls()}const Eo={},Mh="__NG_DI_FLAG__";class Wg{injector;constructor(e){this.injector=e}retrieve(e,t){return this.injector.get(e,t.optional?ei:Eo,t)}}const Ru="ngTempTokenPath",nl=/\n/gm,Nu="__source";function _0(n,e=It.Default){if(void 0===Hn())throw new se(-203,!1);if(null===Hn())return Nh(n,void 0,e);{const t=Hn();let r;return r=t instanceof Wg?t.injector:t,r.get(n,e&It.Optional?null:void 0,e)}}function me(n,e=It.Default){return(tl()||_0)(ft(n),e)}function N(n,e=It.Default){return me(n,Mu(e))}function Mu(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function qg(n){const e=[];for(let t=0;t<n.length;t++){const r=ft(n[t]);if(Array.isArray(r)){if(0===r.length)throw new se(900,!1);let i,o=It.Default;for(let s=0;s<r.length;s++){const a=r[s],c=Oh(a);"number"==typeof c?-1===c?i=a.token:o|=c:i=a}e.push(me(i,o))}else e.push(me(r))}return e}function cc(n,e){return n[Mh]=e,n.prototype[Mh]=e,n}function Oh(n){return n[Mh]}const ps=cc(Mt("Optional"),8),Pu=cc(Mt("SkipSelf"),4);function Vs(n,e){return n.hasOwnProperty(kr)?n[kr]:null}function lc(n,e){n.forEach(t=>Array.isArray(t)?lc(t,e):e(t))}function kh(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function uc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Pi(n,e,t){let r=xu(n,e);return r>=0?n[1|r]=t:(r=~r,function Fh(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Ou(n,e){const t=xu(n,e);if(t>=0)return n[1|t]}function xu(n,e){return function Yg(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}(n,e,1)}const Go={},Vt=[],ni=new pe(""),Lh=new pe("",-1),ku=new pe("");class dc{get(e,t=Eo){if(t===Eo){const r=new Error(`NullInjectorError: No provider for ${wr(e)}!`);throw r.name="NullInjectorError",r}return t}}function fi(n,e){const t=n[g0]||null;if(!t&&!0===e)throw new Error(`Type ${wr(n)} does not have '\u0275mod' property.`);return t}function Tt(n){return n[fs]||null}function pi(n){return n[Au]||null}function gs(n){return{\u0275providers:n}}function Jg(...n){return{\u0275providers:Vh(0,n),\u0275fromNgModule:!0}}function Vh(n,...e){const t=[],r=new Set;let i;const o=s=>{t.push(s)};return lc(e,s=>{const a=s;Uh(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&Bh(i,o),t}function Bh(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];Zg(i,o=>{e(o,r)})}}function Uh(n,e,t,r){if(!(n=ft(n)))return!1;let i=null,o=Ch(n);const s=!o&&Tt(n);if(o||s){if(s&&!s.standalone)return!1;i=n}else{const c=n.ngModule;if(o=Ch(c),!o)return!1;i=c}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const u of c)Uh(u,e,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let u;r.add(i);try{lc(o.imports,h=>{Uh(h,e,t,r)&&(u||=[],u.push(h))})}finally{}void 0!==u&&Bh(u,e)}if(!a){const u=Vs(i)||(()=>new i);e({provide:i,useFactory:u,deps:Vt},i),e({provide:ku,useValue:i,multi:!0},i),e({provide:ni,useValue:()=>me(i),multi:!0},i)}const c=o.providers;if(null!=c&&!a){const u=n;Zg(c,h=>{e(h,u)})}}}return i!==n&&void 0!==n.providers}function Zg(n,e){for(let t of n)Cu(t)&&(t=t.\u0275providers),Array.isArray(t)?Zg(t,e):e(t)}const Xg=un({provide:String,useValue:un});function em(n){return null!==n&&"object"==typeof n&&Xg in n}function fc(n){return"function"==typeof n}const Fu=new pe(""),Hh={},$h={};let tm;function il(){return void 0===tm&&(tm=new dc),tm}class cr{}class Bs extends cr{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Vu(e,s=>this.processProvider(s)),this.records.set(Lh,pa(void 0,this)),i.has("environment")&&this.records.set(cr,pa(void 0,this));const o=this.records.get(Fu);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(ku,Vt,It.Self))}retrieve(e,t){return this.get(e,t.optional?ei:Eo,t)}destroy(){Lu(this),this._destroyed=!0;const e=He(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),He(e)}}onDestroy(e){return Lu(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Lu(this);const t=Zn(this),r=Yi(void 0);try{return e()}finally{Zn(t),Yi(r)}}get(e,t=Eo,r=It.Default){if(Lu(this),e.hasOwnProperty(Rh))return e[Rh](this);r=Mu(r);const o=Zn(this),s=Yi(void 0);try{if(!(r&It.SkipSelf)){let c=this.records.get(e);if(void 0===c){const u=function T0(n){return"function"==typeof n||"object"==typeof n&&n instanceof pe}(e)&&Dh(e);c=u&&this.injectableDefInScope(u)?pa(nm(e),Hh):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c,r)}return(r&It.Self?il():this.parent).get(e,t=r&It.Optional&&t===Eo?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Ru]=a[Ru]||[]).unshift(wr(e)),o)throw a;return function y0(n,e,t,r){const i=n[Ru];throw e[Nu]&&i.unshift(e[Nu]),n.message=function v0(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=wr(e);if(Array.isArray(e))i=e.map(wr).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):wr(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(nl,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Ru]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Yi(s),Zn(o)}}resolveInjectorInitializers(){const e=He(null),t=Zn(this),r=Yi(void 0);try{const o=this.get(ni,Vt,It.Self);for(const s of o)s()}finally{Zn(t),Yi(r),He(e)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(wr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){let t=fc(e=ft(e))?e:ft(e&&e.provide);const r=function dD(n){return em(n)?pa(void 0,n.useValue):pa(Gh(n),Hh)}(e);if(!fc(e)&&!0===e.multi){let i=this.records.get(t);i||(i=pa(void 0,Hh,!0),i.factory=()=>qg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){const i=He(null);try{return t.value===$h?m0(wr(e)):t.value===Hh&&(t.value=$h,t.value=t.factory(void 0,r)),"object"==typeof t.value&&t.value&&function fD(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{He(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;const t=ft(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function nm(n){const e=Dh(n),t=null!==e?e.factory:Vs(n);if(null!==t)return t;if(n instanceof pe)throw new se(204,!1);if(n instanceof Function)return function rm(n){if(n.length>0)throw new se(204,!1);const t=function Ug(n){return n&&(n[Jc]||n[Ah])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new se(204,!1)}function Gh(n,e,t){let r;if(fc(n)){const i=ft(n);return Vs(i)||nm(i)}if(em(n))r=()=>ft(n.useValue);else if(function jh(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...qg(n.deps||[]));else if(function I0(n){return!(!n||!n.useExisting)}(n))r=(i,o)=>me(ft(n.useExisting),void 0!==o&&o&It.Optional?It.Optional:void 0);else{const i=ft(n&&(n.useClass||n.provide));if(!function hD(n){return!!n.deps}(n))return Vs(i)||nm(i);r=()=>new i(...qg(n.deps))}return r}function Lu(n){if(n.destroyed)throw new se(205,!1)}function pa(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Vu(n,e){for(const t of n)Array.isArray(t)?Vu(t,e):t&&Cu(t)?Vu(t.\u0275providers,e):e(t)}function bo(n,e){let t;n instanceof Bs?(Lu(n),t=n):t=new Wg(n);const i=Zn(t),o=Yi(void 0);try{return e()}finally{Zn(i),Yi(o)}}function pc(){return void 0!==tl()||null!=Hn()}function Us(n){if(!pc())throw new se(-203,!1)}function Ln(n){return Array.isArray(n)&&"object"==typeof n[1]}function Cr(n){return Array.isArray(n)&&!0===n[1]}function Uu(n){return!!(4&n.flags)}function Wo(n){return n.componentOffset>-1}function Kh(n){return!(1&~n.flags)}function xi(n){return!!n.template}function $s(n){return!!(512&n[2])}function Ji(n){return!(256&~n[2])}class TD{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function ul(n,e,t,r){null!==e?e.applyValueToInputSignal(e,r):n[t]=r}const Ar=(()=>{const n=()=>M0;return n.ngInherit=!0,n})();function M0(n){return n.type.prototype.ngOnChanges&&(n.setInput=cm),wD}function wD(){const n=Yh(this),e=n?.current;if(e){const t=n.previous;if(t===Go)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function cm(n,e,t,r,i){const o=this.declaredInputs[r],s=Yh(n)||function DD(n,e){return n[P0]=e}(n,{previous:Go,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new TD(u&&u.currentValue,t,c===Go),ul(n,e,i,t)}const P0="__ngSimpleChanges__";function Yh(n){return n[P0]||null}function Bt(n){for(;Array.isArray(n);)n=n[0];return n}function _a(n,e){return Bt(e[n])}function qr(n,e){return Bt(e[n.index])}function Zi(n,e){return n.data[e]}function Gs(n,e){return n[e]}function gi(n,e){const t=e[n];return Ln(t)?t:t[0]}function lm(n){return!(128&~n[2])}function Xi(n,e){return null==e?null:n[e]}function O0(n){n[17]=0}function dm(n){1024&n[2]||(n[2]|=1024,lm(n)&&dl(n))}function Ku(n){return!!(9216&n[2]||n[24]?.dirty)}function Qu(n){n[10].changeDetectionScheduler?.notify(8),64&n[2]&&(n[2]|=1024),Ku(n)&&dl(n)}function dl(n){n[10].changeDetectionScheduler?.notify(0);let e=zs(n);for(;null!==e&&!(8192&e[2])&&(e[2]|=8192,lm(e));)e=zs(e)}function hl(n,e){if(Ji(n))throw new se(911,!1);null===n[21]&&(n[21]=[]),n[21].push(e)}function zs(n){const e=n[3];return Cr(e)?e[3]:e}function _c(n){return n[7]??=[]}function hm(n){return n.cleanup??=[]}const ut={lFrame:B0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let fm=!1;function gm(){return ut.bindingsEnabled}function yc(){return null!==ut.skipHydrationRootTNode}function J(){return ut.lFrame.lView}function ct(){return ut.lFrame.tView}function Vr(n){return ut.lFrame.contextLView=n,n[8]}function gr(n){return ut.lFrame.contextLView=null,n}function vt(){let n=Xh();for(;null!==n&&64===n.type;)n=n.parent;return n}function Xh(){return ut.lFrame.currentTNode}function eo(n,e){const t=ut.lFrame;t.currentTNode=n,t.isParent=e}function ym(){return ut.lFrame.isParent}function ef(){ut.lFrame.isParent=!1}function tf(){return fm}function nf(n){const e=fm;return fm=n,e}function mi(){const n=ut.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function To(){return ut.lFrame.bindingIndex++}function qs(n){const e=ut.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function sf(n,e){const t=ut.lFrame;t.bindingIndex=t.bindingRootIndex=n,bm(e)}function bm(n){ut.lFrame.currentDirectiveIndex=n}function Tm(){return ut.lFrame.currentQueryIndex}function af(n){ut.lFrame.currentQueryIndex=n}function xD(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[5]:null}function V0(n,e,t){if(t&It.SkipSelf){let i=e,o=n;for(;!(i=i.parent,null!==i||t&It.Host||(i=xD(o),null===i||(o=o[14],10&i.type))););if(null===i)return!1;e=i,n=o}const r=ut.lFrame=cf();return r.currentTNode=e,r.lView=n,!0}function wm(n){const e=cf(),t=n[1];ut.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function cf(){const n=ut.lFrame,e=null===n?null:n.child;return null===e?B0(n):e}function B0(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function U0(){const n=ut.lFrame;return ut.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const j0=U0;function Dm(){const n=U0();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Br(){return ut.lFrame.selectedIndex}function vc(n){ut.lFrame.selectedIndex=n}function gn(){const n=ut.lFrame;return Zi(n.tView,n.selectedIndex)}let H0=!0;function Ec(){return H0}function _s(n){H0=n}function uf(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),null!=h&&(n.destroyHooks??=[]).push(t,h)}}function gl(n,e,t){hf(n,e,3,t)}function df(n,e,t,r){(3&n[2])===t&&hf(n,e,t,r)}function G0(n,e){let t=n[2];(3&t)===e&&(t&=16383,t+=1,n[2]=t)}function hf(n,e,t,r){const o=r??-1,s=e.length-1;let a=0;for(let c=void 0!==r?65535&n[17]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[17]+=65536),(a<o||-1==o)&&(ff(n,t,e,c),n[17]=(4294901760&n[17])+c+2),c++}function Am(n,e){const t=He(null);try{e.call(n)}finally{He(t)}}function ff(n,e,t,r){const i=t[r]<0,o=t[r+1],a=n[i?-t[r]:t[r]];i?n[2]>>14<n[17]>>16&&(3&n[2])===e&&(n[2]+=16384,Am(a,o)):Am(a,o)}class ml{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}}function z0(n){return 3===n||4===n||6===n}function ya(n){return 64===n.charCodeAt(0)}function _l(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||W0(n,t,i,0,-1===t||2===t?e[++r]:null)}}return n}function W0(n,e,t,r,i){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t)return void(null!==i&&(n[o+1]=i));o++,null!==i&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==i&&n.splice(o++,0,i)}function Zu(n){return-1!==n}function Xu(n){return 32767&n}function ed(n,e){let t=function Nm(n){return n>>16}(n),r=e;for(;t>0;)r=r[14],t--;return r}let Mm=!0;function yl(n){const e=Mm;return Mm=n,e}let $D=0;const ys={};function gf(n,e){const t=Om(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,Pm(r.data,n),Pm(e,null),Pm(r.blueprint,null));const i=vl(n,e),o=n.injectorIndex;if(Zu(i)){const s=Xu(i),a=ed(i,e),c=a[1].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function Pm(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Om(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function vl(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=J0(i),null===r)return-1;if(t++,i=i[14],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function xm(n,e,t){!function GD(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(el)&&(r=t[el]),null==r&&(r=t[el]=$D++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function mf(n,e,t){if(t&It.Optional||void 0!==n)return n;Ls()}function _f(n,e,t,r){if(t&It.Optional&&void 0===r&&(r=null),!(t&(It.Self|It.Host))){const i=n[9],o=Yi(void 0);try{return i?i.get(e,r,t&It.Optional):Nh(e,r,t&It.Optional)}finally{Yi(o)}}return mf(r,0,t)}function K0(n,e,t,r=It.Default,i){if(null!==n){if(2048&e[2]&&!(r&It.Self)){const s=function qD(n,e,t,r,i){let o=n,s=e;for(;null!==o&&null!==s&&2048&s[2]&&!$s(s);){const a=Q0(o,s,t,r|It.Self,ys);if(a!==ys)return a;let c=o.parent;if(!c){const u=s[20];if(u){const h=u.get(t,ys,r);if(h!==ys)return h}c=J0(s),s=s[14]}o=c}return i}(n,e,t,r,ys);if(s!==ys)return s}const o=Q0(n,e,t,r,ys);if(o!==ys)return o}return _f(e,t,r,i)}function Q0(n,e,t,r,i){const o=function WD(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(el)?n[el]:void 0;return"number"==typeof e?e>=0?255&e:nd:e}(t);if("function"==typeof o){if(!V0(e,n,r))return r&It.Host?mf(i,0,r):_f(e,t,r,i);try{let s;if(s=o(r),null!=s||r&It.Optional)return s;Ls()}finally{j0()}}else if("number"==typeof o){let s=null,a=Om(n,e),c=-1,u=r&It.Host?e[15][5]:null;for((-1===a||r&It.SkipSelf)&&(c=-1===a?vl(n,e):e[a+8],-1!==c&&Y0(r,!1)?(s=e[1],a=Xu(c),e=ed(c,e)):a=-1);-1!==a;){const h=e[1];if(km(o,a,h.data)){const m=yf(a,e,t,s,r,u);if(m!==ys)return m}c=e[a+8],-1!==c&&Y0(r,e[1].data[a+8]===u)&&km(o,a,e)?(s=h,a=Xu(c),e=ed(c,e)):a=-1}}return i}function yf(n,e,t,r,i,o){const s=e[1],a=s.data[n+8],h=vf(a,s,t,null==r?Wo(a)&&Mm:r!=s&&!!(3&a.type),i&It.Host&&o===a);return null!==h?td(e,s,h,a,i):ys}function vf(n,e,t,r,i){const o=n.providerIndexes,s=e.data,a=1048575&o,c=n.directiveStart,h=o>>20,_=i?a+h:n.directiveEnd;for(let v=r?a:a+h;v<_;v++){const I=s[v];if(v<c&&t===I||v>=c&&I.type===t)return v}if(i){const v=s[c];if(v&&xi(v)&&v.type===t)return c}return null}function td(n,e,t,r,i){let o=n[t];const s=e.data;if(o instanceof ml){const a=o;a.resolving&&m0(function zt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():mt(n)}(s[t]));const c=yl(a.canSeeViewProviders);a.resolving=!0;const h=a.injectImpl?Yi(a.injectImpl):null;V0(n,r,It.Default);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function $0(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=M0(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}(t,s[t],e)}finally{null!==h&&Yi(h),yl(c),a.resolving=!1,j0()}}return o}function km(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Y0(n,e){return!(n&It.Self||n&It.Host&&e)}class er{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return K0(this._tNode,this._lView,e,Mu(r),t)}}function nd(){return new er(vt(),J())}function fn(n){return Ze(()=>{const e=n.prototype.constructor,t=e[kr]||Ef(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const o=i[kr]||Ef(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Ef(n){return Th(n)?()=>{const e=Ef(ft(n));return e&&e()}:Vs(n)}function J0(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[5]:null}function X0(n,e=null,t=null,r){const i=jm(n,e,t,r);return i.resolveInjectorInitializers(),i}function jm(n,e=null,t=null,r,i=new Set){const o=[t||Vt,Jg(n)];return r=r||("object"==typeof n?void 0:wr(n)),new Bs(o,e||il(),r||null,i)}class Wt{static THROW_IF_NOT_FOUND=Eo;static NULL=new dc;static create(e,t){if(Array.isArray(e))return X0({name:""},t,e,"");{const r=e.name??"";return X0({name:r},e.parent,e.providers,r)}}static \u0275prov=fe({token:Wt,providedIn:"any",factory:()=>me(Lh)});static __NG_ELEMENT_ID__=-1}new pe("").__NG_ELEMENT_ID__=n=>{const e=vt();if(null===e)throw new se(204,!1);if(2&e.type)return e.value;if(n&It.Optional)return null;throw new se(204,!1)};const tE=!1;let to=(()=>class n{static __NG_ELEMENT_ID__=Fi;static __NG_ENV_ID__=t=>t})();class Hm extends to{_lView;constructor(e){super(),this._lView=e}onDestroy(e){const t=this._lView;return Ji(t)?(e(),()=>{}):(hl(t,e),()=>function Yu(n,e){if(null===n[21])return;const t=n[21].indexOf(e);-1!==t&&n[21].splice(t,1)}(t,e))}}function Fi(){return new Hm(J())}class qo{}const wc=new pe("",{providedIn:"root",factory:()=>!1}),vs=new pe(""),Dc=new pe("");let Es=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Nt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=fe({token:n,providedIn:"root",factory:()=>new n})}return n})(),bf=(()=>{class n{internalPendingTasks=N(Es);scheduler=N(qo);add(){const t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){var r=this;return(0,T.A)(function*(){const i=r.add();try{return yield t()}finally{i()}})()}static \u0275prov=fe({token:n,providedIn:"root",factory:()=>new n})}return n})();const Xe=class ZD extends Re{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,pc()&&(this.destroyRef=N(to,{optional:!0})??void 0,this.pendingTasks=N(Es,{optional:!0})??void 0)}emit(e){const t=He(null);try{super.next(e)}finally{He(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof Xn&&e.add(a),a}wrapInTimeout(e){return t=>{const r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{void 0!==r&&this.pendingTasks?.remove(r)}})}}};function od(...n){}function nE(n){let e,t;function r(){n=od;try{void 0!==t&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(t),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),"function"==typeof requestAnimationFrame&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function rE(n){return queueMicrotask(()=>n()),()=>{n=od}}const p="isAngularZone",l=p+"_ID";let d=0;class g{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Xe(!1);onMicrotaskEmpty=new Xe(!1);onStable=new Xe(!1);onError=new Xe(!1);constructor(e){const{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=tE}=e;if(typeof Zone>"u")throw new se(908,!1);Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,function V(n){const e=()=>{!function M(n){function e(){nE(()=>{n.callbackScheduled=!1,Y(n),n.isCheckStableRunning=!0,w(n),n.isCheckStableRunning=!1})}n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Y(n))}(n)},t=d++;n._inner=n._inner.fork({name:"angular",properties:{[p]:!0,[l]:t,[l+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(function rt(n){return no(n,"__ignore_ng_zone__")}(c))return r.invokeTask(o,s,a,c);try{return Ie(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),Oe(n)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return Ie(n),r.invoke(o,s,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function An(n){return no(n,"__scheduler_tick__")}(c)&&e(),Oe(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,Y(n),w(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(p)}static assertInAngularZone(){if(!g.isInAngularZone())throw new se(909,!1)}static assertNotInAngularZone(){if(g.isInAngularZone())throw new se(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,E,od,od);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const E={};function w(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Y(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function Ie(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Oe(n){n._nesting--,w(n)}class Te{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Xe;onMicrotaskEmpty=new Xe;onStable=new Xe;onError=new Xe;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}function no(n,e){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0]?.data?.[e]}class ro{_console=console;handleError(e){this._console.error("ERROR",e)}}const iE=new pe("",{providedIn:"root",factory:()=>{const n=N(g),e=N(ro);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function Gm(n,e){return Se(n,e)}const sE=(Gm.required=function zm(n){return Se(K,n)},Gm);function eC(){return ba(vt(),J())}function ba(n,e){return new tn(qr(n,e))}let tn=(()=>class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=eC})();function wx(n){return n instanceof tn?n.nativeElement:n}function Ia(n,e){const t=function te(n,e){const t=Object.create(Ge);t.value=n,void 0!==e&&(t.equal=e);const r=()=>(Be(t),t.value);return r[Et]=t,r}(n,e?.equal),r=t[Et];return t.set=i=>re(r,i),t.update=i=>function le(n,e){Ot()||yo(n),re(n,e(n.value))}(r,i),t.asReadonly=aE.bind(t),t}function aE(){const n=this[Et];if(void 0===n.readonlyFn){const e=()=>this();e[Et]=n,n.readonlyFn=e}return n.readonlyFn}function Cx(n){return function Dx(n){return"function"==typeof n&&void 0!==n[Et]}(n)&&"function"==typeof n.set}function Rq(){return this._results[Symbol.iterator]()}class Nq{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Re}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const r=function ti(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function E0(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Rq}function qm(n){return!(128&~n.flags)}var cE=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(cE||{});const lE=new Map;let Pq=0;function nC(n){lE.delete(n[19])}const iC="__ngContext__";function Do(n,e){Ln(e)?(n[iC]=e[19],function xq(n){lE.set(n[19],n)}(e)):n[iC]=e}function kx(n){return Lx(n[12])}function Fx(n){return Lx(n[4])}function Lx(n){for(;null!==n&&!Cr(n);)n=n[4];return n}let sC;const Cc=new pe("",{providedIn:"root",factory:()=>Xq}),Xq="ng",aC=new pe(""),sd=new pe("",{providedIn:"platform",factory:()=>"unknown"}),Gx=new pe("",{providedIn:"root",factory:()=>function Ta(){if(void 0!==sC)return sC;if(typeof document<"u")return document;throw new se(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),Kx=new pe("",{providedIn:"root",factory:()=>!1});var yC=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(yC||{});const Tf=new pe(""),Zx=new Set;function Co(n){Zx.has(n)||(Zx.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}let gE=(()=>class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=i6})();function i6(){return new gE(J(),vt())}var wf=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(wf||{});let vC=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=fe({token:n,providedIn:"root",factory:()=>new n})}return n})();const Xx=[wf.EarlyRead,wf.Write,wf.MixedReadWrite,wf.Read];let ek=(()=>{class n{ngZone=N(g);scheduler=N(qo);errorHandler=N(ro,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){N(Tf,{optional:!0})}execute(){this.executing=!0;for(const r of Xx)for(const i of this.sequences)if(!i.erroredOrDestroyed&&i.hooks[r])try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>(0,i.hooks[r])(i.pipelinedValue),i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(const r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(const r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(t){const{view:r}=t;void 0!==r?((r[25]??=[]).push(t),dl(r),r[2]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(yC.AFTER_NEXT_RENDER,t):t()}static \u0275prov=fe({token:n,providedIn:"root",factory:()=>new n})}return n})();class tk{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();const e=this.view?.[25];e&&(this.view[25]=e.filter(t=>t!==this))}}function Tl(n,e){!e?.injector&&Us();const t=e?.injector??N(Wt);return Co("NgAfterNextRender"),nk(n,t,e,!0)}function nk(n,e,t,r){const i=e.get(vC);i.impl??=e.get(ek);const o=e.get(Tf,null,{optional:!0}),s=t?.phase??wf.MixedReadWrite,a=!0!==t?.manualCleanup?e.get(to):null,c=e.get(gE,null,{optional:!0}),u=new tk(i.impl,function o6(n,e){if(n instanceof Function){const t=[void 0,void 0,void 0,void 0];return t[e]=n,t}return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}(n,s),c?.view,r,a,o?.snapshot(null));return i.impl.register(u),u}function Ck(n,e){const t=n.contentQueries;if(null!==t){const r=He(null);try{for(let i=0;i<t.length;i+=2){const s=t[i+1];if(-1!==s){const a=n.data[s];af(t[i]),a.contentQueries(2,e[s],s)}}}finally{He(r)}}}function PC(n,e,t){af(0);const r=He(null);try{e(n,t)}finally{He(r)}}function OC(n,e,t){if(Uu(e)){const r=He(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{He(r)}}}var bs=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(bs||{});class Mk{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${wu})`}}function wl(n){return n instanceof Mk?n.changingThisBreaksApplicationSecurity:n}const Y6=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Of=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Of||{});function xf(n){const e=function l_(){const n=J();return n&&n[10].sanitizer}();return e?e.sanitize(Of.URL,n)||"":function a_(n,e){const t=function W6(n){return n instanceof Mk&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${wu})`)}return t===e}(n,"URL")?wl(n):function kC(n){return(n=String(n)).match(Y6)?n:"unsafe:"+n}(mt(n))}const h9=/^>|^->|<!--|-->|--!>|<!-$/g,f9=/(<|>)/g;function Wk(n){return n.ownerDocument.defaultView}function wa(n){return n instanceof Function?n():n}function w9(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}const Jk="ng-template";function D9(n,e,t,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==w9(e[i+1].toLowerCase(),t,0))return!0}else if(jC(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&"string"==typeof(o=e[i]);)if(o.toLowerCase()===t)return!0}return!1}function jC(n){return 4===n.type&&n.value!==Jk}function C9(n,e,t){return e===(4!==n.type||t?n.value:Jk)}function A9(n,e,t){let r=4;const i=n.attrs,o=null!==i?function N9(n){for(let e=0;e<n.length;e++)if(z0(n[e]))return e;return n.length}(i):0;let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!C9(n,c,t)||""===c&&1===e.length){if(Ks(r))return!1;s=!0}}else if(8&r){if(null===i||!D9(n,i,c,t)){if(Ks(r))return!1;s=!0}}else{const u=e[++a],h=S9(c,i,jC(n),t);if(-1===h){if(Ks(r))return!1;s=!0;continue}if(""!==u){let m;if(m=h>o?"":i[h+1].toLowerCase(),2&r&&u!==m){if(Ks(r))return!1;s=!0}}}}else{if(!s&&!Ks(r)&&!Ks(c))return!1;if(s&&Ks(c))continue;s=!1,r=c|1&r}}return Ks(r)||s}function Ks(n){return!(1&n)}function S9(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){const s=e[i];if(s===n)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function M9(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Zk(n,e,t=!1){for(let r=0;r<e.length;r++)if(A9(n,e[r],t))return!0;return!1}function P9(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function Xk(n,e){return n?":not("+e.trim()+")":e}function O9(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&r){const a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Ks(s)&&(e+=Xk(o,i),i=""),r=s,o=o||!Ks(r);t++}return""!==i&&(e+=Xk(o,i)),e}const _t={};function $C(n,e){return n.createComment(function Hk(n){return n.replace(h9,e=>e.replace(f9,"\u200b$1\u200b"))}(e))}function RE(n,e,t){return n.createElement(e,t)}function ld(n,e,t,r,i){n.insertBefore(e,t,r,i)}function tF(n,e,t){n.appendChild(e,t)}function nF(n,e,t,r,i){null!==r?ld(n,e,t,r,i):tF(n,e,t)}function iF(n,e,t){const{mergedAttrs:r,classes:i,styles:o}=t;null!==r&&function vx(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{const o=i,s=t[++r];ya(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}}(n,e,r),null!==i&&function L9(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}(n,e,i),null!==o&&function F9(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}function GC(n,e,t,r,i,o,s,a,c,u,h){const m=26+r,_=m+i,v=function V9(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:_t);return t}(m,_),I="function"==typeof u?u():u;return v[1]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:I,incompleteFirstPass:!1,ssrId:h}}function NE(n,e,t,r,i,o,s,a,c,u,h){const m=e.blueprint.slice();return m[0]=i,m[2]=1228|r,(null!==u||n&&2048&n[2])&&(m[2]|=2048),O0(m),m[3]=m[14]=n,m[8]=t,m[10]=s||n&&n[10],m[11]=a||n&&n[11],m[9]=c||n&&n[9]||null,m[5]=o,m[19]=function Oq(){return Pq++}(),m[6]=h,m[20]=u,m[15]=2==e.type?n[15]:m,m}function zC(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function d_(n,e,t,r){if(0===t)return-1;const i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function WC(n,e){return n[12]?n[13][4]=e:n[12]=e,n[13]=e,e}function Ae(n=1){sF(ct(),J(),Br()+n,!1)}function sF(n,e,t,r){if(!r)if(3&~e[2]){const o=n.preOrderHooks;null!==o&&df(e,o,0,t)}else{const o=n.preOrderCheckHooks;null!==o&&gl(e,o,t)}vc(t)}var ME=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(ME||{});function qC(n,e,t,r){const i=He(null);try{const[o,s,a]=n.inputs[t];let c=null;!!(s&ME.SignalBased)&&(c=e[o][Et]),null!==c&&void 0!==c.transformFn?r=c.transformFn(r):null!==a&&(r=a.call(e,r)),null!==n.setInput?n.setInput(e,c,r,t,o):ul(e,c,o,r)}finally{He(i)}}function aF(n,e,t,r,i){const o=Br(),s=2&r;try{vc(-1),s&&e.length>26&&sF(n,e,26,!1),t(r,i)}finally{vc(o)}}function PE(n,e,t){(function W9(n,e,t){const r=t.directiveStart,i=t.directiveEnd;Wo(t)&&function B9(n,e,t){const r=qr(e,n),i=function oF(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=GC(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}(t),o=n[10].rendererFactory,s=WC(n,NE(n,i,null,zC(t),r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=s}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||gf(t,e);const o=t.initialInputs;for(let s=r;s<i;s++){const a=n.data[s],c=td(e,n,s,t);Do(c,e),null!==o&&Q9(0,s-r,c,a,0,o),xi(a)&&(gi(t.index,e)[8]=td(e,n,s,t))}})(n,e,t),!(64&~t.flags)&&function q9(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,s=function OD(){return ut.lFrame.currentDirectiveIndex}();try{vc(o);for(let a=r;a<i;a++){const c=n.data[a],u=e[a];bm(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&K9(c,u)}}finally{vc(-1),bm(s)}}(n,e,t)}function KC(n,e,t=qr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?t(e,n):n[s];n[i++]=a}}}let cF=()=>null;function Ao(n,e,t,r,i,o,s,a){if(a||!ZC(e,n,t,r,i)){if(3&e.type){const c=qr(e,t);r=function G9(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(c,r,i)}}else Wo(e)&&function z9(n,e){const t=gi(e,n);16&t[2]||(t[2]|=64)}(t,e.index)}function K9(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function QC(n,e){const t=n.directiveRegistry;let r=null;if(t)for(let i=0;i<t.length;i++){const o=t[i];Zk(e,o.selectors,!1)&&(r??=[],xi(o)?r.unshift(o):r.push(o))}return r}function Da(n,e,t,r,i,o){const s=qr(n,e);!function YC(n,e,t,r,i,o,s){if(null==o)n.removeAttribute(e,i,t);else{const a=null==s?mt(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}(e[11],s,o,n.value,t,r,i)}function Q9(n,e,t,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;a+=2)qC(r,t,s[a],s[a+1])}function ZC(n,e,t,r,i){const o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r];let a=!1;if(s)for(let c=0;c<s.length;c+=2){const u=s[c];qC(e.data[u],t[u],s[c+1],i),a=!0}if(o)for(const c of o)qC(e.data[c],t[c],r,i),a=!0;return a}function Y9(n,e){const t=gi(e,n),r=t[1];!function J9(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[0];null!==i&&null===t[6]&&(t[6]=null),OE(r,t,t[8])}function OE(n,e,t){wm(e);try{const r=n.viewQuery;null!==r&&PC(1,r,t);const i=n.template;null!==i&&aF(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[18]?.finishViewCreation(n),n.staticContentQueries&&Ck(n,e),n.staticViewQueries&&PC(2,n.viewQuery,t);const o=n.components;null!==o&&function Z9(n,e){for(let t=0;t<e.length;t++)Y9(n,e[t])}(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,Dm()}}function Ff(n,e,t,r){const i=He(null);try{const o=e.tView,c=NE(n,o,t,4096&n[2]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);c[16]=n[e.index];const h=n[18];return null!==h&&(c[18]=h.createEmbeddedView(o)),OE(o,c,t),c}finally{He(i)}}function ud(n,e){return!e||null===e.firstChild||qm(n)}function eA(n,e){return undefined(n,e)}var Dl=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Dl||{});function Cl(n){return!(32&~n.flags)}function Lf(n,e,t,r,i){if(null!=r){let o,s=!1;Cr(r)?o=r:Ln(r)&&(s=!0,r=r[0]);const a=Bt(r);0===n&&null!==t?null==i?tF(e,t,a):ld(e,t,a,i||null,!0):1===n&&null!==t?ld(e,t,a,i||null,!0):2===n?function u_(n,e,t){n.removeChild(null,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function o7(n,e,t,r,i){const o=t[7];o!==Bt(t)&&Lf(e,n,r,o,i);for(let a=10;a<t.length;a++){const c=t[a];kE(c[1],c,n,e,r,o)}}(e,n,o,t,i)}}function hF(n,e){e[10].changeDetectionScheduler?.notify(9),kE(n,e,e[11],2,null,null)}function tA(n,e){const t=n[9],r=t.indexOf(e);t.splice(r,1)}function h_(n,e){if(Ji(e))return;const t=e[11];t.destroyNode&&kE(n,e,t,3,null,null),function t7(n){let e=n[12];if(!e)return nA(n[1],n);for(;e;){let t=null;if(Ln(e))t=e[12];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)Ln(e)&&nA(e[1],e),e=e[3];null===e&&(e=n),Ln(e)&&nA(e[1],e),t=e&&e[4]}e=t}}(e)}function nA(n,e){if(Ji(e))return;const t=He(null);try{e[2]&=-129,e[2]|=256,e[24]&&Ye(e[24]),function r7(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof ml)){const o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],c=o[s+1];try{c.call(a)}finally{}}else try{o.call(i)}finally{}}}}(n,e),function n7(n,e){const t=n.cleanup,r=e[7];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[7]=null);const i=e[21];if(null!==i){e[21]=null;for(let s=0;s<i.length;s++)(0,i[s])()}const o=e[23];if(null!==o){e[23]=null;for(const s of o)s.destroy()}}(n,e),1===e[1].type&&e[11].destroy();const r=e[16];if(null!==r&&Cr(e[3])){r!==e[3]&&tA(r,e);const i=e[18];null!==i&&i.detachView(n)}nC(e)}finally{He(t)}}function rA(n,e,t){return function fF(n,e,t){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return t[0];if(Wo(r)){const{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===bs.None||i===bs.Emulated)return null}return qr(r,t)}(n,e.parent,t)}function pF(n,e,t){return mF(n,e,t)}let mF=function gF(n,e,t){return 40&n.type?qr(n,t):null};function xE(n,e,t,r){const i=rA(n,r,e),o=e[11],a=pF(r.parent||e[5],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)nF(o,i,t[c],a,!1);else nF(o,i,t,a,!1)}function dd(n,e){if(null!==e){const t=e.type;if(3&t)return qr(e,n);if(4&t)return oA(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return dd(n,r);{const i=n[e.index];return Cr(i)?oA(-1,i):Bt(i)}}if(128&t)return dd(n,e.next);if(32&t)return eA(e,n)()||Bt(n[e.index]);{const r=yF(n,e);return null!==r?Array.isArray(r)?r[0]:dd(zs(n[15]),r):dd(n,e.next)}}return null}function yF(n,e){return null!==e?n[15][5].projection[e.projection]:null}function oA(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return dd(r,i)}return e[7]}function sA(n,e,t,r,i,o,s){for(;null!=t;){if(128===t.type){t=t.next;continue}const a=r[t.index],c=t.type;if(s&&0===e&&(a&&Do(Bt(a),r),t.flags|=2),!Cl(t))if(8&c)sA(n,e,t.child,r,i,o,!1),Lf(e,n,i,a,o);else if(32&c){const u=eA(t,r);let h;for(;h=u();)Lf(e,n,i,h,o);Lf(e,n,i,a,o)}else 16&c?vF(n,e,r,t,i,o):Lf(e,n,i,a,o);t=s?t.projectionNext:t.next}}function kE(n,e,t,r,i,o){sA(t,r,n.firstChild,e,i,o,!1)}function vF(n,e,t,r,i,o){const s=t[15],c=s[5].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)Lf(e,n,i,c[u],o);else{let u=c;const h=s[3];qm(r)&&(u.flags|=128),sA(n,e,u,h,i,o,!0)}}function Vf(n,e,t,r,i=!1){for(;null!==t;){if(128===t.type){t=i?t.projectionNext:t.next;continue}const o=e[t.index];null!==o&&r.push(Bt(o)),Cr(o)&&aA(o,r);const s=t.type;if(8&s)Vf(n,e,t.child,r);else if(32&s){const a=eA(t,e);let c;for(;c=a();)r.push(c)}else if(16&s){const a=yF(e,t);if(Array.isArray(a))r.push(...a);else{const c=zs(e[15]);Vf(c[1],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function aA(n,e){for(let t=10;t<n.length;t++){const r=n[t],i=r[1].firstChild;null!==i&&Vf(r[1],r,i,e)}n[7]!==n[0]&&e.push(n[7])}function EF(n){if(null!==n[25]){for(const e of n[25])e.impl.addSequence(e);n[25].length=0}}let bF=[];const u7={...ye,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{dl(n.lView)},consumerOnSignalRead(){this.lView[24]=this}},h7={...ye,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=zs(n.lView);for(;e&&!IF(e[1]);)e=zs(e);e&&dm(e)},consumerOnSignalRead(){this.lView[24]=this}};function IF(n){return 2!==n.type}function TF(n){if(null===n[23])return;let e=!0;for(;e;){let t=!1;for(const r of n[23])r.dirty&&(t=!0,null===r.zone||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(8192&n[2])}}function FE(n,e=!0,t=0){const i=n[10].rendererFactory;i.begin?.();try{!function p7(n,e){const t=tf();try{nf(!0),cA(n,e);let r=0;for(;Ku(n);){if(100===r)throw new se(103,!1);r++,cA(n,1)}}finally{nf(t)}}(n,t)}catch(s){throw e&&function JC(n,e){const t=n[9],r=t?t.get(ro,null):null;r&&r.handleError(e)}(n,s),s}finally{i.end?.()}}function DF(n,e,t,r){if(Ji(e))return;const i=e[2];wm(e);let a=!0,c=null,u=null;IF(n)?(u=function a7(n){return n[24]??function c7(n){const e=bF.pop()??Object.create(u7);return e.lView=n,e}(n)}(e),c=Pe(u)):null===function Qn(){return Ce}()?(a=!1,u=function d7(n){const e=n[24]??Object.create(h7);return e.lView=n,e}(e),c=Pe(u)):e[24]&&(Ye(e[24]),e[24]=null);try{O0(e),function rf(n){return ut.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&aF(n,e,t,2,r);const h=!(3&~i);if(h){const v=n.preOrderCheckHooks;null!==v&&gl(e,v,null)}else{const v=n.preOrderHooks;null!==v&&df(e,v,0,null),G0(e,0)}if(function g7(n){for(let e=kx(n);null!==e;e=Fx(e)){if(!(2&e[2]))continue;const t=e[9];for(let r=0;r<t.length;r++)dm(t[r])}}(e),TF(e),CF(e,0),null!==n.contentQueries&&Ck(n,e),h){const v=n.contentCheckHooks;null!==v&&gl(e,v)}else{const v=n.contentHooks;null!==v&&df(e,v,1),G0(e,1)}!function _7(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)vc(~i);else{const o=i,s=t[++r],a=t[++r];sf(s,o);const c=e[o];a(2,c)}}}finally{vc(-1)}}(n,e);const m=n.components;null!==m&&SF(e,m,0);const _=n.viewQuery;if(null!==_&&PC(2,_,r),h){const v=n.viewCheckHooks;null!==v&&gl(e,v)}else{const v=n.viewHooks;null!==v&&df(e,v,2),G0(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[22]){for(const v of e[22])v();e[22]=null}EF(e),e[2]&=-73}catch(h){throw dl(e),h}finally{null!==u&&(Qe(u,c),a&&function l7(n){n.lView[24]!==n&&(n.lView=null,bF.push(n))}(u)),Dm()}}function CF(n,e){for(let t=kx(n);null!==t;t=Fx(t))for(let r=10;r<t.length;r++)AF(t[r],e)}function m7(n,e,t){const r=gi(e,n);AF(r,t)}function AF(n,e){lm(n)&&cA(n,e)}function cA(n,e){const r=n[1],i=n[2],o=n[24];let s=!!(0===e&&16&i);if(s||=!!(64&i&&0===e),s||=!!(1024&i),s||=!(!o?.dirty||!dt(o)),s||=!1,o&&(o.dirty=!1),n[2]&=-9217,s)DF(r,n,r.template,n[8]);else if(8192&i){TF(n),CF(n,1);const a=r.components;null!==a&&SF(n,a,1),EF(n)}}function SF(n,e,t){for(let r=0;r<e.length;r++)m7(n,e[r],t)}function f_(n,e){const t=tf()?64:1088;for(n[10].changeDetectionScheduler?.notify(e);n;){n[2]|=t;const r=zs(n);if($s(n)&&!r)return n;n=r}return null}function RF(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Bf(n,e,t,r=!0){const i=e[1];if(function y7(n,e,t,r){const i=10+r,o=t.length;r>0&&(t[i-1][4]=e),r<o-10?(e[4]=t[i],kh(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const s=e[16];null!==s&&t!==s&&MF(s,e);const a=e[18];null!==a&&a.insertView(n),Qu(e),e[2]|=128}(i,e,n,t),r){const s=oA(t,n),a=e[11],c=a.parentNode(n[7]);null!==c&&function e7(n,e,t,r,i,o){r[0]=i,r[5]=e,kE(n,r,t,1,i,o)}(i,n[5],a,e,c,s)}const o=e[6];null!==o&&null!==o.firstChild&&(o.firstChild=null)}function p_(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[16];null!==i&&i!==n&&tA(i,r),e>0&&(n[t-1][4]=r[4]);const o=uc(n,10+e);!function dF(n,e){hF(n,e),e[0]=null,e[5]=null}(r[1],r);const s=o[18];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function MF(n,e){const t=n[9],r=e[3];(Ln(r)||e[15]!==r[3][15])&&(n[2]|=2),null===t?n[9]=[e]:t.push(e)}let g_=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){const e=this._lView,t=e[1];return Vf(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return Ji(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Cr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(p_(e,r),uc(t,r))}this._attachedToViewContainer=!1}h_(this._lView[1],this._lView)}onDestroy(e){hl(this._lView,e)}markForCheck(){f_(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[2]&=-129}reattach(){Qu(this._lView),this._lView[2]|=128}detectChanges(){this._lView[2]|=1024,FE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=$s(this._lView),t=this._lView[16];null!==t&&!e&&tA(t,this._lView),hF(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new se(902,!1);this._appRef=e;const t=$s(this._lView),r=this._lView[16];null!==r&&!t&&MF(r,this._lView),Qu(this._lView)}},Rr=(()=>class n{static __NG_ELEMENT_ID__=b7})();const v7=Rr,E7=class extends v7{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=Ff(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new g_(i)}};function b7(){return LE(vt(),J())}function LE(n,e){return 4&n.type?new E7(e,n,ba(n,e)):null}function Uf(n,e,t,r,i){let o=n.data[e];if(null===o)o=function fA(n,e,t,r,i){const o=Xh(),s=ym(),c=n.data[e]=function M7(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return yc()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,r,i);return function N7(n,e,t,r){null===n.firstChild&&(n.firstChild=e),null!==t&&(r?null==t.child&&null!==e.parent&&(t.child=e):null===t.next&&(t.next=e,e.prev=t))}(n,c,o,s),c}(n,e,t,r,i),function F0(){return ut.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const s=function pl(){const n=ut.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return eo(o,!0),o}let _K=class{},eL=class{};class yK{resolveComponentFactory(e){throw Error(`No component factory found for ${wr(e)}.`)}}let GE=class{static NULL=new yK};class bA{}let Ca=(()=>class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>function vK(){const n=J(),t=gi(vt().index,n);return(Ln(t)?t:n)[11]}()})(),EK=(()=>{class n{static \u0275prov=fe({token:n,providedIn:"root",factory:()=>null})}return n})();const TA={};class $f{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Mu(r);const i=this.injector.get(e,TA,r);return i!==TA||t===TA?i:this.parentInjector.get(e,t,r)}}function wA(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=Ih(i,a):2==o&&(r=Ih(r,a+": "+e[++s]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ve(n,e=It.Default){const t=J();return null===t?me(n,e):K0(vt(),t,ft(n),e)}function DA(n,e,t,r,i){const o=null===r?null:{"":-1},s=i(n,t);if(null!==s){let a,c=null,u=null;const h=function DK(n){let e=null,t=!1;for(let s=0;s<n.length;s++){const a=n[s];if(0===s&&xi(a)&&(e=a),null!==a.findHostDirectiveDefs){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(const s of n)null!==s.findHostDirectiveDefs&&(r??=[],i??=new Map,o??=new Map,CK(s,r,o,i)),s===e&&(r??=[],r.push(s));return null!==r?(r.push(...null===e?n:n.slice(1)),[r,i,o]):null}(s);null===h?a=s:[a,c,u]=h,function SK(n,e,t,r,i,o,s){const a=r.length;let c=!1;for(let _=0;_<a;_++){const v=r[_];!c&&xi(v)&&(c=!0,AK(n,t,_)),xm(gf(t,e),n,v.type)}!function xK(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,a);for(let _=0;_<a;_++){const v=r[_];v.providersResolver&&v.providersResolver(v)}let u=!1,h=!1,m=d_(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let _=0;_<a;_++){const v=r[_];if(t.mergedAttrs=_l(t.mergedAttrs,v.hostAttrs),NK(n,t,e,m,v),OK(m,v,i),null!==s&&s.has(v)){const[D,A]=s.get(v);t.directiveToIndex.set(v.type,[m,D+t.directiveStart,A+t.directiveStart])}else(null===o||!o.has(v))&&t.directiveToIndex.set(v.type,m);null!==v.contentQueries&&(t.flags|=4),(null!==v.hostBindings||null!==v.hostAttrs||0!==v.hostVars)&&(t.flags|=64);const I=v.type.prototype;!u&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!h&&(I.ngOnChanges||I.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),m++}!function RK(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){const i=n.data[r];if(null!==t&&t.has(i)){const o=t.get(i);iL(0,e,o,r),iL(1,e,o,r),sL(e,r,!0)}else rL(0,e,i,r),rL(1,e,i,r),sL(e,r,!1)}}(n,t,o)}(n,e,t,a,o,c,u)}null!==o&&null!==r&&function wK(n,e,t){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const o=t[e[i+1]];if(null==o)throw new se(-301,!1);r.push(e[i],o)}}(t,r,o)}function CK(n,e,t,r){const i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function AK(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function rL(n,e,t,r){const i=0===n?t.inputs:t.outputs;for(const o in i)if(i.hasOwnProperty(o)){let s;s=0===n?e.inputs??={}:e.outputs??={},s[o]??=[],s[o].push(r),oL(e,o)}}function iL(n,e,t,r){const i=0===n?t.inputs:t.outputs;for(const o in i)if(i.hasOwnProperty(o)){const s=i[o];let a;a=0===n?e.hostDirectiveInputs??={}:e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),oL(e,s)}}function oL(n,e){"class"===e?n.flags|=8:"style"===e&&(n.flags|=16)}function sL(n,e,t){const{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(null===r||!t&&null===i||t&&null===o||jC(n))return n.initialInputs??=[],void n.initialInputs.push(null);let s=null,a=0;for(;a<r.length;){const c=r[a];if(0!==c)if(5!==c){if("number"==typeof c)break;if(!t&&i.hasOwnProperty(c)){const u=i[c];for(const h of u)if(h===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){const u=o[c];for(let h=0;h<u.length;h+=2)if(u[h]===e){s??=[],s.push(u[h+1],r[a+1]);break}}a+=2}else a+=2;else a+=4}n.initialInputs??=[],n.initialInputs.push(s)}function NK(n,e,t,r,i){n.data[r]=i;const o=i.factory||(i.factory=Vs(i.type)),s=new ml(o,xi(i),ve);n.blueprint[r]=s,t[r]=s,function MK(n,e,t,r,i){const o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function PK(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,r,o)}}(n,e,r,d_(n,t,i.hostVars,_t),i)}function OK(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;xi(e)&&(t[""]=n)}}function aL(n,e,t,r,i,o,s,a){const c=e.consts,h=Uf(e,n,2,r,Xi(c,s));return o&&DA(e,t,h,Xi(c,a),i),h.mergedAttrs=_l(h.mergedAttrs,h.attrs),null!==h.attrs&&wA(h,h.attrs,!1),null!==h.mergedAttrs&&wA(h,h.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,h),h}function cL(n,e){uf(n,e),Uu(e)&&n.queries.elementEnd(e)}class lL extends GE{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Tt(e);return new D_(t,this.ngModule)}}class D_ extends eL{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=function kK(n){return Object.keys(n).map(e=>{const[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:!!(r&ME.SignalBased)};return i&&(o.transform=i),o})}(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=function FK(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function x9(n){return n.map(O9).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){const o=He(null);try{const s=this.componentDef,a=r?["ng-version","19.2.10"]:function k9(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&e.push(o,n[++r]):8===i&&t.push(o);else{if(!Ks(i))break;i=o}r++}return t.length&&e.push(1,...t),e}(this.componentDef.selectors[0]),c=GC(0,null,null,1,0,null,null,null,null,[a],null),u=function LK(n,e,t){let r=e instanceof cr?e:e?.injector;return r&&null!==n.getStandaloneInjector&&(r=n.getStandaloneInjector(r)||r),r?new $f(t,r):t}(s,i||this.ngModule,e),h=function VK(n){const e=n.get(bA,null);if(null===e)throw new se(407,!1);return{rendererFactory:e,sanitizer:n.get(EK,null),changeDetectionScheduler:n.get(qo,null)}}(u),m=h.rendererFactory.createRenderer(null,s),_=r?function U9(n,e,t,r){const o=r.get(Kx,!1)||t===bs.ShadowDom,s=n.selectRootElement(e,o);return function j9(n){cF(n)}(s),s}(m,r,s.encapsulation,u):function BK(n,e){const t=(n.selectors[0][0]||"div").toLowerCase();return RE(e,t,"svg"===t?"svg":"math"===t?"math":null)}(s,m),v=NE(null,c,null,512|zC(s),null,null,h,m,u,null,null);v[26]=_,wm(v);let I=null;try{const D=aL(26,c,v,"#host",()=>[this.componentDef],!0,0);_&&(iF(m,_,D),Do(_,v)),PE(c,v,D),OC(c,D,v),cL(c,D),void 0!==t&&function jK(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const o=t[i];r.push(null!=o&&o.length?Array.from(o):null)}}(D,this.ngContentSelectors,t),I=gi(D.index,v),v[8]=I[8],OE(c,v,null)}catch(D){throw null!==I&&nC(I),nC(v),D}finally{Dm()}return new UK(this.componentType,v)}finally{He(o)}}}class UK extends _K{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=Zi(t[1],26),this.location=ba(this._tNode,t),this.instance=gi(this._tNode.index,t)[8],this.hostView=this.changeDetectorRef=new g_(t,void 0,!1),this.componentType=e}setInput(e,t){const r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const i=this._rootLView;ZC(r,i[1],i,e,t),this.previousInputValues.set(e,t),f_(gi(r.index,i),1)}get injector(){return new er(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}let So=(()=>class n{static __NG_ELEMENT_ID__=HK})();function HK(){return hL(vt(),J())}const $K=So,uL=class extends $K{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ba(this._hostTNode,this._hostLView)}get injector(){return new er(this._hostTNode,this._hostLView)}get parentInjector(){const e=vl(this._hostTNode,this._hostLView);if(Zu(e)){const t=ed(e,this._hostLView),r=Xu(e);return new er(t[1].data[r+8],t)}return new er(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=dL(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedViewImpl(t||{},o,null);return this.insertImpl(a,i,ud(this._hostTNode,null)),a}createComponent(e,t,r,i,o){const s=e&&!function zh(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const I=t||{};a=I.index,r=I.injector,i=I.projectableNodes,o=I.environmentInjector||I.ngModuleRef}const c=s?e:new D_(Tt(e)),u=r||this.parentInjector;if(!o&&null==c.ngModule){const D=(s?u:this.parentInjector).get(cr,null);D&&(o=D)}Tt(c.componentType??{});const v=c.create(u,i,null,o);return this.insertImpl(v.hostView,a,ud(this._hostTNode,null)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){const i=e._lView;if(function um(n){return Cr(n[3])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=i[3],u=new uL(c,c[5],c[3]);u.detach(u.indexOf(e))}}const o=this._adjustIndex(t),s=this._lContainer;return Bf(s,i,o,r),e.attachToViewContainerRef(),kh(CA(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=dL(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=p_(this._lContainer,t);r&&(uc(CA(this._lContainer),t),h_(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=p_(this._lContainer,t);return r&&null!=uc(CA(this._lContainer),t)?new g_(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function dL(n){return n[8]}function CA(n){return n[8]||(n[8]=[])}function hL(n,e){let t;const r=e[n.index];return Cr(r)?t=r:(t=RF(r,e,null,n),e[n.index]=t,WC(e,t)),fL(t,e,n,r),new uL(t,n,e)}let fL=function gL(n,e,t,r){if(n[7])return;let i;i=8&t.type?Bt(r):function GK(n,e){const t=n[11],r=t.createComment(""),i=qr(e,n),o=t.parentNode(i);return ld(t,o,r,t.nextSibling(i),!1),r}(e,t),n[7]=i};class SA{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new SA(this.queryList)}setDirty(){this.queryList.setDirty()}}class RA{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){const s=t.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new RA(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==xA(e,t).matches&&this.queries[t].setDirty()}}class mL{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,this.predicate="string"==typeof e?function ZK(n){return n.split(",").map(e=>e.trim())}(e):e}}class NA{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==t?t.push(o):t=[o])}return null!==t?new NA(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class MA{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new MA(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(e,t,KK(t,o)),this.matchTNodeWithReadOption(e,t,vf(t,e,o,!1,!1))}else r===Rr?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,vf(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===tn||i===So||i===Rr&&4&t.type)this.addMatch(t.index,-2);else{const o=vf(t,e,i,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function KK(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function YK(n,e,t,r){return-1===t?function QK(n,e){return 11&n.type?ba(n,e):4&n.type?LE(n,e):null}(e,n):-2===t?function JK(n,e,t){return t===tn?ba(e,n):t===Rr?LE(e,n):t===So?hL(e,n):void 0}(n,e,r):td(n,n[1],t,e)}function _L(n,e,t,r){const i=e[18].queries[r];if(null===i.matches){const o=n.data,s=t.matches,a=[];for(let c=0;null!==s&&c<s.length;c+=2){const u=s[c];a.push(u<0?null:YK(e,o[u],s[c+1],t.metadata.read))}i.matches=a}return i.matches}function PA(n,e,t,r){const i=n.queries.getByIndex(t),o=i.matches;if(null!==o){const s=_L(n,e,i,t);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)r.push(s[a/2]);else{const u=o[a+1],h=e[-c];for(let m=10;m<h.length;m++){const _=h[m];_[16]===_[3]&&PA(_[1],_,u,r)}if(null!==h[9]){const m=h[9];for(let _=0;_<m.length;_++){const v=m[_];PA(v[1],v,u,r)}}}}}return r}function vL(n,e,t){const r=ct();return r.firstCreatePass&&(function bL(n,e,t){null===n.queries&&(n.queries=new NA),n.queries.track(new MA(e,t))}(r,new mL(n,e,t),-1),!(2&~e)&&(r.staticViewQueries=!0)),function yL(n,e,t){const r=new Nq(!(4&~t));return function SD(n,e,t,r){const i=_c(e);i.push(t),n.firstCreatePass&&hm(n).push(r,i.length-1)}(n,e,r,r.destroy),(e[18]??=new RA).queries.push(new SA(r))-1}(r,J(),e)}function xA(n,e){return n.queries.getByIndex(e)}function IL(n,e){const t=n[1],r=xA(t,e);return r.crossesNgTemplate?PA(t,n,e,[]):_L(t,n,r,e)}let pd=class{},OL=class{};class LA extends pd{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new lL(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;const o=fi(e);this._bootstrapComponents=wa(o.bootstrap),this._r3Injector=jm(e,t,[{provide:pd,useValue:this},{provide:GE,useValue:this.componentFactoryResolver},...r],wr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class VA extends OL{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new LA(this.moduleType,e,[])}}class xL extends pd{injector;componentFactoryResolver=new lL(this);instance=null;constructor(e){super();const t=new Bs([...e.providers,{provide:pd,useValue:this},{provide:GE,useValue:this.componentFactoryResolver}],e.parent||il(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function WE(n,e,t=null){return new xL({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let dQ=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=Vh(0,t.type),i=r.length>0?WE([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=fe({token:n,providedIn:"environment",factory:()=>new n(me(cr))})}return n})();function Ur(n){return Ze(()=>{const e=kL(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===cE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(dQ).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||bs.Emulated,styles:n.styles||Vt,_:null,schemas:n.schemas||null,tView:null,id:""};e.standalone&&Co("NgStandalone"),FL(t);const r=n.dependencies;return t.directiveDefs=qE(r,!1),t.pipeDefs=qE(r,!0),t.id=function _Q(n){let e=0;const r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,"function"==typeof n.consts?"":n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(const o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function hQ(n){return Tt(n)||function Wr(n){return n[$o]||null}(n)}function fQ(n){return null!==n}function Jt(n){return Ze(()=>({type:n.type,bootstrap:n.bootstrap||Vt,declarations:n.declarations||Vt,imports:n.imports||Vt,exports:n.exports||Vt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function pQ(n,e){if(null==n)return Go;const t={};for(const r in n)if(n.hasOwnProperty(r)){const i=n[r];let o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=ME.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function gQ(n){if(null==n)return Go;const e={};for(const t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function ke(n){return Ze(()=>{const e=kL(n);return FL(e),e})}function oo(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function kL(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Go,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:!0===n.signals,selectors:n.selectors||Vt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:pQ(n.inputs,e),outputs:gQ(n.outputs),debugInfo:null}}function FL(n){n.features?.forEach(e=>e(n))}function qE(n,e){if(!n)return null;const t=e?pi:hQ;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(fQ)}function on(n){let e=function LL(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(xi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new se(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const s=n;s.inputs=BA(n.inputs),s.declaredInputs=BA(n.declaredInputs),s.outputs=BA(n.outputs);const a=i.hostBindings;a&&IQ(n,a);const c=i.viewQuery,u=i.contentQueries;if(c&&EQ(n,c),u&&bQ(n,u),yQ(n,i),Jw(n.outputs,i.outputs),xi(i)&&i.data.animation){const h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===on&&(t=!1)}}e=Object.getPrototypeOf(e)}!function vQ(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=_l(i.hostAttrs,t=_l(t,i.hostAttrs))}}(r)}function yQ(n,e){for(const t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;const r=e.inputs[t];void 0!==r&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function BA(n){return n===Go?{}:n===Vt?[]:n}function EQ(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function bQ(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,o)=>{e(r,i,o),t(r,i,o)}:e}function IQ(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function KE(n){return!!function HA(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Aa(n,e,t){return n[e]=t}function mr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function S_(n,e,t,r,i,o,s,a,c,u){const h=t+26,m=e.firstCreatePass?function NQ(n,e,t,r,i,o,s,a,c){const u=e.consts,h=Uf(e,n,4,s||null,a||null);gm()&&DA(e,t,h,Xi(u,c),QC),h.mergedAttrs=_l(h.mergedAttrs,h.attrs),uf(e,h);const m=h.tView=GC(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return null!==e.queries&&(e.queries.template(e,h),m.queries=e.queries.embeddedTView(h)),h}(h,e,n,r,i,o,s,a,c):e.data[h];eo(m,!1);const _=HL(e,n,m,t);Ec()&&xE(e,n,_,m),Do(_,n);const v=RF(_,n,_,m);return n[h]=v,WC(n,v),Kh(m)&&PE(e,n,m),null!=c&&KC(n,m,u),m}function wt(n,e,t,r,i,o,s,a){const c=J(),u=ct();return S_(c,u,n,e,t,r,i,Xi(u.consts,o),s,a),wt}let HL=function $L(n,e,t,r){return _s(!0),e[11].createComment("")};let zA=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const nV=new pe(""),XE=new pe("");let JA,QA=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];taskTrackingZone=null;constructor(t,r,i){this._ngZone=t,this.registry=r,JA||(function SY(n){JA=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{g.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static \u0275fac=function(r){return new(r||n)(me(g),me(YA),me(XE))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),YA=(()=>{class n{_applications=new Map;registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return JA?.findTestabilityInTree(this,t,r)??null}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),rV=(()=>{class n{static \u0275prov=fe({token:n,providedIn:"root",factory:()=>new RY})}return n})();class RY{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){const r=this.queues.get(e.zone);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){const t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);const r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(const[e,t]of this.queues)null===e?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(const t of e)e.delete(t),this.queuedEffectCount--,t.run()}}function N_(n){return!!n&&"function"==typeof n.then}function iV(n){return!!n&&"function"==typeof n.subscribe}const oV=new pe("");function sV(n){return gs([{provide:oV,multi:!0,useValue:n}])}let aV=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=N(oV,{optional:!0})??[];injector=N(Wt);constructor(){}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const o=bo(this.injector,i);if(N_(o))t.push(o);else if(iV(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const M_=new pe("");function lV(n,e){return Array.isArray(e)?e.reduce(lV,n):{...n,...e}}let so=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=N(iE);afterRenderManager=N(vC);zonelessEnabled=N(wc);rootEffectScheduler=N(rV);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Re;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=N(Es).hasPendingTasks.pipe($e(t=>!t));constructor(){N(Tf,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=N(cr);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Wt.NULL){const o=t instanceof eL;if(!this._injector.get(aV).done)throw new se(405,"");let a;a=o?t:this._injector.get(GE).resolveComponentFactory(t),this.componentTypes.push(a.componentType);const c=function NY(n){return n.isBoundToModule}(a)?void 0:this._injector.get(pd),h=a.create(i,[],r||a.selector,c),m=h.location.nativeElement,_=h.injector.get(nV,null);return _?.registerApplication(m),h.onDestroy(()=>{this.detachView(h.hostView),eb(this.components,h),_?.unregisterApplication(m)}),this._loadComponent(h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){null!==this.tracingSnapshot?this.tracingSnapshot.run(yC.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new se(101,!1);const t=He(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,He(t),this.afterTick.next()}};synchronize(){null===this._rendererFactory&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(bA,null,{optional:!0}));let t=0;for(;0!==this.dirtyFlags&&t++<10;)this.synchronizeOnce()}synchronizeOnce(){if(16&this.dirtyFlags&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),7&this.dirtyFlags){const t=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)PY(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),23&this.dirtyFlags)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:t})=>Ku(t))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;eb(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(M_,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>eb(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new se(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function eb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function PY(n,e,t,r){(t||Ku(n))&&FE(n,e,t&&!r?0:1)}function Sn(n,e,t,r){const i=J();return mr(i,To(),e)&&(ct(),Da(gn(),i,n,e,t,r)),Sn}function Kf(n,e,t,r){return mr(n,To(),t)?e+mt(t)+r:_t}function tb(n,e){return n<<17|e<<2}function _d(n){return n>>17&32767}function nS(n){return 2|n}function np(n){return(131068&n)>>2}function rS(n,e){return-131069&n|e<<2}function iS(n){return 1|n}function AV(n,e,t,r){const i=n[t+1],o=null===e;let s=r?_d(i):np(i),a=!1;for(;0!==s&&(!1===a||o);){const u=n[s+1];yJ(n[s],e)&&(a=!0,n[s+1]=r?iS(u):nS(u)),s=r?_d(u):np(u)}a&&(n[t+1]=r?nS(i):iS(i))}function yJ(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&xu(n,e)>=0}const Kr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function SV(n){return n.substring(Kr.key,Kr.keyEnd)}function RV(n,e){const t=Kr.textEnd;return t===e?-1:(e=Kr.keyEnd=function IJ(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Kr.key=e,t),rp(n,e,t))}function rp(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function pt(n,e,t){const r=J();return mr(r,To(),e)&&Ao(ct(),gn(),r,n,e,r[11],t,!1),pt}function oS(n,e,t,r,i){ZC(e,n,t,i?"class":"style",r)}function sn(n,e){return function Qs(n,e,t,r){const i=J(),o=ct(),s=qs(2);o.firstUpdatePass&&FV(o,n,s,r),e!==_t&&mr(i,s,e)&&VV(o,o.data[Br()],i,i[11],n,i[s+1]=function OJ(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=wr(wl(n)))),n}(e,t),r,s)}(n,e,null,!0),sn}function Ml(n){Ys(MJ,Ra,n,!0)}function Ra(n,e){for(let t=function EJ(n){return function MV(n){Kr.key=0,Kr.keyEnd=0,Kr.value=0,Kr.valueEnd=0,Kr.textEnd=n.length}(n),RV(n,rp(n,0,Kr.textEnd))}(e);t>=0;t=RV(e,t))Pi(n,SV(e),!0)}function Ys(n,e,t,r){const i=ct(),o=qs(2);i.firstUpdatePass&&FV(i,null,o,r);const s=J();if(t!==_t&&mr(s,o,t)){const a=i.data[Br()];if(UV(a,r)&&!kV(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=Ih(c,t||"")),oS(i,a,s,t,r)}else!function PJ(n,e,t,r,i,o,s,a){i===_t&&(i=Vt);let c=0,u=0,h=0<i.length?i[0]:null,m=0<o.length?o[0]:null;for(;null!==h||null!==m;){const _=c<i.length?i[c+1]:void 0,v=u<o.length?o[u+1]:void 0;let D,I=null;h===m?(c+=2,u+=2,_!==v&&(I=m,D=v)):null===m||null!==h&&h<m?(c+=2,I=h):(u+=2,I=m,D=v),null!==I&&VV(n,e,t,r,I,D,s,a),h=c<i.length?i[c]:null,m=u<o.length?o[u]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function NJ(n,e,t){if(null==t||""===t)return Vt;const r=[],i=wl(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(n,e,t),r,o)}}function kV(n,e){return e>=n.expandoStartIndex}function FV(n,e,t,r){const i=n.data;if(null===i[t+1]){const o=i[Br()],s=kV(n,t);UV(o,r)&&null===e&&!s&&(e=!1),e=function CJ(n,e,t,r){const i=function Im(n){const e=ut.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=O_(t=sS(null,n,e,t,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==i)if(t=sS(i,n,e,t,r),null===o){let c=function AJ(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==np(r))return n[_d(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=sS(null,n,e,c[1],r),c=O_(c,e.attrs,r),function SJ(n,e,t,r){n[_d(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else o=function RJ(n,e,t){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=O_(r,n[o].hostAttrs,t);return O_(r,e.attrs,t)}(n,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),t}(i,o,e,r),function mJ(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=_d(s),c=np(s);n[r]=t;let h,u=!1;if(Array.isArray(t)?(h=t[1],(null===h||xu(t,h)>0)&&(u=!0)):h=t,i)if(0!==c){const _=_d(n[a+1]);n[r+1]=tb(_,a),0!==_&&(n[_+1]=rS(n[_+1],r)),n[a+1]=function pJ(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=tb(a,0),0!==a&&(n[a+1]=rS(n[a+1],r)),a=r;else n[r+1]=tb(c,0),0===a?a=r:n[c+1]=rS(n[c+1],r),c=r;u&&(n[r+1]=nS(n[r+1])),AV(n,h,r,!0),AV(n,h,r,!1),function _J(n,e,t,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&xu(o,e)>=0&&(t[r+1]=iS(t[r+1]))}(e,h,n,r,o),s=tb(a,c),o?e.classBindings=s:e.styleBindings=s}(i,o,e,t,s,r)}}function sS(n,e,t,r,i){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],r=O_(r,o.hostAttrs,i),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function O_(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Pi(n,s,!!t||e[++o]))}return void 0===n?null:n}function MJ(n,e,t){const r=String(e);""!==r&&!r.includes(" ")&&Pi(n,r,t)}function VV(n,e,t,r,i,o,s,a){if(!(3&e.type))return;const c=n.data,u=c[a+1],h=function gJ(n){return!(1&~n)}(u)?BV(c,e,t,i,np(u),s):void 0;nb(h)||(nb(o)||function fJ(n){return!(2&~n)}(u)&&(o=BV(c,null,t,i,a,s)),function s7(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:Dl.DashCase;null==i?n.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Dl.Important),n.setStyle(t,r,i,o))}}(r,s,_a(Br(),t),i,o))}function BV(n,e,t,r,i,o){const s=null===e;let a;for(;i>0;){const c=n[i],u=Array.isArray(c),h=u?c[1]:c,m=null===h;let _=t[i+1];_===_t&&(_=m?Vt:void 0);let v=m?Ou(_,r):h===r?_:void 0;if(u&&!nb(v)&&(v=Ou(c,r)),nb(v)&&(a=v,s))return a;const I=n[i+1];i=s?_d(I):np(I)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=Ou(c,r))}return a}function nb(n){return void 0!==n}function UV(n,e){return!!(n.flags&(e?8:16))}function aS(n,e,t){Ys(Pi,Ra,Kf(J(),n,e,t),!0)}function Ne(n,e,t,r){const i=J(),o=ct(),s=26+n,a=i[11],c=o.firstCreatePass?aL(s,o,i,e,QC,gm(),t,r):o.data[s],u=GV(o,i,c,a,e,n);i[s]=u;const h=Kh(c);return eo(c,!0),iF(a,u,c),!Cl(c)&&Ec()&&xE(o,i,u,c),(0===function pm(){return ut.lFrame.elementDepthCount}()||h)&&Do(u,i),function x0(){ut.lFrame.elementDepthCount++}(),h&&(PE(o,i,c),OC(o,c,i)),null!==r&&KC(i,c),Ne}function Fe(){let n=vt();ym()?ef():(n=n.parent,eo(n,!1));const e=n;(function mm(n){return ut.skipHydrationRootTNode===n})(e)&&function MD(){ut.skipHydrationRootTNode=null}(),function k0(){ut.lFrame.elementDepthCount--}();const t=ct();return t.firstCreatePass&&cL(t,e),null!=e.classesWithoutHost&&function UD(n){return!!(8&n.flags)}(e)&&oS(t,e,J(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function jD(n){return!!(16&n.flags)}(e)&&oS(t,e,J(),e.stylesWithoutHost,!1),Fe}function lr(n,e,t,r){return Ne(n,e,t,r),Fe(),lr}let GV=(n,e,t,r,i,o)=>(_s(!0),RE(r,i,function lf(){return ut.lFrame.currentNamespace}()));function Pa(n,e,t){const r=J(),i=ct(),o=n+26,s=i.firstCreatePass?function ZJ(n,e,t,r,i){const o=e.consts,s=Xi(o,r),a=Uf(e,n,8,"ng-container",s);null!==s&&wA(a,s,!0);const c=Xi(o,i);return gm()&&DA(e,t,a,c,QC),a.mergedAttrs=_l(a.mergedAttrs,a.attrs),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,t):i.data[o];eo(s,!0);const a=zV(i,r,s,n);return r[o]=a,Ec()&&xE(i,r,a,s),Do(a,r),Kh(s)&&(PE(i,r,s),OC(i,s,r)),null!=t&&KC(r,s),Pa}function Oa(){let n=vt();const e=ct();return ym()?ef():(n=n.parent,eo(n,!1)),e.firstCreatePass&&(uf(e,n),Uu(n)&&e.queries.elementEnd(n)),Oa}let zV=(n,e,t,r)=>(_s(!0),$C(e[11],""));function ao(){return J()}function Ko(n,e,t){const r=J();return mr(r,To(),e)&&Ao(ct(),gn(),r,n,e,r[11],t,!0),Ko}const yd=void 0;var nZ=["en",[["a","p"],["AM","PM"],yd],[["AM","PM"],yd,yd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yd,"{1} 'at' {0}",yd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function tZ(n){const e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===t?1:5}];let ip={};function co(n){const e=function rZ(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=KV(e);if(t)return t;const r=e.split("-")[0];if(t=KV(r),t)return t;if("en"===r)return nZ;throw new se(701,!1)}function KV(n){return n in ip||(ip[n]=bn.ng&&bn.ng.common&&bn.ng.common.locales&&bn.ng.common.locales[n]),ip[n]}var Vn=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Vn||{});const ib="en-US";let QV=ib;function f2(n,e,t){return function r(i){if(i===Function)return t;f_(Wo(n)?gi(n.index,e):e,5);const s=e[8];let a=p2(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=p2(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function p2(n,e,t,r){const i=He(null);try{return!1!==t(r)}catch(o){return function GZ(n,e){const t=n[9],r=t?t.get(ro,null):null;r&&r.handleError(e)}(n,o),!1}finally{He(i)}}function g2(n,e,t,r,i,o){const a=e[1],h=e[t][a.data[t].outputs[r]],m=a.firstCreatePass?hm(a):null,_=_c(e),v=h.subscribe(o),I=_.length;_.push(o,v),m&&m.push(i,n.index,I,-(I+1))}const gS=new Map;function Ft(n,e,t,r){const i=J(),o=ct(),s=vt();return mS(o,i,i[11],s,n,e,r),Ft}function mS(n,e,t,r,i,o,s){const a=Kh(r),u=n.firstCreatePass?hm(n):null,h=_c(e);let m=!0;if(3&r.type||s){const _=qr(r,e),v=s?s(_):_,I=h.length,D=s?O=>s(Bt(O[r.index])):r.index;let A=null;if(!s&&a&&(A=function qZ(n,e,t,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===t&&i[o+1]===r){const a=e[7],c=i[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(n,e,i,r.index)),null!==A)(A.__ngLastListenerFn__||A).__ngNextListenerFn__=o,A.__ngLastListenerFn__=o,m=!1;else{o=f2(r,e,o);const O=e[9].get(Cc);gS.get(O)?.(v,i,o);const j=t.listen(v,i,o);h.push(o,j),u&&u.push(i,D,I,I+1)}}else o=f2(r,e,o);if(m){const _=r.outputs?.[i],v=r.hostDirectiveOutputs?.[i];if(v&&v.length)for(let I=0;I<v.length;I+=2)g2(r,e,v[I],v[I+1],i,o);if(_&&_.length)for(const I of _)g2(r,e,I,i,i,o)}}function ze(n=1){return function kD(n){return(ut.lFrame.contextLView=function Zh(n,e){for(;n>0;)e=e[14],n--;return e}(n,ut.lFrame.contextLView))[8]}(n)}function KZ(n,e){let t=null;const r=function R9(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?Zk(n,o,!0):P9(r,o))return i}else t=i}return t}function cb(n){const e=J()[15][5];if(!e.projection){const r=e.projection=function rl(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(n?n.length:1,null),i=r.slice();let o=e.child;for(;null!==o;){if(128!==o.type){const s=n?KZ(o,n):0;null!==s&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function lb(n,e=0,t,r,i,o){const s=J(),a=ct(),c=r?n+1:null;null!==c&&S_(s,a,c,r,i,o,null,t);const u=Uf(a,26+n,16,null,t||null);null===u.projection&&(u.projection=e),ef();const m=!s[6]||yc();null===s[15][5].projection[u.projection]&&null!==c?function QZ(n,e,t){const r=26+t,i=e.data[r],o=n[r];Bf(o,Ff(n,i,void 0,{dehydratedView:null}),0,ud(i,null))}(s,a,c):m&&!Cl(u)&&function i7(n,e,t){vF(e[11],0,e,t,rA(n,t,e),pF(t.parent||e[5],t,e))}(a,s,u)}function ub(n,e,t){return db(n,"",e,"",t),ub}function db(n,e,t,r,i){const o=J(),s=Kf(o,e,t,r);return s!==_t&&Ao(ct(),gn(),o,n,s,o[11],i,!1),db}function Js(n,e,t){vL(n,e,t)}function mn(n){const e=J(),t=ct(),r=Tm();af(r+1);const i=xA(t,r);if(n.dirty&&function AD(n){return!(4&~n[2])}(e)===!(2&~i.metadata.flags)){if(null===i.matches)n.reset([]);else{const o=IL(e,r);n.reset(o,wx),n.notifyOnChanges()}return!0}return!1}function _n(){return function OA(n,e){return n[18].queries[e].queryList}(J(),Tm())}function Zs(n){return Gs(function vm(){return ut.lFrame.contextLView}(),26+n)}function qt(n,e=""){const t=J(),r=ct(),i=n+26,o=r.firstCreatePass?Uf(r,i,1,e,null):r.data[i],s=x2(r,t,o,e,n);t[i]=s,Ec()&&xE(r,t,s,o),eo(o,!1)}let x2=(n,e,t,r,i)=>(_s(!0),function HC(n,e){return n.createText(e)}(e[11],r));function Nr(n){return vd("",n,""),Nr}function vd(n,e,t){const r=J(),i=Kf(r,n,e,t);return i!==_t&&function Nc(n,e,t){const r=_a(e,n);!function eF(n,e,t){n.setValue(e,t)}(n[11],r,t)}(r,Br(),i),vd}function hb(n,e,t){Cx(e)&&(e=e());const r=J();return mr(r,To(),e)&&Ao(ct(),gn(),r,n,e,r[11],t,!1),hb}function yS(n,e){const t=Cx(n);return t&&n.set(e),t}function fb(n,e){const t=J(),r=ct(),i=vt();return mS(r,t,t[11],i,n,e),fb}function vS(n,e,t,r,i){if(n=ft(n),Array.isArray(n))for(let o=0;o<n.length;o++)vS(n[o],e,t,r,i);else{const o=ct(),s=J(),a=vt();let c=fc(n)?n:ft(n.provide);const u=Gh(n),h=1048575&a.providerIndexes,m=a.directiveStart,_=a.providerIndexes>>20;if(fc(n)||!n.multi){const v=new ml(u,i,ve),I=bS(c,e,i?h:h+_,m);-1===I?(xm(gf(a,s),o,c),ES(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(v),s.push(v)):(t[I]=v,s[I]=v)}else{const v=bS(c,e,h+_,m),I=bS(c,e,h,h+_),A=I>=0&&t[I];if(i&&!A||!i&&!(v>=0&&t[v])){xm(gf(a,s),o,c);const O=function mX(n,e,t,r,i){const o=new ml(n,t,ve);return o.multi=[],o.index=e,o.componentProviders=0,z2(o,i,r&&!t),o}(i?gX:pX,t.length,i,r,u);!i&&A&&(t[I].providerFactory=O),ES(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(O),s.push(O)}else ES(o,n,v>-1?v:I,z2(t[i?I:v],u,!i&&r));!i&&r&&A&&t[I].componentProviders++}}}function ES(n,e,t,r){const i=fc(e),o=function uD(n){return!!n.useClass}(e);if(i||o){const c=(o?ft(e.useClass):e).prototype.ngOnDestroy;if(c){const u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const h=u.indexOf(t);-1===h?u.push(t,[r,c]):u[h+1].push(r,c)}else u.push(t,c)}}}function z2(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function bS(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function pX(n,e,t,r,i){return IS(this.multi,[])}function gX(n,e,t,r,i){const o=this.multi;let s;if(this.providerFactory){const a=this.providerFactory.componentProviders,c=td(r,r[1],this.providerFactory.index,i);s=c.slice(0,a),IS(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],IS(o,s);return s}function IS(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Rn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function fX(n,e,t){const r=ct();if(r.firstCreatePass){const i=xi(n);vS(t,r.data,r.blueprint,i,!0),vS(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}function K2(n,e,t,r,i,o){const s=e+t;return mr(n,s,i)?Aa(n,s+1,o?r.call(o,i):r(i)):function j_(n,e){const t=n[e];return t===_t?void 0:t}(n,s+1)}function No(n,e){const t=ct();let r;const i=n+26;t.firstCreatePass?(r=function CX(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const o=r.factory||(r.factory=Vs(r.type)),a=Yi(ve);try{const c=yl(!1),u=o();return yl(c),function _S(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,J(),i,u),u}finally{Yi(a)}}function Mo(n,e,t){const r=n+26,i=J(),o=Gs(i,r);return function H_(n,e){return n[1].data[e].pure}(i,r)?K2(i,mi(),e,o.transform,t,o):o.transform(t)}function Ts(n,e){return LE(n,e)}class G_{full;major;minor;patch;constructor(e){this.full=e;const t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}}const ree=new G_("19.2.10");class iee{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let oee=(()=>{class n{compileModuleSync(t){return new VA(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=wa(fi(t).declarations).reduce((s,a)=>{const c=Tt(a);return c&&s.push(new D_(c)),s},[]);return new iee(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cee=(()=>{class n{zone=N(g);changeDetectionScheduler=N(qo);applicationRef=N(so);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function SS({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new g({...RS(),scheduleInRootZone:t}),[{provide:g,useFactory:n},{provide:ni,multi:!0,useFactory:()=>{const r=N(cee,{optional:!0});return()=>r.initialize()}},{provide:ni,multi:!0,useFactory:()=>{const r=N(uee);return()=>{r.initialize()}}},!0===e?{provide:vs,useValue:!0}:[],{provide:Dc,useValue:t??tE}]}function RS(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}let uee=(()=>{class n{subscription=new Xn;initialized=!1;zone=N(g);pendingTasks=N(Es);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{g.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{g.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),z_=(()=>{class n{appRef=N(so);taskService=N(Es);ngZone=N(g);zonelessEnabled=N(wc);tracing=N(Tf,{optional:!0});disableScheduling=N(vs,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Xn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(l):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(N(Dc,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Te||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&5===t)return;let r=!1;switch(t){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 6:case 13:this.appRef.dirtyFlags|=2,r=!0;break;case 12:this.appRef.dirtyFlags|=16,r=!0;break;case 11:r=!0;break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;const i=this.useMicrotaskScheduler?rE:nE;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>i(()=>this.tick())):this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(l+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(0===this.appRef.dirtyFlags)return void this.cleanup();!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,rE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Mc=new pe("",{providedIn:"root",factory:()=>N(Mc,It.Optional|It.SkipSelf)||function dee(){return typeof $localize<"u"&&$localize.locale||ib}()}),yb=new pe(""),_ee=new pe("");function W_(n){return!n.moduleRef}let bB=(()=>{class n{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(t){this._injector=t}bootstrapModuleFactory(t,r){const i=r?.scheduleInRootZone,s=r?.ignoreChangesOutsideZone,a=[SS({ngZoneFactory:()=>function bl(n="zone.js",e){return"noop"===n?new Te:"zone.js"===n?new g(e):n}(r?.ngZone,{...RS({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}),scheduleInRootZone:i}),ignoreChangesOutsideZone:s}),{provide:qo,useExisting:z_}],c=function uQ(n,e,t){return new LA(n,e,t,!1)}(t.moduleType,this.injector,a);return function EB(n){const e=W_(n)?n.r3Injector:n.moduleRef.injector,t=e.get(g);return t.run(()=>{W_(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();const r=e.get(ro,null);let i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),W_(n)){const o=()=>e.destroy(),s=n.platformInjector.get(yb);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{const o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(yb);s.add(o),n.moduleRef.onDestroy(()=>{eb(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return function vee(n,e,t){try{const r=t();return N_(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(r,t,()=>{const o=e.get(aV);return o.runInitializers(),o.donePromise.then(()=>{if(function aZ(n){"string"==typeof n&&(QV=n.toLowerCase().replace(/_/g,"-"))}(e.get(Mc,ib)||ib),!e.get(_ee,!0))return W_(n)?e.get(so):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(W_(n)){const c=e.get(so);return void 0!==n.rootComponent&&c.bootstrap(n.rootComponent),c}return function yee(n,e){const t=n.injector.get(so);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new se(-403,!1);n.instance.ngDoBootstrap(t)}e.push(n)}(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){const i=lV({},r);return function aee(n,e,t){const r=new VA(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new se(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(yb,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(r){return new(r||n)(me(Wt))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Ol=null;const IB=new pe("");function TB(n,e,t=[]){const r=`Platform: ${e}`,i=new pe(r);return(o=[])=>{let s=MS();if(!s||s.injector.get(IB,!1)){const a=[...t,...o,{provide:i,useValue:!0}];n?n(a):function Eee(n){if(Ol&&!Ol.get(IB,!1))throw new se(400,!1);(function cV(){!function Xa(n){Za=n}(()=>{throw new se(600,!1)})})(),Ol=n;const e=n.get(bB);(function DB(n){const e=n.get(aC,null);bo(n,()=>{e?.forEach(t=>t())})})(n)}(function wB(n=[],e){return Wt.create({name:e,providers:[{provide:Fu,useValue:"platform"},{provide:yb,useValue:new Set([()=>Ol=null])},...n]})}(a,r))}return function bee(){const e=MS();if(!e)throw new se(401,!1);return e}()}}function MS(){return Ol?.get(bB)??null}let Qo=(()=>class n{static __NG_ELEMENT_ID__=Tee})();function Tee(n){return function wee(n,e,t){if(Wo(n)&&!t){const r=gi(n.index,e);return new g_(r,r)}return 175&n.type?new g_(e[15],e):null}(vt(),J(),!(16&~n))}class NB{constructor(){}supports(e){return KE(e)}create(e){return new Ree(e)}}const See=(n,e)=>e;class Ree{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||See}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const s=!r||t&&t.currentIndex<PB(r,i,o)?t:r,a=PB(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,null==s.previousIndex)i++;else{o||(o=[]);const u=a-i,h=c-i;if(u!=h){for(let _=0;_<u;_++){const v=_<o.length?o[_]:o[_]=0,I=v+_;h<=I&&I<u&&(o[_]=v+1)}o[s.previousIndex]=h-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!KE(e))throw new se(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),r=!0),t=t._next}else i=0,function SQ(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Nee(t,r),o,i),e}_verifyReinsertion(e,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new MB),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new MB),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Nee{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}}class Mee{_head=null;_tail=null;add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class MB{map=new Map;put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new Mee,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function PB(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function xB(){return new FS([new NB])}let FS=(()=>{class n{factories;static \u0275prov=fe({token:n,providedIn:"root",factory:xB});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||xB()),deps:[[n,new Pu,new ps]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new se(901,!1)}}return n})();const Fee=TB(null,"core",[]);let Lee=(()=>{class n{constructor(t){}static \u0275fac=function(r){return new(r||n)(me(so))};static \u0275mod=Jt({type:n});static \u0275inj=Rt({})}return n})();function jr(n){return function cn(n){const e=He(null);try{return n()}finally{He(e)}}(n)}function Pc(n,e){return function wn(n,e){const t=Object.create(Yn);t.computation=n,void 0!==e&&(t.equal=e);const r=()=>{if(yt(t),Be(t),t.value===ar)throw t.error;return t.value};return r[Et]=t,r}(n,e?.equal)}function US(n,e){const t=Tt(n),r=e.elementInjector||il();return new D_(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector)}const yr=new pe("");let tU=null;function xl(){return tU}class Ate{}let jS=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:()=>N(Rte),providedIn:"platform"})}return n})();const Ste=new pe("");let Rte=(()=>{class n extends jS{_location;_history;_doc=N(yr);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xl().getBaseHref(this._doc)}onPopState(t){const r=xl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=xl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function HS(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function nU(n){const e=n.search(/#|\?|$/);return"/"===n[e-1]?n.slice(0,e-1)+n.slice(e):n}function Oc(n){return n&&"?"!==n[0]?`?${n}`:n}let bd=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:()=>N(iU),providedIn:"root"})}return n})();const rU=new pe("");let iU=(()=>{class n extends bd{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??N(yr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return HS(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Oc(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const s=this.prepareExternalUrl(i+Oc(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){const s=this.prepareExternalUrl(i+Oc(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(me(jS),me(rU,8))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),K_=(()=>{class n{_subject=new Re;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Pte(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(nU(oU(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Oc(r))}normalize(t){return n.stripTrailingSlash(function Mte(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,oU(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Oc(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Oc(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Oc;static joinWithSlash=HS;static stripTrailingSlash=nU;static \u0275fac=function(r){return new(r||n)(me(bd))};static \u0275prov=fe({token:n,factory:()=>function Nte(){return new K_(me(bd))}(),providedIn:"root"})}return n})();function oU(n){return n.replace(/\/index.html$/,"")}function sU(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}function Cb(n){return"server"===n}class cU{}let xte=(()=>{class n extends bd{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=HS(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){const s=this.prepareExternalUrl(i+Oc(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){const s=this.prepareExternalUrl(i+Oc(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(me(jS),me(rU,8))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();var uo=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(uo||{}),Nn=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Nn||{}),Yo=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Yo||{});function Sb(n,e){return Ds(co(n)[Vn.DateFormat],e)}function Rb(n,e){return Ds(co(n)[Vn.TimeFormat],e)}function Nb(n,e){return Ds(co(n)[Vn.DateTimeFormat],e)}function ws(n,e){const t=co(n),r=t[Vn.NumberSymbols][e];if(typeof r>"u"){if(12===e)return t[Vn.NumberSymbols][0];if(13===e)return t[Vn.NumberSymbols][1]}return r}function uU(n){if(!n[Vn.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Vn.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Ds(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function GS(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Kte=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Mb={},Qte=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function dU(n,e,t,r){let i=function ine(n){if(pU(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,o=1,s=1]=n.split("-").map(a=>+a);return Pb(i,o-1,s)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Kte))return function one(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),u=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return o.call(e,s,a,c,u),e}(r)}const e=new Date(n);if(!pU(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=xc(t,e)||e;let a,s=[];for(;e;){if(a=Qte.exec(e),!a){s.push(e);break}{s=s.concat(a.slice(1));const h=s.pop();if(!h)break;e=h}}let c=i.getTimezoneOffset();r&&(c=fU(r,c),i=function rne(n,e){const i=n.getTimezoneOffset();return function nne(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,-1*(fU(e,i)-i))}(i,r));let u="";return s.forEach(h=>{const m=function tne(n){if(WS[n])return WS[n];let e;switch(n){case"G":case"GG":case"GGG":e=Bn(3,Nn.Abbreviated);break;case"GGGG":e=Bn(3,Nn.Wide);break;case"GGGGG":e=Bn(3,Nn.Narrow);break;case"y":e=$r(0,1,0,!1,!0);break;case"yy":e=$r(0,2,0,!0,!0);break;case"yyy":e=$r(0,3,0,!1,!0);break;case"yyyy":e=$r(0,4,0,!1,!0);break;case"Y":e=Fb(1);break;case"YY":e=Fb(2,!0);break;case"YYY":e=Fb(3);break;case"YYYY":e=Fb(4);break;case"M":case"L":e=$r(1,1,1);break;case"MM":case"LL":e=$r(1,2,1);break;case"MMM":e=Bn(2,Nn.Abbreviated);break;case"MMMM":e=Bn(2,Nn.Wide);break;case"MMMMM":e=Bn(2,Nn.Narrow);break;case"LLL":e=Bn(2,Nn.Abbreviated,uo.Standalone);break;case"LLLL":e=Bn(2,Nn.Wide,uo.Standalone);break;case"LLLLL":e=Bn(2,Nn.Narrow,uo.Standalone);break;case"w":e=zS(1);break;case"ww":e=zS(2);break;case"W":e=zS(1,!0);break;case"d":e=$r(2,1);break;case"dd":e=$r(2,2);break;case"c":case"cc":e=$r(7,1);break;case"ccc":e=Bn(1,Nn.Abbreviated,uo.Standalone);break;case"cccc":e=Bn(1,Nn.Wide,uo.Standalone);break;case"ccccc":e=Bn(1,Nn.Narrow,uo.Standalone);break;case"cccccc":e=Bn(1,Nn.Short,uo.Standalone);break;case"E":case"EE":case"EEE":e=Bn(1,Nn.Abbreviated);break;case"EEEE":e=Bn(1,Nn.Wide);break;case"EEEEE":e=Bn(1,Nn.Narrow);break;case"EEEEEE":e=Bn(1,Nn.Short);break;case"a":case"aa":case"aaa":e=Bn(0,Nn.Abbreviated);break;case"aaaa":e=Bn(0,Nn.Wide);break;case"aaaaa":e=Bn(0,Nn.Narrow);break;case"b":case"bb":case"bbb":e=Bn(0,Nn.Abbreviated,uo.Standalone,!0);break;case"bbbb":e=Bn(0,Nn.Wide,uo.Standalone,!0);break;case"bbbbb":e=Bn(0,Nn.Narrow,uo.Standalone,!0);break;case"B":case"BB":case"BBB":e=Bn(0,Nn.Abbreviated,uo.Format,!0);break;case"BBBB":e=Bn(0,Nn.Wide,uo.Format,!0);break;case"BBBBB":e=Bn(0,Nn.Narrow,uo.Format,!0);break;case"h":e=$r(3,1,-12);break;case"hh":e=$r(3,2,-12);break;case"H":e=$r(3,1);break;case"HH":e=$r(3,2);break;case"m":e=$r(4,1);break;case"mm":e=$r(4,2);break;case"s":e=$r(5,1);break;case"ss":e=$r(5,2);break;case"S":e=$r(6,1);break;case"SS":e=$r(6,2);break;case"SSS":e=$r(6,3);break;case"Z":case"ZZ":case"ZZZ":e=xb(0);break;case"ZZZZZ":e=xb(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=xb(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=xb(2);break;default:return null}return WS[n]=e,e}(h);u+=m?m(i,t,c):"''"===h?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function Pb(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function xc(n,e){const t=function Fte(n){return co(n)[Vn.LocaleId]}(n);if(Mb[t]??={},Mb[t][e])return Mb[t][e];let r="";switch(e){case"shortDate":r=Sb(n,Yo.Short);break;case"mediumDate":r=Sb(n,Yo.Medium);break;case"longDate":r=Sb(n,Yo.Long);break;case"fullDate":r=Sb(n,Yo.Full);break;case"shortTime":r=Rb(n,Yo.Short);break;case"mediumTime":r=Rb(n,Yo.Medium);break;case"longTime":r=Rb(n,Yo.Long);break;case"fullTime":r=Rb(n,Yo.Full);break;case"short":const i=xc(n,"shortTime"),o=xc(n,"shortDate");r=Ob(Nb(n,Yo.Short),[i,o]);break;case"medium":const s=xc(n,"mediumTime"),a=xc(n,"mediumDate");r=Ob(Nb(n,Yo.Medium),[s,a]);break;case"long":const c=xc(n,"longTime"),u=xc(n,"longDate");r=Ob(Nb(n,Yo.Long),[c,u]);break;case"full":const h=xc(n,"fullTime"),m=xc(n,"fullDate");r=Ob(Nb(n,Yo.Full),[h,m])}return r&&(Mb[t][e]=r),r}function Ob(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Xs(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function $r(n,e,t=0,r=!1,i=!1){return function(o,s){let a=function Jte(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,o);if((t>0||a>-t)&&(a+=t),3===n)0===a&&-12===t&&(a=12);else if(6===n)return function Yte(n,e){return Xs(n,3).substring(0,e)}(a,e);const c=ws(s,5);return Xs(a,e,c,r,i)}}function Bn(n,e,t=uo.Format,r=!1){return function(i,o){return function Zte(n,e,t,r,i,o){switch(t){case 2:return function Bte(n,e,t){const r=co(n),o=Ds([r[Vn.MonthsFormat],r[Vn.MonthsStandalone]],e);return Ds(o,t)}(e,i,r)[n.getMonth()];case 1:return function Vte(n,e,t){const r=co(n),o=Ds([r[Vn.DaysFormat],r[Vn.DaysStandalone]],e);return Ds(o,t)}(e,i,r)[n.getDay()];case 0:const s=n.getHours(),a=n.getMinutes();if(o){const u=function $te(n){const e=co(n);return uU(e),(e[Vn.ExtraData][2]||[]).map(r=>"string"==typeof r?GS(r):[GS(r[0]),GS(r[1])])}(e),h=function Gte(n,e,t){const r=co(n);uU(r);const o=Ds([r[Vn.ExtraData][0],r[Vn.ExtraData][1]],e)||[];return Ds(o,t)||[]}(e,i,r),m=u.findIndex(_=>{if(Array.isArray(_)){const[v,I]=_,D=s>=v.hours&&a>=v.minutes,A=s<I.hours||s===I.hours&&a<I.minutes;if(v.hours<I.hours){if(D&&A)return!0}else if(D||A)return!0}else if(_.hours===s&&_.minutes===a)return!0;return!1});if(-1!==m)return h[m]}return function Lte(n,e,t){const r=co(n),o=Ds([r[Vn.DayPeriodsFormat],r[Vn.DayPeriodsStandalone]],e);return Ds(o,t)}(e,i,r)[s<12?0:1];case 3:return function Ute(n,e){return Ds(co(n)[Vn.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,o,n,e,t,r)}}function xb(n){return function(e,t,r){const i=-1*r,o=ws(t,5),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Xs(s,2,o)+Xs(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Xs(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Xs(s,2,o)+":"+Xs(Math.abs(i%60),2,o);case 3:return 0===r?"Z":(i>=0?"+":"")+Xs(s,2,o)+":"+Xs(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}const Xte=0,kb=4;function hU(n){const e=n.getDay(),t=0===e?-3:kb-e;return Pb(n.getFullYear(),n.getMonth(),n.getDate()+t)}function zS(n,e=!1){return function(t,r){let i;if(e){const o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{const o=hU(t),s=function ene(n){const e=Pb(n,Xte,1).getDay();return Pb(n,0,1+(e<=kb?kb:kb+7)-e)}(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Xs(i,n,ws(r,5))}}function Fb(n,e=!1){return function(t,r){return Xs(hU(t).getFullYear(),n,ws(r,5),e)}}const WS={};function fU(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function pU(n){return n instanceof Date&&!isNaN(n.valueOf())}class vne{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let cp=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new vne(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),EU(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{EU(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ve(So),ve(Rr),ve(FS))};static \u0275dir=ke({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function EU(n,e){n.context.$implicit=e.item}let lp=(()=>{class n{_viewContainer;_context=new Ene;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){bU(t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){bU(t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ve(So),ve(Rr))};static \u0275dir=ke({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})();class Ene{$implicit=null;ngIf=null}function bU(n,e){if(n&&!n.createEmbeddedView)throw new se(2020,!1)}const kne=new pe(""),Fne=new pe("");let TU=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(null==t||""===t||t!=t)return null;try{return dU(t,r??this.defaultOptions?.dateFormat??"mediumDate",o||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(s){throw function ea(n,e){return new se(2100,!1)}()}}static \u0275fac=function(r){return new(r||n)(ve(Mc,16),ve(kne,24),ve(Fne,24))};static \u0275pipe=oo({name:"date",type:n,pure:!0})}return n})(),J_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Jt({type:n});static \u0275inj=Rt({})}return n})();const r1=new pe("");let DU=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new se(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(me(r1),me(g))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();class CU{_doc;constructor(e){this._doc=e}manager}const Vb="ng-app-id";function AU(n){for(const e of n)e.remove()}function SU(n,e){const t=e.createElement("style");return t.textContent=n,t}function i1(n,e){const t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}let RU=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Cb(o),function Wne(n,e,t,r){const i=n.head?.querySelectorAll(`style[${Vb}="${e}"],link[${Vb}="${e}"]`);if(i)for(const o of i)o.removeAttribute(Vb),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(const i of t)this.addUsage(i,this.inline,SU);r?.forEach(i=>this.addUsage(i,this.external,i1))}removeStyles(t,r){for(const i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){const o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){const i=r.get(t);i&&(i.usage--,i.usage<=0&&(AU(i.elements),r.delete(t)))}ngOnDestroy(){for(const[,{elements:t}]of[...this.inline,...this.external])AU(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(const[r,{elements:i}]of this.inline)i.push(this.addElement(t,SU(r,this.doc)));for(const[r,{elements:i}]of this.external)i.push(this.addElement(t,i1(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Vb,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(me(yr),me(Cc),me(Gx,8),me(sd))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();const o1={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},s1=/%COMP%/g,Zne=new pe("",{providedIn:"root",factory:()=>!0});function MU(n,e){return e.map(t=>t.replace(s1,n))}let PU=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c,u=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.tracingService=h,this.platformIsServer=Cb(a),this.defaultRenderer=new a1(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===bs.ShadowDom&&(r={...r,encapsulation:bs.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof xU?i.applyToHost(t):i instanceof c1&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,m=this.platformIsServer,_=this.tracingService;switch(r.encapsulation){case bs.Emulated:o=new xU(c,u,r,this.appId,h,s,a,m,_);break;case bs.ShadowDom:return new nre(c,u,t,r,s,a,this.nonce,m,_);default:o=new c1(c,u,r,h,s,a,m,_)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(me(DU),me(RU),me(Cc),me(Zne),me(yr),me(sd),me(g),me(Gx),me(Tf,8))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();class a1{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(o1[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(OU(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(OU(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new se(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=o1[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=o1[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Dl.DashCase|Dl.Important)?e.style.setProperty(t,r,i&Dl.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Dl.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){null!=e&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if("string"==typeof e&&!(e=xl().getGlobalEventTarget(this.doc,e)))throw new se(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function OU(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class nre extends a1{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=MU(i.id,h);for(const _ of h){const v=document.createElement("style");a&&v.setAttribute("nonce",a),v.textContent=_,this.shadowRoot.appendChild(v)}const m=i.getExternalStyles?.();if(m)for(const _ of m){const v=i1(_,o);a&&v.setAttribute("nonce",a),this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class c1 extends a1{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=u?MU(u,h):h,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}class xU extends c1{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,u){const h=i+"-"+r.id;super(e,t,r,o,s,a,c,u,h),this.contentAttr=function Xne(n){return"_ngcontent-%COMP%".replace(s1,n)}(h),this.hostAttr=function ere(n){return"_nghost-%COMP%".replace(s1,n)}(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class l1 extends Ate{supportsDOMEvents=!0;static makeCurrent(){!function Cte(n){tU??=n}(new l1)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function rre(){return Z_=Z_||document.querySelector("base"),Z_?Z_.getAttribute("href"):null}();return null==t?null:function ire(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){Z_=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return sU(document.cookie,e)}}let Z_=null,sre=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),are=(()=>{class n extends CU{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(me(yr))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();const kU=["alt","control","meta","shift"],cre={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lre={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ure=(()=>{class n extends CU{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i,o){const s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xl().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),kU.forEach(u=>{const h=r.indexOf(u);h>-1&&(r.splice(h,1),s+=u+".")}),s+=o,0!=r.length||0===o.length)return null;const c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=cre[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),kU.forEach(s=>{s!==i&&(0,lre[s])(t)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static \u0275fac=function(r){return new(r||n)(me(yr))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();const pre=TB(Fee,"browser",[{provide:sd,useValue:"browser"},{provide:aC,useValue:function dre(){l1.makeCurrent()},multi:!0},{provide:yr,useFactory:function fre(){return function Zq(n){sC=n}(document),document}}]),VU=[{provide:XE,useClass:class ore{addToWindow(e){bn.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new se(5103,!1);return o},bn.getAllAngularTestabilities=()=>e.getAllTestabilities(),bn.getAllAngularRootElements=()=>e.getAllRootElements(),bn.frameworkStabilizers||(bn.frameworkStabilizers=[]),bn.frameworkStabilizers.push(r=>{const i=bn.getAllAngularTestabilities();let o=i.length;const s=function(){o--,0==o&&r()};i.forEach(a=>{a.whenStable(s)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?xl().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}}},{provide:nV,useClass:QA,deps:[g,YA,XE]},{provide:QA,useClass:QA,deps:[g,YA,XE]}],BU=[{provide:Fu,useValue:"root"},{provide:ro,useFactory:function hre(){return new ro}},{provide:r1,useClass:are,multi:!0,deps:[yr]},{provide:r1,useClass:ure,multi:!0,deps:[yr]},PU,RU,DU,{provide:bA,useExisting:PU},{provide:cU,useClass:sre},[]];let gre=(()=>{class n{constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Jt({type:n});static \u0275inj=Rt({providers:[...BU,...VU],imports:[J_,Lee]})}return n})(),mre=(()=>{class n{static \u0275prov=fe({token:n,providedIn:"root",factory:()=>new _re(N(yr),window)})}return n})();class _re{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function yre(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}}function up(n){return!!n&&(n instanceof R||St(n.lift)&&St(n.subscribe))}var dp=gt(635);const f1=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function YU(n){return St(n?.then)}function JU(n){return St(n[qi])}function ZU(n){return Symbol.asyncIterator&&St(n?.[Symbol.asyncIterator])}function XU(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ej=function Wre(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function tj(n){return St(n?.[ej])}function nj(n){return(0,dp.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,dp.N3)(t.read());if(i)return yield(0,dp.N3)(void 0);yield yield(0,dp.N3)(r)}}finally{t.releaseLock()}})}function rj(n){return St(n?.getReader)}function Yr(n){if(n instanceof R)return n;if(null!=n){if(JU(n))return function qre(n){return new R(e=>{const t=n[qi]();if(St(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(f1(n))return function Kre(n){return new R(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(YU(n))return function Qre(n){return new R(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ec)})}(n);if(ZU(n))return ij(n);if(tj(n))return function Yre(n){return new R(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(rj(n))return function Jre(n){return ij(nj(n))}(n)}throw XU(n)}function ij(n){return new R(e=>{(function Zre(n,e){var t,r,i,o;return(0,dp.sH)(this,void 0,void 0,function*(){try{for(t=(0,dp.xN)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function kc(n,e,t,r=0,i=!1){const o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function hp(n,e=0){return Lt((t,r)=>{t.subscribe(Je(r,i=>kc(r,n,()=>r.next(i),e),()=>kc(r,n,()=>r.complete(),e),i=>kc(r,n,()=>r.error(i),e)))})}function ny(n,e=0){return Lt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function oj(n,e){if(!n)throw new Error("Iterable cannot be null");return new R(t=>{kc(t,e,()=>{const r=n[Symbol.asyncIterator]();kc(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Un(n,e){return e?function iie(n,e){if(null!=n){if(JU(n))return function Xre(n,e){return Yr(n).pipe(ny(e),hp(e))}(n,e);if(f1(n))return function tie(n,e){return new R(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(YU(n))return function eie(n,e){return Yr(n).pipe(ny(e),hp(e))}(n,e);if(ZU(n))return oj(n,e);if(tj(n))return function nie(n,e){return new R(t=>{let r;return kc(t,e,()=>{r=n[ej](),kc(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void t.error(s)}o?t.complete():t.next(i)},0,!0)}),()=>St(r?.return)&&r.return()})}(n,e);if(rj(n))return function rie(n,e){return oj(nj(n),e)}(n,e)}throw XU(n)}(n,e):Yr(n)}function sj(n){return n&&St(n.schedule)}function p1(n){return n[n.length-1]}function Hb(n){return St(p1(n))?n.pop():void 0}function ry(n){return sj(p1(n))?n.pop():void 0}function We(...n){return Un(n,ry(n))}const{isArray:sie}=Array,{getPrototypeOf:aie,prototype:cie,keys:lie}=Object;function aj(n){if(1===n.length){const e=n[0];if(sie(e))return{args:e,keys:null};if(function uie(n){return n&&"object"==typeof n&&aie(n)===cie}(e)){const t=lie(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:die}=Array;function g1(n){return $e(e=>function hie(n,e){return die(e)?n(...e):n(e)}(n,e))}function cj(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function m1(...n){const e=ry(n),t=Hb(n),{args:r,keys:i}=aj(n);if(0===r.length)return Un([],e);const o=new R(function fie(n,e,t=Ki){return r=>{lj(e,()=>{const{length:i}=n,o=new Array(i);let s=i,a=i;for(let c=0;c<i;c++)lj(e,()=>{const u=Un(n[c],e);let h=!1;u.subscribe(Je(r,m=>{o[c]=m,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>cj(i,s):Ki));return t?o.pipe(g1(t)):o}function lj(n,e,t){n?kc(t,n,e):e()}const iy=Ps(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Jr(n,e,t=1/0){return St(e)?Jr((r,i)=>$e((o,s)=>e(r,o,i,s))(Yr(n(r,i))),t):("number"==typeof e&&(t=e),Lt((r,i)=>function pie(n,e,t,r,i,o,s,a){const c=[];let u=0,h=0,m=!1;const _=()=>{m&&!c.length&&!u&&e.complete()},v=D=>u<r?I(D):c.push(D),I=D=>{o&&e.next(D),u++;let A=!1;Yr(t(D,h++)).subscribe(Je(e,O=>{i?.(O),o?v(O):e.next(O)},()=>{A=!0},void 0,()=>{if(A)try{for(u--;c.length&&u<r;){const O=c.shift();s?kc(e,s,()=>I(O)):I(O)}_()}catch(O){e.error(O)}}))};return n.subscribe(Je(e,v,()=>{m=!0,_()})),()=>{a?.()}}(r,i,n,t)))}function fp(n=1/0){return Jr(Ki,n)}function Id(...n){return function gie(){return fp(1)}()(Un(n,ry(n)))}function $b(n){return new R(e=>{Yr(n()).subscribe(e)})}function Gb(n,e){const t=St(n)?n:()=>n,r=i=>i.error(t());return new R(e?i=>e.schedule(r,0,i):r)}const Po=new R(n=>n.complete());function _1(){return Lt((n,e)=>{let t=null;n._refCount++;const r=Je(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class uj extends R{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,pr(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Xn;const t=this.getSubject();e.add(this.source.subscribe(Je(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Xn.EMPTY)}return e}refCount(){return _1()(this)}}function ur(n,e){return Lt((t,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();t.subscribe(Je(r,c=>{i?.unsubscribe();let u=0;const h=o++;Yr(n(c,h)).subscribe(i=Je(r,m=>r.next(e?e(c,m,h,u++):m),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Li(n){return n<=0?()=>Po:Lt((e,t)=>{let r=0;e.subscribe(Je(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function oy(...n){const e=ry(n);return Lt((t,r)=>{(e?Id(n,t,e):Id(n,t)).subscribe(r)})}function vr(n,e){return Lt((t,r)=>{let i=0;t.subscribe(Je(r,o=>n.call(e,o,i++)&&r.next(o)))})}function zb(n){return Lt((e,t)=>{let r=!1;e.subscribe(Je(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function dj(n=_ie){return Lt((e,t)=>{let r=!1;e.subscribe(Je(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function _ie(){return new iy}function kl(n,e){const t=arguments.length>=2;return r=>r.pipe(n?vr((i,o)=>n(i,o,r)):Ki,Li(1),t?zb(e):dj(()=>new iy))}function Td(n,e){return St(e)?Jr(n,e,1):Jr(n,1)}function si(n,e,t){const r=St(n)||e||t?{next:n,error:e,complete:t}:n;return r?Lt((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(Je(o,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),o.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),o.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),o.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):Ki}function pp(n){return Lt((e,t)=>{let o,r=null,i=!1;r=e.subscribe(Je(t,void 0,void 0,s=>{o=Yr(n(s,pp(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Wb(n,e){return Lt(function yie(n,e,t,r,i){return(o,s)=>{let a=t,c=e,u=0;o.subscribe(Je(s,h=>{const m=u++;c=a?n(c,h,m):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}(n,e,arguments.length>=2,!0))}function y1(n){return n<=0?()=>Po:Lt((e,t)=>{let r=[];e.subscribe(Je(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function sy(n){return Lt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function _i(n){return Lt((e,t)=>{Yr(n).subscribe(Je(t,()=>t.complete(),us)),!t.closed&&e.subscribe(t)})}let Eie=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(me(yr))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Ct="primary",cy=Symbol("RouteTitle");class wie{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function gp(n){return new wie(n)}function Die(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=n[o];if(":"===s[0])i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function xa(n,e){const t=n?v1(n):void 0,r=e?v1(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!pj(n[i],e[i]))return!1;return!0}function v1(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function pj(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function gj(n){return n.length>0?n[n.length-1]:null}function Ll(n){return up(n)?n:N_(n)?Un(Promise.resolve(n)):We(n)}const Aie={exact:function yj(n,e,t){if(!Dd(n.segments,e.segments)||!qb(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!yj(n.children[r],e.children[r],t))return!1;return!0},subset:vj},mj={exact:function Sie(n,e){return xa(n,e)},subset:function Rie(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>pj(n[t],e[t]))},ignored:()=>!0};function _j(n,e,t){return Aie[t.paths](n.root,e.root,t.matrixParams)&&mj[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function vj(n,e,t){return Ej(n,e,e.segments,t)}function Ej(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Dd(i,t)||e.hasChildren()||!qb(i,t,r))}if(n.segments.length===t.length){if(!Dd(n.segments,t)||!qb(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!vj(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Dd(n.segments,i)&&qb(n.segments,i,r)&&n.children[Ct])&&Ej(n.children[Ct],e,o,r)}}function qb(n,e,t){return e.every((r,i)=>mj[t](n[i].parameters,r.parameters))}class wd{root;queryParams;fragment;_queryParamMap;constructor(e=new Tn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=gp(this.queryParams),this._queryParamMap}toString(){return Pie.serialize(this)}}class Tn{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Qb(this)}}class ly{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=gp(this.parameters),this._parameterMap}toString(){return Tj(this)}}function Dd(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let uy=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:()=>new Kb,providedIn:"root"})}return n})();class Kb{parse(e){const t=new $ie(e);return new wd(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${dy(e.root,!0)}`,r=function kie(n){const e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Yb(t)}=${Yb(i)}`).join("&"):`${Yb(t)}=${Yb(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Oie(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Pie=new Kb;function Qb(n){return n.segments.map(e=>Tj(e)).join("/")}function dy(n,e){if(!n.hasChildren())return Qb(n);if(e){const t=n.children[Ct]?dy(n.children[Ct],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Ct&&r.push(`${i}:${dy(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Mie(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Ct&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Ct&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Ct?[dy(n.children[Ct],!1)]:[`${i}:${dy(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ct]?`${Qb(n)}/${t[0]}`:`${Qb(n)}/(${t.join("//")})`}}function bj(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yb(n){return bj(n).replace(/%3B/gi,";")}function E1(n){return bj(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Jb(n){return decodeURIComponent(n)}function Ij(n){return Jb(n.replace(/\+/g,"%20"))}function Tj(n){return`${E1(n.path)}${function xie(n){return Object.entries(n).map(([e,t])=>`;${E1(e)}=${E1(t)}`).join("")}(n.parameters)}`}const Fie=/^[^\/()?;#]+/;function b1(n){const e=n.match(Fie);return e?e[0]:""}const Lie=/^[^\/()?;=#]+/,Bie=/^[^=?&#]+/,jie=/^[^&#]+/;class $ie{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Tn([],{}):new Tn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ct]=new Tn(e,t)),r}parseSegment(){const e=b1(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new se(4009,!1);return this.capture(e),new ly(Jb(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Vie(n){const e=n.match(Lie);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=b1(this.remaining);i&&(r=i,this.capture(r))}e[Jb(t)]=Jb(r)}parseQueryParam(e){const t=function Uie(n){const e=n.match(Bie);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function Hie(n){const e=n.match(jie);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=Ij(t),o=Ij(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=b1(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new se(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ct);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[Ct]:new Tn([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new se(4011,!1)}}function wj(n){return n.segments.length>0?new Tn([],{[Ct]:n}):n}function Dj(n){const e={};for(const[r,i]of Object.entries(n.children)){const o=Dj(i);if(r===Ct&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function Gie(n){if(1===n.numberOfChildren&&n.children[Ct]){const e=n.children[Ct];return new Tn(n.segments.concat(e.segments),e.children)}return n}(new Tn(n.segments,e))}function Cd(n){return n instanceof wd}function Cj(n){let e;const i=wj(function t(o){const s={};for(const c of o.children){const u=t(c);s[c.outlet]=u}const a=new Tn(o.url,s);return o===n&&(e=a),a}(n.root));return e??i}function Aj(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return I1(i,i,i,t,r);const o=function Wie(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Rj(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new Rj(t,e,r)}(e);if(o.toRoot())return I1(i,i,new Tn([],{}),t,r);const s=function qie(n,e,t){if(n.isAbsolute)return new Xb(e,!0,0);if(!t)return new Xb(e,!1,NaN);if(null===t.parent)return new Xb(t,!0,0);const r=Zb(n.commands[0])?0:1;return function Kie(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new se(4005,!1);i=r.segments.length}return new Xb(r,!1,i-o)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(o,i,n),a=s.processChildren?fy(s.segmentGroup,s.index,o.commands):Nj(s.segmentGroup,s.index,o.commands);return I1(i,s.segmentGroup,a,t,r)}function Zb(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function hy(n){return"object"==typeof n&&null!=n&&n.outlets}function I1(n,e,t,r,i){let s,o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`}),s=n===e?t:Sj(n,e,t);const a=wj(Dj(s));return new wd(a,o,i)}function Sj(n,e,t){const r={};return Object.entries(n.children).forEach(([i,o])=>{r[i]=o===e?t:Sj(o,e,t)}),new Tn(n.segments,r)}class Rj{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Zb(r[0]))throw new se(4003,!1);const i=r.find(hy);if(i&&i!==gj(r))throw new se(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Xb{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Nj(n,e,t){if(n??=new Tn([],{}),0===n.segments.length&&n.hasChildren())return fy(n,e,t);const r=function Yie(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const s=n.segments[i],a=t[r];if(hy(a))break;const c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!Pj(c,u,s))return o;r+=2}else{if(!Pj(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new Tn(n.segments.slice(0,r.pathIndex),{});return o.children[Ct]=new Tn(n.segments.slice(r.pathIndex),n.children),fy(o,0,i)}return r.match&&0===i.length?new Tn(n.segments,{}):r.match&&!n.hasChildren()?T1(n,e,t):r.match?fy(n,0,i):T1(n,e,t)}function fy(n,e,t){if(0===t.length)return new Tn(n.segments,{});{const r=function Qie(n){return hy(n[0])?n[0].outlets:{[Ct]:n}}(t),i={};if(Object.keys(r).some(o=>o!==Ct)&&n.children[Ct]&&1===n.numberOfChildren&&0===n.children[Ct].segments.length){const o=fy(n.children[Ct],e,t);return new Tn(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=Nj(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new Tn(n.segments,i)}}function T1(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(hy(o)){const c=Jie(o.outlets);return new Tn(r,c)}if(0===i&&Zb(t[0])){r.push(new ly(n.segments[e].path,Mj(t[0]))),i++;continue}const s=hy(o)?o.outlets[Ct]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Zb(a)?(r.push(new ly(s,Mj(a))),i+=2):(r.push(new ly(s,{})),i++)}return new Tn(r,{})}function Jie(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=T1(new Tn([],{}),0,r))}),e}function Mj(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Pj(n,e,t){return n==t.path&&xa(e,t.parameters)}const eI="imperative";var Kt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Kt||{});class ka{id;url;constructor(e,t){this.id=e,this.url=t}}class tI extends ka{type=Kt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ta extends ka{urlAfterRedirects;type=Kt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Jo=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Jo||{}),nI=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(nI||{});class Ad extends ka{reason;code;type=Kt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class mp extends ka{reason;code;type=Kt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}}class w1 extends ka{error;target;type=Kt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Oj extends ka{urlAfterRedirects;state;type=Kt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zie extends ka{urlAfterRedirects;state;type=Kt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xie extends ka{urlAfterRedirects;state;shouldActivate;type=Kt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class eoe extends ka{urlAfterRedirects;state;type=Kt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class toe extends ka{urlAfterRedirects;state;type=Kt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class noe{route;type=Kt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class roe{route;type=Kt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ioe{snapshot;type=Kt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ooe{snapshot;type=Kt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class soe{snapshot;type=Kt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aoe{snapshot;type=Kt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xj{routerEvent;position;anchor;type=Kt.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class D1{}class rI{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}}function na(n){return n.outlet||Ct}function py(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class foe{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return py(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new gy(this.rootInjector)}}let gy=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new foe(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(me(cr))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class kj{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=C1(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=C1(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=A1(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return A1(e,this._root).map(t=>t.value)}}function C1(n,e){if(n===e.value)return e;for(const t of e.children){const r=C1(n,t);if(r)return r}return null}function A1(n,e){if(n===e.value)return[e];for(const t of e.children){const r=A1(n,t);if(r.length)return r.unshift(e),r}return[]}class ra{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function _p(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Fj extends kj{snapshot;constructor(e,t){super(e),this.snapshot=t,S1(this,e)}toString(){return this.snapshot.toString()}}function Lj(n){const e=function poe(n){const o=new oI([],{},{},"",{},Ct,n,null,{});return new Vj("",new ra(o,[]))}(n),t=new Nt([new ly("",{})]),r=new Nt({}),i=new Nt({}),o=new Nt({}),s=new Nt(""),a=new yp(t,r,o,s,i,Ct,n,e.root);return a.snapshot=e.root,new Fj(new ra(a,[]),e)}class yp{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe($e(u=>u[cy]))??We(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe($e(e=>gp(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe($e(e=>gp(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function iI(n,e,t="emptyOnly"){let r;const{routeConfig:i}=n;return r=null===e||"always"!==t&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...i?.data,...n._resolvedData}},i&&Uj(i)&&(r.resolve[cy]=i.title),r}class oI{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[cy]}constructor(e,t,r,i,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=gp(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=gp(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Vj extends kj{url;constructor(e,t){super(t),this.url=e,S1(this,t)}toString(){return Bj(this._root)}}function S1(n,e){e.value._routerState=n,e.children.forEach(t=>S1(n,t))}function Bj(n){const e=n.children.length>0?` { ${n.children.map(Bj).join(", ")} } `:"";return`${n.value}${e}`}function R1(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,xa(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),xa(e.params,t.params)||n.paramsSubject.next(t.params),function Cie(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!xa(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),xa(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function N1(n,e){const t=xa(n.params,e.params)&&function Nie(n,e){return Dd(n,e)&&n.every((t,r)=>xa(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||N1(n.parent,e.parent))}function Uj(n){return"string"==typeof n.title||null===n.title}const goe=new pe("");let M1=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ct;activateEvents=new Xe;deactivateEvents=new Xe;attachEvents=new Xe;detachEvents=new Xe;routerOutletData=sE(void 0);parentContexts=N(gy);location=N(So);changeDetector=N(Qo);inputBinder=N(sI,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new se(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new se(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new se(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new se(4013,!1);this._activatedRoute=t;const i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new moe(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ke({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Ar]})}return n})();class moe{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===yp?this.route:e===gy?this.childContexts:e===goe?this.outletData:this.parent.get(e,t)}}const sI=new pe("");let jj=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=m1([r.queryParams,r.params,r.data]).pipe(ur(([o,s,a],c)=>(a={...o,...s,...a},0===c?We(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const s=function Dte(n){const e=Tt(n);if(!e)return null;const t=new D_(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();function my(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function yoe(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return my(n,r,i);return my(n,r)})}(n,e,t);return new ra(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>my(n,a)),s}}const r=function voe(n){return new yp(new Nt(n.url),new Nt(n.params),new Nt(n.queryParams),new Nt(n.fragment),new Nt(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>my(n,o));return new ra(r,i)}}class P1{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}}const Hj="ngNavigationCancelingError";function aI(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Cd(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=$j(!1,Jo.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function $j(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[Hj]=!0,t.cancellationCode=e,t}function Gj(n){return!!n&&n[Hj]}class Ioe{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),R1(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=_p(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=_p(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=_p(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=_p(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new aoe(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ooe(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(R1(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),R1(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}}class zj{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class cI{component;route;constructor(e,t){this.component=e,this.route=t}}function Toe(n,e,t){const r=n._root;return _y(r,e?e._root:null,t,[r.value])}function vp(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function Bg(n){return null!==Dh(n)}(n)?e.get(n):n:r}function _y(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=_p(e);return n.children.forEach(s=>{(function Doe(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function Coe(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Dd(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Dd(n.url,e.url)||!xa(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!N1(n,e)||!xa(n.queryParams,e.queryParams);default:return!N1(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new zj(r)):(o.data=s.data,o._resolvedData=s._resolvedData),_y(n,e,o.component?a?a.children:null:t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new cI(a.outlet.component,s))}else s&&yy(e,a,i),i.canActivateChecks.push(new zj(r)),_y(n,null,o.component?a?a.children:null:t,r,i)})(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>yy(a,t.getContext(s),i)),i}function yy(n,e,t){const r=_p(n),i=n.value;Object.entries(r).forEach(([o,s])=>{yy(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new cI(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function vy(n){return"function"==typeof n}function Wj(n){return n instanceof iy||"EmptyError"===n?.name}const lI=Symbol("INITIAL_VALUE");function Ep(){return ur(n=>m1(n.map(e=>e.pipe(Li(1),oy(lI)))).pipe($e(e=>{for(const t of e)if(!0!==t){if(t===lI)return lI;if(!1===t||Ooe(t))return t}return!0}),vr(e=>e!==lI),Li(1)))}function Ooe(n){return Cd(n)||n instanceof P1}function qj(n){return function Fs(...n){return L(n)}(si(e=>{if("boolean"!=typeof e)throw aI(0,e)}),$e(e=>!0===e))}class O1{segmentGroup;constructor(e){this.segmentGroup=e||null}}class x1 extends Error{urlTree;constructor(e){super(),this.urlTree=e}}function bp(n){return Gb(new O1(n))}class Woe{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return We(r);if(i.numberOfChildren>1||!i.children[Ct])return Gb(new se(4e3,!1));i=i.children[Ct]}}applyRedirectCommands(e,t,r,i,o){if("string"!=typeof t){const a=t,{queryParams:c,fragment:u,routeConfig:h,url:m,outlet:_,params:v,data:I,title:D}=i,A=bo(o,()=>a({params:v,data:I,queryParams:c,fragment:u,routeConfig:h,url:m,outlet:_,title:D}));if(A instanceof wd)throw new x1(A);t=A}const s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if("/"===t[0])throw new x1(s);return s}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new wd(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&":"===o[0]){const a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Tn(o,s)}createSegments(e,t,r,i){return t.map(o=>":"===o.path[0]?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new se(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const k1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function qoe(n,e,t,r,i){const o=Kj(n,e,t);return o.matched?(r=function coe(n,e){return n.providers&&!n._injector&&(n._injector=WE(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function $oe(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?We(i.map(s=>{const a=vp(s,n);return Ll(function Poe(n){return n&&vy(n.canMatch)}(a)?a.canMatch(e,t):bo(n,()=>a(e,t)))})).pipe(Ep(),qj()):We(!0)}(r,e,t).pipe($e(s=>!0===s?o:{...k1}))):We(o)}function Kj(n,e,t){if("**"===e.path)return function Koe(n){return{matched:!0,parameters:n.length>0?gj(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...k1}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Die)(t,n,e);if(!i)return{...k1};const o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Qj(n,e,t,r){return t.length>0&&function Joe(n,e,t){return t.some(r=>uI(n,e,r)&&na(r)!==Ct)}(n,t,r)?{segmentGroup:new Tn(e,Yoe(r,new Tn(t,n.children))),slicedSegments:[]}:0===t.length&&function Zoe(n,e,t){return t.some(r=>uI(n,e,r))}(n,t,r)?{segmentGroup:new Tn(n.segments,Qoe(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Tn(n.segments,n.children),slicedSegments:t}}function Qoe(n,e,t,r){const i={};for(const o of t)if(uI(n,e,o)&&!r[na(o)]){const s=new Tn([],{});i[na(o)]=s}return{...r,...i}}function Yoe(n,e){const t={};t[Ct]=e;for(const r of n)if(""===r.path&&na(r)!==Ct){const i=new Tn([],{});t[na(r)]=i}return t}function uI(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class ese{}class rse{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Woe(this.urlSerializer,this.urlTree)}noMatchError(e){return new se(4002,`'${e.segmentGroup}'`)}recognize(){const e=Qj(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe($e(({children:t,rootSnapshot:r})=>{const i=new ra(r,t),o=new Vj("",i),s=function zie(n,e,t=null,r=null){return Aj(Cj(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){const t=new oI([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),Ct,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ct,t).pipe($e(r=>({children:r,rootSnapshot:t})),pp(r=>{if(r instanceof x1)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof O1?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe($e(s=>s instanceof ra?[s]:[]))}processChildren(e,t,r,i){const o=[];for(const s of Object.keys(r.children))"primary"===s?o.unshift(s):o.push(s);return Un(o).pipe(Td(s=>{const a=r.children[s],c=function hoe(n,e){const t=n.filter(r=>na(r)===e);return t.push(...n.filter(r=>na(r)!==e)),t}(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Wb((s,a)=>(s.push(...a),s)),zb(null),function vie(n,e){const t=arguments.length>=2;return r=>r.pipe(n?vr((i,o)=>n(i,o,r)):Ki,y1(1),t?zb(e):dj(()=>new iy))}(),Jr(s=>{if(null===s)return bp(r);const a=Yj(s);return function ise(n){n.sort((e,t)=>e.value.outlet===Ct?-1:t.value.outlet===Ct?1:e.value.outlet.localeCompare(t.value.outlet))}(a),We(a)}))}processSegment(e,t,r,i,o,s,a){return Un(t).pipe(Td(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(pp(u=>{if(u instanceof O1)return We(null);throw u}))),kl(c=>!!c),pp(c=>{if(Wj(c))return function Xoe(n,e,t){return 0===e.length&&!n.children[t]}(r,i,o)?We(new ese):bp(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return na(r)===s||s!==Ct&&uI(i,o,r)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):bp(i):bp(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){const{matched:c,parameters:u,consumedSegments:h,positionalParamSegments:m,remainingSegments:_}=Kj(t,i,o);if(!c)return bp(t);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const v=new oI(o,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Jj(i),na(i),i.component??i._loadedComponent??null,i,Zj(i)),I=iI(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(I.params),v.data=Object.freeze(I.data);const D=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,m,v,e);return this.applyRedirects.lineralizeSegments(i,D).pipe(Jr(A=>this.processSegment(e,r,t,A.concat(_),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){const a=qoe(t,r,i,e);return"**"===r.path&&(t.children={}),a.pipe(ur(c=>c.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(ur(({routes:u})=>{const h=r._loadedInjector??e,{parameters:m,consumedSegments:_,remainingSegments:v}=c,I=new oI(_,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Jj(r),na(r),r.component??r._loadedComponent??null,r,Zj(r)),D=iI(I,s,this.paramsInheritanceStrategy);I.params=Object.freeze(D.params),I.data=Object.freeze(D.data);const{segmentGroup:A,slicedSegments:O}=Qj(t,_,v,u);if(0===O.length&&A.hasChildren())return this.processChildren(h,u,A,I).pipe($e(j=>new ra(I,j)));if(0===u.length&&0===O.length)return We(new ra(I,[]));const P=na(r)===o;return this.processSegment(h,u,A,O,P?Ct:o,!0,I).pipe($e(j=>new ra(I,j instanceof ra?[j]:[])))})):bp(t)))}getChildConfig(e,t,r){return t.children?We({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?We({routes:t._loadedRoutes,injector:t._loadedInjector}):function Hoe(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?We(!0):We(i.map(s=>{const a=vp(s,n);return Ll(function Soe(n){return n&&vy(n.canLoad)}(a)?a.canLoad(e,t):bo(n,()=>a(e,t)))})).pipe(Ep(),qj())}(e,t,r).pipe(Jr(i=>i?this.configLoader.loadChildren(e,t).pipe(si(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function zoe(){return Gb($j(!1,Jo.GuardRejected))}())):We({routes:[],injector:e})}}function ose(n){const e=n.value.routeConfig;return e&&""===e.path}function Yj(n){const e=[],t=new Set;for(const r of n){if(!ose(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Yj(r.children);e.push(new ra(r.value,i))}return e.filter(r=>!t.has(r))}function Jj(n){return n.data||{}}function Zj(n){return n.resolve||{}}function Xj(n){const e=n.children.map(t=>Xj(t)).flat();return[n,...e]}function F1(n){return ur(e=>{const t=n(e);return t?Un(t).pipe($e(()=>e)):We(e)})}let eH=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Ct);return r}getResolvedTitleForRoute(t){return t.data[cy]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:()=>N(dse),providedIn:"root"})}return n})(),dse=(()=>{class n extends eH{title;constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(me(Eie))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Ey=new pe("",{providedIn:"root",factory:()=>({})});let tH=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ur({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){1&r&&lr(0,"router-outlet")},dependencies:[M1],encapsulation:2})}return n})();function L1(n){const e=n.children&&n.children.map(L1),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ct&&(t.component=tH),t}const dI=new pe("");let V1=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=N(oee);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return We(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ll(t.loadComponent()).pipe($e(nH),si(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),sy(()=>{this.componentLoaders.delete(t)})),i=new uj(r,()=>new Re).pipe(_1());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return We({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function hse(n,e,t,r){return Ll(n.loadChildren()).pipe($e(nH),Jr(i=>i instanceof OL||Array.isArray(i)?We(i):Un(e.compileModuleAsync(i))),$e(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(t).injector,s=o.get(dI,[],{optional:!0,self:!0}).flat()),{routes:s.map(L1),injector:o}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(sy(()=>{this.childrenLoaders.delete(r)})),s=new uj(o,()=>new Re).pipe(_1());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nH(n){return function fse(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let B1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:()=>N(pse),providedIn:"root"})}return n})(),pse=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const rH=new pe(""),iH=new pe("");function gse(n,e,t){const r=n.get(iH),i=n.get(yr);return n.get(g).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o;const s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),function mse(n){return new Promise(e=>{Tl({read:()=>setTimeout(e)},{injector:n})})}(n))),{onViewTransitionCreated:c}=r;return c&&bo(n,()=>c({transition:a,from:e,to:t})),s})}const oH=new pe("");let U1=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Re;transitionAbortSubject=new Re;configLoader=N(V1);environmentInjector=N(cr);destroyRef=N(to);urlSerializer=N(uy);rootContexts=N(gy);location=N(K_);inputBindingEnabled=null!==N(sI,{optional:!0});titleStrategy=N(eH);options=N(Ey,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=N(B1);createViewTransition=N(rH,{optional:!0});navigationErrorHandler=N(oH,{optional:!0});navigationId=0;get hasRequestedNavigation(){return 0!==this.navigationId}transitions;afterPreactivation=()=>We(void 0);rootComponentType=null;destroyed=!1;constructor(){this.configLoader.onLoadEndListener=i=>this.events.next(new roe(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new noe(i)),this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...t,extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r})}setupNavigations(t){return this.transitions=new Nt(null),this.transitions.pipe(vr(r=>null!==r),ur(r=>{let i=!1,o=!1;return We(r).pipe(ur(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Jo.SupersededByNewNavigation),Po;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:"string"==typeof s.extras.browserUrl?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!a&&"reload"!==(s.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const u="";return this.events.next(new mp(s.id,this.urlSerializer.serialize(s.rawUrl),u,nI.IgnoredSameUrlNavigation)),s.resolve(!1),Po}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return We(s).pipe(ur(u=>(this.events.next(new tI(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Po:Promise.resolve(u))),function sse(n,e,t,r,i,o){return Jr(s=>function tse(n,e,t,r,i,o,s="emptyOnly"){return new rse(n,e,t,r,i,s,o).recognize()}(n,e,t,r,s.extractedUrl,i,o).pipe($e(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),si(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects};const h=new Oj(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){const{id:u,extractedUrl:h,source:m,restoredState:_,extras:v}=s,I=new tI(u,this.urlSerializer.serialize(h),m,_);this.events.next(I);const D=Lj(this.rootComponentType).snapshot;return this.currentTransition=r={...s,targetSnapshot:D,urlAfterRedirects:h,extras:{...v,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=h,We(r)}{const u="";return this.events.next(new mp(s.id,this.urlSerializer.serialize(s.extractedUrl),u,nI.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Po}}),si(s=>{const a=new Zie(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),$e(s=>(this.currentTransition=r={...s,guards:Toe(s.targetSnapshot,s.currentSnapshot,this.rootContexts)},r)),function xoe(n,e){return Jr(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?We({...t,guardsResult:!0}):function koe(n,e,t,r){return Un(n).pipe(Jr(i=>function joe(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?We(o.map(a=>{const c=py(e)??i,u=vp(a,c);return Ll(function Moe(n){return n&&vy(n.canDeactivate)}(u)?u.canDeactivate(n,e,t,r):bo(c,()=>u(n,e,t,r))).pipe(kl())})).pipe(Ep()):We(!0)}(i.component,i.route,t,e,r)),kl(i=>!0!==i,!0))}(s,r,i,n).pipe(Jr(a=>a&&function Aoe(n){return"boolean"==typeof n}(a)?function Foe(n,e,t,r){return Un(e).pipe(Td(i=>Id(function Voe(n,e){return null!==n&&e&&e(new ioe(n)),We(!0)}(i.route.parent,r),function Loe(n,e){return null!==n&&e&&e(new soe(n)),We(!0)}(i.route,r),function Uoe(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function woe(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>$b(()=>We(s.guards.map(c=>{const u=py(s.node)??t,h=vp(c,u);return Ll(function Noe(n){return n&&vy(n.canActivateChild)}(h)?h.canActivateChild(r,n):bo(u,()=>h(r,n))).pipe(kl())})).pipe(Ep())));return We(o).pipe(Ep())}(n,i.path,t),function Boe(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return We(!0);const i=r.map(o=>$b(()=>{const s=py(e)??t,a=vp(o,s);return Ll(function Roe(n){return n&&vy(n.canActivate)}(a)?a.canActivate(e,n):bo(s,()=>a(e,n))).pipe(kl())}));return We(i).pipe(Ep())}(n,i.route,t))),kl(i=>!0!==i,!0))}(r,o,n,e):We(a)),$e(a=>({...t,guardsResult:a})))})}(this.environmentInjector,s=>this.events.next(s)),si(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&"boolean"!=typeof s.guardsResult)throw aI(0,s.guardsResult);const a=new Xie(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),vr(s=>!!s.guardsResult||(this.cancelNavigationTransition(s,"",Jo.GuardRejected),!1)),F1(s=>{if(0!==s.guards.canActivateChecks.length)return We(s).pipe(si(a=>{const c=new eoe(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),ur(a=>{let c=!1;return We(a).pipe(function ase(n,e){return Jr(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return We(t);const o=new Set(i.map(c=>c.route)),s=new Set;for(const c of o)if(!s.has(c))for(const u of Xj(c))s.add(u);let a=0;return Un(s).pipe(Td(c=>o.has(c)?function cse(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!Uj(i)&&(o[cy]=i.title),function lse(n,e,t,r){const i=v1(n);if(0===i.length)return We({});const o={};return Un(i).pipe(Jr(s=>function use(n,e,t,r){const i=py(e)??r,o=vp(n,i);return Ll(o.resolve?o.resolve(e,t):bo(i,()=>o(e,t)))}(n[s],e,t,r).pipe(kl(),si(a=>{if(a instanceof P1)throw aI(new Kb,a);o[s]=a}))),y1(1),$e(()=>o),pp(s=>Wj(s)?Po:Gb(s)))}(o,n,e,r).pipe($e(s=>(n._resolvedData=s,n.data=iI(n,n.parent,t).resolve,null)))}(c,r,n,e):(c.data=iI(c,c.parent,n).resolve,We(void 0))),si(()=>a++),y1(1),Jr(c=>a===s.size?We(t):Po))})}(this.paramsInheritanceStrategy,this.environmentInjector),si({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Jo.NoDataFromResolver)}}))}),si(a=>{const c=new toe(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),F1(s=>{const a=c=>{const u=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(c.routeConfig).pipe(si(h=>{c.component=h}),$e(()=>{})));for(const h of c.children)u.push(...a(h));return u};return m1(a(s.targetSnapshot.root)).pipe(zb(null),Li(1))}),F1(()=>this.afterPreactivation()),ur(()=>{const{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?Un(c).pipe($e(()=>r)):We(r)}),$e(s=>{const a=function _oe(n,e,t){const r=my(n,e._root,t?t._root:void 0);return new Fj(r,e)}(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r={...s,targetRouterState:a},this.currentNavigation.targetRouterState=a,r}),si(()=>{this.events.next(new D1)}),((n,e,t,r)=>$e(i=>(new Ioe(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Li(1),si({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ta(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),_i(this.transitionAbortSubject.pipe(si(s=>{throw s}))),sy(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",Jo.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),pp(s=>{if(this.destroyed)return r.resolve(!1),Po;if(o=!0,Gj(s))this.events.next(new Ad(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),function Eoe(n){return Gj(n)&&Cd(n.url)}(s)?this.events.next(new rI(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{const a=new w1(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{const c=bo(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(!(c instanceof P1))throw this.events.next(a),s;{const{message:u,cancellationCode:h}=aI(0,c);this.events.next(new Ad(r.id,this.urlSerializer.serialize(r.extractedUrl),u,h)),this.events.next(new rI(c.redirectTo,c.navigationBehaviorOptions))}}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Po}))}))}cancelNavigationTransition(t,r,i){const o=new Ad(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _se(n){return n!==eI}let yse=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:()=>N(Ese),providedIn:"root"})}return n})();class vse{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Ese=(()=>{class n extends vse{static \u0275fac=(()=>{let t;return function(i){return(t||(t=fn(n)))(i||n)}})();static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sH=(()=>{class n{urlSerializer=N(uy);options=N(Ey,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=N(K_);urlHandlingStrategy=N(B1);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new wd;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){const o=void 0!==t?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof wd?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=Lj(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:()=>N(bse),providedIn:"root"})}return n})(),bse=(()=>{class n extends sH{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof tI?this.updateStateMemento():t instanceof mp?this.commitTransition(r):t instanceof Oj?"eager"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof D1?(this.commitTransition(r),"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Ad&&(t.code===Jo.GuardRejected||t.code===Jo.NoDataFromResolver)?this.restoreHistory(r):t instanceof w1?this.restoreHistory(r,!0):t instanceof ta&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){const{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){const a=this.browserPageId,c={...s,...this.generateNgRouterState(i,a)};this.location.replaceState(t,"",c)}else{const a={...s,...this.generateNgRouterState(i,this.browserPageId+1)};this.location.go(t,"",a)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&0===o&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=fn(n)))(i||n)}})();static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function aH(n,e){n.events.pipe(vr(t=>t instanceof ta||t instanceof Ad||t instanceof w1||t instanceof mp),$e(t=>t instanceof ta||t instanceof mp?0:t instanceof Ad&&(t.code===Jo.Redirect||t.code===Jo.SupersededByNewNavigation)?2:1),vr(t=>2!==t),Li(1)).subscribe(()=>{e()})}const Ise={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Tse={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Fa=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=N(zA);stateManager=N(sH);options=N(Ey,{optional:!0})||{};pendingTasks=N(Es);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=N(U1);urlSerializer=N(uy);location=N(K_);urlHandlingStrategy=N(B1);_events=new Re;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=N(yse);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=N(dI,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!N(sI,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Xn;subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(null!==i&&null!==o)if(this.stateManager.handleRouterEvent(r,o),r instanceof Ad&&r.code!==Jo.Redirect&&r.code!==Jo.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ta)this.navigated=!0;else if(r instanceof rI){const s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c={browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||_se(i.source),...s};this.scheduleNavigation(a,eI,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function Dse(n){return!(n instanceof D1||n instanceof rI)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),eI,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(o.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(L1),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s;let m,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h={...this.currentUrlTree.queryParams,...o};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}null!==h&&(h=this.removeEmptyProps(h));try{m=Cj(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||"/"!==t[0][0])&&(t=[]),m=this.currentUrlTree.root}return Aj(m,t,h,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Cd(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,eI,null,r)}navigate(t,r={skipLocationChange:!1}){return function wse(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new se(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(i=!0===r?{...Ise}:!1===r?{...Tse}:r,Cd(t))return _j(this.currentUrlTree,t,i);const o=this.parseUrl(t);return _j(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(null!=o&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((m,_)=>{a=m,c=_});const h=this.pendingTasks.add();return aH(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(m=>Promise.reject(m))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class cH{}let Sse=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(vr(t=>t instanceof ta),Td(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=WE(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Un(i).pipe(fp())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):We(null);const o=i.pipe(Jr(s=>null===s?We(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?Un([o,this.loader.loadComponent(r)]).pipe(fp()):o})}static \u0275fac=function(r){return new(r||n)(me(Fa),me(cr),me(cH),me(V1))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const H1=new pe("");let lH=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof tI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ta?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof mp&&t.code===nI.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof xj&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new xj(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){!function nL(){throw new Error("invalid")}()};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();function La(n,e){return{\u0275kind:n,\u0275providers:e}}function dH(){const n=N(Wt);return e=>{const t=n.get(so);if(e!==t.components[0])return;const r=n.get(Fa),i=n.get(hH);1===n.get($1)&&r.initialNavigation(),n.get(fH,null,It.Optional)?.setUpPreloading(),n.get(H1,null,It.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const hH=new pe("",{factory:()=>new Re}),$1=new pe("",{providedIn:"root",factory:()=>1}),fH=new pe("");function Pse(n){return La(0,[{provide:fH,useExisting:Sse},{provide:cH,useExisting:n}])}function xse(n){return Co("NgRouterViewTransitions"),La(9,[{provide:rH,useValue:gse},{provide:iH,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const kse=[K_,{provide:uy,useClass:Kb},Fa,gy,{provide:yp,useFactory:function uH(n){return n.routerState.root},deps:[Fa]},V1,[]];let hI=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[kse,[],{provide:dI,multi:!0,useValue:t},[],r?.errorHandler?{provide:oH,useValue:r.errorHandler}:[],{provide:Ey,useValue:r||{}},r?.useHash?{provide:bd,useClass:xte}:{provide:bd,useClass:iU},{provide:H1,useFactory:()=>{const n=N(mre),e=N(g),t=N(Ey),r=N(U1),i=N(uy);return t.scrollOffset&&n.setOffset(t.scrollOffset),new lH(i,r,n,e,t)}},r?.preloadingStrategy?Pse(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Bse(r):[],r?.bindToComponentInputs?La(8,[jj,{provide:sI,useExisting:jj}]).\u0275providers:[],r?.enableViewTransitions?xse().\u0275providers:[],[{provide:pH,useFactory:dH},{provide:M_,multi:!0,useExisting:pH}]]}}static forChild(t){return{ngModule:n,providers:[{provide:dI,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Jt({type:n});static \u0275inj=Rt({})}return n})();function Bse(n){return["disabled"===n.initialNavigation?La(3,[sV(()=>{N(Fa).setUpLocationChangeListener()}),{provide:$1,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?La(2,[{provide:$1,useValue:0},sV(()=>{const e=N(Wt);return e.get(Ste,Promise.resolve()).then(()=>new Promise(r=>{const i=e.get(Fa),o=e.get(hH);aH(i,()=>{r(!0)}),e.get(U1).afterPreactivation=()=>(r(!0),o.closed?We(void 0):o),i.initialNavigation()}))})]).\u0275providers:[]]}const pH=new pe("");class jse{type="";displayName="";profilePic="";badges=[];constructor(e,t){if(!e||!t)throw"missing parameter @ UserBadgeCard::new";const{type:r,display_name:i,profile_image_url:o}=e,{badges:s,username:a}=t;this.type=r,this.displayName=i||a,this.badges=s,this.profilePic=o}get totalBadges(){return this.badges.length}}const gH=new pe("COLLECTION");var Cs=gt(852);(0,Cs.registerVersion)("firebase","11.7.1","app");class Gse extends Xn{constructor(e,t){super()}schedule(e,t=0){return this}}const fI={setInterval(n,e,...t){const{delegate:r}=fI;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=fI;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class mH extends Gse{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return fI.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&fI.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Bo(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const G1={now:()=>(G1.delegate||Date).now(),delegate:void 0};class by{constructor(e,t=by.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}by.now=G1.now;class _H extends by{constructor(e,t=by.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const qse=new class Wse extends _H{}(class zse extends mH{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),pI=new _H(mH),Kse=pI,z1=new G_("ANGULARFIRE2_VERSION");class yH{zone;delegate;constructor(e,t=qse){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])},t,r)}}let q1=(()=>{class n{outsideAngular;insideAngular;constructor(){const t=N(g);this.outsideAngular=t.runOutsideAngular(()=>new yH(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new yH(typeof Zone>"u"?void 0:Zone.current,pI))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var mI=gt(362),At=gt(858),ia=gt(41);const Q1=new Map,EH={activated:!1,tokenObservers:[]},oae={initialized:!1,enabled:!1};function Er(n){return Q1.get(n)||Object.assign({},EH)}function _I(){return oae}class dae{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,T.A)(function*(){t.stop();try{t.pending=new At.cY,t.pending.promise.catch(r=>{}),yield function hae(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new At.cY,t.pending.promise.catch(r=>{}),yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const yi=new At.FA("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"});function J1(n){if(!Er(n).activated)throw yi.create("use-before-activation",{appName:n.name})}function EI(n,e){return X1.apply(this,arguments)}function X1(){return(X1=(0,T.A)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const m=yield i.getHeartbeatsHeader();m&&(r["X-Firebase-Client"]=m)}const o={method:"POST",body:JSON.stringify(e),headers:r};let s,a;try{s=yield fetch(n,o)}catch(m){throw yi.create("fetch-network-error",{originalErrorMessage:m?.message})}if(200!==s.status)throw yi.create("fetch-status-error",{httpStatus:s.status});try{a=yield s.json()}catch(m){throw yi.create("fetch-parse-error",{originalErrorMessage:m?.message})}const c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw yi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const u=1e3*Number(c[1]),h=Date.now();return{token:a.token,expireTimeMillis:h+u,issuedAtTimeMillis:h}})).apply(this,arguments)}function IH(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Iy="firebase-app-check-store";let bI=null;function eR(){return(eR=(0,T.A)(function*(n,e){const r=(yield function wH(){return bI||(bI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(yi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Iy,{keyPath:"compositeKey"})}}catch(t){e(yi.create("storage-open",{originalErrorMessage:t?.message}))}}),bI)}()).transaction(Iy,"readwrite"),o=r.objectStore(Iy).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(yi.create("storage-set",{originalErrorMessage:null===(u=c.target.error)||void 0===u?void 0:u.message}))}})})).apply(this,arguments)}const Rd=new ia.Vy("@firebase/app-check");function rR(n,e){return(0,At.zW)()?function vae(n,e){return function DH(n,e){return eR.apply(this,arguments)}(function AH(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Rd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function oR(){return _I().enabled}function sR(){return aR.apply(this,arguments)}function aR(){return(aR=(0,T.A)(function*(){const n=_I();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Dae={error:"UNKNOWN_ERROR"};function Cae(n){return At.K3.encodeString(JSON.stringify(n),!1)}function II(n){return cR.apply(this,arguments)}function cR(){return(cR=(0,T.A)(function*(n,e=!1,t=!1){const r=n.app;J1(r);const i=Er(r);let s,o=i.token;if(o&&!Tp(o)&&(i.token=void 0,o=void 0),!o){const u=yield i.cachedTokenPromise;u&&(Tp(u)?o=u:yield rR(r,void 0))}if(!e&&o&&Tp(o))return{token:o.token};let c,a=!1;if(oR())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=EI(IH(r,yield sR()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);const u=yield i.exchangeTokenPromise;return yield rR(r,u),i.token=u,{token:u.token}}catch(u){return"appCheck/throttled"===u.code||"appCheck/initial-throttle"===u.code?Rd.warn(u.message):t&&Rd.error(u),hR(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield Er(r).exchangeTokenPromise}catch(u){"appCheck/throttled"===u.code||"appCheck/initial-throttle"===u.code?Rd.warn(u.message):t&&Rd.error(u),s=u}return o?s?c=Tp(o)?{token:o.token,internalError:s}:hR(s):(c={token:o.token},i.token=o,yield rR(r,o)):c=hR(s),a&&function NH(n,e){const t=Er(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(r,c),c})).apply(this,arguments)}function lR(){return(lR=(0,T.A)(function*(n){const e=n.app;J1(e);const{provider:t}=Er(e);if(oR()){const r=yield sR(),{token:i}=yield EI(IH(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function dR(n,e){const t=Er(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function RH(n){const{app:e}=n,t=Er(e);let r=t.tokenRefresher;r||(r=function Aae(n){const{app:e}=n;return new dae((0,T.A)(function*(){let r;if(r=Er(e).token?yield II(n,!0):yield II(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Er(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Tp(n){return n.expireTimeMillis-Date.now()>0}function hR(n){return{token:Cae(Dae),error:n}}class Sae{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Er(this.app);for(const t of e)dR(this.app,t.next);return Promise.resolve()}}const VH="app-check-internal";!function Hae(){(0,Cs._registerComponent)(new mI.uA("app-check",n=>function Rae(n,e){return new Sae(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(VH).initialize()})),(0,Cs._registerComponent)(new mI.uA(VH,n=>function Nae(n){return{getToken:e=>II(n,e),getLimitedUseToken:()=>function SH(n){return lR.apply(this,arguments)}(n),addTokenListener:e=>function uR(n,e,t,r){const{app:i}=n,o=Er(i);if(o.tokenObservers=[...o.tokenObservers,{next:t,error:r,type:e}],o.token&&Tp(o.token)){const a=o.token;Promise.resolve().then(()=>{t({token:a.token}),RH(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>RH(n))}(n,"INTERNAL",e),removeTokenListener:e=>dR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Cs.registerVersion)("@firebase/app-check","0.9.1")}();class mR{constructor(){return(n=>{const t=(0,Cs.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r})("app-check")}}typeof window<"u"&&window;var Vl=gt(345);Vl.A.registerVersion("firebase","11.7.1","app-compat");const Yae=["ngOnDestroy"];class UH{constructor(e){return e}}const wI=new pe("angularfire2.app.options"),DI=new pe("angularfire2.app.name");function yR(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const s=Vl.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Vl.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){const a=!!module.hot;Xae("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new UH(s)}const Xae=(n,...e)=>{},ece={provide:UH,useFactory:yR,deps:[wI,g,[new ps,DI]]};let tce=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:wI,useValue:t},{provide:DI,useValue:r}]}}constructor(t){Vl.A.registerVersion("angularfire",z1.full,"core"),Vl.A.registerVersion("angularfire",z1.full,"app-compat"),Vl.A.registerVersion("angular",ree.full,t.toString())}static \u0275fac=function(r){return new(r||n)(me(sd))};static \u0275mod=Jt({type:n});static \u0275inj=Rt({providers:[ece]})}return n})();function jH(n,e,t,r,i){const[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return function nce(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,s)||(HH("error",`${e} was already initialized on the ${t} Firebase App with different settings.${rce?" You may need to reload as Firebase is not HMR aware.":""}`),HH("warn",{is:i,was:s})),o;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const rce=typeof module<"u"&&!!module.hot,HH=(n,...e)=>{};function Zo(n){void 0===n&&(Us(),n=N(Wt));const e=n.get(bf);return t=>new R(r=>{const i=e.add();let o=!1;function s(){o||(i(),o=!0)}const a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}globalThis.\u0275AngularfireInstanceCache||=[],gt(915);class cce extends Re{constructor(e=1/0,t=1/0,r=G1){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const s=t.now();let a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}}function vR(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new hs({next:()=>{r.unsubscribe(),n()}});return Yr(e(...t)).subscribe(r)}function CI(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,function lce(n={}){const{connector:e=()=>new Re,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,u=0,h=!1,m=!1;const _=()=>{a?.unsubscribe(),a=void 0},v=()=>{_(),s=c=void 0,h=m=!1},I=()=>{const D=s;v(),D?.unsubscribe()};return Lt((D,A)=>{u++,!m&&!h&&_();const O=c=c??e();A.add(()=>{u--,0===u&&!m&&!h&&(a=vR(I,i))}),O.subscribe(A),!s&&u>0&&(s=new hs({next:P=>O.next(P),error:P=>{m=!0,_(),a=vR(v,t,P),O.error(P)},complete:()=>{h=!0,_(),a=vR(v,r),O.complete()}}),Yr(D).subscribe(s))})(o)}}({connector:()=>new cce(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function zH(n,e){return St(e)?ur(()=>n,e):ur(()=>n)}const WH=new pe("angularfire2.auth.use-emulator"),qH=new pe("angularfire2.auth.settings"),KH=new pe("angularfire2.auth.tenant-id"),QH=new pe("angularfire2.auth.langugage-code"),YH=new pe("angularfire2.auth.use-device-language"),JH=new pe("angularfire.auth.persistence"),ZH=(n,e,t,r,i,o,s,a)=>jH(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(const[u,h]of Object.entries(s))c.settings[u]=h;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]);let XH=(()=>{class n{injector=N(cr);authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,u,h,m,_,v){const I=new Re,D=We(void 0).pipe(hp(s.outsideAngular),ur(()=>o.runOutsideAngular(()=>Promise.resolve().then(gt.bind(gt,915)))),$e(()=>yR(t,o,r)),$e(A=>ZH(A,o,a,u,h,m,c,_)),CI({bufferSize:1,refCount:!1}));if(Cb(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=We(null);else{D.pipe(kl()).subscribe();const A=D.pipe(ur(j=>j.getRedirectResult().then(X=>X,()=>null)),Zo(this.injector),CI({bufferSize:1,refCount:!1})),O=D.pipe(ur(j=>new R(X=>({unsubscribe:o.runOutsideAngular(()=>j.onAuthStateChanged(ae=>X.next(ae),ae=>X.error(ae),()=>X.complete()))})))),P=D.pipe(ur(j=>new R(X=>({unsubscribe:o.runOutsideAngular(()=>j.onIdTokenChanged(ae=>X.next(ae),ae=>X.error(ae),()=>X.complete()))}))));this.authState=A.pipe(zH(O),ny(s.outsideAngular),hp(s.insideAngular)),this.user=A.pipe(zH(P),ny(s.outsideAngular),hp(s.insideAngular)),this.idToken=this.user.pipe(ur(j=>j?Un(j.getIdToken()):We(null))),this.idTokenResult=this.user.pipe(ur(j=>j?Un(j.getIdTokenResult()):We(null))),this.credential=function GH(...n){const e=ry(n),t=function oie(n,e){return"number"==typeof p1(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Yr(r[0]):fp(t)(Un(r,e)):Po}(A,I,this.authState.pipe(vr(j=>!j))).pipe($e(j=>j?.user?j:null),ny(s.outsideAngular),hp(s.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(Yae.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(a=>{const c=a?.[o];return"function"==typeof c?c.bind(a):c?.then?c.then(u=>t.run(()=>u)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,u)=>s.then(h=>{const m=h?.(...u);return r?.spy?.apply&&r.spy.apply(o,u,m),m})})})}))(this,D,o,{spy:{apply:(A,O,P)=>{(A.startsWith("signIn")||A.startsWith("createUser"))&&P.then(j=>I.next(j))}}})}static \u0275fac=function(r){return new(r||n)(me(wI),me(DI,8),me(sd),me(g),me(q1),me(WH,8),me(qH,8),me(KH,8),me(QH,8),me(YH,8),me(JH,8),me(mR,8))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function ER(){return Lt((n,e)=>{let t,r=!1;n.subscribe(Je(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}function dce(n,e){return n===e}var Bl,r$,t$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},n$={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(k,S,F){F||(F=0);var U=Array(16);if("string"==typeof S)for(var H=0;16>H;++H)U[H]=S.charCodeAt(F++)|S.charCodeAt(F++)<<8|S.charCodeAt(F++)<<16|S.charCodeAt(F++)<<24;else for(H=0;16>H;++H)U[H]=S[F++]|S[F++]<<8|S[F++]<<16|S[F++]<<24;var W=k.g[3],x=(S=k.g[0])+(W^(F=k.g[1])&((H=k.g[2])^W))+U[0]+3614090360&4294967295;x=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=(F=(H=(W=(S=F+(x<<7&4294967295|x>>>25))+((x=W+(H^S&(F^H))+U[1]+3905402710&4294967295)<<12&4294967295|x>>>20))+((x=H+(F^W&(S^F))+U[2]+606105819&4294967295)<<17&4294967295|x>>>15))+((x=F+(S^H&(W^S))+U[3]+3250441966&4294967295)<<22&4294967295|x>>>10))+((x=S+(W^F&(H^W))+U[4]+4118548399&4294967295)<<7&4294967295|x>>>25))+((x=W+(H^S&(F^H))+U[5]+1200080426&4294967295)<<12&4294967295|x>>>20))+((x=H+(F^W&(S^F))+U[6]+2821735955&4294967295)<<17&4294967295|x>>>15))+((x=F+(S^H&(W^S))+U[7]+4249261313&4294967295)<<22&4294967295|x>>>10))+((x=S+(W^F&(H^W))+U[8]+1770035416&4294967295)<<7&4294967295|x>>>25))+((x=W+(H^S&(F^H))+U[9]+2336552879&4294967295)<<12&4294967295|x>>>20))+((x=H+(F^W&(S^F))+U[10]+4294925233&4294967295)<<17&4294967295|x>>>15))+((x=F+(S^H&(W^S))+U[11]+2304563134&4294967295)<<22&4294967295|x>>>10))+((x=S+(W^F&(H^W))+U[12]+1804603682&4294967295)<<7&4294967295|x>>>25))+((x=W+(H^S&(F^H))+U[13]+4254626195&4294967295)<<12&4294967295|x>>>20))+((x=H+(F^W&(S^F))+U[14]+2792965006&4294967295)<<17&4294967295|x>>>15))+((x=F+(S^H&(W^S))+U[15]+1236535329&4294967295)<<22&4294967295|x>>>10))+((x=S+(H^W&(F^H))+U[1]+4129170786&4294967295)<<5&4294967295|x>>>27))+((x=W+(F^H&(S^F))+U[6]+3225465664&4294967295)<<9&4294967295|x>>>23))+((x=H+(S^F&(W^S))+U[11]+643717713&4294967295)<<14&4294967295|x>>>18))+((x=F+(W^S&(H^W))+U[0]+3921069994&4294967295)<<20&4294967295|x>>>12))+((x=S+(H^W&(F^H))+U[5]+3593408605&4294967295)<<5&4294967295|x>>>27))+((x=W+(F^H&(S^F))+U[10]+38016083&4294967295)<<9&4294967295|x>>>23))+((x=H+(S^F&(W^S))+U[15]+3634488961&4294967295)<<14&4294967295|x>>>18))+((x=F+(W^S&(H^W))+U[4]+3889429448&4294967295)<<20&4294967295|x>>>12))+((x=S+(H^W&(F^H))+U[9]+568446438&4294967295)<<5&4294967295|x>>>27))+((x=W+(F^H&(S^F))+U[14]+3275163606&4294967295)<<9&4294967295|x>>>23))+((x=H+(S^F&(W^S))+U[3]+4107603335&4294967295)<<14&4294967295|x>>>18))+((x=F+(W^S&(H^W))+U[8]+1163531501&4294967295)<<20&4294967295|x>>>12))+((x=S+(H^W&(F^H))+U[13]+2850285829&4294967295)<<5&4294967295|x>>>27))+((x=W+(F^H&(S^F))+U[2]+4243563512&4294967295)<<9&4294967295|x>>>23))+((x=H+(S^F&(W^S))+U[7]+1735328473&4294967295)<<14&4294967295|x>>>18))+((x=F+(W^S&(H^W))+U[12]+2368359562&4294967295)<<20&4294967295|x>>>12))+((x=S+(F^H^W)+U[5]+4294588738&4294967295)<<4&4294967295|x>>>28))+((x=W+(S^F^H)+U[8]+2272392833&4294967295)<<11&4294967295|x>>>21))+((x=H+(W^S^F)+U[11]+1839030562&4294967295)<<16&4294967295|x>>>16))+((x=F+(H^W^S)+U[14]+4259657740&4294967295)<<23&4294967295|x>>>9))+((x=S+(F^H^W)+U[1]+2763975236&4294967295)<<4&4294967295|x>>>28))+((x=W+(S^F^H)+U[4]+1272893353&4294967295)<<11&4294967295|x>>>21))+((x=H+(W^S^F)+U[7]+4139469664&4294967295)<<16&4294967295|x>>>16))+((x=F+(H^W^S)+U[10]+3200236656&4294967295)<<23&4294967295|x>>>9))+((x=S+(F^H^W)+U[13]+681279174&4294967295)<<4&4294967295|x>>>28))+((x=W+(S^F^H)+U[0]+3936430074&4294967295)<<11&4294967295|x>>>21))+((x=H+(W^S^F)+U[3]+3572445317&4294967295)<<16&4294967295|x>>>16))+((x=F+(H^W^S)+U[6]+76029189&4294967295)<<23&4294967295|x>>>9))+((x=S+(F^H^W)+U[9]+3654602809&4294967295)<<4&4294967295|x>>>28))+((x=W+(S^F^H)+U[12]+3873151461&4294967295)<<11&4294967295|x>>>21))+((x=H+(W^S^F)+U[15]+530742520&4294967295)<<16&4294967295|x>>>16))+((x=F+(H^W^S)+U[2]+3299628645&4294967295)<<23&4294967295|x>>>9))+((x=S+(H^(F|~W))+U[0]+4096336452&4294967295)<<6&4294967295|x>>>26))+((x=W+(F^(S|~H))+U[7]+1126891415&4294967295)<<10&4294967295|x>>>22))+((x=H+(S^(W|~F))+U[14]+2878612391&4294967295)<<15&4294967295|x>>>17))+((x=F+(W^(H|~S))+U[5]+4237533241&4294967295)<<21&4294967295|x>>>11))+((x=S+(H^(F|~W))+U[12]+1700485571&4294967295)<<6&4294967295|x>>>26))+((x=W+(F^(S|~H))+U[3]+2399980690&4294967295)<<10&4294967295|x>>>22))+((x=H+(S^(W|~F))+U[10]+4293915773&4294967295)<<15&4294967295|x>>>17))+((x=F+(W^(H|~S))+U[1]+2240044497&4294967295)<<21&4294967295|x>>>11))+((x=S+(H^(F|~W))+U[8]+1873313359&4294967295)<<6&4294967295|x>>>26))+((x=W+(F^(S|~H))+U[15]+4264355552&4294967295)<<10&4294967295|x>>>22))+((x=H+(S^(W|~F))+U[6]+2734768916&4294967295)<<15&4294967295|x>>>17))+((x=F+(W^(H|~S))+U[13]+1309151649&4294967295)<<21&4294967295|x>>>11))+((W=(S=F+((x=S+(H^(F|~W))+U[4]+4149444226&4294967295)<<6&4294967295|x>>>26))+((x=W+(F^(S|~H))+U[11]+3174756917&4294967295)<<10&4294967295|x>>>22))^((H=W+((x=H+(S^(W|~F))+U[2]+718787259&4294967295)<<15&4294967295|x>>>17))|~S))+U[9]+3951481745&4294967295,k.g[0]=k.g[0]+S&4294967295,k.g[1]=k.g[1]+(H+(x<<21&4294967295|x>>>11))&4294967295,k.g[2]=k.g[2]+H&4294967295,k.g[3]=k.g[3]+W&4294967295}function s(k,S){this.h=S;for(var F=[],U=!0,H=k.length-1;0<=H;H--){var W=0|k[H];U&&W==S||(F[H]=W,U=!1)}this.g=F}(function e(k,S){function F(){}F.prototype=S.prototype,k.D=S.prototype,k.prototype=new F,k.prototype.constructor=k,k.C=function(U,H,W){for(var x=Array(arguments.length-2),Ci=2;Ci<arguments.length;Ci++)x[Ci-2]=arguments[Ci];return S.prototype[H].apply(U,x)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(k,S){void 0===S&&(S=k.length);for(var F=S-this.blockSize,U=this.B,H=this.h,W=0;W<S;){if(0==H)for(;W<=F;)i(this,k,W),W+=this.blockSize;if("string"==typeof k){for(;W<S;)if(U[H++]=k.charCodeAt(W++),H==this.blockSize){i(this,U),H=0;break}}else for(;W<S;)if(U[H++]=k[W++],H==this.blockSize){i(this,U),H=0;break}}this.h=H,this.o+=S},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var S=1;S<k.length-8;++S)k[S]=0;var F=8*this.o;for(S=k.length-8;S<k.length;++S)k[S]=255&F,F/=256;for(this.u(k),k=Array(16),S=F=0;4>S;++S)for(var U=0;32>U;U+=8)k[F++]=this.g[S]>>>U&255;return k};var a={};function c(k){return-128<=k&&128>k?function o(k,S){var F=a;return Object.prototype.hasOwnProperty.call(F,k)?F[k]:F[k]=S(k)}(k,function(S){return new s([0|S],0>S?-1:0)}):new s([0|k],0>k?-1:0)}function u(k){if(isNaN(k)||!isFinite(k))return m;if(0>k)return A(u(-k));for(var S=[],F=1,U=0;k>=F;U++)S[U]=k/F|0,F*=4294967296;return new s(S,0)}var m=c(0),_=c(1),v=c(16777216);function I(k){if(0!=k.h)return!1;for(var S=0;S<k.g.length;S++)if(0!=k.g[S])return!1;return!0}function D(k){return-1==k.h}function A(k){for(var S=k.g.length,F=[],U=0;U<S;U++)F[U]=~k.g[U];return new s(F,~k.h).add(_)}function O(k,S){return k.add(A(S))}function P(k,S){for(;(65535&k[S])!=k[S];)k[S+1]+=k[S]>>>16,k[S]&=65535,S++}function j(k,S){this.g=k,this.h=S}function X(k,S){if(I(S))throw Error("division by zero");if(I(k))return new j(m,m);if(D(k))return S=X(A(k),S),new j(A(S.g),A(S.h));if(D(S))return S=X(k,A(S)),new j(A(S.g),S.h);if(30<k.g.length){if(D(k)||D(S))throw Error("slowDivide_ only works with positive integers.");for(var F=_,U=S;0>=U.l(k);)F=ae(F),U=ae(U);var H=we(F,1),W=we(U,1);for(U=we(U,2),F=we(F,2);!I(U);){var x=W.add(U);0>=x.l(k)&&(H=H.add(F),W=x),U=we(U,1),F=we(F,1)}return S=O(k,H.j(S)),new j(H,S)}for(H=m;0<=k.l(S);){for(F=Math.max(1,Math.floor(k.m()/S.m())),U=48>=(U=Math.ceil(Math.log(F)/Math.LN2))?1:Math.pow(2,U-48),x=(W=u(F)).j(S);D(x)||0<x.l(k);)x=(W=u(F-=U)).j(S);I(W)&&(W=_),H=H.add(W),k=O(k,x)}return new j(H,k)}function ae(k){for(var S=k.g.length+1,F=[],U=0;U<S;U++)F[U]=k.i(U)<<1|k.i(U-1)>>>31;return new s(F,k.h)}function we(k,S){var F=S>>5;S%=32;for(var U=k.g.length-F,H=[],W=0;W<U;W++)H[W]=0<S?k.i(W+F)>>>S|k.i(W+F+1)<<32-S:k.i(W+F);return new s(H,k.h)}(n=s.prototype).m=function(){if(D(this))return-A(this).m();for(var k=0,S=1,F=0;F<this.g.length;F++){var U=this.i(F);k+=(0<=U?U:4294967296+U)*S,S*=4294967296}return k},n.toString=function(k){if(2>(k=k||10)||36<k)throw Error("radix out of range: "+k);if(I(this))return"0";if(D(this))return"-"+A(this).toString(k);for(var S=u(Math.pow(k,6)),F=this,U="";;){var H=X(F,S).g,W=((0<(F=O(F,H.j(S))).g.length?F.g[0]:F.h)>>>0).toString(k);if(I(F=H))return W+U;for(;6>W.length;)W="0"+W;U=W+U}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h},n.l=function(k){return D(k=O(this,k))?-1:I(k)?0:1},n.abs=function(){return D(this)?A(this):this},n.add=function(k){for(var S=Math.max(this.g.length,k.g.length),F=[],U=0,H=0;H<=S;H++){var W=U+(65535&this.i(H))+(65535&k.i(H)),x=(W>>>16)+(this.i(H)>>>16)+(k.i(H)>>>16);U=x>>>16,F[H]=(x&=65535)<<16|(W&=65535)}return new s(F,-2147483648&F[F.length-1]?-1:0)},n.j=function(k){if(I(this)||I(k))return m;if(D(this))return D(k)?A(this).j(A(k)):A(A(this).j(k));if(D(k))return A(this.j(A(k)));if(0>this.l(v)&&0>k.l(v))return u(this.m()*k.m());for(var S=this.g.length+k.g.length,F=[],U=0;U<2*S;U++)F[U]=0;for(U=0;U<this.g.length;U++)for(var H=0;H<k.g.length;H++){var W=this.i(U)>>>16,x=65535&this.i(U),Ci=k.i(H)>>>16,ss=65535&k.i(H);F[2*U+2*H]+=x*ss,P(F,2*U+2*H),F[2*U+2*H+1]+=W*ss,P(F,2*U+2*H+1),F[2*U+2*H+1]+=x*Ci,P(F,2*U+2*H+1),F[2*U+2*H+2]+=W*Ci,P(F,2*U+2*H+2)}for(U=0;U<S;U++)F[U]=F[2*U+1]<<16|F[2*U];for(U=S;U<2*S;U++)F[U]=0;return new s(F,0)},n.A=function(k){return X(this,k).h},n.and=function(k){for(var S=Math.max(this.g.length,k.g.length),F=[],U=0;U<S;U++)F[U]=this.i(U)&k.i(U);return new s(F,this.h&k.h)},n.or=function(k){for(var S=Math.max(this.g.length,k.g.length),F=[],U=0;U<S;U++)F[U]=this.i(U)|k.i(U);return new s(F,this.h|k.h)},n.xor=function(k){for(var S=Math.max(this.g.length,k.g.length),F=[],U=0;U<S;U++)F[U]=this.i(U)^k.i(U);return new s(F,this.h^k.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,r$=n$.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=function h(k,S){if(0==k.length)throw Error("number format error: empty string");if(2>(S=S||10)||36<S)throw Error("radix out of range: "+S);if("-"==k.charAt(0))return A(h(k.substring(1),S));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var F=u(Math.pow(S,8)),U=m,H=0;H<k.length;H+=8){var W=Math.min(8,k.length-H),x=parseInt(k.substring(H,H+W),S);8>W?(W=u(Math.pow(S,W)),U=U.j(W).add(u(x))):U=(U=U.j(F)).add(u(x))}return U},Bl=n$.Integer=s}).apply(typeof t$<"u"?t$:typeof self<"u"?self:typeof window<"u"?window:{});var i$,Ty,o$,SI,bR,s$,a$,c$,AI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Lc={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(f,y,b){return f==Array.prototype||f==Object.prototype||(f[y]=b.value),f},r=function t(f){f=["object"==typeof globalThis&&globalThis,f,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof AI&&AI];for(var y=0;y<f.length;++y){var b=f[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}(this);!function i(f,y){if(y)e:{var b=r;f=f.split(".");for(var C=0;C<f.length-1;C++){var G=f[C];if(!(G in b))break e;b=b[G]}(y=y(C=b[f=f[f.length-1]]))!=C&&null!=y&&e(b,f,{configurable:!0,writable:!0,value:y})}}("Array.prototype.values",function(f){return f||function(){return function o(f,y){f instanceof String&&(f+="");var b=0,C=!1,G={next:function(){if(!C&&b<f.length){var ne=b++;return{value:y(ne,f[ne]),done:!1}}return C=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}(this,function(y,b){return b})}});var s=s||{},a=this||self;function c(f){var y=typeof f;return"array"==(y="object"!=y?y:f?Array.isArray(f)?"array":y:"null")||"object"==y&&"number"==typeof f.length}function u(f){var y=typeof f;return"object"==y&&null!=f||"function"==y}function h(f,y,b){return f.call.apply(f.bind,arguments)}function m(f,y,b){if(!f)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,C),f.apply(y,G)}}return function(){return f.apply(y,arguments)}}function _(f,y,b){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?h:m).apply(null,arguments)}function v(f,y){var b=Array.prototype.slice.call(arguments,1);return function(){var C=b.slice();return C.push.apply(C,arguments),f.apply(this,C)}}function I(f,y){function b(){}b.prototype=y.prototype,f.aa=y.prototype,f.prototype=new b,f.prototype.constructor=f,f.Qb=function(C,G,ne){for(var xe=Array(arguments.length-2),On=2;On<arguments.length;On++)xe[On-2]=arguments[On];return y.prototype[G].apply(C,xe)}}function D(f){const y=f.length;if(0<y){const b=Array(y);for(let C=0;C<y;C++)b[C]=f[C];return b}return[]}function A(f,y){for(let b=1;b<arguments.length;b++){const C=arguments[b];if(c(C)){const G=f.length||0,ne=C.length||0;f.length=G+ne;for(let xe=0;xe<ne;xe++)f[G+xe]=C[xe]}else f.push(C)}}function P(f){return/^[\s\xa0]*$/.test(f)}function j(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function X(f){return X[" "](f),f}X[" "]=function(){};var ae=!(-1==j().indexOf("Gecko")||-1!=j().toLowerCase().indexOf("webkit")&&-1==j().indexOf("Edge")||-1!=j().indexOf("Trident")||-1!=j().indexOf("MSIE")||-1!=j().indexOf("Edge"));function we(f,y,b){for(const C in f)y.call(b,f[C],C,f)}function S(f){const y={};for(const b in f)y[b]=f[b];return y}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(f,y){let b,C;for(let G=1;G<arguments.length;G++){for(b in C=arguments[G],C)f[b]=C[b];for(let ne=0;ne<F.length;ne++)b=F[ne],Object.prototype.hasOwnProperty.call(C,b)&&(f[b]=C[b])}}function H(f){var y=1;f=f.split(":");const b=[];for(;0<y&&f.length;)b.push(f.shift()),y--;return f.length&&b.push(f.join(":")),b}function W(f){a.setTimeout(()=>{throw f},0)}function x(){var f=la;let y=null;return f.g&&(y=f.g,f.g=f.g.next,f.g||(f.h=null),y.next=null),y}var ss=new class O{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}(()=>new go,f=>f.reset());class go{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let Ai,Qa=!1,la=new class Ci{constructor(){this.h=this.g=null}add(y,b){const C=ss.get();C.set(y,b),this.h?this.h.next=C:this.g=C,this.h=C}},fh=()=>{const f=a.Promise.resolve(void 0);Ai=()=>{f.then(Uv)}};var Uv=()=>{for(var f;f=x();){try{f.h.call(f.g)}catch(b){W(b)}var y=ss;y.j(f),100>y.h&&(y.h++,f.next=y.g,y.g=f)}Qa=!1};function Lo(){this.s=this.s,this.C=this.C}function Or(f,y){this.type=f,this.g=this.target=y,this.defaultPrevented=!1}Lo.prototype.s=!1,Lo.prototype.ma=function(){this.s||(this.s=!0,this.N())},Lo.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Or.prototype.h=function(){this.defaultPrevented=!0};var mu=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,y=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const b=()=>{};a.addEventListener("test",b,y),a.removeEventListener("test",b,y)}catch{}return f}();function Vo(f,y){if(Or.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var b=this.type=f.type,C=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=y,y=f.relatedTarget){if(ae){e:{try{X(y.nodeName);var G=!0;break e}catch{}G=!1}G||(y=null)}}else"mouseover"==b?y=f.fromElement:"mouseout"==b&&(y=f.toElement);this.relatedTarget=y,C?(this.clientX=void 0!==C.clientX?C.clientX:C.pageX,this.clientY=void 0!==C.clientY?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=void 0!==f.clientX?f.clientX:f.pageX,this.clientY=void 0!==f.clientY?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType="string"==typeof f.pointerType?f.pointerType:ph[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Vo.aa.h.call(this)}}I(Vo,Or);var ph={2:"touch",3:"pen",4:"mouse"};Vo.prototype.h=function(){Vo.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Ya="closure_listenable_"+(1e6*Math.random()|0),Kc=0;function jv(f,y,b,C,G){this.listener=f,this.proxy=null,this.src=y,this.type=b,this.capture=!!C,this.ha=G,this.key=++Kc,this.da=this.fa=!1}function Sg(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function _u(f){this.src=f,this.g={},this.h=0}function Hv(f,y){var b=y.type;if(b in f.g){var ne,C=f.g[b],G=Array.prototype.indexOf.call(C,y,void 0);(ne=0<=G)&&Array.prototype.splice.call(C,G,1),ne&&(Sg(y),0==f.g[b].length&&(delete f.g[b],f.h--))}}function Rg(f,y,b,C){for(var G=0;G<f.length;++G){var ne=f[G];if(!ne.da&&ne.listener==y&&ne.capture==!!b&&ne.ha==C)return G}return-1}_u.prototype.add=function(f,y,b,C,G){var ne=f.toString();(f=this.g[ne])||(f=this.g[ne]=[],this.h++);var xe=Rg(f,y,C,G);return-1<xe?(y=f[xe],b||(y.fa=!1)):((y=new jv(y,this.src,ne,!!C,G)).fa=b,f.push(y)),y};var $v="closure_lm_"+(1e6*Math.random()|0),Gv={};function zv(f,y,b,C,G){if(C&&C.once)return xw(f,y,b,C,G);if(Array.isArray(y)){for(var ne=0;ne<y.length;ne++)zv(f,y[ne],b,C,G);return null}return b=Mg(b),f&&f[Ya]?f.K(y,b,u(C)?!!C.capture:!!C,G):Wv(f,y,b,!1,C,G)}function Wv(f,y,b,C,G,ne){if(!y)throw Error("Invalid event type");var xe=u(G)?!!G.capture:!!G,On=gh(f);if(On||(f[$v]=On=new _u(f)),(b=On.add(y,b,C,xe,ne)).proxy)return b;if(C=function PO(){const y=kw;return function f(b){return y.call(f.src,f.listener,b)}}(),b.proxy=C,C.src=f,C.listener=b,f.addEventListener)mu||(G=xe),void 0===G&&(G=!1),f.addEventListener(y.toString(),C,G);else if(f.attachEvent)f.attachEvent(qv(y.toString()),C);else{if(!f.addListener||!f.removeListener)throw Error("addEventListener and attachEvent are unavailable.");f.addListener(C)}return b}function xw(f,y,b,C,G){if(Array.isArray(y)){for(var ne=0;ne<y.length;ne++)xw(f,y[ne],b,C,G);return null}return b=Mg(b),f&&f[Ya]?f.L(y,b,u(C)?!!C.capture:!!C,G):Wv(f,y,b,!0,C,G)}function Ja(f,y,b,C,G){if(Array.isArray(y))for(var ne=0;ne<y.length;ne++)Ja(f,y[ne],b,C,G);else C=u(C)?!!C.capture:!!C,b=Mg(b),f&&f[Ya]?(f=f.i,(y=String(y).toString())in f.g&&-1<(b=Rg(ne=f.g[y],b,C,G))&&(Sg(ne[b]),Array.prototype.splice.call(ne,b,1),0==ne.length&&(delete f.g[y],f.h--))):f&&(f=gh(f))&&(y=f.g[y.toString()],f=-1,y&&(f=Rg(y,b,C,G)),(b=-1<f?y[f]:null)&&yu(b))}function yu(f){if("number"!=typeof f&&f&&!f.da){var y=f.src;if(y&&y[Ya])Hv(y.i,f);else{var b=f.type,C=f.proxy;y.removeEventListener?y.removeEventListener(b,C,f.capture):y.detachEvent?y.detachEvent(qv(b),C):y.addListener&&y.removeListener&&y.removeListener(C),(b=gh(y))?(Hv(b,f),0==b.h&&(b.src=null,y[$v]=null)):Sg(f)}}}function qv(f){return f in Gv?Gv[f]:Gv[f]="on"+f}function kw(f,y){if(f.da)f=!0;else{y=new Vo(y,this);var b=f.listener,C=f.ha||f.src;f.fa&&yu(f),f=b.call(C,y)}return f}function gh(f){return(f=f[$v])instanceof _u?f:null}var Ng="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mg(f){return"function"==typeof f?f:(f[Ng]||(f[Ng]=function(y){return f.handleEvent(y)}),f[Ng])}function Xr(){Lo.call(this),this.i=new _u(this),this.M=this,this.F=null}function ui(f,y){var b,C=f.F;if(C)for(b=[];C;C=C.F)b.push(C);if(f=f.M,C=y.type||y,"string"==typeof y)y=new Or(y,f);else if(y instanceof Or)y.target=y.target||f;else{var G=y;U(y=new Or(C,f),G)}if(G=!0,b)for(var ne=b.length-1;0<=ne;ne--){var xe=y.g=b[ne];G=Fw(xe,C,!0,y)&&G}if(G=Fw(xe=y.g=f,C,!0,y)&&G,G=Fw(xe,C,!1,y)&&G,b)for(ne=0;ne<b.length;ne++)G=Fw(xe=y.g=b[ne],C,!1,y)&&G}function Fw(f,y,b,C){if(!(y=f.i.g[String(y)]))return!0;y=y.concat();for(var G=!0,ne=0;ne<y.length;++ne){var xe=y[ne];if(xe&&!xe.da&&xe.capture==b){var On=xe.listener,Si=xe.ha||xe.src;xe.fa&&Hv(f.i,xe),G=!1!==On.call(Si,C)&&G}}return G&&!C.defaultPrevented}function OW(f,y,b){if("function"==typeof f)b&&(f=_(f,b));else{if(!f||"function"!=typeof f.handleEvent)throw Error("Invalid listener argument");f=_(f.handleEvent,f)}return 2147483647<Number(y)?-1:a.setTimeout(f,y||0)}function xW(f){f.g=OW(()=>{f.g=null,f.i&&(f.i=!1,xW(f))},f.l);const y=f.h;f.h=null,f.m.apply(null,y)}I(Xr,Lo),Xr.prototype[Ya]=!0,Xr.prototype.removeEventListener=function(f,y,b,C){Ja(this,f,y,b,C)},Xr.prototype.N=function(){if(Xr.aa.N.call(this),this.i){var y,f=this.i;for(y in f.g){for(var b=f.g[y],C=0;C<b.length;C++)Sg(b[C]);delete f.g[y],f.h--}}this.F=null},Xr.prototype.K=function(f,y,b,C){return this.i.add(String(f),y,!1,b,C)},Xr.prototype.L=function(f,y,b,C){return this.i.add(String(f),y,!0,b,C)};class Bve extends Lo{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:xW(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kv(f){Lo.call(this),this.h=f,this.g={}}I(Kv,Lo);var kW=[];function FW(f){we(f.g,function(y,b){this.g.hasOwnProperty(b)&&yu(y)},f),f.g={}}Kv.prototype.N=function(){Kv.aa.N.call(this),FW(this)},Kv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var OO=a.JSON.stringify,Uve=a.JSON.parse,jve=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function xO(){}function VW(){}xO.prototype.h=null;var Qv={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kO(){Or.call(this,"d")}function FO(){Or.call(this,"c")}I(kO,Or),I(FO,Or);var mh={},BW=null;function Lw(){return BW=BW||new Xr}function UW(f){Or.call(this,mh.La,f)}function Yv(f){const y=Lw();ui(y,new UW(y))}function jW(f,y){Or.call(this,mh.STAT_EVENT,f),this.stat=y}function mo(f){const y=Lw();ui(y,new jW(y,f))}function HW(f,y){Or.call(this,mh.Ma,f),this.size=y}function Jv(f,y){if("function"!=typeof f)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},y)}function Zv(){this.g=!0}function Pg(f,y,b,C){f.info(function(){return"XMLHTTP TEXT ("+y+"): "+function zve(f,y){if(!f.g)return y;if(!y)return null;try{var b=JSON.parse(y);if(b)for(f=0;f<b.length;f++)if(Array.isArray(b[f])){var C=b[f];if(!(2>C.length)){var G=C[1];if(Array.isArray(G)&&!(1>G.length)){var ne=G[0];if("noop"!=ne&&"stop"!=ne&&"close"!=ne)for(var xe=1;xe<G.length;xe++)G[xe]=""}}}return OO(b)}catch{return y}}(f,b)+(C?" "+C:"")})}mh.La="serverreachability",I(UW,Or),mh.STAT_EVENT="statevent",I(jW,Or),mh.Ma="timingevent",I(HW,Or),Zv.prototype.xa=function(){this.g=!1},Zv.prototype.info=function(){};var LO,Vw={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$W={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Bw(){}function vu(f,y,b,C){this.j=f,this.i=y,this.l=b,this.R=C||1,this.U=new Kv(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new GW}function GW(){this.i=null,this.g="",this.h=!1}I(Bw,xO),Bw.prototype.g=function(){return new XMLHttpRequest},Bw.prototype.i=function(){return{}},LO=new Bw;var zW={},VO={};function BO(f,y,b){f.L=1,f.v=$w(Qc(y)),f.m=b,f.P=!0,WW(f,null)}function WW(f,y){f.F=Date.now(),Uw(f),f.A=Qc(f.v);var b=f.A,C=f.R;Array.isArray(C)||(C=[String(C)]),sq(b.i,"t",C),f.C=0,b=f.j.J,f.h=new GW,f.g=wq(f.j,b?y:null,!f.m),0<f.O&&(f.M=new Bve(_(f.Y,f,f.g),f.O)),y=f.U,b=f.g,C=f.ca;var G="readystatechange";Array.isArray(G)||(G&&(kW[0]=G.toString()),G=kW);for(var ne=0;ne<G.length;ne++){var xe=zv(b,G[ne],C||y.handleEvent,!1,y.h||y);if(!xe)break;y.g[xe.key]=xe}y=f.H?S(f.H):{},f.m?(f.u||(f.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,y)):(f.u="GET",f.g.ea(f.A,f.u,null,y)),Yv(),function Hve(f,y,b,C,G,ne){f.info(function(){if(f.g)if(ne)for(var xe="",On=ne.split("&"),Si=0;Si<On.length;Si++){var an=On[Si].split("=");if(1<an.length){var Hi=an[0];an=an[1];var $i=Hi.split("_");xe=2<=$i.length&&"type"==$i[1]?xe+(Hi+"=")+an+"&":xe+(Hi+"=redacted&")}}else xe=null;else xe=ne;return"XMLHTTP REQ ("+C+") [attempt "+G+"]: "+y+"\n"+b+"\n"+xe})}(f.i,f.u,f.A,f.l,f.R,f.m)}function qW(f){return!!f.g&&"GET"==f.u&&2!=f.L&&f.j.Ca}function Wve(f,y){var b=f.C,C=y.indexOf("\n",b);return-1==C?VO:(b=Number(y.substring(b,C)),isNaN(b)?zW:(C+=1)+b>y.length?VO:(y=y.slice(C,C+b),f.C=C+b,y))}function Uw(f){f.S=Date.now()+f.I,KW(f,f.I)}function KW(f,y){if(null!=f.B)throw Error("WatchDog timer not null");f.B=Jv(_(f.ba,f),y)}function UO(f){f.B&&(a.clearTimeout(f.B),f.B=null)}function Xv(f){0==f.j.G||f.J||Eq(f.j,f)}function _h(f){UO(f);var y=f.M;y&&"function"==typeof y.ma&&y.ma(),f.M=null,FW(f.U),f.g&&(y=f.g,f.g=null,y.abort(),y.ma())}function jO(f,y){try{var b=f.j;if(0!=b.G&&(b.g==f||HO(b.h,f)))if(!f.K&&HO(b.h,f)&&3==b.G){try{var C=b.Da.g.parse(y)}catch{C=null}if(Array.isArray(C)&&3==C.length){var G=C;if(0==G[0]){e:if(!b.u){if(b.g){if(!(b.g.F+3e3<f.F))break e;Kw(b),Ww(b)}WO(b),mo(18)}}else b.za=G[1],0<b.za-b.T&&37500>G[2]&&b.F&&0==b.v&&!b.C&&(b.C=Jv(_(b.Za,b),6e3));if(1>=JW(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else vh(b,11)}else if((f.K||b.g==f)&&Kw(b),!P(y))for(G=b.Da.g.parse(y),y=0;y<G.length;y++){let an=G[y];if(b.T=an[0],an=an[1],2==b.G)if("c"==an[0]){b.K=an[1],b.ia=an[2];const Hi=an[3];null!=Hi&&(b.la=Hi,b.j.info("VER="+b.la));const $i=an[4];null!=$i&&(b.Aa=$i,b.j.info("SVER="+b.Aa));const kg=an[5];null!=kg&&"number"==typeof kg&&0<kg&&(b.L=C=1.5*kg,b.j.info("backChannelRequestTimeoutMs_="+C)),C=b;const ua=f.g;if(ua){const Yw=ua.g?ua.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yw){var ne=C.h;ne.g||-1==Yw.indexOf("spdy")&&-1==Yw.indexOf("quic")&&-1==Yw.indexOf("h2")||(ne.j=ne.l,ne.g=new Set,ne.h&&($O(ne,ne.h),ne.h=null))}if(C.D){const KO=ua.g?ua.g.getResponseHeader("X-HTTP-Session-Id"):null;KO&&(C.ya=KO,Kn(C.I,C.D,KO))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-f.F,b.j.info("Handshake RTT: "+b.R+"ms"));var xe=f;if((C=b).qa=Tq(C,C.J?C.ia:null,C.W),xe.K){ZW(C.h,xe);var On=xe,Si=C.L;Si&&(On.I=Si),On.B&&(UO(On),Uw(On)),C.g=xe}else yq(C);0<b.i.length&&qw(b)}else"stop"!=an[0]&&"close"!=an[0]||vh(b,7);else 3==b.G&&("stop"==an[0]||"close"==an[0]?"stop"==an[0]?vh(b,7):zO(b):"noop"!=an[0]&&b.l&&b.l.ta(an),b.v=0)}Yv()}catch{}}vu.prototype.ca=function(f){f=f.target;const y=this.M;y&&3==Yc(f)?y.j():this.Y(f)},vu.prototype.Y=function(f){try{if(f==this.g)e:{const $i=Yc(this.g);var y=this.g.Ba();if(this.g.Z(),!(3>$i)&&(3!=$i||this.g&&(this.h.h||this.g.oa()||fq(this.g)))){this.J||4!=$i||7==y||Yv(),UO(this);var b=this.g.Z();this.X=b;t:if(qW(this)){var C=fq(this.g);f="";var G=C.length,ne=4==Yc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){_h(this),Xv(this);var xe="";break t}this.h.i=new a.TextDecoder}for(y=0;y<G;y++)this.h.h=!0,f+=this.h.i.decode(C[y],{stream:!(ne&&y==G-1)});C.length=0,this.h.g+=f,this.C=0,xe=this.h.g}else xe=this.g.oa();if(this.o=200==b,function $ve(f,y,b,C,G,ne,xe){f.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+G+"]: "+y+"\n"+b+"\n"+ne+" "+xe})}(this.i,this.u,this.A,this.l,this.R,$i,b),this.o){if(this.T&&!this.K){t:{if(this.g){var On,Si=this.g;if((On=Si.g?Si.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(On)){var an=On;break t}}an=null}if(!(b=an)){this.o=!1,this.s=3,mo(12),_h(this),Xv(this);break e}Pg(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jO(this,b)}if(this.P){let ua;for(b=!0;!this.J&&this.C<xe.length;){if(ua=Wve(this,xe),ua==VO){4==$i&&(this.s=4,mo(14),b=!1),Pg(this.i,this.l,null,"[Incomplete Response]");break}if(ua==zW){this.s=4,mo(15),Pg(this.i,this.l,xe,"[Invalid Chunk]"),b=!1;break}Pg(this.i,this.l,ua,null),jO(this,ua)}if(qW(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=$i||0!=xe.length||this.h.h||(this.s=1,mo(16),b=!1),this.o=this.o&&b,b){if(0<xe.length&&!this.W){this.W=!0;var Hi=this.j;Hi.g==this&&Hi.ba&&!Hi.M&&(Hi.j.info("Great, no buffering proxy detected. Bytes received: "+xe.length),qO(Hi),Hi.M=!0,mo(11))}}else Pg(this.i,this.l,xe,"[Invalid Chunked Response]"),_h(this),Xv(this)}else Pg(this.i,this.l,xe,null),jO(this,xe);4==$i&&_h(this),this.o&&!this.J&&(4==$i?Eq(this.j,this):(this.o=!1,Uw(this)))}else(function l0e(f){const y={};f=(f.g&&2<=Yc(f)&&f.g.getAllResponseHeaders()||"").split("\r\n");for(let C=0;C<f.length;C++){if(P(f[C]))continue;var b=H(f[C]);const G=b[0];if("string"!=typeof(b=b[1]))continue;b=b.trim();const ne=y[G]||[];y[G]=ne,ne.push(b)}!function k(f,y){for(const b in f)y.call(void 0,f[b],b,f)}(y,function(C){return C.join(", ")})})(this.g),400==b&&0<xe.indexOf("Unknown SID")?(this.s=3,mo(12)):(this.s=0,mo(13)),_h(this),Xv(this)}}}catch{}},vu.prototype.cancel=function(){this.J=!0,_h(this)},vu.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(function Gve(f,y){f.info(function(){return"TIMEOUT: "+y})}(this.i,this.A),2!=this.L&&(Yv(),mo(17)),_h(this),this.s=2,Xv(this)):KW(this,this.S-f)};var qve=class{constructor(f,y){this.g=f,this.map=y}};function QW(f){this.l=f||10,f=a.PerformanceNavigationTiming?0<(f=a.performance.getEntriesByType("navigation")).length&&("hq"==f[0].nextHopProtocol||"h2"==f[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function YW(f){return!!f.h||!!f.g&&f.g.size>=f.j}function JW(f){return f.h?1:f.g?f.g.size:0}function HO(f,y){return f.h?f.h==y:!!f.g&&f.g.has(y)}function $O(f,y){f.g?f.g.add(y):f.h=y}function ZW(f,y){f.h&&f.h==y?f.h=null:f.g&&f.g.has(y)&&f.g.delete(y)}function XW(f){if(null!=f.h)return f.i.concat(f.h.D);if(null!=f.g&&0!==f.g.size){let y=f.i;for(const b of f.g.values())y=y.concat(b.D);return y}return D(f.i)}function eq(f,y){if(f.forEach&&"function"==typeof f.forEach)f.forEach(y,void 0);else if(c(f)||"string"==typeof f)Array.prototype.forEach.call(f,y,void 0);else for(var b=function Qve(f){if(f.na&&"function"==typeof f.na)return f.na();if(!f.V||"function"!=typeof f.V){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||"string"==typeof f){var y=[];f=f.length;for(var b=0;b<f;b++)y.push(b);return y}y=[],b=0;for(const C in f)y[b++]=C;return y}}}(f),C=function Kve(f){if(f.V&&"function"==typeof f.V)return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if("string"==typeof f)return f.split("");if(c(f)){for(var y=[],b=f.length,C=0;C<b;C++)y.push(f[C]);return y}for(C in y=[],b=0,f)y[b++]=f[C];return y}(f),G=C.length,ne=0;ne<G;ne++)y.call(void 0,C[ne],b&&b[ne],f)}QW.prototype.cancel=function(){if(this.i=XW(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const f of this.g.values())f.cancel();this.g.clear()}};var tq=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yh(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof yh){this.h=f.h,jw(this,f.j),this.o=f.o,this.g=f.g,Hw(this,f.s),this.l=f.l;var y=f.i,b=new n0;b.i=y.i,y.g&&(b.g=new Map(y.g),b.h=y.h),nq(this,b),this.m=f.m}else f&&(y=String(f).match(tq))?(this.h=!1,jw(this,y[1]||"",!0),this.o=e0(y[2]||""),this.g=e0(y[3]||"",!0),Hw(this,y[4]),this.l=e0(y[5]||"",!0),nq(this,y[6]||"",!0),this.m=e0(y[7]||"")):(this.h=!1,this.i=new n0(null,this.h))}function Qc(f){return new yh(f)}function jw(f,y,b){f.j=b?e0(y,!0):y,f.j&&(f.j=f.j.replace(/:$/,""))}function Hw(f,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);f.s=y}else f.s=null}function nq(f,y,b){y instanceof n0?(f.i=y,function n0e(f,y){y&&!f.j&&(Eu(f),f.i=null,f.g.forEach(function(b,C){var G=C.toLowerCase();C!=G&&(iq(this,C),sq(this,G,b))},f)),f.j=y}(f.i,f.h)):(b||(y=t0(y,e0e)),f.i=new n0(y,f.h))}function Kn(f,y,b){f.i.set(y,b)}function $w(f){return Kn(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function e0(f,y){return f?y?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function t0(f,y,b){return"string"==typeof f?(f=encodeURI(f).replace(y,Jve),b&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Jve(f){return"%"+((f=f.charCodeAt(0))>>4&15).toString(16)+(15&f).toString(16)}yh.prototype.toString=function(){var f=[],y=this.j;y&&f.push(t0(y,rq,!0),":");var b=this.g;return(b||"file"==y)&&(f.push("//"),(y=this.o)&&f.push(t0(y,rq,!0),"@"),f.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(b=this.s)&&f.push(":",String(b))),(b=this.l)&&(this.g&&"/"!=b.charAt(0)&&f.push("/"),f.push(t0(b,"/"==b.charAt(0)?Xve:Zve,!0))),(b=this.i.toString())&&f.push("?",b),(b=this.m)&&f.push("#",t0(b,t0e)),f.join("")};var rq=/[#\/\?@]/g,Zve=/[#\?:]/g,Xve=/[#\?]/g,e0e=/[#\?@]/g,t0e=/#/g;function n0(f,y){this.h=this.g=null,this.i=f||null,this.j=!!y}function Eu(f){f.g||(f.g=new Map,f.h=0,f.i&&function Yve(f,y){if(f){f=f.split("&");for(var b=0;b<f.length;b++){var C=f[b].indexOf("="),G=null;if(0<=C){var ne=f[b].substring(0,C);G=f[b].substring(C+1)}else ne=f[b];y(ne,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}(f.i,function(y,b){f.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}function iq(f,y){Eu(f),y=Og(f,y),f.g.has(y)&&(f.i=null,f.h-=f.g.get(y).length,f.g.delete(y))}function oq(f,y){return Eu(f),y=Og(f,y),f.g.has(y)}function sq(f,y,b){iq(f,y),0<b.length&&(f.i=null,f.g.set(Og(f,y),D(b)),f.h+=b.length)}function Og(f,y){return y=String(y),f.j&&(y=y.toLowerCase()),y}function bu(f,y,b,C,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),C(b)}catch{}}function o0e(){this.g=new jve}function s0e(f,y,b){const C=b||"";try{eq(f,function(G,ne){let xe=G;u(G)&&(xe=OO(G)),y.push(C+ne+"="+encodeURIComponent(xe))})}catch(G){throw y.push(C+"type="+encodeURIComponent("_badmap")),G}}function r0(f){this.l=f.Ub||null,this.j=f.eb||!1}function Gw(f,y){Xr.call(this),this.D=f,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function aq(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}function o0(f){f.readyState=4,f.l=null,f.j=null,f.v=null,s0(f)}function s0(f){f.onreadystatechange&&f.onreadystatechange.call(f)}function cq(f){let y="";return we(f,function(b,C){y+=C,y+=":",y+=b,y+="\r\n"}),y}function GO(f,y,b){e:{for(C in b){var C=!1;break e}C=!0}C||(b=cq(b),"string"==typeof f?null!=b&&encodeURIComponent(String(b)):Kn(f,y,b))}function Ir(f){Xr.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=n0.prototype).add=function(f,y){Eu(this),this.i=null,f=Og(this,f);var b=this.g.get(f);return b||this.g.set(f,b=[]),b.push(y),this.h+=1,this},n.forEach=function(f,y){Eu(this),this.g.forEach(function(b,C){b.forEach(function(G){f.call(y,G,C,this)},this)},this)},n.na=function(){Eu(this);const f=Array.from(this.g.values()),y=Array.from(this.g.keys()),b=[];for(let C=0;C<y.length;C++){const G=f[C];for(let ne=0;ne<G.length;ne++)b.push(y[C])}return b},n.V=function(f){Eu(this);let y=[];if("string"==typeof f)oq(this,f)&&(y=y.concat(this.g.get(Og(this,f))));else{f=Array.from(this.g.values());for(let b=0;b<f.length;b++)y=y.concat(f[b])}return y},n.set=function(f,y){return Eu(this),this.i=null,oq(this,f=Og(this,f))&&(this.h-=this.g.get(f).length),this.g.set(f,[y]),this.h+=1,this},n.get=function(f,y){return f&&0<(f=this.V(f)).length?String(f[0]):y},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],y=Array.from(this.g.keys());for(var b=0;b<y.length;b++){var C=y[b];const ne=encodeURIComponent(String(C)),xe=this.V(C);for(C=0;C<xe.length;C++){var G=ne;""!==xe[C]&&(G+="="+encodeURIComponent(String(xe[C]))),f.push(G)}}return this.i=f.join("&")},I(r0,xO),r0.prototype.g=function(){return new Gw(this.l,this.j)},r0.prototype.i=function(f){return function(){return f}}({}),I(Gw,Xr),(n=Gw.prototype).open=function(f,y){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=y,this.readyState=1,s0(this)},n.send=function(f){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(y.body=f),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,o0(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,s0(this)),this.g&&(this.readyState=3,s0(this),this.g)))if("arraybuffer"===this.responseType)f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;aq(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var y=f.value?f.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!f.done}))&&(this.response=this.responseText+=y)}f.done?o0(this):s0(this),3==this.readyState&&aq(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,o0(this))},n.Qa=function(f){this.g&&(this.response=f,o0(this))},n.ga=function(){this.g&&o0(this)},n.setRequestHeader=function(f,y){this.u.append(f,y)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],y=this.h.entries();for(var b=y.next();!b.done;)f.push((b=b.value)[0]+": "+b[1]),b=y.next();return f.join("\r\n")},Object.defineProperty(Gw.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(f){this.m=f?"include":"same-origin"}}),I(Ir,Xr);var a0e=/^https?$/i,c0e=["POST","PUT"];function lq(f,y){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=y,f.m=5,uq(f),zw(f)}function uq(f){f.A||(f.A=!0,ui(f,"complete"),ui(f,"error"))}function dq(f){if(f.h&&typeof s<"u"&&(!f.v[1]||4!=Yc(f)||2!=f.Z()))if(f.u&&4==Yc(f))OW(f.Ea,0,f);else if(ui(f,"readystatechange"),4==Yc(f)){f.h=!1;try{const xe=f.Z();e:switch(xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var C;if(C=0===xe){var G=String(f.D).match(tq)[1]||null;!G&&a.self&&a.self.location&&(G=a.self.location.protocol.slice(0,-1)),C=!a0e.test(G?G.toLowerCase():"")}b=C}if(b)ui(f,"complete"),ui(f,"success");else{f.m=6;try{var ne=2<Yc(f)?f.g.statusText:""}catch{ne=""}f.l=ne+" ["+f.Z()+"]",uq(f)}}finally{zw(f)}}}function zw(f,y){if(f.g){hq(f);const b=f.g,C=f.v[0]?()=>{}:null;f.g=null,f.v=null,y||ui(f,"ready");try{b.onreadystatechange=C}catch{}}}function hq(f){f.I&&(a.clearTimeout(f.I),f.I=null)}function Yc(f){return f.g?f.g.readyState:0}function fq(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function a0(f,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[f]||y}function pq(f){this.Aa=0,this.i=[],this.j=new Zv,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=a0("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=a0("baseRetryDelayMs",5e3,f),this.cb=a0("retryDelaySeedMs",1e4,f),this.Wa=a0("forwardChannelMaxRetries",2,f),this.wa=a0("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new QW(f&&f.concurrentRequestLimit),this.Da=new o0e,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function zO(f){if(gq(f),3==f.G){var y=f.U++,b=Qc(f.I);if(Kn(b,"SID",f.K),Kn(b,"RID",y),Kn(b,"TYPE","terminate"),c0(f,b),(y=new vu(f,f.j,y)).L=2,y.v=$w(Qc(b)),b=!1,a.navigator&&a.navigator.sendBeacon)try{b=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!b&&a.Image&&((new Image).src=y.v,b=!0),b||(y.g=wq(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Uw(y)}Iq(f)}function Ww(f){f.g&&(qO(f),f.g.cancel(),f.g=null)}function gq(f){Ww(f),f.u&&(a.clearTimeout(f.u),f.u=null),Kw(f),f.h.cancel(),f.s&&("number"==typeof f.s&&a.clearTimeout(f.s),f.s=null)}function qw(f){if(!YW(f.h)&&!f.s){f.s=!0;var y=f.Ga;Ai||fh(),Qa||(Ai(),Qa=!0),la.add(y,f),f.B=0}}function mq(f,y){var b;b=y?y.l:f.U++;const C=Qc(f.I);Kn(C,"SID",f.K),Kn(C,"RID",b),Kn(C,"AID",f.T),c0(f,C),f.m&&f.o&&GO(C,f.m,f.o),b=new vu(f,f.j,b,f.B+1),null===f.m&&(b.H=f.o),y&&(f.i=y.D.concat(f.i)),y=_q(f,b,1e3),b.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),$O(f.h,b),BO(b,C,y)}function c0(f,y){f.H&&we(f.H,function(b,C){Kn(y,C,b)}),f.l&&eq({},function(b,C){Kn(y,C,b)})}function _q(f,y,b){b=Math.min(f.i.length,b);var C=f.l?_(f.l.Na,f.l,f):null;e:{var G=f.i;let ne=-1;for(;;){const xe=["count="+b];-1==ne?0<b?(ne=G[0].g,xe.push("ofs="+ne)):ne=0:xe.push("ofs="+ne);let On=!0;for(let Si=0;Si<b;Si++){let an=G[Si].g;const Hi=G[Si].map;if(an-=ne,0>an)ne=Math.max(0,G[Si].g-100),On=!1;else try{s0e(Hi,xe,"req"+an+"_")}catch{C&&C(Hi)}}if(On){C=xe.join("&");break e}}}return f=f.i.splice(0,b),y.D=f,C}function yq(f){if(!f.g&&!f.u){f.Y=1;var y=f.Fa;Ai||fh(),Qa||(Ai(),Qa=!0),la.add(y,f),f.v=0}}function WO(f){return!(f.g||f.u||3<=f.v||(f.Y++,f.u=Jv(_(f.Fa,f),bq(f,f.v)),f.v++,0))}function qO(f){null!=f.A&&(a.clearTimeout(f.A),f.A=null)}function vq(f){f.g=new vu(f,f.j,"rpc",f.Y),null===f.m&&(f.g.H=f.o),f.g.O=0;var y=Qc(f.qa);Kn(y,"RID","rpc"),Kn(y,"SID",f.K),Kn(y,"AID",f.T),Kn(y,"CI",f.F?"0":"1"),!f.F&&f.ja&&Kn(y,"TO",f.ja),Kn(y,"TYPE","xmlhttp"),c0(f,y),f.m&&f.o&&GO(y,f.m,f.o),f.L&&(f.g.I=f.L);var b=f.g;f=f.ia,b.L=1,b.v=$w(Qc(y)),b.m=null,b.P=!0,WW(b,f)}function Kw(f){null!=f.C&&(a.clearTimeout(f.C),f.C=null)}function Eq(f,y){var b=null;if(f.g==y){Kw(f),qO(f),f.g=null;var C=2}else{if(!HO(f.h,y))return;b=y.D,ZW(f.h,y),C=1}if(0!=f.G)if(y.o)if(1==C){b=y.m?y.m.length:0,y=Date.now()-y.F;var G=f.B;ui(C=Lw(),new HW(C,b)),qw(f)}else yq(f);else if(3==(G=y.s)||0==G&&0<y.X||!(1==C&&function u0e(f,y){return!(JW(f.h)>=f.h.j-(f.s?1:0)||(f.s?(f.i=y.D.concat(f.i),0):1==f.G||2==f.G||f.B>=(f.Va?0:f.Wa)||(f.s=Jv(_(f.Ga,f,y),bq(f,f.B)),f.B++,0)))}(f,y)||2==C&&WO(f)))switch(b&&0<b.length&&(y=f.h,y.i=y.i.concat(b)),G){case 1:vh(f,5);break;case 4:vh(f,10);break;case 3:vh(f,6);break;default:vh(f,2)}}function bq(f,y){let b=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(b*=2),b*y}function vh(f,y){if(f.j.info("Error code "+y),2==y){var b=_(f.fb,f),C=f.Xa;const G=!C;C=new yh(C||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||jw(C,"https"),$w(C),G?function r0e(f,y){const b=new Zv;if(a.Image){const C=new Image;C.onload=v(bu,b,"TestLoadImage: loaded",!0,y,C),C.onerror=v(bu,b,"TestLoadImage: error",!1,y,C),C.onabort=v(bu,b,"TestLoadImage: abort",!1,y,C),C.ontimeout=v(bu,b,"TestLoadImage: timeout",!1,y,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=f}else y(!1)}(C.toString(),b):function i0e(f,y){new Zv;const C=new AbortController,G=setTimeout(()=>{C.abort(),bu(0,0,!1,y)},1e4);fetch(f,{signal:C.signal}).then(ne=>{clearTimeout(G),bu(0,0,!!ne.ok,y)}).catch(()=>{clearTimeout(G),bu(0,0,!1,y)})}(C.toString(),b)}else mo(2);f.G=0,f.l&&f.l.sa(y),Iq(f),gq(f)}function Iq(f){if(f.G=0,f.ka=[],f.l){const y=XW(f.h);(0!=y.length||0!=f.i.length)&&(A(f.ka,y),A(f.ka,f.i),f.h.i.length=0,D(f.i),f.i.length=0),f.l.ra()}}function Tq(f,y,b){var C=b instanceof yh?Qc(b):new yh(b);if(""!=C.g)y&&(C.g=y+"."+C.g),Hw(C,C.s);else{var G=a.location;C=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;var ne=new yh(null);C&&jw(ne,C),y&&(ne.g=y),G&&Hw(ne,G),b&&(ne.l=b),C=ne}return y=f.ya,(b=f.D)&&y&&Kn(C,b,y),Kn(C,"VER",f.la),c0(f,C),C}function wq(f,y,b){if(y&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return(y=new Ir(f.Ca&&!f.pa?new r0({eb:b}):f.pa)).Ha(f.J),y}function Dq(){}function Qw(){}function as(f,y){Xr.call(this),this.g=new pq(y),this.l=f,this.h=y&&y.messageUrlParams||null,f=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(f?f["X-WebChannel-Content-Type"]=y.messageContentType:f={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(f?f["X-WebChannel-Client-Profile"]=y.va:f={"X-WebChannel-Client-Profile":y.va}),this.g.S=f,(f=y&&y.Sb)&&!P(f)&&(this.g.m=f),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!P(y)&&(this.g.D=y,null!==(f=this.h)&&y in f&&y in(f=this.h)&&delete f[y]),this.j=new xg(this)}function Cq(f){kO.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var y=f.__sm__;if(y){e:{for(const b in y){f=b;break e}f=void 0}(this.i=f)&&(f=this.i,y=null!==y&&f in y?y[f]:void 0),this.data=y}else this.data=f}function Aq(){FO.call(this),this.status=1}function xg(f){this.g=f}(n=Ir.prototype).Ha=function(f){this.J=f},n.ea=function(f,y,b,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);y=y?y.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():LO.g(),this.v=function LW(f){return f.h||(f.h=f.i())}(this.o?this.o:LO),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(y,String(f),!0),this.B=!1}catch(ne){return void lq(this,ne)}if(f=b||"",b=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var G in C)b.set(G,C[G]);else{if("function"!=typeof C.keys||"function"!=typeof C.get)throw Error("Unknown input type for opt_headers: "+String(C));for(const ne of C.keys())b.set(ne,C.get(ne))}C=Array.from(b.keys()).find(ne=>"content-type"==ne.toLowerCase()),G=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(c0e,y,void 0))||C||G||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,xe]of b)this.g.setRequestHeader(ne,xe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hq(this),this.u=!0,this.g.send(f),this.u=!1}catch(ne){lq(this,ne)}},n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,ui(this,"complete"),ui(this,"abort"),zw(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zw(this,!0)),Ir.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?dq(this):this.bb())},n.bb=function(){dq(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Yc(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var y=this.g.responseText;return f&&0==y.indexOf(f)&&(y=y.substring(f.length)),Uve(y)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=pq.prototype).la=8,n.G=1,n.connect=function(f,y,b,C){mo(0),this.W=f,this.H=y||{},b&&void 0!==C&&(this.H.OSID=b,this.H.OAID=C),this.F=this.X,this.I=Tq(this,null,this.W),qw(this)},n.Ga=function(f){if(this.s)if(this.s=null,1==this.G){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const G=new vu(this,this.j,f);let ne=this.o;if(this.S&&(ne?(ne=S(ne),U(ne,this.S)):ne=this.S),null!==this.m||this.O||(G.H=ne,ne=null),this.P)e:{for(var y=0,b=0;b<this.i.length;b++){var C=this.i[b];if(void 0===(C="__data__"in C.map&&"string"==typeof(C=C.map.__data__)?C.length:void 0))break;if(4096<(y+=C)){y=b;break e}if(4096===y||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=_q(this,G,y),Kn(b=Qc(this.I),"RID",f),Kn(b,"CVER",22),this.D&&Kn(b,"X-HTTP-Session-Id",this.D),c0(this,b),ne&&(this.O?y="headers="+encodeURIComponent(String(cq(ne)))+"&"+y:this.m&&GO(b,this.m,ne)),$O(this.h,G),this.Ua&&Kn(b,"TYPE","init"),this.P?(Kn(b,"$req",y),Kn(b,"SID","null"),G.T=!0,BO(G,b,null)):BO(G,b,y),this.G=2}}else 3==this.G&&(f?mq(this,f):0==this.i.length||YW(this.h)||mq(this))},n.Fa=function(){if(this.u=null,vq(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Jv(_(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mo(10),Ww(this),vq(this))},n.Za=function(){null!=this.C&&(this.C=null,Ww(this),WO(this),mo(19))},n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),mo(2)):(this.j.info("Failed to ping google.com"),mo(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=Dq.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},Qw.prototype.g=function(f,y){return new as(f,y)},I(as,Xr),as.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},as.prototype.close=function(){zO(this.g)},as.prototype.o=function(f){var y=this.g;if("string"==typeof f){var b={};b.__data__=f,f=b}else this.u&&((b={}).__data__=OO(f),f=b);y.i.push(new qve(y.Ya++,f)),3==y.G&&qw(y)},as.prototype.N=function(){this.g.l=null,delete this.j,zO(this.g),delete this.g,as.aa.N.call(this)},I(Cq,kO),I(Aq,FO),I(xg,Dq),xg.prototype.ua=function(){ui(this.g,"a")},xg.prototype.ta=function(f){ui(this.g,new Cq(f))},xg.prototype.sa=function(f){ui(this.g,new Aq)},xg.prototype.ra=function(){ui(this.g,"b")},Qw.prototype.createWebChannel=Qw.prototype.g,as.prototype.send=as.prototype.o,as.prototype.open=as.prototype.m,as.prototype.close=as.prototype.close,c$=Lc.createWebChannelTransport=function(){return new Qw},a$=Lc.getStatEventTarget=function(){return Lw()},s$=Lc.Event=mh,bR=Lc.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vw.NO_ERROR=0,Vw.TIMEOUT=8,Vw.HTTP_ERROR=6,SI=Lc.ErrorCode=Vw,$W.COMPLETE="complete",o$=Lc.EventType=$W,VW.EventType=Qv,Qv.OPEN="a",Qv.CLOSE="b",Qv.ERROR="c",Qv.MESSAGE="d",Xr.prototype.listen=Xr.prototype.K,Ty=Lc.WebChannel=VW,Lc.FetchXmlHttpFactory=r0,Ir.prototype.listenOnce=Ir.prototype.L,Ir.prototype.getLastError=Ir.prototype.Ka,Ir.prototype.getLastErrorCode=Ir.prototype.Ba,Ir.prototype.getStatus=Ir.prototype.Z,Ir.prototype.getResponseJson=Ir.prototype.Oa,Ir.prototype.getResponseText=Ir.prototype.oa,Ir.prototype.send=Ir.prototype.ea,Ir.prototype.setWithCredentials=Ir.prototype.Ha,i$=Lc.XhrIo=Ir}).apply(typeof AI<"u"?AI:typeof self<"u"?self:typeof window<"u"?window:{});const l$="@firebase/firestore";class ai{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ai.UNAUTHENTICATED=new ai(null),ai.GOOGLE_CREDENTIALS=new ai("google-credentials-uid"),ai.FIRST_PARTY=new ai("first-party-uid"),ai.MOCK_USER=new ai("mock-user");let wp="11.7.0";const Ul=new ia.Vy("@firebase/firestore");function Dp(){return Ul.logLevel}function Ee(n,...e){if(Ul.logLevel<=ia.$b.DEBUG){const t=e.map(IR);Ul.debug(`Firestore (${wp}): ${n}`,...t)}}function Mr(n,...e){if(Ul.logLevel<=ia.$b.ERROR){const t=e.map(IR);Ul.error(`Firestore (${wp}): ${n}`,...t)}}function Xo(n,...e){if(Ul.logLevel<=ia.$b.WARN){const t=e.map(IR);Ul.warn(`Firestore (${wp}): ${n}`,...t)}}function IR(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ue(n,e,t){let r="Unexpected state";"string"==typeof e?r=e:t=e,d$(n,r,t)}function d$(n,e,t){let r=`FIRESTORE (${wp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(void 0!==t)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Mr(r),new Error(r)}function qe(n,e,t,r){let i="Unexpected state";"string"==typeof t?i=t:r=t,n||d$(e,i,r)}function Me(n,e){return n}const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends At.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ci{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class h${constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gce{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ai.UNAUTHENTICATED))}shutdown(){}}class mce{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _ce{constructor(e){this.t=e,this.currentUser=ai.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;qe(void 0===this.o,42304);let i=this.i;const o=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve();let s=new ci;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ci,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable((0,T.A)(function*(){yield u.promise,yield o(r.currentUser)}))},c=u=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ci)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qe("string"==typeof r.accessToken,31837,{l:r}),new h$(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(null===e||"string"==typeof e,2055,{h:e}),new ai(e)}}class yce{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ai.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vce{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new yce(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ai.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class TR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ece{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,Cs._isFirebaseServerApp)(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){qe(void 0===this.o,3512);const r=o=>{null!=o.error&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,Ee("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new TR(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(qe("string"==typeof t.token,44558,{tokenResult:t}),this.m=t.token,new TR(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function bce(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function wR(){return new TextEncoder}class f${static newId(){const t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=bce(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function lt(n,e){return n<e?-1:n>e?1:0}function DR(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return lt(r,i);{const o=wR(),s=Ice(o.encode(p$(n,t)),o.encode(p$(e,t)));return 0!==s?s:lt(r,i)}}t+=r>65535?2:1}return lt(n.length,e.length)}function p$(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Ice(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return lt(n[t],e[t]);return lt(n.length,e.length)}function Cp(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function g$(n){return n+"\0"}const m$=-62135596800;class nr{static now(){return nr.fromMillis(Date.now())}static fromDate(e){return nr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new nr(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<m$)throw new _e(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds-m$).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class et{static fromTimestamp(e){return new et(e)}static min(){return new et(new nr(0,0))}static max(){return new et(new nr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const CR="__name__";class Va{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ue(637,{offset:t,range:e.length}),void 0===r?r=e.length-t:r>e.length-t&&Ue(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Va.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Va?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=Va.compareSegments(e.get(i),t.get(i));if(0!==o)return o}return lt(e.length,t.length)}static compareSegments(e,t){const r=Va.isNumericId(e),i=Va.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Va.extractNumericId(e).compare(Va.extractNumericId(t)):DR(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Bl.fromString(e.substring(4,e.length-2))}}class Ut extends Va{construct(e,t,r){return new Ut(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new _e(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Ut(t)}static emptyPath(){return new Ut([])}}const Tce=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zn extends Va{construct(e,t,r){return new zn(e,t,r)}static isValidIdentifier(e){return Tce.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===CR}static keyField(){return new zn([CR])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new _e(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new _e(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new _e(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new _e(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zn(t)}static emptyPath(){return new zn([])}}class Le{constructor(e){this.path=e}static fromPath(e){return new Le(Ut.fromString(e))}static fromName(e){return new Le(Ut.fromString(e).popFirst(5))}static empty(){return new Le(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ut.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new Ut(e.slice()))}}class Sp{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function AR(n){return n.fields.find(e=>2===e.kind)}function Nd(n){return n.fields.filter(e=>2!==e.kind)}Sp.UNKNOWN_ID=-1;class Md{constructor(e,t){this.fieldPath=e,this.kind=t}}class Rp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Rp(0,es.min())}}function y$(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=et.fromTimestamp(1e9===r?new nr(t+1,0):new nr(t,r));return new es(i,Le.empty(),e)}function v$(n){return new es(n.readTime,n.key,-1)}class es{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new es(et.min(),Le.empty(),-1)}static max(){return new es(et.max(),Le.empty(),-1)}}function SR(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Le.comparator(n.documentKey,e.documentKey),0!==t?t:lt(n.largestBatchId,e.largestBatchId))}const E$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class b${constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function jl(n){return RR.apply(this,arguments)}function RR(){return(RR=(0,T.A)(function*(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==E$)throw n;Ee("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new z((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof z?t:z.resolve(t)}catch(t){return z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):z.reject(t)}static resolve(e){return new z((t,r)=>{t(e)})}static reject(e){return new z((t,r)=>{r(e)})}static waitFor(e){return new z((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=z.resolve(!1);for(const r of e)t=t.next(i=>i?z.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new z((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let c=0;c<o;c++){const u=c;t(e[u]).next(h=>{s[u]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new z((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}const ts="SimpleDb";class RI{static open(e,t,r,i){try{return new RI(t,e.transaction(i,r))}catch(o){throw new wy(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new ci,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new wy(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=NR(r.target.error);this.S.reject(new wy(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Ee(ts,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ace(t)}}class Ba{static delete(e){return Ee(ts,"Removing database:",e),Pd((0,At.mS)().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,At.zW)())return!1;if(Ba.F())return!0;const e=(0,At.ZQ)(),t=Ba.M(e),r=0<t&&t<10,i=I$(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.O)}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,12.2===Ba.M((0,At.ZQ)())&&Mr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}k(e){var t=this;return(0,T.A)(function*(){return t.db||(Ee(ts,"Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=s=>{r(s.target.result)},o.onblocked=()=>{i(new wy(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;i("VersionError"===a.name?new _e(Z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new _e(Z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new wy(e,a))},o.onupgradeneeded=s=>{Ee(ts,'Database "'+t.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;if(null!==t.L&&t.L!==s.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${t.L}, event.oldVersion=${s.oldVersion}, event.newVersion=${s.newVersion}, db.version=${a.version}`);t.B.q(a,o.transaction,s.oldVersion,t.version).next(()=>{Ee(ts,"Database upgrade to version "+t.version+" complete")})}}),t.db.addEventListener("close",r=>{t.L=r.target.version},{passive:!0})),t.$&&(t.db.onversionchange=r=>t.$(r)),t.db})()}U(e){this.$=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,T.A)(function*(){const s="readonly"===t;let a=0;for(;;){++a;try{o.db=yield o.k(e);const c=RI.open(o.db,e,s?"readonly":"readwrite",r),u=i(c).next(h=>(c.v(),h)).catch(h=>(c.abort(h),z.reject(h))).toPromise();return u.catch(()=>{}),yield c.D,u}catch(c){const u=c,h="FirebaseError"!==u.name&&a<3;if(Ee(ts,"Transaction failed with error:",u.message,"Retrying:",h),o.close(),!h)return Promise.reject(u)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function I$(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class Cce{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return Pd(this.K.delete())}}class wy extends _e{constructor(e,t){super(Z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Hl(n){return"IndexedDbTransactionError"===n.name}class Ace{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ee(ts,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ee(ts,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Pd(r)}add(e){return Ee(ts,"ADD",this.store.name,e,e),Pd(this.store.add(e))}get(e){return Pd(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ee(ts,"GET",this.store.name,e,t),t))}delete(e){return Ee(ts,"DELETE",this.store.name,e),Pd(this.store.delete(e))}count(){return Ee(ts,"COUNT",this.store.name),Pd(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const o=i.getAll(r.range);return new z((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{const o=this.cursor(r),s=[];return this.Y(o,(a,c)=>{s.push(c)}).next(()=>s)}}Z(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new z((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}X(e,t){Ee(ts,"DELETE ALL",this.store.name);const r=this.options(e,t);r.ee=!1;const i=this.cursor(r);return this.Y(i,(o,s,a)=>a.delete())}te(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Y(i,t)}ne(e){const t=this.cursor({});return new z((r,i)=>{t.onerror=o=>{const s=NR(o.target.error);i(s)},t.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}Y(e,t){const r=[];return new z((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const c=new Cce(a),u=t(a.primaryKey,a.value,c);if(u instanceof z){const h=u.catch(m=>(c.done(),z.reject(m)));r.push(h)}c.isDone?i():null===c.j?a.continue():a.continue(c.j)}}).next(()=>z.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.ee?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Pd(n){return new z((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=NR(r.target.error);t(i)}})}let T$=!1;function NR(n){const e=Ba.M((0,At.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new _e("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return T$||(T$=!0,setTimeout(()=>{throw r},0)),r}}return n}const Dy="IndexBackfiller";class Sce{constructor(e,t){this.asyncQueue=e,this.re=t,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ie(e){var t=this;Ee(Dy,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,T.A)(function*(){t.task=null;try{const r=yield t.re.se();Ee(Dy,`Documents written: ${r}`)}catch(r){Hl(r)?Ee(Dy,"Ignoring IndexedDB error during index backfill: ",r):yield jl(r)}yield t.ie(6e4)}))}}class Rce{constructor(e,t){this.localStore=e,this.persistence=t}se(){var e=this;return(0,T.A)(function*(t=50){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>e.oe(r,t))}).apply(this,arguments)}oe(e,t){const r=new Set;let i=t,o=!0;return z.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(null!==s&&!r.has(s))return Ee(Dy,`Processing collection: ${s}`),this._e(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}_e(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ae(i,o)).next(a=>(Ee(Dy,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}ae(e,t){let r=e;return t.changes.forEach((i,o)=>{const s=v$(o);SR(s,r)>0&&(r=s)}),new es(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ns=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}return n.le=-1,n})();function Cy(n){return null==n}function Ay(n){return 0===n&&1/n==-1/0}function w$(n){return"number"==typeof n&&Number.isInteger(n)&&!Ay(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Vi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=D$(e)),e=Nce(n.get(t),e);return D$(e)}function Nce(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function D$(n){return n+"\x01\x01"}function Ua(n){const e=n.length;if(qe(e>=2,64408,{path:n}),2===e)return qe("\x01"===n.charAt(0)&&"\x01"===n.charAt(1),56145,{path:n}),Ut.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const s=n.indexOf("\x01",o);switch((s<0||s>t)&&Ue(50515,{path:n}),n.charAt(s+1)){case"\x01":const a=n.substring(o,s);let c;0===i.length?c=a:(i+=a,c=i,i=""),r.push(c);break;case"\x10":i+=n.substring(o,s),i+="\0";break;case"\x11":i+=n.substring(o,s+1);break;default:Ue(61167,{path:n})}o=s+2}return new Ut(r)}const Od="remoteDocuments",Sy="owner",Np="owner",Ry="mutationQueues",oa="mutations",C$="batchId",xd="userMutationsIndex",A$=["userId","batchId"];function MI(n,e){return[n,Vi(e)]}function S$(n,e,t){return[n,Vi(e),t]}const Pce={},Mp="documentMutations",PI="remoteDocumentsV14",Oce=["prefixPath","collectionGroup","readTime","documentId"],OI="documentKeyIndex",xce=["prefixPath","collectionGroup","documentId"],R$="collectionGroupIndex",kce=["collectionGroup","readTime","prefixPath","documentId"],Ny="remoteDocumentGlobal",MR="remoteDocumentGlobalKey",Pp="targets",N$="queryTargetsIndex",Fce=["canonicalId","targetId"],Op="targetDocuments",Lce=["targetId","path"],PR="documentTargetsIndex",Vce=["path","targetId"],xI="targetGlobalKey",kd="targetGlobal",My="collectionParents",Bce=["collectionId","parent"],xp="clientMetadata",kI="bundles",FI="namedQueries",OR="indexConfiguration",xR="collectionGroupIndex",LI="indexState",zce=["indexId","uid"],M$="sequenceNumberIndex",Wce=["uid","sequenceNumber"],VI="indexEntries",qce=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],P$="documentKeyIndex",Kce=["indexId","uid","orderedDocumentKey"],BI="documentOverlays",Qce=["userId","collectionPath","documentId"],kR="collectionPathOverlayIndex",Yce=["userId","collectionPath","largestBatchId"],O$="collectionGroupOverlayIndex",Jce=["userId","collectionGroup","largestBatchId"],FR="globals",x$=[Ry,oa,Mp,Od,Pp,Sy,kd,Op,xp,Ny,My,kI,FI],Xce=[...x$,BI],k$=[Ry,oa,Mp,PI,Pp,Sy,kd,Op,xp,Ny,My,kI,FI,BI],F$=k$,LR=[...F$,OR,LI,VI],ele=LR,tle=[...LR,FR];class VR extends b${constructor(e,t){super(),this.he=e,this.currentSequenceNumber=t}}function Zr(n,e){const t=Me(n);return Ba.N(t.he,e)}function L$(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function B$(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class jn{constructor(e,t){this.comparator=e,this.root=t||vi.EMPTY}insert(e,t){return new jn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vi.BLACK,null,null))}remove(e){return new jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new UI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new UI(this.root,e,this.comparator,!1)}getReverseIterator(){return new UI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new UI(this.root,e,this.comparator,!0)}}class UI{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vi{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??vi.RED,this.left=i??vi.EMPTY,this.right=o??vi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new vi(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return vi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return vi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ue(27949);return e+(this.isRed()?0:1)}}vi.EMPTY=null,vi.RED=!0,vi.BLACK=!1,vi.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue(57766)}get value(){throw Ue(16141)}get color(){throw Ue(16727)}get left(){throw Ue(29726)}get right(){throw Ue(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new vi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yn{constructor(e){this.comparator=e,this.data=new jn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new U$(this.data.getIterator())}getIteratorFrom(e){return new U$(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof yn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new yn(this.comparator);return t.data=e,t}}class U${constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function kp(n){return n.hasNext()?n.getNext():void 0}class Oo{constructor(e){this.fields=e,e.sort(zn.comparator)}static empty(){return new Oo([])}unionWith(e){let t=new yn(zn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Oo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Cp(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class j$ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class br{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new j$("Invalid base64 string: "+o):o}}(e);return new br(t)}static fromUint8Array(e){const t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new br(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}br.EMPTY_BYTE_STRING=new br("");const rle=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vc(n){if(qe(!!n,39018),"string"==typeof n){let e=0;const t=rle.exec(n);if(qe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rr(n.seconds),nanos:rr(n.nanos)}}function rr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Bc(n){return"string"==typeof n?br.fromBase64String(n):br.fromUint8Array(n)}const H$="server_timestamp",$$="__type__",G$="__previous_value__",z$="__local_write_time__";function jI(n){var e,t;return(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{})[$$])||void 0===t?void 0:t.stringValue)===H$}function HI(n){const e=n.mapValue.fields[G$];return jI(e)?HI(e):e}function Py(n){const e=Vc(n.mapValue.fields[z$].timestampValue);return new nr(e.seconds,e.nanos)}class ile{constructor(e,t,r,i,o,s,a,c,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const Oy="(default)";class zl{constructor(e,t){this.projectId=e,this.database=t||Oy}static empty(){return new zl("","")}get isDefaultDatabase(){return this.database===Oy}isEqual(e){return e instanceof zl&&e.projectId===this.projectId&&e.database===this.database}}const BR="__type__",W$="__max__",Wl={mapValue:{fields:{__type__:{stringValue:W$}}}},UR="__vector__",Fp="value",$I={nullValue:"NULL_VALUE"};function ql(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?jI(n)?4:J$(n)?9007199254740991:WI(n)?10:11:Ue(28295,{value:n})}function ja(n,e){if(n===e)return!0;const t=ql(n);if(t!==ql(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Py(n).isEqual(Py(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Vc(i.timestampValue),a=Vc(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Bc(n.bytesValue).isEqual(Bc(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return rr(i.geoPointValue.latitude)===rr(o.geoPointValue.latitude)&&rr(i.geoPointValue.longitude)===rr(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return rr(i.integerValue)===rr(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=rr(i.doubleValue),a=rr(o.doubleValue);return s===a?Ay(s)===Ay(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Cp(n.arrayValue.values||[],e.arrayValue.values||[],ja);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(L$(s)!==L$(a))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(void 0===a[c]||!ja(s[c],a[c])))return!1;return!0}(n,e);default:return Ue(52216,{left:n})}var o}function xy(n,e){return void 0!==(n.values||[]).find(t=>ja(t,e))}function Kl(n,e){if(n===e)return 0;const t=ql(n),r=ql(e);if(t!==r)return lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return lt(n.booleanValue,e.booleanValue);case 2:return function(o,s){const a=rr(o.integerValue||o.doubleValue),c=rr(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return q$(n.timestampValue,e.timestampValue);case 4:return q$(Py(n),Py(e));case 5:return DR(n.stringValue,e.stringValue);case 6:return function(o,s){const a=Bc(o),c=Bc(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){const h=lt(a[u],c[u]);if(0!==h)return h}return lt(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){const a=lt(rr(o.latitude),rr(s.latitude));return 0!==a?a:lt(rr(o.longitude),rr(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return K$(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,h;const v=null===(a=(o.fields||{})[Fp])||void 0===a?void 0:a.arrayValue,I=null===(c=(s.fields||{})[Fp])||void 0===c?void 0:c.arrayValue,D=lt((null===(u=v?.values)||void 0===u?void 0:u.length)||0,(null===(h=I?.values)||void 0===h?void 0:h.length)||0);return 0!==D?D:K$(v,I)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Wl.mapValue&&s===Wl.mapValue)return 0;if(o===Wl.mapValue)return 1;if(s===Wl.mapValue)return-1;const a=o.fields||{},c=Object.keys(a),u=s.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let m=0;m<c.length&&m<h.length;++m){const _=DR(c[m],h[m]);if(0!==_)return _;const v=Kl(a[c[m]],u[h[m]]);if(0!==v)return v}return lt(c.length,h.length)}(n.mapValue,e.mapValue);default:throw Ue(23264,{Pe:t})}}function q$(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return lt(n,e);const t=Vc(n),r=Vc(e),i=lt(t.seconds,r.seconds);return 0!==i?i:lt(t.nanos,r.nanos)}function K$(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=Kl(t[i],r[i]);if(o)return o}return lt(t.length,r.length)}function Lp(n){return jR(n)}function jR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Vc(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Bc(n.bytesValue).toBase64():"referenceValue"in n?Le.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=jR(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${jR(t.fields[s])}`;return i+"}"}(n.mapValue):Ue(61005,{value:n})}function GI(n){switch(ql(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=HI(n);return e?16+GI(e):16;case 5:return 2*n.stringValue.length;case 6:return Bc(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(n.arrayValue.values||[]).reduce((i,o)=>i+GI(o),0);case 10:case 11:return function(r){let i=0;return Gl(r.fields,(o,s)=>{i+=o.length+GI(s)}),i}(n.mapValue);default:throw Ue(13486,{value:n})}}function Fd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function HR(n){return!!n&&"integerValue"in n}function ky(n){return!!n&&"arrayValue"in n}function Q$(n){return!!n&&"nullValue"in n}function Y$(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zI(n){return!!n&&"mapValue"in n}function WI(n){var e,t;return(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{})[BR])||void 0===t?void 0:t.stringValue)===UR}function Fy(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Gl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Fy(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Fy(n.arrayValue.values[t]);return e}return Object.assign({},n)}function J$(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===W$}const Z$={mapValue:{fields:{[BR]:{stringValue:UR},[Fp]:{arrayValue:{}}}}};function ole(n){return"nullValue"in n?$I:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Fd(zl.empty(),Le.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?WI(n)?Z$:{mapValue:{}}:Ue(35942,{value:n})}function sle(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Fd(zl.empty(),Le.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?Z$:"mapValue"in n?WI(n)?{mapValue:{}}:Wl:Ue(61959,{value:n})}function X$(n,e){const t=Kl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function e3(n,e){const t=Kl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ei{constructor(e){this.value=e}static empty(){return new Ei({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!zI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fy(t)}setAll(e){let t=zn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Fy(s):i.push(a.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());zI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ja(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];zI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Gl(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Ei(Fy(this.value))}}function t3(n){const e=[];return Gl(n.fields,(t,r)=>{const i=new zn([t]);if(zI(r)){const o=t3(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Oo(e)}class Wn{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Wn(e,0,et.min(),et.min(),et.min(),Ei.empty(),0)}static newFoundDocument(e,t,r,i){return new Wn(e,1,t,et.min(),r,i,0)}static newNoDocument(e,t){return new Wn(e,2,t,et.min(),et.min(),Ei.empty(),0)}static newUnknownDocument(e,t){return new Wn(e,3,t,et.min(),et.min(),Ei.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(et.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ei.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ei.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ql{constructor(e,t){this.position=e,this.inclusive=t}}function n3(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],s=n.position[i];if(r=o.field.isKeyField()?Le.comparator(Le.fromName(s.referenceValue),t.key):Kl(s,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function r3(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ja(n.position[t],e.position[t]))return!1;return!0}class Ly{constructor(e,t="asc"){this.field=e,this.dir=t}}function ale(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class i3{}class jt extends i3{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new cle(e,t,r):"array-contains"===t?new dle(e,r):"in"===t?new u3(e,r):"not-in"===t?new hle(e,r):"array-contains-any"===t?new fle(e,r):new jt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new lle(e,r):new ule(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Kl(t,this.value)):null!==t&&ql(this.value)===ql(t)&&this.matchesComparison(Kl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vn extends i3{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new vn(e,t)}matches(e){return Vp(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Te||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Vp(n){return"and"===n.op}function $R(n){return"or"===n.op}function GR(n){return o3(n)&&Vp(n)}function o3(n){for(const e of n.filters)if(e instanceof vn)return!1;return!0}function zR(n){if(n instanceof jt)return n.field.canonicalString()+n.op.toString()+Lp(n.value);if(GR(n))return n.filters.map(e=>zR(e)).join(",");{const e=n.filters.map(t=>zR(t)).join(",");return`${n.op}(${e})`}}function s3(n,e){return n instanceof jt?(r=n,(i=e)instanceof jt&&r.op===i.op&&r.field.isEqual(i.field)&&ja(r.value,i.value)):n instanceof vn?function(r,i){return i instanceof vn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&s3(s,i.filters[a]),!0)}(n,e):void Ue(19439);var r,i}function a3(n,e){const t=n.filters.concat(e);return vn.create(t,n.op)}function c3(n){return n instanceof jt?`${(t=n).field.canonicalString()} ${t.op} ${Lp(t.value)}`:n instanceof vn?function(t){return t.op.toString()+" {"+t.getFilters().map(c3).join(" ,")+"}"}(n):"Filter";var t}class cle extends jt{constructor(e,t,r){super(e,t,r),this.key=Le.fromName(r.referenceValue)}matches(e){const t=Le.comparator(e.key,this.key);return this.matchesComparison(t)}}class lle extends jt{constructor(e,t){super(e,"in",t),this.keys=l3(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ule extends jt{constructor(e,t){super(e,"not-in",t),this.keys=l3(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function l3(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Le.fromName(r.referenceValue))}class dle extends jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ky(t)&&xy(t.arrayValue,this.value)}}class u3 extends jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&xy(this.value.arrayValue,t)}}class hle extends jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(xy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!xy(this.value.arrayValue,t)}}class fle extends jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ky(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>xy(this.value.arrayValue,r))}}class ple{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Ie=null}}function WR(n,e=null,t=[],r=[],i=null,o=null,s=null){return new ple(n,e,t,r,i,o,s)}function Ld(n){const e=Me(n);if(null===e.Ie){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>zR(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Cy(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Lp(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Lp(r)).join(",")),e.Ie=t}return e.Ie}function Vy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ale(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!s3(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!r3(n.startAt,e.startAt)&&r3(n.endAt,e.endAt)}function qI(n){return Le.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function KI(n,e){return n.filters.filter(t=>t instanceof jt&&t.field.isEqual(e))}function d3(n,e,t){let r=$I,i=!0;for(const o of KI(n,e)){let s=$I,a=!0;switch(o.op){case"<":case"<=":s=ole(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=$I}X$({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const s=t.position[o];X$({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}return{value:r,inclusive:i}}function h3(n,e,t){let r=Wl,i=!0;for(const o of KI(n,e)){let s=Wl,a=!0;switch(o.op){case">=":case">":s=sle(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Wl}e3({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const s=t.position[o];e3({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}return{value:r,inclusive:i}}class Uc{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null}}function f3(n,e,t,r,i,o,s,a){return new Uc(n,e,t,r,i,o,s,a)}function Bp(n){return new Uc(n)}function p3(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function qR(n){return null!==n.collectionGroup}function Up(n){const e=Me(n);if(null===e.Ee){e.Ee=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ee.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new yn(zn.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new Ly(o,r))}),t.has(zn.keyField().canonicalString())||e.Ee.push(new Ly(zn.keyField(),r))}return e.Ee}function Bi(n){const e=Me(n);return e.de||(e.de=function m3(n,e){if("F"===n.limitType)return WR(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Ly(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new Ql(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ql(n.startAt.position,n.startAt.inclusive):null;return WR(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Up(n))),e.de}function KR(n,e){const t=n.filters.concat([e]);return new Uc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function QI(n,e,t){return new Uc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function By(n,e){return Vy(Bi(n),Bi(e))&&n.limitType===e.limitType}function _3(n){return`${Ld(Bi(n))}|lt:${n.limitType}`}function jp(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>c3(i)).join(", ")}]`),Cy(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Lp(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Lp(i)).join(",")),`Target(${r})`}(Bi(n))}; limitType=${n.limitType})`}function Uy(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Le.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of Up(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(s,a,c){const u=n3(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,Up(r),i)||r.endAt&&!function(s,a,c){const u=n3(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,Up(r),i)));var r,i}function y3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function v3(n){return(e,t)=>{let r=!1;for(const i of Up(n)){const o=gle(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function gle(n,e,t){const r=n.field.isKeyField()?Le.comparator(e.key,t.key):function(o,s,a){const c=s.data.field(o),u=a.data.field(o);return null!==c&&null!==u?Kl(c,u):Ue(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ue(19790,{direction:n.dir})}}class jc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gl(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return B$(this.inner)}size(){return this.innerSize}}const mle=new jn(Le.comparator);function xo(){return mle}const E3=new jn(Le.comparator);function jy(...n){let e=E3;for(const t of n)e=e.insert(t.key,t);return e}function b3(n){let e=E3;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ha(){return Hy()}function I3(){return Hy()}function Hy(){return new jc(n=>n.toString(),(n,e)=>n.isEqual(e))}const _le=new jn(Le.comparator),yle=new yn(Le.comparator);function Dt(...n){let e=yle;for(const t of n)e=e.add(t);return e}const vle=new yn(lt);function QR(){return vle}function YR(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ay(e)?"-0":e}}function T3(n){return{integerValue:""+n}}function w3(n,e){return w$(e)?T3(e):YR(n,e)}class YI{constructor(){this._=void 0}}function Ele(n,e,t){return n instanceof Hp?function(i,o){const s={fields:{[$$]:{stringValue:H$},[z$]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&jI(o)&&(o=HI(o)),o&&(s.fields[G$]=o),{mapValue:s}}(t,e):n instanceof Vd?C3(n,e):n instanceof Bd?A3(n,e):function(i,o){const s=D3(i,o),a=S3(s)+S3(i.Re);return HR(s)&&HR(i.Re)?T3(a):YR(i.serializer,a)}(n,e)}function ble(n,e,t){return n instanceof Vd?C3(n,e):n instanceof Bd?A3(n,e):t}function D3(n,e){return n instanceof $p?HR(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class Hp extends YI{}class Vd extends YI{constructor(e){super(),this.elements=e}}function C3(n,e){const t=R3(e);for(const r of n.elements)t.some(i=>ja(i,r))||t.push(r);return{arrayValue:{values:t}}}class Bd extends YI{constructor(e){super(),this.elements=e}}function A3(n,e){let t=R3(e);for(const r of n.elements)t=t.filter(i=>!ja(i,r));return{arrayValue:{values:t}}}class $p extends YI{constructor(e,t){super(),this.serializer=e,this.Re=t}}function S3(n){return rr(n.integerValue||n.doubleValue)}function R3(n){return ky(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class $y{constructor(e,t){this.field=e,this.transform=t}}class Tle{constructor(e,t){this.version=e,this.transformResults=t}}class ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function JI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ZI{}function N3(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new zp(n.key,ir.none()):new Gp(n.key,n.data,ir.none());{const t=n.data,r=Ei.empty();let i=new yn(zn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);null===s&&o.length>1&&(o=o.popLast(),s=t.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new Hc(n.key,r,new Oo(i.toArray()),ir.none())}}function wle(n,e,t){n instanceof Gp?function(i,o,s){const a=i.value.clone(),c=O3(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Hc?function(i,o,s){if(!JI(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=O3(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(P3(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Gy(n,e,t,r){return n instanceof Gp?function(o,s,a,c){if(!JI(o.precondition,s))return a;const u=o.value.clone(),h=x3(o.fieldTransforms,c,s);return u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Hc?function(o,s,a,c){if(!JI(o.precondition,s))return a;const u=x3(o.fieldTransforms,c,s),h=s.data;return h.setAll(P3(o)),h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,JI(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function Dle(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=D3(r.transform,i||null);null!=o&&(null===t&&(t=Ei.empty()),t.set(r.field,o))}return t||null}function M3(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Cp(r,i,(o,s)=>function Ile(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Vd&&i instanceof Vd||r instanceof Bd&&i instanceof Bd?Cp(r.elements,i.elements,ja):r instanceof $p&&i instanceof $p?ja(r.Re,i.Re):r instanceof Hp&&i instanceof Hp);var r,i}(o,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class Gp extends ZI{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hc extends ZI{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function P3(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function O3(n,e,t){const r=new Map;qe(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){const o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,ble(s,a,t[i]))}return r}function x3(n,e,t){const r=new Map;for(const i of n){const o=i.transform,s=t.data.field(i.field);r.set(i.field,Ele(o,s,e))}return r}class zp extends ZI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JR extends ZI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ZR{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&wle(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Gy(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Gy(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=I3();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;const c=N3(s,a);null!==c&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(et.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Dt())}isEqual(e){return this.batchId===e.batchId&&Cp(this.mutations,e.mutations,(t,r)=>M3(t,r))&&Cp(this.baseMutations,e.baseMutations,(t,r)=>M3(t,r))}}class XR{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){qe(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return _le}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new XR(e,t,r,i)}}class eN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Cle{constructor(e,t){this.count=e,this.unchangedNames=t}}var Gr,Zt;function F3(n){switch(n){case Z.OK:return Ue(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Ue(15467,{code:n})}}function L3(n){if(void 0===n)return Mr("GRPC error has no .code"),Z.UNKNOWN;switch(n){case Gr.OK:return Z.OK;case Gr.CANCELLED:return Z.CANCELLED;case Gr.UNKNOWN:return Z.UNKNOWN;case Gr.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Gr.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Gr.INTERNAL:return Z.INTERNAL;case Gr.UNAVAILABLE:return Z.UNAVAILABLE;case Gr.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Gr.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Gr.NOT_FOUND:return Z.NOT_FOUND;case Gr.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Gr.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Gr.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Gr.ABORTED:return Z.ABORTED;case Gr.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Gr.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Gr.DATA_LOSS:return Z.DATA_LOSS;default:return Ue(39323,{code:n})}}(Zt=Gr||(Gr={}))[Zt.OK=0]="OK",Zt[Zt.CANCELLED=1]="CANCELLED",Zt[Zt.UNKNOWN=2]="UNKNOWN",Zt[Zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zt[Zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zt[Zt.NOT_FOUND=5]="NOT_FOUND",Zt[Zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zt[Zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zt[Zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zt[Zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zt[Zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zt[Zt.ABORTED=10]="ABORTED",Zt[Zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zt[Zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zt[Zt.INTERNAL=13]="INTERNAL",Zt[Zt.UNAVAILABLE=14]="UNAVAILABLE",Zt[Zt.DATA_LOSS=15]="DATA_LOSS";const Ale=new Bl([4294967295,4294967295],0);function V3(n){const e=wR().encode(n),t=new r$;return t.update(e),new Uint8Array(t.digest())}function B3(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Bl([t,r],0),new Bl([i,o],0)]}class tN{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new zy(`Invalid padding: ${t}`);if(r<0)throw new zy(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new zy(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new zy(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Bl.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(Bl.fromNumber(r)));return 1===i.compare(Ale)&&(i=new Bl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.pe)return!1;const t=V3(e),[r,i]=B3(t);for(let o=0;o<this.hashCount;o++){const s=this.we(r,i,o);if(!this.be(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new tN(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.pe)return;const t=V3(e),[r,i]=B3(t);for(let o=0;o<this.hashCount;o++){const s=this.we(r,i,o);this.Se(s)}}Se(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class zy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Wy{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,qy.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Wy(et.min(),i,new jn(lt),xo(),Dt())}}class qy{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new qy(r,t,Dt(),Dt(),Dt())}}class eT{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}}class U3{constructor(e,t){this.targetId=e,this.Ce=t}}class j3{constructor(e,t,r=br.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class H3{constructor(){this.Fe=0,this.Me=$3(),this.xe=br.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return 0!==this.Fe}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Dt(),t=Dt(),r=Dt();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ue(38017,{changeType:o})}}),new qy(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=$3()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,qe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Sle{constructor(e){this.ze=e,this.je=new Map,this.He=xo(),this.Je=tT(),this.Ye=tT(),this.Ze=new jn(lt)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:Ue(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){const o=i.target;if(qI(o))if(0===r){const s=new Le(o.path);this.tt(t,s,Wn.newNoDocument(s,et.min()))}else qe(1===r,20013,{expectedCount:r});else{const s=this.ut(t);if(s!==r){const a=this.ct(e),c=a?this.lt(a,e,s):1;0!==c&&(this.st(t),this.Ze=this.Ze.insert(t,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let s,a;try{s=Bc(r).toUint8Array()}catch(c){if(c instanceof j$)return Xo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new tN(s,i,o)}catch(c){return Xo(c instanceof zy?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.pe?null:a}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const s=this.ze.Pt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.tt(t,o,null),i++)}),i}It(e){const t=new Map;this.je.forEach((o,s)=>{const a=this._t(s);if(a){if(o.current&&qI(a.target)){const c=new Le(a.target.path);this.Et(c).has(s)||this.dt(s,c)||this.tt(s,c,Wn.newNoDocument(c,e))}o.Le&&(t.set(s,o.qe()),o.Qe())}});let r=Dt();this.Ye.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{const u=this._t(c);return!u||"TargetPurposeLimboResolution"===u.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.He.forEach((o,s)=>s.setReadTime(e));const i=new Wy(e,t,this.Ze,this.He,r);return this.He=xo(),this.Je=tT(),this.Ye=tT(),this.Ze=new jn(lt),i}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new H3,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new yn(lt),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new yn(lt),this.Je=this.Je.insert(e,t)),t}it(e){const t=null!==this._t(e);return t||Ee("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new H3),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function tT(){return new jn(Le.comparator)}function $3(){return new jn(Le.comparator)}const Rle={asc:"ASCENDING",desc:"DESCENDING"},Nle={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Mle={and:"AND",or:"OR"};class Ple{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function nN(n,e){return n.useProto3Json||Cy(e)?e:{value:e}}function Wp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function G3(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Ole(n,e){return Wp(n,e.toTimestamp())}function Pr(n){return qe(!!n,49232),et.fromTimestamp(function(t){const r=Vc(t);return new nr(r.seconds,r.nanos)}(n))}function rN(n,e){return iN(n,e).canonicalString()}function iN(n,e){const t=(i=n,new Ut(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function z3(n){const e=Ut.fromString(n);return qe(n4(e),10190,{key:e.toString()}),e}function Ky(n,e){return rN(n.databaseId,e.path)}function $a(n,e){const t=z3(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Le(K3(t))}function W3(n,e){return rN(n.databaseId,e)}function q3(n){const e=z3(n);return 4===e.length?Ut.emptyPath():K3(e)}function oN(n){return new Ut(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function K3(n){return qe(n.length>4&&"documents"===n.get(4),29091,{key:n.toString()}),n.popFirst(5)}function Q3(n,e,t){return{name:Ky(n,e),fields:t.value.mapValue.fields}}function Y3(n,e,t){const r=$a(n,e.name),i=Pr(e.updateTime),o=e.createTime?Pr(e.createTime):et.min(),s=new Ei({mapValue:{fields:e.fields}}),a=Wn.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Qy(n,e){let t;if(e instanceof Gp)t={update:Q3(n,e.key,e.value)};else if(e instanceof zp)t={delete:Ky(n,e.key)};else if(e instanceof Hc)t={update:Q3(n,e.key,e.data),updateMask:jle(e.fieldMask)};else{if(!(e instanceof JR))return Ue(16599,{ft:e.type});t={verify:Ky(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof Hp)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Vd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Bd)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof $p)return{fieldPath:s.field.canonicalString(),increment:a.Re};throw Ue(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Ole(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Ue(27497)),t;var o}function sN(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?ir.updateTime(Pr(o.updateTime)):void 0!==o.exists?ir.exists(o.exists):ir.none():ir.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;"setToServerValue"in a?(qe("REQUEST_TIME"===a.setToServerValue,16630,{proto:a}),c=new Hp):"appendMissingElements"in a?c=new Vd(a.appendMissingElements.values||[]):"removeAllFromArray"in a?c=new Bd(a.removeAllFromArray.values||[]):"increment"in a?c=new $p(s,a.increment):Ue(16584,{proto:a});const u=zn.fromServerFormat(a.fieldPath);return new $y(u,c)}(n,i)):[];var o;if(e.update){const i=$a(n,e.update.name),o=new Ei({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=new Oo((e.updateMask.fieldPaths||[]).map(h=>zn.fromServerFormat(h)));return new Hc(i,o,s,t,r)}return new Gp(i,o,t,r)}if(e.delete){const i=$a(n,e.delete);return new zp(i,t)}if(e.verify){const i=$a(n,e.verify);return new JR(i,t)}return Ue(1463,{proto:e})}function J3(n,e){return{documents:[W3(n,e.path)]}}function nT(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=W3(n,i);const o=function(u){if(0!==u.length)return t4(vn.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const s=function(u){if(0!==u.length)return u.map(h=>{return{field:Yl((_=h).field),direction:Vle(_.dir)};var _})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const a=nN(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{gt:t,parent:i};var u}function X3(n){let e=q3(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){qe(1===r,65062);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(m){const _=e4(m);return _ instanceof vn&&GR(_)?_.getFilters():[_]}(t.where));let s=[];t.orderBy&&(s=t.orderBy.map(_=>{return new Ly(qp((I=_).field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction));var I}));let a=null;t.limit&&(a=function(m){let _;return _="object"==typeof m?m.value:m,Cy(_)?null:_}(t.limit));let c=null;var m;t.startAt&&(c=new Ql((m=t.startAt).values||[],!!m.before));let u=null;return t.endAt&&(u=function(m){return new Ql(m.values||[],!m.before)}(t.endAt)),f3(e,i,s,o,a,"F",c,u)}function e4(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=qp(t.unaryFilter.field);return jt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=qp(t.unaryFilter.field);return jt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=qp(t.unaryFilter.field);return jt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=qp(t.unaryFilter.field);return jt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ue(61313);default:return Ue(60726)}}(n):void 0!==n.fieldFilter?jt.create(qp((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ue(58110);default:return Ue(50506)}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return vn.create(t.compositeFilter.filters.map(r=>e4(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ue(1026)}}(t.compositeFilter.op))}(n):Ue(30097,{filter:n});var t}function Vle(n){return Rle[n]}function Ble(n){return Nle[n]}function Ule(n){return Mle[n]}function Yl(n){return{fieldPath:n.canonicalString()}}function qp(n){return zn.fromServerFormat(n.fieldPath)}function t4(n){return n instanceof jt?function(t){if("=="===t.op){if(Y$(t.value))return{unaryFilter:{field:Yl(t.field),op:"IS_NAN"}};if(Q$(t.value))return{unaryFilter:{field:Yl(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Y$(t.value))return{unaryFilter:{field:Yl(t.field),op:"IS_NOT_NAN"}};if(Q$(t.value))return{unaryFilter:{field:Yl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yl(t.field),op:Ble(t.op),value:t.value}}}(n):n instanceof vn?function(t){const r=t.getFilters().map(i=>t4(i));return 1===r.length?r[0]:{compositeFilter:{op:Ule(t.op),filters:r}}}(n):Ue(54877,{filter:n})}function jle(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function n4(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class $c{constructor(e,t,r,i,o=et.min(),s=et.min(),a=br.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new $c(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $c(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $c(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $c(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class r4{constructor(e){this.wt=e}}function i4(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:rT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ky(o=n.wt,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Wp(o,s.version.toTimestamp()),createTime:Wp(o,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ud(e.version)};else{if(!e.isUnknownDocument())return Ue(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Ud(e.version)}}var o,s;return r}function rT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ud(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jd(n){const e=new nr(n.seconds,n.nanoseconds);return et.fromTimestamp(e)}function Hd(n,e){const t=(e.baseMutations||[]).map(o=>sN(n.wt,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>sN(n.wt,o)),i=nr.fromMillis(e.localWriteTimeMs);return new ZR(e.batchId,i,t,r)}function Yy(n){const e=jd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?jd(n.lastLimboFreeSnapshotVersion):et.min();let r;return r=void 0!==n.query.documents?function(o){const s=o.documents.length;return qe(1===s,1966,{count:s}),Bi(Bp(q3(o.documents[0])))}(n.query):Bi(X3(n.query)),new $c(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,br.fromBase64String(n.resumeToken))}function o4(n,e){const t=Ud(e.snapshotVersion),r=Ud(e.lastLimboFreeSnapshotVersion);let i;i=qI(e.target)?J3(n.wt,e.target):nT(n.wt,e.target).gt;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ld(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function aN(n){const e=X3({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?QI(e,e.limit,"L"):e}function cN(n,e){return new eN(e.largestBatchId,sN(n.wt,e.overlayMutation))}function s4(n,e){const t=e.path.lastSegment();return[n,Vi(e.path.popLast()),t]}function a4(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ud(r.readTime),documentKey:Vi(r.documentKey.path),largestBatchId:r.largestBatchId}}class $le{getBundleMetadata(e,t){return c4(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:jd(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return c4(e).put({bundleId:(i=t).id,createTime:Ud(Pr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return l4(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:aN(o.bundledQuery),readTime:jd(o.readTime)};var o})}saveNamedQuery(e,t){return l4(e).put({name:(i=t).name,readTime:Ud(Pr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function c4(n){return Zr(n,kI)}function l4(n){return Zr(n,FI)}class iT{constructor(e,t){this.serializer=e,this.userId=t}static bt(e,t){return new iT(e,t.uid||"")}getOverlay(e,t){return Jy(e).get(s4(this.userId,t)).next(r=>r?cN(this.serializer,r):null)}getOverlays(e,t){const r=Ha();return z.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,s)=>{const a=new eN(t,s);i.push(this.St(e,a))}),z.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(s=>i.add(Vi(s.getCollectionPath())));const o=[];return i.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Jy(e).X(kR,a))}),z.waitFor(o)}getOverlaysForCollection(e,t,r){const i=Ha(),o=Vi(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Jy(e).J(kR,s).next(a=>{for(const c of a){const u=cN(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=Ha();let s;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Jy(e).te({index:O$,range:a},(c,u,h)=>{const m=cN(this.serializer,u);o.size()<i||m.largestBatchId===s?(o.set(m.getKey(),m),s=m.largestBatchId):h.done()}).next(()=>o)}St(e,t){return Jy(e).put(function(i,o,s){const[a,c,u]=s4(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Qy(i.wt,s.mutation)}}(this.serializer,this.userId,t))}}function Jy(n){return Zr(n,BI)}class Gle{Dt(e){return Zr(e,FR)}getSessionToken(e){return this.Dt(e).get("sessionToken").next(t=>{const r=t?.value;return r?br.fromUint8Array(r):br.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class $d{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(rr(e.integerValue));else if("doubleValue"in e){const r=rr(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),Ay(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),"string"==typeof r&&(r=Vc(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(Bc(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?J$(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):WI(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):Ue(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const r=e.fields||{};this.Mt(t,55);for(const i of Object.keys(r))this.Nt(i,t),this.Ct(r[i],t)}qt(e,t){var r,i;const o=e.fields||{};this.Mt(t,53);const s=Fp,a=(null===(i=null===(r=o[s].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.Mt(t,15),t.xt(rr(a)),this.Nt(s,t),this.Ct(o[s],t)}$t(e,t){const r=e.values||[];this.Mt(t,50);for(const i of r)this.Ct(i,t)}kt(e,t){this.Mt(t,37),Le.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}function zle(n){if(0===n)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function u4(n){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const s=zle(255&r[o]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(e/8)}$d.Wt=new $d;class Wle{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.zt(r.value),r=t.next();this.jt()}Ht(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Yt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.zt(r);else if(r<2048)this.zt(960|r>>>6),this.zt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.zt(480|r>>>12),this.zt(128|63&r>>>6),this.zt(128|63&r);else{const i=t.codePointAt(0);this.zt(240|i>>>18),this.zt(128|63&i>>>12),this.zt(128|63&i>>>6),this.zt(128|63&i)}}this.jt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Yt()}en(e){const t=this.tn(e),r=u4(t);this.nn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}rn(e){const t=this.tn(e),r=u4(t);this.nn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}sn(){this._n(255),this._n(255)}an(){this.un(255),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){const t=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}zt(e){const t=255&e;0===t?(this._n(0),this._n(255)):255===t?(this._n(255),this._n(0)):this._n(t)}Jt(e){const t=255&e;0===t?(this.un(0),this.un(255)):255===t?(this.un(255),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class qle{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}}class Kle{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}}class Zy{constructor(){this.ln=new Wle,this.hn=new qle(this.ln),this.Pn=new Kle(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return 0===e?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}}class Gd{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}In(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Gd(this.indexId,this.documentKey,this.arrayValue,r)}}function Jl(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=d4(n.arrayValue,e.arrayValue),0!==t?t:(t=d4(n.directionalValue,e.directionalValue),0!==t?t:Le.comparator(n.documentKey,e.documentKey)))}function d4(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class h4{constructor(e){this.En=new yn((t,r)=>zn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.An=[];for(const t of e.filters){const r=t;r.isInequality()?this.En=this.En.add(r):this.An.push(r)}}get Rn(){return this.En.size>1}Vn(e){if(qe(e.collectionGroup===this.collectionId,49279),this.Rn)return!1;const t=AR(e);if(void 0!==t&&!this.mn(t))return!1;const r=Nd(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.mn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.En.size>0){const a=this.En.getIterator().getNext();if(!i.has(a.field.canonicalString())){const c=r[o];if(!this.fn(a,c)||!this.gn(this.dn[s++],c))return!1}++o}for(;o<r.length;++o)if(s>=this.dn.length||!this.gn(this.dn[s++],r[o]))return!1;return!0}pn(){if(this.Rn)return null;let e=new yn(zn.comparator);const t=[];for(const r of this.An)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new Md(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Md(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Md(r.field,"asc"===r.dir?0:1)));return new Sp(Sp.UNKNOWN_ID,this.collectionId,t,Rp.empty())}mn(e){for(const t of this.An)if(this.fn(t,e))return!0;return!1}fn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}gn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function f4(n){var e,t;if(qe(n instanceof jt||n instanceof vn,20012),n instanceof jt){if(n instanceof u3){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>jt.create(n.field,"==",o)))||[];return vn.create(i,"or")}return n}const r=n.filters.map(i=>f4(i));return vn.create(r,n.op)}function Qle(n){if(0===n.getFilters().length)return[];const e=dN(f4(n));return qe(p4(e),7391),lN(e)||uN(e)?[e]:e.getFilters()}function lN(n){return n instanceof jt}function uN(n){return n instanceof vn&&GR(n)}function p4(n){return lN(n)||uN(n)||function(t){if(t instanceof vn&&$R(t)){for(const r of t.getFilters())if(!lN(r)&&!uN(r))return!1;return!0}return!1}(n)}function dN(n){if(qe(n instanceof jt||n instanceof vn,34018),n instanceof jt)return n;if(1===n.filters.length)return dN(n.filters[0]);const e=n.filters.map(r=>dN(r));let t=vn.create(e,n.op);return t=oT(t),p4(t)?t:(qe(t instanceof vn,64498),qe(Vp(t),40251),qe(t.filters.length>1,57927),t.filters.reduce((r,i)=>hN(r,i)))}function hN(n,e){let t;return qe(n instanceof jt||n instanceof vn,38388),qe(e instanceof jt||e instanceof vn,25473),t=n instanceof jt?e instanceof jt?vn.create([n,e],"and"):g4(n,e):e instanceof jt?g4(e,n):function(i,o){if(qe(i.filters.length>0&&o.filters.length>0,48005),Vp(i)&&Vp(o))return a3(i,o.getFilters());const s=$R(i)?i:o,a=$R(i)?o:i,c=s.filters.map(u=>hN(u,a));return vn.create(c,"or")}(n,e),oT(t)}function g4(n,e){if(Vp(e))return a3(e,n.getFilters());{const t=e.filters.map(r=>hN(n,r));return vn.create(t,"or")}}function oT(n){if(qe(n instanceof jt||n instanceof vn,11850),n instanceof jt)return n;const e=n.getFilters();if(1===e.length)return oT(e[0]);if(o3(n))return n;const t=e.map(i=>oT(i)),r=[];return t.forEach(i=>{i instanceof jt?r.push(i):i instanceof vn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:vn.create(r,n.op)}class Yle{constructor(){this.yn=new fN}addToCollectionParentIndex(e,t){return this.yn.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(es.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(es.min())}updateCollectionGroup(e,t,r){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}}class fN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new yn(Ut.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new yn(Ut.comparator)).toArray()}}const m4="IndexedDbIndexManager",sT=new Uint8Array(0);class Jle{constructor(e,t){this.databaseId=t,this.wn=new fN,this.bn=new jc(r=>Ld(r),(r,i)=>Vy(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.wn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.wn.add(t)});const o={collectionId:r,parent:Vi(i)};return _4(e).put(o)}return z.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[g$(t),""],!1,!0);return _4(e).J(i).next(o=>{for(const s of o){if(s.collectionId!==t)break;r.push(Ua(s.parent))}return r})}addFieldIndex(e,t){const r=Xy(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;delete i.indexId;const o=r.add(i);if(t.indexState){const s=Yp(e);return o.next(a=>{s.put(a4(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=Xy(e),i=Yp(e),o=Qp(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Xy(e),r=Qp(e),i=Yp(e);return t.X().next(()=>r.X()).next(()=>i.X())}createTargetIndexes(e,t){return z.forEach(this.Sn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const o=new h4(r).pn();if(null!=o)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){const r=Qp(e);let i=!0;const o=new Map;return z.forEach(this.Sn(t),s=>this.Dn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=Dt();const a=[];return z.forEach(o,(c,u)=>{var j;Ee(m4,`Using index ${j=c,`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map(X=>`${X.fieldPath}:${X.kind}`).join(",")}`} to execute ${Ld(t)}`);const h=function(j,X){const ae=AR(X);if(void 0===ae)return null;for(const we of KI(j,ae.fieldPath))switch(we.op){case"array-contains-any":return we.value.arrayValue.values||[];case"array-contains":return[we.value]}return null}(u,c),m=function(j,X){const ae=new Map;for(const we of Nd(X))for(const k of KI(j,we.fieldPath))switch(k.op){case"==":case"in":ae.set(we.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return ae.set(we.fieldPath.canonicalString(),k.value),Array.from(ae.values())}return null}(u,c),_=function(j,X){const ae=[];let we=!0;for(const k of Nd(X)){const S=0===k.kind?d3(j,k.fieldPath,j.startAt):h3(j,k.fieldPath,j.startAt);ae.push(S.value),we&&(we=S.inclusive)}return new Ql(ae,we)}(u,c),v=function(j,X){const ae=[];let we=!0;for(const k of Nd(X)){const S=0===k.kind?h3(j,k.fieldPath,j.endAt):d3(j,k.fieldPath,j.endAt);ae.push(S.value),we&&(we=S.inclusive)}return new Ql(ae,we)}(u,c),I=this.vn(c,u,_),D=this.vn(c,u,v),A=this.Cn(c,u,m),O=this.Fn(c.indexId,h,I,_.inclusive,D,v.inclusive,A);return z.forEach(O,P=>r.Z(P,t.limit).next(j=>{j.forEach(X=>{const ae=Le.fromSegments(X.documentKey);s.has(ae)||(s=s.add(ae),a.push(ae))})}))}).next(()=>a)}return z.resolve(null)})}Sn(e){let t=this.bn.get(e);return t||(t=0===e.filters.length?[e]:Qle(vn.create(e.filters,"and")).map(r=>WR(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.bn.set(e,t),t)}Fn(e,t,r,i,o,s,a){const c=(null!=t?t.length:1)*Math.max(r.length,o.length),u=c/(null!=t?t.length:1),h=[];for(let m=0;m<c;++m){const _=t?this.Mn(t[m/u]):sT,v=this.xn(e,_,r[m%u],i),I=this.On(e,_,o[m%u],s),D=a.map(A=>this.xn(e,_,A,!0));h.push(...this.createRange(v,I,D))}return h}xn(e,t,r,i){const o=new Gd(e,Le.empty(),t,r);return i?o:o.In()}On(e,t,r,i){const o=new Gd(e,Le.empty(),t,r);return i?o.In():o}Dn(e,t){const r=new h4(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(const a of o)r.Vn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2;const i=this.Sn(t);return z.forEach(i,o=>this.Dn(e,o).next(s=>{s?0!==r&&s.fields.length<function(c){let u=new yn(zn.comparator),h=!1;for(const m of c.filters)for(const _ of m.getFlattenedFilters())_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?h=!0:u=u.add(_.field));for(const m of c.orderBy)m.field.isKeyField()||(u=u.add(m.field));return u.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Nn(e,t){const r=new Zy;for(const i of Nd(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const s=r.Tn(i.kind);$d.Wt.vt(o,s)}return r.cn()}Mn(e){const t=new Zy;return $d.Wt.vt(e,t.Tn(0)),t.cn()}Bn(e,t){const r=new Zy;return $d.Wt.vt(Fd(this.databaseId,t),r.Tn(function(o){const s=Nd(o);return 0===s.length?0:s[s.length-1].kind}(e))),r.cn()}Cn(e,t,r){if(null===r)return[];let i=[];i.push(new Zy);let o=0;for(const s of Nd(e)){const a=r[o++];for(const c of i)if(this.Ln(t,s.fieldPath)&&ky(a))i=this.kn(i,s,a);else{const u=c.Tn(s.kind);$d.Wt.vt(a,u)}}return this.qn(i)}vn(e,t,r){return this.Cn(e,t,r.position)}qn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].cn();return t}kn(e,t,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const a of i){const c=new Zy;c.seed(a.cn()),$d.Wt.vt(s,c.Tn(t.kind)),o.push(c)}return o}Ln(e,t){return!!e.filters.find(r=>r instanceof jt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Xy(e),i=Yp(e);return(t?r.J(xR,IDBKeyRange.bound(t,t)):r.J()).next(o=>{const s=[];return z.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(h,m){const _=m?new Rp(m.sequenceNumber,new es(jd(m.readTime),new Le(Ua(m.documentKey)),m.largestBatchId)):Rp.empty(),v=h.fields.map(([I,D])=>new Md(zn.fromServerFormat(I),D));return new Sp(h.indexId,h.collectionGroup,v,_)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:lt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Xy(e),o=Yp(e);return this.Qn(e).next(s=>i.J(xR,IDBKeyRange.bound(t,t)).next(a=>z.forEach(a,c=>o.put(a4(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){const r=new Map;return z.forEach(t,(i,o)=>{const s=r.get(i.collectionGroup);return(s?z.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),z.forEach(a,c=>this.$n(e,i,c).next(u=>{const h=this.Un(o,c);return u.isEqual(h)?z.resolve():this.Kn(e,o,c,u,h)}))))})}Wn(e,t,r,i){return Qp(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Bn(r,t.key),documentKey:t.key.path.toArray()})}Gn(e,t,r,i){return Qp(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Bn(r,t.key),t.key.path.toArray()])}$n(e,t,r){const i=Qp(e);let o=new yn(Jl);return i.te({index:P$,range:IDBKeyRange.only([r.indexId,this.uid,this.Bn(r,t)])},(s,a)=>{o=o.add(new Gd(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Un(e,t){let r=new yn(Jl);const i=this.Nn(t,e);if(null==i)return r;const o=AR(t);if(null!=o){const s=e.data.field(o.fieldPath);if(ky(s))for(const a of s.arrayValue.values||[])r=r.add(new Gd(t.indexId,e.key,this.Mn(a),i))}else r=r.add(new Gd(t.indexId,e.key,sT,i));return r}Kn(e,t,r,i,o){Ee(m4,"Updating index entries for document '%s'",t.key);const s=[];return function(c,u,h,m,_){const v=c.getIterator(),I=u.getIterator();let D=kp(v),A=kp(I);for(;D||A;){let O=!1,P=!1;if(D&&A){const j=h(D,A);j<0?P=!0:j>0&&(O=!0)}else null!=D?P=!0:O=!0;O?(m(A),A=kp(I)):P?(_(D),D=kp(v)):(D=kp(v),A=kp(I))}}(i,o,Jl,a=>{s.push(this.Wn(e,t,r,a))},a=>{s.push(this.Gn(e,t,r,a))}),z.waitFor(s)}Qn(e){let t=1;return Yp(e).te({index:M$,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Jl(s,a)).filter((s,a,c)=>!a||0!==Jl(s,c[a-1]));const i=[];i.push(e);for(const s of r){const a=Jl(s,e),c=Jl(s,t);if(0===a)i[0]=e.In();else if(a>0&&c<0)i.push(s),i.push(s.In());else if(c>0)break}i.push(t);const o=[];for(let s=0;s<i.length;s+=2){if(this.zn(i[s],i[s+1]))return[];o.push(IDBKeyRange.bound([i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,sT,[]],[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,sT,[]]))}return o}zn(e,t){return Jl(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(y4)}getMinOffset(e,t){return z.mapArray(this.Sn(t),r=>this.Dn(e,r).next(i=>i||Ue(44426))).next(y4)}}function _4(n){return Zr(n,My)}function Qp(n){return Zr(n,VI)}function Xy(n){return Zr(n,OR)}function Yp(n){return Zr(n,LI)}function y4(n){qe(0!==n.length,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;SR(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new es(e.readTime,e.documentKey,t)}const v4={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ui{static withCacheSize(e){return new Ui(e,Ui.DEFAULT_COLLECTION_PERCENTILE,Ui.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function b4(n,e,t){const r=n.store(oa),i=n.store(Mp),o=[],s=IDBKeyRange.only(t.batchId);let a=0;const c=r.te({range:s},(h,m,_)=>(a++,_.delete()));o.push(c.next(()=>{qe(1===a,47070,{batchId:t.batchId})}));const u=[];for(const h of t.mutations){const m=S$(e,h.key.path,t.batchId);o.push(i.delete(m)),u.push(h.key)}return z.waitFor(o).next(()=>u)}function aT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ue(14731);e=n.noDocument}return JSON.stringify(e).length}Ui.DEFAULT_COLLECTION_PERCENTILE=10,Ui.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ui.DEFAULT=new Ui(41943040,Ui.DEFAULT_COLLECTION_PERCENTILE,Ui.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ui.DISABLED=new Ui(-1,0,0);class cT{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.jn={}}static bt(e,t,r,i){qe(""!==e.uid,64387);const o=e.isAuthenticated()?e.uid:"";return new cT(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zl(e).te({index:xd,range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=Jp(e),s=Zl(e);return s.add({}).next(a=>{qe("number"==typeof a,49019);const c=new ZR(a,t,r,i),u=function(v,I,D){const A=D.baseMutations.map(P=>Qy(v.wt,P)),O=D.mutations.map(P=>Qy(v.wt,P));return{userId:I,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:A,mutations:O}}(this.serializer,this.userId,c),h=[];let m=new yn((_,v)=>lt(_.canonicalString(),v.canonicalString()));for(const _ of i){const v=S$(this.userId,_.key.path,a);m=m.add(_.key.path.popLast()),h.push(s.put(u)),h.push(o.put(v,Pce))}return m.forEach(_=>{h.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.jn[a]=c.keys()}),z.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return Zl(e).get(t).next(r=>r?(qe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Hd(this.serializer,r)):null)}Hn(e,t){return this.jn[t]?z.resolve(this.jn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.jn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Zl(e).te({index:xd,range:i},(s,a,c)=>{a.userId===this.userId&&(qe(a.batchId>=r,47524,{Jn:r}),o=Hd(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Zl(e).te({index:xd,range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zl(e).J(xd,t).next(r=>r.map(i=>Hd(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=MI(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Jp(e).te({range:i},(s,a,c)=>{const[u,h,m]=s,_=Ua(h);if(u===this.userId&&t.path.isEqual(_))return Zl(e).get(m).next(v=>{if(!v)throw Ue(61480,{Yn:s,batchId:m});qe(v.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:v.userId,batchId:m}),o.push(Hd(this.serializer,v))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yn(lt);const i=[];return t.forEach(o=>{const s=MI(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Jp(e).te({range:a},(u,h,m)=>{const[_,v,I]=u,D=Ua(v);_===this.userId&&o.path.isEqual(D)?r=r.add(I):m.done()});i.push(c)}),z.waitFor(i).next(()=>this.Zn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=MI(this.userId,r),s=IDBKeyRange.lowerBound(o);let a=new yn(lt);return Jp(e).te({range:s},(c,u,h)=>{const[m,_,v]=c,I=Ua(_);m===this.userId&&r.isPrefixOf(I)?I.length===i&&(a=a.add(v)):h.done()}).next(()=>this.Zn(e,a))}Zn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(Zl(e).get(o).next(s=>{if(null===s)throw Ue(35274,{batchId:o});qe(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(Hd(this.serializer,s))}))}),z.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return b4(e.he,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Xn(t.batchId)}),z.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Xn(e){delete this.jn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return z.resolve();const r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Jp(e).te({range:r},(o,s,a)=>{if(o[0]===this.userId){const c=Ua(o[1]);i.push(c)}else a.done()}).next(()=>{qe(0===i.length,56720,{er:i.map(o=>o.canonicalString())})})})}containsKey(e,t){return I4(e,this.userId,t)}tr(e){return T4(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function I4(n,e,t){const r=MI(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return Jp(n).te({range:o,ee:!0},(a,c,u)=>{const[h,m,_]=a;h===e&&m===i&&(s=!0),u.done()}).next(()=>s)}function Zl(n){return Zr(n,oa)}function Jp(n){return Zr(n,Mp)}function T4(n){return Zr(n,Ry)}class zd{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new zd(0)}static ir(){return new zd(-1)}}class Zle{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.sr(e).next(t=>{const r=new zd(t.highestTargetId);return t.highestTargetId=r.next(),this._r(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.sr(e).next(t=>et.fromTimestamp(new nr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.sr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.sr(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this._r(e,i)))}addTargetData(e,t){return this.ar(e,t).next(()=>this.sr(e).next(r=>(r.targetCount+=1,this.ur(t,r),this._r(e,r))))}updateTargetData(e,t){return this.ar(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Zp(e).delete(t.targetId)).next(()=>this.sr(e)).next(r=>(qe(r.targetCount>0,8065),r.targetCount-=1,this._r(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return Zp(e).te((s,a)=>{const c=Yy(a);c.sequenceNumber<=t&&null===r.get(c.targetId)&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>z.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Zp(e).te((r,i)=>{const o=Yy(i);t(o)})}sr(e){return w4(e).get(xI).next(t=>(qe(null!==t,2888),t))}_r(e,t){return w4(e).put(xI,t)}ar(e,t){return Zp(e).put(o4(this.serializer,t))}ur(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.sr(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ld(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Zp(e).te({range:i,index:N$},(s,a,c)=>{const u=Yy(a);Vy(t,u.target)&&(o=u,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=Xl(e);return t.forEach(s=>{const a=Vi(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),z.waitFor(i)}removeMatchingKeys(e,t,r){const i=Xl(e);return z.forEach(t,o=>{const s=Vi(o.path);return z.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=Xl(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Xl(e);let o=Dt();return i.te({range:r,ee:!0},(s,a,c)=>{const u=Ua(s[1]),h=new Le(u);o=o.add(h)}).next(()=>o)}containsKey(e,t){const r=Vi(t.path),i=IDBKeyRange.bound([r],[g$(r)],!1,!0);let o=0;return Xl(e).te({index:PR,ee:!0,range:i},([s,a],c,u)=>{0!==s&&(o++,u.done())}).next(()=>o>0)}Rt(e,t){return Zp(e).get(t).next(r=>r?Yy(r):null)}}function Zp(n){return Zr(n,Pp)}function w4(n){return Zr(n,kd)}function Xl(n){return Zr(n,Op)}const D4="LruGarbageCollector";function A4([n,e],[t,r]){const i=lt(n,t);return 0===i?lt(e,r):i}class Xle{constructor(e){this.cr=e,this.buffer=new yn(A4),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();A4(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class S4{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Tr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return null!==this.Tr}Ir(e){var t=this;Ee(D4,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,T.A)(function*(){t.Tr=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Hl(r)?Ee(D4,"Ignoring IndexedDB error during garbage collection: ",r):yield jl(r)}yield t.Ir(3e5)}))}}class eue{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return z.resolve(ns.le);const r=new Xle(t);return this.Er.forEachTarget(e,i=>r.Pr(i.sequenceNumber)).next(()=>this.Er.Ar(e,i=>r.Pr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Er.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(v4)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),v4):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let r,i,o,s,a,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,s=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(o=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(u=Date.now(),Dp()<=ia.$b.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-h}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(c-a)+`ms\n\tRemoved ${m} documents in `+(u-c)+`ms\nTotal Duration: ${u-h}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:m})))}}function R4(n,e){return new eue(n,e)}class tue{constructor(e,t){this.db=e,this.garbageCollector=R4(this,t)}dr(e){const t=this.Vr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ar(e,t){return this.mr(e,(r,i)=>t(i))}addReference(e,t,r){return lT(e,r)}removeReference(e,t,r){return lT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return lT(e,t)}gr(e,t){return function(i,o){let s=!1;return T4(i).ne(a=>I4(i,a,o).next(c=>(c&&(s=!0),z.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.mr(e,(s,a)=>{if(a<=t){const c=this.gr(e,s).next(u=>{if(!u)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,et.min()),Xl(e).delete([0,Vi(s.path)])))});i.push(c)}}).next(()=>z.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return lT(e,t)}mr(e,t){const r=Xl(e);let i,o=ns.le;return r.te({index:PR},([s,a],{path:c,sequenceNumber:u})=>{0===s?(o!==ns.le&&t(new Le(Ua(i)),o),o=u,i=c):o=ns.le}).next(()=>{o!==ns.le&&t(new Le(Ua(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function lT(n,e){return Xl(n).put((i=n.currentSequenceNumber,{targetId:0,path:Vi(e.path),sequenceNumber:i}));var i}class N4{constructor(){this.changes=new jc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class nue{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wd(e).put(r)}removeEntry(e,t,r){return Wd(e).delete(function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],rT(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.pr(e,r)))}getEntry(e,t){let r=Wn.newInvalidDocument(t);return Wd(e).te({index:OI,range:IDBKeyRange.only(ev(t))},(i,o)=>{r=this.yr(t,o)}).next(()=>r)}wr(e,t){let r={size:0,document:Wn.newInvalidDocument(t)};return Wd(e).te({index:OI,range:IDBKeyRange.only(ev(t))},(i,o)=>{r={document:this.yr(t,o),size:aT(o)}}).next(()=>r)}getEntries(e,t){let r=xo();return this.br(e,t,(i,o)=>{const s=this.yr(i,o);r=r.insert(i,s)}).next(()=>r)}Sr(e,t){let r=xo(),i=new jn(Le.comparator);return this.br(e,t,(o,s)=>{const a=this.yr(o,s);r=r.insert(o,a),i=i.insert(o,aT(s))}).next(()=>({documents:r,Dr:i}))}br(e,t,r){if(t.isEmpty())return z.resolve();let i=new yn(x4);t.forEach(c=>i=i.add(c));const o=IDBKeyRange.bound(ev(i.first()),ev(i.last())),s=i.getIterator();let a=s.getNext();return Wd(e).te({index:OI,range:o},(c,u,h)=>{const m=Le.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&x4(a,m)<0;)r(a,null),a=s.getNext();a&&a.isEqual(m)&&(r(a,u),a=s.hasNext()?s.getNext():null),a?h.H(ev(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){const s=t.path,a=[s.popLast().toArray(),s.lastSegment(),rT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wd(e).J(IDBKeyRange.bound(a,c,!0)).next(u=>{o?.incrementDocumentReadCount(u.length);let h=xo();for(const m of u){const _=this.yr(Le.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);_.isFoundDocument()&&(Uy(t,_)||i.has(_.key))&&(h=h.insert(_.key,_))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=xo();const s=O4(t,r),a=O4(t,es.max());return Wd(e).te({index:R$,range:IDBKeyRange.bound(s,a,!0)},(c,u,h)=>{const m=this.yr(Le.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(m.key,m),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new rue(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return P4(e).get(MR).next(t=>(qe(!!t,20021),t))}pr(e,t){return P4(e).put(MR,t)}yr(e,t){if(t){const r=function Hle(n,e){let t;if(e.document)t=Y3(n.wt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Le.fromSegments(e.noDocument.path),i=jd(e.noDocument.readTime);t=Wn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ue(56709);{const r=Le.fromSegments(e.unknownDocument.path),i=jd(e.unknownDocument.version);t=Wn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const o=new nr(i[0],i[1]);return et.fromTimestamp(o)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(et.min()))return r}return Wn.newInvalidDocument(e)}}function M4(n){return new nue(n)}class rue extends N4{constructor(e,t){super(),this.vr=e,this.trackRemovals=t,this.Cr=new jc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new yn((o,s)=>lt(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.Cr.get(o);if(t.push(this.vr.removeEntry(e,o,a.readTime)),s.isValidDocument()){const c=i4(this.vr.serializer,s);i=i.add(o.path.popLast());const u=aT(c);r+=u-a.size,t.push(this.vr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){const c=i4(this.vr.serializer,s.convertToNoDocument(et.min()));t.push(this.vr.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.vr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.vr.updateMetadata(e,r)),z.waitFor(t)}getFromCache(e,t){return this.vr.wr(e,t).next(r=>(this.Cr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.vr.Sr(e,t).next(({documents:r,Dr:i})=>(i.forEach((o,s)=>{this.Cr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}}function P4(n){return Zr(n,Ny)}function Wd(n){return Zr(n,PI)}function ev(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function O4(n,e){const t=e.documentKey.path.toArray();return[n,rT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function x4(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=lt(t[o],r[o]),i)return i;return i=lt(t.length,r.length),i||(i=lt(t[t.length-2],r[r.length-2]),i||lt(t[t.length-1],r[r.length-1]))}class iue{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class k4{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Gy(r.mutation,i,Oo.empty(),nr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Dt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Dt()){const i=Ha();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=jy();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const r=Ha();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Dt()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=xo();const s=Hy(),a=Hy();return t.forEach((c,u)=>{const h=r.get(u.key);i.has(u.key)&&(void 0===h||h.mutation instanceof Hc)?o=o.insert(u.key,u):void 0!==h?(s.set(u.key,h.mutation.getFieldMask()),Gy(h.mutation,u,h.mutation.getFieldMask(),nr.now())):s.set(u.key,Oo.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,h)=>s.set(u,h)),t.forEach((u,h)=>{var m;return a.set(u,new iue(h,null!==(m=s.get(u))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Hy();let i=new jn((s,a)=>s-a),o=Dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const a of s)a.keys().forEach(c=>{const u=t.get(c);if(null===u)return;let h=r.get(c)||Oo.empty();h=a.applyToLocalView(u,h),r.set(c,h);const m=(i.get(a.batchId)||Dt()).add(c);i=i.insert(a.batchId,m)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,h=c.value,m=I3();h.forEach(_=>{if(!o.has(_)){const v=N3(t.get(_),r.get(_));null!==v&&m.set(_,v),o=o.add(_)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,m))}return z.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Le.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):qR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var s}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):z.resolve(Ha());let a=-1,c=o;return s.next(u=>z.forEach(u,(h,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),o.get(h)?z.resolve():this.remoteDocumentCache.getEntry(e,h).next(_=>{c=c.insert(h,_)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,Dt())).next(h=>({batchId:a,changes:b3(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Le(t)).next(r=>{let i=jy();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let s=jy();return this.indexManager.getCollectionParents(e,o).next(a=>z.forEach(a,c=>{const u=(m=t,_=c.child(o),new Uc(_,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,_;return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((m,_)=>{s=s.insert(m,_)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{const h=u.getKey();null===s.get(h)&&(s=s.insert(h,Wn.newInvalidDocument(h)))});let a=jy();return s.forEach((c,u)=>{const h=o.get(c);void 0!==h&&Gy(h.mutation,u,Oo.empty(),nr.now()),Uy(t,u)&&(a=a.insert(c,u))}),a})}}class oue{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return z.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,{id:(i=t).id,version:i.version,createTime:Pr(i.createTime)}),z.resolve();var i}getNamedQuery(e,t){return z.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,{name:(i=t).name,query:aN(i.bundledQuery),readTime:Pr(i.readTime)}),z.resolve();var i}}class sue{constructor(){this.overlays=new jn(Le.comparator),this.Or=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ha();return z.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),z.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Or.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Or.delete(r)),z.resolve()}getOverlaysForCollection(e,t,r){const i=Ha(),o=t.length+1,s=new Le(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return z.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new jn((u,h)=>u-h);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=o.get(u.largestBatchId);null===h&&(h=Ha(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Ha(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return z.resolve(a)}St(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.Or.get(i.largestBatchId).delete(r.key);this.Or.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new eN(t,r));let o=this.Or.get(t);void 0===o&&(o=Dt(),this.Or.set(t,o)),this.Or.set(t,o.add(r.key))}}class aue{constructor(){this.sessionToken=br.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}}class pN{constructor(){this.Nr=new yn(li.Br),this.Lr=new yn(li.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const r=new li(e,t);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Qr(new li(e,t))}$r(e,t){e.forEach(r=>this.removeReference(r,t))}Ur(e){const t=new Le(new Ut([])),r=new li(t,e),i=new li(t,e+1),o=[];return this.Lr.forEachInRange([r,i],s=>{this.Qr(s),o.push(s.key)}),o}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new Le(new Ut([])),r=new li(t,e),i=new li(t,e+1);let o=Dt();return this.Lr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const t=new li(e,0),r=this.Nr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class li{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return Le.comparator(e.key,t.key)||lt(e.Gr,t.Gr)}static kr(e,t){return lt(e.Gr,t.Gr)||Le.comparator(e.key,t.key)}}class cue{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new yn(li.Br)}checkEmpty(e){return z.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.Jn;this.Jn++;const s=new ZR(o,t,r,i);this.mutationQueue.push(s);for(const a of i)this.zr=this.zr.add(new li(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(s)}lookupMutationBatch(e,t){return z.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Hr(t+1),o=i<0?0:i;return z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(0===this.mutationQueue.length?-1:this.Jn-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new li(t,0),i=new li(t,Number.POSITIVE_INFINITY),o=[];return this.zr.forEachInRange([r,i],s=>{const a=this.jr(s.Gr);o.push(a)}),z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yn(lt);return t.forEach(i=>{const o=new li(i,0),s=new li(i,Number.POSITIVE_INFINITY);this.zr.forEachInRange([o,s],a=>{r=r.add(a.Gr)})}),z.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Le.isDocumentKey(o)||(o=o.child(""));const s=new li(new Le(o),0);let a=new yn(lt);return this.zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Gr)),!0)},s),z.resolve(this.Jr(a))}Jr(e){const t=[];return e.forEach(r=>{const i=this.jr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){qe(0===this.Yr(t.batchId,"removed"),55003),this.mutationQueue.shift();let r=this.zr;return z.forEach(t.mutations,i=>{const o=new li(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,t){const r=new li(t,0),i=this.zr.firstAfterOrEqual(r);return z.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return z.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class lue{constructor(e){this.Zr=e,this.docs=new jn(Le.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Zr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return z.resolve(r?r.document.mutableCopy():Wn.newInvalidDocument(t))}getEntries(e,t){let r=xo();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Wn.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=xo();const s=t.path,a=new Le(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||SR(v$(h),r)<=0||(i.has(h.key)||Uy(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return z.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Ue(9500)}Xr(e,t){return z.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new uue(this)}getSize(e){return z.resolve(this.size)}}class uue extends N4{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.vr.addEntry(e,i)):this.vr.removeEntry(r)}),z.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}class due{constructor(e){this.persistence=e,this.ei=new jc(t=>Ld(t),Vy),this.lastRemoteSnapshotVersion=et.min(),this.highestTargetId=0,this.ti=0,this.ni=new pN,this.targetCount=0,this.ri=zd.rr()}forEachTarget(e,t){return this.ei.forEach((r,i)=>t(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ti&&(this.ti=t),z.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new zd(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.ar(t),z.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.ei.forEach((s,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.ei.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),z.waitFor(o).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){const r=this.ei.get(t)||null;return z.resolve(r)}addMatchingKeys(e,t,r){return this.ni.qr(t,r),z.resolve()}removeMatchingKeys(e,t,r){this.ni.$r(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),z.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),z.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ni.Wr(t);return z.resolve(r)}containsKey(e,t){return z.resolve(this.ni.containsKey(t))}}class gN{constructor(e,t){this.ii={},this.overlays={},this.si=new ns(0),this.oi=!1,this.oi=!0,this._i=new aue,this.referenceDelegate=e(this),this.ai=new due(this),this.indexManager=new Yle,this.remoteDocumentCache=new lue(r=>this.referenceDelegate.ui(r)),this.serializer=new r4(t),this.ci=new oue(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sue,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ii[e.toKey()];return r||(r=new cue(t,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,r){Ee("MemoryPersistence","Starting transaction:",e);const i=new hue(this.si.next());return this.referenceDelegate.li(),r(i).next(o=>this.referenceDelegate.hi(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Pi(e,t){return z.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,t)))}}class hue extends b${constructor(e){super(),this.currentSequenceNumber=e}}class uT{constructor(e){this.persistence=e,this.Ti=new pN,this.Ii=null}static Ei(e){return new uT(e)}get di(){if(this.Ii)return this.Ii;throw Ue(60996)}addReference(e,t,r){return this.Ti.addReference(r,t),this.di.delete(r.toString()),z.resolve()}removeReference(e,t,r){return this.Ti.removeReference(r,t),this.di.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),z.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.di.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.di,r=>{const i=Le.fromPath(r);return this.Ai(e,i).next(o=>{o||t.removeEntry(i,et.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return z.or([()=>z.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class dT{constructor(e,t){this.persistence=e,this.Ri=new jc(r=>Vi(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=R4(this,t)}static Ei(e,t){return new dT(e,t)}li(){}hi(e){return z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}Ar(e,t){return z.forEach(this.Ri,(r,i)=>this.gr(e,r,i).next(o=>o?z.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Xr(e,s=>this.gr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,et.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),z.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),z.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=GI(e.data.value)),t}gr(e,t,r){return z.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.Ri.get(t);return z.resolve(void 0!==i&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class fue{constructor(e){this.serializer=e}q(e,t,r,i){const o=new RI("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore(Sy),(c=e).createObjectStore(Ry,{keyPath:"userId"}),c.createObjectStore(oa,{keyPath:C$,autoIncrement:!0}).createIndex(xd,A$,{unique:!0}),c.createObjectStore(Mp),F4(e),function(c){c.createObjectStore(Od)}(e));let s=z.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore(Op),c.deleteObjectStore(Pp),c.deleteObjectStore(kd)}(e),F4(e)),s=s.next(()=>function(c){const u=c.store(kd),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:et.min().toTimestamp(),targetCount:0};return u.put(xI,h)}(o))),r<4&&i>=4&&(0!==r&&(s=s.next(()=>function(c,u){return u.store(oa).J().next(m=>{c.deleteObjectStore(oa),c.createObjectStore(oa,{keyPath:C$,autoIncrement:!0}).createIndex(xd,A$,{unique:!0});const _=u.store(oa),v=m.map(I=>_.put(I));return z.waitFor(v)})}(e,o))),s=s.next(()=>{!function(c){c.createObjectStore(xp,{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(s=s.next(()=>this.Vi(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore(Ny)}(e),this.mi(o)))),r<7&&i>=7&&(s=s.next(()=>this.fi(o))),r<8&&i>=8&&(s=s.next(()=>this.gi(e,o))),r<9&&i>=9&&(s=s.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(s=s.next(()=>this.pi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore(kI,{keyPath:"bundleId"})})(e),function(c){c.createObjectStore(FI,{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{!function(c){const u=c.createObjectStore(BI,{keyPath:Qce});u.createIndex(kR,Yce,{unique:!1}),u.createIndex(O$,Jce,{unique:!1})}(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){const u=c.createObjectStore(PI,{keyPath:Oce});u.createIndex(OI,xce),u.createIndex(R$,kce)}(e)).next(()=>this.yi(e,o)).next(()=>e.deleteObjectStore(Od))),r<14&&i>=14&&(s=s.next(()=>this.wi(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore(OR,{keyPath:"indexId",autoIncrement:!0}).createIndex(xR,"collectionGroup",{unique:!1}),c.createObjectStore(LI,{keyPath:zce}).createIndex(M$,Wce,{unique:!1}),c.createObjectStore(VI,{keyPath:qce}).createIndex(P$,Kce,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore(LI).clear()}).next(()=>{t.objectStore(VI).clear()})),r<17&&i>=17&&(s=s.next(()=>{!function(c){c.createObjectStore(FR,{keyPath:"name"})}(e)})),s}mi(e){let t=0;return e.store(Od).te((r,i)=>{t+=aT(i)}).next(()=>{const r={byteSize:t};return e.store(Ny).put(MR,r)})}Vi(e){const t=e.store(Ry),r=e.store(oa);return t.J().next(i=>z.forEach(i,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.J(xd,s).next(a=>z.forEach(a,c=>{qe(c.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const u=Hd(this.serializer,c);return b4(e,o.userId,u).next(()=>{})}))}))}fi(e){const t=e.store(Op),r=e.store(Od);return e.store(kd).get(xI).next(i=>{const o=[];return r.te((s,a)=>{const c=new Ut(s),u=[0,Vi(c)];o.push(t.get(u).next(h=>h?z.resolve():t.put({targetId:0,path:Vi(c),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>z.waitFor(o))})}gi(e,t){e.createObjectStore(My,{keyPath:Bce});const r=t.store(My),i=new fN,o=s=>{if(i.add(s)){const a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:Vi(c)})}};return t.store(Od).te({ee:!0},(s,a)=>{const c=new Ut(s);return o(c.popLast())}).next(()=>t.store(Mp).te({ee:!0},([s,a,c],u)=>{const h=Ua(a);return o(h.popLast())}))}pi(e){const t=e.store(Pp);return t.te((r,i)=>{const o=Yy(i),s=o4(this.serializer,o);return t.put(s)})}yi(e,t){const r=t.store(Od),i=[];return r.te((o,s)=>{const a=t.store(PI),c=(m=s,m.document?new Le(Ut.fromString(m.document.name).popFirst(5)):m.noDocument?Le.fromSegments(m.noDocument.path):m.unknownDocument?Le.fromSegments(m.unknownDocument.path):Ue(36783)).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};var m;i.push(a.put(u))}).next(()=>z.waitFor(i))}wi(e,t){const r=t.store(oa),i=M4(this.serializer),o=new gN(uT.Ei,this.serializer.wt);return r.J().next(s=>{const a=new Map;return s.forEach(c=>{var u;let h=null!==(u=a.get(c.userId))&&void 0!==u?u:Dt();Hd(this.serializer,c).keys().forEach(m=>h=h.add(m)),a.set(c.userId,h)}),z.forEach(a,(c,u)=>{const h=new ai(u),m=iT.bt(this.serializer,h),_=o.getIndexManager(h),v=cT.bt(h,this.serializer,_,o.referenceDelegate);return new k4(i,v,m,_).recalculateAndSaveOverlaysForDocumentKeys(new VR(t,ns.le),c).next()})})}}function F4(n){n.createObjectStore(Op,{keyPath:Lce}).createIndex(PR,Vce,{unique:!0}),n.createObjectStore(Pp,{keyPath:"targetId"}).createIndex(N$,Fce,{unique:!0}),n.createObjectStore(kd)}const eu="IndexedDbPersistence",mN=18e5,yN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class vN{constructor(e,t,r,i,o,s,a,c,u,h,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.bi=o,this.window=s,this.document=a,this.Si=u,this.Di=h,this.Ci=m,this.si=null,this.oi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fi=null,this.inForeground=!1,this.Mi=null,this.xi=null,this.Oi=Number.NEGATIVE_INFINITY,this.Ni=_=>Promise.resolve(),!vN.C())throw new _e(Z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tue(this,i),this.Bi=t+"main",this.serializer=new r4(c),this.Li=new Ba(this.Bi,this.Ci,new fue(this.serializer)),this._i=new Gle,this.ai=new Zle(this.referenceDelegate,this.serializer),this.remoteDocumentCache=M4(this.serializer),this.ci=new $le,this.window&&this.window.localStorage?this.ki=this.window.localStorage:(this.ki=null,!1===h&&Mr(eu,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.qi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new _e(Z.FAILED_PRECONDITION,yN);return this.Qi(),this.$i(),this.Ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ai.getHighestSequenceNumber(e))}).then(e=>{this.si=new ns(e,this.Si)}).then(()=>{this.oi=!0}).catch(e=>(this.Li&&this.Li.close(),Promise.reject(e)))}Ki(e){var t=this;return this.Ni=function(){var r=(0,T.A)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Li.U(function(){var t=(0,T.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.bi.enqueueAndForget((0,T.A)(function*(){t.started&&(yield t.qi())})))}qi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>hT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Wi(e).next(t=>{t||(this.isPrimary=!1,this.bi.enqueueRetryable(()=>this.Ni(!1)))})}).next(()=>this.Gi(e)).next(t=>this.isPrimary&&!t?this.zi(e).next(()=>!1):!!t&&this.ji(e).next(()=>!0))).catch(e=>{if(Hl(e))return Ee(eu,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ee(eu,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.bi.enqueueRetryable(()=>this.Ni(e)),this.isPrimary=e})}Wi(e){return tv(e).get(Np).next(t=>z.resolve(this.Hi(t)))}Ji(e){return hT(e).delete(this.clientId)}Yi(){var e=this;return(0,T.A)(function*(){if(e.isPrimary&&!e.Zi(e.Oi,mN)){e.Oi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Zr(r,xp);return i.J().next(o=>{const s=e.Xi(o,mN),a=o.filter(c=>-1===s.indexOf(c));return z.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(e.ki)for(const r of t)e.ki.removeItem(e.es(r.clientId))}})()}Ui(){this.xi=this.bi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.qi().then(()=>this.Yi()).then(()=>this.Ui()))}Hi(e){return!!e&&e.ownerId===this.clientId}Gi(e){return this.Di?z.resolve(!0):tv(e).get(Np).next(t=>{if(null!==t&&this.Zi(t.leaseTimestampMs,5e3)&&!this.ts(t.ownerId)){if(this.Hi(t)&&this.networkEnabled)return!0;if(!this.Hi(t)){if(!t.allowTabSynchronization)throw new _e(Z.FAILED_PRECONDITION,yN);return!1}}return!(!this.networkEnabled||!this.inForeground)||hT(e).J().next(r=>void 0===this.Xi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ee(eu,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,T.A)(function*(){e.oi=!1,e.ns(),e.xi&&(e.xi.cancel(),e.xi=null),e.rs(),e.ss(),yield e.Li.runTransaction("shutdown","readwrite",[Sy,xp],t=>{const r=new VR(t,ns.le);return e.zi(r).next(()=>e.Ji(r))}),e.Li.close(),e._s()})()}Xi(e,t){return e.filter(r=>this.Zi(r.updateTimeMs,t)&&!this.ts(r.clientId))}us(){return this.runTransaction("getActiveClients","readonly",e=>hT(e).J().next(t=>this.Xi(t,mN).map(r=>r.clientId)))}get started(){return this.oi}getGlobalsCache(){return this._i}getMutationQueue(e,t){return cT.bt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Jle(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return iT.bt(this.serializer,e)}getBundleCache(){return this.ci}runTransaction(e,t,r){Ee(eu,"Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=17===(c=this.Ci)?tle:16===c?ele:15===c?LR:14===c?F$:13===c?k$:12===c?Xce:11===c?x$:void Ue(60245);var c;let s;return this.Li.runTransaction(e,i,o,a=>(s=new VR(a,this.si?this.si.next():ns.le),"readwrite-primary"===t?this.Wi(s).next(c=>!!c||this.Gi(s)).next(c=>{if(!c)throw Mr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.bi.enqueueRetryable(()=>this.Ni(!1)),new _e(Z.FAILED_PRECONDITION,E$);return r(s)}).next(c=>this.ji(s).next(()=>c)):this.cs(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}cs(e){return tv(e).get(Np).next(t=>{if(null!==t&&this.Zi(t.leaseTimestampMs,5e3)&&!this.ts(t.ownerId)&&!this.Hi(t)&&!(this.Di||this.allowTabSynchronization&&t.allowTabSynchronization))throw new _e(Z.FAILED_PRECONDITION,yN)})}ji(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tv(e).put(Np,t)}static C(){return Ba.C()}zi(e){const t=tv(e);return t.get(Np).next(r=>this.Hi(r)?(Ee(eu,"Releasing primary lease."),t.delete(Np)):z.resolve())}Zi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Mr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Qi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Mi=()=>{this.bi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.qi()))},this.document.addEventListener("visibilitychange",this.Mi),this.inForeground="visible"===this.document.visibilityState)}rs(){this.Mi&&(this.document.removeEventListener("visibilitychange",this.Mi),this.Mi=null)}$i(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Fi=()=>{this.ns();const t=/(?:Version|Mobile)\/1[456]/;(0,At.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.bi.enterRestrictedMode(!0),this.bi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Fi))}ss(){this.Fi&&(this.window.removeEventListener("pagehide",this.Fi),this.Fi=null)}ts(e){var t;try{const r=null!==(null===(t=this.ki)||void 0===t?void 0:t.getItem(this.es(e)));return Ee(eu,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Mr(eu,"Failed to get zombied client id.",r),!1}}ns(){if(this.ki)try{this.ki.setItem(this.es(this.clientId),String(Date.now()))}catch(e){Mr("Failed to set zombie client id.",e)}}_s(){if(this.ki)try{this.ki.removeItem(this.es(this.clientId))}catch{}}es(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function tv(n){return Zr(n,Sy)}function hT(n){return Zr(n,xp)}function EN(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class bN{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ls=r,this.hs=i}static Ps(e,t){let r=Dt(),i=Dt();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new bN(e,t.fromCache,r,i)}}class pue{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class V4{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=(0,At.nr)()?8:I$((0,At.ZQ)())>0?6:4}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.Rs(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Vs(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new pue;return this.fs(e,t,s).next(a=>{if(o.result=a,this.Is)return this.gs(e,t,s,a.size)})}).next(()=>o.result)}gs(e,t,r,i){return r.documentReadCount<this.Es?(Dp()<=ia.$b.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",jp(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),z.resolve()):(Dp()<=ia.$b.DEBUG&&Ee("QueryEngine","Query:",jp(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Dp()<=ia.$b.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",jp(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bi(t))):z.resolve())}Rs(e,t){if(p3(t))return z.resolve(null);let r=Bi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=QI(t,null,"F"),r=Bi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=Dt(...o);return this.As.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ps(t,a);return this.ys(t,u,s,c.readTime)?this.Rs(e,QI(t,null,"F")):this.ws(e,u,t,c)}))})))}Vs(e,t,r,i){return p3(t)||i.isEqual(et.min())?z.resolve(null):this.As.getDocuments(e,r).next(o=>{const s=this.ps(t,o);return this.ys(t,s,r,i)?z.resolve(null):(Dp()<=ia.$b.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),jp(t)),this.ws(e,s,t,y$(i,-1)).next(a=>a))})}ps(e,t){let r=new yn(v3(e));return t.forEach((i,o)=>{Uy(e,o)&&(r=r.add(o))}),r}ys(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}fs(e,t,r){return Dp()<=ia.$b.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",jp(t)),this.As.getDocumentsMatchingQuery(e,t,es.min(),r)}ws(e,t,r,i){return this.As.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}}const IN="LocalStore";class mue{constructor(e,t,r,i){this.persistence=e,this.bs=t,this.serializer=i,this.Ss=new jn(lt),this.Ds=new jc(o=>Ld(o),Vy),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new k4(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function B4(n,e,t,r){return new mue(n,e,t,r)}function U4(n,e){return TN.apply(this,arguments)}function TN(){return(TN=(0,T.A)(function*(n,e){const t=Me(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Fs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let c=Dt();for(const u of i){s.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of o){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Ms:u,removedBatchIds:s,addedBatchIds:a}))})})})).apply(this,arguments)}function j4(n){const e=Me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function H4(n,e,t){let r=Dt(),i=Dt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=xo();return t.forEach((a,c)=>{const u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(et.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||0===c.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):Ee(IN,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{xs:s,Os:i}})}function vue(n,e){const t=Me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Xp(n,e){const t=Me(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ai.getTargetData(r,e).next(o=>o?(i=o,z.resolve(i)):t.ai.allocateTargetId(r).next(s=>(i=new $c(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.ai.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ss.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(r.targetId,r),t.Ds.set(e,r.targetId)),r})}function eg(n,e,t){return wN.apply(this,arguments)}function wN(){return(wN=(0,T.A)(function*(n,e,t){const r=Me(n),i=r.Ss.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Hl(s))throw s;Ee(IN,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(i.target)})).apply(this,arguments)}function fT(n,e,t){const r=Me(n);let i=et.min(),o=Dt();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,h){const m=Me(c),_=m.Ds.get(h);return void 0!==_?z.resolve(m.Ss.get(_)):m.ai.getTargetData(u,h)}(r,s,Bi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.bs.getDocumentsMatchingQuery(s,e,t?i:et.min(),t?o:Dt())).next(a=>(z4(r,y3(e),a),{documents:a,Ns:o})))}function $4(n,e){const t=Me(n),r=Me(t.ai),i=t.Ss.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.Rt(o,e).next(s=>s?s.target:null))}function G4(n,e){const t=Me(n),r=t.vs.get(e)||et.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Cs.getAllFromCollectionGroup(i,e,y$(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(z4(t,e,i),i))}function z4(n,e,t){let r=n.vs.get(e)||et.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.vs.set(e,r)}function DN(){return(DN=(0,T.A)(function*(n,e,t,r){const i=Me(n);let o=Dt(),s=xo();for(const u of t){const h=e.Bs(u.metadata.name);u.document&&(o=o.add(h));const m=e.Ls(u);m.setReadTime(e.ks(u.metadata.readTime)),s=s.insert(h,m)}const a=i.Cs.newChangeBuffer({trackRemovals:!0}),c=yield Xp(i,(h=r,Bi(Bp(Ut.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>H4(u,a,s).next(h=>(a.apply(u),h)).next(h=>i.ai.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.ai.addMatchingKeys(u,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,h.xs,h.Os)).next(()=>h.xs)))})).apply(this,arguments)}function bue(n,e){return CN.apply(this,arguments)}function CN(){return(CN=(0,T.A)(function*(n,e,t=Dt()){const r=yield Xp(n,Bi(aN(e.bundledQuery))),i=Me(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const s=Pr(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.ci.saveNamedQuery(o,e);const a=r.withResumeToken(br.EMPTY_BYTE_STRING,s);return i.Ss=i.Ss.insert(a.targetId,a),i.ai.updateTargetData(o,a).next(()=>i.ai.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.ai.addMatchingKeys(o,t,r.targetId)).next(()=>i.ci.saveNamedQuery(o,e))})})).apply(this,arguments)}const W4="firestore_clients";function q4(n,e){return`${W4}_${n}_${e}`}const K4="firestore_mutations";function Q4(n,e,t){let r=`${K4}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const Y4="firestore_targets";function AN(n,e){return`${Y4}_${n}_${e}`}const Ga="SharedClientState";class pT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static qs(e,t,r){const i=JSON.parse(r);let o,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(o=new _e(i.error.code,i.error.message))),s?new pT(e,t,i.state,o):(Mr(Ga,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Qs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class nv{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static qs(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new _e(r.error.code,r.error.message))),o?new nv(e,r.state,i):(Mr(Ga,`Failed to parse target state for ID '${e}': ${t}`),null)}Qs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static qs(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=QR();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=w$(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new gT(e,o):(Mr(Ga,`Failed to parse client data for instance '${e}': ${t}`),null)}}class SN{constructor(e,t){this.clientId=e,this.onlineState=t}static qs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new SN(t.clientId,t.onlineState):(Mr(Ga,`Failed to parse online state: ${e}`),null)}}class RN{constructor(){this.activeTargetIds=QR()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NN{constructor(e,t,r,i,o){this.window=e,this.bi=t,this.persistenceKey=r,this.Ks=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ws=this.Gs.bind(this),this.zs=new jn(lt),this.started=!1,this.js=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Hs=q4(this.persistenceKey,this.Ks),this.Js=`firestore_sequence_number_${this.persistenceKey}`,this.zs=this.zs.insert(this.Ks,new RN),this.Ys=new RegExp(`^${W4}_${s}_([^_]*)$`),this.Zs=new RegExp(`^${K4}_${s}_(\\d+)(?:_(.*))?$`),this.Xs=new RegExp(`^${Y4}_${s}_(\\d+)$`),this.eo=`firestore_online_state_${this.persistenceKey}`,this.no=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Ws)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,T.A)(function*(){const t=yield e.syncEngine.us();for(const i of t){if(i===e.Ks)continue;const o=e.getItem(q4(e.persistenceKey,i));if(o){const s=gT.qs(i,o);s&&(e.zs=e.zs.insert(s.clientId,s))}}e.ro();const r=e.storage.getItem(e.eo);if(r){const i=e.io(r);i&&e.so(i)}for(const i of e.js)e.Gs(i);e.js=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Js,JSON.stringify(e))}getAllActiveQueryTargets(){return this.oo(this.zs)}isActiveQueryTarget(e){let t=!1;return this.zs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this._o(e,"pending")}updateMutationState(e,t,r){this._o(e,t,r),this.ao(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(AN(this.persistenceKey,e));if(i){const o=nv.qs(e,i);o&&(r=o.state)}}return t&&this.uo.$s(e),this.ro(),r}removeLocalQueryTarget(e){this.uo.Us(e),this.ro()}isLocalQueryTarget(e){return this.uo.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(AN(this.persistenceKey,e))}updateQueryState(e,t,r){this.co(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.ao(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.lo(e)}notifyBundleLoaded(e){this.ho(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ws),this.removeItem(this.Hs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ee(Ga,"READ",e,t),t}setItem(e,t){Ee(Ga,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ee(Ga,"REMOVE",e),this.storage.removeItem(e)}Gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ee(Ga,"EVENT",r.key,r.newValue),r.key===this.Hs)return void Mr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.bi.enqueueRetryable((0,T.A)(function*(){if(t.started){if(null!==r.key)if(t.Ys.test(r.key)){if(null==r.newValue){const i=t.Po(r.key);return t.To(i,null)}{const i=t.Io(r.key,r.newValue);if(i)return t.To(i.clientId,i)}}else if(t.Zs.test(r.key)){if(null!==r.newValue){const i=t.Eo(r.key,r.newValue);if(i)return t.Ao(i)}}else if(t.Xs.test(r.key)){if(null!==r.newValue){const i=t.Ro(r.key,r.newValue);if(i)return t.Vo(i)}}else if(r.key===t.eo){if(null!==r.newValue){const i=t.io(r.newValue);if(i)return t.so(i)}}else if(r.key===t.Js){const i=function(s){let a=ns.le;if(null!=s)try{const c=JSON.parse(s);qe("number"==typeof c,30636,{mo:s}),a=c}catch(c){Mr(Ga,"Failed to read sequence number from WebStorage",c)}return a}(r.newValue);i!==ns.le&&t.sequenceNumberHandler(i)}else if(r.key===t.no){const i=t.fo(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.po(o)))}}else t.js.push(r)}))}}get uo(){return this.zs.get(this.Ks)}ro(){this.setItem(this.Hs,this.uo.Qs())}_o(e,t,r){const i=new pT(this.currentUser,e,t,r),o=Q4(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Qs())}ao(e){const t=Q4(this.persistenceKey,this.currentUser,e);this.removeItem(t)}lo(e){this.storage.setItem(this.eo,JSON.stringify({clientId:this.Ks,onlineState:e}))}co(e,t,r){const i=AN(this.persistenceKey,e),o=new nv(e,t,r);this.setItem(i,o.Qs())}ho(e){const t=JSON.stringify(Array.from(e));this.setItem(this.no,t)}Po(e){const t=this.Ys.exec(e);return t?t[1]:null}Io(e,t){const r=this.Po(e);return gT.qs(r,t)}Eo(e,t){const r=this.Zs.exec(e),i=Number(r[1]);return pT.qs(new ai(void 0!==r[2]?r[2]:null),i,t)}Ro(e,t){const r=this.Xs.exec(e),i=Number(r[1]);return nv.qs(i,t)}io(e){return SN.qs(e)}fo(e){return JSON.parse(e)}Ao(e){var t=this;return(0,T.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.yo(e.batchId,e.state,e.error);Ee(Ga,`Ignoring mutation for non-active user ${e.user.uid}`)})()}Vo(e){return this.syncEngine.wo(e.targetId,e.state,e.error)}To(e,t){const r=t?this.zs.insert(e,t):this.zs.remove(e),i=this.oo(this.zs),o=this.oo(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.bo(s,a).then(()=>{this.zs=r})}so(e){this.zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}oo(e){let t=QR();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class J4{constructor(){this.So=new RN,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,r){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new RN,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Iue{vo(e){}shutdown(){}}const Z4="ConnectivityMonitor";class X4{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){Ee(Z4,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){Ee(Z4,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let mT=null;function MN(){return null===mT?mT=268435456+Math.round(2147483648*Math.random()):mT++,"0x"+mT.toString(16)}const PN="RestConnection",Tue={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wue{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${r}/databases/${i}`,this.qo=this.databaseId.database===Oy?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Qo(e,t,r,i,o){const s=MN(),a=this.$o(e,t.toUriEncodedString());Ee(PN,`Sending RPC '${e}' ${s}:`,a,r);const c={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(c,i,o);const{host:u}=new URL(a),h=(0,At.zJ)(u);return this.Ko(e,a,c,r,h).then(m=>(Ee(PN,`Received RPC '${e}' ${s}: `,m),m),m=>{throw Xo(PN,`RPC '${e}' ${s} failed with error: `,m,"url: ",a,"request:",r),m})}Wo(e,t,r,i,o,s){return this.Qo(e,t,r,i,o)}Uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+wp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}$o(e,t){return`${this.Lo}/v1/${t}:${Tue[e]}`}terminate(){}}class Due{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}const ji="WebChannelConnection";class Cue extends wue{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,r,i,o){const s=MN();return new Promise((a,c)=>{const u=new i$;u.setWithCredentials(!0),u.listenOnce(o$.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case SI.NO_ERROR:const m=u.getResponseJson();Ee(ji,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(m)),a(m);break;case SI.TIMEOUT:Ee(ji,`RPC '${e}' ${s} timed out`),c(new _e(Z.DEADLINE_EXCEEDED,"Request time out"));break;case SI.HTTP_ERROR:const _=u.getStatus();if(Ee(ji,`RPC '${e}' ${s} failed with status:`,_,"response text:",u.getResponseText()),_>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const I=v?.error;if(I&&I.status&&I.message){const D=function(O){const P=O.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(P)>=0?P:Z.UNKNOWN}(I.status);c(new _e(D,I.message))}else c(new _e(Z.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new _e(Z.UNAVAILABLE,"Connection failed."));break;default:Ue(9055,{s_:e,streamId:s,o_:u.getLastErrorCode(),__:u.getLastError()})}}finally{Ee(ji,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);Ee(ji,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",h,r,15)})}a_(e,t,r){const i=MN(),o=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=c$(),a=a$(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Uo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const h=o.join("");Ee(ji,`Creating RPC '${e}' stream ${i}: ${h}`,c);const m=s.createWebChannel(h,c);let _=!1,v=!1;const I=new Due({Go:A=>{v?Ee(ji,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(_||(Ee(ji,`Opening RPC '${e}' stream ${i} transport.`),m.open(),_=!0),Ee(ji,`RPC '${e}' stream ${i} sending:`,A),m.send(A))},zo:()=>m.close()}),D=(A,O,P)=>{A.listen(O,j=>{try{P(j)}catch(X){setTimeout(()=>{throw X},0)}})};return D(m,Ty.EventType.OPEN,()=>{v||(Ee(ji,`RPC '${e}' stream ${i} transport opened.`),I.t_())}),D(m,Ty.EventType.CLOSE,()=>{v||(v=!0,Ee(ji,`RPC '${e}' stream ${i} transport closed`),I.r_())}),D(m,Ty.EventType.ERROR,A=>{v||(v=!0,Xo(ji,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),I.r_(new _e(Z.UNAVAILABLE,"The operation could not be completed")))}),D(m,Ty.EventType.MESSAGE,A=>{var O;if(!v){const P=A.data[0];qe(!!P,16349);const j=P,X=j?.error||(null===(O=j[0])||void 0===O?void 0:O.error);if(X){Ee(ji,`RPC '${e}' stream ${i} received error:`,X);const ae=X.status;let we=function(F){const U=Gr[F];if(void 0!==U)return L3(U)}(ae),k=X.message;void 0===we&&(we=Z.INTERNAL,k="Unknown error status: "+ae+" with message "+X.message),v=!0,I.r_(new _e(we,k)),m.close()}else Ee(ji,`RPC '${e}' stream ${i} received:`,P),I.i_(P)}}),D(a,s$.STAT_EVENT,A=>{A.stat===bR.PROXY?Ee(ji,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===bR.NOPROXY&&Ee(ji,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.n_()},0),I}}function eG(){return typeof window<"u"?window:null}function _T(){return typeof document<"u"?document:null}function rv(n){return new Ple(n,!0)}class ON{constructor(e,t,r=1e3,i=1.5,o=6e4){this.bi=e,this.timerId=t,this.u_=r,this.c_=i,this.l_=o,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),i=Math.max(0,t-r);i>0&&Ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){null!==this.P_&&(this.P_.skipDelay(),this.P_=null)}cancel(){null!==this.P_&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}const tG="PersistentStream";class nG{constructor(e,t,r,i,o,s,a,c){this.bi=e,this.R_=r,this.V_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new ON(e,t)}w_(){return 1===this.state||5===this.state||this.b_()}b_(){return 2===this.state||3===this.state}start(){this.p_=0,4!==this.state?this.auth():this.S_()}stop(){var e=this;return(0,T.A)(function*(){e.w_()&&(yield e.close(0))})()}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&null===this.f_&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}C_(){var e=this;return(0,T.A)(function*(){if(e.b_())return e.close(0)})()}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}close(e,t){var r=this;return(0,T.A)(function*(){r.M_(),r.x_(),r.y_.cancel(),r.m_++,4!==e?r.y_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Mr(t.toString()),Mr("Using maximum backoff delay to prevent overloading the backend."),r.y_.I_()):t&&t.code===Z.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.O_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zo(t)})()}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.m_===t&&this.B_(r,i)},r=>{e(()=>{const i=new _e(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(i)})})}B_(e,t){const r=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(i=>{r(()=>this.L_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.p_?this.q_(i):this.onNext(i))})}S_(){var e=this;this.state=5,this.y_.E_((0,T.A)(function*(){e.state=0,e.start()}))}L_(e){return Ee(tG,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(Ee(tG,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Aue extends nG{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=function kle(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:Ue(39313,{state:u}),i=e.targetChange.targetIds||[],o=function(u,h){return u.useProto3Json?(qe(void 0===h||"string"==typeof h,58123),br.fromBase64String(h||"")):(qe(void 0===h||h instanceof Buffer||h instanceof Uint8Array,16193),br.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){const h=void 0===u.code?Z.UNKNOWN:L3(u.code);return new _e(h,u.message||"")}(s);t=new j3(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=$a(n,r.document.name),o=Pr(r.document.updateTime),s=r.document.createTime?Pr(r.document.createTime):et.min(),a=new Ei({mapValue:{fields:r.document.fields}}),c=Wn.newFoundDocument(i,o,s,a);t=new eT(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=$a(n,r.document),o=r.readTime?Pr(r.readTime):et.min(),s=Wn.newNoDocument(i,o);t=new eT([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=$a(n,r.document);t=new eT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ue(11601,{Vt:e});{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new Cle(i,o);t=new U3(r.targetId,s)}}var u;return t}(this.serializer,e),r=function(o){if(!("targetChange"in o))return et.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?et.min():s.readTime?Pr(s.readTime):et.min()}(e);return this.listener.Q_(t,r)}U_(e){const t={};t.database=oN(this.serializer),t.addTarget=function(o,s){let a;const c=s.target;if(a=qI(c)?{documents:J3(o,c)}:{query:nT(o,c).gt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=G3(o,s.resumeToken);const u=nN(o,s.expectedCount);null!==u&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(et.min())>0){a.readTime=Wp(o,s.snapshotVersion.toTimestamp());const u=nN(o,s.expectedCount);null!==u&&(a.expectedCount=u)}return a}(this.serializer,e);const r=function Lle(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue(28987,{purpose:i})}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.F_(t)}K_(e){const t={};t.database=oN(this.serializer),t.removeTarget=e,this.F_(t)}}class Sue extends nG{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qe(!e.writeResults||0===e.writeResults.length,55816),this.listener.z_()}onNext(e){qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=function Fle(n,e){return n&&n.length>0?(qe(void 0!==e,14353),n.map(t=>function(i,o){let s=Pr(i.updateTime?i.updateTime:o);return s.isEqual(et.min())&&(s=Pr(o)),new Tle(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Pr(e.commitTime);return this.listener.j_(r,t)}H_(){const e={};e.database=oN(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Qy(this.serializer,r))};this.F_(t)}}class Rue{}class Nue extends Rue{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new _e(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Qo(e,iN(t,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _e(Z.UNKNOWN,o.toString())})}Wo(e,t,r,i,o){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Wo(e,iN(t,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new _e(Z.UNKNOWN,s.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class Mue{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){0===this.Z_&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){"Online"===this.state?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,"Online"===e&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Mr(t),this.ea=!1):Ee("OnlineStateTracker",t)}sa(){null!==this.X_&&(this.X_.cancel(),this.X_=null)}}const qd="RemoteStore";class Pue{constructor(e,t,r,i,o){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=o,this.ca.vo(a=>{r.enqueueAndForget((0,T.A)(function*(){var c;tu(s)&&(Ee(qd,"Restarting streams for network reachability change."),yield(c=(0,T.A)(function*(h){const m=Me(h);m.aa.add(4),yield tg(m),m.la.set("Unknown"),m.aa.delete(4),yield iv(m)}),function u(h){return c.apply(this,arguments)})(s))}))}),this.la=new Mue(r,i)}}function iv(n){return xN.apply(this,arguments)}function xN(){return(xN=(0,T.A)(function*(n){if(tu(n))for(const e of n.ua)yield e(!0)})).apply(this,arguments)}function tg(n){return kN.apply(this,arguments)}function kN(){return(kN=(0,T.A)(function*(n){for(const e of n.ua)yield e(!1)})).apply(this,arguments)}function yT(n,e){const t=Me(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),VN(t)?LN(t):ig(t).b_()&&FN(t,e))}function ng(n,e){const t=Me(n),r=ig(t);t._a.delete(e),r.b_()&&rG(t,e),0===t._a.size&&(r.b_()?r.v_():tu(t)&&t.la.set("Unknown"))}function FN(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(et.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ig(n).U_(e)}function rG(n,e){n.ha.Ke(e),ig(n).K_(e)}function LN(n){n.ha=new Sle({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),ig(n).start(),n.la.ta()}function VN(n){return tu(n)&&!ig(n).w_()&&n._a.size>0}function tu(n){return 0===Me(n).aa.size}function iG(n){n.ha=void 0}function Oue(n){return BN.apply(this,arguments)}function BN(){return(BN=(0,T.A)(function*(n){n.la.set("Online")})).apply(this,arguments)}function xue(n){return UN.apply(this,arguments)}function UN(){return(UN=(0,T.A)(function*(n){n._a.forEach((e,t)=>{FN(n,e)})})).apply(this,arguments)}function kue(n,e){return jN.apply(this,arguments)}function jN(){return(jN=(0,T.A)(function*(n,e){iG(n),VN(n)?(n.la.ia(e),LN(n)):n.la.set("Unknown")})).apply(this,arguments)}function Fue(n,e,t){return HN.apply(this,arguments)}function HN(){return HN=(0,T.A)(function*(n,e,t){if(n.la.set("Online"),e instanceof j3&&2===e.state&&e.cause)try{yield(r=(0,T.A)(function*(o,s){const a=s.cause;for(const c of s.targetIds)o._a.has(c)&&(yield o.remoteSyncer.rejectListen(c,a),o._a.delete(c),o.ha.removeTarget(c))}),function i(o,s){return r.apply(this,arguments)})(n,e)}catch(r){Ee(qd,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield vT(n,r)}else if(e instanceof eT?n.ha.Xe(e):e instanceof U3?n.ha.ot(e):n.ha.nt(e),!t.isEqual(et.min()))try{const r=yield j4(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){const a=o.ha.It(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=o._a.get(u);h&&o._a.set(u,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{const h=o._a.get(c);if(!h)return;o._a.set(c,h.withResumeToken(br.EMPTY_BYTE_STRING,h.snapshotVersion)),rG(o,c);const m=new $c(h.target,c,u,h.sequenceNumber);FN(o,m)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Ee(qd,"Failed to raise snapshot:",r),yield vT(n,r)}var r}),HN.apply(this,arguments)}function vT(n,e,t){return $N.apply(this,arguments)}function $N(){return($N=(0,T.A)(function*(n,e,t){if(!Hl(e))throw e;n.aa.add(1),yield tg(n),n.la.set("Offline"),t||(t=()=>j4(n.localStore)),n.asyncQueue.enqueueRetryable((0,T.A)(function*(){Ee(qd,"Retrying IndexedDB access"),yield t(),n.aa.delete(1),yield iv(n)}))})).apply(this,arguments)}function oG(n,e){return e().catch(t=>vT(n,t,e))}function rg(n){return GN.apply(this,arguments)}function GN(){return(GN=(0,T.A)(function*(n){const e=Me(n),t=nu(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:-1;for(;Lue(e);)try{const i=yield vue(e.localStore,r);if(null===i){0===e.oa.length&&t.v_();break}r=i.batchId,Vue(e,i)}catch(i){yield vT(e,i)}sG(e)&&aG(e)})).apply(this,arguments)}function Lue(n){return tu(n)&&n.oa.length<10}function Vue(n,e){n.oa.push(e);const t=nu(n);t.b_()&&t.W_&&t.G_(e.mutations)}function sG(n){return tu(n)&&!nu(n).w_()&&n.oa.length>0}function aG(n){nu(n).start()}function Bue(n){return zN.apply(this,arguments)}function zN(){return(zN=(0,T.A)(function*(n){nu(n).H_()})).apply(this,arguments)}function Uue(n){return WN.apply(this,arguments)}function WN(){return(WN=(0,T.A)(function*(n){const e=nu(n);for(const t of n.oa)e.G_(t.mutations)})).apply(this,arguments)}function jue(n,e,t){return qN.apply(this,arguments)}function qN(){return(qN=(0,T.A)(function*(n,e,t){const r=n.oa.shift(),i=XR.from(r,e,t);yield oG(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield rg(n)})).apply(this,arguments)}function Hue(n,e){return KN.apply(this,arguments)}function KN(){return KN=(0,T.A)(function*(n,e){var t;e&&nu(n).W_&&(yield(t=(0,T.A)(function*(i,o){if(F3(a=o.code)&&a!==Z.ABORTED){const s=i.oa.shift();nu(i).D_(),yield oG(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield rg(i)}var a}),function r(i,o){return t.apply(this,arguments)})(n,e)),sG(n)&&aG(n)}),KN.apply(this,arguments)}function cG(n,e){return QN.apply(this,arguments)}function QN(){return(QN=(0,T.A)(function*(n,e){const t=Me(n);t.asyncQueue.verifyOperationInProgress(),Ee(qd,"RemoteStore received new credentials");const r=tu(t);t.aa.add(3),yield tg(t),r&&t.la.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),yield iv(t)})).apply(this,arguments)}function YN(n,e){return JN.apply(this,arguments)}function JN(){return(JN=(0,T.A)(function*(n,e){const t=Me(n);e?(t.aa.delete(2),yield iv(t)):e||(t.aa.add(2),yield tg(t),t.la.set("Unknown"))})).apply(this,arguments)}function ig(n){return n.Pa||(n.Pa=function(t,r,i){const o=Me(t);return o.Y_(),new Aue(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{jo:Oue.bind(null,n),Jo:xue.bind(null,n),Zo:kue.bind(null,n),Q_:Fue.bind(null,n)}),n.ua.push(function(){var e=(0,T.A)(function*(t){t?(n.Pa.D_(),VN(n)?LN(n):n.la.set("Unknown")):(yield n.Pa.stop(),iG(n))});return function(t){return e.apply(this,arguments)}}())),n.Pa}function nu(n){return n.Ta||(n.Ta=function(t,r,i){const o=Me(t);return o.Y_(),new Sue(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:Bue.bind(null,n),Zo:Hue.bind(null,n),z_:Uue.bind(null,n),j_:jue.bind(null,n)}),n.ua.push(function(){var e=(0,T.A)(function*(t){t?(n.Ta.D_(),yield rg(n)):(yield n.Ta.stop(),n.oa.length>0&&(Ee(qd,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))});return function(t){return e.apply(this,arguments)}}())),n.Ta}class ZN{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const s=Date.now()+r,a=new ZN(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _e(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function og(n,e){if(Mr("AsyncQueue",`${e}: ${n}`),Hl(n))return new _e(Z.UNAVAILABLE,`${e}: ${n}`);throw n}class sg{static emptySet(e){return new sg(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Le.comparator(t.key,r.key):(t,r)=>Le.comparator(t.key,r.key),this.keyedMap=jy(),this.sortedSet=new jn(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sg)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new sg;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class lG{constructor(){this.Ia=new jn(Le.comparator)}track(e){const t=e.doc.key,r=this.Ia.get(t);r?0!==e.type&&3===r.type?this.Ia=this.Ia.insert(t,e):3===e.type&&1!==r.type?this.Ia=this.Ia.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Ia=this.Ia.remove(t):1===e.type&&2===r.type?this.Ia=this.Ia.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Ue(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,r)=>{e.push(r)}),e}}class ag{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){const s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new ag(e,t,sg.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&By(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class $ue{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class Gue{constructor(){this.queries=uG(),this.onlineState="Unknown",this.fa=new Set}terminate(){!function(t,r){const i=Me(t),o=i.queries;i.queries=uG(),o.forEach((s,a)=>{for(const c of a.Ra)c.onError(r)})}(this,new _e(Z.ABORTED,"Firestore shutting down"))}}function uG(){return new jc(n=>_3(n),By)}function XN(n,e){return eM.apply(this,arguments)}function eM(){return(eM=(0,T.A)(function*(n,e){const t=Me(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.Va()&&e.ma()&&(r=2):(o=new $ue,r=e.ma()?0:1);try{switch(r){case 0:o.Aa=yield t.onListen(i,!0);break;case 1:o.Aa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){const a=og(s,`Initialization of query '${jp(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Ra.push(e),e.ga(t.onlineState),o.Aa&&e.pa(o.Aa)&&rM(t)})).apply(this,arguments)}function tM(n,e){return nM.apply(this,arguments)}function nM(){return(nM=(0,T.A)(function*(n,e){const t=Me(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const s=o.Ra.indexOf(e);s>=0&&(o.Ra.splice(s,1),0===o.Ra.length?i=e.ma()?0:1:!o.Va()&&e.ma()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function zue(n,e){const t=Me(n);let r=!1;for(const i of e){const s=t.queries.get(i.query);if(s){for(const a of s.Ra)a.pa(i)&&(r=!0);s.Aa=i}}r&&rM(t)}function Wue(n,e,t){const r=Me(n),i=r.queries.get(e);if(i)for(const o of i.Ra)o.onError(t);r.queries.delete(e)}function rM(n){n.fa.forEach(e=>{e.next()})}var iM,dG;(dG=iM||(iM={})).ya="default",dG.Cache="cache";class oM{constructor(e,t,r){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new ag(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){return!e.fromCache||!this.ma()||(!this.options.Fa||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Da(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Ca(e){e=ag.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==iM.Cache}}class que{constructor(e,t){this.Ma=e,this.byteLength=t}xa(){return"metadata"in this.Ma}}class hG{constructor(e){this.serializer=e}Bs(e){return $a(this.serializer,e)}Ls(e){return e.metadata.exists?Y3(this.serializer,e.document,!1):Wn.newNoDocument(this.Bs(e.metadata.name),this.ks(e.metadata.readTime))}ks(e){return Pr(e)}}class Kue{constructor(e,t,r){this.Oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=fG(e)}Na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ma.namedQuery)this.queries.push(e.Ma.namedQuery);else if(e.Ma.documentMetadata){this.documents.push({metadata:e.Ma.documentMetadata}),e.Ma.documentMetadata.exists||++t;const r=Ut.fromString(e.Ma.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Ma.document&&(this.documents[this.documents.length-1].document=e.Ma.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ba(e){const t=new Map,r=new hG(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.Bs(i.metadata.name);for(const s of i.metadata.queries){const a=(t.get(s)||Dt()).add(o);t.set(s,a)}}return t}complete(){var e=this;return(0,T.A)(function*(){const t=yield function Eue(n,e,t,r){return DN.apply(this,arguments)}(e.localStore,new hG(e.serializer),e.documents,e.Oa.id),r=e.Ba(e.documents);for(const i of e.queries)yield bue(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,La:e.collectionGroups,ka:t}})()}}function fG(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class pG{constructor(e){this.key=e}}class gG{constructor(e){this.key=e}}class mG{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=Dt(),this.mutatedKeys=Dt(),this.Ua=v3(e),this.Ka=new sg(this.Ua)}get Wa(){return this.qa}Ga(e,t){const r=t?t.za:new lG,i=t?t.Ka:this.Ka;let o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{const _=i.get(h),v=Uy(this.query,m)?m:null,I=!!_&&this.mutatedKeys.has(_.key),D=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let A=!1;_&&v?_.data.isEqual(v.data)?I!==D&&(r.track({type:3,doc:v}),A=!0):this.ja(_,v)||(r.track({type:2,doc:v}),A=!0,(c&&this.Ua(v,c)>0||u&&this.Ua(v,u)<0)&&(a=!0)):!_&&v?(r.track({type:0,doc:v}),A=!0):_&&!v&&(r.track({type:1,doc:_}),A=!0,(c||u)&&(a=!0)),A&&(v?(s=s.add(v),o=D?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const h="F"===this.query.limitType?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ka:s,za:r,ys:a,mutatedKeys:o}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const s=e.za.da();s.sort((h,m)=>function(v,I){const D=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue(20277,{Vt:A})}};return D(v)-D(I)}(h.type,m.type)||this.Ua(h.doc,m.doc)),this.Ha(r),i=null!=i&&i;const a=t&&!i?this.Ja():[],c=0===this.$a.size&&this.current&&!i?1:0,u=c!==this.Qa;return this.Qa=c,0!==s.length||u?{snapshot:new ag(this.query,e.Ka,o,s,e.mutatedKeys,0===c,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:a}:{Ya:a}}ga(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new lG,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=Dt(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const t=[];return e.forEach(r=>{this.$a.has(r)||t.push(new gG(r))}),this.$a.forEach(r=>{e.has(r)||t.push(new pG(r))}),t}Xa(e){this.qa=e.Ns,this.$a=Dt();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return ag.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,0===this.Qa,this.hasCachedResults)}}const ru="SyncEngine";class Que{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Yue{constructor(e){this.key=e,this.tu=!1}}class Jue{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.nu={},this.ru=new jc(a=>_3(a),By),this.iu=new Map,this.su=new Set,this.ou=new jn(Le.comparator),this._u=new Map,this.au=new pN,this.uu={},this.cu=new Map,this.lu=zd.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return!0===this.hu}}function Zue(n,e){return sM.apply(this,arguments)}function sM(){return(sM=(0,T.A)(function*(n,e,t=!0){const r=ET(n);let i;const o=r.ru.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.eu()):i=yield _G(r,e,t,!0),i})).apply(this,arguments)}function Xue(n,e){return aM.apply(this,arguments)}function aM(){return(aM=(0,T.A)(function*(n,e){const t=ET(n);yield _G(t,e,!0,!1)})).apply(this,arguments)}function _G(n,e,t,r){return cM.apply(this,arguments)}function cM(){return(cM=(0,T.A)(function*(n,e,t,r){const i=yield Xp(n.localStore,Bi(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t);let a;return r&&(a=yield lM(n,e,o,"current"===s,i.resumeToken)),n.isPrimaryClient&&t&&yT(n.remoteStore,i),a})).apply(this,arguments)}function lM(n,e,t,r,i){return uM.apply(this,arguments)}function uM(){return uM=(0,T.A)(function*(n,e,t,r,i){n.Pu=(m,_,v)=>{return(I=(0,T.A)(function*(A,O,P,j){let X=O.view.Ga(P);X.ys&&(X=yield fT(A.localStore,O.query,!1).then(({documents:S})=>O.view.Ga(S,X)));const ae=j&&j.targetChanges.get(O.targetId),we=j&&null!=j.targetMismatches.get(O.targetId),k=O.view.applyChanges(X,A.isPrimaryClient,ae,we);return bM(A,O.targetId,k.Ya),k.snapshot}),function D(A,O,P,j){return I.apply(this,arguments)})(n,m,_,v);var I};const o=yield fT(n.localStore,e,!0),s=new mG(e,o.Ns),a=s.Ga(o.documents),c=qy.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),u=s.applyChanges(a,n.isPrimaryClient,c);bM(n,t,u.Ya);const h=new Que(e,t,s);return n.ru.set(e,h),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),u.snapshot}),uM.apply(this,arguments)}function ede(n,e,t){return dM.apply(this,arguments)}function dM(){return(dM=(0,T.A)(function*(n,e,t){const r=Me(n),i=r.ru.get(e),o=r.iu.get(i.targetId);if(o.length>1)return r.iu.set(i.targetId,o.filter(s=>!By(s,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield eg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ng(r.remoteStore,i.targetId),cg(r,i.targetId)}).catch(jl))):(cg(r,i.targetId),yield eg(r.localStore,i.targetId,!0))})).apply(this,arguments)}function tde(n,e){return hM.apply(this,arguments)}function hM(){return(hM=(0,T.A)(function*(n,e){const t=Me(n),r=t.ru.get(e),i=t.iu.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ng(t.remoteStore,r.targetId))})).apply(this,arguments)}function fM(){return(fM=(0,T.A)(function*(n,e,t){const r=PM(n);try{const i=yield function(s,a){const c=Me(s),u=nr.now(),h=a.reduce((v,I)=>v.add(I.key),Dt());let m,_;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let I=xo(),D=Dt();return c.Cs.getEntries(v,h).next(A=>{I=A,I.forEach((O,P)=>{P.isValidDocument()||(D=D.add(O))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,I)).next(A=>{m=A;const O=[];for(const P of a){const j=Dle(P,m.get(P.key).overlayedDocument);null!=j&&O.push(new Hc(P.key,j,t3(j.value.mapValue),ir.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,O,a)}).next(A=>{_=A;const O=A.applyToLocalDocumentSet(m,D);return c.documentOverlayCache.saveOverlays(v,A.batchId,O)})}).then(()=>({batchId:_.batchId,changes:b3(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.uu[s.currentUser.toKey()];u||(u=new jn(lt)),u=u.insert(a,c),s.uu[s.currentUser.toKey()]=u}(r,i.batchId,t),yield Gc(r,i.changes),yield rg(r.remoteStore)}catch(i){const o=og(i,"Failed to persist write");t.reject(o)}})).apply(this,arguments)}function yG(n,e){return pM.apply(this,arguments)}function pM(){return(pM=(0,T.A)(function*(n,e){const t=Me(n);try{const r=yield function yue(n,e){const t=Me(n),r=e.snapshotVersion;let i=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=t.Cs.newChangeBuffer({trackRemovals:!0});i=t.Ss;const a=[];e.targetChanges.forEach((h,m)=>{const _=i.get(m);if(!_)return;a.push(t.ai.removeMatchingKeys(o,h.removedDocuments,m).next(()=>t.ai.addMatchingKeys(o,h.addedDocuments,m)));let v=_.withSequenceNumber(o.currentSequenceNumber);var D,A,O;null!==e.targetMismatches.get(m)?v=v.withResumeToken(br.EMPTY_BYTE_STRING,et.min()).withLastLimboFreeSnapshotVersion(et.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(m,v),A=v,O=h,(0===(D=_).resumeToken.approximateByteSize()||A.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8||O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0)&&a.push(t.ai.updateTargetData(o,v))});let c=xo(),u=Dt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(H4(o,s,e.documentUpdates).next(h=>{c=h.xs,u=h.Os})),!r.isEqual(et.min())){const h=t.ai.getLastRemoteSnapshotVersion(o).next(m=>t.ai.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return z.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.Ss=i,o))}(t.localStore,e);e.targetChanges.forEach((i,o)=>{const s=t._u.get(o);s&&(qe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.tu=!0:i.modifiedDocuments.size>0?qe(s.tu,14607):i.removedDocuments.size>0&&(qe(s.tu,42227),s.tu=!1))}),yield Gc(t,r,e)}catch(r){yield jl(r)}})).apply(this,arguments)}function vG(n,e,t){const r=Me(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ru.forEach((o,s)=>{const a=s.view.ga(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const c=Me(s);c.onlineState=a;let u=!1;c.queries.forEach((h,m)=>{for(const _ of m.Ra)_.ga(a)&&(u=!0)}),u&&rM(c)}(r.eventManager,e),i.length&&r.nu.Q_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function rde(n,e,t){return gM.apply(this,arguments)}function gM(){return(gM=(0,T.A)(function*(n,e,t){const r=Me(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r._u.get(e),o=i&&i.key;if(o){let s=new jn(Le.comparator);s=s.insert(o,Wn.newNoDocument(o,et.min()));const a=Dt().add(o),c=new Wy(et.min(),new Map,new jn(lt),s,a);yield yG(r,c),r.ou=r.ou.remove(o),r._u.delete(e),IM(r)}else yield eg(r.localStore,e,!1).then(()=>cg(r,e,t)).catch(jl)})).apply(this,arguments)}function ide(n,e){return mM.apply(this,arguments)}function mM(){return(mM=(0,T.A)(function*(n,e){const t=Me(n),r=e.batch.batchId;try{const i=yield function _ue(n,e){const t=Me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Cs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,h){const m=u.batch,_=m.keys();let v=z.resolve();return _.forEach(I=>{v=v.next(()=>h.getEntry(c,I)).next(D=>{const A=u.docVersions.get(I);qe(null!==A,48541),D.version.compareTo(A)<0&&(m.applyToRemoteDocument(D,u),D.isValidDocument()&&(D.setReadTime(u.commitVersion),h.addEntry(D)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Dt();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);EM(t,r,null),vM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Gc(t,i)}catch(i){yield jl(i)}})).apply(this,arguments)}function ode(n,e,t){return _M.apply(this,arguments)}function _M(){return(_M=(0,T.A)(function*(n,e,t){const r=Me(n);try{const i=yield function(s,a){const c=Me(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next(m=>(qe(null!==m,37113),h=m.keys(),c.mutationQueue.removeMutationBatch(u,m))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);EM(r,e,t),vM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Gc(r,i)}catch(i){yield jl(i)}})).apply(this,arguments)}function yM(){return(yM=(0,T.A)(function*(n,e){const t=Me(n);tu(t.remoteStore)||Ee(ru,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const a=Me(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===r)return void e.resolve();const i=t.cu.get(r)||[];i.push(e),t.cu.set(r,i)}catch(r){const i=og(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function vM(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function EM(n,e,t){const r=Me(n);let i=r.uu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.uu[r.currentUser.toKey()]=i}}function cg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.iu.get(e))n.ru.delete(r),t&&n.nu.Tu(r,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(r=>{n.au.containsKey(r)||EG(n,r)})}function EG(n,e){n.su.delete(e.path.canonicalString());const t=n.ou.get(e);null!==t&&(ng(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),IM(n))}function bM(n,e,t){for(const r of t)r instanceof pG?(n.au.addReference(r.key,e),ade(n,r)):r instanceof gG?(Ee(ru,"Document no longer in limbo: "+r.key),n.au.removeReference(r.key,e),n.au.containsKey(r.key)||EG(n,r.key)):Ue(19791,{Iu:r})}function ade(n,e){const t=e.key,r=t.path.canonicalString();n.ou.get(t)||n.su.has(r)||(Ee(ru,"New document in limbo: "+t),n.su.add(r),IM(n))}function IM(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){const e=n.su.values().next().value;n.su.delete(e);const t=new Le(Ut.fromString(e)),r=n.lu.next();n._u.set(r,new Yue(t)),n.ou=n.ou.insert(t,r),yT(n.remoteStore,new $c(Bi(Bp(t.path)),r,"TargetPurposeLimboResolution",ns.le))}}function Gc(n,e,t){return TM.apply(this,arguments)}function TM(){return TM=(0,T.A)(function*(n,e,t){const r=Me(n),i=[],o=[],s=[];var a;r.ru.isEmpty()||(r.ru.forEach((a,c)=>{s.push(r.Pu(c,e,t).then(u=>{var h;if((u||t)&&r.isPrimaryClient){const m=u?!u.fromCache:null===(h=t?.targetChanges.get(c.targetId))||void 0===h?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(u){i.push(u);const m=bN.Ps(c.targetId,u);o.push(m)}}))}),yield Promise.all(s),r.nu.Q_(i),yield(a=(0,T.A)(function*(u,h){const m=Me(u);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>z.forEach(h,v=>z.forEach(v.ls,I=>m.persistence.referenceDelegate.addReference(_,v.targetId,I)).next(()=>z.forEach(v.hs,I=>m.persistence.referenceDelegate.removeReference(_,v.targetId,I)))))}catch(_){if(!Hl(_))throw _;Ee(IN,"Failed to update sequence numbers: "+_)}for(const _ of h){const v=_.targetId;if(!_.fromCache){const I=m.Ss.get(v),A=I.withLastLimboFreeSnapshotVersion(I.snapshotVersion);m.Ss=m.Ss.insert(v,A)}}}),function c(u,h){return a.apply(this,arguments)})(r.localStore,o))}),TM.apply(this,arguments)}function cde(n,e){return wM.apply(this,arguments)}function wM(){return(wM=(0,T.A)(function*(n,e){const t=Me(n);if(!t.currentUser.isEqual(e)){Ee(ru,"User change. New user:",e.toKey());const r=yield U4(t.localStore,e);t.currentUser=e,(o=t).cu.forEach(a=>{a.forEach(c=>{c.reject(new _e(Z.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.cu.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Gc(t,r.Ms)}var o})).apply(this,arguments)}function lde(n,e){const t=Me(n),r=t._u.get(e);if(r&&r.tu)return Dt().add(r.key);{let i=Dt();const o=t.iu.get(e);if(!o)return i;for(const s of o){const a=t.ru.get(s);i=i.unionWith(a.view.Wa)}return i}}function ude(n,e){return DM.apply(this,arguments)}function DM(){return(DM=(0,T.A)(function*(n,e){const t=Me(n),r=yield fT(t.localStore,e.query,!0),i=e.view.Xa(r);return t.isPrimaryClient&&bM(t,e.targetId,i.Ya),i})).apply(this,arguments)}function dde(n,e){return CM.apply(this,arguments)}function CM(){return(CM=(0,T.A)(function*(n,e){const t=Me(n);return G4(t.localStore,e).then(r=>Gc(t,r))})).apply(this,arguments)}function hde(n,e,t,r){return AM.apply(this,arguments)}function AM(){return(AM=(0,T.A)(function*(n,e,t,r){const i=Me(n),o=yield function(a,c){const u=Me(a),h=Me(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",m=>h.Hn(m,c).next(_=>_?u.localDocuments.getDocuments(m,_):z.resolve(null)))}(i.localStore,e);var c;null!==o?("pending"===t?yield rg(i.remoteStore):"acknowledged"===t||"rejected"===t?(EM(i,e,r||null),vM(i,e),c=e,Me(Me(i.localStore).mutationQueue).Xn(c)):Ue(6720,"Unknown batchState",{Eu:t}),yield Gc(i,o)):Ee(ru,"Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function SM(){return(SM=(0,T.A)(function*(n,e){const t=Me(n);if(ET(t),PM(t),!0===e&&!0!==t.hu){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield bG(t,r.toArray());t.hu=!0,yield YN(t.remoteStore,!0);for(const o of i)yT(t.remoteStore,o)}else if(!1===e&&!1!==t.hu){const r=[];let i=Promise.resolve();t.iu.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(cg(t,s),eg(t.localStore,s,!0))),ng(t.remoteStore,s)}),yield i,yield bG(t,r),function(s){const a=Me(s);a._u.forEach((c,u)=>{ng(a.remoteStore,u)}),a.au.Kr(),a._u=new Map,a.ou=new jn(Le.comparator)}(t),t.hu=!1,yield YN(t.remoteStore,!1)}})).apply(this,arguments)}function bG(n,e,t){return RM.apply(this,arguments)}function RM(){return(RM=(0,T.A)(function*(n,e,t){const r=Me(n),i=[],o=[];for(const s of e){let a;const c=r.iu.get(s);if(c&&0!==c.length){a=yield Xp(r.localStore,Bi(c[0]));for(const u of c){const h=r.ru.get(u),m=yield ude(r,h);m.snapshot&&o.push(m.snapshot)}}else{const u=yield $4(r.localStore,s);a=yield Xp(r.localStore,u),yield lM(r,IG(u),s,!1,a.resumeToken)}i.push(a)}return r.nu.Q_(o),i})).apply(this,arguments)}function IG(n){return f3(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function pde(n){return t=Me(n).localStore,Me(Me(t).persistence).us();var t}function gde(n,e,t,r){return NM.apply(this,arguments)}function NM(){return(NM=(0,T.A)(function*(n,e,t,r){const i=Me(n);if(i.hu)return void Ee(ru,"Ignoring unexpected query state notification.");const o=i.iu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const s=yield G4(i.localStore,y3(o[0])),a=Wy.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,br.EMPTY_BYTE_STRING);yield Gc(i,s,a);break}case"rejected":yield eg(i.localStore,e,!0),cg(i,e,r);break;default:Ue(64155,t)}})).apply(this,arguments)}function mde(n,e,t){return MM.apply(this,arguments)}function MM(){return(MM=(0,T.A)(function*(n,e,t){const r=ET(n);if(r.hu){for(const i of e){if(r.iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Ee(ru,"Adding an already active target "+i);continue}const o=yield $4(r.localStore,i),s=yield Xp(r.localStore,o);yield lM(r,IG(o),s.targetId,!1,s.resumeToken),yT(r.remoteStore,s)}for(const i of t)r.iu.has(i)&&(yield eg(r.localStore,i,!1).then(()=>{ng(r.remoteStore,i),cg(r,i)}).catch(jl))}})).apply(this,arguments)}function ET(n){const e=Me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yG.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lde.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rde.bind(null,e),e.nu.Q_=zue.bind(null,e.eventManager),e.nu.Tu=Wue.bind(null,e.eventManager),e}function PM(n){const e=Me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ide.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ode.bind(null,e),e}let bT=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return(0,T.A)(function*(){r.serializer=rv(t.databaseInfo.databaseId),r.sharedClientState=r.Au(t),r.persistence=r.Ru(t),yield r.persistence.start(),r.localStore=r.Vu(t),r.gcScheduler=r.mu(t,r.localStore),r.indexBackfillerScheduler=r.fu(t,r.localStore)})()}mu(t,r){return null}fu(t,r){return null}Vu(t){return B4(this.persistence,new V4,t.initialUser,this.serializer)}Ru(t){return new gN(uT.Ei,this.serializer)}Au(t){return new J4}terminate(){var t=this;return(0,T.A)(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class OM extends bT{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){return qe(this.persistence.referenceDelegate instanceof dT,46915),new S4(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ru(e){const t=void 0!==this.cacheSizeBytes?Ui.withCacheSize(this.cacheSizeBytes):Ui.DEFAULT;return new gN(r=>dT.Ei(r,t),this.serializer)}}class xM extends bT{constructor(e,t,r){super(),this.gu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,T.A)(function*(){yield t().call(r,e),yield r.gu.initialize(r,e),yield PM(r.gu.syncEngine),yield rg(r.gu.remoteStore),yield r.persistence.Ki(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Vu(e){return B4(this.persistence,new V4,e.initialUser,this.serializer)}mu(e,t){return new S4(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}fu(e,t){const r=new Rce(t,this.persistence);return new Sce(e.asyncQueue,r)}Ru(e){const t=EN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ui.withCacheSize(this.cacheSizeBytes):Ui.DEFAULT;return new vN(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,eG(),_T(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Au(e){return new J4}}class TG extends xM{constructor(e,t){super(e,t,!1),this.gu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,T.A)(function*(){yield t().call(r,e);const i=r.gu.syncEngine;r.sharedClientState instanceof NN&&(r.sharedClientState.syncEngine={yo:hde.bind(null,i),wo:gde.bind(null,i),bo:mde.bind(null,i),us:pde.bind(null,i),po:dde.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ki(function(){var o=(0,T.A)(function*(s){yield function fde(n,e){return SM.apply(this,arguments)}(r.gu.syncEngine,s),r.gcScheduler&&(s&&!r.gcScheduler.started?r.gcScheduler.start():s||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(s&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():s||r.indexBackfillerScheduler.stop())});return function(s){return o.apply(this,arguments)}}())})()}Au(e){const t=eG();if(!NN.C(t))throw new _e(Z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=EN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new NN(t,e.asyncQueue,r,e.clientId,e.initialUser)}}let lg=(()=>{class n{initialize(t,r){var i=this;return(0,T.A)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=o=>vG(i.syncEngine,o,1),i.remoteStore.remoteSyncer.handleCredentialChange=cde.bind(null,i.syncEngine),yield YN(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new Gue}createDatastore(t){const r=rv(t.databaseInfo.databaseId),i=new Cue(t.databaseInfo);return new Nue(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,o=this.datastore,s=t.asyncQueue,a=r=>vG(this.syncEngine,r,0),c=X4.C()?new X4:new Iue,new Pue(i,o,s,a,c);var i,o,s,a,c}createSyncEngine(t,r){return function(o,s,a,c,u,h,m){const _=new Jue(o,s,a,c,u,h);return m&&(_.hu=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,T.A)(function*(){var r,i,o;yield(o=(0,T.A)(function*(a){const c=Me(a);Ee(qd,"RemoteStore shutting down."),c.aa.add(5),yield tg(c),c.ca.shutdown(),c.la.set("Unknown")}),function s(a){return o.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();function wG(n,e=10240){let t=0;return{read:()=>(0,T.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,T.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class IT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Mr("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class yde{constructor(e,t){this.wu=e,this.serializer=t,this.metadata=new ci,this.buffer=new Uint8Array,this.bu=new TextDecoder("utf-8"),this.Su().then(r=>{r&&r.xa()?this.metadata.resolve(r.Ma.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Ma)}`))},r=>this.metadata.reject(r))}close(){return this.wu.cancel()}getMetadata(){var e=this;return(0,T.A)(function*(){return e.metadata.promise})()}du(){var e=this;return(0,T.A)(function*(){return yield e.getMetadata(),e.Su()})()}Su(){var e=this;return(0,T.A)(function*(){const t=yield e.Du();if(null===t)return null;const r=e.bu.decode(t),i=Number(r);isNaN(i)&&e.vu(`length string (${r}) is not valid number`);const o=yield e.Cu(i);return new que(JSON.parse(o),t.length+i)})()}Fu(){return this.buffer.findIndex(e=>123===e)}Du(){var e=this;return(0,T.A)(function*(){for(;e.Fu()<0&&!(yield e.Mu()););if(0===e.buffer.length)return null;const t=e.Fu();t<0&&e.vu("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cu(e){var t=this;return(0,T.A)(function*(){for(;t.buffer.length<e;)(yield t.Mu())&&t.vu("Reached the end of bundle when more is expected.");const r=t.bu.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}vu(e){throw this.wu.cancel(),new Error(`Invalid bundle format: ${e}`)}Mu(){var e=this;return(0,T.A)(function*(){const t=yield e.wu.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class vde{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,T.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new _e(Z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,T.A)(function*(s,a){const c=Me(s),u={documents:a.map(v=>Ky(c.serializer,v))},h=yield c.Wo("BatchGetDocuments",c.serializer.databaseId,Ut.emptyPath(),u,a.length),m=new Map;h.forEach(v=>{const I=function xle(n,e){return"found"in e?function(r,i){qe(!!i.found,43571);const o=$a(r,i.found.name),s=Pr(i.found.updateTime),a=i.found.createTime?Pr(i.found.createTime):et.min(),c=new Ei({mapValue:{fields:i.found.fields}});return Wn.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){qe(!!i.missing,3894),qe(!!i.readTime,22933);const o=$a(r,i.missing),s=Pr(i.readTime);return Wn.newNoDocument(o,s)}(n,e):Ue(7234,{result:e})}(c.serializer,v);m.set(I.key.toString(),I)});const _=[];return a.forEach(v=>{const I=m.get(v.toString());qe(!!I,55234,{key:v}),_.push(I)}),_}),function o(s,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new zp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,T.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=Le.fromPath(i);e.mutations.push(new JR(o,e.precondition(o)))}),yield(r=(0,T.A)(function*(o,s){const a=Me(o),c={writes:s.map(u=>Qy(a.serializer,u))};yield a.Qo("Commit",a.serializer.databaseId,Ut.emptyPath(),c)}),function i(o,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ue(50498,{xu:e.constructor.name});t=et.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new _e(Z.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(et.min())?ir.exists(!1):ir.updateTime(t):ir.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(et.min()))throw new _e(Z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ir.updateTime(t)}return ir.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Ede{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Ou=r.maxAttempts,this.y_=new ON(this.asyncQueue,"transaction_retry")}Nu(){this.Ou-=1,this.Bu()}Bu(){var e=this;this.y_.E_((0,T.A)(function*(){const t=new vde(e.datastore),r=e.Lu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.ku(o)}))}).catch(i=>{e.ku(i)})}))}Lu(e){try{const t=this.updateFunction(e);return!Cy(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ku(e){this.Ou>0&&this.qu(e)?(this.Ou-=1,this.asyncQueue.enqueueAndForget(()=>(this.Bu(),Promise.resolve()))):this.deferred.reject(e)}qu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!F3(t)}return!1}}const iu="FirestoreClient";class bde{constructor(e,t,r,i,o){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ai.UNAUTHENTICATED,this.clientId=f$.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,function(){var a=(0,T.A)(function*(c){Ee(iu,"Received user=",c.uid),yield s.authCredentialListener(c),s.user=c});return function(c){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(Ee(iu,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,T.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=og(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function kM(n,e){return FM.apply(this,arguments)}function FM(){return FM=(0,T.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ee(iu,"Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,T.A)(function*(o){r.isEqual(o)||(yield U4(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),FM.apply(this,arguments)}function DG(n,e){return LM.apply(this,arguments)}function LM(){return(LM=(0,T.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield VM(n);Ee(iu,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>cG(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>cG(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function VM(n){return BM.apply(this,arguments)}function BM(){return(BM=(0,T.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ee(iu,"Using user provided OfflineComponentProvider");try{yield kM(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;Xo("Error using user provided cache. Falling back to memory cache: "+e),yield kM(n,new bT)}}else Ee(iu,"Using default OfflineComponentProvider"),yield kM(n,new OM(void 0));var i;return n._offlineComponents})).apply(this,arguments)}function TT(n){return UM.apply(this,arguments)}function UM(){return(UM=(0,T.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ee(iu,"Using user provided OnlineComponentProvider"),yield DG(n,n._uninitializedComponentsProvider._online)):(Ee(iu,"Using default OnlineComponentProvider"),yield DG(n,new lg))),n._onlineComponents})).apply(this,arguments)}function CG(n){return VM(n).then(e=>e.persistence)}function ug(n){return VM(n).then(e=>e.localStore)}function AG(n){return TT(n).then(e=>e.remoteStore)}function jM(n){return TT(n).then(e=>e.syncEngine)}function dg(n){return HM.apply(this,arguments)}function HM(){return(HM=(0,T.A)(function*(n){const e=yield TT(n),t=e.eventManager;return t.onListen=Zue.bind(null,e.syncEngine),t.onUnlisten=ede.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Xue.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=tde.bind(null,e.syncEngine),t})).apply(this,arguments)}function RG(n,e,t={}){const r=new ci;return n.asyncQueue.enqueueAndForget((0,T.A)(function*(){return function(o,s,a,c,u){const h=new IT({next:_=>{h.yu(),s.enqueueAndForget(()=>tM(o,m));const v=_.docs.has(a);!v&&_.fromCache?u.reject(new _e(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&_.fromCache&&c&&"server"===c.source?u.reject(new _e(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(_)},error:_=>u.reject(_)}),m=new oM(Bp(a.path),h,{includeMetadataChanges:!0,Fa:!0});return XN(o,m)}(yield dg(n),n.asyncQueue,e,t,r)})),r.promise}function NG(n,e,t={}){const r=new ci;return n.asyncQueue.enqueueAndForget((0,T.A)(function*(){return function(o,s,a,c,u){const h=new IT({next:_=>{h.yu(),s.enqueueAndForget(()=>tM(o,m)),_.fromCache&&"server"===c.source?u.reject(new _e(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(_)},error:_=>u.reject(_)}),m=new oM(a,h,{includeMetadataChanges:!0,Fa:!0});return XN(o,m)}(yield dg(n),n.asyncQueue,e,t,r)})),r.promise}function MG(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const PG=new Map;function $M(n,e,t){if(!t)throw new _e(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function OG(n,e,t,r){if(!0===e&&!0===r)throw new _e(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function xG(n){if(!Le.isDocumentKey(n))throw new _e(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function kG(n){if(Le.isDocumentKey(n))throw new _e(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function wT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Ue(12329,{type:typeof n})}function Pt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wT(n);throw new _e(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function FG(n,e){if(e<=0)throw new _e(Z.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const LG="firestore.googleapis.com";class BG{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new _e(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=LG,this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new _e(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=MG(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new _e(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new _e(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new _e(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ov{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new BG({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new _e(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new BG(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new gce;switch(r.type){case"firstParty":return new vce(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _e(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,T.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=PG.get(t);r&&(Ee("ComponentProvider","Removing Datastore"),PG.delete(t),r.terminate())}(this),Promise.resolve()}}class bi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bi(this.firestore,e,this._query)}}class qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new za(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qn(this.firestore,e,this._key)}}class za extends bi{constructor(e,t,r){super(e,t,Bp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qn(this.firestore,null,new Le(e))}withConverter(e){return new za(this.firestore,e,this._path)}}function jG(n,e,...t){if(n=(0,At.Ku)(n),$M("collection","path",e),n instanceof ov){const r=Ut.fromString(e,...t);return kG(r),new za(n,null,r)}{if(!(n instanceof qn||n instanceof za))throw new _e(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ut.fromString(e,...t));return kG(r),new za(n.firestore,null,r)}}function DT(n,e,...t){if(n=(0,At.Ku)(n),1===arguments.length&&(e=f$.newId()),$M("doc","path",e),n instanceof ov){const r=Ut.fromString(e,...t);return xG(r),new qn(n,null,new Le(r))}{if(!(n instanceof qn||n instanceof za))throw new _e(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ut.fromString(e,...t));return xG(r),new qn(n.firestore,n instanceof za?n.converter:null,new Le(r))}}function HG(n,e){return n=(0,At.Ku)(n),e=(0,At.Ku)(e),(n instanceof qn||n instanceof za)&&(e instanceof qn||e instanceof za)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function GM(n,e){return n=(0,At.Ku)(n),e=(0,At.Ku)(e),n instanceof bi&&e instanceof bi&&n.firestore===e.firestore&&By(n._query,e._query)&&n.converter===e.converter}const $G="AsyncQueue";class GG{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new ON(this,"async_queue_retry"),this.ju=()=>{const r=_T();r&&Ee($G,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const t=_T();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=_T();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new ci;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}Zu(){var e=this;return(0,T.A)(function*(){if(0!==e.Qu.length){try{yield e.Qu[0](),e.Qu.shift(),e.y_.reset()}catch(t){if(!Hl(t))throw t;Ee($G,"Operation failed with retryable error: "+t)}e.Qu.length>0&&e.y_.E_(()=>e.Zu())}})()}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,Mr("INTERNAL UNHANDLED ERROR: ",zG(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=t,t}enqueueAfterDelay(e,t,r){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const i=ZN.createAndSchedule(this,e,t,r,o=>this.Xu(o));return this.Uu.push(i),i}Ju(){this.Ku&&Ue(47125,{ec:zG(this.Ku)})}verifyOperationInProgress(){}tc(){var e=this;return(0,T.A)(function*(){let t;do{t=e.Hu,yield t}while(t!==e.Hu)})()}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function zG(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),e}function zM(n){return function(t){if("object"!=typeof t||null===t)return!1;const i=t;for(const o of["next","error","complete"])if(o in i&&"function"==typeof i[o])return!0;return!1}(n)}class xde{constructor(){this._progressObserver={},this._taskCompletionResolver=new ci,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Pn extends ov{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new GG,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,T.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new GG(t),e._firestoreClient=void 0,yield t}})()}}function or(n){if(n._terminated)throw new _e(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||WG(n),n._firestoreClient}function WG(n){var e,t,r;const i=n._freezeSettings(),o=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ile(n._databaseId,c,n._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,MG(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator));var c,h;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new bde(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function WM(){return(WM=(0,T.A)(function*(n){Xo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();qG(n,lg.provider,{build:t=>new TG(t,e.cacheSizeBytes)})})).apply(this,arguments)}function qG(n,e,t){if((n=Pt(n,Pn))._firestoreClient||n._terminated)throw new _e(Z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new _e(Z.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},WG(n)}class Wa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wa(br.fromBase64String(e))}catch(t){throw new _e(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wa(br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class zc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new _e(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Kd{constructor(e){this._methodName=e}}class CT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}}class AT{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}const zde=/^__.*__$/;class Wde{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Hc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gp(e,this.data,t,this.fieldTransforms)}}class KG{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Hc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function QG(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue(40011,{oc:n})}}class ST{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this._c(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new ST(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i.lc(e),i}hc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i._c(),i}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return MT(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(0===e.length)throw this.Tc("Document fields must not be empty");if(QG(this.oc)&&zde.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class qde{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||rv(e)}dc(e,t,r,i=!1){return new ST({oc:e,methodName:t,Ec:r,path:zn.emptyPath(),cc:!1,Ic:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qd(n){const e=n._freezeSettings(),t=rv(n._databaseId);return new qde(n._databaseId,!!e.ignoreUndefinedProperties,t)}function RT(n,e,t,r,i,o={}){const s=n.dc(o.merge||o.mergeFields?2:0,e,t,i);XM("Data must be an object, but it was:",s,r);const a=ZG(r,s);let c,u;if(o.merge)c=new Oo(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const m of o.mergeFields){const _=cv(e,m,t);if(!s.contains(_))throw new _e(Z.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);ez(h,_)||h.push(_)}c=new Oo(h),u=s.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,u=s.fieldTransforms;return new Wde(new Ei(a),c,u)}class av extends Kd{_toFieldTransform(e){if(2!==e.oc)throw e.Tc(1===e.oc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof av}}function YG(n,e,t){return new ST({oc:3,Ec:e.settings.Ec,methodName:n._methodName,cc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class qM extends Kd{_toFieldTransform(e){return new $y(e.path,new Hp)}isEqual(e){return e instanceof qM}}class KM extends Kd{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=YG(this,e,!0),r=this.Ac.map(o=>Yd(o,t)),i=new Vd(r);return new $y(e.path,i)}isEqual(e){return e instanceof KM&&(0,At.bD)(this.Ac,e.Ac)}}class QM extends Kd{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=YG(this,e,!0),r=this.Ac.map(o=>Yd(o,t)),i=new Bd(r);return new $y(e.path,i)}isEqual(e){return e instanceof QM&&(0,At.bD)(this.Ac,e.Ac)}}class YM extends Kd{constructor(e,t){super(e),this.Rc=t}_toFieldTransform(e){const t=new $p(e.serializer,w3(e.serializer,this.Rc));return new $y(e.path,t)}isEqual(e){return e instanceof YM&&this.Rc===e.Rc}}function JM(n,e,t,r){const i=n.dc(1,e,t);XM("Data must be an object, but it was:",i,r);const o=[],s=Ei.empty();Gl(r,(c,u)=>{const h=NT(e,c,t);u=(0,At.Ku)(u);const m=i.hc(h);if(u instanceof av)o.push(h);else{const _=Yd(u,m);null!=_&&(o.push(h),s.set(h,_))}});const a=new Oo(o);return new KG(s,a,i.fieldTransforms)}function ZM(n,e,t,r,i,o){const s=n.dc(1,e,t),a=[cv(e,r,t)],c=[i];if(o.length%2!=0)throw new _e(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)a.push(cv(e,o[_])),c.push(o[_+1]);const u=[],h=Ei.empty();for(let _=a.length-1;_>=0;--_)if(!ez(u,a[_])){const v=a[_];let I=c[_];I=(0,At.Ku)(I);const D=s.hc(v);if(I instanceof av)u.push(v);else{const A=Yd(I,D);null!=A&&(u.push(v),h.set(v,A))}}const m=new Oo(u);return new KG(h,m,s.fieldTransforms)}function JG(n,e,t,r=!1){return Yd(t,n.dc(r?4:3,e))}function Yd(n,e){if(XG(n=(0,At.Ku)(n)))return XM("Unsupported field value:",e,n),ZG(n,e);if(n instanceof Kd)return function(r,i){if(!QG(i.oc))throw i.Tc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Tc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&4!==e.oc)throw e.Tc("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let c=Yd(a,i.Pc(s));null==c&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if(null===(r=(0,At.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return w3(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=nr.fromDate(r);return{timestampValue:Wp(i.serializer,o)}}if(r instanceof nr){const o=new nr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wp(i.serializer,o)}}if(r instanceof CT)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wa)return{bytesValue:G3(i.serializer,r._byteString)};if(r instanceof qn){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Tc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:rN(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof AT)return s=r,a=i,{mapValue:{fields:{[BR]:{stringValue:UR},[Fp]:{arrayValue:{values:s.toArray().map(u=>{if("number"!=typeof u)throw a.Tc("VectorValues must only contain numeric values.");return YR(a.serializer,u)})}}}}};var s,a;throw i.Tc(`Unsupported field value: ${wT(r)}`)}(n,e)}function ZG(n,e){const t={};return B$(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gl(n,(r,i)=>{const o=Yd(i,e.uc(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function XG(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof nr||n instanceof CT||n instanceof Wa||n instanceof qn||n instanceof Kd||n instanceof AT)}function XM(n,e,t){if(!XG(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=wT(t);throw e.Tc("an object"===r?n+" a custom object":n+" "+r)}var i}function cv(n,e,t){if((e=(0,At.Ku)(e))instanceof zc)return e._internalPath;if("string"==typeof e)return NT(n,e);throw MT("Field path arguments must be of type string or ",n,!1,void 0,t)}const Kde=new RegExp("[~\\*/\\[\\]]");function NT(n,e,t){if(e.search(Kde)>=0)throw MT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new zc(...e.split("."))._internalPath}catch{throw MT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function MT(n,e,t,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new _e(Z.INVALID_ARGUMENT,a+n+c)}function ez(n,e){return n.some(t=>t.isEqual(e))}class lv{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Qde(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(PT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Qde extends lv{data(){return super.data()}}function PT(n,e){return"string"==typeof e?NT(n,e):e instanceof zc?e._internalPath:e._delegate._internalPath}function tz(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new _e(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eP{}class uv extends eP{}function ou(n,e,...t){let r=[];e instanceof eP&&r.push(e),r=r.concat(t),function(o){const s=o.filter(c=>c instanceof hg).length,a=o.filter(c=>c instanceof dv).length;if(s>1||s>0&&a>0)throw new _e(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class dv extends uv{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new dv(e,t,r)}_apply(e){const t=this._parse(e);return oz(e._query,t),new bi(e.firestore,e.converter,KR(e._query,t))}_parse(e){const t=Qd(e.firestore);return function(o,s,a,c,u,h,m){let _;if(u.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new _e(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){iz(m,h);const I=[];for(const D of m)I.push(rz(c,o,D));_={arrayValue:{values:I}}}else _=rz(c,o,m)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||iz(m,h),_=JG(a,"where",m,"in"===h||"not-in"===h);return jt.create(u,h,_)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class hg extends eP{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new hg(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:vn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const c of a)oz(s,c),s=KR(s,c)}(e._query,t),new bi(e.firestore,e.converter,KR(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class tP extends uv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new tP(e,t)}_apply(e){const t=function(i,o,s){if(null!==i.startAt)throw new _e(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new _e(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ly(o,s)}(e._query,this._field,this._direction);return new bi(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new Uc(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class OT extends uv{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new OT(e,t,r)}_apply(e){return new bi(e.firestore,e.converter,QI(e._query,this._limit,this._limitType))}}class xT extends uv{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new xT(e,t,r)}_apply(e){const t=nz(e,this.type,this._docOrFields,this._inclusive);return new bi(e.firestore,e.converter,(o=t,new Uc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)));var i,o}}class kT extends uv{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new kT(e,t,r)}_apply(e){const t=nz(e,this.type,this._docOrFields,this._inclusive);return new bi(e.firestore,e.converter,(o=t,new Uc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)));var i,o}}function nz(n,e,t,r){if(t[0]=(0,At.Ku)(t[0]),t[0]instanceof lv)return function(o,s,a,c,u){if(!c)throw new _e(Z.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const m of Up(o))if(m.field.isKeyField())h.push(Fd(s,c.key));else{const _=c.data.field(m.field);if(jI(_))throw new _e(Z.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_){const v=m.field.canonicalString();throw new _e(Z.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(_)}return new Ql(h,u)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Qd(n.firestore);return function(s,a,c,u,h,m){const _=s.explicitOrderBy;if(h.length>_.length)throw new _e(Z.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const v=[];for(let I=0;I<h.length;I++){const D=h[I];if(_[I].field.isKeyField()){if("string"!=typeof D)throw new _e(Z.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof D}`);if(!qR(s)&&-1!==D.indexOf("/"))throw new _e(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${D}' contains a slash.`);const A=s.path.child(Ut.fromString(D));if(!Le.isDocumentKey(A))throw new _e(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const O=new Le(A);v.push(Fd(a,O))}else{const A=JG(c,u,D);v.push(A)}}return new Ql(v,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function rz(n,e,t){if("string"==typeof(t=(0,At.Ku)(t))){if(""===t)throw new _e(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qR(e)&&-1!==t.indexOf("/"))throw new _e(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ut.fromString(t));if(!Le.isDocumentKey(r))throw new _e(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fd(n,new Le(r))}if(t instanceof qn)return Fd(n,t._key);throw new _e(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wT(t)}.`)}function iz(n,e){if(!Array.isArray(n)||0===n.length)throw new _e(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oz(n,e){const t=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new _e(Z.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class nP{convertValue(e,t="none"){switch(ql(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Gl(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;const o=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t[Fp].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(s=>rr(s.doubleValue));return new AT(o)}convertGeoPoint(e){return new CT(rr(e.latitude),rr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=HI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Py(e));default:return null}}convertTimestamp(e){const t=Vc(e);return new nr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ut.fromString(e);qe(n4(r),9688,{name:e});const i=new zl(r.get(1),r.get(3)),o=new Le(r.popFirst(5));return i.isEqual(t)||Mr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function FT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class ihe extends nP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}class Jd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wc extends lv{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(PT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class hv extends Wc{data(e={}){return super.data(e)}}class su{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Jd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new hv(this._firestore,this._userDataWriter,r.key,r,new Jd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new hv(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Jd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const c=new hv(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Jd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return 0!==a.type&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:she(a.type),doc:c,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function she(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue(61501,{type:n})}}function az(n,e){return n instanceof Wc&&e instanceof Wc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof su&&e instanceof su&&n._firestore===e._firestore&&GM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class au extends nP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}function cz(n,e,t){n=Pt(n,qn);const r=Pt(n.firestore,Pn),i=FT(n.converter,e,t);return fg(r,[RT(Qd(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ir.none())])}function lz(n,e,t,...r){n=Pt(n,qn);const i=Pt(n.firestore,Pn),o=Qd(i);let s;return s="string"==typeof(e=(0,At.Ku)(e))||e instanceof zc?ZM(o,"updateDoc",n._key,e,t,r):JM(o,"updateDoc",n._key,e),fg(i,[s.toMutation(n._key,ir.exists(!0))])}function uz(n,...e){var t,r,i;n=(0,At.Ku)(n);let o={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof e[s]||zM(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(zM(e[s])){const m=e[s];e[s]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[s+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[s+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let c,u,h;if(n instanceof qn)u=Pt(n.firestore,Pn),h=Bp(n._key.path),c={next:m=>{e[s]&&e[s](rP(u,n,m))},error:e[s+1],complete:e[s+2]};else{const m=Pt(n,bi);u=Pt(m.firestore,Pn),h=m._query;const _=new au(u);c={next:v=>{e[s]&&e[s](new su(u,_,m,v))},error:e[s+1],complete:e[s+2]},tz(n._query)}return function(_,v,I,D){const A=new IT(D),O=new oM(v,A,I);return _.asyncQueue.enqueueAndForget((0,T.A)(function*(){return XN(yield dg(_),O)})),()=>{A.yu(),_.asyncQueue.enqueueAndForget((0,T.A)(function*(){return tM(yield dg(_),O)}))}}(or(u),h,a,c)}function fg(n,e){return function(r,i){const o=new ci;return r.asyncQueue.enqueueAndForget((0,T.A)(function*(){return function nde(n,e,t){return fM.apply(this,arguments)}(yield jM(r),i,o)})),o.promise}(or(n),e)}function rP(n,e,t){const r=t.docs.get(e._key),i=new au(n);return new Wc(n,i,e._key,r,new Jd(t.hasPendingWrites,t.fromCache),e.converter)}const whe={maxAttempts:5};class dz{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Qd(e)}set(e,t,r){this._verifyNotCommitted();const i=cu(e,this._firestore),o=FT(i.converter,t,r),s=RT(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(s.toMutation(i._key,ir.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=cu(e,this._firestore);let s;return s="string"==typeof(t=(0,At.Ku)(t))||t instanceof zc?ZM(this._dataReader,"WriteBatch.update",o._key,t,r,i):JM(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=cu(e,this._firestore);return this._mutations=this._mutations.concat(new zp(t._key,ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _e(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function cu(n,e){if((n=(0,At.Ku)(n)).firestore!==e)throw new _e(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Dhe{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Qd(e)}get(e){const t=cu(e,this._firestore),r=new ihe(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return Ue(24041);const o=i[0];if(o.isFoundDocument())return new lv(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new lv(this._firestore,r,t._key,null,t.converter);throw Ue(18433,{doc:o})})}set(e,t,r){const i=cu(e,this._firestore),o=FT(i.converter,t,r),s=RT(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){const o=cu(e,this._firestore);let s;return s="string"==typeof(t=(0,At.Ku)(t))||t instanceof zc?ZM(this._dataReader,"Transaction.update",o._key,t,r,i):JM(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){const t=cu(e,this._firestore);return this._transaction.delete(t._key),this}}class Che extends Dhe{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=cu(e,this._firestore),r=new au(this._firestore);return super.get(e).then(i=>new Wc(this._firestore,r,t._key,i._document,new Jd(!1,!1),t.converter))}}function oP(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new _e("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function gz(){if(typeof Uint8Array>"u")throw new _e("unimplemented","Uint8Arrays are not available in this environment.")}function mz(){if(!function nle(){return typeof atob<"u"}())throw new _e("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){wp=Cs.SDK_VERSION,(0,Cs._registerComponent)(new mI.uA("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Pn(new _ce(r.getProvider("auth-internal")),new Ece(s,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new _e(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zl(u.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),(0,Cs.registerVersion)(l$,"4.7.12",e),(0,Cs.registerVersion)(l$,"4.7.12","esm2017")}();class fv{constructor(e){this._delegate=e}static fromBase64String(e){return mz(),new fv(Wa.fromBase64String(e))}static fromUint8Array(e){return gz(),new fv(Wa.fromUint8Array(e))}toBase64(){return mz(),this._delegate.toBase64()}toUint8Array(){return gz(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function sP(n){return function Fhe(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Lhe{enableIndexedDbPersistence(e,t){return function Fde(n,e){Xo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return qG(n,lg.provider,{build:r=>new xM(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Lde(n){return WM.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function Vde(n){if(n._initialized&&!n._terminated)throw new _e(Z.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ci;return n._queue.enqueueAndForgetEvenWhileRestricted((0,T.A)(function*(){try{yield(t=(0,T.A)(function*(i){if(!Ba.C())return Promise.resolve();const o=i+"main";yield Ba.delete(o)}),function r(i){return t.apply(this,arguments)})(EN(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class _z{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof zl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Xo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function UG(n,e,t,r={}){var i;n=Pt(n,ov);const o=(0,At.zJ)(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&(0,At.gE)(`https://${c}`),s.host!==LG&&s.host!==c&&Xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!(0,At.bD)(u,a)&&(n._setSettings(u),r.mockUserToken)){let h,m;if("string"==typeof r.mockUserToken)h=r.mockUserToken,m=ai.MOCK_USER;else{h=(0,At.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new _e(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new ai(_)}n._authCredentials=new mce(new h$(h,m))}}(this._delegate,e,t,r)}enableNetwork(){return function Ude(n){return function Ide(n){return n.asyncQueue.enqueue((0,T.A)(function*(){const e=yield CG(n),t=yield AG(n);return e.setNetworkEnabled(!0),function(i){const o=Me(i);return o.aa.delete(0),iv(o)}(t)}))}(or(n=Pt(n,Pn)))}(this._delegate)}disableNetwork(){return function jde(n){return function Tde(n){return n.asyncQueue.enqueue((0,T.A)(function*(){const e=yield CG(n),t=yield AG(n);return e.setNetworkEnabled(!1),(r=(0,T.A)(function*(o){const s=Me(o);s.aa.add(0),yield tg(s),s.la.set("Offline")}),function i(o){return r.apply(this,arguments)})(t);var r}))}(or(n=Pt(n,Pn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,OG("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Bde(n){return function(t){const r=new ci;return t.asyncQueue.enqueueAndForget((0,T.A)(function*(){return function sde(n,e){return yM.apply(this,arguments)}(yield jM(t),r)})),r.promise}(or(n=Pt(n,Pn)))}(this._delegate)}onSnapshotsInSync(e){return function ghe(n,e){return function Ade(n,e){const t=new IT(e);return n.asyncQueue.enqueueAndForget((0,T.A)(function*(){return i=yield dg(n),o=t,Me(i).fa.add(o),void o.next();var i,o})),()=>{t.yu(),n.asyncQueue.enqueueAndForget((0,T.A)(function*(){return i=yield dg(n),o=t,void Me(i).fa.delete(o);var i,o}))}}(or(n=Pt(n,Pn)),zM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new _e("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new pg(this,jG(this._delegate,e))}catch(t){throw ho(t,"collection()","Firestore.collection()")}}doc(e){try{return new As(this,DT(this._delegate,e))}catch(t){throw ho(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new fo(this,function Ode(n,e){if(n=Pt(n,ov),$M("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new _e(Z.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new bi(n,null,(r=e,new Uc(Ut.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw ho(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Ahe(n,e,t){n=Pt(n,Pn);const r=Object.assign(Object.assign({},whe),t);return function(o){if(o.maxAttempts<1)throw new _e(Z.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){const c=new ci;return o.asyncQueue.enqueueAndForget((0,T.A)(function*(){const u=yield function SG(n){return TT(n).then(e=>e.datastore)}(o);new Ede(o.asyncQueue,u,a,s,c).Nu()})),c.promise}(or(n),i=>e(new Che(n,i)),r)}(this._delegate,t=>e(new yz(this,t)))}batch(){return or(this._delegate),new vz(new dz(this._delegate,e=>fg(this._delegate,e)))}loadBundle(e){return function Hde(n,e){const t=or(n=Pt(n,Pn)),r=new xde;return function Sde(n,e,t,r){const i=function(s,a){let c;return c="string"==typeof s?wR().encode(s):s,h=function(h,m){if(h instanceof Uint8Array)return wG(h,m);if(h instanceof ArrayBuffer)return wG(new Uint8Array(h),m);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new yde(h,a);var h}(t,rv(e));n.asyncQueue.enqueueAndForget((0,T.A)(function*(){!function _de(n,e,t){const r=Me(n);var i;(i=(0,T.A)(function*(s,a,c){try{const u=yield a.getMetadata();if(yield function(I,D){const A=Me(I),O=Pr(D.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",P=>A.ci.getBundleMetadata(P,D.id)).then(P=>!!P&&P.createTime.compareTo(O)>=0)}(s.localStore,u))return yield a.close(),c._completeWith({taskState:"Success",documentsLoaded:(I=u).totalDocuments,bytesLoaded:I.totalBytes,totalDocuments:I.totalDocuments,totalBytes:I.totalBytes}),Promise.resolve(new Set);c._updateProgress(fG(u));const h=new Kue(u,s.localStore,a.serializer);let m=yield a.du();for(;m;){const v=yield h.Na(m);v&&c._updateProgress(v),m=yield a.du()}const _=yield h.complete();return yield Gc(s,_.ka,void 0),yield function(I,D){const A=Me(I);return A.persistence.runTransaction("Save bundle","readwrite",O=>A.ci.saveBundleMetadata(O,D))}(s.localStore,u),c._completeWith(_.progress),Promise.resolve(_.La)}catch(u){return Xo(ru,`Loading bundle failed with ${u}`),c._failWith(u),Promise.resolve(new Set)}var I}),function o(s,a,c){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield jM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function $de(n,e){return function Rde(n,e){return n.asyncQueue.enqueue((0,T.A)(function*(){return function(r,i){const o=Me(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.ci.getNamedQuery(s,i))}(yield ug(n),e)}))}(or(n=Pt(n,Pn)),e).then(t=>t?new bi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new fo(this,t):null)}}class VT extends nP{constructor(e){super(),this.firestore=e}convertBytes(e){return new fv(new Wa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return As.forKey(t,this.firestore,null)}}class yz{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new VT(e)}get(e){const t=Xd(e);return this._delegate.get(t).then(r=>new pv(this._firestore,new Wc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Xd(e);return r?(oP("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Xd(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Xd(e);return this._delegate.delete(t),this}}class vz{constructor(e){this._delegate=e}set(e,t,r){const i=Xd(e);return r?(oP("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Xd(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Xd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Zd{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new hv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new gv(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Zd.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new Zd(e,new VT(e),t),i.set(t,o)),o}}Zd.INSTANCES=new WeakMap;class As{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new VT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new _e("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new As(t,new qn(t._delegate,r,new Le(e)))}static forKey(e,t,r){return new As(t,new qn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new pg(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new pg(this.firestore,jG(this._delegate,e))}catch(t){throw ho(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,At.Ku)(e))instanceof qn&&HG(this._delegate,e)}set(e,t){t=oP("DocumentReference.set",t);try{return t?cz(this._delegate,e,t):cz(this._delegate,e)}catch(r){throw ho(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?lz(this._delegate,e):lz(this._delegate,e,t,...r)}catch(i){throw ho(i,"updateDoc()","DocumentReference.update()")}}delete(){return function fhe(n){return fg(Pt(n.firestore,Pn),[new zp(n._key,ir.none())])}(this._delegate)}onSnapshot(...e){const t=Ez(e),r=bz(e,i=>new pv(this.firestore,new Wc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return uz(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function che(n){n=Pt(n,qn);const e=Pt(n.firestore,Pn),t=or(e),r=new au(e);return function wde(n,e){const t=new ci;return n.asyncQueue.enqueueAndForget((0,T.A)(function*(){return(r=(0,T.A)(function*(o,s,a){try{const c=yield function(h,m){const _=Me(h);return _.persistence.runTransaction("read document","readonly",v=>_.localDocuments.getDocument(v,m))}(o,s);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new _e(Z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const u=og(c,`Failed to get document '${s} from cache`);a.reject(u)}}),function i(o,s,a){return r.apply(this,arguments)})(yield ug(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Wc(e,r,n._key,i,new Jd(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function lhe(n){n=Pt(n,qn);const e=Pt(n.firestore,Pn);return RG(or(e),n._key,{source:"server"}).then(t=>rP(e,n,t))}(this._delegate):function ahe(n){n=Pt(n,qn);const e=Pt(n.firestore,Pn);return RG(or(e),n._key).then(t=>rP(e,n,t))}(this._delegate),t.then(r=>new pv(this.firestore,new Wc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new As(this.firestore,this._delegate.withConverter(e?Zd.getInstance(this.firestore,e):null))}}function ho(n,e,t){return n.message=n.message.replace(e,t),n}function Ez(n){for(const e of n)if("object"==typeof e&&!sP(e))return e;return{}}function bz(n,e){var t,r;let i;return i=sP(n[0])?n[0]:sP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class pv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new As(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return az(this._delegate,e._delegate)}}class gv extends pv{data(e){const t=this._delegate.data(e);return this._delegate._converter||function pce(n,e){n||Ue(57014,e)}(void 0!==t,"Document in a QueryDocumentSnapshot should exist"),t}}class fo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new VT(e)}where(e,t,r){try{return new fo(this.firestore,ou(this._delegate,function Yde(n,e,t){const r=e,i=PT("where",n);return dv._create(i,r,t)}(e,t,r)))}catch(i){throw ho(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new fo(this.firestore,ou(this._delegate,function Jde(n,e="asc"){const t=e,r=PT("orderBy",n);return tP._create(r,t)}(e,t)))}catch(r){throw ho(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new fo(this.firestore,ou(this._delegate,function Zde(n){return FG("limit",n),OT._create("limit",n,"F")}(e)))}catch(t){throw ho(t,"limit()","Query.limit()")}}limitToLast(e){try{return new fo(this.firestore,ou(this._delegate,function Xde(n){return FG("limitToLast",n),OT._create("limitToLast",n,"L")}(e)))}catch(t){throw ho(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new fo(this.firestore,ou(this._delegate,function ehe(...n){return xT._create("startAt",n,!0)}(...e)))}catch(t){throw ho(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new fo(this.firestore,ou(this._delegate,function the(...n){return xT._create("startAfter",n,!1)}(...e)))}catch(t){throw ho(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new fo(this.firestore,ou(this._delegate,function nhe(...n){return kT._create("endBefore",n,!1)}(...e)))}catch(t){throw ho(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new fo(this.firestore,ou(this._delegate,function rhe(...n){return kT._create("endAt",n,!0)}(...e)))}catch(t){throw ho(t,"endAt()","Query.endAt()")}}isEqual(e){return GM(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function dhe(n){n=Pt(n,bi);const e=Pt(n.firestore,Pn),t=or(e),r=new au(e);return function Dde(n,e){const t=new ci;return n.asyncQueue.enqueueAndForget((0,T.A)(function*(){return(r=(0,T.A)(function*(o,s,a){try{const c=yield fT(o,s,!0),u=new mG(s,c.Ns),h=u.Ga(c.documents),m=u.applyChanges(h,!1);a.resolve(m.snapshot)}catch(c){const u=og(c,`Failed to execute query '${s} against cache`);a.reject(u)}}),function i(o,s,a){return r.apply(this,arguments)})(yield ug(n),e,t);var r})),t.promise}(t,n._query).then(i=>new su(e,r,n,i))}(this._delegate):"server"===e?.source?function hhe(n){n=Pt(n,bi);const e=Pt(n.firestore,Pn),t=or(e),r=new au(e);return NG(t,n._query,{source:"server"}).then(i=>new su(e,r,n,i))}(this._delegate):function uhe(n){n=Pt(n,bi);const e=Pt(n.firestore,Pn),t=or(e),r=new au(e);return tz(n._query),NG(t,n._query).then(i=>new su(e,r,n,i))}(this._delegate),t.then(r=>new aP(this.firestore,new su(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Ez(e),r=bz(e,i=>new aP(this.firestore,new su(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return uz(this._delegate,t,r)}withConverter(e){return new fo(this.firestore,this._delegate.withConverter(e?Zd.getInstance(this.firestore,e):null))}}class Bhe{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new gv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class aP{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new fo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new gv(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Bhe(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new gv(this._firestore,r))})}isEqual(e){return az(this._delegate,e._delegate)}}class pg extends fo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new As(this.firestore,e):null}doc(e){try{return new As(this.firestore,void 0===e?DT(this._delegate):DT(this._delegate,e))}catch(t){throw ho(t,"doc()","CollectionReference.doc()")}}add(e){return function phe(n,e){const t=Pt(n.firestore,Pn),r=DT(n),i=FT(n.converter,e);return fg(t,[RT(Qd(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ir.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new As(this.firestore,t))}isEqual(e){return HG(this._delegate,e._delegate)}withConverter(e){return new pg(this.firestore,this._delegate.withConverter(e?Zd.getInstance(this.firestore,e):null))}}function Xd(n){return Pt(n,qn)}class cP{constructor(...e){this._delegate=new zc(...e)}static documentId(){return new cP(zn.keyField().canonicalString())}isEqual(e){return(e=(0,At.Ku)(e))instanceof zc&&this._delegate._internalPath.isEqual(e._internalPath)}}class eh{static serverTimestamp(){const e=function Rhe(){return new qM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new eh(e)}static delete(){const e=function She(){return new av("deleteField")}();return e._methodName="FieldValue.delete",new eh(e)}static arrayUnion(...e){const t=function Nhe(...n){return new KM("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new eh(t)}static arrayRemove(...e){const t=function Mhe(...n){return new QM("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new eh(t)}static increment(e){const t=function Phe(n){return new YM("increment",n)}(e);return t._methodName="FieldValue.increment",new eh(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Uhe={Firestore:_z,GeoPoint:CT,Timestamp:nr,Blob:fv,Transaction:yz,WriteBatch:vz,DocumentReference:As,DocumentSnapshot:pv,Query:fo,QueryDocumentSnapshot:gv,QuerySnapshot:aP,CollectionReference:pg,FieldPath:cP,FieldValue:eh,setLogLevel:function Vhe(n){!function fce(n){Ul.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Iz(n,e){return function $he(n,e=pI){return new R(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function lP(n,e){return Iz(n,e).pipe($e(t=>({payload:t,type:"query"})))}!function Hhe(n){(function jhe(n,e){n.INTERNAL.registerComponent(new mI.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Uhe)))})(n,(e,t)=>new _z(e,t,new Lhe)),n.registerVersion("@firebase/firestore-compat","0.3.47")}(Vl.A);class Tz{ref;afs;injector=N(cr);constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=Rz(r,t);return new Cz(i,o,this.afs)}snapshotChanges(){return function Ghe(n,e){return Iz(n,e).pipe(oy(void 0),ER(),$e(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Zo(this.injector))}valueChanges(e={}){return this.snapshotChanges().pipe($e(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return Un(this.ref.get(e)).pipe(Zo(this.injector))}}function BT(n,e){return lP(n,e).pipe(oy(void 0),ER(),$e(t=>{const[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{const u=o.find(m=>m.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function wz(n,e,t){return BT(n,t).pipe(Wb((r,i)=>function zhe(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Whe(n,e){switch(e.type){case"added":if(!n[e.newIndex]?.doc.ref.isEqual(e.doc.ref))return uP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return uP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]?.doc.ref.isEqual(e.doc.ref))return uP(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),function e$(n,e=Ki){return n=n??dce,Lt((t,r)=>{let i,o=!0;t.subscribe(Je(r,s=>{const a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}(),$e(r=>r.map(i=>({type:i.type,payload:i}))))}function uP(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Dz(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Cz{ref;query;afs;injector=N(cr);constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=BT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe($e(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(oy(void 0),ER(),vr(([r,i])=>i.length>0||!r),$e(([,r])=>r),Zo(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(Wb((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Dz(e);return wz(this.query,t,this.afs.schedulers.outsideAngular).pipe(Zo(this.injector))}valueChanges(e={}){return lP(this.query,this.afs.schedulers.outsideAngular).pipe($e(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Zo(this.injector))}get(e){return Un(this.query.get(e)).pipe(Zo(this.injector))}add(e){return this.ref.add(e)}doc(e){return new Tz(this.ref.doc(e),this.afs)}}class qhe{query;afs;injector=N(cr);constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?BT(this.query,this.afs.schedulers.outsideAngular).pipe($e(t=>t.filter(r=>e.indexOf(r.type)>-1)),vr(t=>t.length>0),Zo(this.injector)):BT(this.query,this.afs.schedulers.outsideAngular).pipe(Zo(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(Wb((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Dz(e);return wz(this.query,t,this.afs.schedulers.outsideAngular).pipe(Zo(this.injector))}valueChanges(e={}){return lP(this.query,this.afs.schedulers.outsideAngular).pipe($e(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Zo(this.injector))}get(e){return Un(this.query.get(e)).pipe(Zo(this.injector))}}const Az=new pe("angularfire2.enableFirestorePersistence"),Sz=new pe("angularfire2.firestore.persistenceSettings"),Khe=new pe("angularfire2.firestore.settings"),Qhe=new pe("angularfire2.firestore.use-emulator");function Rz(n,e=t=>t){return{query:e(n),ref:n}}let Nz=(()=>{class n{schedulers;firestore;persistenceEnabled$;ngZone=N(g);constructor(t,r,i,o,s,a,c,u,h,m,_,v,I,D,A,O,P){this.schedulers=c;const j=yR(t,a,r),X=h;m&&ZH(j,a,_,I,D,A,v,O),[this.firestore,this.persistenceEnabled$]=jH(`${j.name}.firestore`,"AngularFirestore",j.name,()=>{const ae=a.runOutsideAngular(()=>j.firestore());if(o&&ae.settings(o),X&&ae.useEmulator(...X),i&&!Cb(s)){const we=()=>{try{return Un(ae.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(k){return typeof console<"u"&&console.warn(k),We(!1)}};return[ae,a.runOutsideAngular(we)]}return[ae,We(!1)]},[o,X,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:s}=Rz(i,r),a=this.ngZone.run(()=>o);return new Cz(a,s,this)}collectionGroup(t,r){const i=r||(s=>s),o=this.firestore.collectionGroup(t);return new qhe(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.ngZone.run(()=>r);return new Tz(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(me(wI),me(DI,8),me(Az,8),me(Khe,8),me(sd),me(g),me(q1),me(Sz,8),me(Qhe,8),me(XH,8),me(WH,8),me(qH,8),me(KH,8),me(QH,8),me(YH,8),me(JH,8),me(mR,8))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Yhe=(()=>{class n{constructor(){Vl.A.registerVersion("angularfire",z1.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Az,useValue:!0},{provide:Sz,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Jt({type:n});static \u0275inj=Rt({providers:[Nz]})}return n})(),dP=(()=>{class n{collectionName;firestore;items$=new Nt({});collectionRef;constructor(t,r){this.collectionName=t,this.firestore=r,this.collectionRef=this.firestore.collection(this.collectionName)}getItems(){return this.collectionRef?(this.collectionRef.snapshotChanges().pipe($e(t=>t.map(r=>r.payload.doc.data()))).subscribe(t=>this.items$.next(t)),this.items$.asObservable()):We([])}static \u0275fac=function(r){return new(r||n)(me(gH),me(Nz))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),Jhe=(()=>{class n{injector;constructor(t){this.injector=t}createService(t){return Wt.create({providers:[{provide:gH,useValue:t},{provide:dP,useClass:dP}],parent:this.injector}).get(dP)}static \u0275fac=function(r){return new(r||n)(me(Wt))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Zhe=(()=>{class n{firestoreFactoryService;db=null;constructor(t){this.firestoreFactoryService=t,this.db=this.firestoreFactoryService.createService("users")}listUsers(){return this.db?this.db.getItems():We([])}static \u0275fac=function(r){return new(r||n)(me(Jhe))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Mz(n,e){const t="object"==typeof e;return new Promise((r,i)=>{const o=new hs({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new iy)}});n.subscribe(o)})}class UT{}class jT{}class Ss{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ss?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ss;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ss?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=e.value;if(o){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}addHeaderEntry(e,t){const r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Xhe{encodeKey(e){return Pz(e)}encodeValue(e){return Pz(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const tfe=/%(\d[a-f0-9])/gi,nfe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Pz(n){return encodeURIComponent(n).replace(tfe,(e,t)=>nfe[t]??e)}function HT(n){return`${n}`}class lu{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Xhe,e.fromString){if(e.fromObject)throw new se(2805,!1);this.map=function efe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,a]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(HT):[HT(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new lu({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(HT(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(HT(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class rfe{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Oz(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function xz(n){return typeof Blob<"u"&&n instanceof Blob}function kz(n){return typeof FormData<"u"&&n instanceof FormData}const mv="Content-Type",hP="X-Request-URL",Fz="text/plain",Lz="application/json",Vz=`${Lz}, ${Fz}, */*`;class _v{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){let o;if(this.url=t,this.method=e.toUpperCase(),function ife(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Ss,this.context??=new rfe,this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new lu,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||Oz(this.body)||xz(this.body)||kz(this.body)||function ofe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)?this.body:this.body instanceof lu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||kz(this.body)?null:xz(this.body)?this.body.type||null:Oz(this.body)?null:"string"==typeof this.body?Fz:this.body instanceof lu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?Lz:null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=void 0!==e.body?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress;let u=e.headers||this.headers,h=e.params||this.params;const m=e.context??this.context;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((_,v)=>_.set(v,e.setHeaders[v]),u)),e.setParams&&(h=Object.keys(e.setParams).reduce((_,v)=>_.set(v,e.setParams[v]),h)),new _v(t,r,s,{params:h,headers:u,context:m,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}}var uu=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(uu||{});class fP{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new Ss,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class GT extends fP{constructor(e={}){super(e)}type=uu.ResponseHeader;clone(e={}){return new GT({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class yv extends fP{body;constructor(e={}){super(e),this.body=void 0!==e.body?e.body:null}type=uu.Response;clone(e={}){return new yv({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class gg extends fP{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function pP(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let vv=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof _v)o=t;else{let c,u;c=i.headers instanceof Ss?i.headers:new Ss(i.headers),i.params&&(u=i.params instanceof lu?i.params:new lu({fromObject:i.params})),o=new _v(t,r,void 0!==i.body?i.body:null,{headers:c,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}const s=We(o).pipe(Td(c=>this.handler.handle(c)));if(t instanceof _v||"events"===i.observe)return s;const a=s.pipe(vr(c=>c instanceof yv));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe($e(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new se(2806,!1);return c.body}));case"blob":return a.pipe($e(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new se(2807,!1);return c.body}));case"text":return a.pipe($e(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new se(2808,!1);return c.body}));default:return a.pipe($e(c=>c.body))}case"response":return a;default:throw new se(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new lu).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,pP(i,r))}post(t,r,i={}){return this.request("POST",t,pP(i,r))}put(t,r,i={}){return this.request("PUT",t,pP(i,r))}static \u0275fac=function(r){return new(r||n)(me(UT))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();const jz=new pe("");function Hz(n,e){return e(n)}function dfe(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const ffe=new pe(""),Ev=new pe(""),pfe=new pe(""),$z=new pe("",{providedIn:"root",factory:()=>!0});function gfe(){let n=null;return(e,t)=>{null===n&&(n=(N(ffe,{optional:!0})??[]).reduceRight(dfe,Hz));const r=N(Es);if(N($z)){const o=r.add();return n(e,t).pipe(sy(()=>r.remove(o)))}return n(e,t)}}let Gz=(()=>{class n extends UT{backend;injector;chain=null;pendingTasks=N(Es);contributeToStability=N($z);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(Ev),...this.injector.get(pfe,[])]));this.chain=r.reduceRight((i,o)=>function hfe(n,e,t){return(r,i)=>bo(t,()=>e(r,o=>n(o,i)))}(i,o,this.injector),Hz)}if(this.contributeToStability){const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(sy(()=>this.pendingTasks.remove(r)))}return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(me(jT),me(cr))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();const vfe=/^\)\]\}',?\n/,Efe=RegExp(`^${hP}:`,"m");let Wz=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new se(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?Un(r.\u0275loadImpl()):We(null)).pipe(ur(()=>new R(o=>{const s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((D,A)=>s.setRequestHeader(D,A.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept",Vz),!t.headers.has(mv)){const D=t.detectContentTypeHeader();null!==D&&s.setRequestHeader(mv,D)}if(t.responseType){const D=t.responseType.toLowerCase();s.responseType="json"!==D?D:"text"}const a=t.serializeBody();let c=null;const u=()=>{if(null!==c)return c;const D=s.statusText||"OK",A=new Ss(s.getAllResponseHeaders()),O=function bfe(n){return"responseURL"in n&&n.responseURL?n.responseURL:Efe.test(n.getAllResponseHeaders())?n.getResponseHeader(hP):null}(s)||t.url;return c=new GT({headers:A,status:s.status,statusText:D,url:O}),c},h=()=>{let{headers:D,status:A,statusText:O,url:P}=u(),j=null;204!==A&&(j=typeof s.response>"u"?s.responseText:s.response),0===A&&(A=j?200:0);let X=A>=200&&A<300;if("json"===t.responseType&&"string"==typeof j){const ae=j;j=j.replace(vfe,"");try{j=""!==j?JSON.parse(j):null}catch(we){j=ae,X&&(X=!1,j={error:we,text:j})}}X?(o.next(new yv({body:j,headers:D,status:A,statusText:O,url:P||void 0})),o.complete()):o.error(new gg({error:j,headers:D,status:A,statusText:O,url:P||void 0}))},m=D=>{const{url:A}=u(),O=new gg({error:D,status:s.status||0,statusText:s.statusText||"Unknown Error",url:A||void 0});o.error(O)};let _=!1;const v=D=>{_||(o.next(u()),_=!0);let A={type:uu.DownloadProgress,loaded:D.loaded};D.lengthComputable&&(A.total=D.total),"text"===t.responseType&&s.responseText&&(A.partialText=s.responseText),o.next(A)},I=D=>{let A={type:uu.UploadProgress,loaded:D.loaded};D.lengthComputable&&(A.total=D.total),o.next(A)};return s.addEventListener("load",h),s.addEventListener("error",m),s.addEventListener("timeout",m),s.addEventListener("abort",m),t.reportProgress&&(s.addEventListener("progress",v),null!==a&&s.upload&&s.upload.addEventListener("progress",I)),s.send(a),o.next({type:uu.Sent}),()=>{s.removeEventListener("error",m),s.removeEventListener("abort",m),s.removeEventListener("load",h),s.removeEventListener("timeout",m),t.reportProgress&&(s.removeEventListener("progress",v),null!==a&&s.upload&&s.upload.removeEventListener("progress",I)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(me(cU))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();const _P=new pe(""),qz=new pe("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Kz=new pe("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Qz{}let wfe=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=sU(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(me(yr),me(qz))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();function Dfe(n,e){const t=n.url.toLowerCase();if(!N(_P)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=N(Qz).getToken(),i=N(Kz);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var du=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(du||{});function Cfe(...n){const e=[vv,Wz,Gz,{provide:UT,useExisting:Gz},{provide:jT,useFactory:()=>N(jz,{optional:!0})??N(Wz)},{provide:Ev,useValue:Dfe,multi:!0},{provide:_P,useValue:!0},{provide:Qz,useClass:wfe}];for(const t of n)e.push(...t.\u0275providers);return gs(e)}const Yz=new pe("");function Afe(){return function th(n,e){return{\u0275kind:n,\u0275providers:e}}(du.LegacyInterceptors,[{provide:Yz,useFactory:gfe},{provide:Ev,useExisting:Yz,multi:!0}])}let Sfe=(()=>{class n{success(t){const r=new Date,i=`${r.getMonth()+1}-${r.getDate()}-${r.getFullYear()}`;console.log(`${i}: ${t}`)}error(t){const r=new Date,i=`${r.getMonth()+1}-${r.getDate()}-${r.getFullYear()}`;console.warn(`${i}: ${t}`)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yP=(()=>{class n{http;alerts;constructor(t,r){this.http=t,this.alerts=r}getFile(t){var r=this;return(0,T.A)(function*(){const i=r.http.get(`assets/jsons/${t}`);try{return yield Mz(i)}catch{return r.alerts.error("Failed"),null}})()}static \u0275fac=function(r){return new(r||n)(me(vv),me(Sfe))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Jz={production:!1,firebase:{apiKey:"AIzaSyDEOKLsumgAaPLVzU7Mqje2PqheTlXwShc",authDomain:"hall-of-fame-c0fbc.firebaseapp.com",projectId:"hall-of-fame-c0fbc",storageBucket:"hall-of-fame-c0fbc.firebasestorage.app",messagingSenderId:"406579591585",appId:"1:406579591585:web:52bc73349d3cba98f573e0",measurementId:"G-ZPPLJ6VZ45"},twitch:{clientId:"gp762nuuoqcoxypju8c569th9wz7q5",oauth:"npofdqokooahh6ijf17dhjzgocqzw2"}},{twitch:Zz}=Jz;let Rfe=(()=>{class n{http;userList$=new Nt([]);constructor(t){this.http=t}_getUsers(t){var r=this;return(0,T.A)(function*(){let i=new Ss;i=i.append("Client-Id",Zz.clientId),i=i.append("Authorization",`Bearer ${Zz.oauth}`);const o=new URLSearchParams;t.forEach(c=>{o.append("login",c)});const s=`https://api.twitch.tv/helix/users?${o.toString()}`,a={method:"GET",headers:i,redirect:"follow"};try{const c=r.http.get(s,a).pipe($e(u=>u.data));return yield Mz(c)}catch{return Promise.resolve([])}})()}getUsers(t){return this._getUsers(t).then(r=>{this.userList$.next(r)}),this.userList$.asObservable()}static \u0275fac=function(r){return new(r||n)(me(vv))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Xz=(()=>{class n{userService;reader;twitchApi;userList$=new Nt([]);constructor(t,r,i){this.userService=t,this.reader=r,this.twitchApi=i,this._users()}getBadgesInfo(){return this.reader.getFile("badges.json")}_users(){let t;this.userService.listUsers().pipe(ur(r=>r&&r.length?(t=r,this.twitchApi.getUsers(r.map(i=>i.username))):[])).subscribe(r=>{if(!(r&&r.length||t&&t.length))return;const i=r.length?r:t;console.log({botUsers:t,twitchUsers:r});const o=i.map(s=>{const a=t.find(h=>h.id===s.id)||{},c=r.find(h=>h.id===s.id)||{};return new jse(c,a)});this.userList$.next(o)})}getUsers(){return this.userList$.asObservable()}static \u0275fac=function(r){return new(r||n)(me(Zhe),me(yP),me(Rfe))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),e8=(()=>{class n{loading=!1;loadingChange=new Xe(!1);progress={value:0,status:"is-error"};ngOnChanges(t){this.loading&&this.startLoading()}startLoading(){var t=this;return(0,T.A)(function*(){yield new Promise(i=>setTimeout(i,1e3));const r=[...Array.from({length:Math.ceil(10)},(i,o)=>1+2*o),...Array.from({length:Math.ceil(10)},(i,o)=>21+3*o),...Array.from({length:Math.ceil(10)},(i,o)=>51+5*o),100];for(let i of r)t.progress.value=i,i>51&&i<75&&(t.progress.status="is-warning"),i>75&&(t.progress.status="is-primary"),100==i&&(t.progress.status="is-success"),yield new Promise(o=>setTimeout(o,5*i));t.loading=!1,t.loadingChange.emit(t.loading)})()}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ur({type:n,selectors:[["app-loader"]],inputs:{loading:"loading"},outputs:{loadingChange:"loadingChange"},standalone:!1,features:[Ar],decls:4,vars:4,consts:[["id","loader-container",1,"position-absolute","top-50","start-50","translate-middle","mt-n5"],[1,"nes-text","mt-3"],["max","100",3,"value"]],template:function(r,i){1&r&&(Ne(0,"div",0)(1,"p",1),qt(2," Loading... "),Fe(),lr(3,"progress",2),Fe()),2&r&&(Ae(3),aS("nes-progress ",i.progress.status,""),pt("value",i.progress.value))},styles:["#loader-container[_ngcontent-%COMP%]{width:90%;margin-top:-3rem!important}"]})}return n})();function t8(...n){const e=Hb(n),{args:t,keys:r}=aj(n),i=new R(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let c=s,u=s;for(let h=0;h<s;h++){let m=!1;Yr(t[h]).subscribe(Je(o,_=>{m||(m=!0,u--),a[h]=_},()=>c--,void 0,()=>{(!c||!m)&&(u||o.next(r?cj(r,a):a),o.complete())}))}});return e?i.pipe(g1(e)):i}class mg{}let vP=(()=>{class n extends mg{getTranslation(t){return We({})}static \u0275fac=(()=>{let t;return function(i){return(t||(t=fn(n)))(i||n)}})();static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();class zT{}let EP=(()=>{class n{handle(t){return t.key}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();function WT(n,e){if(n===e)return!0;if(null===n||null===e)return!1;if(n!=n&&e!=e)return!0;const t=typeof n;let i,o,s;if(t==typeof e&&"object"==t){if(!Array.isArray(n)){if(Array.isArray(e))return!1;for(o in s=Object.create(null),n){if(!WT(n[o],e[o]))return!1;s[o]=!0}for(o in e)if(!(o in s)&&typeof e[o]<"u")return!1;return!0}if(!Array.isArray(e))return!1;if((i=n.length)==e.length){for(o=0;o<i;o++)if(!WT(n[o],e[o]))return!1;return!0}}return!1}function hu(n){return typeof n<"u"&&null!==n}function bv(n){return qT(n)&&!bP(n)&&null!==n}function qT(n){return"object"==typeof n}function bP(n){return Array.isArray(n)}function IP(n){return"string"==typeof n}function TP(n,e){const t=Object.assign({},n);return qT(n)?(qT(n)&&qT(e)&&Object.keys(e).forEach(r=>{bv(e[r])?r in n?t[r]=TP(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t):TP({},e)}function wP(n,e){const t=e.split(".");e="";do{e+=t.shift(),hu(n)&&hu(n[e])&&(bv(n[e])||bP(n[e])||!t.length)?(n=n[e],e=""):t.length?e+=".":n=void 0}while(t.length);return n}class Iv{}let DP=(()=>{class n extends Iv{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(t,r){return IP(t)?this.interpolateString(t,r):function Nfe(n){return"function"==typeof n}(t)?this.interpolateFunction(t,r):void 0}interpolateFunction(t,r){return t(r)}interpolateString(t,r){return r?t.replace(this.templateMatcher,(i,o)=>{const s=wP(r,o);return hu(s)?s:i}):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=fn(n)))(i||n)}})();static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();class Tv{}let CP=(()=>{class n extends Tv{compile(t,r){return t}compileTranslations(t,r){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=fn(n)))(i||n)}})();static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();class KT{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new Xe;onLangChange=new Xe;onDefaultLangChange=new Xe}const QT=new pe("ISOLATE_TRANSLATE_SERVICE"),YT=new pe("USE_DEFAULT_LANG"),JT=new pe("DEFAULT_LANGUAGE"),ZT=new pe("USE_EXTEND"),wv=n=>up(n)?n:We(n);let _g=(()=>{class n{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;extend;loadingTranslations;pending=!1;_translationRequests={};lastUseLanguage=null;get onTranslationChange(){return this.store.onTranslationChange}get onLangChange(){return this.store.onLangChange}get onDefaultLangChange(){return this.store.onDefaultLangChange}get defaultLang(){return this.store.defaultLang}set defaultLang(t){this.store.defaultLang=t}get currentLang(){return this.store.currentLang}set currentLang(t){this.store.currentLang=t}get langs(){return this.store.langs}set langs(t){this.store.langs=t}get translations(){return this.store.translations}set translations(t){this.store.translations=t}constructor(t,r,i,o,s,a=!0,c=!1,u=!1,h){this.store=t,this.currentLoader=r,this.compiler=i,this.parser=o,this.missingTranslationHandler=s,this.useDefaultLang=a,this.extend=u,c&&(this.store=new KT),h&&this.setDefaultLang(h)}setDefaultLang(t){if(t===this.defaultLang)return;const r=this.retrieveTranslations(t);typeof r<"u"?(null==this.defaultLang&&(this.defaultLang=t),r.pipe(Li(1)).subscribe(()=>{this.changeDefaultLang(t)})):this.changeDefaultLang(t)}getDefaultLang(){return this.defaultLang}use(t){if(this.lastUseLanguage=t,t===this.currentLang)return We(this.translations[t]);this.currentLang||(this.currentLang=t);const r=this.retrieveTranslations(t);return up(r)?(r.pipe(Li(1)).subscribe(()=>{this.changeLang(t)}),r):(this.changeLang(t),We(this.translations[t]))}changeLang(t){t===this.lastUseLanguage&&(this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]}),null==this.defaultLang&&this.changeDefaultLang(t))}retrieveTranslations(t){if(typeof this.translations[t]>"u"||this.extend)return this._translationRequests[t]=this._translationRequests[t]||this.loadAndCompileTranslations(t),this._translationRequests[t]}getTranslation(t){return this.loadAndCompileTranslations(t)}loadAndCompileTranslations(t){this.pending=!0;const r=this.currentLoader.getTranslation(t).pipe(CI(1),Li(1));return this.loadingTranslations=r.pipe($e(i=>this.compiler.compileTranslations(i,t)),CI(1),Li(1)),this.loadingTranslations.subscribe({next:i=>{this.translations[t]=this.extend&&this.translations[t]?{...i,...this.translations[t]}:i,this.updateLangs(),this.pending=!1},error:i=>{this.pending=!1}}),r}setTranslation(t,r,i=!1){const o=this.compiler.compileTranslations(r,t);this.translations[t]=(i||this.extend)&&this.translations[t]?TP(this.translations[t],o):o,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})}getLangs(){return this.langs}addLangs(t){const r=t.filter(i=>!this.langs.includes(i));r.length>0&&(this.langs=[...this.langs,...r])}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResultForKey(t,r,i){let o;if(t&&(o=this.runInterpolation(wP(t,r),i)),void 0===o&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(o=this.runInterpolation(wP(this.translations[this.defaultLang],r),i)),void 0===o){const s={key:r,translateService:this};typeof i<"u"&&(s.interpolateParams=i),o=this.missingTranslationHandler.handle(s)}return void 0!==o?o:r}runInterpolation(t,r){if(bP(t))return t.map(i=>this.runInterpolation(i,r));if(bv(t)){const i={};for(const o in t){const s=this.runInterpolation(t[o],r);void 0!==s&&(i[o]=s)}return i}return this.parser.interpolate(t,r)}getParsedResult(t,r,i){if(r instanceof Array){const o={};let s=!1;for(const c of r)o[c]=this.getParsedResultForKey(t,c,i),s=s||up(o[c]);return s?t8(r.map(c=>wv(o[c]))).pipe($e(c=>{const u={};return c.forEach((h,m)=>{u[r[m]]=h}),u})):o}return this.getParsedResultForKey(t,r,i)}get(t,r){if(!hu(t)||!t.length)throw new Error('Parameter "key" is required and cannot be empty');return this.pending?this.loadingTranslations.pipe(Td(i=>wv(this.getParsedResult(i,t,r)))):wv(this.getParsedResult(this.translations[this.currentLang],t,r))}getStreamOnTranslationChange(t,r){if(!hu(t)||!t.length)throw new Error('Parameter "key" is required and cannot be empty');return Id($b(()=>this.get(t,r)),this.onTranslationChange.pipe(ur(i=>{const o=this.getParsedResult(i.translations,t,r);return wv(o)})))}stream(t,r){if(!hu(t)||!t.length)throw new Error('Parameter "key" required');return Id($b(()=>this.get(t,r)),this.onLangChange.pipe(ur(i=>{const o=this.getParsedResult(i.translations,t,r);return wv(o)})))}instant(t,r){if(!hu(t)||0===t.length)throw new Error('Parameter "key" is required and cannot be empty');const i=this.getParsedResult(this.translations[this.currentLang],t,r);return up(i)?Array.isArray(t)?t.reduce((o,s)=>(o[s]=s,o),{}):t:i}set(t,r,i=this.currentLang){(function Mfe(n,e,t){const r=e.split(".");let i=n;for(let o=0;o<r.length;o++){const s=r[o];o===r.length-1?i[s]=t:((!i[s]||!bv(i[s]))&&(i[s]={}),i=i[s])}})(this.translations[i],t,IP(r)?this.compiler.compile(r,i):this.compiler.compileTranslations(r,i)),this.updateLangs(),this.onTranslationChange.emit({lang:i,translations:this.translations[i]})}changeDefaultLang(t){this.defaultLang=t,this.onDefaultLangChange.emit({lang:t,translations:this.translations[t]})}reloadLang(t){return this.resetLang(t),this.loadAndCompileTranslations(t)}resetLang(t){delete this._translationRequests[t],delete this.translations[t]}getBrowserLang(){if(typeof window>"u"||!window.navigator)return;const t=this.getBrowserCultureLang();return t?t.split(/[-_]/)[0]:void 0}getBrowserCultureLang(){if(!(typeof window>"u"||typeof window.navigator>"u"))return window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}static \u0275fac=function(r){return new(r||n)(me(KT),me(mg),me(Tv),me(Iv),me(zT),me(YT),me(QT),me(ZT),me(JT))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),XT=(()=>{class n{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(t,r){this.translate=t,this._ref=r}updateValue(t,r,i){const o=s=>{this.value=void 0!==s?s:t,this.lastKey=t,this._ref.markForCheck()};if(i){const s=this.translate.getParsedResult(i,t,r);up(s)?s.subscribe(o):o(s)}this.translate.get(t,r).subscribe(o)}transform(t,...r){if(!t||!t.length)return t;if(WT(t,this.lastKey)&&WT(r,this.lastParams))return this.value;let i;if(hu(r[0])&&r.length)if(IP(r[0])&&r[0].length){const o=r[0].replace(/(')?([a-zA-Z0-9_]+)(')?(\s)?:/g,'"$2":').replace(/:(\s)?(')(.*?)(')/g,':"$3"');try{i=JSON.parse(o)}catch(s){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${r[0]}`)}}else bv(r[0])&&(i=r[0]);return this.lastKey=t,this.lastParams=r,this.updateValue(t,i),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(o=>{this.lastKey&&o.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(t,i,o.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(o=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,i,o.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,i))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(r){return new(r||n)(ve(_g,16),ve(Qo,16))};static \u0275pipe=oo({name:"translate",type:n,pure:!1});static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})(),ew=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[t.loader||{provide:mg,useClass:vP},t.compiler||{provide:Tv,useClass:CP},t.parser||{provide:Iv,useClass:DP},t.missingTranslationHandler||{provide:zT,useClass:EP},KT,{provide:QT,useValue:t.isolate},{provide:YT,useValue:t.useDefaultLang},{provide:ZT,useValue:t.extend},{provide:JT,useValue:t.defaultLanguage},_g]}}static forChild(t={}){return{ngModule:n,providers:[t.loader||{provide:mg,useClass:vP},t.compiler||{provide:Tv,useClass:CP},t.parser||{provide:Iv,useClass:DP},t.missingTranslationHandler||{provide:zT,useClass:EP},{provide:QT,useValue:t.isolate},{provide:YT,useValue:t.useDefaultLang},{provide:ZT,useValue:t.extend},{provide:JT,useValue:t.defaultLanguage},_g]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Jt({type:n});static \u0275inj=Rt({})}return n})();function Pfe(n,e){if(1&n&&(Pa(0),Ne(1,"td"),qt(2),Fe(),Oa()),2&n){const t=e.$implicit,r=ze().$implicit,i=ze(2);Ae(),Ml(t),Ae(),Nr(i.parseCell(t,r))}}function Ofe(n,e){if(1&n&&(Ne(0,"tr"),wt(1,Pfe,3,4,"ng-container",10),Fe()),2&n){const t=ze(2);Ae(),pt("ngForOf",t.getCells("loyitePoints"))}}function xfe(n,e){if(1&n&&(Pa(0),Ne(1,"td"),qt(2),Fe(),Oa()),2&n){const t=e.$implicit,r=ze().$implicit,i=ze(2);Ae(),Ml(t),Ae(),Nr(i.parseCell(t,r))}}function kfe(n,e){if(1&n&&(Ne(0,"tr"),wt(1,xfe,3,4,"ng-container",10),Fe()),2&n){const t=ze(2);Ae(),pt("ngForOf",t.getCells("badges"))}}function Ffe(n,e){if(1&n&&(Pa(0),Ne(1,"div",4)(2,"p",5),qt(3,"Points"),Fe(),Ne(4,"table",6)(5,"thead")(6,"tr")(7,"th",7),qt(8,"Rank"),Fe(),Ne(9,"th",8),qt(10,"User"),Fe(),Ne(11,"th",9),qt(12,'"SCORE"'),Fe()()(),Ne(13,"tbody"),wt(14,Ofe,2,1,"tr",10),Fe()()(),Ne(15,"div",11)(16,"p",12),qt(17),No(18,"translate"),Fe(),Ne(19,"table",6)(20,"thead")(21,"tr")(22,"th",7),qt(23),No(24,"translate"),Fe(),Ne(25,"th",8),qt(26),No(27,"translate"),Fe(),Ne(28,"th",13),qt(29),No(30,"translate"),Fe()()(),Ne(31,"tbody"),wt(32,kfe,2,1,"tr",10),Fe()()(),Oa()),2&n){const t=ze();Ae(14),pt("ngForOf",t.leaderboards.loyitePoints),Ae(3),Nr(Mo(18,6,t.tableBadgesTitle)),Ae(6),Nr(Mo(24,8,t.tableCellsTitles.rank)),Ae(3),Nr(Mo(27,10,t.tableCellsTitles.user)),Ae(3),Nr(Mo(30,12,t.tableCellsTitles.badges)),Ae(3),pt("ngForOf",t.leaderboards.gameBadges)}}function Lfe(n,e){if(1&n){const t=ao();Ne(0,"div",14)(1,"app-loader",15),fb("loadingChange",function(i){Vr(t);const o=ze();return yS(o.loading,i)||(o.loading=i),gr(i)}),Fe()()}if(2&n){const t=ze();Ae(),hb("loading",t.loading)}}let Vfe=(()=>{class n{badgeSvc;loading=!1;leaderboards={loyitePoints:[{rank:1,name:"ArthurKnight",points:1520},{rank:2,name:"LadyElira",points:1485},{rank:3,name:"ShadowHex",points:1450},{rank:4,name:"BlazeWolf",points:1400},{rank:5,name:"Nexarion",points:1370},{rank:6,name:"FrostNova",points:1340},{rank:7,name:"MiraFlare",points:1325},{rank:8,name:"GrimVox",points:1300},{rank:9,name:"ZenithOne",points:1285},{rank:10,name:"EchoMist",points:1270},{rank:11,name:"Valcrys",points:1240},{rank:12,name:"LunaSpark",points:1215},{rank:13,name:"IronCrow",points:1200},{rank:14,name:"SableFox",points:1180},{rank:15,name:"CrystalWave",points:1165},{rank:16,name:"PyroJin",points:1150},{rank:17,name:"RavenLock",points:1135},{rank:18,name:"StormHowl",points:1120},{rank:19,name:"DuskSpire",points:1105},{rank:20,name:"SolarMagi",points:1090},{rank:21,name:"QuorraRay",points:1075},{rank:22,name:"ThornBane",points:1060},{rank:23,name:"EmberFall",points:1040},{rank:24,name:"NightShard",points:1020},{rank:25,name:"ZephyrRune",points:1e3}],gameBadges:[{rank:1,name:"ArthurKnight",badges:12},{rank:2,name:"LadyElira",badges:11},{rank:2,name:"ShadowHex",badges:11},{rank:4,name:"BlazeWolf",badges:10},{rank:4,name:"Nexarion",badges:10},{rank:4,name:"FrostNova",badges:10},{rank:7,name:"MiraFlare",badges:9},{rank:7,name:"GrimVox",badges:9},{rank:9,name:"ZenithOne",badges:8},{rank:9,name:"EchoMist",badges:8},{rank:9,name:"Valcrys",badges:8},{rank:12,name:"LunaSpark",badges:7},{rank:12,name:"IronCrow",badges:7},{rank:12,name:"SableFox",badges:7},{rank:15,name:"CrystalWave",badges:6},{rank:15,name:"PyroJin",badges:6},{rank:17,name:"RavenLock",badges:5},{rank:17,name:"StormHowl",badges:5},{rank:17,name:"DuskSpire",badges:5},{rank:20,name:"SolarMagi",badges:4},{rank:20,name:"QuorraRay",badges:4},{rank:22,name:"ThornBane",badges:3},{rank:22,name:"EmberFall",badges:3},{rank:24,name:"NightShard",badges:2},{rank:24,name:"ZephyrRune",badges:2}]};tableCells=["rank","name","points","badges"];tableCellsTitles={rank:"LEADERBOARDS.CELLS.RANK",score:"LEADERBOARDS.CELLS.SCORE",user:"LEADERBOARDS.CELLS.USER",badges:"LEADERBOARDS.CELLS.BADGES"};tableBadgesTitle="LEADERBOARDS.BADGES.TITLE";constructor(t){this.badgeSvc=t}ngOnDestroy(){this.loading=!1}ngOnInit(){this.loading=!0,this.badgeSvc.getUsers().subscribe(t=>{t=t.sort((r,i)=>r.totalBadges>i.totalBadges?0:1),this.leaderboards.gameBadges=t.map((r,i)=>{const{displayName:o,totalBadges:s}=r;return{badges:s,name:o,rank:i+1}})})}parseCell(t,r){return"rank"===t||"badges"==t?r[t].toString().padStart(4,"0"):r[t]}getCells(t){return"loyitePoints"===t?this.tableCells.filter(r=>"badges"!==r):"badges"===t?this.tableCells.filter(r=>"points"!==r):[]}static \u0275fac=function(r){return new(r||n)(ve(Xz))};static \u0275cmp=Ur({type:n,selectors:[["app-leaderboard-view"]],standalone:!1,decls:5,vars:2,consts:[["loadingContent",""],[1,"container-fluid","pt-5"],[1,"row"],[4,"ngIf","ngIfElse"],[1,"col","nes-container","is-rounded","with-title","me-5","d-none"],[1,"title","nes-text"],[1,"border-0","leaderboards","points-table","w-50"],[1,"rank"],[1,"name"],[1,"points"],[4,"ngFor","ngForOf"],[1,"col","nes-container","is-rounded","with-title"],[1,"title"],[1,"badges"],[1,"col-12"],[3,"loadingChange","loading"]],template:function(r,i){if(1&r&&(Ne(0,"div",1)(1,"div",2),wt(2,Ffe,33,14,"ng-container",3)(3,Lfe,2,1,"ng-template",null,0,Ts),Fe()()),2&r){const o=Zs(4);Ae(2),pt("ngIf",!i.loading)("ngIfElse",o)}},dependencies:[cp,lp,e8,XT],styles:[".leaderboards[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.leaderboards[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]{padding-left:25px}.leaderboards[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:3px solid;padding-bottom:5px}.leaderboards[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]{padding-top:20px}"]})}return n})();const Bfe=["addListener","removeListener"],Ufe=["addEventListener","removeEventListener"],jfe=["on","off"];function Ii(n,e,t,r){if(St(t)&&(r=t,t=void 0),r)return Ii(n,e,t).pipe(g1(r));const[i,o]=function Gfe(n){return St(n.addEventListener)&&St(n.removeEventListener)}(n)?Ufe.map(s=>a=>n[s](e,a,t)):function Hfe(n){return St(n.addListener)&&St(n.removeListener)}(n)?Bfe.map(n8(n,e)):function $fe(n){return St(n.on)&&St(n.off)}(n)?jfe.map(n8(n,e)):[];if(!i&&f1(n))return Jr(s=>Ii(s,e,t))(Yr(n));if(!i)throw new TypeError("Invalid event target");return new R(s=>{const a=(...c)=>s.next(1<c.length?c:c[0]);return i(a),()=>o(a)})}function n8(n,e){return t=>r=>n[t](e,r)}function r8(n=0,e,t=Kse){let r=-1;return null!=e&&(sj(e)?t=e:r=e),new R(i=>{let o=function zfe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}const{isArray:Wfe}=Array;function i8(n){return 1===n.length&&Wfe(n[0])?n[0]:n}function o8(...n){return 1===(n=i8(n)).length?Yr(n[0]):new R(function qfe(n){return e=>{let t=[];for(let r=0;t&&!e.closed&&r<n.length;r++)t.push(Yr(n[r]).subscribe(Je(e,i=>{if(t){for(let o=0;o<t.length;o++)o!==r&&t[o].unsubscribe();t=null}e.next(i)})))}}(n))}function AP(...n){const e=Hb(n),t=i8(n);return t.length?new R(r=>{let i=t.map(()=>[]),o=t.map(()=>!1);r.add(()=>{i=o=null});for(let s=0;!r.closed&&s<t.length;s++)Yr(t[s]).subscribe(Je(r,a=>{if(i[s].push(a),i.every(c=>c.length)){const c=i.map(u=>u.shift());r.next(e?e(...c):c),i.some((u,h)=>!u.length&&o[h])&&r.complete()}},()=>{o[s]=!0,!i[s].length&&r.complete()}));return()=>{i=o=null}}):Po}function SP(...n){const e=Hb(n);return Lt((t,r)=>{const i=n.length,o=new Array(i);let s=n.map(()=>!1),a=!1;for(let c=0;c<i;c++)Yr(n[c]).subscribe(Je(r,u=>{o[c]=u,!a&&!s[c]&&(s[c]=!0,(a=s.every(Ki))&&(s=null))},us));t.subscribe(Je(r,c=>{if(a){const u=[c,...o];r.next(e?e(...u):u)}}))})}function s8(n,e){return e?t=>Id(e.pipe(Li(1),function Qfe(){return Lt((n,e)=>{n.subscribe(Je(e,us))})}()),t.pipe(s8(n))):Jr((t,r)=>Yr(n(t,r)).pipe(Li(1),function Yfe(n){return $e(()=>n)}(t)))}let a8=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(ve(Ca),ve(tn))};static \u0275dir=ke({type:n})}return n})(),nh=(()=>{class n extends a8{static \u0275fac=(()=>{let t;return function(i){return(t||(t=fn(n)))(i||n)}})();static \u0275dir=ke({type:n,features:[on]})}return n})();const Rs=new pe(""),epe={provide:Rs,useExisting:Gt(()=>tw),multi:!0},npe=new pe("");let tw=(()=>{class n extends a8{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,null==this._compositionMode&&(this._compositionMode=!function tpe(){const n=xl()?xl().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(ve(Ca),ve(tn),ve(npe,8))};static \u0275dir=ke({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Ft("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Rn([epe]),on]})}return n})();const Ti=new pe(""),fu=new pe("");function _8(n){return null!=n}function y8(n){return N_(n)?Un(n):n}function v8(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function E8(n,e){return e.map(t=>t(n))}function b8(n){return n.map(e=>function ipe(n){return!n.validate}(e)?e:t=>e.validate(t))}function MP(n){return null!=n?function I8(n){if(!n)return null;const e=n.filter(_8);return 0==e.length?null:function(t){return v8(E8(t,e))}}(b8(n)):null}function PP(n){return null!=n?function T8(n){if(!n)return null;const e=n.filter(_8);return 0==e.length?null:function(t){return t8(E8(t,e).map(y8)).pipe($e(v8))}}(b8(n)):null}function w8(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function D8(n){return n._rawValidators}function C8(n){return n._rawAsyncValidators}function OP(n){return n?Array.isArray(n)?n:[n]:[]}function rw(n,e){return Array.isArray(n)?n.includes(e):n===e}function A8(n,e){const t=OP(e);return OP(n).forEach(i=>{rw(t,i)||t.push(i)}),t}function S8(n,e){return OP(e).filter(t=>!rw(n,t))}class R8{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=MP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=PP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class pu extends R8{_parent=null;name=null;valueAccessor=null}class N8{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let M8=(()=>{class n extends N8{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ve(pu,2))};static \u0275dir=ke({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&sn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[on]})}return n})();const Dv="VALID",ow="INVALID",yg="PENDING",Cv="DISABLED";class vg{}class O8 extends vg{value;source;constructor(e,t){super(),this.value=e,this.source=t}}class FP extends vg{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}}class LP extends vg{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}}class sw extends vg{status;source;constructor(e,t){super(),this.status=e,this.source=t}}function aw(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class UP{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return jr(this.statusReactive)}set status(e){jr(()=>this.statusReactive.set(e))}_status=Pc(()=>this.statusReactive());statusReactive=Ia(void 0);get valid(){return this.status===Dv}get invalid(){return this.status===ow}get pending(){return this.status==yg}get disabled(){return this.status===Cv}get enabled(){return this.status!==Cv}errors;get pristine(){return jr(this.pristineReactive)}set pristine(e){jr(()=>this.pristineReactive.set(e))}_pristine=Pc(()=>this.pristineReactive());pristineReactive=Ia(!0);get dirty(){return!this.pristine}get touched(){return jr(this.touchedReactive)}set touched(e){jr(()=>this.touchedReactive.set(e))}_touched=Pc(()=>this.touchedReactive());touchedReactive=Ia(!1);get untouched(){return!this.touched}_events=new Re;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(A8(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(A8(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(S8(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(S8(e,this._rawAsyncValidators))}hasValidator(e){return rw(this._rawValidators,e)}hasAsyncValidator(e){return rw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const t=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new LP(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){const t=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&!1!==e.emitEvent&&this._events.next(new LP(!1,r))}markAsDirty(e={}){const t=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new FP(!1,r))}markAsPristine(e={}){const t=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&!1!==e.emitEvent&&this._events.next(new FP(!0,r))}markAsPending(e={}){this.status=yg;const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new sw(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:t})}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Cv,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new O8(this.value,r)),this._events.next(new sw(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Dv,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Dv||this.status===yg)&&this._runAsyncValidator(r,e.emitEvent)}const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new O8(this.value,t)),this._events.next(new sw(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:t})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Cv:Dv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=yg,this._hasOwnPendingAsyncValidator={emitEvent:!1!==t};const r=y8(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent,this,t.shouldHaveEmitted)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new sw(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Xe,this.statusChanges=new Xe}_calculateStatus(){return this._allControlsDisabled()?Cv:this.errors?ow:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yg)?yg:this._anyControlsHaveStatus(ow)?ow:Dv}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new FP(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new LP(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){aw(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function hpe(n){return Array.isArray(n)?MP(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function fpe(n){return Array.isArray(n)?PP(n):n||null}(this._rawAsyncValidators)}}const Eg=new pe("",{providedIn:"root",factory:()=>cw}),cw="always";function Av(n,e,t=cw){(function HP(n,e){const t=D8(n);null!==e.validator?n.setValidators(w8(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=C8(n);null!==e.asyncValidator?n.setAsyncValidators(w8(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();dw(e._rawValidators,i),dw(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function mpe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&V8(n,e)})}(n,e),function ype(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function _pe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&V8(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function gpe(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function uw(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),function hw(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=D8(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const i=C8(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}const r=()=>{};return dw(e._rawValidators,r),dw(e._rawAsyncValidators,r),t}(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function dw(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function V8(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function j8(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function H8(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}Promise.resolve();const WP=class extends UP{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(function VP(n){return(aw(n)?n.validators:n)||null}(t),function BP(n,e){return(aw(e)?e.asyncValidators:n)||null}(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),aw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=H8(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){j8(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){j8(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){H8(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};Promise.resolve();const Mpe={provide:Rs,useExisting:Gt(()=>qP),multi:!0};let Ppe=(()=>{class n{_accessors=[];add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t)return void this._accessors.splice(r,1)}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return!!t[0].control&&t[0]._parent===r._control._parent&&t[1].name===r.name}static \u0275fac=function(r){return new(r||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qP=(()=>{class n extends nh{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=N(Eg,{optional:!0})??cw;constructor(t,r,i,o){super(t,r),this._registry=i,this._injector=o}ngOnInit(){this._control=this._injector.get(pu),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(r){return new(r||n)(ve(Ca),ve(tn),ve(Ppe),ve(Wt))};static \u0275dir=ke({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){1&r&&Ft("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[Rn([Mpe]),on]})}return n})();const KP=new pe(""),xpe={provide:pu,useExisting:Gt(()=>QP)};let QP=(()=>{class n extends pu{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(t){}model;update=new Xe;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=s,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=function zP(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===tw?t=o:function bpe(n){return Object.getPrototypeOf(n.constructor)===nh}(o)?r=o:i=o}),i||r||t||null}(0,i)}ngOnChanges(t){if(this._isControlChanged(t)){const r=t.form.previousValue;r&&uw(r,this,!1),Av(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}(function GP(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)})(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&uw(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}static \u0275fac=function(r){return new(r||n)(ve(Ti,10),ve(fu,10),ve(Rs,10),ve(KP,8),ve(Eg,8))};static \u0275dir=ke({type:n,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[Rn([xpe]),on,Ar]})}return n})(),Xpe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Jt({type:n});static \u0275inj=Rt({})}return n})(),s5=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:KP,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Eg,useValue:t.callSetDisabledState??cw}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Jt({type:n});static \u0275inj=Rt({imports:[Xpe]})}return n})();var tge={left:"right",right:"left",bottom:"top",top:"bottom"};function yw(n){return n.replace(/left|right|bottom|top/g,function(e){return tge[e]})}function qa(n){return n.split("-")[0]}var nge={start:"end",end:"start"};function a5(n){return n.replace(/start|end/g,function(e){return nge[e]})}var rs="top",sa="bottom",aa="right",is="left",XP="auto",Nv=[rs,sa,aa,is],bg="start",Mv="end",c5="viewport",Pv="popper",l5=Nv.reduce(function(n,e){return n.concat([e+"-"+bg,e+"-"+Mv])},[]),u5=[].concat(Nv,[XP]).reduce(function(n,e){return n.concat([e,e+"-"+bg,e+"-"+Mv])},[]),pge=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function os(n){if(null==n)return window;if("[object Window]"!==n.toString()){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function ih(n){return n instanceof os(n).Element||n instanceof Element}function Ns(n){return n instanceof os(n).HTMLElement||n instanceof HTMLElement}function eO(n){return!(typeof ShadowRoot>"u")&&(n instanceof os(n).ShadowRoot||n instanceof ShadowRoot)}function gu(n){return((ih(n)?n.ownerDocument:n.document)||window.document).documentElement}var oh=Math.max,vw=Math.min,Ig=Math.round;function tO(){var n=navigator.userAgentData;return null!=n&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function d5(){return!/^((?!chrome|android).)*safari/i.test(tO())}function Tg(n,e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var r=n.getBoundingClientRect(),i=1,o=1;e&&Ns(n)&&(i=n.offsetWidth>0&&Ig(r.width)/n.offsetWidth||1,o=n.offsetHeight>0&&Ig(r.height)/n.offsetHeight||1);var a=(ih(n)?os(n):window).visualViewport,c=!d5()&&t,u=(r.left+(c&&a?a.offsetLeft:0))/i,h=(r.top+(c&&a?a.offsetTop:0))/o,m=r.width/i,_=r.height/o;return{width:m,height:_,top:h,right:u+m,bottom:h+_,left:u,x:u,y:h}}function nO(n){var e=os(n);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function rO(n){return Tg(gu(n)).left+nO(n).scrollLeft}function qc(n){return os(n).getComputedStyle(n)}function Ka(n){return n?(n.nodeName||"").toLowerCase():null}function Ew(n){return"html"===Ka(n)?n:n.assignedSlot||n.parentNode||(eO(n)?n.host:null)||gu(n)}function iO(n){var e=qc(n);return/auto|scroll|overlay|hidden/.test(e.overflow+e.overflowY+e.overflowX)}function h5(n){return["html","body","#document"].indexOf(Ka(n))>=0?n.ownerDocument.body:Ns(n)&&iO(n)?n:h5(Ew(n))}function Ov(n,e){var t;void 0===e&&(e=[]);var r=h5(n),i=r===(null==(t=n.ownerDocument)?void 0:t.body),o=os(r),s=i?[o].concat(o.visualViewport||[],iO(r)?r:[]):r,a=e.concat(s);return i?a:a.concat(Ov(Ew(s)))}function _ge(n){return["table","td","th"].indexOf(Ka(n))>=0}function f5(n){return Ns(n)&&"fixed"!==qc(n).position?n.offsetParent:null}function xv(n){for(var e=os(n),t=f5(n);t&&_ge(t)&&"static"===qc(t).position;)t=f5(t);return t&&("html"===Ka(t)||"body"===Ka(t)&&"static"===qc(t).position)?e:t||function yge(n){var e=/firefox/i.test(tO());if(/Trident/i.test(tO())&&Ns(n)&&"fixed"===qc(n).position)return null;var i=Ew(n);for(eO(i)&&(i=i.host);Ns(i)&&["html","body"].indexOf(Ka(i))<0;){var o=qc(i);if("none"!==o.transform||"none"!==o.perspective||"paint"===o.contain||-1!==["transform","perspective"].indexOf(o.willChange)||e&&"filter"===o.willChange||e&&o.filter&&"none"!==o.filter)return i;i=i.parentNode}return null}(n)||e}function p5(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&eO(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function oO(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function g5(n,e,t){return e===c5?oO(function gge(n,e){var t=os(n),r=gu(n),i=t.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,c=0;if(i){o=i.width,s=i.height;var u=d5();(u||!u&&"fixed"===e)&&(a=i.offsetLeft,c=i.offsetTop)}return{width:o,height:s,x:a+rO(n),y:c}}(n,t)):ih(e)?function vge(n,e){var t=Tg(n,!1,"fixed"===e);return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}(e,t):oO(function mge(n){var e,t=gu(n),r=nO(n),i=null==(e=n.ownerDocument)?void 0:e.body,o=oh(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=oh(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+rO(n),c=-r.scrollTop;return"rtl"===qc(i||t).direction&&(a+=oh(t.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:c}}(gu(n)))}function wg(n){return n.split("-")[1]}function sO(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function m5(n){var c,e=n.reference,t=n.element,r=n.placement,i=r?qa(r):null,o=r?wg(r):null,s=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2;switch(i){case rs:c={x:s,y:e.y-t.height};break;case sa:c={x:s,y:e.y+e.height};break;case aa:c={x:e.x+e.width,y:a};break;case is:c={x:e.x-t.width,y:a};break;default:c={x:e.x,y:e.y}}var u=i?sO(i):null;if(null!=u){var h="y"===u?"height":"width";switch(o){case bg:c[u]=c[u]-(e[h]/2-t[h]/2);break;case Mv:c[u]=c[u]+(e[h]/2-t[h]/2)}}return c}function y5(n){return Object.assign({},{top:0,right:0,bottom:0,left:0},n)}function v5(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}function aO(n,e){void 0===e&&(e={});var r=e.placement,i=void 0===r?n.placement:r,o=e.strategy,s=void 0===o?n.strategy:o,a=e.boundary,c=void 0===a?"clippingParents":a,u=e.rootBoundary,h=void 0===u?c5:u,m=e.elementContext,_=void 0===m?Pv:m,v=e.altBoundary,I=void 0!==v&&v,D=e.padding,A=void 0===D?0:D,O=y5("number"!=typeof A?A:v5(A,Nv)),j=n.rects.popper,X=n.elements[I?_===Pv?"reference":Pv:_],ae=function bge(n,e,t,r){var i="clippingParents"===e?function Ege(n){var e=Ov(Ew(n)),r=["absolute","fixed"].indexOf(qc(n).position)>=0&&Ns(n)?xv(n):n;return ih(r)?e.filter(function(i){return ih(i)&&p5(i,r)&&"body"!==Ka(i)}):[]}(n):[].concat(e),o=[].concat(i,[t]),a=o.reduce(function(c,u){var h=g5(n,u,r);return c.top=oh(h.top,c.top),c.right=vw(h.right,c.right),c.bottom=vw(h.bottom,c.bottom),c.left=oh(h.left,c.left),c},g5(n,o[0],r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(ih(X)?X:X.contextElement||gu(n.elements.popper),c,h,s),we=Tg(n.elements.reference),k=m5({reference:we,element:j,strategy:"absolute",placement:i}),S=oO(Object.assign({},j,k)),F=_===Pv?S:we,U={top:ae.top-F.top+O.top,bottom:F.bottom-ae.bottom+O.bottom,left:ae.left-F.left+O.left,right:F.right-ae.right+O.right},H=n.modifiersData.offset;if(_===Pv&&H){var W=H[i];Object.keys(U).forEach(function(x){var Ci=[aa,sa].indexOf(x)>=0?1:-1,ss=[rs,sa].indexOf(x)>=0?"y":"x";U[x]+=W[ss]*Ci})}return U}const Dge={name:"flip",enabled:!0,phase:"main",fn:function wge(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var i=t.mainAxis,o=void 0===i||i,s=t.altAxis,a=void 0===s||s,c=t.fallbackPlacements,u=t.padding,h=t.boundary,m=t.rootBoundary,_=t.altBoundary,v=t.flipVariations,I=void 0===v||v,D=t.allowedAutoPlacements,A=e.options.placement,O=qa(A),j=c||(O!==A&&I?function Tge(n){if(qa(n)===XP)return[];var e=yw(n);return[a5(n),e,a5(e)]}(A):[yw(A)]),X=[A].concat(j).reduce(function(mu,Vo){return mu.concat(qa(Vo)===XP?function Ige(n,e){void 0===e&&(e={});var i=e.boundary,o=e.rootBoundary,s=e.padding,a=e.flipVariations,c=e.allowedAutoPlacements,u=void 0===c?u5:c,h=wg(e.placement),m=h?a?l5:l5.filter(function(I){return wg(I)===h}):Nv,_=m.filter(function(I){return u.indexOf(I)>=0});0===_.length&&(_=m);var v=_.reduce(function(I,D){return I[D]=aO(n,{placement:D,boundary:i,rootBoundary:o,padding:s})[qa(D)],I},{});return Object.keys(v).sort(function(I,D){return v[I]-v[D]})}(e,{placement:Vo,boundary:h,rootBoundary:m,padding:u,flipVariations:I,allowedAutoPlacements:D}):Vo)},[]),ae=e.rects.reference,we=e.rects.popper,k=new Map,S=!0,F=X[0],U=0;U<X.length;U++){var H=X[U],W=qa(H),x=wg(H)===bg,Ci=[rs,sa].indexOf(W)>=0,ss=Ci?"width":"height",go=aO(e,{placement:H,boundary:h,rootBoundary:m,altBoundary:_,padding:u}),Ai=Ci?x?aa:is:x?sa:rs;ae[ss]>we[ss]&&(Ai=yw(Ai));var Qa=yw(Ai),la=[];if(o&&la.push(go[W]<=0),a&&la.push(go[Ai]<=0,go[Qa]<=0),la.every(function(mu){return mu})){F=H,S=!1;break}k.set(H,la)}if(S)for(var Uv=function(Vo){var ph=X.find(function(Ya){var Kc=k.get(Ya);if(Kc)return Kc.slice(0,Vo).every(function(jv){return jv})});if(ph)return F=ph,"break"},Lo=I?3:1;Lo>0&&"break"!==Uv(Lo);Lo--);e.placement!==F&&(e.modifiersData[r]._skip=!0,e.placement=F,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function kv(n,e,t){return oh(n,vw(e,t))}function cO(n){var e=Tg(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}const Rge={name:"preventOverflow",enabled:!0,phase:"main",fn:function Sge(n){var e=n.state,t=n.options,r=n.name,i=t.mainAxis,o=void 0===i||i,s=t.altAxis,a=void 0!==s&&s,_=t.tether,v=void 0===_||_,I=t.tetherOffset,D=void 0===I?0:I,A=aO(e,{boundary:t.boundary,rootBoundary:t.rootBoundary,padding:t.padding,altBoundary:t.altBoundary}),O=qa(e.placement),P=wg(e.placement),j=!P,X=sO(O),ae=function Cge(n){return"x"===n?"y":"x"}(X),we=e.modifiersData.popperOffsets,k=e.rects.reference,S=e.rects.popper,F="function"==typeof D?D(Object.assign({},e.rects,{placement:e.placement})):D,U="number"==typeof F?{mainAxis:F,altAxis:F}:Object.assign({mainAxis:0,altAxis:0},F),H=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,W={x:0,y:0};if(we){if(o){var x,Ci="y"===X?rs:is,ss="y"===X?sa:aa,go="y"===X?"height":"width",Ai=we[X],Qa=Ai+A[Ci],la=Ai-A[ss],fh=v?-S[go]/2:0,Uv=P===bg?k[go]:S[go],Lo=P===bg?-S[go]:-k[go],Or=e.elements.arrow,mu=v&&Or?cO(Or):{width:0,height:0},Vo=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ph=Vo[Ci],Ya=Vo[ss],Kc=kv(0,k[go],mu[go]),jv=j?k[go]/2-fh-Kc-ph-U.mainAxis:Uv-Kc-ph-U.mainAxis,Sg=j?-k[go]/2+fh+Kc+Ya+U.mainAxis:Lo+Kc+Ya+U.mainAxis,_u=e.elements.arrow&&xv(e.elements.arrow),Hv=_u?"y"===X?_u.clientTop||0:_u.clientLeft||0:0,Rg=null!=(x=H?.[X])?x:0,Gv=Ai+Sg-Rg,zv=kv(v?vw(Qa,Ai+jv-Rg-Hv):Qa,Ai,v?oh(la,Gv):la);we[X]=zv,W[X]=zv-Ai}if(a){var Wv,Ja=we[ae],yu="y"===ae?"height":"width",qv=Ja+A["x"===X?rs:is],kw=Ja-A["x"===X?sa:aa],gh=-1!==[rs,is].indexOf(O),Ng=null!=(Wv=H?.[ae])?Wv:0,Mg=gh?qv:Ja-k[yu]-S[yu]-Ng+U.altAxis,Xr=gh?Ja+k[yu]+S[yu]-Ng-U.altAxis:kw,ui=v&&gh?function Age(n,e,t){var r=kv(n,e,t);return r>t?t:r}(Mg,Ja,Xr):kv(v?Mg:qv,Ja,v?Xr:kw);we[ae]=ui,W[ae]=ui-Ja}e.modifiersData[r]=W}},requiresIfExists:["offset"]},Oge={name:"arrow",enabled:!0,phase:"main",fn:function Mge(n){var e,t=n.state,r=n.name,i=n.options,o=t.elements.arrow,s=t.modifiersData.popperOffsets,a=qa(t.placement),c=sO(a),h=[is,aa].indexOf(a)>=0?"height":"width";if(o&&s){var m=function(e,t){return y5("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:v5(e,Nv))}(i.padding,t),_=cO(o),v="y"===c?rs:is,I="y"===c?sa:aa,D=t.rects.reference[h]+t.rects.reference[c]-s[c]-t.rects.popper[h],A=s[c]-t.rects.reference[c],O=xv(o),P=O?"y"===c?O.clientHeight||0:O.clientWidth||0:0,we=P/2-_[h]/2+(D/2-A/2),k=kv(m[v],we,P-_[h]-m[I]);t.modifiersData[r]=((e={})[c]=k,e.centerOffset=k-we,e)}},effect:function Pge(n){var e=n.state,r=n.options.element,i=void 0===r?"[data-popper-arrow]":r;null!=i&&("string"==typeof i&&!(i=e.elements.popper.querySelector(i))||p5(e.elements.popper,i)&&(e.elements.arrow=i))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Lge(n,e,t){void 0===t&&(t=!1);var r=Ns(e),i=Ns(e)&&function Fge(n){var e=n.getBoundingClientRect(),t=Ig(e.width)/n.offsetWidth||1,r=Ig(e.height)/n.offsetHeight||1;return 1!==t||1!==r}(e),o=gu(e),s=Tg(n,i,t),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!t)&&(("body"!==Ka(e)||iO(o))&&(a=function kge(n){return n!==os(n)&&Ns(n)?function xge(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}(n):nO(n)}(e)),Ns(e)?((c=Tg(e,!0)).x+=e.clientLeft,c.y+=e.clientTop):o&&(c.x=rO(o))),{x:s.left+a.scrollLeft-c.x,y:s.top+a.scrollTop-c.y,width:s.width,height:s.height}}function Vge(n){var e=new Map,t=new Set,r=[];function i(o){t.add(o.name),[].concat(o.requires||[],o.requiresIfExists||[]).forEach(function(a){if(!t.has(a)){var c=e.get(a);c&&i(c)}}),r.push(o)}return n.forEach(function(o){e.set(o.name,o)}),n.forEach(function(o){t.has(o.name)||i(o)}),r}function Uge(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}var E5={placement:"bottom",modifiers:[],strategy:"absolute"};function b5(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&"function"==typeof r.getBoundingClientRect)})}function Hge(n){void 0===n&&(n={});var t=n.defaultModifiers,r=void 0===t?[]:t,i=n.defaultOptions,o=void 0===i?E5:i;return function(a,c,u){void 0===u&&(u=o);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},E5,o),modifiersData:{},elements:{reference:a,popper:c},attributes:{},styles:{}},m=[],_=!1,v={state:h,setOptions:function(O){var P="function"==typeof O?O(h.options):O;D(),h.options=Object.assign({},o,h.options,P),h.scrollParents={reference:ih(a)?Ov(a):a.contextElement?Ov(a.contextElement):[],popper:Ov(c)};var j=function Bge(n){var e=Vge(n);return pge.reduce(function(t,r){return t.concat(e.filter(function(i){return i.phase===r}))},[])}(function jge(n){var e=n.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}([].concat(r,h.options.modifiers)));return h.orderedModifiers=j.filter(function(X){return X.enabled}),function I(){h.orderedModifiers.forEach(function(A){var P=A.options,X=A.effect;if("function"==typeof X){var ae=X({state:h,name:A.name,instance:v,options:void 0===P?{}:P});m.push(ae||function(){})}})}(),v.update()},forceUpdate:function(){if(!_){var O=h.elements,P=O.reference,j=O.popper;if(b5(P,j)){h.rects={reference:Lge(P,xv(j),"fixed"===h.options.strategy),popper:cO(j)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(U){return h.modifiersData[U.name]=Object.assign({},U.data)});for(var X=0;X<h.orderedModifiers.length;X++)if(!0!==h.reset){var ae=h.orderedModifiers[X],we=ae.fn,k=ae.options;"function"==typeof we&&(h=we({state:h,options:void 0===k?{}:k,name:ae.name,instance:v})||h)}else h.reset=!1,X=-1}}},update:Uge(function(){return new Promise(function(A){v.forceUpdate(),A(h)})}),destroy:function(){D(),_=!0}};if(!b5(a,c))return v;function D(){m.forEach(function(A){return A()}),m=[]}return v.setOptions(u).then(function(A){!_&&u.onFirstUpdate&&u.onFirstUpdate(A)}),v}}var bw={passive:!0},qge={top:"auto",right:"auto",bottom:"auto",left:"auto"};function I5(n){var e,t=n.popper,r=n.popperRect,i=n.placement,o=n.variation,s=n.offsets,a=n.position,c=n.gpuAcceleration,u=n.adaptive,h=n.roundOffsets,m=n.isFixed,_=s.x,v=void 0===_?0:_,I=s.y,D=void 0===I?0:I,A="function"==typeof h?h({x:v,y:D}):{x:v,y:D};v=A.x,D=A.y;var O=s.hasOwnProperty("x"),P=s.hasOwnProperty("y"),j=is,X=rs,ae=window;if(u){var we=xv(t),k="clientHeight",S="clientWidth";we===os(t)&&"static"!==qc(we=gu(t)).position&&"absolute"===a&&(k="scrollHeight",S="scrollWidth"),(i===rs||(i===is||i===aa)&&o===Mv)&&(X=sa,D-=(m&&we===ae&&ae.visualViewport?ae.visualViewport.height:we[k])-r.height,D*=c?1:-1),i!==is&&(i!==rs&&i!==sa||o!==Mv)||(j=aa,v-=(m&&we===ae&&ae.visualViewport?ae.visualViewport.width:we[S])-r.width,v*=c?1:-1)}var x,H=Object.assign({position:a},u&&qge),W=!0===h?function Kge(n,e){var r=n.y,i=e.devicePixelRatio||1;return{x:Ig(n.x*i)/i||0,y:Ig(r*i)/i||0}}({x:v,y:D},os(t)):{x:v,y:D};return v=W.x,D=W.y,Object.assign({},H,c?((x={})[X]=P?"0":"",x[j]=O?"0":"",x.transform=(ae.devicePixelRatio||1)<=1?"translate("+v+"px, "+D+"px)":"translate3d("+v+"px, "+D+"px, 0)",x):((e={})[X]=P?D+"px":"",e[j]=O?v+"px":"",e.transform="",e))}var eme=Hge({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function $ge(n){var e=n.state,t=n.instance,r=n.options,i=r.scroll,o=void 0===i||i,s=r.resize,a=void 0===s||s,c=os(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&u.forEach(function(h){h.addEventListener("scroll",t.update,bw)}),a&&c.addEventListener("resize",t.update,bw),function(){o&&u.forEach(function(h){h.removeEventListener("scroll",t.update,bw)}),a&&c.removeEventListener("resize",t.update,bw)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function zge(n){var e=n.state;e.modifiersData[n.name]=m5({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function Qge(n){var e=n.state,t=n.options,r=t.gpuAcceleration,i=void 0===r||r,o=t.adaptive,s=void 0===o||o,a=t.roundOffsets,c=void 0===a||a,u={placement:qa(e.placement),variation:wg(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,I5(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:c})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,I5(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function Jge(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},i=e.attributes[t]||{},o=e.elements[t];!Ns(o)||!Ka(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var a=i[s];!1===a?o.removeAttribute(s):o.setAttribute(s,!0===a?"":a)}))})},effect:function Zge(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]).reduce(function(c,u){return c[u]="",c},{});!Ns(i)||!Ka(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(c){i.removeAttribute(c)}))})}},requires:["computeStyles"]}]});const rme={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function nme(n){var e=n.state,r=n.name,i=n.options.offset,o=void 0===i?[0,0]:i,s=u5.reduce(function(h,m){return h[m]=function tme(n,e,t){var r=qa(n),i=[is,rs].indexOf(r)>=0?-1:1,o="function"==typeof t?t(Object.assign({},e,{placement:n})):t,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[is,aa].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}(m,e.rects,o),h},{}),a=s[e.placement],u=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=a.x,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=s}},lO=["*"],kme=["dialog"],w5={animation:!0,transitionTimerDelayMs:5};let Fv=(()=>{class n{constructor(){this.animation=w5.animation}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function sh(n){return"string"==typeof n}function ah(n){return null!=n}function Dg(n){return(n||document.body).getBoundingClientRect()}const S_e=()=>{},{transitionTimerDelayMs:R_e}=w5,Lv=new Map,Ms=(n,e,t,r)=>{let i=r.context||{};const o=Lv.get(e);if(o)switch(r.runningTransition){case"continue":return Po;case"stop":n.run(()=>o.transition$.complete()),i=Object.assign(o.context,i),Lv.delete(e)}const s=t(e,r.animation,i)||S_e;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>s()),We(void 0).pipe(function A_e(n){return e=>new R(t=>e.subscribe({next:s=>n.run(()=>t.next(s)),error:s=>n.run(()=>t.error(s)),complete:()=>n.run(()=>t.complete())}))}(n));const a=new Re,c=new Re,u=a.pipe(function Kfe(...n){return e=>Id(e,We(...n))}(!0));Lv.set(e,{transition$:a,complete:()=>{c.next(),c.complete()},context:i});const h=function w_e(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const m=Ii(e,"transitionend").pipe(_i(u),vr(({target:v})=>v===e));o8(r8(h+R_e).pipe(_i(u)),m,c).pipe(_i(u)).subscribe(()=>{Lv.delete(e),n.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};let M5=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),P5=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),k5=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),F5=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jt({type:n})}static{this.\u0275inj=Rt({})}}return n})();const Aw=(n,e)=>!!e&&e.some(t=>t.contains(n)),j5=(n,e)=>!e||null!=function C_e(n,e){return!e||typeof n.closest>"u"?null:n.closest(e)}(n,e),nye=typeof navigator<"u"&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function yO(n,e,t,r,i,o,s,a){t&&n.runOutsideAngular((n=>nye?()=>setTimeout(()=>n(),100):n)(()=>{const u=Ii(e,"keydown").pipe(_i(i),vr(_=>"Escape"===_.key),si(_=>_.preventDefault())),h=Ii(e,"mousedown").pipe($e(_=>{const v=_.target;return 2!==_.button&&!Aw(v,s)&&("inside"===t?Aw(v,o)&&j5(v,a):"outside"===t?!Aw(v,o):j5(v,a)||!Aw(v,o))}),_i(i)),m=Ii(e,"mouseup").pipe(SP(h),vr(([_,v])=>v),function Jfe(n,e=pI){const t=r8(n,e);return s8(()=>t)}(0),_i(i));o8([u.pipe($e(_=>0)),m.pipe($e(_=>1))]).subscribe(_=>n.run(()=>r(_)))}))}const H5=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function $5(n){const e=Array.from(n.querySelectorAll(H5)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}let iye=(()=>{class n{constructor(){this._element=N(yr).documentElement}isRTL(){return"rtl"===(this._element.getAttribute("dir")||"").toLowerCase()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const oye=/\s+/,sye=/  +/gi,aye={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]},lye=/^left/,uye=/^right/,dye=/^start/,hye=/^end/;function z5({placement:n,baseClass:e},t){let r=Array.isArray(n)?n:n.split(oye),o=r.findIndex(u=>"auto"===u);o>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(u){null==r.find(h=>-1!==h.search("^"+u))&&r.splice(o++,1,u)});const s=r.map(u=>function cye(n,e){const[t,r]=aye[n];return e&&r||t}(u,t.isRTL()));return{placement:s.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!e,phase:"write",fn({state:u}){const h=new RegExp(e+"(-[a-z]+)*","gi"),m=u.elements.popper,_=u.placement;let v=m.className;v=v.replace(h,""),v+=` ${function fye(n,e){let[t,r]=e.split("-");const i=t.replace(lye,"start").replace(uye,"end");let o=[i];if(r){let s=r;("left"===t||"right"===t)&&(s=s.replace(dye,"top").replace(hye,"bottom")),o.push(`${i}-${s}`)}return n&&(o=o.map(s=>`${n}-${s}`)),o.join(" ")}(e,_)}`,v=v.trim().replace(sye," "),m.className=v}},Dge,Rge,Oge,{enabled:!0,name:"flip",options:{fallbackPlacements:s}}]}}function W5(n){return n}new Date(1882,10,12),new Date(2174,10,25);let rW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),oW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),Pye=(()=>{class n{constructor(){this._ngbConfig=N(Fv),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0,this.role="dialog"}get animation(){return this._animation??this._ngbConfig.animation}set animation(t){this._animation=t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class hh{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}class Oye{constructor(e){this._componentType=e,this._windowRef=null,this._contentRef=null,this._document=N(yr),this._applicationRef=N(so),this._injector=N(Wt),this._viewContainerRef=N(So),this._ngZone=N(g)}open(e,t,r=!1){this._windowRef||(this._contentRef=this._getContentRef(e,t),this._windowRef=this._viewContainerRef.createComponent(this._componentType,{injector:this._injector,projectableNodes:this._contentRef.nodes}));const{nativeElement:i}=this._windowRef.location,o=new Re;Tl({mixedReadWrite:()=>{o.next(),o.complete()}},{injector:this._injector});const s=o.pipe(Jr(()=>Ms(this._ngZone,i,({classList:a})=>a.add("show"),{animation:r,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:s}}close(e=!1){return this._windowRef?Ms(this._ngZone,this._windowRef.location.nativeElement,({classList:t})=>t.remove("show"),{animation:e,runningTransition:"stop"}).pipe(si(()=>{this._windowRef?.destroy(),this._contentRef?.viewRef?.destroy(),this._windowRef=null,this._contentRef=null})):We(void 0)}_getContentRef(e,t){if(e){if(e instanceof Rr){const r=e.createEmbeddedView(t);return this._applicationRef.attachView(r),new hh([r.rootNodes],r)}return new hh([[this._document.createTextNode(`${e}`)]])}return new hh([])}}let xye=(()=>{class n{constructor(){this._document=N(yr)}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,i=r.style,{overflow:o,paddingRight:s}=i;if(t>0){const a=parseFloat(window.getComputedStyle(r).paddingRight);i.paddingRight=`${a+t}px`}return i.overflow="hidden",()=>{t>0&&(i.paddingRight=s),i.overflow=o}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),kye=(()=>{class n{constructor(){this._nativeElement=N(tn).nativeElement,this._zone=N(g),this._injector=N(Wt)}ngOnInit(){Tl({mixedReadWrite:()=>Ms(this._zone,this._nativeElement,(t,r)=>{r&&Dg(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})},{injector:this._injector})}hide(){return Ms(this._zone,this._nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ur({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(r,i){2&r&&(Ml("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),sn("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(r,i){},encapsulation:2})}}return n})();class sW{update(e){}close(e){}dismiss(e){}}const Fye=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","role","scrollable","size","windowClass","modalDialogClass"],Lye=["animation","backdropClass"];class Vye{_applyWindowOptions(e,t){Fye.forEach(r=>{ah(t[r])&&(e[r]=t[r])})}_applyBackdropOptions(e,t){Lye.forEach(r=>{ah(t[r])&&(e[r]=t[r])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(_i(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(_i(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,t,r,i){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new Re,this._dismissed=new Re,this._hidden=new Re,e.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,s)=>{this._resolve=o,this._reject=s}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function D5(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(r=>{!1!==r&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():We(void 0);e.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef?.viewRef?.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),AP(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var AO=function(n){return n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",n}(AO||{});let Bye=(()=>{class n{constructor(){this._document=N(yr),this._elRef=N(tn),this._zone=N(g),this._injector=N(Wt),this._closed$=new Re,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.role="dialog",this.dismissEvent=new Xe,this.shown=new Re,this.hidden=new Re}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":sh(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,Tl({mixedReadWrite:()=>this._show()},{injector:this._injector})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,r={animation:this.animation,runningTransition:"stop"},s=AP(Ms(this._zone,t,()=>t.classList.remove("show"),r),Ms(this._zone,this._dialogEl.nativeElement,()=>{},r));return s.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),s}_show(){const t={animation:this.animation,runningTransition:"continue"};AP(Ms(this._zone,this._elRef.nativeElement,(o,s)=>{s&&Dg(o),o.classList.add("show")},t),Ms(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{Ii(t,"keydown").pipe(_i(this._closed$),vr(i=>"Escape"===i.key)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(AO.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;Ii(this._dialogEl.nativeElement,"mousedown").pipe(_i(this._closed$),si(()=>r=!1),ur(()=>Ii(t,"mouseup").pipe(_i(this._closed$),Li(1))),vr(({target:i})=>t===i)).subscribe(()=>{r=!0}),Ii(t,"click").pipe(_i(this._closed$)).subscribe(({target:i})=>{t===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(AO.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const r=t.querySelector("[ngbAutofocus]"),i=$5(t)[0];(r||i||t).focus()}}_restoreFocus(){const t=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&t.contains(r)?r:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Ms(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ur({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(r,i){if(1&r&&Js(kme,7),2&r){let o;mn(o=_n())&&(i._dialogEl=o.first)}},hostAttrs:["tabindex","-1"],hostVars:8,hostBindings:function(r,i){2&r&&(Sn("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy)("role",i.role),Ml("modal d-block"+(i.windowClass?" "+i.windowClass:"")),sn("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",role:"role",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:lO,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(r,i){1&r&&(cb(),Ne(0,"div",1,0)(2,"div",2),lb(3),Fe()()),2&r&&Ml("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2})}}return n})(),Uye=(()=>{class n{constructor(){this._applicationRef=N(so),this._injector=N(Wt),this._environmentInjector=N(cr),this._document=N(yr),this._scrollBar=N(xye),this._activeWindowCmptHasChanged=new Re,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new Xe;const t=N(g);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const r=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,r=!1)=>{n.runOutsideAngular(()=>{const i=Ii(e,"focusin").pipe(_i(t),$e(o=>o.target));Ii(e,"keydown").pipe(_i(t),vr(o=>"Tab"===o.key),SP(i)).subscribe(([o,s])=>{const[a,c]=$5(e);(s===a||s===e)&&o.shiftKey&&(c.focus(),o.preventDefault()),s===c&&!o.shiftKey&&(a.focus(),o.preventDefault())}),r&&Ii(e,"click").pipe(_i(t),SP(i),$e(o=>o[1])).subscribe(o=>o.focus())})})(t,r.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(r.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,r,i){const o=i.container instanceof HTMLElement?i.container:ah(i.container)?this._document.querySelector(i.container):this._document.body;if(!o)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const s=new sW,a=(t=i.injector||t).get(cr,null)||this._environmentInjector,c=this._getContentRef(t,a,r,s,i);let u=!1!==i.backdrop?this._attachBackdrop(o):void 0,h=this._attachWindowComponent(o,c.nodes),m=new Vye(h,c,u,i.beforeDismiss);return this._registerModalRef(m),this._registerWindowCmpt(h),m.hidden.pipe(Li(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),s.close=_=>{m.close(_)},s.dismiss=_=>{m.dismiss(_)},s.update=_=>{m.update(_)},m.update(i),1===this._modalRefs.length&&this._document.body.classList.add("modal-open"),u&&u.instance&&u.changeDetectorRef.detectChanges(),h.changeDetectorRef.detectChanges(),m}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(r=>r.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let r=US(kye,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}_attachWindowComponent(t,r){let i=US(Bye,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_getContentRef(t,r,i,o,s){return i?i instanceof Rr?this._createFromTemplateRef(i,o):sh(i)?this._createFromString(i):this._createFromComponent(t,r,i,o,s):new hh([])}_createFromTemplateRef(t,r){const o=t.createEmbeddedView({$implicit:r,close(s){r.close(s)},dismiss(s){r.dismiss(s)}});return this._applicationRef.attachView(o),new hh([o.rootNodes],o)}_createFromString(t){const r=this._document.createTextNode(`${t}`);return new hh([[r]])}_createFromComponent(t,r,i,o,s){const c=US(i,{environmentInjector:r,elementInjector:Wt.create({providers:[{provide:sW,useValue:o}],parent:t})}),u=c.location.nativeElement;return s.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new hh([[u]],c.hostView,c)}_setAriaHidden(t){const r=t.parentElement;r&&t!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==t&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,r)=>{t?r.setAttribute("aria-hidden",t):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const r=()=>{const i=this._modalRefs.indexOf(t);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(r,r)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const r=this._windowCmpts.indexOf(t);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),jye=(()=>{class n{constructor(){this._injector=N(Wt),this._modalStack=N(Uye),this._config=N(Pye)}open(t,r={}){const i={...this._config,animation:this._config.animation,...r};return this._modalStack.open(this._injector,t,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),aW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jt({type:n})}static{this.\u0275inj=Rt({providers:[jye]})}}return n})(),uW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),yW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jt({type:n})}static{this.\u0275inj=Rt({})}}return n})();const Yye={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]};let vW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),EW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),bW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),IW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),TW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),wW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),nve=(()=>{class n{constructor(){this._ngbConfig=N(Fv),this.autoClose=!0,this.placement="auto",this.popperOptions=t=>t,this.triggers="hover focus",this.disableTooltip=!1,this.openDelay=0,this.closeDelay=0}get animation(){return this._animation??this._ngbConfig.animation}set animation(t){this._animation=t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),rve=0,ive=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ur({type:n,selectors:[["ngb-tooltip-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(r,i){2&r&&(Ko("id",i.id),Ml("tooltip"+(i.tooltipClass?" "+i.tooltipClass:"")),sn("fade",i.animation))},inputs:{animation:"animation",id:"id",tooltipClass:"tooltipClass"},ngContentSelectors:lO,decls:3,vars:0,consts:[["data-popper-arrow","",1,"tooltip-arrow"],[1,"tooltip-inner"]],template:function(r,i){1&r&&(cb(),lr(0,"div",0),Ne(1,"div",1),lb(2),Fe())},styles:["ngb-tooltip-window{pointer-events:none;position:absolute}ngb-tooltip-window .tooltip-inner{pointer-events:auto}ngb-tooltip-window.bs-tooltip-top,ngb-tooltip-window.bs-tooltip-bottom{padding-left:0;padding-right:0}ngb-tooltip-window.bs-tooltip-start,ngb-tooltip-window.bs-tooltip-end{padding-top:0;padding-bottom:0}\n"],encapsulation:2,changeDetection:0})}}return n})(),ove=(()=>{class n{constructor(){this._config=N(nve),this.animation=this._config.animation,this.autoClose=this._config.autoClose,this.placement=this._config.placement,this.popperOptions=this._config.popperOptions,this.triggers=this._config.triggers,this.container=this._config.container,this.disableTooltip=this._config.disableTooltip,this.tooltipClass=this._config.tooltipClass,this.openDelay=this._config.openDelay,this.closeDelay=this._config.closeDelay,this.shown=new Xe,this.hidden=new Xe,this._nativeElement=N(tn).nativeElement,this._ngZone=N(g),this._document=N(yr),this._changeDetector=N(Qo),this._injector=N(Wt),this._ngbTooltipWindowId="ngb-tooltip-"+rve++,this._popupService=new Oye(ive),this._windowRef=null,this._positioning=function vO(){const n=N(iye);let e=null;return{createPopper(t){if(!e){let i=(t.updatePopperOptions||W5)(z5(t,n));e=eme(t.hostElement,t.targetElement,i)}},update(){e&&e.update()},setOptions(t){if(e){let i=(t.updatePopperOptions||W5)(z5(t,n));e.setOptions(i)}},destroy(){e&&(e.destroy(),e=null)}}}()}set ngbTooltip(t){this._ngbTooltip=t,!t&&this._windowRef&&this.close()}get ngbTooltip(){return this._ngbTooltip}open(t){if(!this._windowRef&&this._ngbTooltip&&!this.disableTooltip){const{windowRef:r,transition$:i}=this._popupService.open(this._ngbTooltip,t??this.tooltipContext,this.animation);this._windowRef=r,this._windowRef.setInput("animation",this.animation),this._windowRef.setInput("tooltipClass",this.tooltipClass),this._windowRef.setInput("id",this._ngbTooltipWindowId),this._getPositionTargetElement().setAttribute("aria-describedby",this._ngbTooltipWindowId),"body"===this.container&&this._document.body.appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._getPositionTargetElement(),targetElement:this._windowRef.location.nativeElement,placement:this.placement,baseClass:"bs-tooltip",updatePopperOptions:o=>this.popperOptions(function EO(n){return e=>(e.modifiers.push(rme,{name:"offset",options:{offset:()=>n}}),e)}([0,6])(o))}),Promise.resolve().then(()=>{this._positioning.update()}),this._afterRenderRef=function Zm(n,e){!e?.injector&&Us();const t=e?.injector??N(Wt);return Co("NgAfterRender"),nk(n,t,e,!1)}({mixedReadWrite:()=>{this._positioning.update()}},{injector:this._injector})}),yO(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement],[this._nativeElement]),i.subscribe(()=>this.shown.emit())}}close(t=this.animation){null!=this._windowRef&&(this._getPositionTargetElement().removeAttribute("aria-describedby"),this._popupService.close(t).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this._afterRenderRef?.destroy(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=function Zye(n,e,t,r,i,o=0,s=0){const a=function Jye(n){const e=(n||"").trim();if(0===e.length)return[];const t=e.split(/\s+/).map(i=>i.split(":")).map(i=>Yye[i[0]]||i),r=t.filter(i=>i.includes("manual"));if(r.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===r.length&&t.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return r.length?[]:t}(e);if(0===a.length)return()=>{};const c=new Set,u=[];let h;function m(v,I){n.addEventListener(v,I),u.push(()=>n.removeEventListener(v,I))}function _(v,I){clearTimeout(h),I>0?h=setTimeout(v,I):v()}for(const[v,I]of a)I?(m(v,()=>{c.add(v),_(()=>c.size>0&&r(),o)}),m(I,()=>{c.delete(v),_(()=>0===c.size&&i(),s)})):m(v,()=>t()?_(i,s):_(r,o));return()=>u.forEach(v=>v())}(this._nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({tooltipClass:t}){t&&this.isOpen()&&this._windowRef.setInput("tooltipClass",t.currentValue)}ngOnDestroy(){this.close(!1),this._unregisterListenersFn?.()}_getPositionTargetElement(){return(sh(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget)||this._nativeElement}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=ke({type:n,selectors:[["","ngbTooltip",""]],inputs:{animation:"animation",autoClose:"autoClose",placement:"placement",popperOptions:"popperOptions",triggers:"triggers",positionTarget:"positionTarget",container:"container",disableTooltip:"disableTooltip",tooltipClass:"tooltipClass",tooltipContext:"tooltipContext",openDelay:"openDelay",closeDelay:"closeDelay",ngbTooltip:"ngbTooltip"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbTooltip"],features:[Ar]})}}return n})(),DW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jt({type:n})}static{this.\u0275inj=Rt({})}}return n})();new pe("live announcer delay",{providedIn:"root",factory:()=>100});let CW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jt({type:n})}static{this.\u0275inj=Rt({})}}return n})(),AW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jt({type:n})}static{this.\u0275inj=Rt({})}}return n})();const ave=[M5,P5,k5,F5,rW,oW,aW,uW,AW,yW,vW,EW,bW,IW,TW,wW,DW,CW];let SW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jt({type:n})}static{this.\u0275inj=Rt({imports:[ave,M5,P5,k5,F5,rW,oW,aW,uW,AW,yW,vW,EW,bW,IW,TW,wW,DW,CW]})}}return n})();function cve(n,e){if(1&n&&(Pa(0),lr(1,"img",5),No(2,"translate"),No(3,"translate"),Oa()),2&n){const t=e.$implicit,r=ze(2);Ae(),ub("ngbTooltip",Mo(2,3,t.label)),pt("src",r.badgeImg(t),xf)("alt",Mo(3,5,t.label))}}function lve(n,e){if(1&n&&(Ne(0,"div",1)(1,"p",2),lr(2,"img",3),qt(3),Fe(),wt(4,cve,4,7,"ng-container",4),Fe()),2&n){const t=ze();Ae(2),pt("src",t.user.profilePic,xf),Ae(),vd(" ",t.user.displayName," "),Ae(),pt("ngForOf",t.badgesInfo)}}let uve=(()=>{class n{user={badges:[]};badgesInfo=[];processedBadges=[];ngOnInit(){}ngOnChanges(t){}badgeImg(t){if(!this.user)return;const r=this.user.badges.find(o=>o.name==t.name);return`assets/images/${t.path}${r?t.icon:t.not_collected}`}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ur({type:n,selectors:[["app-badges-user-card"]],inputs:{user:"user",badgesInfo:"badgesInfo"},standalone:!1,features:[Ar],decls:1,vars:1,consts:[["class","nes-container is-rounded with-title",4,"ngIf"],[1,"nes-container","is-rounded","with-title"],[1,"title","d-block","text-truncate"],["width","50",2,"image-rendering","pixelated","border-radius","100%","border","1px solid #ddd",3,"src"],[4,"ngFor","ngForOf"],["placement","top","width","50",3,"src","ngbTooltip","alt"]],template:function(r,i){1&r&&wt(0,lve,5,3,"div",0),2&r&&pt("ngIf",i.user)},dependencies:[cp,lp,ove,XT],encapsulation:2})}return n})();function dve(n,e){if(1&n&&(Ne(0,"div",5),lr(1,"app-badges-user-card",6),Fe()),2&n){const t=e.$implicit,r=ze(2);Ae(),pt("user",t)("badgesInfo",r.badgesInfo)}}function hve(n,e){if(1&n&&(Pa(0),wt(1,dve,2,2,"div",4),Oa()),2&n){const t=ze();Ae(),pt("ngForOf",t.users)}}function fve(n,e){if(1&n){const t=ao();Ne(0,"div",7)(1,"app-loader",8),fb("loadingChange",function(i){Vr(t);const o=ze();return yS(o.loading,i)||(o.loading=i),gr(i)}),Fe()()}if(2&n){const t=ze();Ae(),hb("loading",t.loading)}}const pve=[{path:"leaderboard",component:Vfe},{path:"badges",component:(()=>{class n{badgeSvc;loading=!1;users=[];badgesInfo=[];usersSub=null;constructor(t){this.badgeSvc=t}ngOnInit(){var t=this;return(0,T.A)(function*(){t.loading=!0,t.badgesInfo=yield t.badgeSvc.getBadgesInfo(),t.usersSub=t.badgeSvc.getUsers().subscribe(r=>t.users=r)})()}ngOnDestroy(){this.loading=!1,this.usersSub&&this.usersSub.unsubscribe()}static \u0275fac=function(r){return new(r||n)(ve(Xz))};static \u0275cmp=Ur({type:n,selectors:[["app-badges-view"]],standalone:!1,decls:5,vars:2,consts:[["loadingContent",""],[1,"container-fluid","pt-5"],[1,"row"],[4,"ngIf","ngIfElse"],["class","col col-md-3 col-xl-3 mb-3",4,"ngFor","ngForOf"],[1,"col","col-md-3","col-xl-3","mb-3"],[3,"user","badgesInfo"],[1,"col-12"],[3,"loadingChange","loading"]],template:function(r,i){if(1&r&&(Ne(0,"div",1)(1,"div",2),wt(2,hve,2,1,"ng-container",3)(3,fve,2,1,"ng-template",null,0,Ts),Fe()()),2&r){const o=Zs(4);Ae(2),pt("ngIf",!i.loading)("ngIfElse",o)}},dependencies:[cp,lp,e8,uve],encapsulation:2})}return n})()}];let gve=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Jt({type:n});static \u0275inj=Rt({imports:[hI.forRoot(pve),hI]})}return n})();const RW={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let NO;const mve=new Uint8Array(16),Di=[];for(let n=0;n<256;++n)Di.push((n+256).toString(16).slice(1));const vve=function yve(n,e,t){if(RW.randomUUID&&!e&&!n)return RW.randomUUID();const r=(n=n||{}).random??n.rng?.()??function _ve(){if(!NO){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");NO=crypto.getRandomValues.bind(crypto)}return NO(mve)}();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){if((t=t||0)<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[t+i]=r[i];return e}return function NW(n,e=0){return(Di[n[e+0]]+Di[n[e+1]]+Di[n[e+2]]+Di[n[e+3]]+"-"+Di[n[e+4]]+Di[n[e+5]]+"-"+Di[n[e+6]]+Di[n[e+7]]+"-"+Di[n[e+8]]+Di[n[e+9]]+"-"+Di[n[e+10]]+Di[n[e+11]]+Di[n[e+12]]+Di[n[e+13]]+Di[n[e+14]]+Di[n[e+15]]).toLowerCase()}(r)};let Eve=(()=>{class n{translator;fileReader;constructor(t,r){this.translator=t,this.fileReader=r}setApplicationDefaultLanguage(){var t=this;return(0,T.A)(function*(){const{translator:r}=t,i=r.getBrowserLang(),o=(yield t.fileReader.getFile("languages.json"))?.map(u=>u.code)||["en"],s=o.join("|"),a=new RegExp(s);let c=i?.match(a)?i:"en";1===o.length&&(c=o[0]),r.addLangs(o),r.use(c)})()}static \u0275fac=function(r){return new(r||n)(me(_g),me(yP))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bve(n,e){1&n&&lr(0,"img",11),2&n&&db("src","assets/images/",ze().selectedLang.code,".png",xf)}function Ive(n,e){if(1&n){const t=ao();Ne(0,"li")(1,"a",12),Ft("click",function(){const i=Vr(t).$implicit;return gr(ze().selectLang(i))}),qt(2),No(3,"translate"),Fe()()}if(2&n){const t=e.$implicit,r=ze();Ae(),sn("is-disabled",(null==r.selectedLang?null:r.selectedLang.code)==t.code),Ae(),Nr(Mo(3,3,t.label))}}let Tve=(()=>{class n{trasnlatorSvc;jsonReaderService;appLanguageService;title="HEADER.TITLE";languages=null;selectedLang=null;welcome=!1;constructor(t,r,i){this.trasnlatorSvc=t,this.jsonReaderService=r,this.appLanguageService=i}ngOnInit(){var t=this;return(0,T.A)(function*(){yield t.appLanguageService.setApplicationDefaultLanguage(),yield t.setStartingLang()})()}selectLang(t){this.selectedLang=t,this.trasnlatorSvc.use(t.code)}setStartingLang(){var t=this;return(0,T.A)(function*(){t.languages=yield t.jsonReaderService.getFile("languages.json"),t.selectedLang=t.languages?.find(r=>r.code===t.trasnlatorSvc.currentLang)||null})()}static \u0275fac=function(r){return new(r||n)(ve(_g),ve(yP),ve(Eve))};static \u0275cmp=Ur({type:n,selectors:[["app-header"]],inputs:{welcome:"welcome"},standalone:!1,decls:14,vars:10,consts:[["id","header",1,"navbar","navbar-expand-lg"],[1,"container-fluid"],[1,"nes-container","with-title","w-100"],["href","https://twitch.tv/kilzakplays","target","_blank",1,"navbar-brand","p-0","m-0"],["src","assets/images/logo.png",1,"logo",3,"alt"],["id","header-title",1,"w-100","text-center","d-none","d-sm-block"],["id","lang-bar",1,"dropdown","ms-auto"],["href","#","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["alt","",3,"src",4,"ngIf"],[1,"dropdown-menu"],[4,"ngFor","ngForOf"],["alt","",3,"src"],[1,"dropdown-item","nes-text",3,"click"]],template:function(r,i){1&r&&(Ne(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),lr(4,"img",4),No(5,"translate"),Fe(),Ne(6,"div",5),qt(7),No(8,"translate"),Fe(),Ne(9,"div",6)(10,"a",7),wt(11,bve,1,2,"img",8),Fe(),Ne(12,"ul",9),wt(13,Ive,4,5,"li",10),Fe()()()()()),2&r&&(sn("welcome",i.welcome),Ae(4),ub("alt",Mo(5,6,i.title)),Ae(3),vd(" ",Mo(8,8,i.title)," "),Ae(4),pt("ngIf",i.selectedLang),Ae(2),pt("ngForOf",i.languages))},dependencies:[cp,lp,XT],styles:["#header.welcome[_ngcontent-%COMP%]   #lang-bar[_ngcontent-%COMP%]{position:relative;z-index:1;border:3px solid #333;background:#fff;padding:6px 6px 9px}#header[_ngcontent-%COMP%]   #header-title[_ngcontent-%COMP%]{margin-left:-120px}#header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{cursor:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAzElEQVRYR+2X0Q6AIAhF5f8/2jYXZkwEjNSVvVUjDpcrGgT7FUkI2D9xRfQETwNIiWO85wfINfQUEyxBG2ArsLwC0jioGt5zFcwF4OYDPi/mBYKm4t0U8ATgRm3ThFoAqkhNgWkA0jJLvaOVSs7j3qMnSgXWBMiWPXe94QqMBMBc1VZIvaTu5u5pQewq0EqNZvIEMCmxAawK0DNkay9QmfFNAJUXfgGgUkLaE7j/h8fnASkxHTz0DGIBMCnBeeM7AArpUd3mz2x3C7wADglA8BcWMZhZAAAAAElFTkSuQmCC) 14 0,pointer;width:120px}#header[_ngcontent-%COMP%]   .nes-container[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-content:center;align-items:center}#header[_ngcontent-%COMP%]   a.nav-link[_ngcontent-%COMP%]{text-decoration:none}#header[_ngcontent-%COMP%]   #lang-bar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;cursor:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAzElEQVRYR+2X0Q6AIAhF5f8/2jYXZkwEjNSVvVUjDpcrGgT7FUkI2D9xRfQETwNIiWO85wfINfQUEyxBG2ArsLwC0jioGt5zFcwF4OYDPi/mBYKm4t0U8ATgRm3ThFoAqkhNgWkA0jJLvaOVSs7j3qMnSgXWBMiWPXe94QqMBMBc1VZIvaTu5u5pQewq0EqNZvIEMCmxAawK0DNkay9QmfFNAJUXfgGgUkLaE7j/h8fnASkxHTz0DGIBMCnBeeM7AArpUd3mz2x3C7wADglA8BcWMZhZAAAAAElFTkSuQmCC) 14 0,pointer;image-rendering:pixelated}#header[_ngcontent-%COMP%]   #lang-bar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{right:0;left:auto}#header[_ngcontent-%COMP%]   #lang-bar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:active{background-color:transparent}#header[_ngcontent-%COMP%]   #lang-bar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background-color:var(--kz-primary-color)}#header[_ngcontent-%COMP%]   #lang-bar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item.is-disabled[_ngcontent-%COMP%]{color:var(--kz-disabled-color);pointer-events:none}"]})}return n})();function wve(n,e){if(1&n&&(Pa(0),lr(1,"a",7),Oa()),2&n){const t=e.$implicit,r=e.first;Ae(),aS("nes-icon ",t.icon," is-medium"),sn("ms-2",!r),pt("title",t.label)("href",t.url,xf)}}let Dve=(()=>{class n{trademark="FOOTER.TRADEMARK";socials=[{label:"@KilzakPlays",url:"https://instagram.com/kilzakplays",icon:"instagram"},{label:"@KilzakPlays",url:"https://twitch.tv/kilzakplays",icon:"twitch"},{label:"@KilzakPlays",url:"https://www.youtube.com/@kilzakplays5780",icon:"youtube"},{label:"@Arquivo KilzakPlays",url:"https://www.youtube.com/@arquivokilzakplays7140",icon:"youtube"}];openDialog(t){const r=document.getElementById(t);r&&r.showModal()}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ur({type:n,selectors:[["app-footer"]],standalone:!1,decls:8,vars:1,consts:[[1,"container-fluid"],[1,"row"],[1,"col"],[1,"nes-container","with-title","d-flex","align-items-center","flex-column","flex-sm-row"],[1,"icon-list","col","col-sm-6","d-flex","mb-3"],[4,"ngFor","ngForOf"],[1,"col","col-sm-6","text-center","text-sm-end"],["target","_blank",3,"title","href"]],template:function(r,i){1&r&&(Ne(0,"main",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"section",4),wt(5,wve,2,7,"ng-container",5),Fe(),Ne(6,"section",6),qt(7," KilzakPlays\u2122 "),Fe()()()()()),2&r&&(Ae(5),pt("ngForOf",i.socials))},dependencies:[cp],encapsulation:2})}return n})();const MW=n=>{const e=getComputedStyle(n);return{top:parseFloat(e.marginTop),right:parseFloat(e.marginRight),bottom:parseFloat(e.marginBottom),left:parseFloat(e.marginLeft)}};let Cve=(()=>{class n{el;renderer;router;appDynamicContentHeight=[];events;constructor(t,r,i){this.el=t,this.renderer=r,this.router=i}onResize(){console.log("here:resize"),this.setContentHeight()}ngAfterViewInit(){this.events=this.router.events.subscribe(t=>{t instanceof ta&&this.setContentHeight()}),setTimeout(()=>{window.dispatchEvent(new Event("resize"))})}ngOnDestroy(){this.events.unsubscribe()}setContentHeight(){const t=r=>{let i=0;for(let o of Object.values(r))i+=o;return i};setTimeout(()=>{const r=this.el.nativeElement;let i=t(MW(r));console.log({totalHeight:i}),this.appDynamicContentHeight.forEach(o=>{const s=document.querySelector(o)||{},a=MW(s);s?i+=s.offsetHeight+t(a):console.warn(`[DynamicHeight] Elemento n\xe3o encontrado para o seletor "${o}"`)}),this.renderer.setStyle(r,"height",`calc(100vh - ${i}px)`)},100)}static \u0275fac=function(r){return new(r||n)(ve(tn),ve(Ca),ve(Fa))};static \u0275dir=ke({type:n,selectors:[["","appContentHeightCalculator",""]],hostBindings:function(r,i){1&r&&Ft("resize",function(s){return i.onResize(s)},0,Wk)},inputs:{appDynamicContentHeight:"appDynamicContentHeight"},standalone:!1})}return n})();const Ave=["app-header"],Sve=["app-content"],Rve=["app-footer"],Nve=()=>["#app-header","#app-footer"];function Mve(n,e){if(1&n){const t=ao();Ne(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13)(4,"p",14),qt(5,"TEMP"),Fe(),Ne(6,"P"),qt(7),Fe(),Ne(8,"button",15),Ft("click",function(){return Vr(t),gr(ze().generate())}),qt(9,"Primary"),Fe()()()()()}if(2&n){const t=ze();Ae(7),Nr(t.uuid)}}function Pve(n,e){if(1&n&&(Ne(0,"div",16)(1,"label",17),lr(2,"input",18),Ne(3,"span"),qt(4),No(5,"translate"),Fe()(),Ne(6,"label",19),lr(7,"input",20),Ne(8,"span"),qt(9),No(10,"translate"),Fe()()()),2&n){const t=ze();Ae(),sn("active","badges"==t.routeMenuFormControl.value),Ae(),pt("formControl",t.routeMenuFormControl),Ae(2),Nr(Mo(5,8,t.menuLabels.badges)),Ae(2),sn("active","leaderboard"==t.routeMenuFormControl.value),Ae(),pt("formControl",t.routeMenuFormControl),Ae(2),Nr(Mo(10,10,t.menuLabels.leaderboard))}}function Ove(n,e){if(1&n){const t=ao();Pa(0),Ne(1,"div",21),lr(2,"div",22),Ne(3,"div",23)(4,"h3",24),qt(5),No(6,"translate"),Fe(),Ne(7,"p",25),qt(8),No(9,"translate"),Fe(),Ne(10,"button",26),Ft("click",function(){return Vr(t),gr(ze().routeMenuFormControl.setValue("badges"))}),qt(11,"badges"),Fe(),Ne(12,"button",27),Ft("click",function(){return Vr(t),gr(ze().routeMenuFormControl.setValue("leaderboard"))}),qt(13,"leaderboards"),Fe()()(),Oa()}2&n&&(Ae(5),Nr(Mo(6,2,"WELCOME")),Ae(3),Nr(Mo(9,4,"MENU_OPTIONS")))}let xve=(()=>{class n{router;route;_header;_content;_footer;title="channel-hall-of-fame";menuLabels={leaderboard:"HEADER.MENU.LEADERBOARD",badges:"HEADER.MENU.BADGES"};routeMenuFormControl;uuid="";constructor(t,r){this.router=t,this.route=r}ngOnInit(){this.setRouteMenuControl()}generate(){this.uuid=vve()}setRouteMenuControl(){this.router.events.subscribe(t=>{t instanceof ta&&!this.routeMenuFormControl.value&&this.routeMenuFormControl.setValue(this.router.url.split("/")[1])}),this.routeMenuFormControl=new WP(""),this.routeMenuFormControl.valueChanges.subscribe(t=>{this.router.navigateByUrl(t)})}static \u0275fac=function(r){return new(r||n)(ve(Fa),ve(yp))};static \u0275cmp=Ur({type:n,selectors:[["app-root"]],viewQuery:function(r,i){if(1&r&&(Js(Ave,5),Js(Sve,5),Js(Rve,5)),2&r){let o;mn(o=_n())&&(i._header=o.first),mn(o=_n())&&(i._content=o.first),mn(o=_n())&&(i._footer=o.first)}},standalone:!1,decls:12,vars:6,consts:[["id","app-header",1,"container-fluid","mb-3","g-0"],[3,"welcome"],["id","app-content","appContentHeightCalculator","",1,"container-fluid","mb-3",3,"appDynamicContentHeight"],["class","container-fluid",4,"ngIf"],[1,"h-100","position-relative"],["id","menu",4,"ngIf"],[1,"h-100","col-12","nes-container","overflow-y-auto"],["id","content",1,"container-fluid"],["id","app-footer",1,"container-fluid","g-0","pb-2"],[4,"ngIf"],[1,"container-fluid"],[1,"row"],[1,"col"],[1,"nes-container","with-title"],[1,"title"],["type","button",1,"nes-btn","is-primary",3,"click"],["id","menu"],[1,"mb-0","me-5","link"],["type","radio","name","route","value","badges",1,"nes-radio",3,"formControl"],[1,"mb-0","link"],["type","radio","name","route","value","leaderboard",1,"nes-radio",3,"formControl"],["id","welcome-modal"],["id","backdrop",1,"h-100","w-100"],["id","welcome-msg",1,"nes-container","is-rounded","with-title","is-centered","top-50","start-50","translate-middle","text-center"],[1,"title",2,"font-size","26px"],[1,"mb-3"],["type","button",1,"nes-btn","is-primary","me-3","mb-3","mb-sm-0",3,"click"],["type","button",1,"nes-btn","is-success",3,"click"]],template:function(r,i){1&r&&(Ne(0,"header",0),lr(1,"app-header",1),Fe(),Ne(2,"main",2),wt(3,Mve,10,1,"div",3),Ne(4,"div",4),wt(5,Pve,11,12,"div",5),Ne(6,"div",6)(7,"div",7),lr(8,"router-outlet"),Fe()()()(),Ne(9,"footer",8),lr(10,"app-footer"),Fe(),wt(11,Ove,14,6,"ng-container",9)),2&r&&(Ae(),pt("welcome",!i.routeMenuFormControl.value),Ae(),pt("appDynamicContentHeight",function q2(n,e,t){const r=mi()+n,i=J();return i[r]===_t?Aa(i,r,t?e.call(t):e()):function A_(n,e){return n[e]}(i,r)}(5,Nve)),Ae(),pt("ngIf",!1),Ae(2),pt("ngIf",i.routeMenuFormControl.value),Ae(6),pt("ngIf",!i.routeMenuFormControl.value))},dependencies:[lp,M1,tw,qP,M8,QP,Tve,Dve,Cve,XT],styles:[".link.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{animation:blink 1s infinite steps(1)!important}#menu[_ngcontent-%COMP%]{position:absolute;top:-7px;background-color:#fff;width:fit-content;z-index:1;left:20px;padding:5px 30px 5px 20px}#welcome-modal[_ngcontent-%COMP%]{position:fixed;width:100vw;height:100vh;top:0;left:0}#welcome-modal[_ngcontent-%COMP%]   #backdrop[_ngcontent-%COMP%]{opacity:.5;position:fixed;background:#333;top:0;left:0;z-index:1;pointer-events:none}#welcome-modal[_ngcontent-%COMP%]   #welcome-msg[_ngcontent-%COMP%]{position:relative;z-index:10;background:#fff;width:fit-content;margin-top:-3rem;box-shadow:7px 7px 20px #33333370,-8px -9px 20px #33333326;padding:60px 60px 60px 90px}"]})}return n})(),MO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Jt({type:n});static \u0275inj=Rt({imports:[J_,ew,SW,SW]})}return n})(),PW=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Jt({type:n});static \u0275inj=Rt({providers:[Cfe(Afe()),TU],imports:[J_,ew,hI,s5,MO,J_,ew,hI,s5,MO]})}return n})(),kve=(()=>{class n{http;prefix;suffix;constructor(t,r="/assets/i18n/",i=".json"){this.http=t,this.prefix=r,this.suffix=i}getTranslation(t){return this.http.get(`${this.prefix}${t}${this.suffix}`)}static \u0275fac=function(r){return new(r||n)(me(vv),me(String),me(String))};static \u0275prov=fe({token:n,factory:n.\u0275fac})}return n})();function Fve(n){return new kve(n,"assets/i18n/",".json")}let Lve=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Jt({type:n});static \u0275inj=Rt({imports:[J_,PW]})}return n})(),Vve=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Jt({type:n,bootstrap:[xve]});static \u0275inj=Rt({imports:[tce.initializeApp(Jz.firebase),Yhe,Lve,gre,gve,PW,MO,ew.forRoot({loader:{provide:mg,useFactory:Fve,deps:[vv]}})]})}return n})();pre().bootstrapModule(Vve,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n))},852:(_o,Tr,gt)=>{gt.r(Tr),gt.d(Tr,{FirebaseError:()=>ee.g,SDK_VERSION:()=>Uo,_DEFAULT_ENTRY_NAME:()=>Bo,_addComponent:()=>hi,_addOrOverwriteComponent:()=>vo,_apps:()=>Gi,_clearComponents:()=>nc,_components:()=>Wi,_getProvider:()=>us,_isFirebaseApp:()=>tc,_isFirebaseServerApp:()=>ds,_registerComponent:()=>ec,_removeServiceInstance:()=>Os,_serverApps:()=>zi,deleteApp:()=>ks,getApp:()=>xs,getApps:()=>bh,initializeApp:()=>da,initializeServerApp:()=>hs,onLog:()=>Ki,registerVersion:()=>qi,setLogLevel:()=>Fs});var T=gt(467),st=gt(362),Ce=gt(41),ee=gt(858);let Et,He;const ge=new WeakMap,ye=new WeakMap,Be=new WeakMap,bt=new WeakMap,yt=new WeakMap;let ce={get(K,$,oe){if(K instanceof IDBTransaction){if("done"===$)return ye.get(K);if("objectStoreNames"===$)return K.objectStoreNames||Be.get(K);if("store"===$)return oe.objectStoreNames[1]?void 0:oe.objectStore(oe.objectStoreNames[0])}return dt(K[$])},set:(K,$,oe)=>(K[$]=oe,!0),has:(K,$)=>K instanceof IDBTransaction&&("done"===$||"store"===$)||$ in K};function Qe(K){return"function"==typeof K?function Pe(K){return K!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Xt(){return He||(He=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(K)?function(...$){return K.apply(Ye(this),$),dt(ge.get(this))}:function(...$){return dt(K.apply(Ye(this),$))}:function($,...oe){const Se=K.call(Ye(this),$,...oe);return Be.set(Se,$.sort?$.sort():[$]),dt(Se)}}(K):(K instanceof IDBTransaction&&function Ot(K){if(ye.has(K))return;const $=new Promise((oe,Se)=>{const Ze=()=>{K.removeEventListener("complete",at),K.removeEventListener("error",ht),K.removeEventListener("abort",ht)},at=()=>{oe(),Ze()},ht=()=>{Se(K.error||new DOMException("AbortError","AbortError")),Ze()};K.addEventListener("complete",at),K.addEventListener("error",ht),K.addEventListener("abort",ht)});ye.set(K,$)}(K),((K,$)=>$.some(oe=>K instanceof oe))(K,function Qn(){return Et||(Et=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(K,ce):K)}function dt(K){if(K instanceof IDBRequest)return function dr(K){const $=new Promise((oe,Se)=>{const Ze=()=>{K.removeEventListener("success",at),K.removeEventListener("error",ht)},at=()=>{oe(dt(K.result)),Ze()},ht=()=>{Se(K.error),Ze()};K.addEventListener("success",at),K.addEventListener("error",ht)});return $.then(oe=>{oe instanceof IDBCursor&&ge.set(oe,K)}).catch(()=>{}),yt.set($,K),$}(K);if(bt.has(K))return bt.get(K);const $=Qe(K);return $!==K&&(bt.set(K,$),yt.set($,K)),$}const Ye=K=>yt.get(K),je=["get","getKey","getAll","getAllKeys","count"],Ht=["put","add","delete","clear"],$t=new Map;function he(K,$){if(!(K instanceof IDBDatabase)||$ in K||"string"!=typeof $)return;if($t.get($))return $t.get($);const oe=$.replace(/FromIndex$/,""),Se=$!==oe,Ze=Ht.includes(oe);if(!(oe in(Se?IDBIndex:IDBObjectStore).prototype)||!Ze&&!je.includes(oe))return;const at=function(){var ht=(0,T.A)(function*(ln,...$n){const Ni=this.transaction(ln,Ze?"readwrite":"readonly");let Mt=Ni.store;return Se&&(Mt=Mt.index($n.shift())),(yield Promise.all([Mt[oe](...$n),Ze&&Ni.done]))[0]});return function($n){return ht.apply(this,arguments)}}();return $t.set($,at),at}!function De(K){ce=K(ce)}(K=>({...K,get:($,oe,Se)=>he($,oe)||K.get($,oe,Se),has:($,oe)=>!!he($,oe)||K.has($,oe)}));class wn{constructor($){this.container=$}getPlatformInfoString(){return this.container.getProviders().map(oe=>{if(function En(K){const $=K.getComponent();return"VERSION"===$?.type}(oe)){const Se=oe.getImmediate();return`${Se.library}/${Se.version}`}return null}).filter(oe=>oe).join(" ")}}const nn="@firebase/app",ar="0.12.1",Yn=new Ce.Vy("@firebase/app"),cs="@firebase/app-compat",Za="@firebase/analytics-compat",yo="@firebase/analytics",Xa="@firebase/app-check-compat",Q="@firebase/app-check",te="@firebase/auth",ie="@firebase/auth-compat",re="@firebase/database",le="@firebase/data-connect",ue="@firebase/database-compat",Ge="@firebase/functions",kt="@firebase/functions-compat",kn="@firebase/installations",tt="@firebase/installations-compat",rn="@firebase/messaging",Jn="@firebase/messaging-compat",di="@firebase/performance",cn="@firebase/performance-compat",hr="@firebase/remote-config",Hn="@firebase/remote-config-compat",Zn="@firebase/storage",ei="@firebase/storage-compat",Iu="@firebase/firestore",Eh="@firebase/vertexai",St="@firebase/firestore-compat",Ps="firebase",Bo="[DEFAULT]",Xn={[nn]:"fire-core",[cs]:"fire-core-compat",[yo]:"fire-analytics",[Za]:"fire-analytics-compat",[Q]:"fire-app-check",[Xa]:"fire-app-check-compat",[te]:"fire-auth",[ie]:"fire-auth-compat",[re]:"fire-rtdb",[le]:"fire-data-connect",[ue]:"fire-rtdb-compat",[Ge]:"fire-fn",[kt]:"fire-fn-compat",[kn]:"fire-iid",[tt]:"fire-iid-compat",[rn]:"fire-fcm",[Jn]:"fire-fcm-compat",[di]:"fire-perf",[cn]:"fire-perf-compat",[hr]:"fire-rc",[Hn]:"fire-rc-compat",[Zn]:"fire-gcs",[ei]:"fire-gcs-compat",[Iu]:"fire-fst",[St]:"fire-fst-compat",[Eh]:"fire-vertex","fire-js":"fire-js",[Ps]:"fire-js-all"},Gi=new Map,zi=new Map,Wi=new Map;function hi(K,$){try{K.container.addComponent($)}catch(oe){Yn.debug(`Component ${$.name} failed to register with FirebaseApp ${K.name}`,oe)}}function vo(K,$){K.container.addOrOverwriteComponent($)}function ec(K){const $=K.name;if(Wi.has($))return Yn.debug(`There were multiple attempts to register component ${$}.`),!1;Wi.set($,K);for(const oe of Gi.values())hi(oe,K);for(const oe of zi.values())hi(oe,K);return!0}function us(K,$){const oe=K.container.getProvider("heartbeat").getImmediate({optional:!0});return oe&&oe.triggerHeartbeat(),K.container.getProvider($)}function Os(K,$,oe=Bo){us(K,$).clearInstance(oe)}function tc(K){return void 0!==K.options}function ds(K){return null!=K&&void 0!==K.settings}function nc(){Wi.clear()}const fr=new ee.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Tu{constructor($,oe,Se){this._isDeleted=!1,this._options=Object.assign({},$),this._config=Object.assign({},oe),this._name=oe.name,this._automaticDataCollectionEnabled=oe.automaticDataCollectionEnabled,this._container=Se,this.container.addComponent(new st.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($){this.checkDestroyed(),this._automaticDataCollectionEnabled=$}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($){this._isDeleted=$}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}}function rc(K,$){const oe=(0,ee.u)(K.split(".")[1]);null!==oe?void 0!==JSON.parse(oe).exp?1e3*JSON.parse(oe).exp-(new Date).getTime()<=0&&console.error(`FirebaseServerApp ${$} is invalid: the token has expired.`):console.error(`FirebaseServerApp ${$} is invalid: expiration claim could not be parsed`):console.error(`FirebaseServerApp ${$} is invalid: second part could not be parsed.`)}class ic extends Tu{constructor($,oe,Se,Ze){const at=void 0!==oe.automaticDataCollectionEnabled&&oe.automaticDataCollectionEnabled,ht={name:Se,automaticDataCollectionEnabled:at};super(void 0!==$.apiKey?$:$.options,ht,Ze),this._serverConfig=Object.assign({automaticDataCollectionEnabled:at},oe),this._serverConfig.authIdToken&&rc(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&rc(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,oe.releaseOnDeref=void 0,qi(nn,ar,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount($){this.isDeleted||(this._refCount++,void 0!==$&&null!==this._finalizationRegistry&&this._finalizationRegistry.register($,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){ks(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw fr.create("server-app-deleted")}}const Uo="11.7.1";function da(K,$={}){let oe=K;"object"!=typeof $&&($={name:$});const Se=Object.assign({name:Bo,automaticDataCollectionEnabled:!1},$),Ze=Se.name;if("string"!=typeof Ze||!Ze)throw fr.create("bad-app-name",{appName:String(Ze)});if(oe||(oe=(0,ee.T9)()),!oe)throw fr.create("no-options");const at=Gi.get(Ze);if(at){if((0,ee.bD)(oe,at.options)&&(0,ee.bD)(Se,at.config))return at;throw fr.create("duplicate-app",{appName:Ze})}const ht=new st.h1(Ze);for(const $n of Wi.values())ht.addComponent($n);const ln=new Tu(oe,Se,ht);return Gi.set(Ze,ln),ln}function hs(K,$){if((0,ee.Bd)()&&!(0,ee.p7)())throw fr.create("invalid-server-app-environment");let oe;void 0===$.automaticDataCollectionEnabled&&($.automaticDataCollectionEnabled=!1),oe=tc(K)?K.options:K;const Se=Object.assign(Object.assign({},$),oe);if(void 0!==Se.releaseOnDeref&&delete Se.releaseOnDeref,void 0!==$.releaseOnDeref&&typeof FinalizationRegistry>"u")throw fr.create("finalization-registry-not-supported",{});const at=""+(Ni=JSON.stringify(Se),[...Ni].reduce((Mt,Fg)=>Math.imul(31,Mt)+Fg.charCodeAt(0)|0,0)),ht=zi.get(at);var Ni;if(ht)return ht.incRefCount($.releaseOnDeref),ht;const ln=new st.h1(at);for(const Ni of Wi.values())ln.addComponent(Ni);const $n=new ic(oe,$,at,ln);return zi.set(at,$n),$n}function xs(K=Bo){const $=Gi.get(K);if(!$&&K===Bo&&(0,ee.T9)())return da();if(!$)throw fr.create("no-app",{appName:K});return $}function bh(){return Array.from(Gi.values())}function ks(K){return oc.apply(this,arguments)}function oc(){return(oc=(0,T.A)(function*(K){let $=!1;const oe=K.name;Gi.has(oe)?($=!0,Gi.delete(oe)):zi.has(oe)&&K.decRefCount()<=0&&(zi.delete(oe),$=!0),$&&(yield Promise.all(K.container.getProviders().map(Se=>Se.delete())),K.isDeleted=!0)})).apply(this,arguments)}function qi(K,$,oe){var Se;let Ze=null!==(Se=Xn[K])&&void 0!==Se?Se:K;oe&&(Ze+=`-${oe}`);const at=Ze.match(/\s|\//),ht=$.match(/\s|\//);if(at||ht){const ln=[`Unable to register library "${Ze}" with version "${$}":`];return at&&ln.push(`library name "${Ze}" contains illegal characters (whitespace or "/")`),at&&ht&&ln.push("and"),ht&&ln.push(`version name "${$}" contains illegal characters (whitespace or "/")`),void Yn.warn(ln.join(" "))}ec(new st.uA(`${Ze}-version`,()=>({library:Ze,version:$}),"VERSION"))}function Ki(K,$){if(null!==K&&"function"!=typeof K)throw fr.create("invalid-log-argument");(0,Ce.Ey)(K,$)}function Fs(K){(0,Ce.He)(K)}const B="firebase-heartbeat-store";let de=null;function q(){return de||(de=function xt(K,$,{blocked:oe,upgrade:Se,blocking:Ze,terminated:at}={}){const ht=indexedDB.open(K,$),ln=dt(ht);return Se&&ht.addEventListener("upgradeneeded",$n=>{Se(dt(ht.result),$n.oldVersion,$n.newVersion,dt(ht.transaction),$n)}),oe&&ht.addEventListener("blocked",$n=>oe($n.oldVersion,$n.newVersion,$n)),ln.then($n=>{at&&$n.addEventListener("close",()=>at()),Ze&&$n.addEventListener("versionchange",Ni=>Ze(Ni.oldVersion,Ni.newVersion,Ni))}).catch(()=>{}),ln}("firebase-heartbeat-database",1,{upgrade:(K,$)=>{if(0===$)try{K.createObjectStore(B)}catch(oe){console.warn(oe)}}}).catch(K=>{throw fr.create("idb-open",{originalErrorMessage:K.message})})),de}function Re(){return(Re=(0,T.A)(function*(K){try{const oe=(yield q()).transaction(B),Se=yield oe.objectStore(B).get(pr(K));return yield oe.done,Se}catch($){if($ instanceof ee.g)Yn.warn($.message);else{const oe=fr.create("idb-get",{originalErrorMessage:$?.message});Yn.warn(oe.message)}}})).apply(this,arguments)}function Qt(K,$){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,T.A)(function*(K,$){try{const Se=(yield q()).transaction(B,"readwrite");yield Se.objectStore(B).put($,pr(K)),yield Se.done}catch(oe){if(oe instanceof ee.g)Yn.warn(oe.message);else{const Se=fr.create("idb-set",{originalErrorMessage:oe?.message});Yn.warn(Se.message)}}})).apply(this,arguments)}function pr(K){return`${K.name}!${K.options.appId}`}class Ri{constructor($){this.container=$,this._heartbeatsCache=null;const oe=this.container.getProvider("app").getImmediate();this._storage=new wu(oe),this._heartbeatsCachePromise=this._storage.read().then(Se=>(this._heartbeatsCache=Se,Se))}triggerHeartbeat(){var $=this;return(0,T.A)(function*(){var oe,Se;try{const at=$.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ht=$e();if(null==(null===(oe=$._heartbeatsCache)||void 0===oe?void 0:oe.heartbeats)&&($._heartbeatsCache=yield $._heartbeatsCachePromise,null==(null===(Se=$._heartbeatsCache)||void 0===Se?void 0:Se.heartbeats))||$._heartbeatsCache.lastSentHeartbeatDate===ht||$._heartbeatsCache.heartbeats.some(ln=>ln.date===ht))return;if($._heartbeatsCache.heartbeats.push({date:ht,agent:at}),$._heartbeatsCache.heartbeats.length>30){const ln=function sc(K){if(0===K.length)return-1;let $=0,oe=K[0].date;for(let Se=1;Se<K.length;Se++)K[Se].date<oe&&(oe=K[Se].date,$=Se);return $}($._heartbeatsCache.heartbeats);$._heartbeatsCache.heartbeats.splice(ln,1)}return $._storage.overwrite($._heartbeatsCache)}catch(Ze){Yn.warn(Ze)}})()}getHeartbeatsHeader(){var $=this;return(0,T.A)(function*(){var oe;try{if(null===$._heartbeatsCache&&(yield $._heartbeatsCachePromise),null==(null===(oe=$._heartbeatsCache)||void 0===oe?void 0:oe.heartbeats)||0===$._heartbeatsCache.heartbeats.length)return"";const Se=$e(),{heartbeatsToSend:Ze,unsentEntries:at}=function ha(K,$=1024){const oe=[];let Se=K.slice();for(const Ze of K){const at=oe.find(ht=>ht.agent===Ze.agent);if(at){if(at.dates.push(Ze.date),se(oe)>$){at.dates.pop();break}}else if(oe.push({agent:Ze.agent,dates:[Ze.date]}),se(oe)>$){oe.pop();break}Se=Se.slice(1)}return{heartbeatsToSend:oe,unsentEntries:Se}}($._heartbeatsCache.heartbeats),ht=(0,ee.Uj)(JSON.stringify({version:2,heartbeats:Ze}));return $._heartbeatsCache.lastSentHeartbeatDate=Se,at.length>0?($._heartbeatsCache.heartbeats=at,yield $._storage.overwrite($._heartbeatsCache)):($._heartbeatsCache.heartbeats=[],$._storage.overwrite($._heartbeatsCache)),ht}catch(Se){return Yn.warn(Se),""}})()}}function $e(){return(new Date).toISOString().substring(0,10)}class wu{constructor($){this.app=$,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,T.A)(function*(){return!!(0,ee.zW)()&&(0,ee.eX)().then(()=>!0).catch(()=>!1)})()}read(){var $=this;return(0,T.A)(function*(){if(yield $._canUseIndexedDBPromise){const Se=yield function Ke(K){return Re.apply(this,arguments)}($.app);return Se?.heartbeats?Se:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite($){var oe=this;return(0,T.A)(function*(){var Se;if(yield oe._canUseIndexedDBPromise){const at=yield oe.read();return Qt(oe.app,{lastSentHeartbeatDate:null!==(Se=$.lastSentHeartbeatDate)&&void 0!==Se?Se:at.lastSentHeartbeatDate,heartbeats:$.heartbeats})}})()}add($){var oe=this;return(0,T.A)(function*(){var Se;if(yield oe._canUseIndexedDBPromise){const at=yield oe.read();return Qt(oe.app,{lastSentHeartbeatDate:null!==(Se=$.lastSentHeartbeatDate)&&void 0!==Se?Se:at.lastSentHeartbeatDate,heartbeats:[...at.heartbeats,...$.heartbeats]})}})()}}function se(K){return(0,ee.Uj)(JSON.stringify({version:2,heartbeats:K})).length}!function jo(K){ec(new st.uA("platform-logger",$=>new wn($),"PRIVATE")),ec(new st.uA("heartbeat",$=>new Ri($),"PRIVATE")),qi(nn,ar,K),qi(nn,ar,"esm2017"),qi("fire-js","")}("")},858:(_o,Tr,gt)=>{gt.d(Tr,{cY:()=>je,FA:()=>kt,g:()=>Ge,K3:()=>Qn,u:()=>Be,Uj:()=>ye,gR:()=>ei,Fy:()=>Ht,tD:()=>hi,bD:()=>Ps,zw:()=>yt,hp:()=>zi,T9:()=>xt,XA:()=>en,mS:()=>Ot,Ku:()=>oc,ZQ:()=>$t,Bd:()=>En,sr:()=>Yn,zJ:()=>qi,c1:()=>ar,Im:()=>Eh,lT:()=>yo,zW:()=>ie,jZ:()=>he,Ll:()=>wn,lV:()=>cs,nr:()=>te,p7:()=>nn,gE:()=>Ki,Am:()=>Xn,I9:()=>Gi,eX:()=>re});var T=gt(467);const Et=function(L){const R=[];let B=0;for(let de=0;de<L.length;de++){let q=L.charCodeAt(de);q<128?R[B++]=q:q<2048?(R[B++]=q>>6|192,R[B++]=63&q|128):55296==(64512&q)&&de+1<L.length&&56320==(64512&L.charCodeAt(de+1))?(q=65536+((1023&q)<<10)+(1023&L.charCodeAt(++de)),R[B++]=q>>18|240,R[B++]=q>>12&63|128,R[B++]=q>>6&63|128,R[B++]=63&q|128):(R[B++]=q>>12|224,R[B++]=q>>6&63|128,R[B++]=63&q|128)}return R},Qn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(L,R){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();const B=R?this.byteToCharMapWebSafe_:this.byteToCharMap_,de=[];for(let q=0;q<L.length;q+=3){const Ke=L[q],Re=q+1<L.length,Qt=Re?L[q+1]:0,Nt=q+2<L.length,pr=Nt?L[q+2]:0;let Ri=(15&Qt)<<2|pr>>6,$e=63&pr;Nt||($e=64,Re||(Ri=64)),de.push(B[Ke>>2],B[(3&Ke)<<4|Qt>>4],B[Ri],B[$e])}return de.join("")},encodeString(L,R){return this.HAS_NATIVE_SUPPORT&&!R?btoa(L):this.encodeByteArray(Et(L),R)},decodeString(L,R){return this.HAS_NATIVE_SUPPORT&&!R?atob(L):function(L){const R=[];let B=0,de=0;for(;B<L.length;){const q=L[B++];if(q<128)R[de++]=String.fromCharCode(q);else if(q>191&&q<224){const Ke=L[B++];R[de++]=String.fromCharCode((31&q)<<6|63&Ke)}else if(q>239&&q<365){const Nt=((7&q)<<18|(63&L[B++])<<12|(63&L[B++])<<6|63&L[B++])-65536;R[de++]=String.fromCharCode(55296+(Nt>>10)),R[de++]=String.fromCharCode(56320+(1023&Nt))}else{const Ke=L[B++],Re=L[B++];R[de++]=String.fromCharCode((15&q)<<12|(63&Ke)<<6|63&Re)}}return R.join("")}(this.decodeStringToByteArray(L,R))},decodeStringToByteArray(L,R){this.init_();const B=R?this.charToByteMapWebSafe_:this.charToByteMap_,de=[];for(let q=0;q<L.length;){const Ke=B[L.charAt(q++)],Qt=q<L.length?B[L.charAt(q)]:0;++q;const pr=q<L.length?B[L.charAt(q)]:64;++q;const Je=q<L.length?B[L.charAt(q)]:64;if(++q,null==Ke||null==Qt||null==pr||null==Je)throw new Xt;de.push(Ke<<2|Qt>>4),64!==pr&&(de.push(Qt<<4&240|pr>>2),64!==Je&&de.push(pr<<6&192|Je))}return de},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}};class Xt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ye=function(L){return function(L){const R=Et(L);return Qn.encodeByteArray(R,!0)}(L).replace(/\./g,"")},Be=function(L){try{return Qn.decodeString(L,!0)}catch(R){console.error("base64Decode failed: ",R)}return null};function yt(L,R){if(!(R instanceof Object))return R;switch(R.constructor){case Date:return new Date(R.getTime());case Object:void 0===L&&(L={});break;case Array:L=[];break;default:return R}for(const B in R)!R.hasOwnProperty(B)||!dr(B)||(L[B]=yt(L[B],R[B]));return L}function dr(L){return"__proto__"!==L}function Ot(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Qe=()=>{try{return Ot().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const L=process.env.__FIREBASE_DEFAULTS__;return L?JSON.parse(L):void 0})()||(()=>{if(typeof document>"u")return;let L;try{L=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const R=L&&Be(L[1]);return R&&JSON.parse(R)})()}catch(L){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${L}`)}},xt=()=>{var L;return null===(L=Qe())||void 0===L?void 0:L.config},en=L=>{var R;return null===(R=Qe())||void 0===R?void 0:R[`_${L}`]};class je{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((R,B)=>{this.resolve=R,this.reject=B})}wrapCallback(R){return(B,de)=>{B?this.reject(B):this.resolve(de),"function"==typeof R&&(this.promise.catch(()=>{}),1===R.length?R(B):R(B,de))}}}function Ht(L,R){if(L.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const de=R||"demo-project",q=L.iat||0,Ke=L.sub||L.user_id;if(!Ke)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Re=Object.assign({iss:`https://securetoken.google.com/${de}`,aud:de,iat:q,exp:q+3600,auth_time:q,sub:Ke,user_id:Ke,firebase:{sign_in_provider:"custom",identities:{}}},L);return[ye(JSON.stringify({alg:"none",type:"JWT"})),ye(JSON.stringify(Re)),""].join(".")}function $t(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function he(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function wn(){var L;const R=null===(L=Qe())||void 0===L?void 0:L.forceEnvironment;if("node"===R)return!0;if("browser"===R)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function En(){return typeof window<"u"||nn()}function nn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ar(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function Yn(){const L="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof L&&void 0!==L.id}function cs(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function yo(){const L=$t();return L.indexOf("MSIE ")>=0||L.indexOf("Trident/")>=0}function te(){return!wn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"==typeof indexedDB}catch{return!1}}function re(){return new Promise((L,R)=>{try{let B=!0;const de="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(de);q.onsuccess=()=>{q.result.close(),B||self.indexedDB.deleteDatabase(de),L(!0)},q.onupgradeneeded=()=>{B=!1},q.onerror=()=>{var Ke;R((null===(Ke=q.error)||void 0===Ke?void 0:Ke.message)||"")}}catch(B){R(B)}})}class Ge extends Error{constructor(R,B,de){super(B),this.code=R,this.customData=de,this.name="FirebaseError",Object.setPrototypeOf(this,Ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kt.prototype.create)}}class kt{constructor(R,B,de){this.service=R,this.serviceName=B,this.errors=de}create(R,...B){const de=B[0]||{},q=`${this.service}/${R}`,Ke=this.errors[R],Re=Ke?function kn(L,R){return L.replace(tt,(B,de)=>{const q=R[de];return null!=q?String(q):`<${de}?>`})}(Ke,de):"Error";return new Ge(q,`${this.serviceName}: ${Re} (${q}).`,de)}}const tt=/\{\$([^}]+)}/g;function ei(L,R){return Object.prototype.hasOwnProperty.call(L,R)}function Eh(L){for(const R in L)if(Object.prototype.hasOwnProperty.call(L,R))return!1;return!0}function Ps(L,R){if(L===R)return!0;const B=Object.keys(L),de=Object.keys(R);for(const q of B){if(!de.includes(q))return!1;const Ke=L[q],Re=R[q];if(ls(Ke)&&ls(Re)){if(!Ps(Ke,Re))return!1}else if(Ke!==Re)return!1}for(const q of de)if(!B.includes(q))return!1;return!0}function ls(L){return null!==L&&"object"==typeof L}function Xn(L){const R=[];for(const[B,de]of Object.entries(L))Array.isArray(de)?de.forEach(q=>{R.push(encodeURIComponent(B)+"="+encodeURIComponent(q))}):R.push(encodeURIComponent(B)+"="+encodeURIComponent(de));return R.length?"&"+R.join("&"):""}function Gi(L){const R={};return L.replace(/^\?/,"").split("&").forEach(de=>{if(de){const[q,Ke]=de.split("=");R[decodeURIComponent(q)]=decodeURIComponent(Ke)}}),R}function zi(L){const R=L.indexOf("?");if(!R)return"";const B=L.indexOf("#",R);return L.substring(R,B>0?B:void 0)}function hi(L,R){const B=new vo(L,R);return B.subscribe.bind(B)}class vo{constructor(R,B){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=B,this.task.then(()=>{R(this)}).catch(de=>{this.error(de)})}next(R){this.forEachObserver(B=>{B.next(R)})}error(R){this.forEachObserver(B=>{B.error(R)}),this.close(R)}complete(){this.forEachObserver(R=>{R.complete()}),this.close()}subscribe(R,B,de){let q;if(void 0===R&&void 0===B&&void 0===de)throw new Error("Missing Observer.");q=function us(L,R){if("object"!=typeof L||null===L)return!1;for(const B of R)if(B in L&&"function"==typeof L[B])return!0;return!1}(R,["next","error","complete"])?R:{next:R,error:B,complete:de},void 0===q.next&&(q.next=Os),void 0===q.error&&(q.error=Os),void 0===q.complete&&(q.complete=Os);const Ke=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch{}}),this.observers.push(q),Ke}unsubscribeOne(R){void 0===this.observers||void 0===this.observers[R]||(delete this.observers[R],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(R){if(!this.finalized)for(let B=0;B<this.observers.length;B++)this.sendOne(B,R)}sendOne(R,B){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[R])try{B(this.observers[R])}catch(de){typeof console<"u"&&console.error&&console.error(de)}})}close(R){this.finalized||(this.finalized=!0,void 0!==R&&(this.finalError=R),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Os(){}function oc(L){return L&&L._delegate?L._delegate:L}function qi(L){return L.endsWith(".cloudworkstations.dev")}function Ki(L){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,T.A)(function*(L){return(yield fetch(L,{credentials:"include"})).ok})).apply(this,arguments)}},915:(_o,Tr,gt)=>{var T=gt(467),st=gt(345),Ce=gt(852),ee=gt(858),xn=gt(41),Et=gt(635),He=gt(362);const dr=function bt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}},Ot=function yt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ce=new ee.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Pe=new xn.Vy("@firebase/auth");function dt(p,...l){Pe.logLevel<=xn.$b.ERROR&&Pe.error(`Auth (${Ce.SDK_VERSION}): ${p}`,...l)}function Ye(p,...l){throw $t(p,...l)}function xt(p,...l){return $t(p,...l)}function en(p,l,d){const g=Object.assign(Object.assign({},Ot()),{[l]:d});return new ee.FA("auth","Firebase",g).create(l,{appName:p.name})}function je(p){return en(p,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ht(p,l,d){if(!(l instanceof d))throw d.name!==l.constructor.name&&Ye(p,"argument-error"),en(p,"argument-error",`Type of ${l.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $t(p,...l){if("string"!=typeof p){const d=l[0],g=[...l.slice(1)];return g[0]&&(g[0].appName=p.name),p._errorFactory.create(d,...g)}return ce.create(p,...l)}function he(p,l,...d){if(!p)throw $t(l,...d)}function wn(p){const l="INTERNAL ASSERTION FAILED: "+p;throw dt(l),new Error(l)}function En(p,l){p||wn(l)}function nn(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function ar(){return"http:"===Yn()||"https:"===Yn()}function Yn(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class yo{constructor(l,d){this.shortDelay=l,this.longDelay=d,En(d>l,"Short delay should be less than long delay!"),this.isMobile=(0,ee.jZ)()||(0,ee.lV)()}get(){return function cs(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ar()||(0,ee.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Xa(p,l){En(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return l?`${d}${l.startsWith("/")?l.slice(1):l}`:d}class Q{static initialize(l,d,g){this.fetchImpl=l,d&&(this.headersImpl=d),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const te={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ie=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],re=new yo(3e4,6e4);function le(p,l){return p.tenantId&&!l.tenantId?Object.assign(Object.assign({},l),{tenantId:p.tenantId}):l}function ue(p,l,d,g){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,T.A)(function*(p,l,d,g,E={}){return kt(p,E,(0,T.A)(function*(){let w={},M={};g&&("GET"===l?M=g:w={body:JSON.stringify(g)});const V=(0,ee.Am)(Object.assign({key:p.config.apiKey},M)).slice(1),Y=yield p._getAdditionalHeaders();Y["Content-Type"]="application/json",p.languageCode&&(Y["X-Firebase-Locale"]=p.languageCode);const Ie=Object.assign({method:l,headers:Y},w);return(0,ee.c1)()||(Ie.referrerPolicy="no-referrer"),p.emulatorConfig&&(0,ee.zJ)(p.emulatorConfig.host)&&(Ie.credentials="include"),Q.fetch()(yield Jn(p,p.config.apiHost,d,V),Ie)}))})).apply(this,arguments)}function kt(p,l,d){return kn.apply(this,arguments)}function kn(){return(kn=(0,T.A)(function*(p,l,d){p._canInitEmulator=!1;const g=Object.assign(Object.assign({},te),l);try{const E=new hr(p),w=yield Promise.race([d(),E.promise]);E.clearNetworkTimeout();const M=yield w.json();if("needConfirmation"in M)throw Hn(p,"account-exists-with-different-credential",M);if(w.ok&&!("errorMessage"in M))return M;{const V=w.ok?M.errorMessage:M.error.message,[Y,Ie]=V.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Y)throw Hn(p,"credential-already-in-use",M);if("EMAIL_EXISTS"===Y)throw Hn(p,"email-already-in-use",M);if("USER_DISABLED"===Y)throw Hn(p,"user-disabled",M);const Oe=g[Y]||Y.toLowerCase().replace(/[_\s]+/g,"-");if(Ie)throw en(p,Oe,Ie);Ye(p,Oe)}}catch(E){if(E instanceof ee.g)throw E;Ye(p,"network-request-failed",{message:String(E)})}})).apply(this,arguments)}function tt(p,l,d,g){return rn.apply(this,arguments)}function rn(){return(rn=(0,T.A)(function*(p,l,d,g,E={}){const w=yield ue(p,l,d,g,E);return"mfaPendingCredential"in w&&Ye(p,"multi-factor-auth-required",{_serverResponse:w}),w})).apply(this,arguments)}function Jn(p,l,d,g){return di.apply(this,arguments)}function di(){return(di=(0,T.A)(function*(p,l,d,g){const E=`${l}${d}?${g}`,w=p,M=w.config.emulator?Xa(p.config,E):`${p.config.apiScheme}://${E}`;return ie.includes(d)&&(yield w._persistenceManagerAvailable,"COOKIE"===w._getPersistenceType())?w._getPersistence()._getFinalTarget(M).toString():M})).apply(this,arguments)}function cn(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hr{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(l){this.auth=l,this.timer=null,this.promise=new Promise((d,g)=>{this.timer=setTimeout(()=>g(xt(this.auth,"network-request-failed")),re.get())})}}function Hn(p,l,d){const g={appName:p.name};d.email&&(g.email=d.email),d.phoneNumber&&(g.phoneNumber=d.phoneNumber);const E=xt(p,l,g);return E.customData._tokenResponse=d,E}function Zn(p){return void 0!==p&&void 0!==p.getResponse}function ei(p){return void 0!==p&&void 0!==p.enterprise}class Iu{constructor(l){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===l.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=l.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=l.recaptchaEnforcementState}getProviderEnforcementState(l){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===l)return cn(d.enforcementState);return null}isProviderEnabled(l){return"ENFORCE"===this.getProviderEnforcementState(l)||"AUDIT"===this.getProviderEnforcementState(l)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}function St(){return(St=(0,T.A)(function*(p){return(yield ue(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ps(p,l){return ls.apply(this,arguments)}function ls(){return(ls=(0,T.A)(function*(p,l){return ue(p,"GET","/v2/recaptchaConfig",le(p,l))})).apply(this,arguments)}function Xn(){return(Xn=(0,T.A)(function*(p,l){return ue(p,"POST","/v1/accounts:delete",l)})).apply(this,arguments)}function zi(){return(zi=(0,T.A)(function*(p,l){return ue(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Wi(p,l){return hi.apply(this,arguments)}function hi(){return(hi=(0,T.A)(function*(p,l){return ue(p,"POST","/v1/accounts:lookup",l)})).apply(this,arguments)}function vo(p){if(p)try{const l=new Date(Number(p));if(!isNaN(l.getTime()))return l.toUTCString()}catch{}}function Os(){return(Os=(0,T.A)(function*(p,l=!1){const d=(0,ee.Ku)(p),g=yield d.getIdToken(l),E=ds(g);he(E&&E.exp&&E.auth_time&&E.iat,d.auth,"internal-error");const w="object"==typeof E.firebase?E.firebase:void 0,M=w?.sign_in_provider;return{claims:E,token:g,authTime:vo(tc(E.auth_time)),issuedAtTime:vo(tc(E.iat)),expirationTime:vo(tc(E.exp)),signInProvider:M||null,signInSecondFactor:w?.sign_in_second_factor||null}})).apply(this,arguments)}function tc(p){return 1e3*Number(p)}function ds(p){const[l,d,g]=p.split(".");if(void 0===l||void 0===d||void 0===g)return dt("JWT malformed, contained fewer than 3 sections"),null;try{const E=(0,ee.u)(d);return E?JSON.parse(E):(dt("Failed to decode base64 JWT payload"),null)}catch(E){return dt("Caught error parsing JWT payload as JSON",E?.toString()),null}}function nc(p){const l=ds(p);return he(l,"internal-error"),he(typeof l.exp<"u","internal-error"),he(typeof l.iat<"u","internal-error"),Number(l.exp)-Number(l.iat)}function xr(p,l){return fr.apply(this,arguments)}function fr(){return(fr=(0,T.A)(function*(p,l,d=!1){if(d)return l;try{return yield l}catch(g){throw g instanceof ee.g&&function Tu({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(g)&&p.auth.currentUser===p&&(yield p.auth.signOut()),g}})).apply(this,arguments)}class rc{constructor(l){this.user=l,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(l){var d;if(l){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const E=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,E)}}schedule(l=!1){var d=this;if(!this.isRunning)return;const g=this.getInterval(l);this.timerId=setTimeout((0,T.A)(function*(){yield d.iteration()}),g)}iteration(){var l=this;return(0,T.A)(function*(){try{yield l.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&l.schedule(!0))}l.schedule()})()}}class ic{constructor(l,d){this.createdAt=l,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=vo(this.lastLoginAt),this.creationTime=vo(this.createdAt)}_copy(l){this.createdAt=l.createdAt,this.lastLoginAt=l.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Uo(p){return da.apply(this,arguments)}function da(){return(da=(0,T.A)(function*(p){var l;const d=p.auth,g=yield p.getIdToken(),E=yield xr(p,Wi(d,{idToken:g}));he(E?.users.length,d,"internal-error");const w=E.users[0];p._notifyReloadListener(w);const M=null!==(l=w.providerUserInfo)&&void 0!==l&&l.length?ks(w.providerUserInfo):[],V=function bh(p,l){return[...p.filter(g=>!l.some(E=>E.providerId===g.providerId)),...l]}(p.providerData,M),Oe=!!p.isAnonymous&&!(p.email&&w.passwordHash||V?.length),Te={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:V,metadata:new ic(w.createdAt,w.lastLoginAt),isAnonymous:Oe};Object.assign(p,Te)})).apply(this,arguments)}function xs(){return(xs=(0,T.A)(function*(p){const l=(0,ee.Ku)(p);yield Uo(l),yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)})).apply(this,arguments)}function ks(p){return p.map(l=>{var{providerId:d}=l,g=(0,Et.Tt)(l,["providerId"]);return{providerId:d,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}function qi(){return(qi=(0,T.A)(function*(p,l){const d=yield kt(p,{},(0,T.A)(function*(){const g=(0,ee.Am)({grant_type:"refresh_token",refresh_token:l}).slice(1),{tokenApiHost:E,apiKey:w}=p.config,M=yield Jn(p,E,"/v1/token",`key=${w}`),V=yield p._getAdditionalHeaders();return V["Content-Type"]="application/x-www-form-urlencoded",Q.fetch()(M,{method:"POST",headers:V,body:g})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function Fs(){return(Fs=(0,T.A)(function*(p,l){return ue(p,"POST","/v2/accounts:revokeToken",le(p,l))})).apply(this,arguments)}class L{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(l){he(l.idToken,"internal-error"),he(typeof l.idToken<"u","internal-error"),he(typeof l.refreshToken<"u","internal-error");const d="expiresIn"in l&&typeof l.expiresIn<"u"?Number(l.expiresIn):nc(l.idToken);this.updateTokensAndExpiration(l.idToken,l.refreshToken,d)}updateFromIdToken(l){he(0!==l.length,"internal-error");const d=nc(l);this.updateTokensAndExpiration(l,null,d)}getToken(l){var d=this;return(0,T.A)(function*(g,E=!1){return E||!d.accessToken||d.isExpired?(he(d.refreshToken,g,"user-token-expired"),d.refreshToken?(yield d.refresh(g,d.refreshToken),d.accessToken):null):d.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(l,d){var g=this;return(0,T.A)(function*(){const{accessToken:E,refreshToken:w,expiresIn:M}=yield function oc(p,l){return qi.apply(this,arguments)}(l,d);g.updateTokensAndExpiration(E,w,Number(M))})()}updateTokensAndExpiration(l,d,g){this.refreshToken=d||null,this.accessToken=l||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(l,d){const{refreshToken:g,accessToken:E,expirationTime:w}=d,M=new L;return g&&(he("string"==typeof g,"internal-error",{appName:l}),M.refreshToken=g),E&&(he("string"==typeof E,"internal-error",{appName:l}),M.accessToken=E),w&&(he("number"==typeof w,"internal-error",{appName:l}),M.expirationTime=w),M}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(l){this.accessToken=l.accessToken,this.refreshToken=l.refreshToken,this.expirationTime=l.expirationTime}_clone(){return Object.assign(new L,this.toJSON())}_performRefresh(){return wn("not implemented")}}function R(p,l){he("string"==typeof p||typeof p>"u","internal-error",{appName:l})}class B{constructor(l){var{uid:d,auth:g,stsTokenManager:E}=l,w=(0,Et.Tt)(l,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rc(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=g,this.stsTokenManager=E,this.accessToken=E.accessToken,this.displayName=w.displayName||null,this.email=w.email||null,this.emailVerified=w.emailVerified||!1,this.phoneNumber=w.phoneNumber||null,this.photoURL=w.photoURL||null,this.isAnonymous=w.isAnonymous||!1,this.tenantId=w.tenantId||null,this.providerData=w.providerData?[...w.providerData]:[],this.metadata=new ic(w.createdAt||void 0,w.lastLoginAt||void 0)}getIdToken(l){var d=this;return(0,T.A)(function*(){const g=yield xr(d,d.stsTokenManager.getToken(d.auth,l));return he(g,d.auth,"internal-error"),d.accessToken!==g&&(d.accessToken=g,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),g})()}getIdTokenResult(l){return function us(p){return Os.apply(this,arguments)}(this,l)}reload(){return function hs(p){return xs.apply(this,arguments)}(this)}_assign(l){this!==l&&(he(this.uid===l.uid,this.auth,"internal-error"),this.displayName=l.displayName,this.photoURL=l.photoURL,this.email=l.email,this.emailVerified=l.emailVerified,this.phoneNumber=l.phoneNumber,this.isAnonymous=l.isAnonymous,this.tenantId=l.tenantId,this.providerData=l.providerData.map(d=>Object.assign({},d)),this.metadata._copy(l.metadata),this.stsTokenManager._assign(l.stsTokenManager))}_clone(l){const d=new B(Object.assign(Object.assign({},this),{auth:l,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(l){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=l,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(l){this.reloadListener?this.reloadListener(l):this.reloadUserInfo=l}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(l){var d=this;return(0,T.A)(function*(g,E=!1){let w=!1;g.idToken&&g.idToken!==d.stsTokenManager.accessToken&&(d.stsTokenManager.updateFromServerResponse(g),w=!0),E&&(yield Uo(d)),yield d.auth._persistUserIfCurrent(d),w&&d.auth._notifyListenersIfCurrent(d)}).apply(this,arguments)}delete(){var l=this;return(0,T.A)(function*(){if((0,Ce._isFirebaseServerApp)(l.auth.app))return Promise.reject(je(l.auth));const d=yield l.getIdToken();return yield xr(l,function Bo(p,l){return Xn.apply(this,arguments)}(l.auth,{idToken:d})),l.stsTokenManager.clearRefreshToken(),l.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(l=>Object.assign({},l)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(l,d){var g,E,w,M,V,Y,Ie,Oe;const Te=null!==(g=d.displayName)&&void 0!==g?g:void 0,rt=null!==(E=d.email)&&void 0!==E?E:void 0,An=null!==(w=d.phoneNumber)&&void 0!==w?w:void 0,no=null!==(M=d.photoURL)&&void 0!==M?M:void 0,bl=null!==(V=d.tenantId)&&void 0!==V?V:void 0,ro=null!==(Y=d._redirectEventId)&&void 0!==Y?Y:void 0,iE=null!==(Ie=d.createdAt)&&void 0!==Ie?Ie:void 0,$m=null!==(Oe=d.lastLoginAt)&&void 0!==Oe?Oe:void 0,{uid:oE,emailVerified:XD,isAnonymous:Gm,providerData:zm,stsTokenManager:sE}=d;he(oE&&sE,l,"internal-error");const eC=L.fromJSON(this.name,sE);he("string"==typeof oE,l,"internal-error"),R(Te,l.name),R(rt,l.name),he("boolean"==typeof XD,l,"internal-error"),he("boolean"==typeof Gm,l,"internal-error"),R(An,l.name),R(no,l.name),R(bl,l.name),R(ro,l.name),R(iE,l.name),R($m,l.name);const ba=new B({uid:oE,auth:l,email:rt,emailVerified:XD,displayName:Te,isAnonymous:Gm,photoURL:no,phoneNumber:An,tenantId:bl,stsTokenManager:eC,createdAt:iE,lastLoginAt:$m});return zm&&Array.isArray(zm)&&(ba.providerData=zm.map(tn=>Object.assign({},tn))),ro&&(ba._redirectEventId=ro),ba}static _fromIdTokenResponse(l,d){return(0,T.A)(function*(g,E,w=!1){const M=new L;M.updateFromServerResponse(E);const V=new B({uid:E.localId,auth:g,stsTokenManager:M,isAnonymous:w});return yield Uo(V),V}).apply(this,arguments)}static _fromGetAccountInfoResponse(l,d,g){return(0,T.A)(function*(){const E=d.users[0];he(void 0!==E.localId,"internal-error");const w=void 0!==E.providerUserInfo?ks(E.providerUserInfo):[],M=!(E.email&&E.passwordHash||w?.length),V=new L;V.updateFromIdToken(g);const Y=new B({uid:E.localId,auth:l,stsTokenManager:V,isAnonymous:M}),Ie={uid:E.localId,displayName:E.displayName||null,photoURL:E.photoUrl||null,email:E.email||null,emailVerified:E.emailVerified||!1,phoneNumber:E.phoneNumber||null,tenantId:E.tenantId||null,providerData:w,metadata:new ic(E.createdAt,E.lastLoginAt),isAnonymous:!(E.email&&E.passwordHash||w?.length)};return Object.assign(Y,Ie),Y})()}}const de=new Map;function q(p){En(p instanceof Function,"Expected a class definition");let l=de.get(p);return l?(En(l instanceof p,"Instance stored in cache mismatched with class"),l):(l=new p,de.set(p,l),l)}const Re=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,T.A)(function*(){return!0})()}_set(d,g){var E=this;return(0,T.A)(function*(){E.storage[d]=g})()}_get(d){var g=this;return(0,T.A)(function*(){const E=g.storage[d];return void 0===E?null:E})()}_remove(d){var g=this;return(0,T.A)(function*(){delete g.storage[d]})()}_addListener(d,g){}_removeListener(d,g){}}return p.type="NONE",p})();function Qt(p,l,d){return`firebase:${p}:${l}:${d}`}class Nt{constructor(l,d,g){this.persistence=l,this.auth=d,this.userKey=g;const{config:E,name:w}=this.auth;this.fullUserKey=Qt(this.userKey,E.apiKey,w),this.fullPersistenceKey=Qt("persistence",E.apiKey,w),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(l){return this.persistence._set(this.fullUserKey,l.toJSON())}getCurrentUser(){var l=this;return(0,T.A)(function*(){const d=yield l.persistence._get(l.fullUserKey);if(!d)return null;if("string"==typeof d){const g=yield Wi(l.auth,{idToken:d}).catch(()=>{});return g?B._fromGetAccountInfoResponse(l.auth,g,d):null}return B._fromJSON(l.auth,d)})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(l){var d=this;return(0,T.A)(function*(){if(d.persistence===l)return;const g=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=l,g?d.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(l,d){return(0,T.A)(function*(g,E,w="authUser"){if(!E.length)return new Nt(q(Re),g,w);const M=(yield Promise.all(E.map(function(){var Te=(0,T.A)(function*(rt){if(yield rt._isAvailable())return rt});return function(rt){return Te.apply(this,arguments)}}()))).filter(Te=>Te);let V=M[0]||q(Re);const Y=Qt(w,g.config.apiKey,g.name);let Ie=null;for(const Te of E)try{const rt=yield Te._get(Y);if(rt){let An;if("string"==typeof rt){const no=yield Wi(g,{idToken:rt}).catch(()=>{});if(!no)break;An=yield B._fromGetAccountInfoResponse(g,no,rt)}else An=B._fromJSON(g,rt);Te!==V&&(Ie=An),V=Te;break}}catch{}const Oe=M.filter(Te=>Te._shouldAllowMigration);return V._shouldAllowMigration&&Oe.length?(V=Oe[0],Ie&&(yield V._set(Y,Ie.toJSON())),yield Promise.all(E.map(function(){var Te=(0,T.A)(function*(rt){if(rt!==V)try{yield rt._remove(Y)}catch{}});return function(rt){return Te.apply(this,arguments)}}())),new Nt(V,g,w)):new Nt(V,g,w)}).apply(this,arguments)}}function pr(p){const l=p.toLowerCase();if(l.includes("opera/")||l.includes("opr/")||l.includes("opios/"))return"Opera";if($e(l))return"IEMobile";if(l.includes("msie")||l.includes("trident/"))return"IE";if(l.includes("edge/"))return"Edge";if(Lt(l))return"Firefox";if(l.includes("silk/"))return"Silk";if(wu(l))return"Blackberry";if(se(l))return"Webos";if(Je(l))return"Safari";if((l.includes("chrome/")||Ri(l))&&!l.includes("edge/"))return"Chrome";if(ha(l))return"Android";{const g=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function Lt(p=(0,ee.ZQ)()){return/firefox\//i.test(p)}function Je(p=(0,ee.ZQ)()){const l=p.toLowerCase();return l.includes("safari/")&&!l.includes("chrome/")&&!l.includes("crios/")&&!l.includes("android")}function Ri(p=(0,ee.ZQ)()){return/crios\//i.test(p)}function $e(p=(0,ee.ZQ)()){return/iemobile/i.test(p)}function ha(p=(0,ee.ZQ)()){return/android/i.test(p)}function wu(p=(0,ee.ZQ)()){return/blackberry/i.test(p)}function se(p=(0,ee.ZQ)()){return/webos/i.test(p)}function sc(p=(0,ee.ZQ)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function oe(p=(0,ee.ZQ)()){return sc(p)||ha(p)||se(p)||wu(p)||/windows phone/i.test(p)||$e(p)}function Se(p,l=[]){let d;switch(p){case"Browser":d=pr((0,ee.ZQ)());break;case"Worker":d=`${pr((0,ee.ZQ)())}-${p}`;break;default:d=p}const g=l.length?l.join(","):"FirebaseCore-web";return`${d}/JsCore/${Ce.SDK_VERSION}/${g}`}class Ze{constructor(l){this.auth=l,this.queue=[]}pushCallback(l,d){const g=w=>new Promise((M,V)=>{try{M(l(w))}catch(Y){V(Y)}});g.onAbort=d,this.queue.push(g);const E=this.queue.length-1;return()=>{this.queue[E]=()=>Promise.resolve()}}runMiddleware(l){var d=this;return(0,T.A)(function*(){if(d.auth.currentUser===l)return;const g=[];try{for(const E of d.queue)yield E(l),E.onAbort&&g.push(E.onAbort)}catch(E){g.reverse();for(const w of g)try{w()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:E?.message})}})()}}function ht(){return(ht=(0,T.A)(function*(p,l={}){return ue(p,"GET","/v2/passwordPolicy",le(p,l))})).apply(this,arguments)}class $n{constructor(l){var d,g,E,w;const M=l.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=M.minPasswordLength)&&void 0!==d?d:6,M.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=M.maxPasswordLength),void 0!==M.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=M.containsLowercaseCharacter),void 0!==M.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=M.containsUppercaseCharacter),void 0!==M.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=M.containsNumericCharacter),void 0!==M.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=M.containsNonAlphanumericCharacter),this.enforcementState=l.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(E=null===(g=l.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==E?E:"",this.forceUpgradeOnSignin=null!==(w=l.forceUpgradeOnSignin)&&void 0!==w&&w,this.schemaVersion=l.schemaVersion}validatePassword(l){var d,g,E,w,M,V;const Y={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(l,Y),this.validatePasswordCharacterOptions(l,Y),Y.isValid&&(Y.isValid=null===(d=Y.meetsMinPasswordLength)||void 0===d||d),Y.isValid&&(Y.isValid=null===(g=Y.meetsMaxPasswordLength)||void 0===g||g),Y.isValid&&(Y.isValid=null===(E=Y.containsLowercaseLetter)||void 0===E||E),Y.isValid&&(Y.isValid=null===(w=Y.containsUppercaseLetter)||void 0===w||w),Y.isValid&&(Y.isValid=null===(M=Y.containsNumericCharacter)||void 0===M||M),Y.isValid&&(Y.isValid=null===(V=Y.containsNonAlphanumericCharacter)||void 0===V||V),Y}validatePasswordLengthOptions(l,d){const g=this.customStrengthOptions.minPasswordLength,E=this.customStrengthOptions.maxPasswordLength;g&&(d.meetsMinPasswordLength=l.length>=g),E&&(d.meetsMaxPasswordLength=l.length<=E)}validatePasswordCharacterOptions(l,d){let g;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let E=0;E<l.length;E++)g=l.charAt(E),this.updatePasswordCharacterOptionsStatuses(d,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(l,d,g,E,w){this.customStrengthOptions.containsLowercaseLetter&&(l.containsLowercaseLetter||(l.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(l.containsUppercaseLetter||(l.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(l.containsNumericCharacter||(l.containsNumericCharacter=E)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(l.containsNonAlphanumericCharacter||(l.containsNonAlphanumericCharacter=w))}}class Ni{constructor(l,d,g,E){this.app=l,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=g,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fg(this),this.idTokenSubscription=new Fg(this),this.beforeStateQueue=new Ze(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ce,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=l.name,this.clientVersion=E.sdkClientVersion,this._persistenceManagerAvailable=new Promise(w=>this._resolvePersistenceManagerAvailable=w)}_initializeWithPersistence(l,d){var g=this;return d&&(this._popupRedirectResolver=q(d)),this._initializationPromise=this.queue((0,T.A)(function*(){var E,w,M;if(!g._deleted&&(g.persistenceManager=yield Nt.create(g,l),null===(E=g._resolvePersistenceManagerAvailable)||void 0===E||E.call(g),!g._deleted)){if(null!==(w=g._popupRedirectResolver)&&void 0!==w&&w._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(d),g.lastNotifiedUid=(null===(M=g.currentUser)||void 0===M?void 0:M.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var l=this;return(0,T.A)(function*(){if(l._deleted)return;const d=yield l.assertedPersistence.getCurrentUser();if(l.currentUser||d){if(l.currentUser&&d&&l.currentUser.uid===d.uid)return l._currentUser._assign(d),void(yield l.currentUser.getIdToken());yield l._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(l){var d=this;return(0,T.A)(function*(){try{const g=yield Wi(d,{idToken:l}),E=yield B._fromGetAccountInfoResponse(d,g,l);yield d.directlySetCurrentUser(E)}catch(g){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",g),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(l){var d=this;return(0,T.A)(function*(){var g;if((0,Ce._isFirebaseServerApp)(d.app)){const V=d.app.settings.authIdToken;return V?new Promise(Y=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(V).then(Y,Y))}):d.directlySetCurrentUser(null)}const E=yield d.assertedPersistence.getCurrentUser();let w=E,M=!1;if(l&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const V=null===(g=d.redirectUser)||void 0===g?void 0:g._redirectEventId,Y=w?._redirectEventId,Ie=yield d.tryRedirectSignIn(l);(!V||V===Y)&&Ie?.user&&(w=Ie.user,M=!0)}if(!w)return d.directlySetCurrentUser(null);if(!w._redirectEventId){if(M)try{yield d.beforeStateQueue.runMiddleware(w)}catch(V){w=E,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(V))}return w?d.reloadAndSetCurrentUserOrClear(w):d.directlySetCurrentUser(null)}return he(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===w._redirectEventId?d.directlySetCurrentUser(w):d.reloadAndSetCurrentUserOrClear(w)})()}tryRedirectSignIn(l){var d=this;return(0,T.A)(function*(){let g=null;try{g=yield d._popupRedirectResolver._completeRedirectFn(d,l,!0)}catch{yield d._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(l){var d=this;return(0,T.A)(function*(){try{yield Uo(l)}catch(g){if("auth/network-request-failed"!==g?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(l)})()}useDeviceLanguage(){this.languageCode=function Za(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var l=this;return(0,T.A)(function*(){l._deleted=!0})()}updateCurrentUser(l){var d=this;return(0,T.A)(function*(){if((0,Ce._isFirebaseServerApp)(d.app))return Promise.reject(je(d));const g=l?(0,ee.Ku)(l):null;return g&&he(g.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(g&&g._clone(d))})()}_updateCurrentUser(l){var d=this;return(0,T.A)(function*(g,E=!1){if(!d._deleted)return g&&he(d.tenantId===g.tenantId,d,"tenant-id-mismatch"),E||(yield d.beforeStateQueue.runMiddleware(g)),d.queue((0,T.A)(function*(){yield d.directlySetCurrentUser(g),d.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var l=this;return(0,T.A)(function*(){return(0,Ce._isFirebaseServerApp)(l.app)?Promise.reject(je(l)):(yield l.beforeStateQueue.runMiddleware(null),(l.redirectPersistenceManager||l._popupRedirectResolver)&&(yield l._setRedirectUser(null)),l._updateCurrentUser(null,!0))})()}setPersistence(l){var d=this;return(0,Ce._isFirebaseServerApp)(this.app)?Promise.reject(je(this)):this.queue((0,T.A)(function*(){yield d.assertedPersistence.setPersistence(q(l))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(l){var d=this;return(0,T.A)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const g=d._getPasswordPolicyInternal();return g.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(l)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var l=this;return(0,T.A)(function*(){const d=yield function at(p){return ht.apply(this,arguments)}(l),g=new $n(d);null===l.tenantId?l._projectPasswordPolicy=g:l._tenantPasswordPolicies[l.tenantId]=g})()}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(l){this._errorFactory=new ee.FA("auth","Firebase",l())}onAuthStateChanged(l,d,g){return this.registerStateListener(this.authStateSubscription,l,d,g)}beforeAuthStateChanged(l,d){return this.beforeStateQueue.pushCallback(l,d)}onIdTokenChanged(l,d,g){return this.registerStateListener(this.idTokenSubscription,l,d,g)}authStateReady(){return new Promise((l,d)=>{if(this.currentUser)l();else{const g=this.onAuthStateChanged(()=>{g(),l()},d)}})}revokeAccessToken(l){var d=this;return(0,T.A)(function*(){if(d.currentUser){const g=yield d.currentUser.getIdToken(),E={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:l,idToken:g};null!=d.tenantId&&(E.tenantId=d.tenantId),yield function Ki(p,l){return Fs.apply(this,arguments)}(d,E)}})()}toJSON(){var l;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(l=this._currentUser)||void 0===l?void 0:l.toJSON()}}_setRedirectUser(l,d){var g=this;return(0,T.A)(function*(){const E=yield g.getOrInitRedirectPersistenceManager(d);return null===l?E.removeCurrentUser():E.setCurrentUser(l)})()}getOrInitRedirectPersistenceManager(l){var d=this;return(0,T.A)(function*(){if(!d.redirectPersistenceManager){const g=l&&q(l)||d._popupRedirectResolver;he(g,d,"argument-error"),d.redirectPersistenceManager=yield Nt.create(d,[q(g._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(l){var d=this;return(0,T.A)(function*(){var g,E;return d._isInitialized&&(yield d.queue((0,T.A)(function*(){}))),(null===(g=d._currentUser)||void 0===g?void 0:g._redirectEventId)===l?d._currentUser:(null===(E=d.redirectUser)||void 0===E?void 0:E._redirectEventId)===l?d.redirectUser:null})()}_persistUserIfCurrent(l){var d=this;return(0,T.A)(function*(){if(l===d.currentUser)return d.queue((0,T.A)(function*(){return d.directlySetCurrentUser(l)}))})()}_notifyListenersIfCurrent(l){l===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var l,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(d=null===(l=this.currentUser)||void 0===l?void 0:l.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(l,d,g,E){if(this._deleted)return()=>{};const w="function"==typeof d?d:d.next.bind(d);let M=!1;const V=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(V,this,"internal-error"),V.then(()=>{M||w(this.currentUser)}),"function"==typeof d){const Y=l.addObserver(d,g,E);return()=>{M=!0,Y()}}{const Y=l.addObserver(d);return()=>{M=!0,Y()}}}directlySetCurrentUser(l){var d=this;return(0,T.A)(function*(){d.currentUser&&d.currentUser!==l&&d._currentUser._stopProactiveRefresh(),l&&d.isProactiveRefreshEnabled&&l._startProactiveRefresh(),d.currentUser=l,l?yield d.assertedPersistence.setCurrentUser(l):yield d.assertedPersistence.removeCurrentUser()})()}queue(l){return this.operations=this.operations.then(l,l),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(l){!l||this.frameworks.includes(l)||(this.frameworks.push(l),this.frameworks.sort(),this.clientVersion=Se(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var l=this;return(0,T.A)(function*(){var d;const g={"X-Client-Version":l.clientVersion};l.app.options.appId&&(g["X-Firebase-gmpid"]=l.app.options.appId);const E=yield null===(d=l.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();E&&(g["X-Firebase-Client"]=E);const w=yield l._getAppCheckToken();return w&&(g["X-Firebase-AppCheck"]=w),g})()}_getAppCheckToken(){var l=this;return(0,T.A)(function*(){var d;if((0,Ce._isFirebaseServerApp)(l.app)&&l.app.settings.appCheckToken)return l.app.settings.appCheckToken;const g=yield null===(d=l.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return g?.error&&function Qe(p,...l){Pe.logLevel<=xn.$b.WARN&&Pe.warn(`Auth (${Ce.SDK_VERSION}): ${p}`,...l)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function Mt(p){return(0,ee.Ku)(p)}class Fg{constructor(l){this.auth=l,this.observer=null,this.addObserver=(0,ee.tD)(d=>this.observer=d)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let bn={loadJS:()=>(0,T.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function l0(p){return bn.loadJS(p)}function Ih(p){return`__${p}${Math.floor(1e6*Math.random())}`}const Gt=1e12;class ft{constructor(l){this.auth=l,this.counter=Gt,this._widgets=new Map}render(l,d){const g=this.counter;return this._widgets.set(g,new JO(l,this.auth.name,d||{})),this.counter++,g}reset(l){var d;const g=l||Gt;null===(d=this._widgets.get(g))||void 0===d||d.delete(),this._widgets.delete(g)}getResponse(l){var d;return(null===(d=this._widgets.get(l||Gt))||void 0===d?void 0:d.getResponse())||""}execute(l){var d=this;return(0,T.A)(function*(){var g;return null===(g=d._widgets.get(l||Gt))||void 0===g||g.execute(),""})()}}class Th{constructor(){this.enterprise=new Qi}ready(l){l()}execute(l,d){return Promise.resolve("token")}render(l,d){return""}}class Qi{ready(l){l()}execute(l,d){return Promise.resolve("token")}render(l,d){return""}}class JO{constructor(l,d,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const E="string"==typeof l?document.getElementById(l):l;he(E,"argument-error",{appName:d}),this.container=E,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Xw(p){const l=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<p;g++)l.push(d.charAt(Math.floor(62*Math.random())));return l.join("")}(50);const{callback:l,"expired-callback":d}=this.params;if(l)try{l(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ho="NO_RECAPTCHA";class eD{constructor(l){this.type="recaptcha-enterprise",this.auth=Mt(l)}verify(){var l=this;return(0,T.A)(function*(d="verify",g=!1){function w(){return w=(0,T.A)(function*(V){if(!g){if(null==V.tenantId&&null!=V._agentRecaptchaConfig)return V._agentRecaptchaConfig.siteKey;if(null!=V.tenantId&&void 0!==V._tenantRecaptchaConfigs[V.tenantId])return V._tenantRecaptchaConfigs[V.tenantId].siteKey}return new Promise(function(){var Y=(0,T.A)(function*(Ie,Oe){Ps(V,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Te=>{if(void 0!==Te.recaptchaKey){const rt=new Iu(Te);return null==V.tenantId?V._agentRecaptchaConfig=rt:V._tenantRecaptchaConfigs[V.tenantId]=rt,Ie(rt.siteKey)}Oe(new Error("recaptcha Enterprise site key undefined"))}).catch(Te=>{Oe(Te)})});return function(Ie,Oe){return Y.apply(this,arguments)}}())}),w.apply(this,arguments)}function M(V,Y,Ie){const Oe=window.grecaptcha;ei(Oe)?Oe.enterprise.ready(()=>{Oe.enterprise.execute(V,{action:d}).then(Te=>{Y(Te)}).catch(()=>{Y(Ho)})}):Ie(Error("No reCAPTCHA enterprise script loaded."))}return l.auth.settings.appVerificationDisabledForTesting?(new Th).execute("siteKey",{action:"verify"}):new Promise((V,Y)=>{(function E(V){return w.apply(this,arguments)})(l.auth).then(Ie=>{if(!g&&ei(window.grecaptcha))M(Ie,V,Y);else{if(typeof window>"u")return void Y(new Error("RecaptchaVerifier is only supported in browser"));let Oe=function Jw(){return bn.recaptchaEnterpriseScript}();0!==Oe.length&&(Oe+=Ie),l0(Oe).then(()=>{M(Ie,V,Y)}).catch(Te=>{Y(Te)})}}).catch(Ie=>{Y(Ie)})})}).apply(this,arguments)}}function wh(p,l,d){return u0.apply(this,arguments)}function u0(){return(u0=(0,T.A)(function*(p,l,d,g=!1,E=!1){const w=new eD(p);let M;if(E)M=Ho;else try{M=yield w.verify(d)}catch{M=yield w.verify(d,!0)}const V=Object.assign({},l);return"mfaSmsEnrollment"===d||"mfaSmsSignIn"===d?("phoneEnrollmentInfo"in V?Object.assign(V,{phoneEnrollmentInfo:{phoneNumber:V.phoneEnrollmentInfo.phoneNumber,recaptchaToken:V.phoneEnrollmentInfo.recaptchaToken,captchaResponse:M,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}}):"phoneSignInInfo"in V&&Object.assign(V,{phoneSignInInfo:{recaptchaToken:V.phoneSignInInfo.recaptchaToken,captchaResponse:M,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}}),V):(Object.assign(V,g?{captchaResp:M}:{captchaResponse:M}),Object.assign(V,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(V,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),V)})).apply(this,arguments)}function ac(p,l,d,g,E){return Lg.apply(this,arguments)}function Lg(){return Lg=(0,T.A)(function*(p,l,d,g,E){var w,M;if("EMAIL_PASSWORD_PROVIDER"===E){if(null!==(w=p._getRecaptchaConfig())&&void 0!==w&&w.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const V=yield wh(p,l,d,"getOobCode"===d);return g(p,V)}return g(p,l).catch(function(){var V=(0,T.A)(function*(Y){if("auth/missing-recaptcha-token"===Y.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Ie=yield wh(p,l,d,"getOobCode"===d);return g(p,Ie)}return Promise.reject(Y)});return function(Y){return V.apply(this,arguments)}}())}if("PHONE_PROVIDER"===E){if(null!==(M=p._getRecaptchaConfig())&&void 0!==M&&M.isProviderEnabled("PHONE_PROVIDER")){const V=yield wh(p,l,d);return g(p,V).catch(function(){var Y=(0,T.A)(function*(Ie){var Oe;if("AUDIT"===(null===(Oe=p._getRecaptchaConfig())||void 0===Oe?void 0:Oe.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===Ie.code||"auth/invalid-app-credential"===Ie.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${d} flow.`);const Te=yield wh(p,l,d,!1,!0);return g(p,Te)}return Promise.reject(Ie)});return function(Ie){return Y.apply(this,arguments)}}())}{const V=yield wh(p,l,d,!1,!0);return g(p,V)}}return Promise.reject(E+" provider is not supported.")}),Lg.apply(this,arguments)}function Vg(){return(Vg=(0,T.A)(function*(p){const l=Mt(p),d=yield Ps(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),g=new Iu(d);null==l.tenantId?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,g.isAnyProviderEnabled()&&new eD(l).verify()})).apply(this,arguments)}function rD(p){const l=p.indexOf(":");return l<0?"":p.substr(0,l+1)}function iD(p){if(!p)return null;const l=Number(p);return isNaN(l)?null:l}class fe{constructor(l,d){this.providerId=l,this.signInMethod=d}toJSON(){return wn("not implemented")}_getIdTokenResponse(l){return wn("not implemented")}_linkToIdToken(l,d){return wn("not implemented")}_getReauthenticationResolver(l){return wn("not implemented")}}function oD(p,l){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,T.A)(function*(p,l){return ue(p,"POST","/v1/accounts:resetPassword",le(p,l))})).apply(this,arguments)}function Bg(){return(Bg=(0,T.A)(function*(p,l){return ue(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function d0(p,l){return Ug.apply(this,arguments)}function Ug(){return(Ug=(0,T.A)(function*(p,l){return ue(p,"POST","/v1/accounts:signUp",l)})).apply(this,arguments)}function Jc(){return(Jc=(0,T.A)(function*(p,l){return ue(p,"POST","/v1/accounts:update",le(p,l))})).apply(this,arguments)}function jg(p,l){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,T.A)(function*(p,l){return tt(p,"POST","/v1/accounts:signInWithPassword",le(p,l))})).apply(this,arguments)}function Sh(p,l){return pe.apply(this,arguments)}function pe(){return(pe=(0,T.A)(function*(p,l){return ue(p,"POST","/v1/accounts:sendOobCode",le(p,l))})).apply(this,arguments)}function Zc(){return(Zc=(0,T.A)(function*(p,l){return Sh(p,l)})).apply(this,arguments)}function h0(p,l){return Du.apply(this,arguments)}function Du(){return(Du=(0,T.A)(function*(p,l){return Sh(p,l)})).apply(this,arguments)}function sD(p,l){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,T.A)(function*(p,l){return Sh(p,l)})).apply(this,arguments)}function f0(){return(f0=(0,T.A)(function*(p,l){return Sh(p,l)})).apply(this,arguments)}function p0(){return(p0=(0,T.A)(function*(p,l){return tt(p,"POST","/v1/accounts:signInWithEmailLink",le(p,l))})).apply(this,arguments)}function Cu(){return(Cu=(0,T.A)(function*(p,l){return tt(p,"POST","/v1/accounts:signInWithEmailLink",le(p,l))})).apply(this,arguments)}class fs extends fe{constructor(l,d,g,E=null){super("password",g),this._email=l,this._password=d,this._tenantId=E}static _fromEmailAndPassword(l,d){return new fs(l,d,"password")}static _fromEmailAndCode(l,d,g=null){return new fs(l,d,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(l){var d=this;return(0,T.A)(function*(){switch(d.signInMethod){case"password":return ac(l,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",jg,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return function nx(p,l){return p0.apply(this,arguments)}(l,{email:d._email,oobCode:d._password});default:Ye(l,"internal-error")}})()}_linkToIdToken(l,d){var g=this;return(0,T.A)(function*(){switch(g.signInMethod){case"password":return ac(l,{idToken:d,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",d0,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return function rx(p,l){return Cu.apply(this,arguments)}(l,{idToken:d,email:g._email,oobCode:g._password});default:Ye(l,"internal-error")}})()}_getReauthenticationResolver(l){return this._getIdTokenResponse(l)}}function $o(p,l){return Au.apply(this,arguments)}function Au(){return(Au=(0,T.A)(function*(p,l){return tt(p,"POST","/v1/accounts:signInWithIdp",le(p,l))})).apply(this,arguments)}class kr extends fe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(l){const d=new kr(l.providerId,l.signInMethod);return l.idToken||l.accessToken?(l.idToken&&(d.idToken=l.idToken),l.accessToken&&(d.accessToken=l.accessToken),l.nonce&&!l.pendingToken&&(d.nonce=l.nonce),l.pendingToken&&(d.pendingToken=l.pendingToken)):l.oauthToken&&l.oauthTokenSecret?(d.accessToken=l.oauthToken,d.secret=l.oauthTokenSecret):Ye("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l,{providerId:g,signInMethod:E}=d,w=(0,Et.Tt)(d,["providerId","signInMethod"]);if(!g||!E)return null;const M=new kr(g,E);return M.idToken=w.idToken||void 0,M.accessToken=w.accessToken||void 0,M.secret=w.secret,M.nonce=w.nonce,M.pendingToken=w.pendingToken||null,M}_getIdTokenResponse(l){return $o(l,this.buildRequest())}_linkToIdToken(l,d){const g=this.buildRequest();return g.idToken=d,$o(l,g)}_getReauthenticationResolver(l){const d=this.buildRequest();return d.autoCreate=!1,$o(l,d)}buildRequest(){const l={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)l.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),l.postBody=(0,ee.Am)(d)}return l}}function el(p,l){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,T.A)(function*(p,l){return ue(p,"POST","/v1/accounts:sendVerificationCode",le(p,l))})).apply(this,arguments)}function zt(){return(zt=(0,T.A)(function*(p,l){return tt(p,"POST","/v1/accounts:signInWithPhoneNumber",le(p,l))})).apply(this,arguments)}function $g(){return($g=(0,T.A)(function*(p,l){const d=yield tt(p,"POST","/v1/accounts:signInWithPhoneNumber",le(p,l));if(d.temporaryProof)throw Hn(p,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const m0={USER_NOT_FOUND:"user-not-found"};function Gg(){return(Gg=(0,T.A)(function*(p,l){return tt(p,"POST","/v1/accounts:signInWithPhoneNumber",le(p,Object.assign(Object.assign({},l),{operation:"REAUTH"})),m0)})).apply(this,arguments)}class Ls extends fe{constructor(l){super("phone","phone"),this.params=l}static _fromVerification(l,d){return new Ls({verificationId:l,verificationCode:d})}static _fromTokenResponse(l,d){return new Ls({phoneNumber:l,temporaryProof:d})}_getIdTokenResponse(l){return function mt(p,l){return zt.apply(this,arguments)}(l,this._makeVerificationRequest())}_linkToIdToken(l,d){return function ix(p,l){return $g.apply(this,arguments)}(l,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(l){return function ox(p,l){return Gg.apply(this,arguments)}(l,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:l,phoneNumber:d,verificationId:g,verificationCode:E}=this.params;return l&&d?{temporaryProof:l,phoneNumber:d}:{sessionInfo:g,code:E}}toJSON(){const l={providerId:this.providerId};return this.params.phoneNumber&&(l.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(l.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(l.verificationCode=this.params.verificationCode),this.params.verificationId&&(l.verificationId=this.params.verificationId),l}static fromJSON(l){"string"==typeof l&&(l=JSON.parse(l));const{verificationId:d,verificationCode:g,phoneNumber:E,temporaryProof:w}=l;return g||d||E||w?new Ls({verificationId:d,verificationCode:g,phoneNumber:E,temporaryProof:w}):null}}class tl{constructor(l){var d,g,E,w,M,V;const Y=(0,ee.I9)((0,ee.hp)(l)),Ie=null!==(d=Y.apiKey)&&void 0!==d?d:null,Oe=null!==(g=Y.oobCode)&&void 0!==g?g:null,Te=function It(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(E=Y.mode)&&void 0!==E?E:null);he(Ie&&Oe&&Te,"argument-error"),this.apiKey=Ie,this.operation=Te,this.code=Oe,this.continueUrl=null!==(w=Y.continueUrl)&&void 0!==w?w:null,this.languageCode=null!==(M=Y.lang)&&void 0!==M?M:null,this.tenantId=null!==(V=Y.tenantId)&&void 0!==V?V:null}static parseLink(l){const d=function zg(p){const l=(0,ee.I9)((0,ee.hp)(p)).link,d=l?(0,ee.I9)((0,ee.hp)(l)).deep_link_id:null,g=(0,ee.I9)((0,ee.hp)(p)).deep_link_id;return(g?(0,ee.I9)((0,ee.hp)(g)).link:null)||g||d||l||p}(l);try{return new tl(d)}catch{return null}}}let Nh=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(d,g){return fs._fromEmailAndPassword(d,g)}static credentialWithLink(d,g){const E=tl.parseLink(g);return he(E,"argument-error"),fs._fromEmailAndCode(d,E.code,E.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class fa{constructor(l){this.providerId=l,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(l){this.defaultLanguageCode=l}setCustomParameters(l){return this.customParameters=l,this}getCustomParameters(){return this.customParameters}}class Su extends fa{constructor(){super(...arguments),this.scopes=[]}addScope(l){return this.scopes.includes(l)||this.scopes.push(l),this}getScopes(){return[...this.scopes]}}class Eo extends Su{static credentialFromJSON(l){const d="string"==typeof l?JSON.parse(l):l;return he("providerId"in d&&"signInMethod"in d,"argument-error"),kr._fromParams(d)}credential(l){return this._credential(Object.assign(Object.assign({},l),{nonce:l.rawNonce}))}_credential(l){return he(l.idToken||l.accessToken,"argument-error"),kr._fromParams(Object.assign(Object.assign({},l),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(l){return Eo.oauthCredentialFromTaggedObject(l)}static credentialFromError(l){return Eo.oauthCredentialFromTaggedObject(l.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:d,oauthAccessToken:g,oauthTokenSecret:E,pendingToken:w,nonce:M,providerId:V}=l;if(!g&&!E&&!d&&!w||!V)return null;try{return new Eo(V)._credential({idToken:d,accessToken:g,nonce:M,pendingToken:w})}catch{return null}}}let Mh=(()=>{class p extends Su{constructor(){super("facebook.com")}static credential(d){return kr._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),Wg=(()=>{class p extends Su{constructor(){super("google.com"),this.addScope("profile")}static credential(d,g){return kr._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:E}=d;if(!g&&!E)return null;try{return p.credential(g,E)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),Ru=(()=>{class p extends Su{constructor(){super("github.com")}static credential(d){return kr._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class nl extends fe{constructor(l,d){super(l,l),this.pendingToken=d}_getIdTokenResponse(l){return $o(l,this.buildRequest())}_linkToIdToken(l,d){const g=this.buildRequest();return g.idToken=d,$o(l,g)}_getReauthenticationResolver(l){const d=this.buildRequest();return d.autoCreate=!1,$o(l,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l,{providerId:g,signInMethod:E,pendingToken:w}=d;return g&&E&&w&&g===E?new nl(g,w):null}static _create(l,d){return new nl(l,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Nu extends fa{constructor(l){he(l.startsWith("saml."),"argument-error"),super(l)}static credentialFromResult(l){return Nu.samlCredentialFromTaggedObject(l)}static credentialFromError(l){return Nu.samlCredentialFromTaggedObject(l.customData||{})}static credentialFromJSON(l){const d=nl.fromJSON(l);return he(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{pendingToken:d,providerId:g}=l;if(!d||!g)return null;try{return nl._create(g,d)}catch{return null}}}let _0=(()=>{class p extends Su{constructor(){super("twitter.com")}static credential(d,g){return kr._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:g,oauthTokenSecret:E}=d;if(!g||!E)return null;try{return p.credential(g,E)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function me(p,l){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,T.A)(function*(p,l){return tt(p,"POST","/v1/accounts:signUp",le(p,l))})).apply(this,arguments)}class N{constructor(l){this.user=l.user,this.providerId=l.providerId,this._tokenResponse=l._tokenResponse,this.operationType=l.operationType}static _fromIdTokenResponse(l,d,g){return(0,T.A)(function*(E,w,M,V=!1){const Y=yield B._fromIdTokenResponse(E,M,V),Ie=Mu(M);return new N({user:Y,providerId:Ie,_tokenResponse:M,operationType:w})}).apply(this,arguments)}static _forOperation(l,d,g){return(0,T.A)(function*(){yield l._updateTokensIfNecessary(g,!0);const E=Mu(g);return new N({user:l,providerId:E,_tokenResponse:g,operationType:d})})()}}function Mu(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function cc(){return(cc=(0,T.A)(function*(p){var l;if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(je(p));const d=Mt(p);if(yield d._initializationPromise,null!==(l=d.currentUser)&&void 0!==l&&l.isAnonymous)return new N({user:d.currentUser,providerId:null,operationType:"signIn"});const g=yield me(d,{returnSecureToken:!0}),E=yield N._fromIdTokenResponse(d,"signIn",g,!0);return yield d._updateCurrentUser(E.user),E})).apply(this,arguments)}class Oh extends ee.g{constructor(l,d,g,E){var w;super(d.code,d.message),this.operationType=g,this.user=E,Object.setPrototypeOf(this,Oh.prototype),this.customData={appName:l.name,tenantId:null!==(w=l.tenantId)&&void 0!==w?w:void 0,_serverResponse:d.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(l,d,g,E){return new Oh(l,d,g,E)}}function y0(p,l,d,g){return("reauthenticate"===l?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(w=>{throw"auth/multi-factor-auth-required"===w.code?Oh._fromErrorAndOperation(p,w,l,g):w})}function v0(p){return new Set(p.map(({providerId:l})=>l).filter(l=>!!l))}function ps(){return ps=(0,T.A)(function*(p,l){const d=(0,ee.Ku)(p);yield xh(!0,d,l);const{providerUserInfo:g}=yield function Gi(p,l){return zi.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[l]}),E=v0(g||[]);return d.providerData=d.providerData.filter(w=>E.has(w.providerId)),E.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),ps.apply(this,arguments)}function Kg(p,l){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,T.A)(function*(p,l,d=!1){const g=yield xr(p,l._linkToIdToken(p.auth,yield p.getIdToken()),d);return N._forOperation(p,"link",g)})).apply(this,arguments)}function xh(p,l,d){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,T.A)(function*(p,l,d){yield Uo(l);const E=!1===p?"provider-already-linked":"no-such-provider";he(v0(l.providerData).has(d)===p,l.auth,E)})).apply(this,arguments)}function E0(p,l){return ti.apply(this,arguments)}function ti(){return(ti=(0,T.A)(function*(p,l,d=!1){const{auth:g}=p;if((0,Ce._isFirebaseServerApp)(g.app))return Promise.reject(je(g));const E="reauthenticate";try{const w=yield xr(p,y0(g,E,l,p),d);he(w.idToken,g,"internal-error");const M=ds(w.idToken);he(M,g,"internal-error");const{sub:V}=M;return he(p.uid===V,g,"user-mismatch"),N._forOperation(p,E,w)}catch(w){throw"auth/user-not-found"===w?.code&&Ye(g,"user-mismatch"),w}})).apply(this,arguments)}function lc(p,l){return kh.apply(this,arguments)}function kh(){return(kh=(0,T.A)(function*(p,l,d=!1){if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(je(p));const g="signIn",E=yield y0(p,g,l),w=yield N._fromIdTokenResponse(p,g,E);return d||(yield p._updateCurrentUser(w.user)),w})).apply(this,arguments)}function uc(p,l){return rl.apply(this,arguments)}function rl(){return(rl=(0,T.A)(function*(p,l){return lc(Mt(p),l)})).apply(this,arguments)}function Qg(p,l){return Fh.apply(this,arguments)}function Fh(){return(Fh=(0,T.A)(function*(p,l){const d=(0,ee.Ku)(p);return yield xh(!1,d,l.providerId),Kg(d,l)})).apply(this,arguments)}function Pi(p,l){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,T.A)(function*(p,l){return E0((0,ee.Ku)(p),l)})).apply(this,arguments)}function Yg(){return(Yg=(0,T.A)(function*(p,l){return tt(p,"POST","/v1/accounts:signInWithCustomToken",le(p,l))})).apply(this,arguments)}function Vt(){return Vt=(0,T.A)(function*(p,l){if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(je(p));const d=Mt(p),g=yield function xu(p,l){return Yg.apply(this,arguments)}(d,{token:l,returnSecureToken:!0}),E=yield N._fromIdTokenResponse(d,"signIn",g);return yield d._updateCurrentUser(E.user),E}),Vt.apply(this,arguments)}class ni{constructor(l,d){this.factorId=l,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(l,d){return"phoneInfo"in d?Lh._fromServerResponse(l,d):"totpInfo"in d?ku._fromServerResponse(l,d):Ye(l,"internal-error")}}class Lh extends ni{constructor(l){super("phone",l),this.phoneNumber=l.phoneInfo}static _fromServerResponse(l,d){return new Lh(d)}}class ku extends ni{constructor(l){super("totp",l)}static _fromServerResponse(l,d){return new ku(d)}}function dc(p,l,d){var g;he((null===(g=d.url)||void 0===g?void 0:g.length)>0,p,"invalid-continue-uri"),he(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),he(typeof d.linkDomain>"u"||d.linkDomain.length>0,p,"invalid-hosting-link-domain"),l.continueUrl=d.url,l.dynamicLinkDomain=d.dynamicLinkDomain,l.linkDomain=d.linkDomain,l.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(he(d.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),l.iOSBundleId=d.iOS.bundleId),d.android&&(he(d.android.packageName.length>0,p,"missing-android-pkg-name"),l.androidInstallApp=d.android.installApp,l.androidMinimumVersionCode=d.android.minimumVersion,l.androidPackageName=d.android.packageName)}function fi(p){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,T.A)(function*(p){const l=Mt(p);l._getPasswordPolicyInternal()&&(yield l._updatePasswordPolicy())})).apply(this,arguments)}function pi(){return(pi=(0,T.A)(function*(p,l,d){const g=Mt(p),E={requestType:"PASSWORD_RESET",email:l,clientType:"CLIENT_TYPE_WEB"};d&&dc(g,E,d),yield ac(g,E,"getOobCode",h0,"EMAIL_PASSWORD_PROVIDER")})).apply(this,arguments)}function gs(){return gs=(0,T.A)(function*(p,l,d){yield oD((0,ee.Ku)(p),{oobCode:l,newPassword:d}).catch(function(){var g=(0,T.A)(function*(E){throw"auth/password-does-not-meet-requirements"===E.code&&fi(p),E});return function(E){return g.apply(this,arguments)}}())}),gs.apply(this,arguments)}function Jg(){return Jg=(0,T.A)(function*(p,l){yield function Ch(p,l){return Jc.apply(this,arguments)}((0,ee.Ku)(p),{oobCode:l})}),Jg.apply(this,arguments)}function Vh(p,l){return Bh.apply(this,arguments)}function Bh(){return(Bh=(0,T.A)(function*(p,l){const d=(0,ee.Ku)(p),g=yield oD(d,{oobCode:l}),E=g.requestType;switch(he(E,d,"internal-error"),E){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":he(g.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":he(g.mfaInfo,d,"internal-error");default:he(g.email,d,"internal-error")}let w=null;return g.mfaInfo&&(w=ni._fromServerResponse(Mt(d),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:w},operation:E}})).apply(this,arguments)}function b0(){return(b0=(0,T.A)(function*(p,l){const{data:d}=yield Vh((0,ee.Ku)(p),l);return d.email})).apply(this,arguments)}function Xg(){return(Xg=(0,T.A)(function*(p,l,d){if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(je(p));const g=Mt(p),M=yield ac(g,{returnSecureToken:!0,email:l,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",me,"EMAIL_PASSWORD_PROVIDER").catch(Y=>{throw"auth/password-does-not-meet-requirements"===Y.code&&fi(p),Y}),V=yield N._fromIdTokenResponse(g,"signIn",M);return yield g._updateCurrentUser(V.user),V})).apply(this,arguments)}function jh(){return(jh=(0,T.A)(function*(p,l,d){const g=Mt(p),E={requestType:"EMAIL_SIGNIN",email:l,clientType:"CLIENT_TYPE_WEB"};(function w(M,V){he(V.handleCodeInApp,g,"argument-error"),V&&dc(g,M,V)})(E,d),yield ac(g,E,"getOobCode",sD,"EMAIL_PASSWORD_PROVIDER")})).apply(this,arguments)}function Fu(){return(Fu=(0,T.A)(function*(p,l,d){if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(je(p));const g=(0,ee.Ku)(p),E=Nh.credentialWithLink(l,d||nn());return he(E._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),uc(g,E)})).apply(this,arguments)}function $h(){return($h=(0,T.A)(function*(p,l){return ue(p,"POST","/v1/accounts:createAuthUri",le(p,l))})).apply(this,arguments)}function il(){return il=(0,T.A)(function*(p,l){const g={identifier:l,continueUri:ar()?nn():"http://localhost"},{signinMethods:E}=yield function Hh(p,l){return $h.apply(this,arguments)}((0,ee.Ku)(p),g);return E||[]}),il.apply(this,arguments)}function Bs(){return Bs=(0,T.A)(function*(p,l){const d=(0,ee.Ku)(p),E={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};l&&dc(d.auth,E,l);const{email:w}=yield function Hg(p,l){return Zc.apply(this,arguments)}(d.auth,E);w!==p.email&&(yield p.reload())}),Bs.apply(this,arguments)}function rm(){return rm=(0,T.A)(function*(p,l,d){const g=(0,ee.Ku)(p),w={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:l};d&&dc(g.auth,w,d);const{email:M}=yield function tx(p,l){return f0.apply(this,arguments)}(g.auth,w);M!==p.email&&(yield p.reload())}),rm.apply(this,arguments)}function Gh(){return(Gh=(0,T.A)(function*(p,l){return ue(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function pa(){return pa=(0,T.A)(function*(p,{displayName:l,photoURL:d}){if(void 0===l&&void 0===d)return;const g=(0,ee.Ku)(p),w={idToken:yield g.getIdToken(),displayName:l,photoUrl:d,returnSecureToken:!0},M=yield xr(g,function dD(p,l){return Gh.apply(this,arguments)}(g.auth,w));g.displayName=M.displayName||null,g.photoURL=M.photoUrl||null;const V=g.providerData.find(({providerId:Y})=>"password"===Y);V&&(V.displayName=g.displayName,V.photoURL=g.photoURL),yield g._updateTokensIfNecessary(M)}),pa.apply(this,arguments)}function T0(p,l,d){return Vu.apply(this,arguments)}function Vu(){return Vu=(0,T.A)(function*(p,l,d){const{auth:g}=p,w={idToken:yield p.getIdToken(),returnSecureToken:!0};l&&(w.email=l),d&&(w.password=d);const M=yield xr(p,function Dh(p,l){return Bg.apply(this,arguments)}(g,w));yield p._updateTokensIfNecessary(M,!0)}),Vu.apply(this,arguments)}class pc{constructor(l,d,g={}){this.isNewUser=l,this.providerId=d,this.profile=g}}class Us extends pc{constructor(l,d,g,E){super(l,d,g),this.username=E}}class ol extends pc{constructor(l,d){super(l,"facebook.com",d)}}class pD extends Us{constructor(l,d){super(l,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class gD extends pc{constructor(l,d){super(l,"google.com",d)}}class Dr extends Us{constructor(l,d,g){super(l,"twitter.com",d,g)}}function w0(p){const{user:l,_tokenResponse:d}=p;return l.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function bo(p){var l,d;if(!p)return null;const{providerId:g}=p,E=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},w=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!g&&p?.idToken){const M=null===(d=null===(l=ds(p.idToken))||void 0===l?void 0:l.firebase)||void 0===d?void 0:d.sign_in_provider;if(M)return new pc(w,"anonymous"!==M&&"custom"!==M?M:null)}if(!g)return null;switch(g){case"facebook.com":return new ol(w,E);case"github.com":return new pD(w,E);case"google.com":return new gD(w,E);case"twitter.com":return new Dr(w,E,p.screenName||null);case"custom":case"anonymous":return new pc(w,null);default:return new pc(w,g,E)}}(d)}class dn{constructor(l,d,g){this.type=l,this.credential=d,this.user=g}static _fromIdtoken(l,d){return new dn("enroll",l,d)}static _fromMfaPendingCredential(l){return new dn("signin",l)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(l){var d,g;if(l?.multiFactorSession){if(null!==(d=l.multiFactorSession)&&void 0!==d&&d.pendingCredential)return dn._fromMfaPendingCredential(l.multiFactorSession.pendingCredential);if(null!==(g=l.multiFactorSession)&&void 0!==g&&g.idToken)return dn._fromIdtoken(l.multiFactorSession.idToken)}return null}}class Fr{constructor(l,d,g){this.session=l,this.hints=d,this.signInResolver=g}static _fromError(l,d){const g=Mt(l),E=d.customData._serverResponse,w=(E.mfaInfo||[]).map(V=>ni._fromServerResponse(g,V));he(E.mfaPendingCredential,g,"internal-error");const M=dn._fromMfaPendingCredential(E.mfaPendingCredential);return new Fr(M,w,function(){var V=(0,T.A)(function*(Y){const Ie=yield Y._process(g,M);delete E.mfaInfo,delete E.mfaPendingCredential;const Oe=Object.assign(Object.assign({},E),{idToken:Ie.idToken,refreshToken:Ie.refreshToken});switch(d.operationType){case"signIn":const Te=yield N._fromIdTokenResponse(g,d.operationType,Oe);return yield g._updateCurrentUser(Te.user),Te;case"reauthenticate":return he(d.user,g,"internal-error"),N._forOperation(d.user,d.operationType,Oe);default:Ye(g,"internal-error")}});return function(Y){return V.apply(this,arguments)}}())}resolveSignIn(l){var d=this;return(0,T.A)(function*(){return d.signInResolver(l)})()}}function ri(p,l){return ue(p,"POST","/v2/accounts/mfaEnrollment:start",le(p,l))}class ot{constructor(l){this.user=l,this.enrolledFactors=[],l._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(g=>ni._fromServerResponse(l.auth,g)))})}static _fromUser(l){return new ot(l)}getSession(){var l=this;return(0,T.A)(function*(){return dn._fromIdtoken(yield l.user.getIdToken(),l.user)})()}enroll(l,d){var g=this;return(0,T.A)(function*(){const E=l,w=yield g.getSession(),M=yield xr(g.user,E._process(g.user.auth,w,d));return yield g.user._updateTokensIfNecessary(M),g.user.reload()})()}unenroll(l){var d=this;return(0,T.A)(function*(){const g="string"==typeof l?l:l.uid,E=yield d.user.getIdToken();try{const w=yield xr(d.user,function ms(p,l){return ue(p,"POST","/v2/accounts/mfaEnrollment:withdraw",le(p,l))}(d.user.auth,{idToken:E,mfaEnrollmentId:g}));d.enrolledFactors=d.enrolledFactors.filter(({uid:M})=>M!==g),yield d.user._updateTokensIfNecessary(w),yield d.user.reload()}catch(w){throw w}})()}}const js=new WeakMap,Hs="__sak";class Dn{constructor(l,d){this.storageRetriever=l,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Hs,"1"),this.storage.removeItem(Hs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(l,d){return this.storage.setItem(l,JSON.stringify(d)),Promise.resolve()}_get(l){const d=this.storage.getItem(l);return Promise.resolve(d?JSON.parse(d):null)}_remove(l){return this.storage.removeItem(l),Promise.resolve()}get storage(){return this.storageRetriever()}}const ma=(()=>{class p extends Dn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,g)=>this.onStorageEvent(d,g),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oe(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const g of Object.keys(this.listeners)){const E=this.storage.getItem(g),w=this.localCache[g];E!==w&&d(g,w,E)}}onStorageEvent(d,g=!1){if(!d.key)return void this.forAllChangedKeys((V,Y,Ie)=>{this.notifyListeners(V,Ie)});const E=d.key;g?this.detachListener():this.stopPolling();const w=()=>{const V=this.storage.getItem(E);!g&&this.localCache[E]===V||this.notifyListeners(E,V)},M=this.storage.getItem(E);!function $(){return(0,ee.lT)()&&10===document.documentMode}()||M===d.newValue||d.newValue===d.oldValue?w():setTimeout(w,10)}notifyListeners(d,g){this.localCache[d]=g;const E=this.listeners[d];if(E)for(const w of Array.from(E))w(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,g,E)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:g,newValue:E}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,g){var E=()=>super._set,w=this;return(0,T.A)(function*(){yield E().call(w,d,g),w.localCache[d]=JSON.stringify(g)})()}_get(d){var g=()=>super._get,E=this;return(0,T.A)(function*(){const w=yield g().call(E,d);return E.localCache[d]=JSON.stringify(w),w})()}_remove(d){var g=()=>super._remove,E=this;return(0,T.A)(function*(){yield g().call(E,d),delete E.localCache[d]})()}}return p.type="LOCAL",p})(),Ve=(()=>{class p extends Dn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,g){}_removeListener(d,g){}}return p.type="SESSION",p})();let zo=(()=>{class p{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const g=this.receivers.find(w=>w.isListeningto(d));if(g)return g;const E=new p(d);return this.receivers.push(E),E}isListeningto(d){return this.eventTarget===d}handleEvent(d){var g=this;return(0,T.A)(function*(){const E=d,{eventId:w,eventType:M,data:V}=E.data,Y=g.handlersMap[M];if(!Y?.size)return;E.ports[0].postMessage({status:"ack",eventId:w,eventType:M});const Ie=Array.from(Y).map(function(){var Te=(0,T.A)(function*(rt){return rt(E.origin,V)});return function(rt){return Te.apply(this,arguments)}}()),Oe=yield function am(p){return Promise.all(p.map(function(){var l=(0,T.A)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(g){return{fulfilled:!1,reason:g}}});return function(d){return l.apply(this,arguments)}}()))}(Ie);E.ports[0].postMessage({status:"done",eventId:w,eventType:M,response:Oe})})()}_subscribe(d,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(g)}_unsubscribe(d,g){this.handlersMap[d]&&g&&this.handlersMap[d].delete(g),(!g||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function Oi(p="",l=10){let d="";for(let g=0;g<l;g++)d+=Math.floor(10*Math.random());return p+d}class qh{constructor(l){this.target=l,this.handlers=new Set}removeMessageHandler(l){l.messageChannel&&(l.messageChannel.port1.removeEventListener("message",l.onMessage),l.messageChannel.port1.close()),this.handlers.delete(l)}_send(l,d){var g=this;return(0,T.A)(function*(E,w,M=50){const V=typeof MessageChannel<"u"?new MessageChannel:null;if(!V)throw new Error("connection_unavailable");let Y,Ie;return new Promise((Oe,Te)=>{const rt=Oi("",20);V.port1.start();const An=setTimeout(()=>{Te(new Error("unsupported_event"))},M);Ie={messageChannel:V,onMessage(no){const bl=no;if(bl.data.eventId===rt)switch(bl.data.status){case"ack":clearTimeout(An),Y=setTimeout(()=>{Te(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),Oe(bl.data.response);break;default:clearTimeout(An),clearTimeout(Y),Te(new Error("invalid_response"))}}},g.handlers.add(Ie),V.port1.addEventListener("message",Ie.onMessage),g.target.postMessage({eventType:E,eventId:rt,data:w},[V.port2])}).finally(()=>{Ie&&g.removeMessageHandler(Ie)})}).apply(this,arguments)}}function Cn(){return window}function Ln(){return typeof Cn().WorkerGlobalScope<"u"&&"function"==typeof Cn().importScripts}function Uu(){return(Uu=(0,T.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const xi="firebaseLocalStorageDb",ju="firebaseLocalStorage",C0="fbase_key";class Ji{constructor(l){this.request=l}toPromise(){return new Promise((l,d)=>{this.request.addEventListener("success",()=>{l(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function Hu(p,l){return p.transaction([ju],l?"readwrite":"readonly").objectStore(ju)}function ll(){const p=indexedDB.open(xi,1);return new Promise((l,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const g=p.result;try{g.createObjectStore(ju,{keyPath:C0})}catch(E){d(E)}}),p.addEventListener("success",(0,T.A)(function*(){const g=p.result;g.objectStoreNames.contains(ju)?l(g):(g.close(),yield function vD(){const p=indexedDB.deleteDatabase(xi);return new Ji(p).toPromise()}(),l(yield ll()))}))})}function ED(p,l,d){return A0.apply(this,arguments)}function A0(){return(A0=(0,T.A)(function*(p,l,d){const g=Hu(p,!0).put({[C0]:l,value:d});return new Ji(g).toPromise()})).apply(this,arguments)}function S0(){return(S0=(0,T.A)(function*(p,l){const d=Hu(p,!1).get(l),g=yield new Ji(d).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function bD(p,l){const d=Hu(p,!0).delete(l);return new Ji(d).toPromise()}const $u=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,T.A)(function*(){return d.db||(d.db=yield ll()),d.db})()}_withRetries(d){var g=this;return(0,T.A)(function*(){let E=0;for(;;)try{const w=yield g._openDb();return yield d(w)}catch(w){if(E++>3)throw w;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,T.A)(function*(){return Ln()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,T.A)(function*(){d.receiver=zo._getInstance(function Kh(){return Ln()?self:null}()),d.receiver._subscribe("keyChanged",function(){var g=(0,T.A)(function*(E,w){return{keyProcessed:(yield d._poll()).includes(w.key)}});return function(E,w){return g.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var g=(0,T.A)(function*(E,w){return["keyChanged"]});return function(E,w){return g.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,T.A)(function*(){var g,E;if(d.activeServiceWorker=yield function Cr(){return Uu.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new qh(d.activeServiceWorker);const w=yield d.sender._send("ping",{},800);w&&null!==(g=w[0])&&void 0!==g&&g.fulfilled&&null!==(E=w[0])&&void 0!==E&&E.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var g=this;return(0,T.A)(function*(){if(g.sender&&g.activeServiceWorker&&function Wo(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:d},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,T.A)(function*(){try{if(!indexedDB)return!1;const d=yield ll();return yield ED(d,Hs,"1"),yield bD(d,Hs),!0}catch{}return!1})()}_withPendingWrite(d){var g=this;return(0,T.A)(function*(){g.pendingWrites++;try{yield d()}finally{g.pendingWrites--}})()}_set(d,g){var E=this;return(0,T.A)(function*(){return E._withPendingWrite((0,T.A)(function*(){return yield E._withRetries(w=>ED(w,d,g)),E.localCache[d]=g,E.notifyServiceWorker(d)}))})()}_get(d){var g=this;return(0,T.A)(function*(){const E=yield g._withRetries(w=>function dx(p,l){return S0.apply(this,arguments)}(w,d));return g.localCache[d]=E,E})()}_remove(d){var g=this;return(0,T.A)(function*(){return g._withPendingWrite((0,T.A)(function*(){return yield g._withRetries(E=>bD(E,d)),delete g.localCache[d],g.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,T.A)(function*(){const g=yield d._withRetries(M=>{const V=Hu(M,!1).getAll();return new Ji(V).toPromise()});if(!g)return[];if(0!==d.pendingWrites)return[];const E=[],w=new Set;if(0!==g.length)for(const{fbase_key:M,value:V}of g)w.add(M),JSON.stringify(d.localCache[M])!==JSON.stringify(V)&&(d.notifyListeners(M,V),E.push(M));for(const M of Object.keys(d.localCache))d.localCache[M]&&!w.has(M)&&(d.notifyListeners(M,null),E.push(M));return E})()}notifyListeners(d,g){this.localCache[d]=g;const E=this.listeners[d];if(E)for(const w of Array.from(E))w(g)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,T.A)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})();function ID(p,l){return ue(p,"POST","/v2/accounts/mfaSignIn:start",le(p,l))}const Qh=Ih("rcb"),px=new yo(3e4,6e4);class gx{constructor(){var l;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(l=Cn().grecaptcha)||void 0===l||!l.render)}load(l,d=""){return he(function mx(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(d),l,"argument-error"),this.shouldResolveImmediately(d)&&Zn(Cn().grecaptcha)?Promise.resolve(Cn().grecaptcha):new Promise((g,E)=>{const w=Cn().setTimeout(()=>{E(xt(l,"network-request-failed"))},px.get());Cn()[Qh]=()=>{Cn().clearTimeout(w),delete Cn()[Qh];const V=Cn().grecaptcha;if(!V||!Zn(V))return void E(xt(l,"internal-error"));const Y=V.render;V.render=(Ie,Oe)=>{const Te=Y(Ie,Oe);return this.counter++,Te},this.hostLanguage=d,g(V)},l0(`${function un(){return bn.recaptchaV2Script}()}?${(0,ee.Am)({onload:Qh,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(w),E(xt(l,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(l){var d;return!(null===(d=Cn().grecaptcha)||void 0===d||!d.render)&&(l===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class TD{load(l){return(0,T.A)(function*(){return new ft(l)})()}clearedOneInstance(){}}const ul="recaptcha",Ar={theme:"light",type:"image"};class M0{constructor(l,d,g=Object.assign({},Ar)){this.parameters=g,this.type=ul,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mt(l),this.isInvisible="invisible"===this.parameters.size,he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const E="string"==typeof d?document.getElementById(d):d;he(E,this.auth,"argument-error"),this.container=E,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new TD:new gx,this.validateStartingState()}verify(){var l=this;return(0,T.A)(function*(){l.assertNotDestroyed();const d=yield l.render(),g=l.getAssertedRecaptcha();return g.getResponse(d)||new Promise(w=>{const M=V=>{V&&(l.tokenChangeListeners.delete(M),w(V))};l.tokenChangeListeners.add(M),l.isInvisible&&g.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(l){return Promise.reject(l)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(l=>{throw this.renderPromise=null,l})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(l=>{this.container.removeChild(l)})}validateStartingState(){he(!this.parameters.sitekey,this.auth,"argument-error"),he(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(l){return d=>{if(this.tokenChangeListeners.forEach(g=>g(d)),"function"==typeof l)l(d);else if("string"==typeof l){const g=Cn()[l];"function"==typeof g&&g(d)}}}assertNotDestroyed(){he(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var l=this;return(0,T.A)(function*(){if(yield l.init(),!l.widgetId){let d=l.container;if(!l.isInvisible){const g=document.createElement("div");d.appendChild(g),d=g}l.widgetId=l.getAssertedRecaptcha().render(d,l.parameters)}return l.widgetId})()}init(){var l=this;return(0,T.A)(function*(){he(ar()&&!Ln(),l.auth,"internal-error"),yield function wD(){let p=null;return new Promise(l=>{"complete"!==document.readyState?(p=()=>l(),window.addEventListener("load",p)):l()}).catch(l=>{throw p&&window.removeEventListener("load",p),l})}(),l.recaptcha=yield l._recaptchaLoader.load(l.auth,l.auth.languageCode||void 0);const d=yield function Eh(p){return St.apply(this,arguments)}(l.auth);he(d,l.auth,"internal-error"),l.parameters.sitekey=d})()}getAssertedRecaptcha(){return he(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class cm{constructor(l,d){this.verificationId=l,this.onConfirmation=d}confirm(l){const d=Ls._fromVerification(this.verificationId,l);return this.onConfirmation(d)}}function Yh(){return(Yh=(0,T.A)(function*(p,l,d){if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(je(p));const g=Mt(p),E=yield zu(g,l,(0,ee.Ku)(d));return new cm(E,w=>uc(g,w))})).apply(this,arguments)}function Gu(){return(Gu=(0,T.A)(function*(p,l,d){const g=(0,ee.Ku)(p);yield xh(!1,g,"phone");const E=yield zu(g.auth,l,(0,ee.Ku)(d));return new cm(E,w=>Qg(g,w))})).apply(this,arguments)}function Yt(){return(Yt=(0,T.A)(function*(p,l,d){const g=(0,ee.Ku)(p);if((0,Ce._isFirebaseServerApp)(g.auth.app))return Promise.reject(je(g.auth));const E=yield zu(g.auth,l,(0,ee.Ku)(d));return new cm(E,w=>Pi(g,w))})).apply(this,arguments)}function zu(p,l,d){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,T.A)(function*(p,l,d){var g;if(!p._getRecaptchaConfig())try{yield function tD(p){return Vg.apply(this,arguments)}(p)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let E;if(E="string"==typeof l?{phoneNumber:l}:l,"session"in E){const w=E.session;if("phoneNumber"in E){he("enroll"===w.type,p,"internal-error");const M={idToken:w.credential,phoneEnrollmentInfo:{phoneNumber:E.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(yield ac(p,M,"mfaSmsEnrollment",function(){var Oe=(0,T.A)(function*(Te,rt){return rt.phoneEnrollmentInfo.captchaResponse===Ho?(he(d?.type===ul,Te,"argument-error"),ri(Te,yield _a(Te,rt,d))):ri(Te,rt)});return function(rt,An){return Oe.apply(this,arguments)}}(),"PHONE_PROVIDER").catch(Oe=>Promise.reject(Oe))).phoneSessionInfo.sessionInfo}{he("signin"===w.type,p,"internal-error");const M=(null===(g=E.multiFactorHint)||void 0===g?void 0:g.uid)||E.multiFactorUid;he(M,p,"missing-multi-factor-info");const V={mfaPendingCredential:w.credential,mfaEnrollmentId:M,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(yield ac(p,V,"mfaSmsSignIn",function(){var Te=(0,T.A)(function*(rt,An){return An.phoneSignInInfo.captchaResponse===Ho?(he(d?.type===ul,rt,"argument-error"),ID(rt,yield _a(rt,An,d))):ID(rt,An)});return function(An,no){return Te.apply(this,arguments)}}(),"PHONE_PROVIDER").catch(Te=>Promise.reject(Te))).phoneResponseInfo.sessionInfo}}{const w={phoneNumber:E.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(yield ac(p,w,"sendVerificationCode",function(){var Ie=(0,T.A)(function*(Oe,Te){return Te.captchaResponse===Ho?(he(d?.type===ul,Oe,"argument-error"),el(Oe,yield _a(Oe,Te,d))):el(Oe,Te)});return function(Te,rt){return Ie.apply(this,arguments)}}(),"PHONE_PROVIDER").catch(Ie=>Promise.reject(Ie))).sessionInfo}}finally{d?._reset()}}),Jh.apply(this,arguments)}function Wu(){return(Wu=(0,T.A)(function*(p,l){const d=(0,ee.Ku)(p);if((0,Ce._isFirebaseServerApp)(d.auth.app))return Promise.reject(je(d.auth));yield Kg(d,l)})).apply(this,arguments)}function _a(p,l,d){return qr.apply(this,arguments)}function qr(){return(qr=(0,T.A)(function*(p,l,d){he(d.type===ul,p,"argument-error");const g=yield d.verify();he("string"==typeof g,p,"argument-error");const E=Object.assign({},l);return"phoneEnrollmentInfo"in E?(Object.assign(E,{phoneEnrollmentInfo:{phoneNumber:E.phoneEnrollmentInfo.phoneNumber,recaptchaToken:g,captchaResponse:E.phoneEnrollmentInfo.captchaResponse,clientType:E.phoneEnrollmentInfo.clientType,recaptchaVersion:E.phoneEnrollmentInfo.recaptchaVersion}}),E):"phoneSignInInfo"in E?(Object.assign(E,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:E.phoneSignInInfo.captchaResponse,clientType:E.phoneSignInInfo.clientType,recaptchaVersion:E.phoneSignInInfo.recaptchaVersion}}),E):(Object.assign(E,{recaptchaToken:g}),E)})).apply(this,arguments)}let qu=(()=>{class p{constructor(d){this.providerId=p.PROVIDER_ID,this.auth=Mt(d)}verifyPhoneNumber(d,g){return zu(this.auth,d,(0,ee.Ku)(g))}static credential(d,g){return Ls._fromVerification(d,g)}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:g,temporaryProof:E}=d;return g&&E?Ls._fromTokenResponse(g,E):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function Zi(p,l){return l?q(l):(he(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class Gs extends fe{constructor(l){super("custom","custom"),this.params=l}_getIdTokenResponse(l){return $o(l,this._buildIdpRequest())}_linkToIdToken(l,d){return $o(l,this._buildIdpRequest(d))}_getReauthenticationResolver(l){return $o(l,this._buildIdpRequest())}_buildIdpRequest(l){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return l&&(d.idToken=l),d}}function gi(p){return lc(p.auth,new Gs(p),p.bypassAuthState)}function AD(p){const{auth:l,user:d}=p;return he(d,l,"internal-error"),E0(d,new Gs(p),p.bypassAuthState)}function lm(p){return um.apply(this,arguments)}function um(){return(um=(0,T.A)(function*(p){const{auth:l,user:d}=p;return he(d,l,"internal-error"),Kg(d,new Gs(p),p.bypassAuthState)})).apply(this,arguments)}class Xi{constructor(l,d,g,E,w=!1){this.auth=l,this.resolver=g,this.user=E,this.bypassAuthState=w,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var l=this;return new Promise(function(){var d=(0,T.A)(function*(g,E){l.pendingPromise={resolve:g,reject:E};try{l.eventManager=yield l.resolver._initialize(l.auth),yield l.onExecution(),l.eventManager.registerConsumer(l)}catch(w){l.reject(w)}});return function(g,E){return d.apply(this,arguments)}}())}onAuthEvent(l){var d=this;return(0,T.A)(function*(){const{urlResponse:g,sessionId:E,postBody:w,tenantId:M,error:V,type:Y}=l;if(V)return void d.reject(V);const Ie={auth:d.auth,requestUri:g,sessionId:E,tenantId:M||void 0,postBody:w||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(Y)(Ie))}catch(Oe){d.reject(Oe)}})()}onError(l){this.reject(l)}getIdpTask(l){switch(l){case"signInViaPopup":case"signInViaRedirect":return gi;case"linkViaPopup":case"linkViaRedirect":return lm;case"reauthViaPopup":case"reauthViaRedirect":return AD;default:Ye(this.auth,"internal-error")}}resolve(l){En(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(l),this.unregisterAndCleanUp()}reject(l){En(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(l),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const O0=new yo(2e3,1e4);function Zh(){return(Zh=(0,T.A)(function*(p,l,d){if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(xt(p,"operation-not-supported-in-this-environment"));const g=Mt(p);Ht(p,l,fa);const E=Zi(g,d);return new Yu(g,"signInViaPopup",l,E).executeNotNull()})).apply(this,arguments)}function Qu(){return(Qu=(0,T.A)(function*(p,l,d){const g=(0,ee.Ku)(p);if((0,Ce._isFirebaseServerApp)(g.auth.app))return Promise.reject(xt(g.auth,"operation-not-supported-in-this-environment"));Ht(g.auth,l,fa);const E=Zi(g.auth,d);return new Yu(g.auth,"reauthViaPopup",l,E,g).executeNotNull()})).apply(this,arguments)}function hl(){return(hl=(0,T.A)(function*(p,l,d){const g=(0,ee.Ku)(p);Ht(g.auth,l,fa);const E=Zi(g.auth,d);return new Yu(g.auth,"linkViaPopup",l,E,g).executeNotNull()})).apply(this,arguments)}let Yu=(()=>{class p extends Xi{constructor(d,g,E,w,M){super(d,g,w,M),this.provider=E,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var d=this;return(0,T.A)(function*(){const g=yield d.execute();return he(g,d.auth,"internal-error"),g})()}onExecution(){var d=this;return(0,T.A)(function*(){En(1===d.filter.length,"Popup operations only handle one event");const g=Oi();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],g),d.authWindow.associatedEvent=g,d.resolver._originValidation(d.auth).catch(E=>{d.reject(E)}),d.resolver._isIframeWebStorageSupported(d.auth,E=>{E||d.reject(xt(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(xt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const d=()=>{var g,E;this.pollId=null!==(E=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==E&&E.closed?window.setTimeout(()=>{this.pollId=null,this.reject(xt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,O0.get())};d()}}return p.currentPopupAction=null,p})();const _c=new Map;class hm extends Xi{constructor(l,d,g=!1){super(l,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,g),this.eventId=null}execute(){var l=()=>super.execute,d=this;return(0,T.A)(function*(){let g=_c.get(d.auth._key());if(!g){try{const w=(yield function SD(p,l){return ut.apply(this,arguments)}(d.resolver,d.auth))?yield l().call(d):null;g=()=>Promise.resolve(w)}catch(E){g=()=>Promise.reject(E)}_c.set(d.auth._key(),g)}return d.bypassAuthState||_c.set(d.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(l){var d=()=>super.onAuthEvent,g=this;return(0,T.A)(function*(){if("signInViaRedirect"===l.type)return d().call(g,l);if("unknown"!==l.type){if(l.eventId){const E=yield g.auth._redirectUserForId(l.eventId);if(E)return g.user=E,d().call(g,l);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,T.A)(function*(){})()}cleanUp(){}}function ut(){return(ut=(0,T.A)(function*(p,l){const d=k0(l),g=x0(p);if(!(yield g._isAvailable()))return!1;const E="true"===(yield g._get(d));return yield g._remove(d),E})).apply(this,arguments)}function fl(p,l){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,T.A)(function*(p,l){return x0(p)._set(k0(l),"true")})).apply(this,arguments)}function pm(p,l){_c.set(p._key(),l)}function x0(p){return q(p._redirectPersistence)}function k0(p){return Qt("pendingRedirect",p.config.apiKey,p.name)}function mm(){return(mm=(0,T.A)(function*(p,l,d){if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(je(p));const g=Mt(p);Ht(p,l,fa),yield g._initializationPromise;const E=Zi(g,d);return yield fl(E,g),E._openRedirect(g,l,"signInViaRedirect")})).apply(this,arguments)}function _m(){return(_m=(0,T.A)(function*(p,l,d){const g=(0,ee.Ku)(p);if(Ht(g.auth,l,fa),(0,Ce._isFirebaseServerApp)(g.auth.app))return Promise.reject(je(g.auth));yield g.auth._initializationPromise;const E=Zi(g.auth,d);yield fl(E,g.auth);const w=yield pl(g);return E._openRedirect(g.auth,l,"reauthViaRedirect",w)})).apply(this,arguments)}function ct(){return(ct=(0,T.A)(function*(p,l,d){const g=(0,ee.Ku)(p);Ht(g.auth,l,fa),yield g.auth._initializationPromise;const E=Zi(g.auth,d);yield xh(!1,g,l.providerId),yield fl(E,g.auth);const w=yield pl(g);return E._openRedirect(g.auth,l,"linkViaRedirect",w)})).apply(this,arguments)}function gr(){return(gr=(0,T.A)(function*(p,l){return yield Mt(p)._initializationPromise,vt(p,l,!1)})).apply(this,arguments)}function vt(p,l){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,T.A)(function*(p,l,d=!1){if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(je(p));const g=Mt(p),E=Zi(g,l),M=yield new hm(g,E,d).execute();return M&&!d&&(delete M.user._redirectEventId,yield g._persistUserIfCurrent(M.user),yield g._setRedirectUser(null,l)),M})).apply(this,arguments)}function pl(p){return eo.apply(this,arguments)}function eo(){return(eo=(0,T.A)(function*(p){const l=Oi(`${p.uid}:::`);return p._redirectEventId=l,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),l})).apply(this,arguments)}class ef{constructor(l){this.auth=l,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(l){this.consumers.add(l),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,l)&&(this.sendToConsumer(this.queuedRedirectEvent,l),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(l){this.consumers.delete(l)}onEvent(l){if(this.hasEventBeenHandled(l))return!1;let d=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(l,g)&&(d=!0,this.sendToConsumer(l,g),this.saveEventToCache(l))}),this.hasHandledPotentialRedirect||!function _x(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PD(p);default:return!1}}(l)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=l,d=!0)),d}sendToConsumer(l,d){var g;if(l.error&&!PD(l)){const E=(null===(g=l.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";d.onError(xt(this.auth,E))}else d.onAuthEvent(l)}isEventForConsumer(l,d){const g=null===d.eventId||!!l.eventId&&l.eventId===d.eventId;return d.filter.includes(l.type)&&g}hasEventBeenHandled(l){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(vm(l))}saveEventToCache(l){this.cachedEventUids.add(vm(l)),this.lastProcessedEventTime=Date.now()}}function vm(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(l=>l).join("-")}function PD({type:p,error:l}){return"unknown"===p&&"auth/no-auth-event"===l?.code}function Em(p){return tf.apply(this,arguments)}function tf(){return(tf=(0,T.A)(function*(p,l={}){return ue(p,"GET","/v1/projects",l)})).apply(this,arguments)}const nf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mi=/^https?/;function rf(){return(rf=(0,T.A)(function*(p){if(p.config.emulator)return;const{authorizedDomains:l}=yield Em(p);for(const d of l)try{if(To(d))return}catch{}Ye(p,"unauthorized-domain")})).apply(this,arguments)}function To(p){const l=nn(),{protocol:d,hostname:g}=new URL(l);if(p.startsWith("chrome-extension://")){const M=new URL(p);return""===M.hostname&&""===g?"chrome-extension:"===d&&p.replace("chrome-extension://","")===l.replace("chrome-extension://",""):"chrome-extension:"===d&&M.hostname===g}if(!mi.test(d))return!1;if(nf.test(p))return g===p;const E=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+E+"|"+E+")$","i").test(g)}const qs=new yo(3e4,6e4);function F0(){const p=Cn().___jsl;if(p?.H)for(const l of Object.keys(p.H))if(p.H[l].r=p.H[l].r||[],p.H[l].L=p.H[l].L||[],p.H[l].r=[...p.H[l].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}let sf=null;const bm=new yo(5e3,15e3),af={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function V0(p){const l=p.config;he(l.authDomain,p,"auth-domain-config-required");const d=l.emulator?Xa(l,"emulator/auth/iframe"):`https://${p.config.authDomain}/__/auth/iframe`,g={apiKey:l.apiKey,appName:p.name,v:Ce.SDK_VERSION},E=xD.get(p.config.apiHost);E&&(g.eid=E);const w=p._getFrameworks();return w.length&&(g.fw=w.join(",")),`${d}?${(0,ee.Am)(g).slice(1)}`}function cf(){return cf=(0,T.A)(function*(p){const l=yield function OD(p){return sf=sf||function L0(p){return new Promise((l,d)=>{var g,E,w;function M(){F0(),gapi.load("gapi.iframes",{callback:()=>{l(gapi.iframes.getContext())},ontimeout:()=>{F0(),d(xt(p,"network-request-failed"))},timeout:qs.get()})}if(null!==(E=null===(g=Cn().gapi)||void 0===g?void 0:g.iframes)&&void 0!==E&&E.Iframe)l(gapi.iframes.getContext());else{if(null===(w=Cn().gapi)||void 0===w||!w.load){const V=Ih("iframefcb");return Cn()[V]=()=>{gapi.load?M():d(xt(p,"network-request-failed"))},l0(`${function wr(){return bn.gapiScript}()}?onload=${V}`).catch(Y=>d(Y))}M()}}).catch(l=>{throw sf=null,l})}(p),sf}(p),d=Cn().gapi;return he(d,p,"internal-error"),l.open({where:document.body,url:V0(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:af,dontclear:!0},g=>new Promise(function(){var E=(0,T.A)(function*(w,M){yield g.restyle({setHideOnLeave:!1});const V=xt(p,"network-request-failed"),Y=Cn().setTimeout(()=>{M(V)},bm.get());function Ie(){Cn().clearTimeout(Y),w(g)}g.ping(Ie).then(Ie,()=>{M(V)})});return function(w,M){return E.apply(this,arguments)}}()))}),cf.apply(this,arguments)}const B0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Br{constructor(l){this.window=l,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const VD=encodeURIComponent("fac");function Cm(p,l,d,g,E,w){return lf.apply(this,arguments)}function lf(){return(lf=(0,T.A)(function*(p,l,d,g,E,w){he(p.config.authDomain,p,"auth-domain-config-required"),he(p.config.apiKey,p,"invalid-api-key");const M={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:g,v:Ce.SDK_VERSION,eventId:E};if(l instanceof fa){l.setDefaultLanguage(p.languageCode),M.providerId=l.providerId||"",(0,ee.Im)(l.getCustomParameters())||(M.customParameters=JSON.stringify(l.getCustomParameters()));for(const[Oe,Te]of Object.entries(w||{}))M[Oe]=Te}if(l instanceof Su){const Oe=l.getScopes().filter(Te=>""!==Te);Oe.length>0&&(M.scopes=Oe.join(","))}p.tenantId&&(M.tid=p.tenantId);const V=M;for(const Oe of Object.keys(V))void 0===V[Oe]&&delete V[Oe];const Y=yield p._getAppCheckToken(),Ie=Y?`#${VD}=${encodeURIComponent(Y)}`:"";return`${function H0({config:p}){return p.emulator?Xa(p,"emulator/auth/handler"):`https://${p.authDomain}/__/auth/handler`}(p)}?${(0,ee.Am)(V).slice(1)}${Ie}`})).apply(this,arguments)}const Ec="webStorageSupport",$0=class _s{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ve,this._completeRedirectFn=vt,this._overrideRedirectResult=pm}_openPopup(l,d,g,E){var w=this;return(0,T.A)(function*(){var M;En(null===(M=w.eventManagers[l._key()])||void 0===M?void 0:M.manager,"_initialize() not called before _openPopup()");const V=yield Cm(l,d,g,nn(),E);return function vc(p,l,d,g=500,E=600){const w=Math.max((window.screen.availHeight-E)/2,0).toString(),M=Math.max((window.screen.availWidth-g)/2,0).toString();let V="";const Y=Object.assign(Object.assign({},B0),{width:g.toString(),height:E.toString(),top:w,left:M}),Ie=(0,ee.ZQ)().toLowerCase();d&&(V=Ri(Ie)?"_blank":d),Lt(Ie)&&(l=l||"http://localhost",Y.scrollbars="yes");const Oe=Object.entries(Y).reduce((rt,[An,no])=>`${rt}${An}=${no},`,"");if(function K(p=(0,ee.ZQ)()){var l;return sc(p)&&!(null===(l=window.navigator)||void 0===l||!l.standalone)}(Ie)&&"_self"!==V)return function gn(p,l){const d=document.createElement("a");d.href=p,d.target=l;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(g)}(l||"",V),new Br(null);const Te=window.open(l||"",V,Oe);he(Te,p,"popup-blocked");try{Te.focus()}catch{}return new Br(Te)}(l,V,Oi())})()}_openRedirect(l,d,g,E){var w=this;return(0,T.A)(function*(){return yield w._originValidation(l),function Fn(p){Cn().location.href=p}(yield Cm(l,d,g,nn(),E)),new Promise(()=>{})})()}_initialize(l){const d=l._key();if(this.eventManagers[d]){const{manager:E,promise:w}=this.eventManagers[d];return E?Promise.resolve(E):(En(w,"If manager is not set, promise should be"),w)}const g=this.initAndGetManager(l);return this.eventManagers[d]={promise:g},g.catch(()=>{delete this.eventManagers[d]}),g}initAndGetManager(l){var d=this;return(0,T.A)(function*(){const g=yield function wm(p){return cf.apply(this,arguments)}(l),E=new ef(l);return g.register("authEvent",w=>(he(w?.authEvent,l,"invalid-auth-event"),{status:E.onEvent(w.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[l._key()]={manager:E},d.iframes[l._key()]=g,E})()}_isIframeWebStorageSupported(l,d){this.iframes[l._key()].send(Ec,{type:Ec},E=>{var w;const M=null===(w=E?.[0])||void 0===w?void 0:w[Ec];void 0!==M&&d(!!M),Ye(l,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(l){const d=l._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Ws(p){return rf.apply(this,arguments)}(l)),this.originValidationPromises[d]}get _shouldInitProactively(){return oe()||Je()||sc()}};class uf{constructor(l){this.factorId=l}_process(l,d,g){switch(d.type){case"enroll":return this._finalizeEnroll(l,d.credential,g);case"signin":return this._finalizeSignIn(l,d.credential);default:return wn("unexpected MultiFactorSessionType")}}}class gl extends uf{constructor(l){super("phone"),this.credential=l}static _fromCredential(l){return new gl(l)}_finalizeEnroll(l,d,g){return function sl(p,l){return ue(p,"POST","/v2/accounts/mfaEnrollment:finalize",le(p,l))}(l,{idToken:d,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(l,d){return function fx(p,l){return ue(p,"POST","/v2/accounts/mfaSignIn:finalize",le(p,l))}(l,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let df=(()=>{class p{constructor(){}static assertion(d){return gl._fromCredential(d)}}return p.FACTOR_ID="phone",p})();var bc="@firebase/auth";class Sm{constructor(l){this.auth=l,this.internalListeners=new Map}getUid(){var l;return this.assertAuthConfigured(),(null===(l=this.auth.currentUser)||void 0===l?void 0:l.uid)||null}getToken(l){var d=this;return(0,T.A)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(l)}:null})()}addAuthTokenListener(l){if(this.assertAuthConfigured(),this.internalListeners.has(l))return;const d=this.auth.onIdTokenChanged(g=>{l(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(l,d),this.updateProactiveRefresh()}removeAuthTokenListener(l){this.assertAuthConfigured();const d=this.internalListeners.get(l);d&&(this.internalListeners.delete(l),d(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ya(){return window}function Zu(){return Zu=(0,T.A)(function*(p,l,d){var g;const{BuildInfo:E}=ya();En(l.sessionId,"AuthEvent did not contain a session ID");const w=yield function q0(p){return pf.apply(this,arguments)}(l.sessionId),M={};return sc()?M.ibi=E.packageName:ha()?M.apn=E.packageName:Ye(p,"operation-not-supported-in-this-environment"),E.displayName&&(M.appDisplayName=E.displayName),M.sessionId=w,Cm(p,d,l.type,void 0,null!==(g=l.eventId)&&void 0!==g?g:void 0,M)}),Zu.apply(this,arguments)}function Nm(){return(Nm=(0,T.A)(function*(p){const{BuildInfo:l}=ya(),d={};sc()?d.iosBundleId=l.packageName:ha()?d.androidPackageName=l.packageName:Ye(p,"operation-not-supported-in-this-environment"),yield Em(p,d)})).apply(this,arguments)}function yl(){return(yl=(0,T.A)(function*(p,l,d){const{cordova:g}=ya();let E=()=>{};try{yield new Promise((w,M)=>{let V=null;function Y(){var Te;w();const rt=null===(Te=g.plugins.browsertab)||void 0===Te?void 0:Te.close;"function"==typeof rt&&rt(),"function"==typeof d?.close&&d.close()}function Ie(){V||(V=window.setTimeout(()=>{M(xt(p,"redirect-cancelled-by-user"))},2e3))}function Oe(){"visible"===document?.visibilityState&&Ie()}l.addPassiveListener(Y),document.addEventListener("resume",Ie,!1),ha()&&document.addEventListener("visibilitychange",Oe,!1),E=()=>{l.removePassiveListener(Y),document.removeEventListener("resume",Ie,!1),document.removeEventListener("visibilitychange",Oe,!1),V&&window.clearTimeout(V)}})}finally{E()}})).apply(this,arguments)}function pf(){return(pf=(0,T.A)(function*(p){const l=function $D(p){if(En(/[0-9a-zA-Z]+/.test(p),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(p);const l=new ArrayBuffer(p.length),d=new Uint8Array(l);for(let g=0;g<p.length;g++)d[g]=p.charCodeAt(g);return d}(p),d=yield crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(d)).map(E=>E.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}(0,ee.XA)("authIdTokenMaxAge"),function QO(p){bn=p}({loadJS:p=>new Promise((l,d)=>{const g=document.createElement("script");g.setAttribute("src",p),g.onload=l,g.onerror=E=>{const w=xt("internal-error");w.customData=E,d(w)},g.type="text/javascript",g.charset="UTF-8",function z0(){var p,l;return null!==(l=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==l?l:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function BD(p){(0,Ce._registerComponent)(new He.uA("auth",(l,{options:d})=>{const g=l.getProvider("app").getImmediate(),E=l.getProvider("heartbeat"),w=l.getProvider("app-check-internal"),{apiKey:M,authDomain:V}=g.options;he(M&&!M.includes(":"),"invalid-api-key",{appName:g.name});const Y={apiKey:M,authDomain:V,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Se(p)},Ie=new Ni(g,E,w,Y);return function it(p,l){const d=l?.persistence||[],g=(Array.isArray(d)?d:[d]).map(q);l?.errorMap&&p._updateErrorMap(l.errorMap),p._initializeWithPersistence(g,l?.popupRedirectResolver)}(Ie,d),Ie},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((l,d,g)=>{l.getProvider("auth-internal").initialize()})),(0,Ce._registerComponent)(new He.uA("auth-internal",l=>{const d=Mt(l.getProvider("auth").getImmediate());return new Sm(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ce.registerVersion)(bc,"1.10.2",function Rm(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,Ce.registerVersion)(bc,"1.10.2","esm2017")}("Browser");class GD extends ef{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(l=>{this.resolveInitialized=l})}addPassiveListener(l){this.passiveListeners.add(l)}removePassiveListener(l){this.passiveListeners.delete(l)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(l){return this.resolveInitialized(),this.passiveListeners.forEach(d=>d(l)),super.onEvent(l)}initialized(){var l=this;return(0,T.A)(function*(){yield l.initPromise})()}}function Om(p){return vl.apply(this,arguments)}function vl(){return(vl=(0,T.A)(function*(p){const l=yield mf()._get(_f(p));return l&&(yield mf()._remove(_f(p))),l})).apply(this,arguments)}function zD(){const p=[];for(let d=0;d<20;d++){const g=Math.floor(62*Math.random());p.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(g))}return p.join("")}function mf(){return q(ma)}function _f(p){return Qt("authEvent",p.config.apiKey,p.name)}function yf(p){if(!p?.includes("?"))return{};const[l,...d]=p.split("?");return(0,ee.I9)(d.join("?"))}const WD=class td{constructor(){this._redirectPersistence=Ve,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=vt,this._overrideRedirectResult=pm}_initialize(l){var d=this;return(0,T.A)(function*(){const g=l._key();let E=d.eventManagers.get(g);return E||(E=new GD(l),d.eventManagers.set(g,E),d.attachCallbackListeners(l,E)),E})()}_openPopup(l){Ye(l,"operation-not-supported-in-this-environment")}_openRedirect(l,d,g,E){var w=this;return(0,T.A)(function*(){!function Ex(p){var l,d,g,E,w,M,V,Y,Ie,Oe;const Te=ya();he("function"==typeof(null===(l=Te?.universalLinks)||void 0===l?void 0:l.subscribe),p,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),he(typeof(null===(d=Te?.BuildInfo)||void 0===d?void 0:d.packageName)<"u",p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),he("function"==typeof(null===(w=null===(E=null===(g=Te?.cordova)||void 0===g?void 0:g.plugins)||void 0===E?void 0:E.browsertab)||void 0===w?void 0:w.openUrl),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),he("function"==typeof(null===(Y=null===(V=null===(M=Te?.cordova)||void 0===M?void 0:M.plugins)||void 0===V?void 0:V.browsertab)||void 0===Y?void 0:Y.isAvailable),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),he("function"==typeof(null===(Oe=null===(Ie=Te?.cordova)||void 0===Ie?void 0:Ie.InAppBrowser)||void 0===Oe?void 0:Oe.open),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(l);const M=yield w._initialize(l);yield M.initialized(),M.resetRedirect(),function fm(){_c.clear()}(),yield w._originValidation(l);const V=function gf(p,l,d=null){return{type:l,eventId:d,urlResponse:null,sessionId:zD(),postBody:null,tenantId:p.tenantId,error:xt(p,"no-auth-event")}}(l,g,E);yield function Pm(p,l){return mf()._set(_f(p),l)}(l,V);const Y=yield function W0(p,l,d){return Zu.apply(this,arguments)}(l,V,d),Ie=yield function ed(p){const{cordova:l}=ya();return new Promise(d=>{l.plugins.browsertab.isAvailable(g=>{let E=null;g?l.plugins.browsertab.openUrl(p):E=l.InAppBrowser.open(p,function jo(p=(0,ee.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}()?"_blank":"_system","location=yes"),d(E)})})}(Y);return function Mm(p,l,d){return yl.apply(this,arguments)}(l,M,Ie)})()}_isIframeWebStorageSupported(l,d){throw new Error("Method not implemented.")}_originValidation(l){const d=l._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Xu(p){return Nm.apply(this,arguments)}(l)),this.originValidationPromises[d]}attachCallbackListeners(l,d){const{universalLinks:g,handleOpenURL:E,BuildInfo:w}=ya(),M=setTimeout((0,T.A)(function*(){yield Om(l),d.onEvent(km())}),500),V=function(){var Oe=(0,T.A)(function*(Te){clearTimeout(M);const rt=yield Om(l);let An=null;rt&&Te?.url&&(An=function xm(p,l){var d,g;const E=function Q0(p){const l=yf(p),d=l.link?decodeURIComponent(l.link):void 0,g=yf(d).link,E=l.deep_link_id?decodeURIComponent(l.deep_link_id):void 0;return yf(E).link||E||g||d||p}(l);if(E.includes("/__/auth/callback")){const w=yf(E),M=w.firebaseError?function K0(p){try{return JSON.parse(p)}catch{return null}}(decodeURIComponent(w.firebaseError)):null,V=null===(g=null===(d=M?.code)||void 0===d?void 0:d.split("auth/"))||void 0===g?void 0:g[1],Y=V?xt(V):null;return Y?{type:p.type,eventId:p.eventId,tenantId:p.tenantId,error:Y,urlResponse:null,sessionId:null,postBody:null}:{type:p.type,eventId:p.eventId,tenantId:p.tenantId,sessionId:p.sessionId,urlResponse:E,postBody:null}}return null}(rt,Te.url)),d.onEvent(An||km())});return function(rt){return Oe.apply(this,arguments)}}();typeof g<"u"&&"function"==typeof g.subscribe&&g.subscribe(null,V);const Y=E,Ie=`${w.packageName.toLowerCase()}://`;ya().handleOpenURL=function(){var Oe=(0,T.A)(function*(Te){if(Te.toLowerCase().startsWith(Ie)&&V({url:Te}),"function"==typeof Y)try{Y(Te)}catch(rt){console.error(rt)}});return function(Te){return Oe.apply(this,arguments)}}()}};function km(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:xt("no-auth-event")}}function nd(){var p;return(null===(p=self?.location)||void 0===p?void 0:p.protocol)||null}function Ef(p=(0,ee.ZQ)()){return!("file:"!==nd()&&"ionic:"!==nd()&&"capacitor:"!==nd()||!p.toLowerCase().match(/iphone|ipad|ipod|android/))}function Fm(){try{const p=self.localStorage,l=Oi();if(p)return p.setItem(l,"1"),p.removeItem(l),!function KD(p=(0,ee.ZQ)()){return function J0(){return(0,ee.lT)()&&11===document?.documentMode}()||function Ea(p=(0,ee.ZQ)()){return/Edge\/\d+/.test(p)}(p)}()||(0,ee.zW)()}catch{return rd()&&(0,ee.zW)()}return!1}function rd(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function El(){return(function fn(){return"http:"===nd()||"https:"===nd()}()||(0,ee.sr)()||Ef())&&!function qD(){return(0,ee.lV)()||(0,ee.Ll)()}()&&Fm()&&!rd()}function Lm(){return Ef()&&typeof document<"u"}function Vm(){return(Vm=(0,T.A)(function*(){return!!Lm()&&new Promise(p=>{const l=setTimeout(()=>{p(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(l),p(!0)})})})).apply(this,arguments)}const ki={LOCAL:"local",NONE:"none",SESSION:"session"},id=he,Bm="persistence";function Um(p){return Z0.apply(this,arguments)}function Z0(){return(Z0=(0,T.A)(function*(p){yield p._initializationPromise;const l=jm(),d=Qt(Bm,p.config.apiKey,p.name);l&&l.setItem(d,p._getPersistenceType())})).apply(this,arguments)}function jm(){var p;try{return(null===(p=function YD(){return typeof window<"u"?window:null}())||void 0===p?void 0:p.sessionStorage)||null}catch{return null}}const Wt=he;class Tc{constructor(){this.browserResolver=q($0),this.cordovaResolver=q(WD),this.underlyingResolver=null,this._redirectPersistence=Ve,this._completeRedirectFn=vt,this._overrideRedirectResult=pm}_initialize(l){var d=this;return(0,T.A)(function*(){return yield d.selectUnderlyingResolver(),d.assertedUnderlyingResolver._initialize(l)})()}_openPopup(l,d,g,E){var w=this;return(0,T.A)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._openPopup(l,d,g,E)})()}_openRedirect(l,d,g,E){var w=this;return(0,T.A)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._openRedirect(l,d,g,E)})()}_isIframeWebStorageSupported(l,d){this.assertedUnderlyingResolver._isIframeWebStorageSupported(l,d)}_originValidation(l){return this.assertedUnderlyingResolver._originValidation(l)}get _shouldInitProactively(){return Lm()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Wt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var l=this;return(0,T.A)(function*(){if(l.underlyingResolver)return;const d=yield function QD(){return Vm.apply(this,arguments)}();l.underlyingResolver=d?l.cordovaResolver:l.browserResolver})()}}function eE(p){return p.unwrap()}function tE(p){return Hm(p)}function Hm(p){const{_tokenResponse:l}=p instanceof ee.g?p.customData:p;if(!l)return null;if(!(p instanceof ee.g)&&"temporaryProof"in l&&"phoneNumber"in l)return qu.credentialFromResult(p);const d=l.providerId;if(!d||"password"===d)return null;let g;switch(d){case"google.com":g=Wg;break;case"facebook.com":g=Mh;break;case"github.com":g=Ru;break;case"twitter.com":g=_0;break;default:const{oauthIdToken:E,oauthAccessToken:w,oauthTokenSecret:M,pendingToken:V,nonce:Y}=l;return w||M||E||V?V?d.startsWith("saml.")?nl._create(d,V):kr._fromParams({providerId:d,signInMethod:d,pendingToken:V,idToken:E,accessToken:w}):new Eo(d).credential({idToken:E,accessToken:w,rawNonce:Y}):null}return p instanceof ee.g?g.credentialFromError(p):g.credentialFromResult(p)}function Fi(p,l){return l.catch(d=>{throw d instanceof ee.g&&function to(p,l){var d;const g=null===(d=l.customData)||void 0===d?void 0:d._tokenResponse;if("auth/multi-factor-auth-required"===l?.code)l.resolver=new Ix(p,function Lr(p,l){var d;const g=(0,ee.Ku)(p),E=l;return he(l.customData.operationType,g,"argument-error"),he(null===(d=E.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,g,"argument-error"),Fr._fromError(g,E)}(p,l));else if(g){const E=Hm(l),w=l;E&&(w.credential=E,w.tenantId=g.tenantId||void 0,w.email=g.email||void 0,w.phoneNumber=g.phoneNumber||void 0)}}(p,d),d}).then(d=>{const E=d.user;return{operationType:d.operationType,credential:tE(d),additionalUserInfo:w0(d),user:vs.getOrCreate(E)}})}function qo(p,l){return wc.apply(this,arguments)}function wc(){return(wc=(0,T.A)(function*(p,l){const d=yield l;return{verificationId:d.verificationId,confirm:g=>Fi(p,d.confirm(g))}})).apply(this,arguments)}class Ix{constructor(l,d){this.resolver=d,this.auth=function bx(p){return p.wrapped()}(l)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(l){return Fi(eE(this.auth),this.resolver.resolveSignIn(l))}}class vs{constructor(l){this._delegate=l,this.multiFactor=function Wh(p){const l=(0,ee.Ku)(p);return js.has(l)||js.set(l,ot._fromUser(l)),js.get(l)}(l)}static getOrCreate(l){return vs.USER_MAP.has(l)||vs.USER_MAP.set(l,new vs(l)),vs.USER_MAP.get(l)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(l){return this._delegate.getIdTokenResult(l)}getIdToken(l){return this._delegate.getIdToken(l)}linkAndRetrieveDataWithCredential(l){return this.linkWithCredential(l)}linkWithCredential(l){var d=this;return(0,T.A)(function*(){return Fi(d.auth,Qg(d._delegate,l))})()}linkWithPhoneNumber(l,d){var g=this;return(0,T.A)(function*(){return qo(g.auth,function DD(p,l,d){return Gu.apply(this,arguments)}(g._delegate,l,d))})()}linkWithPopup(l){var d=this;return(0,T.A)(function*(){return Fi(d.auth,function dl(p,l,d){return hl.apply(this,arguments)}(d._delegate,l,Tc))})()}linkWithRedirect(l){var d=this;return(0,T.A)(function*(){return yield Um(Mt(d.auth)),function MD(p,l,d){return function J(p,l,d){return ct.apply(this,arguments)}(p,l,d)}(d._delegate,l,Tc)})()}reauthenticateAndRetrieveDataWithCredential(l){return this.reauthenticateWithCredential(l)}reauthenticateWithCredential(l){var d=this;return(0,T.A)(function*(){return Fi(d.auth,Pi(d._delegate,l))})()}reauthenticateWithPhoneNumber(l,d){return qo(this.auth,function CD(p,l,d){return Yt.apply(this,arguments)}(this._delegate,l,d))}reauthenticateWithPopup(l){return Fi(this.auth,function Ku(p,l,d){return Qu.apply(this,arguments)}(this._delegate,l,Tc))}reauthenticateWithRedirect(l){var d=this;return(0,T.A)(function*(){return yield Um(Mt(d.auth)),function RD(p,l,d){return function ND(p,l,d){return _m.apply(this,arguments)}(p,l,d)}(d._delegate,l,Tc)})()}sendEmailVerification(l){return function cr(p,l){return Bs.apply(this,arguments)}(this._delegate,l)}unlink(l){var d=this;return(0,T.A)(function*(){return yield function lD(p,l){return ps.apply(this,arguments)}(d._delegate,l),d})()}updateEmail(l){return function hD(p,l){const d=(0,ee.Ku)(p);return(0,Ce._isFirebaseServerApp)(d.auth.app)?Promise.reject(je(d.auth)):T0(d,l,null)}(this._delegate,l)}updatePassword(l){return function fD(p,l){return T0((0,ee.Ku)(p),null,l)}(this._delegate,l)}updatePhoneNumber(l){return function Bt(p,l){return Wu.apply(this,arguments)}(this._delegate,l)}updateProfile(l){return function Lu(p,l){return pa.apply(this,arguments)}(this._delegate,l)}verifyBeforeUpdateEmail(l,d){return function nm(p,l,d){return rm.apply(this,arguments)}(this._delegate,l,d)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}vs.USER_MAP=new WeakMap;const Dc=he;let Es=(()=>{class p{constructor(d,g){if(this.app=d,g.isInitialized())return this._delegate=g.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:E}=d.options;Dc(E,"invalid-api-key",{appName:d.name}),Dc(E,"invalid-api-key",{appName:d.name});const w=typeof window<"u"?Tc:void 0;this._delegate=g.initialize({options:{persistence:ZD(E,d.name),popupRedirectResolver:w}}),this._delegate._updateErrorMap(dr),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?vs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(d){this._delegate.languageCode=d}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(d){this._delegate.tenantId=d}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(d,g){!function nD(p,l,d){const g=Mt(p);he(/^https?:\/\//.test(l),g,"invalid-emulator-scheme");const E=!!d?.disableWarnings,w=rD(l),{host:M,port:V}=function XO(p){const l=rD(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(l.length));if(!d)return{host:"",port:null};const g=d[2].split("@").pop()||"",E=/^(\[[^\]]+\])(:|$)/.exec(g);if(E){const w=E[1];return{host:w,port:iD(g.substr(w.length+1))}}{const[w,M]=g.split(":");return{host:w,port:iD(M)}}}(l),Y=null===V?"":`:${V}`,Ie={url:`${w}//${M}${Y}/`},Oe=Object.freeze({host:M,port:V,protocol:w.replace(":",""),options:Object.freeze({disableWarnings:E})});if(!g._canInitEmulator)return he(g.config.emulator&&g.emulatorConfig,g,"emulator-config-failed"),void he((0,ee.bD)(Ie,g.config.emulator)&&(0,ee.bD)(Oe,g.emulatorConfig),g,"emulator-config-failed");g.config.emulator=Ie,g.emulatorConfig=Oe,g.settings.appVerificationDisabledForTesting=!0,E||function ex(){function p(){const l=document.createElement("p"),d=l.style;l.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",l.classList.add("firebase-emulator-warning"),document.body.appendChild(l)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}(),(0,ee.zJ)(M)&&(0,ee.gE)(`${w}//${M}${Y}`)}(this._delegate,d,g)}applyActionCode(d){return function sx(p,l){return Jg.apply(this,arguments)}(this._delegate,d)}checkActionCode(d){return Vh(this._delegate,d)}confirmPasswordReset(d,g){return function hc(p,l,d){return gs.apply(this,arguments)}(this._delegate,d,g)}createUserWithEmailAndPassword(d,g){var E=this;return(0,T.A)(function*(){return Fi(E._delegate,function Zg(p,l,d){return Xg.apply(this,arguments)}(E._delegate,d,g))})()}fetchProvidersForEmail(d){return this.fetchSignInMethodsForEmail(d)}fetchSignInMethodsForEmail(d){return function tm(p,l){return il.apply(this,arguments)}(this._delegate,d)}isSignInWithEmailLink(d){return function fc(p,l){const d=tl.parseLink(l);return"EMAIL_SIGNIN"===d?.operation}(0,d)}getRedirectResult(){var d=this;return(0,T.A)(function*(){Dc(El(),d._delegate,"operation-not-supported-in-this-environment");const g=yield function Vr(p,l){return gr.apply(this,arguments)}(d._delegate,Tc);return g?Fi(d._delegate,Promise.resolve(g)):{credential:null,user:null}})()}addFrameworkForLogging(d){!function Y0(p,l){Mt(p)._logFramework(l)}(this._delegate,d)}onAuthStateChanged(d,g,E){const{next:w,error:M,complete:V}=bf(d,g,E);return this._delegate.onAuthStateChanged(w,M,V)}onIdTokenChanged(d,g,E){const{next:w,error:M,complete:V}=bf(d,g,E);return this._delegate.onIdTokenChanged(w,M,V)}sendSignInLinkToEmail(d,g){return function I0(p,l,d){return jh.apply(this,arguments)}(this._delegate,d,g)}sendPasswordResetEmail(d,g){return function Wr(p,l,d){return pi.apply(this,arguments)}(this._delegate,d,g||void 0)}setPersistence(d){var g=this;return(0,T.A)(function*(){let E;switch(function JD(p,l){id(Object.values(ki).includes(l),p,"invalid-persistence-type"),(0,ee.lV)()?id(l!==ki.SESSION,p,"unsupported-persistence-type"):(0,ee.Ll)()?id(l===ki.NONE,p,"unsupported-persistence-type"):rd()?id(l===ki.NONE||l===ki.LOCAL&&(0,ee.zW)(),p,"unsupported-persistence-type"):id(l===ki.NONE||Fm(),p,"unsupported-persistence-type")}(g._delegate,d),d){case ki.SESSION:E=Ve;break;case ki.LOCAL:E=(yield q($u)._isAvailable())?$u:ma;break;case ki.NONE:E=Re;break;default:return Ye("argument-error",{appName:g._delegate.name})}return g._delegate.setPersistence(E)})()}signInAndRetrieveDataWithCredential(d){return this.signInWithCredential(d)}signInAnonymously(){return Fi(this._delegate,function qg(p){return cc.apply(this,arguments)}(this._delegate))}signInWithCredential(d){return Fi(this._delegate,uc(this._delegate,d))}signInWithCustomToken(d){return Fi(this._delegate,function Go(p,l){return Vt.apply(this,arguments)}(this._delegate,d))}signInWithEmailAndPassword(d,g){return Fi(this._delegate,function em(p,l,d){return(0,Ce._isFirebaseServerApp)(p.app)?Promise.reject(je(p)):uc((0,ee.Ku)(p),Nh.credential(l,d)).catch(function(){var g=(0,T.A)(function*(E){throw"auth/password-does-not-meet-requirements"===E.code&&fi(p),E});return function(E){return g.apply(this,arguments)}}())}(this._delegate,d,g))}signInWithEmailLink(d,g){return Fi(this._delegate,function uD(p,l,d){return Fu.apply(this,arguments)}(this._delegate,d,g))}signInWithPhoneNumber(d,g){return qo(this._delegate,function P0(p,l,d){return Yh.apply(this,arguments)}(this._delegate,d,g))}signInWithPopup(d){var g=this;return(0,T.A)(function*(){return Dc(El(),g._delegate,"operation-not-supported-in-this-environment"),Fi(g._delegate,function dm(p,l,d){return Zh.apply(this,arguments)}(g._delegate,d,Tc))})()}signInWithRedirect(d){var g=this;return(0,T.A)(function*(){return Dc(El(),g._delegate,"operation-not-supported-in-this-environment"),yield Um(g._delegate),function gm(p,l,d){return function yc(p,l,d){return mm.apply(this,arguments)}(p,l,d)}(g._delegate,d,Tc)})()}updateCurrentUser(d){return this._delegate.updateCurrentUser(d)}verifyPasswordResetCode(d){return function Uh(p,l){return b0.apply(this,arguments)}(this._delegate,d)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return p.Persistence=ki,p})();function bf(p,l,d){let g=p;"function"!=typeof p&&({next:g,error:l,complete:d}=p);const E=g;return{next:M=>E(M&&vs.getOrCreate(M)),error:l,complete:d}}function ZD(p,l){const d=function X0(p,l){const d=jm();if(!d)return[];const g=Qt(Bm,p,l);switch(d.getItem(g)){case ki.NONE:return[Re];case ki.LOCAL:return[$u,Ve];case ki.SESSION:return[Ve];default:return[]}}(p,l);if(typeof self<"u"&&!d.includes($u)&&d.push($u),typeof window<"u")for(const g of[ma,Ve])d.includes(g)||d.push(g);return d.includes(Re)||d.push(Re),d}class Xe{static credential(l,d){return qu.credential(l,d)}constructor(){this.providerId="phone",this._delegate=new qu(eE(st.A.auth()))}verifyPhoneNumber(l,d){return this._delegate.verifyPhoneNumber(l,d)}unwrap(){return this._delegate}}Xe.PHONE_SIGN_IN_METHOD=qu.PHONE_SIGN_IN_METHOD,Xe.PROVIDER_ID=qu.PROVIDER_ID;const od=he;class nE{constructor(l,d,g=st.A.app()){var E;od(null===(E=g.options)||void 0===E?void 0:E.apiKey,"invalid-api-key",{appName:g.name}),this._delegate=new M0(g.auth(),l,d),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Tx(p){p.INTERNAL.registerComponent(new He.uA("auth-compat",l=>{const d=l.getProvider("app-compat").getImmediate(),g=l.getProvider("auth");return new Es(d,g)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Nh,FacebookAuthProvider:Mh,GithubAuthProvider:Ru,GoogleAuthProvider:Wg,OAuthProvider:Eo,SAMLAuthProvider:Nu,PhoneAuthProvider:Xe,PhoneMultiFactorGenerator:df,RecaptchaVerifier:nE,TwitterAuthProvider:_0,Auth:Es,AuthCredential:fe,Error:ee.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),p.registerVersion("@firebase/auth-compat","0.5.22")}(st.A)}},_o=>{var Tr=T=>_o(_o.s=T);Tr(532),Tr(647)}]);